<div class="login-container" *ngIf="!isSignedIn">
  <div class="login-illustration"></div>

  <div class="login-form">
    <div class="form-box mat-elevation-z8">
      <img class="logo-icon" src="assets/img/logo.png" alt="Logo" />

      <h3>{{ isSignup ? "Create an Account" : "Welcome Back" }}</h3>
      <p class="sub-text">
        {{ isSignup ? "Sign up to get started" : "Login to continue" }}
      </p>

      <form #authForm="ngForm" autocomplete="off">
        <div class="form-grid" *ngIf="isSignup">
          <mat-form-field appearance="outline">
            <mat-label>Full Name</mat-label>
            <input
              matInput
              [(ngModel)]="fullName"
              name="fullName"
              placeholder="John Doe"
            />
          </mat-form-field>

          <mat-form-field appearance="outline">
            <mat-label>Date of Birth</mat-label>
            <input
              matInput
              [matDatepicker]="picker"
              [(ngModel)]="birthDate"
              name="birthDate"
            />
            <mat-datepicker-toggle
              matSuffix
              [for]="picker"
            ></mat-datepicker-toggle>
            <mat-datepicker #picker></mat-datepicker>
          </mat-form-field>
        </div>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Email</mat-label>
          <input
            matInput
            type="email"
            [(ngModel)]="email"
            name="email"
            required
          />
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>Password</mat-label>
          <input
            matInput
            [type]="passwordVisible ? 'text' : 'password'"
            [(ngModel)]="password"
            name="password"
            required
          />
          <button
            mat-icon-button
            matSuffix
            (click)="togglePasswordVisibility()"
            type="button"
          >
            <mat-icon>{{
              passwordVisible ? "visibility" : "visibility_off"
            }}</mat-icon>
          </button>
        </mat-form-field>

        <mat-form-field
          appearance="outline"
          class="full-width"
          *ngIf="isSignup"
        >
          <mat-label>Confirm Password</mat-label>
          <input
            matInput
            [type]="passwordVisible ? 'text' : 'password'"
            [(ngModel)]="confirmPassword"
            name="confirmPassword"
            required
          />
        </mat-form-field>

        <div class="options-row" *ngIf="!isSignup">
          <mat-checkbox>Remember Me</mat-checkbox>
          <a
            class="forgot"
            *ngIf="showForgotPasswordLink"
            (click)="onForgotPassword(email)"
          >
            Forgot Password?
          </a>
        </div>

        <button
          mat-flat-button
          color="primary"
          class="login-btn"
          [disabled]="isLoading"
          (click)="
            isSignup
              ? onSignup(email, password, confirmPassword)
              : onSignin(email, password)
          "
        >
          {{ isSignup ? "Sign up" : "Login" }}
        </button>

        <p class="switch-auth">
          {{ isSignup ? "Already have an account?" : "Not Registered Yet?" }}
          <a (click)="toggleSignup()">{{
            isSignup ? "Login" : "Create an account"
          }}</a>
        </p>
      </form>

      <div class="loader" *ngIf="isLoading"></div>
    </div>
  </div>
</div>
<app-loader *ngIf="isLoading" [message]="'WELCOME'"></app-loader>
<div class="alert-container" *ngIf="showSuccess || showError">
  <app-successful-alert
    *ngIf="showSuccess"
    [message]="successMessage"
  ></app-successful-alert>

  <app-error-alert *ngIf="showError" [message]="errorMessage"></app-error-alert>
</div>

<app-sheintable *ngIf="isSignedIn" (isLogout)="handleLogout()"></app-sheintable>
