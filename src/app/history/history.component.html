<app-navigation></app-navigation>

<section>
  <div
    class="history-container"
    *ngIf="historyRecords.length > 0; else noHistory"
  >
    <h2>{{ "NAV.HISTORY" | translate }}</h2>

    <button
      mat-raised-button
      color="warn"
      (click)="deleteSelectedRecords()"
      [disabled]="!hasSelected()"
      class="bulk-delete-btn"
    >
      {{ "HISTORY.DELETE_SELECTED" | translate }}
    </button>

    <table>
      <thead>
        <tr>
          <th>
            <mat-checkbox
              [checked]="isAllSelected()"
              (change)="toggleSelectAll($event.checked)"
              aria-label="Select all records"
            >
            </mat-checkbox>
          </th>
          <th>{{ "form.client" | translate }}</th>
          <th>{{ "form.quantity" | translate }}</th>
          <th>{{ "form.cost" | translate }}</th>
          <th>{{ "form.discount" | translate }}</th>
          <th>{{ "form.delivery" | translate }}</th>
          <th>{{ "form.shippingCost" | translate }}</th>
          <th>{{ "form.tax" | translate }}</th>
          <th>{{ "form.choice" | translate }}</th>
          <th>{{ "table.profit" | translate }}</th>
          <th>Deleted At</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngFor="let record of pagedRecords">
          <td>
            <mat-checkbox
              [(ngModel)]="selection[record.id]"
              (click)="$event.stopPropagation()"
              aria-label="Select record"
            ></mat-checkbox>
          </td>
          <td>{{ record.client }}</td>
          <td>{{ record.quantity }}</td>
          <td>{{ record.cost }}</td>
          <td>{{ record.discount }}</td>
          <td>{{ record.delivery }}</td>
          <td>{{ record.shippingCost }}</td>
          <td>{{ record.tax }}</td>
          <td>{{ record.choice }}</td>
          <td>{{ record.profit }}</td>
          <td>{{ record.deletedAt?.toDate() | date : "short" }}</td>
        </tr>
      </tbody>
    </table>
  </div>

  <div class="pagination-buttons">
    <button (click)="previousPage()" [disabled]="pageIndex === 0">
      {{ "form.cancel" | translate }}
    </button>
    <button
      (click)="nextPage()"
      [disabled]="(pageIndex + 1) * pageSize >= historyRecords.length"
    >
      {{ "form.update" | translate }}
    </button>
  </div>

  <ng-template #noHistory>
    <section class="empty-state">
      <div class="empty-state__icon">ðŸ“­</div>
      <p class="empty-state__text">No deleted orders history found.</p>
    </section>
  </ng-template>
</section>
<app-footer></app-footer>
