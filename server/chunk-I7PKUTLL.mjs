import './polyfills.server.mjs';
import{a as oL,b as ja,c as aL,d as lL,e as cL,f as dL,g as uL,h as hL,i as mL,l as gL,p as s0,q as _L,r as o0,t as on,u as mS}from"./chunk-7FQ7DJI5.mjs";import{$b as Lt,$c as n0,A as Ot,Aa as yn,Ab as Yb,Ac as mt,B as oS,Ba as xn,Bb as Qb,Bc as Hc,C as Vc,Ca as $b,Cb as Xb,D as VN,Da as fe,Db as f,E as ku,Ea as ue,Eb as p,Fa as Kf,Fb as j,G as Pt,Gb as wt,Gc as be,Hb as Ct,Hc as sr,I as Ss,Ib as sn,Ic as iL,J as zN,Ja as Gr,Jb as Me,K as jN,Ka as Ut,Kb as nr,Kc as uS,La as GN,Lb as XN,Mb as $,N as $f,Nb as ZN,Nc as Ze,O as zc,Ob as W,P as Wb,Pb as nt,Q as Jo,Qb as Ee,R as Gb,Rb as gt,S as UN,Sb as $e,T as Pi,Tb as ye,U as bi,Ub as xe,Uc as e0,V as aS,Vb as yi,W as Kt,Wb as y,Wc as t0,X as HN,Xb as B,Xc as Js,Y as Va,Ya as Tu,Yb as Q,Yc as Rt,Z as qN,Za as Yf,Zb as Zs,Zc as Qf,_ as Eu,_a as Iu,_b as Nt,_c as i0,a as At,aa as Ri,ab as g,ac as Bt,ad as nL,ba as me,bb as x,bc as je,bd as rL,c as vn,ca as ce,cb as Du,cc as Re,cd as $r,db as rn,dc as Mu,e as NN,ea as te,eb as $N,ec as za,ed as sL,f as ke,fb as Kb,fc as O,fd as r0,g as Xo,ga as V,gb as KN,gc as P,h as Cu,ha as He,hb as Uc,hc as Mn,i as LN,ia as wr,ib as YN,ic as rr,j as Hb,ja as lS,jb as _e,jc as Zb,jd as Cr,k as Bc,kc as Jb,kd as An,l as Su,la as H,lb as Un,ld as ci,m as Wr,ma as ae,mb as cS,md as or,n as We,na as de,nb as Ve,nd as hS,o as BN,oa as J,ob as Ge,od as wn,p as Xs,pa as WN,pd as fL,qa as jc,qc as JN,qd as pL,r as Ue,s as qb,sb as Y,tb as Se,tc as eL,ua as ht,ub as z,v as Gf,va as ne,vb as vi,w as Zo,wa as re,wb as le,wc as tL,x as Ba,xa as bt,xb as Hn,y as sS,ya as li,yb as QN,z as _i,za as vt,zb as et,zc as dS}from"./chunk-SVTLOSXK.mjs";import{A as EL,B as qe,C as ar,D as Zi,E as bS,F as TL,G as Jf,H as ft,I as Sr,J as h0,K as vS,L as Yr,M as Ha,N as qc,O as m0,P as f0,Q as ep,R as Ou,S as p0,T as ln,U as Ei,V as WQ,a as he,b as Au,c as a0,d as bL,e as vL,f as fS,g as an,h as l0,i as Xf,j as pS,k as yL,l as eo,m as gS,n as c0,o as xL,p as wL,q as d0,r as Hi,s as CL,t as SL,u as Kr,v as Ua,w as u0,x as Zf,y as _S,z as kL}from"./chunk-KBKP4D5X.mjs";import{a as ve,b as Tt,c as Be,e as RN,f as G,h as Ub,i as nS,j as N,k as rS,l as FN}from"./chunk-H6KHSOBK.mjs";var Mt=G(Xr=>{"use strict";Object.defineProperty(Xr,"__esModule",{value:!0});Xr.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=Xr.DEFAULT_MAX_SEND_MESSAGE_LENGTH=Xr.Propagate=Xr.LogVerbosity=Xr.Status=void 0;var WL=function(i){return i[i.OK=0]="OK",i[i.CANCELLED=1]="CANCELLED",i[i.UNKNOWN=2]="UNKNOWN",i[i.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",i[i.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",i[i.NOT_FOUND=5]="NOT_FOUND",i[i.ALREADY_EXISTS=6]="ALREADY_EXISTS",i[i.PERMISSION_DENIED=7]="PERMISSION_DENIED",i[i.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",i[i.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",i[i.ABORTED=10]="ABORTED",i[i.OUT_OF_RANGE=11]="OUT_OF_RANGE",i[i.UNIMPLEMENTED=12]="UNIMPLEMENTED",i[i.INTERNAL=13]="INTERNAL",i[i.UNAVAILABLE=14]="UNAVAILABLE",i[i.DATA_LOSS=15]="DATA_LOSS",i[i.UNAUTHENTICATED=16]="UNAUTHENTICATED",i}(WL||(Xr.Status=WL={})),GL=function(i){return i[i.DEBUG=0]="DEBUG",i[i.INFO=1]="INFO",i[i.ERROR=2]="ERROR",i[i.NONE=3]="NONE",i}(GL||(Xr.LogVerbosity=GL={})),$L=function(i){return i[i.DEADLINE=1]="DEADLINE",i[i.CENSUS_STATS_CONTEXT=2]="CENSUS_STATS_CONTEXT",i[i.CENSUS_TRACING_CONTEXT=4]="CENSUS_TRACING_CONTEXT",i[i.CANCELLATION=8]="CANCELLATION",i[i.DEFAULTS=65535]="DEFAULTS",i}($L||(Xr.Propagate=$L={}));Xr.DEFAULT_MAX_SEND_MESSAGE_LENGTH=-1;Xr.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH=4*1024*1024});var RS=G((yRe,RX)=>{RX.exports={name:"@grpc/grpc-js",version:"1.9.15",description:"gRPC Library for Node - pure JS implementation",homepage:"https://grpc.io/",repository:"https://github.com/grpc/grpc-node/tree/master/packages/grpc-js",main:"build/src/index.js",engines:{node:"^8.13.0 || >=10.10.0"},keywords:[],author:{name:"Google Inc."},types:"build/src/index.d.ts",license:"Apache-2.0",devDependencies:{"@types/gulp":"^4.0.6","@types/gulp-mocha":"0.0.32","@types/lodash":"^4.14.186","@types/mocha":"^5.2.6","@types/ncp":"^2.0.1","@types/pify":"^3.0.2","@types/semver":"^7.3.9","@typescript-eslint/eslint-plugin":"^5.59.11","@typescript-eslint/parser":"^5.59.11","@typescript-eslint/typescript-estree":"^5.59.11","clang-format":"^1.0.55",eslint:"^8.42.0","eslint-config-prettier":"^8.8.0","eslint-plugin-node":"^11.1.0","eslint-plugin-prettier":"^4.2.1",execa:"^2.0.3",gulp:"^4.0.2","gulp-mocha":"^6.0.0",lodash:"^4.17.4",madge:"^5.0.1","mocha-jenkins-reporter":"^0.4.1",ncp:"^2.0.0",pify:"^4.0.1",prettier:"^2.8.8",rimraf:"^3.0.2",semver:"^7.3.5","ts-node":"^10.9.1",typescript:"^5.1.3"},contributors:[{name:"Google Inc."}],scripts:{build:"npm run compile",clean:"rimraf ./build",compile:"tsc -p .",format:'clang-format -i -style="{Language: JavaScript, BasedOnStyle: Google, ColumnLimit: 80}" src/*.ts test/*.ts',lint:"eslint src/*.ts test/*.ts",prepare:"npm run generate-types && npm run compile",test:"gulp test",check:"npm run lint",fix:"eslint --fix src/*.ts test/*.ts",pretest:"npm run generate-types && npm run generate-test-types && npm run compile",posttest:"npm run check && madge -c ./build/src","generate-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --includeDirs proto/ --include-dirs test/fixtures/ -O src/generated/ --grpcLib ../index channelz.proto","generate-test-types":"proto-loader-gen-types --keepCase --longs String --enums String --defaults --oneofs --includeComments --include-dirs test/fixtures/ -O test/generated/ --grpcLib ../../src/index test_service.proto"},dependencies:{"@grpc/proto-loader":"^0.7.8","@types/node":">=12.12.47"},files:["src/**/*.ts","build/src/**/*.{js,d.ts,js.map}","proto/*.proto","LICENSE","deps/envoy-api/envoy/api/v2/**/*.proto","deps/envoy-api/envoy/config/**/*.proto","deps/envoy-api/envoy/service/**/*.proto","deps/envoy-api/envoy/type/**/*.proto","deps/udpa/udpa/**/*.proto","deps/googleapis/google/api/*.proto","deps/googleapis/google/rpc/*.proto","deps/protoc-gen-validate/validate/**/*.proto"]}});var Ti=G(qn=>{"use strict";var FS,NS,LS,BS;Object.defineProperty(qn,"__esModule",{value:!0});qn.isTracerEnabled=qn.trace=qn.log=qn.setLoggerVerbosity=qn.setLogger=qn.getLogger=void 0;var Ka=Mt(),FX=Be("process"),NX=RS().version,LX={error:(i,...t)=>{console.error("E "+i,...t)},info:(i,...t)=>{console.error("I "+i,...t)},debug:(i,...t)=>{console.error("D "+i,...t)}},$c=LX,Ru=Ka.LogVerbosity.ERROR,BX=(NS=(FS=process.env.GRPC_NODE_VERBOSITY)!==null&&FS!==void 0?FS:process.env.GRPC_VERBOSITY)!==null&&NS!==void 0?NS:"";switch(BX.toUpperCase()){case"DEBUG":Ru=Ka.LogVerbosity.DEBUG;break;case"INFO":Ru=Ka.LogVerbosity.INFO;break;case"ERROR":Ru=Ka.LogVerbosity.ERROR;break;case"NONE":Ru=Ka.LogVerbosity.NONE;break;default:}var VX=()=>$c;qn.getLogger=VX;var zX=i=>{$c=i};qn.setLogger=zX;var jX=i=>{Ru=i};qn.setLoggerVerbosity=jX;var UX=(i,...t)=>{let e;if(i>=Ru){switch(i){case Ka.LogVerbosity.DEBUG:e=$c.debug;break;case Ka.LogVerbosity.INFO:e=$c.info;break;case Ka.LogVerbosity.ERROR:e=$c.error;break}e||(e=$c.error),e&&e.bind($c)(...t)}};qn.log=UX;var HX=(BS=(LS=process.env.GRPC_NODE_TRACE)!==null&&LS!==void 0?LS:process.env.GRPC_TRACE)!==null&&BS!==void 0?BS:"",VS=new Set,KL=new Set;for(let i of HX.split(","))i.startsWith("-")?KL.add(i.substring(1)):VS.add(i);var qX=VS.has("all");function WX(i,t,e){YL(t)&&(0,qn.log)(i,new Date().toISOString()+" | v"+NX+" "+FX.pid+" | "+t+" | "+e)}qn.trace=WX;function YL(i){return!KL.has(i)&&(qX||VS.has(i))}qn.isTracerEnabled=YL});var v0=G(Fu=>{"use strict";Object.defineProperty(Fu,"__esModule",{value:!0});Fu.getErrorCode=Fu.getErrorMessage=void 0;function GX(i){return i instanceof Error?i.message:String(i)}Fu.getErrorMessage=GX;function $X(i){return typeof i=="object"&&i!==null&&"code"in i&&typeof i.code=="number"?i.code:null}Fu.getErrorCode=$X});var lr=G(x0=>{"use strict";Object.defineProperty(x0,"__esModule",{value:!0});x0.Metadata=void 0;var KX=Ti(),YX=Mt(),QX=v0(),XX=/^[0-9a-z_.-]+$/,ZX=/^[ -~]*$/;function JX(i){return XX.test(i)}function eZ(i){return ZX.test(i)}function XL(i){return i.endsWith("-bin")}function tZ(i){return!i.startsWith("grpc-")}function y0(i){return i.toLowerCase()}function QL(i,t){if(!JX(i))throw new Error('Metadata key "'+i+'" contains illegal characters');if(t!=null)if(XL(i)){if(!Buffer.isBuffer(t))throw new Error("keys that end with '-bin' must have Buffer values")}else{if(Buffer.isBuffer(t))throw new Error("keys that don't end with '-bin' must have String values");if(!eZ(t))throw new Error('Metadata string value "'+t+'" contains illegal characters')}}var zS=class i{constructor(t={}){this.internalRepr=new Map,this.options=t}set(t,e){t=y0(t),QL(t,e),this.internalRepr.set(t,[e])}add(t,e){t=y0(t),QL(t,e);let n=this.internalRepr.get(t);n===void 0?this.internalRepr.set(t,[e]):n.push(e)}remove(t){t=y0(t),this.internalRepr.delete(t)}get(t){return t=y0(t),this.internalRepr.get(t)||[]}getMap(){let t={};for(let[e,n]of this.internalRepr)if(n.length>0){let r=n[0];t[e]=Buffer.isBuffer(r)?Buffer.from(r):r}return t}clone(){let t=new i(this.options),e=t.internalRepr;for(let[n,r]of this.internalRepr){let s=r.map(o=>Buffer.isBuffer(o)?Buffer.from(o):o);e.set(n,s)}return t}merge(t){for(let[e,n]of t.internalRepr){let r=(this.internalRepr.get(e)||[]).concat(n);this.internalRepr.set(e,r)}}setOptions(t){this.options=t}getOptions(){return this.options}toHttp2Headers(){let t={};for(let[e,n]of this.internalRepr)t[e]=n.map(iZ);return t}toJSON(){let t={};for(let[e,n]of this.internalRepr)t[e]=n;return t}static fromHttp2Headers(t){let e=new i;for(let n of Object.keys(t)){if(n.charAt(0)===":")continue;let r=t[n];try{XL(n)?Array.isArray(r)?r.forEach(s=>{e.add(n,Buffer.from(s,"base64"))}):r!==void 0&&(tZ(n)?r.split(",").forEach(s=>{e.add(n,Buffer.from(s.trim(),"base64"))}):e.add(n,Buffer.from(r,"base64"))):Array.isArray(r)?r.forEach(s=>{e.add(n,s)}):r!==void 0&&e.add(n,r)}catch(s){let o=`Failed to add metadata entry ${n}: ${r}. ${(0,QX.getErrorMessage)(s)}. For more information see https://github.com/grpc/grpc-node/issues/1173`;(0,KX.log)(YX.LogVerbosity.ERROR,o)}}return e}};x0.Metadata=zS;var iZ=i=>Buffer.isBuffer(i)?i.toString("base64"):i});var WS=G(w0=>{"use strict";Object.defineProperty(w0,"__esModule",{value:!0});w0.CallCredentials=void 0;var qS=lr();function nZ(i){return"getRequestHeaders"in i&&typeof i.getRequestHeaders=="function"}var Nu=class i{static createFromMetadataGenerator(t){return new US(t)}static createFromGoogleCredential(t){return i.createFromMetadataGenerator((e,n)=>{let r;nZ(t)?r=t.getRequestHeaders(e.service_url):r=new Promise((s,o)=>{t.getRequestMetadata(e.service_url,(a,l)=>{if(a){o(a);return}if(!l){o(new Error("Headers not set by metadata plugin"));return}s(l)})}),r.then(s=>{let o=new qS.Metadata;for(let a of Object.keys(s))o.add(a,s[a]);n(null,o)},s=>{n(s)})})}static createEmpty(){return new HS}};w0.CallCredentials=Nu;var jS=class i extends Nu{constructor(t){super(),this.creds=t}generateMetadata(t){return N(this,null,function*(){let e=new qS.Metadata,n=yield Promise.all(this.creds.map(r=>r.generateMetadata(t)));for(let r of n)e.merge(r);return e})}compose(t){return new i(this.creds.concat([t]))}_equals(t){return this===t?!0:t instanceof i?this.creds.every((e,n)=>e._equals(t.creds[n])):!1}},US=class i extends Nu{constructor(t){super(),this.metadataGenerator=t}generateMetadata(t){return new Promise((e,n)=>{this.metadataGenerator(t,(r,s)=>{s!==void 0?e(s):n(r)})})}compose(t){return new jS([this,t])}_equals(t){return this===t?!0:t instanceof i?this.metadataGenerator===t.metadataGenerator:!1}},HS=class i extends Nu{generateMetadata(t){return Promise.resolve(new qS.Metadata)}compose(t){return t}_equals(t){return t instanceof i}}});var $S=G(Lu=>{"use strict";Object.defineProperty(Lu,"__esModule",{value:!0});Lu.getDefaultRootsData=Lu.CIPHER_SUITES=void 0;var rZ=Be("fs");Lu.CIPHER_SUITES=process.env.GRPC_SSL_CIPHER_SUITES;var ZL=process.env.GRPC_DEFAULT_SSL_ROOTS_FILE_PATH,GS=null;function sZ(){return ZL?(GS===null&&(GS=rZ.readFileSync(ZL)),GS):null}Lu.getDefaultRootsData=sZ});var k0=G(S0=>{"use strict";Object.defineProperty(S0,"__esModule",{value:!0});S0.ChannelCredentials=void 0;var oZ=Be("tls"),aZ=WS(),JL=$S();function KS(i,t){if(i&&!(i instanceof Buffer))throw new TypeError(`${t}, if provided, must be a Buffer.`)}var Bu=class{constructor(t){this.callCredentials=t||aZ.CallCredentials.createEmpty()}_getCallCredentials(){return this.callCredentials}static createSsl(t,e,n,r){var s;if(KS(t,"Root certificate"),KS(e,"Private key"),KS(n,"Certificate chain"),e&&!n)throw new Error("Private key must be given with accompanying certificate chain");if(!e&&n)throw new Error("Certificate chain must be given with accompanying private key");let o=(0,oZ.createSecureContext)({ca:(s=t??(0,JL.getDefaultRootsData)())!==null&&s!==void 0?s:void 0,key:e??void 0,cert:n??void 0,ciphers:JL.CIPHER_SUITES});return new C0(o,r??{})}static createFromSecureContext(t,e){return new C0(t,e??{})}static createInsecure(){return new YS}};S0.ChannelCredentials=Bu;var YS=class i extends Bu{constructor(t){super(t)}compose(t){throw new Error("Cannot compose insecure credentials")}_getConnectionOptions(){return null}_isSecure(){return!1}_equals(t){return t instanceof i}},C0=class i extends Bu{constructor(t,e){super(),this.secureContext=t,this.verifyOptions=e,this.connectionOptions={secureContext:t},e?.checkServerIdentity&&(this.connectionOptions.checkServerIdentity=e.checkServerIdentity)}compose(t){let e=this.callCredentials.compose(t);return new QS(this,e)}_getConnectionOptions(){return Object.assign({},this.connectionOptions)}_isSecure(){return!0}_equals(t){return this===t?!0:t instanceof i?this.secureContext===t.secureContext&&this.verifyOptions.checkServerIdentity===t.verifyOptions.checkServerIdentity:!1}},QS=class i extends Bu{constructor(t,e){super(e),this.channelCredentials=t}compose(t){let e=this.callCredentials.compose(t);return new i(this.channelCredentials,e)}_getConnectionOptions(){return this.channelCredentials._getConnectionOptions()}_isSecure(){return!0}_equals(t){return this===t?!0:t instanceof i?this.channelCredentials._equals(t.channelCredentials)&&this.callCredentials._equals(t.callCredentials):!1}}});var Qa=G(On=>{"use strict";Object.defineProperty(On,"__esModule",{value:!0});On.validateLoadBalancingConfig=On.getFirstUsableConfig=On.isLoadBalancerNameRegistered=On.createLoadBalancer=On.registerDefaultLoadBalancerType=On.registerLoadBalancerType=On.createChildChannelControlHelper=void 0;function lZ(i,t){var e,n,r,s,o,a,l,c,d,u;return{createSubchannel:(n=(e=t.createSubchannel)===null||e===void 0?void 0:e.bind(t))!==null&&n!==void 0?n:i.createSubchannel.bind(i),updateState:(s=(r=t.updateState)===null||r===void 0?void 0:r.bind(t))!==null&&s!==void 0?s:i.updateState.bind(i),requestReresolution:(a=(o=t.requestReresolution)===null||o===void 0?void 0:o.bind(t))!==null&&a!==void 0?a:i.requestReresolution.bind(i),addChannelzChild:(c=(l=t.addChannelzChild)===null||l===void 0?void 0:l.bind(t))!==null&&c!==void 0?c:i.addChannelzChild.bind(i),removeChannelzChild:(u=(d=t.removeChannelzChild)===null||d===void 0?void 0:d.bind(t))!==null&&u!==void 0?u:i.removeChannelzChild.bind(i)}}On.createChildChannelControlHelper=lZ;var Ya={},XS=null;function cZ(i,t,e){Ya[i]={LoadBalancer:t,LoadBalancingConfig:e}}On.registerLoadBalancerType=cZ;function dZ(i){XS=i}On.registerDefaultLoadBalancerType=dZ;function uZ(i,t){let e=i.getLoadBalancerName();return e in Ya?new Ya[e].LoadBalancer(t):null}On.createLoadBalancer=uZ;function hZ(i){return i in Ya}On.isLoadBalancerNameRegistered=hZ;function mZ(i,t=!1){for(let e of i)if(e.getLoadBalancerName()in Ya)return e;return t&&XS?new Ya[XS].LoadBalancingConfig:null}On.getFirstUsableConfig=mZ;function fZ(i){if(!(i!==null&&typeof i=="object"))throw new Error("Load balancing config must be an object");let t=Object.keys(i);if(t.length!==1)throw new Error("Provided load balancing config has multiple conflicting entries");let e=t[0];if(e in Ya)return Ya[e].LoadBalancingConfig.createFromJson(i[e]);throw new Error(`Unrecognized load balancing config name ${e}`)}On.validateLoadBalancingConfig=fZ});var ZS=G(Xa=>{"use strict";Object.defineProperty(Xa,"__esModule",{value:!0});Xa.extractAndSelectServiceConfig=Xa.validateServiceConfig=Xa.validateRetryThrottling=void 0;var pZ=Be("os"),E0=Mt(),gZ=Qa(),T0=/^\d+(\.\d{1,9})?s$/,_Z="node";function bZ(i){if("service"in i&&i.service!==""){if(typeof i.service!="string")throw new Error(`Invalid method config name: invalid service: expected type string, got ${typeof i.service}`);if("method"in i&&i.method!==""){if(typeof i.method!="string")throw new Error(`Invalid method config name: invalid method: expected type string, got ${typeof i.service}`);return{service:i.service,method:i.method}}else return{service:i.service}}else{if("method"in i&&i.method!==void 0)throw new Error("Invalid method config name: method set with empty or unset service");return{}}}function vZ(i){if(!("maxAttempts"in i)||!Number.isInteger(i.maxAttempts)||i.maxAttempts<2)throw new Error("Invalid method config retry policy: maxAttempts must be an integer at least 2");if(!("initialBackoff"in i)||typeof i.initialBackoff!="string"||!T0.test(i.initialBackoff))throw new Error("Invalid method config retry policy: initialBackoff must be a string consisting of a positive integer followed by s");if(!("maxBackoff"in i)||typeof i.maxBackoff!="string"||!T0.test(i.maxBackoff))throw new Error("Invalid method config retry policy: maxBackoff must be a string consisting of a positive integer followed by s");if(!("backoffMultiplier"in i)||typeof i.backoffMultiplier!="number"||i.backoffMultiplier<=0)throw new Error("Invalid method config retry policy: backoffMultiplier must be a number greater than 0");if(!("retryableStatusCodes"in i&&Array.isArray(i.retryableStatusCodes)))throw new Error("Invalid method config retry policy: retryableStatusCodes is required");if(i.retryableStatusCodes.length===0)throw new Error("Invalid method config retry policy: retryableStatusCodes must be non-empty");for(let t of i.retryableStatusCodes)if(typeof t=="number"){if(!Object.values(E0.Status).includes(t))throw new Error("Invalid method config retry policy: retryableStatusCodes value not in status code range")}else if(typeof t=="string"){if(!Object.values(E0.Status).includes(t.toUpperCase()))throw new Error("Invalid method config retry policy: retryableStatusCodes value not a status code name")}else throw new Error("Invalid method config retry policy: retryableStatusCodes value must be a string or number");return{maxAttempts:i.maxAttempts,initialBackoff:i.initialBackoff,maxBackoff:i.maxBackoff,backoffMultiplier:i.backoffMultiplier,retryableStatusCodes:i.retryableStatusCodes}}function yZ(i){if(!("maxAttempts"in i)||!Number.isInteger(i.maxAttempts)||i.maxAttempts<2)throw new Error("Invalid method config hedging policy: maxAttempts must be an integer at least 2");if("hedgingDelay"in i&&(typeof i.hedgingDelay!="string"||!T0.test(i.hedgingDelay)))throw new Error("Invalid method config hedging policy: hedgingDelay must be a string consisting of a positive integer followed by s");if("nonFatalStatusCodes"in i&&Array.isArray(i.nonFatalStatusCodes))for(let e of i.nonFatalStatusCodes)if(typeof e=="number"){if(!Object.values(E0.Status).includes(e))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not in status code range")}else if(typeof e=="string"){if(!Object.values(E0.Status).includes(e.toUpperCase()))throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value not a status code name")}else throw new Error("Invlid method config hedging policy: nonFatalStatusCodes value must be a string or number");let t={maxAttempts:i.maxAttempts};return i.hedgingDelay&&(t.hedgingDelay=i.hedgingDelay),i.nonFatalStatusCodes&&(t.nonFatalStatusCodes=i.nonFatalStatusCodes),t}function xZ(i){var t;let e={name:[]};if(!("name"in i)||!Array.isArray(i.name))throw new Error("Invalid method config: invalid name array");for(let n of i.name)e.name.push(bZ(n));if("waitForReady"in i){if(typeof i.waitForReady!="boolean")throw new Error("Invalid method config: invalid waitForReady");e.waitForReady=i.waitForReady}if("timeout"in i)if(typeof i.timeout=="object"){if(!("seconds"in i.timeout)||typeof i.timeout.seconds!="number")throw new Error("Invalid method config: invalid timeout.seconds");if(!("nanos"in i.timeout)||typeof i.timeout.nanos!="number")throw new Error("Invalid method config: invalid timeout.nanos");e.timeout=i.timeout}else if(typeof i.timeout=="string"&&T0.test(i.timeout)){let n=i.timeout.substring(0,i.timeout.length-1).split(".");e.timeout={seconds:n[0]|0,nanos:((t=n[1])!==null&&t!==void 0?t:0)|0}}else throw new Error("Invalid method config: invalid timeout");if("maxRequestBytes"in i){if(typeof i.maxRequestBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");e.maxRequestBytes=i.maxRequestBytes}if("maxResponseBytes"in i){if(typeof i.maxResponseBytes!="number")throw new Error("Invalid method config: invalid maxRequestBytes");e.maxResponseBytes=i.maxResponseBytes}if("retryPolicy"in i){if("hedgingPolicy"in i)throw new Error("Invalid method config: retryPolicy and hedgingPolicy cannot both be specified");e.retryPolicy=vZ(i.retryPolicy)}else"hedgingPolicy"in i&&(e.hedgingPolicy=yZ(i.hedgingPolicy));return e}function e3(i){if(!("maxTokens"in i)||typeof i.maxTokens!="number"||i.maxTokens<=0||i.maxTokens>1e3)throw new Error("Invalid retryThrottling: maxTokens must be a number in (0, 1000]");if(!("tokenRatio"in i)||typeof i.tokenRatio!="number"||i.tokenRatio<=0)throw new Error("Invalid retryThrottling: tokenRatio must be a number greater than 0");return{maxTokens:+i.maxTokens.toFixed(3),tokenRatio:+i.tokenRatio.toFixed(3)}}Xa.validateRetryThrottling=e3;function t3(i){let t={loadBalancingConfig:[],methodConfig:[]};if("loadBalancingPolicy"in i)if(typeof i.loadBalancingPolicy=="string")t.loadBalancingPolicy=i.loadBalancingPolicy;else throw new Error("Invalid service config: invalid loadBalancingPolicy");if("loadBalancingConfig"in i)if(Array.isArray(i.loadBalancingConfig))for(let n of i.loadBalancingConfig)t.loadBalancingConfig.push((0,gZ.validateLoadBalancingConfig)(n));else throw new Error("Invalid service config: invalid loadBalancingConfig");if("methodConfig"in i&&Array.isArray(i.methodConfig))for(let n of i.methodConfig)t.methodConfig.push(xZ(n));"retryThrottling"in i&&(t.retryThrottling=e3(i.retryThrottling));let e=[];for(let n of t.methodConfig)for(let r of n.name){for(let s of e)if(r.service===s.service&&r.method===s.method)throw new Error(`Invalid service config: duplicate name ${r.service}/${r.method}`);e.push(r)}return t}Xa.validateServiceConfig=t3;function wZ(i){if(!("serviceConfig"in i))throw new Error("Invalid service config choice: missing service config");let t={serviceConfig:t3(i.serviceConfig)};if("clientLanguage"in i)if(Array.isArray(i.clientLanguage)){t.clientLanguage=[];for(let n of i.clientLanguage)if(typeof n=="string")t.clientLanguage.push(n);else throw new Error("Invalid service config choice: invalid clientLanguage")}else throw new Error("Invalid service config choice: invalid clientLanguage");if("clientHostname"in i)if(Array.isArray(i.clientHostname)){t.clientHostname=[];for(let n of i.clientHostname)if(typeof n=="string")t.clientHostname.push(n);else throw new Error("Invalid service config choice: invalid clientHostname")}else throw new Error("Invalid service config choice: invalid clientHostname");if("percentage"in i)if(typeof i.percentage=="number"&&0<=i.percentage&&i.percentage<=100)t.percentage=i.percentage;else throw new Error("Invalid service config choice: invalid percentage");let e=["clientLanguage","percentage","clientHostname","serviceConfig"];for(let n in i)if(!e.includes(n))throw new Error(`Invalid service config choice: unexpected field ${n}`);return t}function CZ(i,t){if(!Array.isArray(i))throw new Error("Invalid service config list");for(let e of i){let n=wZ(e);if(!(typeof n.percentage=="number"&&t>n.percentage)){if(Array.isArray(n.clientHostname)){let r=!1;for(let s of n.clientHostname)s===pZ.hostname()&&(r=!0);if(!r)continue}if(Array.isArray(n.clientLanguage)){let r=!1;for(let s of n.clientLanguage)s===_Z&&(r=!0);if(!r)continue}return n.serviceConfig}}throw new Error("No matching service config found")}function SZ(i,t){for(let e of i)if(e.length>0&&e[0].startsWith("grpc_config=")){let n=e.join("").substring(12),r=JSON.parse(n);return CZ(r,t)}return null}Xa.extractAndSelectServiceConfig=SZ});var Zr=G(I0=>{"use strict";Object.defineProperty(I0,"__esModule",{value:!0});I0.ConnectivityState=void 0;var i3=function(i){return i[i.IDLE=0]="IDLE",i[i.CONNECTING=1]="CONNECTING",i[i.READY=2]="READY",i[i.TRANSIENT_FAILURE=3]="TRANSIENT_FAILURE",i[i.SHUTDOWN=4]="SHUTDOWN",i}(i3||(I0.ConnectivityState=i3={}))});var Tr=G(Za=>{"use strict";Object.defineProperty(Za,"__esModule",{value:!0});Za.uriToString=Za.splitHostPort=Za.parseUri=void 0;var kZ=/^(?:([A-Za-z0-9+.-]+):)?(?:\/\/([^/]*)\/)?(.+)$/;function EZ(i){let t=kZ.exec(i);return t===null?null:{scheme:t[1],authority:t[2],path:t[3]}}Za.parseUri=EZ;var n3=/^\d+$/;function TZ(i){if(i.startsWith("[")){let t=i.indexOf("]");if(t===-1)return null;let e=i.substring(1,t);if(e.indexOf(":")===-1)return null;if(i.length>t+1)if(i[t+1]===":"){let n=i.substring(t+2);return n3.test(n)?{host:e,port:+n}:null}else return null;else return{host:e}}else{let t=i.split(":");return t.length===2?n3.test(t[1])?{host:t[0],port:+t[1]}:null:{host:i}}}Za.splitHostPort=TZ;function IZ(i){let t="";return i.scheme!==void 0&&(t+=i.scheme+":"),i.authority!==void 0&&(t+="//"+i.authority+"/"),t+=i.path,t}Za.uriToString=IZ});var to=G(Jr=>{"use strict";Object.defineProperty(Jr,"__esModule",{value:!0});Jr.mapUriDefaultScheme=Jr.getDefaultAuthority=Jr.createResolver=Jr.registerDefaultScheme=Jr.registerResolver=void 0;var ek=Tr(),Vu={},JS=null;function DZ(i,t){Vu[i]=t}Jr.registerResolver=DZ;function MZ(i){JS=i}Jr.registerDefaultScheme=MZ;function AZ(i,t,e){if(i.scheme!==void 0&&i.scheme in Vu)return new Vu[i.scheme](i,t,e);throw new Error(`No resolver could be created for target ${(0,ek.uriToString)(i)}`)}Jr.createResolver=AZ;function OZ(i){if(i.scheme!==void 0&&i.scheme in Vu)return Vu[i.scheme].getDefaultAuthority(i);throw new Error(`Invalid target ${(0,ek.uriToString)(i)}`)}Jr.getDefaultAuthority=OZ;function PZ(i){return i.scheme===void 0||!(i.scheme in Vu)?JS!==null?{scheme:JS,authority:void 0,path:(0,ek.uriToString)(i)}:null:i}Jr.mapUriDefaultScheme=PZ});var el=G(Ja=>{"use strict";Object.defineProperty(Ja,"__esModule",{value:!0});Ja.QueuePicker=Ja.UnavailablePicker=Ja.PickResultType=void 0;var RZ=lr(),FZ=Mt(),D0=function(i){return i[i.COMPLETE=0]="COMPLETE",i[i.QUEUE=1]="QUEUE",i[i.TRANSIENT_FAILURE=2]="TRANSIENT_FAILURE",i[i.DROP=3]="DROP",i}(D0||(Ja.PickResultType=D0={})),tk=class{constructor(t){this.status=Object.assign({code:FZ.Status.UNAVAILABLE,details:"No connection established",metadata:new RZ.Metadata},t)}pick(t){return{pickResultType:D0.TRANSIENT_FAILURE,subchannel:null,status:this.status,onCallStarted:null,onCallEnded:null}}};Ja.UnavailablePicker=tk;var ik=class{constructor(t){this.loadBalancer=t,this.calledExitIdle=!1}pick(t){return this.calledExitIdle||(process.nextTick(()=>{this.loadBalancer.exitIdle()}),this.calledExitIdle=!0),{pickResultType:D0.QUEUE,subchannel:null,status:null,onCallStarted:null,onCallEnded:null}}};Ja.QueuePicker=ik});var up=G(M0=>{"use strict";Object.defineProperty(M0,"__esModule",{value:!0});M0.BackoffTimeout=void 0;var NZ=1e3,LZ=1.6,BZ=12e4,VZ=.2;function zZ(i,t){return Math.random()*(t-i)+i}var nk=class{constructor(t,e){this.callback=t,this.initialDelay=NZ,this.multiplier=LZ,this.maxDelay=BZ,this.jitter=VZ,this.running=!1,this.hasRef=!0,this.startTime=new Date,this.endTime=new Date,e&&(e.initialDelay&&(this.initialDelay=e.initialDelay),e.multiplier&&(this.multiplier=e.multiplier),e.jitter&&(this.jitter=e.jitter),e.maxDelay&&(this.maxDelay=e.maxDelay)),this.nextDelay=this.initialDelay,this.timerId=setTimeout(()=>{},0),clearTimeout(this.timerId)}runTimer(t){var e,n;this.endTime=this.startTime,this.endTime.setMilliseconds(this.endTime.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),this.timerId=setTimeout(()=>{this.callback(),this.running=!1},t),this.hasRef||(n=(e=this.timerId).unref)===null||n===void 0||n.call(e)}runOnce(){this.running=!0,this.startTime=new Date,this.runTimer(this.nextDelay);let t=Math.min(this.nextDelay*this.multiplier,this.maxDelay),e=t*this.jitter;this.nextDelay=t+zZ(-e,e)}stop(){clearTimeout(this.timerId),this.running=!1}reset(){if(this.nextDelay=this.initialDelay,this.running){let t=new Date,e=this.startTime;e.setMilliseconds(e.getMilliseconds()+this.nextDelay),clearTimeout(this.timerId),t<e?this.runTimer(e.getTime()-t.getTime()):this.running=!1}}isRunning(){return this.running}ref(){var t,e;this.hasRef=!0,(e=(t=this.timerId).ref)===null||e===void 0||e.call(t)}unref(){var t,e;this.hasRef=!1,(e=(t=this.timerId).unref)===null||e===void 0||e.call(t)}getEndTime(){return this.endTime}};M0.BackoffTimeout=nk});var O0=G(A0=>{"use strict";Object.defineProperty(A0,"__esModule",{value:!0});A0.ChildLoadBalancerHandler=void 0;var jZ=Qa(),UZ=Zr(),HZ="child_load_balancer_helper",rk=class{constructor(t){this.channelControlHelper=t,this.currentChild=null,this.pendingChild=null,this.latestConfig=null,this.ChildPolicyHelper=class{constructor(e){this.parent=e,this.child=null}createSubchannel(e,n){return this.parent.channelControlHelper.createSubchannel(e,n)}updateState(e,n){var r;if(this.calledByPendingChild()){if(e===UZ.ConnectivityState.CONNECTING)return;(r=this.parent.currentChild)===null||r===void 0||r.destroy(),this.parent.currentChild=this.parent.pendingChild,this.parent.pendingChild=null}else if(!this.calledByCurrentChild())return;this.parent.channelControlHelper.updateState(e,n)}requestReresolution(){var e;let n=(e=this.parent.pendingChild)!==null&&e!==void 0?e:this.parent.currentChild;this.child===n&&this.parent.channelControlHelper.requestReresolution()}setChild(e){this.child=e}addChannelzChild(e){this.parent.channelControlHelper.addChannelzChild(e)}removeChannelzChild(e){this.parent.channelControlHelper.removeChannelzChild(e)}calledByPendingChild(){return this.child===this.parent.pendingChild}calledByCurrentChild(){return this.child===this.parent.currentChild}}}configUpdateRequiresNewPolicyInstance(t,e){return t.getLoadBalancerName()!==e.getLoadBalancerName()}updateAddressList(t,e,n){let r;if(this.currentChild===null||this.latestConfig===null||this.configUpdateRequiresNewPolicyInstance(this.latestConfig,e)){let s=new this.ChildPolicyHelper(this),o=(0,jZ.createLoadBalancer)(e,s);s.setChild(o),this.currentChild===null?(this.currentChild=o,r=this.currentChild):(this.pendingChild&&this.pendingChild.destroy(),this.pendingChild=o,r=this.pendingChild)}else this.pendingChild===null?r=this.currentChild:r=this.pendingChild;this.latestConfig=e,r.updateAddressList(t,e,n)}exitIdle(){this.currentChild&&(this.currentChild.exitIdle(),this.pendingChild&&this.pendingChild.exitIdle())}resetBackoff(){this.currentChild&&(this.currentChild.resetBackoff(),this.pendingChild&&this.pendingChild.resetBackoff())}destroy(){this.currentChild&&(this.currentChild.destroy(),this.currentChild=null),this.pendingChild&&(this.pendingChild.destroy(),this.pendingChild=null)}getTypeName(){return HZ}};A0.ChildLoadBalancerHandler=rk});var s3=G(P0=>{"use strict";Object.defineProperty(P0,"__esModule",{value:!0});P0.ResolvingLoadBalancer=void 0;var qZ=Qa(),WZ=ZS(),cr=Zr(),GZ=to(),zu=el(),$Z=up(),sk=Mt(),KZ=lr(),YZ=Ti(),QZ=Mt(),XZ=Tr(),ZZ=O0(),JZ="resolving_load_balancer";function r3(i){YZ.trace(QZ.LogVerbosity.DEBUG,JZ,i)}var eJ=["SERVICE_AND_METHOD","SERVICE","EMPTY"];function tJ(i,t,e,n){for(let r of e.name)switch(n){case"EMPTY":if(!r.service&&!r.method)return!0;break;case"SERVICE":if(r.service===i&&!r.method)return!0;break;case"SERVICE_AND_METHOD":if(r.service===i&&r.method===t)return!0}return!1}function iJ(i,t,e,n){for(let r of e)if(tJ(i,t,r,n))return r;return null}function nJ(i){return function(e,n){var r,s;let o=e.split("/").filter(c=>c.length>0),a=(r=o[0])!==null&&r!==void 0?r:"",l=(s=o[1])!==null&&s!==void 0?s:"";if(i&&i.methodConfig)for(let c of eJ){let d=iJ(a,l,i.methodConfig,c);if(d)return{methodConfig:d,pickInformation:{},status:sk.Status.OK,dynamicFilterFactories:[]}}return{methodConfig:{name:[]},pickInformation:{},status:sk.Status.OK,dynamicFilterFactories:[]}}}var ok=class{constructor(t,e,n,r,s){this.target=t,this.channelControlHelper=e,this.onSuccessfulResolution=r,this.onFailedResolution=s,this.latestChildState=cr.ConnectivityState.IDLE,this.latestChildPicker=new zu.QueuePicker(this),this.currentState=cr.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1,n["grpc.service_config"]?this.defaultServiceConfig=(0,WZ.validateServiceConfig)(JSON.parse(n["grpc.service_config"])):this.defaultServiceConfig={loadBalancingConfig:[],methodConfig:[]},this.updateState(cr.ConnectivityState.IDLE,new zu.QueuePicker(this)),this.childLoadBalancer=new ZZ.ChildLoadBalancerHandler({createSubchannel:e.createSubchannel.bind(e),requestReresolution:()=>{this.backoffTimeout.isRunning()?(r3("requestReresolution delayed by backoff timer until "+this.backoffTimeout.getEndTime().toISOString()),this.continueResolving=!0):this.updateResolution()},updateState:(a,l)=>{this.latestChildState=a,this.latestChildPicker=l,this.updateState(a,l)},addChannelzChild:e.addChannelzChild.bind(e),removeChannelzChild:e.removeChannelzChild.bind(e)}),this.innerResolver=(0,GZ.createResolver)(t,{onSuccessfulResolution:(a,l,c,d,u)=>{var h;this.backoffTimeout.stop(),this.backoffTimeout.reset();let m=null;l===null?c===null?(this.previousServiceConfig=null,m=this.defaultServiceConfig):this.previousServiceConfig===null?this.handleResolutionFailure(c):m=this.previousServiceConfig:(m=l,this.previousServiceConfig=l);let _=(h=m?.loadBalancingConfig)!==null&&h!==void 0?h:[],b=(0,qZ.getFirstUsableConfig)(_,!0);if(b===null){this.handleResolutionFailure({code:sk.Status.UNAVAILABLE,details:"All load balancer options in service config are not compatible",metadata:new KZ.Metadata});return}this.childLoadBalancer.updateAddressList(a,b,u);let v=m??this.defaultServiceConfig;this.onSuccessfulResolution(v,d??nJ(v))},onError:a=>{this.handleResolutionFailure(a)}},n);let o={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new $Z.BackoffTimeout(()=>{this.continueResolving?(this.updateResolution(),this.continueResolving=!1):this.updateState(this.latestChildState,this.latestChildPicker)},o),this.backoffTimeout.unref()}updateResolution(){this.innerResolver.updateResolution(),this.currentState===cr.ConnectivityState.IDLE&&this.updateState(cr.ConnectivityState.CONNECTING,new zu.QueuePicker(this)),this.backoffTimeout.runOnce()}updateState(t,e){r3((0,XZ.uriToString)(this.target)+" "+cr.ConnectivityState[this.currentState]+" -> "+cr.ConnectivityState[t]),t===cr.ConnectivityState.IDLE&&(e=new zu.QueuePicker(this)),this.currentState=t,this.channelControlHelper.updateState(t,e)}handleResolutionFailure(t){this.latestChildState===cr.ConnectivityState.IDLE&&(this.updateState(cr.ConnectivityState.TRANSIENT_FAILURE,new zu.UnavailablePicker(t)),this.onFailedResolution(t))}exitIdle(){(this.currentState===cr.ConnectivityState.IDLE||this.currentState===cr.ConnectivityState.TRANSIENT_FAILURE)&&(this.backoffTimeout.isRunning()?this.continueResolving=!0:this.updateResolution()),this.childLoadBalancer.exitIdle()}updateAddressList(t,e){throw new Error("updateAddressList not supported on ResolvingLoadBalancer")}resetBackoff(){this.backoffTimeout.reset(),this.childLoadBalancer.resetBackoff()}destroy(){this.childLoadBalancer.destroy(),this.innerResolver.destroy(),this.backoffTimeout.reset(),this.backoffTimeout.stop(),this.latestChildState=cr.ConnectivityState.IDLE,this.latestChildPicker=new zu.QueuePicker(this),this.currentState=cr.ConnectivityState.IDLE,this.previousServiceConfig=null,this.continueResolving=!1}getTypeName(){return"resolving_load_balancer"}};P0.ResolvingLoadBalancer=ok});var o3=G(ju=>{"use strict";Object.defineProperty(ju,"__esModule",{value:!0});ju.channelOptionsEqual=ju.recognizedOptions=void 0;ju.recognizedOptions={"grpc.ssl_target_name_override":!0,"grpc.primary_user_agent":!0,"grpc.secondary_user_agent":!0,"grpc.default_authority":!0,"grpc.keepalive_time_ms":!0,"grpc.keepalive_timeout_ms":!0,"grpc.keepalive_permit_without_calls":!0,"grpc.service_config":!0,"grpc.max_concurrent_streams":!0,"grpc.initial_reconnect_backoff_ms":!0,"grpc.max_reconnect_backoff_ms":!0,"grpc.use_local_subchannel_pool":!0,"grpc.max_send_message_length":!0,"grpc.max_receive_message_length":!0,"grpc.enable_http_proxy":!0,"grpc.enable_channelz":!0,"grpc.dns_min_time_between_resolutions_ms":!0,"grpc.enable_retries":!0,"grpc.per_rpc_retry_buffer_size":!0,"grpc.retry_buffer_size":!0,"grpc.max_connection_age_ms":!0,"grpc.max_connection_age_grace_ms":!0,"grpc-node.max_session_memory":!0,"grpc.service_config_disable_resolution":!0,"grpc.client_idle_timeout_ms":!0,"grpc-node.tls_enable_trace":!0};function rJ(i,t){let e=Object.keys(i).sort(),n=Object.keys(t).sort();if(e.length!==n.length)return!1;for(let r=0;r<e.length;r+=1)if(e[r]!==n[r]||i[e[r]]!==t[n[r]])return!1;return!0}ju.channelOptionsEqual=rJ});var no=G(io=>{"use strict";Object.defineProperty(io,"__esModule",{value:!0});io.stringToSubchannelAddress=io.subchannelAddressToString=io.subchannelAddressEqual=io.isTcpSubchannelAddress=void 0;var sJ=Be("net");function hp(i){return"port"in i}io.isTcpSubchannelAddress=hp;function oJ(i,t){return!i&&!t?!0:!i||!t?!1:hp(i)?hp(t)&&i.host===t.host&&i.port===t.port:!hp(t)&&i.path===t.path}io.subchannelAddressEqual=oJ;function aJ(i){return hp(i)?i.host+":"+i.port:i.path}io.subchannelAddressToString=aJ;var lJ=443;function cJ(i,t){return(0,sJ.isIP)(i)?{host:i,port:t??lJ}:{path:i}}io.stringToSubchannelAddress=cJ});var R0=G(Uu=>{"use strict";Object.defineProperty(Uu,"__esModule",{value:!0});Uu.addAdminServicesToServer=Uu.registerAdminService=void 0;var a3=[];function dJ(i,t){a3.push({getServiceDefinition:i,getHandlers:t})}Uu.registerAdminService=dJ;function uJ(i){for(let{getServiceDefinition:t,getHandlers:e}of a3)i.addService(t(),e())}Uu.addAdminServicesToServer=uJ});var l3=G(es=>{"use strict";Object.defineProperty(es,"__esModule",{value:!0});es.ClientDuplexStreamImpl=es.ClientWritableStreamImpl=es.ClientReadableStreamImpl=es.ClientUnaryCallImpl=es.callErrorFromStatus=void 0;var hJ=Be("events"),uk=Be("stream"),mp=Mt();function mJ(i,t){let e=`${i.code} ${mp.Status[i.code]}: ${i.details}`,r=`${new Error(e).stack}
for call at
${t}`;return Object.assign(new Error(e),i,{stack:r})}es.callErrorFromStatus=mJ;var ak=class extends hJ.EventEmitter{constructor(){super()}cancel(){var t;(t=this.call)===null||t===void 0||t.cancelWithStatus(mp.Status.CANCELLED,"Cancelled on client")}getPeer(){var t,e;return(e=(t=this.call)===null||t===void 0?void 0:t.getPeer())!==null&&e!==void 0?e:"unknown"}};es.ClientUnaryCallImpl=ak;var lk=class extends uk.Readable{constructor(t){super({objectMode:!0}),this.deserialize=t}cancel(){var t;(t=this.call)===null||t===void 0||t.cancelWithStatus(mp.Status.CANCELLED,"Cancelled on client")}getPeer(){var t,e;return(e=(t=this.call)===null||t===void 0?void 0:t.getPeer())!==null&&e!==void 0?e:"unknown"}_read(t){var e;(e=this.call)===null||e===void 0||e.startRead()}};es.ClientReadableStreamImpl=lk;var ck=class extends uk.Writable{constructor(t){super({objectMode:!0}),this.serialize=t}cancel(){var t;(t=this.call)===null||t===void 0||t.cancelWithStatus(mp.Status.CANCELLED,"Cancelled on client")}getPeer(){var t,e;return(e=(t=this.call)===null||t===void 0?void 0:t.getPeer())!==null&&e!==void 0?e:"unknown"}_write(t,e,n){var r;let s={callback:n},o=Number(e);Number.isNaN(o)||(s.flags=o),(r=this.call)===null||r===void 0||r.sendMessageWithContext(s,t)}_final(t){var e;(e=this.call)===null||e===void 0||e.halfClose(),t()}};es.ClientWritableStreamImpl=ck;var dk=class extends uk.Duplex{constructor(t,e){super({objectMode:!0}),this.serialize=t,this.deserialize=e}cancel(){var t;(t=this.call)===null||t===void 0||t.cancelWithStatus(mp.Status.CANCELLED,"Cancelled on client")}getPeer(){var t,e;return(e=(t=this.call)===null||t===void 0?void 0:t.getPeer())!==null&&e!==void 0?e:"unknown"}_read(t){var e;(e=this.call)===null||e===void 0||e.startRead()}_write(t,e,n){var r;let s={callback:n},o=Number(e);Number.isNaN(o)||(s.flags=o),(r=this.call)===null||r===void 0||r.sendMessageWithContext(s,t)}_final(t){var e;(e=this.call)===null||e===void 0||e.halfClose(),t()}};es.ClientDuplexStreamImpl=dk});var c3=G(Hu=>{"use strict";Object.defineProperty(Hu,"__esModule",{value:!0});Hu.InterceptingListenerImpl=Hu.isInterceptingListener=void 0;function fJ(i){return i.onReceiveMetadata!==void 0&&i.onReceiveMetadata.length===1}Hu.isInterceptingListener=fJ;var hk=class{constructor(t,e){this.listener=t,this.nextListener=e,this.processingMetadata=!1,this.hasPendingMessage=!1,this.processingMessage=!1,this.pendingStatus=null}processPendingMessage(){this.hasPendingMessage&&(this.nextListener.onReceiveMessage(this.pendingMessage),this.pendingMessage=null,this.hasPendingMessage=!1)}processPendingStatus(){this.pendingStatus&&this.nextListener.onReceiveStatus(this.pendingStatus)}onReceiveMetadata(t){this.processingMetadata=!0,this.listener.onReceiveMetadata(t,e=>{this.processingMetadata=!1,this.nextListener.onReceiveMetadata(e),this.processPendingMessage(),this.processPendingStatus()})}onReceiveMessage(t){this.processingMessage=!0,this.listener.onReceiveMessage(t,e=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessage=e,this.hasPendingMessage=!0):(this.nextListener.onReceiveMessage(e),this.processPendingStatus())})}onReceiveStatus(t){this.listener.onReceiveStatus(t,e=>{this.processingMetadata||this.processingMessage?this.pendingStatus=e:this.nextListener.onReceiveStatus(e)})}};Hu.InterceptingListenerImpl=hk});var vk=G(ts=>{"use strict";Object.defineProperty(ts,"__esModule",{value:!0});ts.getInterceptingCall=ts.InterceptingCall=ts.RequesterBuilder=ts.ListenerBuilder=ts.InterceptorConfigurationError=void 0;var pJ=lr(),d3=c3(),u3=Mt(),h3=v0(),pp=class i extends Error{constructor(t){super(t),this.name="InterceptorConfigurationError",Error.captureStackTrace(this,i)}};ts.InterceptorConfigurationError=pp;var fk=class{constructor(){this.metadata=void 0,this.message=void 0,this.status=void 0}withOnReceiveMetadata(t){return this.metadata=t,this}withOnReceiveMessage(t){return this.message=t,this}withOnReceiveStatus(t){return this.status=t,this}build(){return{onReceiveMetadata:this.metadata,onReceiveMessage:this.message,onReceiveStatus:this.status}}};ts.ListenerBuilder=fk;var pk=class{constructor(){this.start=void 0,this.message=void 0,this.halfClose=void 0,this.cancel=void 0}withStart(t){return this.start=t,this}withSendMessage(t){return this.message=t,this}withHalfClose(t){return this.halfClose=t,this}withCancel(t){return this.cancel=t,this}build(){return{start:this.start,sendMessage:this.message,halfClose:this.halfClose,cancel:this.cancel}}};ts.RequesterBuilder=pk;var mk={onReceiveMetadata:(i,t)=>{t(i)},onReceiveMessage:(i,t)=>{t(i)},onReceiveStatus:(i,t)=>{t(i)}},fp={start:(i,t,e)=>{e(i,t)},sendMessage:(i,t)=>{t(i)},halfClose:i=>{i()},cancel:i=>{i()}},gk=class{constructor(t,e){var n,r,s,o;this.nextCall=t,this.processingMetadata=!1,this.pendingMessageContext=null,this.processingMessage=!1,this.pendingHalfClose=!1,e?this.requester={start:(n=e.start)!==null&&n!==void 0?n:fp.start,sendMessage:(r=e.sendMessage)!==null&&r!==void 0?r:fp.sendMessage,halfClose:(s=e.halfClose)!==null&&s!==void 0?s:fp.halfClose,cancel:(o=e.cancel)!==null&&o!==void 0?o:fp.cancel}:this.requester=fp}cancelWithStatus(t,e){this.requester.cancel(()=>{this.nextCall.cancelWithStatus(t,e)})}getPeer(){return this.nextCall.getPeer()}processPendingMessage(){this.pendingMessageContext&&(this.nextCall.sendMessageWithContext(this.pendingMessageContext,this.pendingMessage),this.pendingMessageContext=null,this.pendingMessage=null)}processPendingHalfClose(){this.pendingHalfClose&&this.nextCall.halfClose()}start(t,e){var n,r,s,o,a,l;let c={onReceiveMetadata:(r=(n=e?.onReceiveMetadata)===null||n===void 0?void 0:n.bind(e))!==null&&r!==void 0?r:d=>{},onReceiveMessage:(o=(s=e?.onReceiveMessage)===null||s===void 0?void 0:s.bind(e))!==null&&o!==void 0?o:d=>{},onReceiveStatus:(l=(a=e?.onReceiveStatus)===null||a===void 0?void 0:a.bind(e))!==null&&l!==void 0?l:d=>{}};this.processingMetadata=!0,this.requester.start(t,c,(d,u)=>{var h,m,_;this.processingMetadata=!1;let b;if((0,d3.isInterceptingListener)(u))b=u;else{let v={onReceiveMetadata:(h=u.onReceiveMetadata)!==null&&h!==void 0?h:mk.onReceiveMetadata,onReceiveMessage:(m=u.onReceiveMessage)!==null&&m!==void 0?m:mk.onReceiveMessage,onReceiveStatus:(_=u.onReceiveStatus)!==null&&_!==void 0?_:mk.onReceiveStatus};b=new d3.InterceptingListenerImpl(v,c)}this.nextCall.start(d,b),this.processPendingMessage(),this.processPendingHalfClose()})}sendMessageWithContext(t,e){this.processingMessage=!0,this.requester.sendMessage(e,n=>{this.processingMessage=!1,this.processingMetadata?(this.pendingMessageContext=t,this.pendingMessage=e):(this.nextCall.sendMessageWithContext(t,n),this.processPendingHalfClose())})}sendMessage(t){this.sendMessageWithContext({},t)}startRead(){this.nextCall.startRead()}halfClose(){this.requester.halfClose(()=>{this.processingMetadata||this.processingMessage?this.pendingHalfClose=!0:this.nextCall.halfClose()})}};ts.InterceptingCall=gk;function gJ(i,t,e){var n,r;let s=(n=e.deadline)!==null&&n!==void 0?n:1/0,o=e.host,a=(r=e.parent)!==null&&r!==void 0?r:null,l=e.propagate_flags,c=e.credentials,d=i.createCall(t,s,o,a,l);return c&&d.setCredentials(c),d}var F0=class{constructor(t,e){this.call=t,this.methodDefinition=e}cancelWithStatus(t,e){this.call.cancelWithStatus(t,e)}getPeer(){return this.call.getPeer()}sendMessageWithContext(t,e){let n;try{n=this.methodDefinition.requestSerialize(e)}catch(r){this.call.cancelWithStatus(u3.Status.INTERNAL,`Request message serialization failure: ${(0,h3.getErrorMessage)(r)}`);return}this.call.sendMessageWithContext(t,n)}sendMessage(t){this.sendMessageWithContext({},t)}start(t,e){let n=null;this.call.start(t,{onReceiveMetadata:r=>{var s;(s=e?.onReceiveMetadata)===null||s===void 0||s.call(e,r)},onReceiveMessage:r=>{var s;let o;try{o=this.methodDefinition.responseDeserialize(r)}catch(a){n={code:u3.Status.INTERNAL,details:`Response message parsing error: ${(0,h3.getErrorMessage)(a)}`,metadata:new pJ.Metadata},this.call.cancelWithStatus(n.code,n.details);return}(s=e?.onReceiveMessage)===null||s===void 0||s.call(e,o)},onReceiveStatus:r=>{var s,o;n?(s=e?.onReceiveStatus)===null||s===void 0||s.call(e,n):(o=e?.onReceiveStatus)===null||o===void 0||o.call(e,r)}})}startRead(){this.call.startRead()}halfClose(){this.call.halfClose()}},_k=class extends F0{constructor(t,e){super(t,e)}start(t,e){var n,r;let s=!1,o={onReceiveMetadata:(r=(n=e?.onReceiveMetadata)===null||n===void 0?void 0:n.bind(e))!==null&&r!==void 0?r:a=>{},onReceiveMessage:a=>{var l;s=!0,(l=e?.onReceiveMessage)===null||l===void 0||l.call(e,a)},onReceiveStatus:a=>{var l,c;s||(l=e?.onReceiveMessage)===null||l===void 0||l.call(e,null),(c=e?.onReceiveStatus)===null||c===void 0||c.call(e,a)}};super.start(t,o),this.call.startRead()}},bk=class extends F0{};function _J(i,t,e){let n=gJ(i,e.path,t);return e.responseStream?new bk(n,e):new _k(n,e)}function bJ(i,t,e,n){if(i.clientInterceptors.length>0&&i.clientInterceptorProviders.length>0)throw new pp("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(i.callInterceptors.length>0&&i.callInterceptorProviders.length>0)throw new pp("Both interceptors and interceptor_providers were passed as call options. Only one of these is allowed.");let r=[];i.callInterceptors.length>0||i.callInterceptorProviders.length>0?r=[].concat(i.callInterceptors,i.callInterceptorProviders.map(a=>a(t))).filter(a=>a):r=[].concat(i.clientInterceptors,i.clientInterceptorProviders.map(a=>a(t))).filter(a=>a);let s=Object.assign({},e,{method_definition:t});return r.reduceRight((a,l)=>c=>l(c,a),a=>_J(n,a,t))(s)}ts.getInterceptingCall=bJ});var wk=G(L0=>{"use strict";Object.defineProperty(L0,"__esModule",{value:!0});L0.Client=void 0;var ro=l3(),vJ=Ck(),yJ=Zr(),tl=Mt(),qu=lr(),N0=vk(),Ts=Symbol(),Wu=Symbol(),Gu=Symbol(),ea=Symbol();function yk(i){return typeof i=="function"}function $u(i){return i.stack.split(`
`).slice(1).join(`
`)}var xk=class{constructor(t,e,n={}){var r,s;if(n=Object.assign({},n),this[Wu]=(r=n.interceptors)!==null&&r!==void 0?r:[],delete n.interceptors,this[Gu]=(s=n.interceptor_providers)!==null&&s!==void 0?s:[],delete n.interceptor_providers,this[Wu].length>0&&this[Gu].length>0)throw new Error("Both interceptors and interceptor_providers were passed as options to the client constructor. Only one of these is allowed.");if(this[ea]=n.callInvocationTransformer,delete n.callInvocationTransformer,n.channelOverride)this[Ts]=n.channelOverride;else if(n.channelFactoryOverride){let o=n.channelFactoryOverride;delete n.channelFactoryOverride,this[Ts]=o(t,e,n)}else this[Ts]=new vJ.ChannelImplementation(t,e,n)}close(){this[Ts].close()}getChannel(){return this[Ts]}waitForReady(t,e){let n=r=>{if(r){e(new Error("Failed to connect before the deadline"));return}let s;try{s=this[Ts].getConnectivityState(!0)}catch{e(new Error("The channel has been closed"));return}if(s===yJ.ConnectivityState.READY)e();else try{this[Ts].watchConnectivityState(s,t,n)}catch{e(new Error("The channel has been closed"))}};setImmediate(n)}checkOptionalUnaryResponseArguments(t,e,n){if(yk(t))return{metadata:new qu.Metadata,options:{},callback:t};if(yk(e))return t instanceof qu.Metadata?{metadata:t,options:{},callback:e}:{metadata:new qu.Metadata,options:t,callback:e};if(!(t instanceof qu.Metadata&&e instanceof Object&&yk(n)))throw new Error("Incorrect arguments passed");return{metadata:t,options:e,callback:n}}makeUnaryRequest(t,e,n,r,s,o,a){var l,c;let d=this.checkOptionalUnaryResponseArguments(s,o,a),u={path:t,requestStream:!1,responseStream:!1,requestSerialize:e,responseDeserialize:n},h={argument:r,metadata:d.metadata,call:new ro.ClientUnaryCallImpl,channel:this[Ts],methodDefinition:u,callOptions:d.options,callback:d.callback};this[ea]&&(h=this[ea](h));let m=h.call,_={clientInterceptors:this[Wu],clientInterceptorProviders:this[Gu],callInterceptors:(l=h.callOptions.interceptors)!==null&&l!==void 0?l:[],callInterceptorProviders:(c=h.callOptions.interceptor_providers)!==null&&c!==void 0?c:[]},b=(0,N0.getInterceptingCall)(_,h.methodDefinition,h.callOptions,h.channel);m.call=b;let v=null,I=!1,A=new Error;return b.start(h.metadata,{onReceiveMetadata:F=>{m.emit("metadata",F)},onReceiveMessage(F){v!==null&&b.cancelWithStatus(tl.Status.INTERNAL,"Too many responses received"),v=F},onReceiveStatus(F){if(!I){if(I=!0,F.code===tl.Status.OK)if(v===null){let M=$u(A);h.callback((0,ro.callErrorFromStatus)({code:tl.Status.INTERNAL,details:"No message received",metadata:F.metadata},M))}else h.callback(null,v);else{let M=$u(A);h.callback((0,ro.callErrorFromStatus)(F,M))}A=null,m.emit("status",F)}}}),b.sendMessage(r),b.halfClose(),m}makeClientStreamRequest(t,e,n,r,s,o){var a,l;let c=this.checkOptionalUnaryResponseArguments(r,s,o),d={path:t,requestStream:!0,responseStream:!1,requestSerialize:e,responseDeserialize:n},u={metadata:c.metadata,call:new ro.ClientWritableStreamImpl(e),channel:this[Ts],methodDefinition:d,callOptions:c.options,callback:c.callback};this[ea]&&(u=this[ea](u));let h=u.call,m={clientInterceptors:this[Wu],clientInterceptorProviders:this[Gu],callInterceptors:(a=u.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(l=u.callOptions.interceptor_providers)!==null&&l!==void 0?l:[]},_=(0,N0.getInterceptingCall)(m,u.methodDefinition,u.callOptions,u.channel);h.call=_;let b=null,v=!1,I=new Error;return _.start(u.metadata,{onReceiveMetadata:A=>{h.emit("metadata",A)},onReceiveMessage(A){b!==null&&_.cancelWithStatus(tl.Status.INTERNAL,"Too many responses received"),b=A},onReceiveStatus(A){if(!v){if(v=!0,A.code===tl.Status.OK)if(b===null){let F=$u(I);u.callback((0,ro.callErrorFromStatus)({code:tl.Status.INTERNAL,details:"No message received",metadata:A.metadata},F))}else u.callback(null,b);else{let F=$u(I);u.callback((0,ro.callErrorFromStatus)(A,F))}I=null,h.emit("status",A)}}}),h}checkMetadataAndOptions(t,e){let n,r;return t instanceof qu.Metadata?(n=t,e?r=e:r={}):(t?r=t:r={},n=new qu.Metadata),{metadata:n,options:r}}makeServerStreamRequest(t,e,n,r,s,o){var a,l;let c=this.checkMetadataAndOptions(s,o),d={path:t,requestStream:!1,responseStream:!0,requestSerialize:e,responseDeserialize:n},u={argument:r,metadata:c.metadata,call:new ro.ClientReadableStreamImpl(n),channel:this[Ts],methodDefinition:d,callOptions:c.options};this[ea]&&(u=this[ea](u));let h=u.call,m={clientInterceptors:this[Wu],clientInterceptorProviders:this[Gu],callInterceptors:(a=u.callOptions.interceptors)!==null&&a!==void 0?a:[],callInterceptorProviders:(l=u.callOptions.interceptor_providers)!==null&&l!==void 0?l:[]},_=(0,N0.getInterceptingCall)(m,u.methodDefinition,u.callOptions,u.channel);h.call=_;let b=!1,v=new Error;return _.start(u.metadata,{onReceiveMetadata(I){h.emit("metadata",I)},onReceiveMessage(I){h.push(I)},onReceiveStatus(I){if(!b){if(b=!0,h.push(null),I.code!==tl.Status.OK){let A=$u(v);h.emit("error",(0,ro.callErrorFromStatus)(I,A))}v=null,h.emit("status",I)}}}),_.sendMessage(r),_.halfClose(),h}makeBidiStreamRequest(t,e,n,r,s){var o,a;let l=this.checkMetadataAndOptions(r,s),c={path:t,requestStream:!0,responseStream:!0,requestSerialize:e,responseDeserialize:n},d={metadata:l.metadata,call:new ro.ClientDuplexStreamImpl(e,n),channel:this[Ts],methodDefinition:c,callOptions:l.options};this[ea]&&(d=this[ea](d));let u=d.call,h={clientInterceptors:this[Wu],clientInterceptorProviders:this[Gu],callInterceptors:(o=d.callOptions.interceptors)!==null&&o!==void 0?o:[],callInterceptorProviders:(a=d.callOptions.interceptor_providers)!==null&&a!==void 0?a:[]},m=(0,N0.getInterceptingCall)(h,d.methodDefinition,d.callOptions,d.channel);u.call=m;let _=!1,b=new Error;return m.start(d.metadata,{onReceiveMetadata(v){u.emit("metadata",v)},onReceiveMessage(v){u.push(v)},onReceiveStatus(v){if(!_){if(_=!0,u.push(null),v.code!==tl.Status.OK){let I=$u(b);u.emit("error",(0,ro.callErrorFromStatus)(v,I))}b=null,u.emit("status",v)}}}),u}};L0.Client=xk});var kk=G(Ku=>{"use strict";Object.defineProperty(Ku,"__esModule",{value:!0});Ku.loadPackageDefinition=Ku.makeClientConstructor=void 0;var gp=wk(),xJ={unary:gp.Client.prototype.makeUnaryRequest,server_stream:gp.Client.prototype.makeServerStreamRequest,client_stream:gp.Client.prototype.makeClientStreamRequest,bidi:gp.Client.prototype.makeBidiStreamRequest};function Sk(i){return["__proto__","prototype","constructor"].includes(i)}function m3(i,t,e){e||(e={});class n extends gp.Client{}return Object.keys(i).forEach(r=>{if(Sk(r))return;let s=i[r],o;if(typeof r=="string"&&r.charAt(0)==="$")throw new Error("Method names cannot start with $");s.requestStream?s.responseStream?o="bidi":o="client_stream":s.responseStream?o="server_stream":o="unary";let a=s.requestSerialize,l=s.responseDeserialize,c=wJ(xJ[o],s.path,a,l);n.prototype[r]=c,Object.assign(n.prototype[r],s),s.originalName&&!Sk(s.originalName)&&(n.prototype[s.originalName]=n.prototype[r])}),n.service=i,n.serviceName=t,n}Ku.makeClientConstructor=m3;function wJ(i,t,e,n){return function(...r){return i.call(this,t,e,n,...r)}}function CJ(i){return"format"in i}function SJ(i){let t={};for(let e in i)if(Object.prototype.hasOwnProperty.call(i,e)){let n=i[e],r=e.split(".");if(r.some(a=>Sk(a)))continue;let s=r[r.length-1],o=t;for(let a of r.slice(0,-1))o[a]||(o[a]={}),o=o[a];CJ(n)?o[s]=n:o[s]=m3(n,s,{})}return t}Ku.loadPackageDefinition=SJ});var B3=G((GRe,L3)=>{"use strict";var kJ=1/0,EJ="[object Symbol]",TJ=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,IJ=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,V0="\\ud800-\\udfff",x3="\\u0300-\\u036f\\ufe20-\\ufe23",w3="\\u20d0-\\u20f0",C3="\\u2700-\\u27bf",S3="a-z\\xdf-\\xf6\\xf8-\\xff",DJ="\\xac\\xb1\\xd7\\xf7",MJ="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",AJ="\\u2000-\\u206f",OJ=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",k3="A-Z\\xc0-\\xd6\\xd8-\\xde",E3="\\ufe0e\\ufe0f",T3=DJ+MJ+AJ+OJ,Tk="['\u2019]",PJ="["+V0+"]",f3="["+T3+"]",B0="["+x3+w3+"]",I3="\\d+",RJ="["+C3+"]",D3="["+S3+"]",M3="[^"+V0+T3+I3+C3+S3+k3+"]",Ek="\\ud83c[\\udffb-\\udfff]",FJ="(?:"+B0+"|"+Ek+")",A3="[^"+V0+"]",Ik="(?:\\ud83c[\\udde6-\\uddff]){2}",Dk="[\\ud800-\\udbff][\\udc00-\\udfff]",Yu="["+k3+"]",O3="\\u200d",p3="(?:"+D3+"|"+M3+")",NJ="(?:"+Yu+"|"+M3+")",g3="(?:"+Tk+"(?:d|ll|m|re|s|t|ve))?",_3="(?:"+Tk+"(?:D|LL|M|RE|S|T|VE))?",P3=FJ+"?",R3="["+E3+"]?",LJ="(?:"+O3+"(?:"+[A3,Ik,Dk].join("|")+")"+R3+P3+")*",F3=R3+P3+LJ,BJ="(?:"+[RJ,Ik,Dk].join("|")+")"+F3,VJ="(?:"+[A3+B0+"?",B0,Ik,Dk,PJ].join("|")+")",zJ=RegExp(Tk,"g"),jJ=RegExp(B0,"g"),UJ=RegExp(Ek+"(?="+Ek+")|"+VJ+F3,"g"),HJ=RegExp([Yu+"?"+D3+"+"+g3+"(?="+[f3,Yu,"$"].join("|")+")",NJ+"+"+_3+"(?="+[f3,Yu+p3,"$"].join("|")+")",Yu+"?"+p3+"+"+g3,Yu+"+"+_3,I3,BJ].join("|"),"g"),qJ=RegExp("["+O3+V0+x3+w3+E3+"]"),WJ=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,GJ={\u00C0:"A",\u00C1:"A",\u00C2:"A",\u00C3:"A",\u00C4:"A",\u00C5:"A",\u00E0:"a",\u00E1:"a",\u00E2:"a",\u00E3:"a",\u00E4:"a",\u00E5:"a",\u00C7:"C",\u00E7:"c",\u00D0:"D",\u00F0:"d",\u00C8:"E",\u00C9:"E",\u00CA:"E",\u00CB:"E",\u00E8:"e",\u00E9:"e",\u00EA:"e",\u00EB:"e",\u00CC:"I",\u00CD:"I",\u00CE:"I",\u00CF:"I",\u00EC:"i",\u00ED:"i",\u00EE:"i",\u00EF:"i",\u00D1:"N",\u00F1:"n",\u00D2:"O",\u00D3:"O",\u00D4:"O",\u00D5:"O",\u00D6:"O",\u00D8:"O",\u00F2:"o",\u00F3:"o",\u00F4:"o",\u00F5:"o",\u00F6:"o",\u00F8:"o",\u00D9:"U",\u00DA:"U",\u00DB:"U",\u00DC:"U",\u00F9:"u",\u00FA:"u",\u00FB:"u",\u00FC:"u",\u00DD:"Y",\u00FD:"y",\u00FF:"y",\u00C6:"Ae",\u00E6:"ae",\u00DE:"Th",\u00FE:"th",\u00DF:"ss",\u0100:"A",\u0102:"A",\u0104:"A",\u0101:"a",\u0103:"a",\u0105:"a",\u0106:"C",\u0108:"C",\u010A:"C",\u010C:"C",\u0107:"c",\u0109:"c",\u010B:"c",\u010D:"c",\u010E:"D",\u0110:"D",\u010F:"d",\u0111:"d",\u0112:"E",\u0114:"E",\u0116:"E",\u0118:"E",\u011A:"E",\u0113:"e",\u0115:"e",\u0117:"e",\u0119:"e",\u011B:"e",\u011C:"G",\u011E:"G",\u0120:"G",\u0122:"G",\u011D:"g",\u011F:"g",\u0121:"g",\u0123:"g",\u0124:"H",\u0126:"H",\u0125:"h",\u0127:"h",\u0128:"I",\u012A:"I",\u012C:"I",\u012E:"I",\u0130:"I",\u0129:"i",\u012B:"i",\u012D:"i",\u012F:"i",\u0131:"i",\u0134:"J",\u0135:"j",\u0136:"K",\u0137:"k",\u0138:"k",\u0139:"L",\u013B:"L",\u013D:"L",\u013F:"L",\u0141:"L",\u013A:"l",\u013C:"l",\u013E:"l",\u0140:"l",\u0142:"l",\u0143:"N",\u0145:"N",\u0147:"N",\u014A:"N",\u0144:"n",\u0146:"n",\u0148:"n",\u014B:"n",\u014C:"O",\u014E:"O",\u0150:"O",\u014D:"o",\u014F:"o",\u0151:"o",\u0154:"R",\u0156:"R",\u0158:"R",\u0155:"r",\u0157:"r",\u0159:"r",\u015A:"S",\u015C:"S",\u015E:"S",\u0160:"S",\u015B:"s",\u015D:"s",\u015F:"s",\u0161:"s",\u0162:"T",\u0164:"T",\u0166:"T",\u0163:"t",\u0165:"t",\u0167:"t",\u0168:"U",\u016A:"U",\u016C:"U",\u016E:"U",\u0170:"U",\u0172:"U",\u0169:"u",\u016B:"u",\u016D:"u",\u016F:"u",\u0171:"u",\u0173:"u",\u0174:"W",\u0175:"w",\u0176:"Y",\u0177:"y",\u0178:"Y",\u0179:"Z",\u017B:"Z",\u017D:"Z",\u017A:"z",\u017C:"z",\u017E:"z",\u0132:"IJ",\u0133:"ij",\u0152:"Oe",\u0153:"oe",\u0149:"'n",\u017F:"ss"},$J=typeof global=="object"&&global&&global.Object===Object&&global,KJ=typeof self=="object"&&self&&self.Object===Object&&self,YJ=$J||KJ||Function("return this")();function QJ(i,t,e,n){var r=-1,s=i?i.length:0;for(n&&s&&(e=i[++r]);++r<s;)e=t(e,i[r],r,i);return e}function XJ(i){return i.split("")}function ZJ(i){return i.match(TJ)||[]}function JJ(i){return function(t){return i?.[t]}}var eee=JJ(GJ);function N3(i){return qJ.test(i)}function tee(i){return WJ.test(i)}function iee(i){return N3(i)?nee(i):XJ(i)}function nee(i){return i.match(UJ)||[]}function ree(i){return i.match(HJ)||[]}var see=Object.prototype,oee=see.toString,b3=YJ.Symbol,v3=b3?b3.prototype:void 0,y3=v3?v3.toString:void 0;function aee(i,t,e){var n=-1,r=i.length;t<0&&(t=-t>r?0:r+t),e=e>r?r:e,e<0&&(e+=r),r=t>e?0:e-t>>>0,t>>>=0;for(var s=Array(r);++n<r;)s[n]=i[n+t];return s}function lee(i){if(typeof i=="string")return i;if(mee(i))return y3?y3.call(i):"";var t=i+"";return t=="0"&&1/i==-kJ?"-0":t}function cee(i,t,e){var n=i.length;return e=e===void 0?n:e,!t&&e>=n?i:aee(i,t,e)}function dee(i){return function(t){t=z0(t);var e=N3(t)?iee(t):void 0,n=e?e[0]:t.charAt(0),r=e?cee(e,1).join(""):t.slice(1);return n[i]()+r}}function uee(i){return function(t){return QJ(bee(gee(t).replace(zJ,"")),i,"")}}function hee(i){return!!i&&typeof i=="object"}function mee(i){return typeof i=="symbol"||hee(i)&&oee.call(i)==EJ}function z0(i){return i==null?"":lee(i)}var fee=uee(function(i,t,e){return t=t.toLowerCase(),i+(e?pee(t):t)});function pee(i){return _ee(z0(i).toLowerCase())}function gee(i){return i=z0(i),i&&i.replace(IJ,eee).replace(jJ,"")}var _ee=dee("toUpperCase");function bee(i,t,e){return i=z0(i),t=e?void 0:t,t===void 0?tee(i)?ree(i):ZJ(i):i.match(t)||[]}L3.exports=fee});var Mk=G(($Re,V3)=>{"use strict";V3.exports=vee;function vee(i,t){for(var e=new Array(arguments.length-1),n=0,r=2,s=!0;r<arguments.length;)e[n++]=arguments[r++];return new Promise(function(a,l){e[n]=function(d){if(s)if(s=!1,d)l(d);else{for(var u=new Array(arguments.length-1),h=0;h<u.length;)u[h++]=arguments[h];a.apply(null,u)}};try{i.apply(t||null,e)}catch(c){s&&(s=!1,l(c))}})}});var H3=G(U3=>{"use strict";var j0=U3;j0.length=function(t){var e=t.length;if(!e)return 0;for(var n=0;--e%4>1&&t.charAt(e)==="=";)++n;return Math.ceil(t.length*3)/4-n};var Qu=new Array(64),j3=new Array(123);for(Is=0;Is<64;)j3[Qu[Is]=Is<26?Is+65:Is<52?Is+71:Is<62?Is-4:Is-59|43]=Is++;var Is;j0.encode=function(t,e,n){for(var r=null,s=[],o=0,a=0,l;e<n;){var c=t[e++];switch(a){case 0:s[o++]=Qu[c>>2],l=(c&3)<<4,a=1;break;case 1:s[o++]=Qu[l|c>>4],l=(c&15)<<2,a=2;break;case 2:s[o++]=Qu[l|c>>6],s[o++]=Qu[c&63],a=0;break}o>8191&&((r||(r=[])).push(String.fromCharCode.apply(String,s)),o=0)}return a&&(s[o++]=Qu[l],s[o++]=61,a===1&&(s[o++]=61)),r?(o&&r.push(String.fromCharCode.apply(String,s.slice(0,o))),r.join("")):String.fromCharCode.apply(String,s.slice(0,o))};var z3="invalid encoding";j0.decode=function(t,e,n){for(var r=n,s=0,o,a=0;a<t.length;){var l=t.charCodeAt(a++);if(l===61&&s>1)break;if((l=j3[l])===void 0)throw Error(z3);switch(s){case 0:o=l,s=1;break;case 1:e[n++]=o<<2|(l&48)>>4,o=l,s=2;break;case 2:e[n++]=(o&15)<<4|(l&60)>>2,o=l,s=3;break;case 3:e[n++]=(o&3)<<6|l,s=0;break}}if(s===1)throw Error(z3);return n-r};j0.test=function(t){return/^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/.test(t)}});var W3=G((YRe,q3)=>{"use strict";q3.exports=U0;function U0(){this._listeners={}}U0.prototype.on=function(t,e,n){return(this._listeners[t]||(this._listeners[t]=[])).push({fn:e,ctx:n||this}),this};U0.prototype.off=function(t,e){if(t===void 0)this._listeners={};else if(e===void 0)this._listeners[t]=[];else for(var n=this._listeners[t],r=0;r<n.length;)n[r].fn===e?n.splice(r,1):++r;return this};U0.prototype.emit=function(t){var e=this._listeners[t];if(e){for(var n=[],r=1;r<arguments.length;)n.push(arguments[r++]);for(r=0;r<e.length;)e[r].fn.apply(e[r++].ctx,n)}return this}});var Z3=G((QRe,X3)=>{"use strict";X3.exports=G3(G3);function G3(i){return typeof Float32Array<"u"?function(){var t=new Float32Array([-0]),e=new Uint8Array(t.buffer),n=e[3]===128;function r(l,c,d){t[0]=l,c[d]=e[0],c[d+1]=e[1],c[d+2]=e[2],c[d+3]=e[3]}function s(l,c,d){t[0]=l,c[d]=e[3],c[d+1]=e[2],c[d+2]=e[1],c[d+3]=e[0]}i.writeFloatLE=n?r:s,i.writeFloatBE=n?s:r;function o(l,c){return e[0]=l[c],e[1]=l[c+1],e[2]=l[c+2],e[3]=l[c+3],t[0]}function a(l,c){return e[3]=l[c],e[2]=l[c+1],e[1]=l[c+2],e[0]=l[c+3],t[0]}i.readFloatLE=n?o:a,i.readFloatBE=n?a:o}():function(){function t(n,r,s,o){var a=r<0?1:0;if(a&&(r=-r),r===0)n(1/r>0?0:2147483648,s,o);else if(isNaN(r))n(2143289344,s,o);else if(r>34028234663852886e22)n((a<<31|2139095040)>>>0,s,o);else if(r<11754943508222875e-54)n((a<<31|Math.round(r/1401298464324817e-60))>>>0,s,o);else{var l=Math.floor(Math.log(r)/Math.LN2),c=Math.round(r*Math.pow(2,-l)*8388608)&8388607;n((a<<31|l+127<<23|c)>>>0,s,o)}}i.writeFloatLE=t.bind(null,$3),i.writeFloatBE=t.bind(null,K3);function e(n,r,s){var o=n(r,s),a=(o>>31)*2+1,l=o>>>23&255,c=o&8388607;return l===255?c?NaN:a*(1/0):l===0?a*1401298464324817e-60*c:a*Math.pow(2,l-150)*(c+8388608)}i.readFloatLE=e.bind(null,Y3),i.readFloatBE=e.bind(null,Q3)}(),typeof Float64Array<"u"?function(){var t=new Float64Array([-0]),e=new Uint8Array(t.buffer),n=e[7]===128;function r(l,c,d){t[0]=l,c[d]=e[0],c[d+1]=e[1],c[d+2]=e[2],c[d+3]=e[3],c[d+4]=e[4],c[d+5]=e[5],c[d+6]=e[6],c[d+7]=e[7]}function s(l,c,d){t[0]=l,c[d]=e[7],c[d+1]=e[6],c[d+2]=e[5],c[d+3]=e[4],c[d+4]=e[3],c[d+5]=e[2],c[d+6]=e[1],c[d+7]=e[0]}i.writeDoubleLE=n?r:s,i.writeDoubleBE=n?s:r;function o(l,c){return e[0]=l[c],e[1]=l[c+1],e[2]=l[c+2],e[3]=l[c+3],e[4]=l[c+4],e[5]=l[c+5],e[6]=l[c+6],e[7]=l[c+7],t[0]}function a(l,c){return e[7]=l[c],e[6]=l[c+1],e[5]=l[c+2],e[4]=l[c+3],e[3]=l[c+4],e[2]=l[c+5],e[1]=l[c+6],e[0]=l[c+7],t[0]}i.readDoubleLE=n?o:a,i.readDoubleBE=n?a:o}():function(){function t(n,r,s,o,a,l){var c=o<0?1:0;if(c&&(o=-o),o===0)n(0,a,l+r),n(1/o>0?0:2147483648,a,l+s);else if(isNaN(o))n(0,a,l+r),n(2146959360,a,l+s);else if(o>17976931348623157e292)n(0,a,l+r),n((c<<31|2146435072)>>>0,a,l+s);else{var d;if(o<22250738585072014e-324)d=o/5e-324,n(d>>>0,a,l+r),n((c<<31|d/4294967296)>>>0,a,l+s);else{var u=Math.floor(Math.log(o)/Math.LN2);u===1024&&(u=1023),d=o*Math.pow(2,-u),n(d*4503599627370496>>>0,a,l+r),n((c<<31|u+1023<<20|d*1048576&1048575)>>>0,a,l+s)}}}i.writeDoubleLE=t.bind(null,$3,0,4),i.writeDoubleBE=t.bind(null,K3,4,0);function e(n,r,s,o,a){var l=n(o,a+r),c=n(o,a+s),d=(c>>31)*2+1,u=c>>>20&2047,h=4294967296*(c&1048575)+l;return u===2047?h?NaN:d*(1/0):u===0?d*5e-324*h:d*Math.pow(2,u-1075)*(h+4503599627370496)}i.readDoubleLE=e.bind(null,Y3,0,4),i.readDoubleBE=e.bind(null,Q3,4,0)}(),i}function $3(i,t,e){t[e]=i&255,t[e+1]=i>>>8&255,t[e+2]=i>>>16&255,t[e+3]=i>>>24}function K3(i,t,e){t[e]=i>>>24,t[e+1]=i>>>16&255,t[e+2]=i>>>8&255,t[e+3]=i&255}function Y3(i,t){return(i[t]|i[t+1]<<8|i[t+2]<<16|i[t+3]<<24)>>>0}function Q3(i,t){return(i[t]<<24|i[t+1]<<16|i[t+2]<<8|i[t+3])>>>0}});var Ak=G((exports,module)=>{"use strict";module.exports=inquire;function inquire(moduleName){try{var mod=eval("quire".replace(/^/,"re"))(moduleName);if(mod&&(mod.length||Object.keys(mod).length))return mod}catch(i){}return null}});var e4=G(J3=>{"use strict";var Ok=J3;Ok.length=function(t){for(var e=0,n=0,r=0;r<t.length;++r)n=t.charCodeAt(r),n<128?e+=1:n<2048?e+=2:(n&64512)===55296&&(t.charCodeAt(r+1)&64512)===56320?(++r,e+=4):e+=3;return e};Ok.read=function(t,e,n){var r=n-e;if(r<1)return"";for(var s=null,o=[],a=0,l;e<n;)l=t[e++],l<128?o[a++]=l:l>191&&l<224?o[a++]=(l&31)<<6|t[e++]&63:l>239&&l<365?(l=((l&7)<<18|(t[e++]&63)<<12|(t[e++]&63)<<6|t[e++]&63)-65536,o[a++]=55296+(l>>10),o[a++]=56320+(l&1023)):o[a++]=(l&15)<<12|(t[e++]&63)<<6|t[e++]&63,a>8191&&((s||(s=[])).push(String.fromCharCode.apply(String,o)),a=0);return s?(a&&s.push(String.fromCharCode.apply(String,o.slice(0,a))),s.join("")):String.fromCharCode.apply(String,o.slice(0,a))};Ok.write=function(t,e,n){for(var r=n,s,o,a=0;a<t.length;++a)s=t.charCodeAt(a),s<128?e[n++]=s:s<2048?(e[n++]=s>>6|192,e[n++]=s&63|128):(s&64512)===55296&&((o=t.charCodeAt(a+1))&64512)===56320?(s=65536+((s&1023)<<10)+(o&1023),++a,e[n++]=s>>18|240,e[n++]=s>>12&63|128,e[n++]=s>>6&63|128,e[n++]=s&63|128):(e[n++]=s>>12|224,e[n++]=s>>6&63|128,e[n++]=s&63|128);return n-r}});var i4=G((ZRe,t4)=>{"use strict";t4.exports=yee;function yee(i,t,e){var n=e||8192,r=n>>>1,s=null,o=n;return function(l){if(l<1||l>r)return i(l);o+l>n&&(s=i(n),o=0);var c=t.call(s,o,o+=l);return o&7&&(o=(o|7)+1),c}}});var r4=G((JRe,n4)=>{"use strict";n4.exports=cn;var _p=so();function cn(i,t){this.lo=i>>>0,this.hi=t>>>0}var Kc=cn.zero=new cn(0,0);Kc.toNumber=function(){return 0};Kc.zzEncode=Kc.zzDecode=function(){return this};Kc.length=function(){return 1};var xee=cn.zeroHash="\0\0\0\0\0\0\0\0";cn.fromNumber=function(t){if(t===0)return Kc;var e=t<0;e&&(t=-t);var n=t>>>0,r=(t-n)/4294967296>>>0;return e&&(r=~r>>>0,n=~n>>>0,++n>4294967295&&(n=0,++r>4294967295&&(r=0))),new cn(n,r)};cn.from=function(t){if(typeof t=="number")return cn.fromNumber(t);if(_p.isString(t))if(_p.Long)t=_p.Long.fromString(t);else return cn.fromNumber(parseInt(t,10));return t.low||t.high?new cn(t.low>>>0,t.high>>>0):Kc};cn.prototype.toNumber=function(t){if(!t&&this.hi>>>31){var e=~this.lo+1>>>0,n=~this.hi>>>0;return e||(n=n+1>>>0),-(e+n*4294967296)}return this.lo+this.hi*4294967296};cn.prototype.toLong=function(t){return _p.Long?new _p.Long(this.lo|0,this.hi|0,!!t):{low:this.lo|0,high:this.hi|0,unsigned:!!t}};var il=String.prototype.charCodeAt;cn.fromHash=function(t){return t===xee?Kc:new cn((il.call(t,0)|il.call(t,1)<<8|il.call(t,2)<<16|il.call(t,3)<<24)>>>0,(il.call(t,4)|il.call(t,5)<<8|il.call(t,6)<<16|il.call(t,7)<<24)>>>0)};cn.prototype.toHash=function(){return String.fromCharCode(this.lo&255,this.lo>>>8&255,this.lo>>>16&255,this.lo>>>24,this.hi&255,this.hi>>>8&255,this.hi>>>16&255,this.hi>>>24)};cn.prototype.zzEncode=function(){var t=this.hi>>31;return this.hi=((this.hi<<1|this.lo>>>31)^t)>>>0,this.lo=(this.lo<<1^t)>>>0,this};cn.prototype.zzDecode=function(){var t=-(this.lo&1);return this.lo=((this.lo>>>1|this.hi<<31)^t)>>>0,this.hi=(this.hi>>>1^t)>>>0,this};cn.prototype.length=function(){var t=this.lo,e=(this.lo>>>28|this.hi<<4)>>>0,n=this.hi>>>24;return n===0?e===0?t<16384?t<128?1:2:t<2097152?3:4:e<16384?e<128?5:6:e<2097152?7:8:n<128?9:10}});var so=G(Pk=>{"use strict";var Fe=Pk;Fe.asPromise=Mk();Fe.base64=H3();Fe.EventEmitter=W3();Fe.float=Z3();Fe.inquire=Ak();Fe.utf8=e4();Fe.pool=i4();Fe.LongBits=r4();Fe.isNode=!!(typeof global<"u"&&global&&global.process&&global.process.versions&&global.process.versions.node);Fe.global=Fe.isNode&&global||typeof window<"u"&&window||typeof self<"u"&&self||Pk;Fe.emptyArray=Object.freeze?Object.freeze([]):[];Fe.emptyObject=Object.freeze?Object.freeze({}):{};Fe.isInteger=Number.isInteger||function(t){return typeof t=="number"&&isFinite(t)&&Math.floor(t)===t};Fe.isString=function(t){return typeof t=="string"||t instanceof String};Fe.isObject=function(t){return t&&typeof t=="object"};Fe.isset=Fe.isSet=function(t,e){var n=t[e];return n!=null&&t.hasOwnProperty(e)?typeof n!="object"||(Array.isArray(n)?n.length:Object.keys(n).length)>0:!1};Fe.Buffer=function(){try{var i=Fe.inquire("buffer").Buffer;return i.prototype.utf8Write?i:null}catch{return null}}();Fe._Buffer_from=null;Fe._Buffer_allocUnsafe=null;Fe.newBuffer=function(t){return typeof t=="number"?Fe.Buffer?Fe._Buffer_allocUnsafe(t):new Fe.Array(t):Fe.Buffer?Fe._Buffer_from(t):typeof Uint8Array>"u"?t:new Uint8Array(t)};Fe.Array=typeof Uint8Array<"u"?Uint8Array:Array;Fe.Long=Fe.global.dcodeIO&&Fe.global.dcodeIO.Long||Fe.global.Long||Fe.inquire("long");Fe.key2Re=/^true|false|0|1$/;Fe.key32Re=/^-?(?:0|[1-9][0-9]*)$/;Fe.key64Re=/^(?:[\\x00-\\xff]{8}|-?(?:0|[1-9][0-9]*))$/;Fe.longToHash=function(t){return t?Fe.LongBits.from(t).toHash():Fe.LongBits.zeroHash};Fe.longFromHash=function(t,e){var n=Fe.LongBits.fromHash(t);return Fe.Long?Fe.Long.fromBits(n.lo,n.hi,e):n.toNumber(!!e)};function s4(i,t,e){for(var n=Object.keys(t),r=0;r<n.length;++r)(i[n[r]]===void 0||!e)&&(i[n[r]]=t[n[r]]);return i}Fe.merge=s4;Fe.lcFirst=function(t){return t.charAt(0).toLowerCase()+t.substring(1)};function o4(i){function t(e,n){if(!(this instanceof t))return new t(e,n);Object.defineProperty(this,"message",{get:function(){return e}}),Error.captureStackTrace?Error.captureStackTrace(this,t):Object.defineProperty(this,"stack",{value:new Error().stack||""}),n&&s4(this,n)}return t.prototype=Object.create(Error.prototype,{constructor:{value:t,writable:!0,enumerable:!1,configurable:!0},name:{get:function(){return i},set:void 0,enumerable:!1,configurable:!0},toString:{value:function(){return this.name+": "+this.message},writable:!0,enumerable:!1,configurable:!0}}),t}Fe.newError=o4;Fe.ProtocolError=o4("ProtocolError");Fe.oneOfGetter=function(t){for(var e={},n=0;n<t.length;++n)e[t[n]]=1;return function(){for(var r=Object.keys(this),s=r.length-1;s>-1;--s)if(e[r[s]]===1&&this[r[s]]!==void 0&&this[r[s]]!==null)return r[s]}};Fe.oneOfSetter=function(t){return function(e){for(var n=0;n<t.length;++n)t[n]!==e&&delete this[t[n]]}};Fe.toJSONOptions={longs:String,enums:String,bytes:String,json:!0};Fe._configure=function(){var i=Fe.Buffer;if(!i){Fe._Buffer_from=Fe._Buffer_allocUnsafe=null;return}Fe._Buffer_from=i.from!==Uint8Array.from&&i.from||function(e,n){return new i(e,n)},Fe._Buffer_allocUnsafe=i.allocUnsafe||function(e){return new i(e)}}});var q0=G((t2e,d4)=>{"use strict";d4.exports=St;var is=so(),Rk,H0=is.LongBits,a4=is.base64,l4=is.utf8;function bp(i,t,e){this.fn=i,this.len=t,this.next=void 0,this.val=e}function Nk(){}function wee(i){this.head=i.head,this.tail=i.tail,this.len=i.len,this.next=i.states}function St(){this.len=0,this.head=new bp(Nk,0,0),this.tail=this.head,this.states=null}var c4=function(){return is.Buffer?function(){return(St.create=function(){return new Rk})()}:function(){return new St}};St.create=c4();St.alloc=function(t){return new is.Array(t)};is.Array!==Array&&(St.alloc=is.pool(St.alloc,is.Array.prototype.subarray));St.prototype._push=function(t,e,n){return this.tail=this.tail.next=new bp(t,e,n),this.len+=e,this};function Lk(i,t,e){t[e]=i&255}function Cee(i,t,e){for(;i>127;)t[e++]=i&127|128,i>>>=7;t[e]=i}function Bk(i,t){this.len=i,this.next=void 0,this.val=t}Bk.prototype=Object.create(bp.prototype);Bk.prototype.fn=Cee;St.prototype.uint32=function(t){return this.len+=(this.tail=this.tail.next=new Bk((t=t>>>0)<128?1:t<16384?2:t<2097152?3:t<268435456?4:5,t)).len,this};St.prototype.int32=function(t){return t<0?this._push(Vk,10,H0.fromNumber(t)):this.uint32(t)};St.prototype.sint32=function(t){return this.uint32((t<<1^t>>31)>>>0)};function Vk(i,t,e){for(;i.hi;)t[e++]=i.lo&127|128,i.lo=(i.lo>>>7|i.hi<<25)>>>0,i.hi>>>=7;for(;i.lo>127;)t[e++]=i.lo&127|128,i.lo=i.lo>>>7;t[e++]=i.lo}St.prototype.uint64=function(t){var e=H0.from(t);return this._push(Vk,e.length(),e)};St.prototype.int64=St.prototype.uint64;St.prototype.sint64=function(t){var e=H0.from(t).zzEncode();return this._push(Vk,e.length(),e)};St.prototype.bool=function(t){return this._push(Lk,1,t?1:0)};function Fk(i,t,e){t[e]=i&255,t[e+1]=i>>>8&255,t[e+2]=i>>>16&255,t[e+3]=i>>>24}St.prototype.fixed32=function(t){return this._push(Fk,4,t>>>0)};St.prototype.sfixed32=St.prototype.fixed32;St.prototype.fixed64=function(t){var e=H0.from(t);return this._push(Fk,4,e.lo)._push(Fk,4,e.hi)};St.prototype.sfixed64=St.prototype.fixed64;St.prototype.float=function(t){return this._push(is.float.writeFloatLE,4,t)};St.prototype.double=function(t){return this._push(is.float.writeDoubleLE,8,t)};var See=is.Array.prototype.set?function(t,e,n){e.set(t,n)}:function(t,e,n){for(var r=0;r<t.length;++r)e[n+r]=t[r]};St.prototype.bytes=function(t){var e=t.length>>>0;if(!e)return this._push(Lk,1,0);if(is.isString(t)){var n=St.alloc(e=a4.length(t));a4.decode(t,n,0),t=n}return this.uint32(e)._push(See,e,t)};St.prototype.string=function(t){var e=l4.length(t);return e?this.uint32(e)._push(l4.write,e,t):this._push(Lk,1,0)};St.prototype.fork=function(){return this.states=new wee(this),this.head=this.tail=new bp(Nk,0,0),this.len=0,this};St.prototype.reset=function(){return this.states?(this.head=this.states.head,this.tail=this.states.tail,this.len=this.states.len,this.states=this.states.next):(this.head=this.tail=new bp(Nk,0,0),this.len=0),this};St.prototype.ldelim=function(){var t=this.head,e=this.tail,n=this.len;return this.reset().uint32(n),n&&(this.tail.next=t.next,this.tail=e,this.len+=n),this};St.prototype.finish=function(){for(var t=this.head.next,e=this.constructor.alloc(this.len),n=0;t;)t.fn(t.val,e,n),n+=t.len,t=t.next;return e};St._configure=function(i){Rk=i,St.create=c4(),Rk._configure()}});var m4=G((i2e,h4)=>{"use strict";h4.exports=oo;var u4=q0();(oo.prototype=Object.create(u4.prototype)).constructor=oo;var nl=so();function oo(){u4.call(this)}oo._configure=function(){oo.alloc=nl._Buffer_allocUnsafe,oo.writeBytesBuffer=nl.Buffer&&nl.Buffer.prototype instanceof Uint8Array&&nl.Buffer.prototype.set.name==="set"?function(t,e,n){e.set(t,n)}:function(t,e,n){if(t.copy)t.copy(e,n,0,t.length);else for(var r=0;r<t.length;)e[n++]=t[r++]}};oo.prototype.bytes=function(t){nl.isString(t)&&(t=nl._Buffer_from(t,"base64"));var e=t.length>>>0;return this.uint32(e),e&&this._push(oo.writeBytesBuffer,e,t),this};function kee(i,t,e){i.length<40?nl.utf8.write(i,t,e):t.utf8Write?t.utf8Write(i,e):t.write(i,e)}oo.prototype.string=function(t){var e=nl.Buffer.byteLength(t);return this.uint32(e),e&&this._push(kee,e,t),this};oo._configure()});var G0=G((n2e,b4)=>{"use strict";b4.exports=Ni;var Ds=so(),jk,g4=Ds.LongBits,Eee=Ds.utf8;function Ms(i,t){return RangeError("index out of range: "+i.pos+" + "+(t||1)+" > "+i.len)}function Ni(i){this.buf=i,this.pos=0,this.len=i.length}var f4=typeof Uint8Array<"u"?function(t){if(t instanceof Uint8Array||Array.isArray(t))return new Ni(t);throw Error("illegal buffer")}:function(t){if(Array.isArray(t))return new Ni(t);throw Error("illegal buffer")},_4=function(){return Ds.Buffer?function(e){return(Ni.create=function(r){return Ds.Buffer.isBuffer(r)?new jk(r):f4(r)})(e)}:f4};Ni.create=_4();Ni.prototype._slice=Ds.Array.prototype.subarray||Ds.Array.prototype.slice;Ni.prototype.uint32=function(){var t=4294967295;return function(){if(t=(this.buf[this.pos]&127)>>>0,this.buf[this.pos++]<128||(t=(t|(this.buf[this.pos]&127)<<7)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<14)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&127)<<21)>>>0,this.buf[this.pos++]<128)||(t=(t|(this.buf[this.pos]&15)<<28)>>>0,this.buf[this.pos++]<128))return t;if((this.pos+=5)>this.len)throw this.pos=this.len,Ms(this,10);return t}}();Ni.prototype.int32=function(){return this.uint32()|0};Ni.prototype.sint32=function(){var t=this.uint32();return t>>>1^-(t&1)|0};function zk(){var i=new g4(0,0),t=0;if(this.len-this.pos>4){for(;t<4;++t)if(i.lo=(i.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return i;if(i.lo=(i.lo|(this.buf[this.pos]&127)<<28)>>>0,i.hi=(i.hi|(this.buf[this.pos]&127)>>4)>>>0,this.buf[this.pos++]<128)return i;t=0}else{for(;t<3;++t){if(this.pos>=this.len)throw Ms(this);if(i.lo=(i.lo|(this.buf[this.pos]&127)<<t*7)>>>0,this.buf[this.pos++]<128)return i}return i.lo=(i.lo|(this.buf[this.pos++]&127)<<t*7)>>>0,i}if(this.len-this.pos>4){for(;t<5;++t)if(i.hi=(i.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return i}else for(;t<5;++t){if(this.pos>=this.len)throw Ms(this);if(i.hi=(i.hi|(this.buf[this.pos]&127)<<t*7+3)>>>0,this.buf[this.pos++]<128)return i}throw Error("invalid varint encoding")}Ni.prototype.bool=function(){return this.uint32()!==0};function W0(i,t){return(i[t-4]|i[t-3]<<8|i[t-2]<<16|i[t-1]<<24)>>>0}Ni.prototype.fixed32=function(){if(this.pos+4>this.len)throw Ms(this,4);return W0(this.buf,this.pos+=4)};Ni.prototype.sfixed32=function(){if(this.pos+4>this.len)throw Ms(this,4);return W0(this.buf,this.pos+=4)|0};function p4(){if(this.pos+8>this.len)throw Ms(this,8);return new g4(W0(this.buf,this.pos+=4),W0(this.buf,this.pos+=4))}Ni.prototype.float=function(){if(this.pos+4>this.len)throw Ms(this,4);var t=Ds.float.readFloatLE(this.buf,this.pos);return this.pos+=4,t};Ni.prototype.double=function(){if(this.pos+8>this.len)throw Ms(this,4);var t=Ds.float.readDoubleLE(this.buf,this.pos);return this.pos+=8,t};Ni.prototype.bytes=function(){var t=this.uint32(),e=this.pos,n=this.pos+t;if(n>this.len)throw Ms(this,t);if(this.pos+=t,Array.isArray(this.buf))return this.buf.slice(e,n);if(e===n){var r=Ds.Buffer;return r?r.alloc(0):new this.buf.constructor(0)}return this._slice.call(this.buf,e,n)};Ni.prototype.string=function(){var t=this.bytes();return Eee.read(t,0,t.length)};Ni.prototype.skip=function(t){if(typeof t=="number"){if(this.pos+t>this.len)throw Ms(this,t);this.pos+=t}else do if(this.pos>=this.len)throw Ms(this);while(this.buf[this.pos++]&128);return this};Ni.prototype.skipType=function(i){switch(i){case 0:this.skip();break;case 1:this.skip(8);break;case 2:this.skip(this.uint32());break;case 3:for(;(i=this.uint32()&7)!==4;)this.skipType(i);break;case 5:this.skip(4);break;default:throw Error("invalid wire type "+i+" at offset "+this.pos)}return this};Ni._configure=function(i){jk=i,Ni.create=_4(),jk._configure();var t=Ds.Long?"toLong":"toNumber";Ds.merge(Ni.prototype,{int64:function(){return zk.call(this)[t](!1)},uint64:function(){return zk.call(this)[t](!0)},sint64:function(){return zk.call(this).zzDecode()[t](!1)},fixed64:function(){return p4.call(this)[t](!0)},sfixed64:function(){return p4.call(this)[t](!1)}})}});var w4=G((r2e,x4)=>{"use strict";x4.exports=Yc;var y4=G0();(Yc.prototype=Object.create(y4.prototype)).constructor=Yc;var v4=so();function Yc(i){y4.call(this,i)}Yc._configure=function(){v4.Buffer&&(Yc.prototype._slice=v4.Buffer.prototype.slice)};Yc.prototype.string=function(){var t=this.uint32();return this.buf.utf8Slice?this.buf.utf8Slice(this.pos,this.pos=Math.min(this.pos+t,this.len)):this.buf.toString("utf-8",this.pos,this.pos=Math.min(this.pos+t,this.len))};Yc._configure()});var S4=G((s2e,C4)=>{"use strict";C4.exports=vp;var Uk=so();(vp.prototype=Object.create(Uk.EventEmitter.prototype)).constructor=vp;function vp(i,t,e){if(typeof i!="function")throw TypeError("rpcImpl must be a function");Uk.EventEmitter.call(this),this.rpcImpl=i,this.requestDelimited=!!t,this.responseDelimited=!!e}vp.prototype.rpcCall=function i(t,e,n,r,s){if(!r)throw TypeError("request must be specified");var o=this;if(!s)return Uk.asPromise(i,o,t,e,n,r);if(!o.rpcImpl){setTimeout(function(){s(Error("already ended"))},0);return}try{return o.rpcImpl(t,e[o.requestDelimited?"encodeDelimited":"encode"](r).finish(),function(l,c){if(l)return o.emit("error",l,t),s(l);if(c===null){o.end(!0);return}if(!(c instanceof n))try{c=n[o.responseDelimited?"decodeDelimited":"decode"](c)}catch(d){return o.emit("error",d,t),s(d)}return o.emit("data",c,t),s(null,c)})}catch(a){o.emit("error",a,t),setTimeout(function(){s(a)},0);return}};vp.prototype.end=function(t){return this.rpcImpl&&(t||this.rpcImpl(null,null,null),this.rpcImpl=null,this.emit("end").off()),this}});var Hk=G(k4=>{"use strict";var Tee=k4;Tee.Service=S4()});var qk=G((a2e,E4)=>{"use strict";E4.exports={}});var D4=G(I4=>{"use strict";var dr=I4;dr.build="minimal";dr.Writer=q0();dr.BufferWriter=m4();dr.Reader=G0();dr.BufferReader=w4();dr.util=so();dr.rpc=Hk();dr.roots=qk();dr.configure=T4;function T4(){dr.util._configure(),dr.Writer._configure(dr.BufferWriter),dr.Reader._configure(dr.BufferReader)}T4()});var A4=G((c2e,M4)=>{"use strict";M4.exports=Wk;function Wk(i,t){typeof i=="string"&&(t=i,i=void 0);var e=[];function n(s){if(typeof s!="string"){var o=r();if(Wk.verbose&&console.log("codegen: "+o),o="return "+o,s){for(var a=Object.keys(s),l=new Array(a.length+1),c=new Array(a.length),d=0;d<a.length;)l[d]=a[d],c[d]=s[a[d++]];return l[d]=o,Function.apply(null,l).apply(null,c)}return Function(o)()}for(var u=new Array(arguments.length-1),h=0;h<u.length;)u[h]=arguments[++h];if(h=0,s=s.replace(/%([%dfijs])/g,function(_,b){var v=u[h++];switch(b){case"d":case"f":return String(Number(v));case"i":return String(Math.floor(v));case"j":return JSON.stringify(v);case"s":return String(v)}return"%"}),h!==u.length)throw Error("parameter count mismatch");return e.push(s),n}function r(s){return"function "+(s||t||"")+"("+(i&&i.join(",")||"")+`){
  `+e.join(`
  `)+`
}`}return n.toString=r,n}Wk.verbose=!1});var P4=G((d2e,O4)=>{"use strict";O4.exports=yp;var Iee=Mk(),Dee=Ak(),Gk=Dee("fs");function yp(i,t,e){return typeof t=="function"?(e=t,t={}):t||(t={}),e?!t.xhr&&Gk&&Gk.readFile?Gk.readFile(i,function(r,s){return r&&typeof XMLHttpRequest<"u"?yp.xhr(i,t,e):r?e(r):e(null,t.binary?s:s.toString("utf8"))}):yp.xhr(i,t,e):Iee(yp,this,i,t)}yp.xhr=function(t,e,n){var r=new XMLHttpRequest;r.onreadystatechange=function(){if(r.readyState===4){if(r.status!==0&&r.status!==200)return n(Error("status "+r.status));if(e.binary){var o=r.response;if(!o){o=[];for(var a=0;a<r.responseText.length;++a)o.push(r.responseText.charCodeAt(a)&255)}return n(null,typeof Uint8Array<"u"?new Uint8Array(o):o)}return n(null,r.responseText)}},e.binary&&("overrideMimeType"in r&&r.overrideMimeType("text/plain; charset=x-user-defined"),r.responseType="arraybuffer"),r.open("GET",t),r.send()}});var N4=G(F4=>{"use strict";var Kk=F4,R4=Kk.isAbsolute=function(t){return/^(?:\/|\w+:)/.test(t)},$k=Kk.normalize=function(t){t=t.replace(/\\/g,"/").replace(/\/{2,}/g,"/");var e=t.split("/"),n=R4(t),r="";n&&(r=e.shift()+"/");for(var s=0;s<e.length;)e[s]===".."?s>0&&e[s-1]!==".."?e.splice(--s,2):n?e.splice(s,1):++s:e[s]==="."?e.splice(s,1):++s;return r+e.join("/")};Kk.resolve=function(t,e,n){return n||(e=$k(e)),R4(e)?e:(n||(t=$k(t)),(t=t.replace(/(?:\/|^)[^/]+$/,"")).length?$k(t+"/"+e):e)}});var Zu=G((h2e,V4)=>{"use strict";V4.exports=kt;var $0=sl();((kt.prototype=Object.create($0.prototype)).constructor=kt).className="Namespace";var Yk=rl(),K0=dn(),Mee=Zc(),Qc,Xu,Xc;kt.fromJSON=function(t,e){return new kt(t,e.options).addJSON(e.nested)};function L4(i,t){if(i&&i.length){for(var e={},n=0;n<i.length;++n)e[i[n].name]=i[n].toJSON(t);return e}}kt.arrayToJSON=L4;kt.isReservedId=function(t,e){if(t){for(var n=0;n<t.length;++n)if(typeof t[n]!="string"&&t[n][0]<=e&&t[n][1]>e)return!0}return!1};kt.isReservedName=function(t,e){if(t){for(var n=0;n<t.length;++n)if(t[n]===e)return!0}return!1};function kt(i,t){$0.call(this,i,t),this.nested=void 0,this._nestedArray=null}function B4(i){return i._nestedArray=null,i}Object.defineProperty(kt.prototype,"nestedArray",{get:function(){return this._nestedArray||(this._nestedArray=K0.toArray(this.nested))}});kt.prototype.toJSON=function(t){return K0.toObject(["options",this.options,"nested",L4(this.nestedArray,t)])};kt.prototype.addJSON=function(t){var e=this;if(t)for(var n=Object.keys(t),r=0,s;r<n.length;++r)s=t[n[r]],e.add((s.fields!==void 0?Qc.fromJSON:s.values!==void 0?Xc.fromJSON:s.methods!==void 0?Xu.fromJSON:s.id!==void 0?Yk.fromJSON:kt.fromJSON)(n[r],s));return this};kt.prototype.get=function(t){return this.nested&&this.nested[t]||null};kt.prototype.getEnum=function(t){if(this.nested&&this.nested[t]instanceof Xc)return this.nested[t].values;throw Error("no such enum: "+t)};kt.prototype.add=function(t){if(!(t instanceof Yk&&t.extend!==void 0||t instanceof Qc||t instanceof Mee||t instanceof Xc||t instanceof Xu||t instanceof kt))throw TypeError("object must be a valid nested object");if(!this.nested)this.nested={};else{var e=this.get(t.name);if(e)if(e instanceof kt&&t instanceof kt&&!(e instanceof Qc||e instanceof Xu)){for(var n=e.nestedArray,r=0;r<n.length;++r)t.add(n[r]);this.remove(e),this.nested||(this.nested={}),t.setOptions(e.options,!0)}else throw Error("duplicate name '"+t.name+"' in "+this)}return this.nested[t.name]=t,this instanceof Qc||this instanceof Xu||this instanceof Xc||this instanceof Yk||t._edition||(t._edition=t._defaultEdition),t.onAdd(this),B4(this)};kt.prototype.remove=function(t){if(!(t instanceof $0))throw TypeError("object must be a ReflectionObject");if(t.parent!==this)throw Error(t+" is not a member of "+this);return delete this.nested[t.name],Object.keys(this.nested).length||(this.nested=void 0),t.onRemove(this),B4(this)};kt.prototype.define=function(t,e){if(K0.isString(t))t=t.split(".");else if(!Array.isArray(t))throw TypeError("illegal path");if(t&&t.length&&t[0]==="")throw Error("path must be relative");for(var n=this;t.length>0;){var r=t.shift();if(n.nested&&n.nested[r]){if(n=n.nested[r],!(n instanceof kt))throw Error("path conflicts with non-namespace objects")}else n.add(n=new kt(r))}return e&&n.addJSON(e),n};kt.prototype.resolveAll=function(){var t=this.nestedArray,e=0;for(this.resolve();e<t.length;)t[e]instanceof kt?t[e++].resolveAll():t[e++].resolve();return this};kt.prototype._resolveFeaturesRecursive=function(t){return t=this._edition||t,$0.prototype._resolveFeaturesRecursive.call(this,t),this.nestedArray.forEach(e=>{e._resolveFeaturesRecursive(t)}),this};kt.prototype.lookup=function(t,e,n){if(typeof e=="boolean"?(n=e,e=void 0):e&&!Array.isArray(e)&&(e=[e]),K0.isString(t)&&t.length){if(t===".")return this.root;t=t.split(".")}else if(!t.length)return this;if(t[0]==="")return this.root.lookup(t.slice(1),e);var r=this.get(t[0]);if(r){if(t.length===1){if(!e||e.indexOf(r.constructor)>-1)return r}else if(r instanceof kt&&(r=r.lookup(t.slice(1),e,!0)))return r}else for(var s=0;s<this.nestedArray.length;++s)if(this._nestedArray[s]instanceof kt&&(r=this._nestedArray[s].lookup(t,e,!0)))return r;return this.parent===null||n?null:this.parent.lookup(t,e)};kt.prototype.lookupType=function(t){var e=this.lookup(t,[Qc]);if(!e)throw Error("no such type: "+t);return e};kt.prototype.lookupEnum=function(t){var e=this.lookup(t,[Xc]);if(!e)throw Error("no such Enum '"+t+"' in "+this);return e};kt.prototype.lookupTypeOrEnum=function(t){var e=this.lookup(t,[Qc,Xc]);if(!e)throw Error("no such Type or Enum '"+t+"' in "+this);return e};kt.prototype.lookupService=function(t){var e=this.lookup(t,[Xu]);if(!e)throw Error("no such Service '"+t+"' in "+this);return e};kt._configure=function(i,t,e){Qc=i,Xu=t,Xc=e}});var Y0=G((m2e,z4)=>{"use strict";z4.exports=ta;var Qk=rl();((ta.prototype=Object.create(Qk.prototype)).constructor=ta).className="MapField";var Aee=Jc(),xp=dn();function ta(i,t,e,n,r,s){if(Qk.call(this,i,t,n,void 0,void 0,r,s),!xp.isString(e))throw TypeError("keyType must be a string");this.keyType=e,this.resolvedKeyType=null,this.map=!0}ta.fromJSON=function(t,e){return new ta(t,e.id,e.keyType,e.type,e.options,e.comment)};ta.prototype.toJSON=function(t){var e=t?!!t.keepComments:!1;return xp.toObject(["keyType",this.keyType,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])};ta.prototype.resolve=function(){if(this.resolved)return this;if(Aee.mapKey[this.keyType]===void 0)throw Error("invalid key type: "+this.keyType);return Qk.prototype.resolve.call(this)};ta.d=function(t,e,n){return typeof n=="function"?n=xp.decorateType(n).name:n&&typeof n=="object"&&(n=xp.decorateEnum(n).name),function(s,o){xp.decorateType(s.constructor).add(new ta(o,t,e,n))}}});var Q0=G((f2e,j4)=>{"use strict";j4.exports=ed;var Xk=sl();((ed.prototype=Object.create(Xk.prototype)).constructor=ed).className="Method";var Ju=dn();function ed(i,t,e,n,r,s,o,a,l){if(Ju.isObject(r)?(o=r,r=s=void 0):Ju.isObject(s)&&(o=s,s=void 0),!(t===void 0||Ju.isString(t)))throw TypeError("type must be a string");if(!Ju.isString(e))throw TypeError("requestType must be a string");if(!Ju.isString(n))throw TypeError("responseType must be a string");Xk.call(this,i,o),this.type=t||"rpc",this.requestType=e,this.requestStream=r?!0:void 0,this.responseType=n,this.responseStream=s?!0:void 0,this.resolvedRequestType=null,this.resolvedResponseType=null,this.comment=a,this.parsedOptions=l}ed.fromJSON=function(t,e){return new ed(t,e.type,e.requestType,e.responseType,e.requestStream,e.responseStream,e.options,e.comment,e.parsedOptions)};ed.prototype.toJSON=function(t){var e=t?!!t.keepComments:!1;return Ju.toObject(["type",this.type!=="rpc"&&this.type||void 0,"requestType",this.requestType,"requestStream",this.requestStream,"responseType",this.responseType,"responseStream",this.responseStream,"options",this.options,"comment",e?this.comment:void 0,"parsedOptions",this.parsedOptions])};ed.prototype.resolve=function(){return this.resolved?this:(this.resolvedRequestType=this.parent.lookupType(this.requestType),this.resolvedResponseType=this.parent.lookupType(this.responseType),Xk.prototype.resolve.call(this))}});var X0=G((p2e,H4)=>{"use strict";H4.exports=Ir;var ia=Zu();((Ir.prototype=Object.create(ia.prototype)).constructor=Ir).className="Service";var Zk=Q0(),wp=dn(),Oee=Hk();function Ir(i,t){ia.call(this,i,t),this.methods={},this._methodsArray=null}Ir.fromJSON=function(t,e){var n=new Ir(t,e.options);if(e.methods)for(var r=Object.keys(e.methods),s=0;s<r.length;++s)n.add(Zk.fromJSON(r[s],e.methods[r[s]]));return e.nested&&n.addJSON(e.nested),e.edition&&(n._edition=e.edition),n.comment=e.comment,n._defaultEdition="proto3",n};Ir.prototype.toJSON=function(t){var e=ia.prototype.toJSON.call(this,t),n=t?!!t.keepComments:!1;return wp.toObject(["edition",this._editionToJSON(),"options",e&&e.options||void 0,"methods",ia.arrayToJSON(this.methodsArray,t)||{},"nested",e&&e.nested||void 0,"comment",n?this.comment:void 0])};Object.defineProperty(Ir.prototype,"methodsArray",{get:function(){return this._methodsArray||(this._methodsArray=wp.toArray(this.methods))}});function U4(i){return i._methodsArray=null,i}Ir.prototype.get=function(t){return this.methods[t]||ia.prototype.get.call(this,t)};Ir.prototype.resolveAll=function(){ia.prototype.resolve.call(this);for(var t=this.methodsArray,e=0;e<t.length;++e)t[e].resolve();return this};Ir.prototype._resolveFeaturesRecursive=function(t){return t=this._edition||t,ia.prototype._resolveFeaturesRecursive.call(this,t),this.methodsArray.forEach(e=>{e._resolveFeaturesRecursive(t)}),this};Ir.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);return t instanceof Zk?(this.methods[t.name]=t,t.parent=this,U4(this)):ia.prototype.add.call(this,t)};Ir.prototype.remove=function(t){if(t instanceof Zk){if(this.methods[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.methods[t.name],t.parent=null,U4(this)}return ia.prototype.remove.call(this,t)};Ir.prototype.create=function(t,e,n){for(var r=new Oee.Service(t,e,n),s=0,o;s<this.methodsArray.length;++s){var a=wp.lcFirst((o=this._methodsArray[s]).resolve().name).replace(/[^$\w_]/g,"");r[a]=wp.codegen(["r","c"],wp.isReserved(a)?a+"_":a)("return this.rpcCall(m,q,s,r,c)")({m:o,q:o.resolvedRequestType.ctor,s:o.resolvedResponseType.ctor})}return r}});var Z0=G((g2e,q4)=>{"use strict";q4.exports=ao;var Pee=so();function ao(i){if(i)for(var t=Object.keys(i),e=0;e<t.length;++e)this[t[e]]=i[t[e]]}ao.create=function(t){return this.$type.create(t)};ao.encode=function(t,e){return this.$type.encode(t,e)};ao.encodeDelimited=function(t,e){return this.$type.encodeDelimited(t,e)};ao.decode=function(t){return this.$type.decode(t)};ao.decodeDelimited=function(t){return this.$type.decodeDelimited(t)};ao.verify=function(t){return this.$type.verify(t)};ao.fromObject=function(t){return this.$type.fromObject(t)};ao.toObject=function(t,e){return this.$type.toObject(t,e)};ao.prototype.toJSON=function(){return this.$type.toObject(this,Pee.toJSONOptions)}});var Jk=G((_2e,G4)=>{"use strict";G4.exports=Nee;var Ree=As(),na=Jc(),W4=dn();function Fee(i){return"missing required '"+i.name+"'"}function Nee(i){for(var t=W4.codegen(["r","l","e"],i.name+"$decode")("if(!(r instanceof Reader))")("r=Reader.create(r)")("var c=l===undefined?r.len:r.pos+l,m=new this.ctor"+(i.fieldsArray.filter(function(a){return a.map}).length?",k,value":""))("while(r.pos<c){")("var t=r.uint32()")("if(t===e)")("break")("switch(t>>>3){"),e=0;e<i.fieldsArray.length;++e){var n=i._fieldsArray[e].resolve(),r=n.resolvedType instanceof Ree?"int32":n.type,s="m"+W4.safeProp(n.name);t("case %i: {",n.id),n.map?(t("if(%s===util.emptyObject)",s)("%s={}",s)("var c2 = r.uint32()+r.pos"),na.defaults[n.keyType]!==void 0?t("k=%j",na.defaults[n.keyType]):t("k=null"),na.defaults[r]!==void 0?t("value=%j",na.defaults[r]):t("value=null"),t("while(r.pos<c2){")("var tag2=r.uint32()")("switch(tag2>>>3){")("case 1: k=r.%s(); break",n.keyType)("case 2:"),na.basic[r]===void 0?t("value=types[%i].decode(r,r.uint32())",e):t("value=r.%s()",r),t("break")("default:")("r.skipType(tag2&7)")("break")("}")("}"),na.long[n.keyType]!==void 0?t('%s[typeof k==="object"?util.longToHash(k):k]=value',s):t("%s[k]=value",s)):n.repeated?(t("if(!(%s&&%s.length))",s,s)("%s=[]",s),na.packed[r]!==void 0&&t("if((t&7)===2){")("var c2=r.uint32()+r.pos")("while(r.pos<c2)")("%s.push(r.%s())",s,r)("}else"),na.basic[r]===void 0?t(n.delimited?"%s.push(types[%i].decode(r,undefined,((t&~7)|4)))":"%s.push(types[%i].decode(r,r.uint32()))",s,e):t("%s.push(r.%s())",s,r)):na.basic[r]===void 0?t(n.delimited?"%s=types[%i].decode(r,undefined,((t&~7)|4))":"%s=types[%i].decode(r,r.uint32())",s,e):t("%s=r.%s()",s,r),t("break")("}")}for(t("default:")("r.skipType(t&7)")("break")("}")("}"),e=0;e<i._fieldsArray.length;++e){var o=i._fieldsArray[e];o.required&&t("if(!m.hasOwnProperty(%j))",o.name)("throw util.ProtocolError(%j,{instance:m})",Fee(o))}return t("return m")}});var iE=G((b2e,$4)=>{"use strict";$4.exports=Vee;var Lee=As(),eE=dn();function ns(i,t){return i.name+": "+t+(i.repeated&&t!=="array"?"[]":i.map&&t!=="object"?"{k:"+i.keyType+"}":"")+" expected"}function tE(i,t,e,n){if(t.resolvedType)if(t.resolvedType instanceof Lee){i("switch(%s){",n)("default:")("return%j",ns(t,"enum value"));for(var r=Object.keys(t.resolvedType.values),s=0;s<r.length;++s)i("case %i:",t.resolvedType.values[r[s]]);i("break")("}")}else i("{")("var e=types[%i].verify(%s);",e,n)("if(e)")("return%j+e",t.name+".")("}");else switch(t.type){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":i("if(!util.isInteger(%s))",n)("return%j",ns(t,"integer"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":i("if(!util.isInteger(%s)&&!(%s&&util.isInteger(%s.low)&&util.isInteger(%s.high)))",n,n,n,n)("return%j",ns(t,"integer|Long"));break;case"float":case"double":i('if(typeof %s!=="number")',n)("return%j",ns(t,"number"));break;case"bool":i('if(typeof %s!=="boolean")',n)("return%j",ns(t,"boolean"));break;case"string":i("if(!util.isString(%s))",n)("return%j",ns(t,"string"));break;case"bytes":i('if(!(%s&&typeof %s.length==="number"||util.isString(%s)))',n,n,n)("return%j",ns(t,"buffer"));break}return i}function Bee(i,t,e){switch(t.keyType){case"int32":case"uint32":case"sint32":case"fixed32":case"sfixed32":i("if(!util.key32Re.test(%s))",e)("return%j",ns(t,"integer key"));break;case"int64":case"uint64":case"sint64":case"fixed64":case"sfixed64":i("if(!util.key64Re.test(%s))",e)("return%j",ns(t,"integer|Long key"));break;case"bool":i("if(!util.key2Re.test(%s))",e)("return%j",ns(t,"boolean key"));break}return i}function Vee(i){var t=eE.codegen(["m"],i.name+"$verify")('if(typeof m!=="object"||m===null)')("return%j","object expected"),e=i.oneofsArray,n={};e.length&&t("var p={}");for(var r=0;r<i.fieldsArray.length;++r){var s=i._fieldsArray[r].resolve(),o="m"+eE.safeProp(s.name);if(s.optional&&t("if(%s!=null&&m.hasOwnProperty(%j)){",o,s.name),s.map)t("if(!util.isObject(%s))",o)("return%j",ns(s,"object"))("var k=Object.keys(%s)",o)("for(var i=0;i<k.length;++i){"),Bee(t,s,"k[i]"),tE(t,s,r,o+"[k[i]]")("}");else if(s.repeated)t("if(!Array.isArray(%s))",o)("return%j",ns(s,"array"))("for(var i=0;i<%s.length;++i){",o),tE(t,s,r,o+"[i]")("}");else{if(s.partOf){var a=eE.safeProp(s.partOf.name);n[s.partOf.name]===1&&t("if(p%s===1)",a)("return%j",s.partOf.name+": multiple values"),n[s.partOf.name]=1,t("p%s=1",a)}tE(t,s,r,o)}s.optional&&t("}")}return t("return null")}});var sE=G(Y4=>{"use strict";var K4=Y4,Cp=As(),lo=dn();function nE(i,t,e,n){var r=!1;if(t.resolvedType)if(t.resolvedType instanceof Cp){i("switch(d%s){",n);for(var s=t.resolvedType.values,o=Object.keys(s),a=0;a<o.length;++a)s[o[a]]===t.typeDefault&&!r&&(i("default:")('if(typeof(d%s)==="number"){m%s=d%s;break}',n,n,n),t.repeated||i("break"),r=!0),i("case%j:",o[a])("case %i:",s[o[a]])("m%s=%j",n,s[o[a]])("break");i("}")}else i('if(typeof d%s!=="object")',n)("throw TypeError(%j)",t.fullName+": object expected")("m%s=types[%i].fromObject(d%s)",n,e,n);else{var l=!1;switch(t.type){case"double":case"float":i("m%s=Number(d%s)",n,n);break;case"uint32":case"fixed32":i("m%s=d%s>>>0",n,n);break;case"int32":case"sint32":case"sfixed32":i("m%s=d%s|0",n,n);break;case"uint64":l=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":i("if(util.Long)")("(m%s=util.Long.fromValue(d%s)).unsigned=%j",n,n,l)('else if(typeof d%s==="string")',n)("m%s=parseInt(d%s,10)",n,n)('else if(typeof d%s==="number")',n)("m%s=d%s",n,n)('else if(typeof d%s==="object")',n)("m%s=new util.LongBits(d%s.low>>>0,d%s.high>>>0).toNumber(%s)",n,n,n,l?"true":"");break;case"bytes":i('if(typeof d%s==="string")',n)("util.base64.decode(d%s,m%s=util.newBuffer(util.base64.length(d%s)),0)",n,n,n)("else if(d%s.length >= 0)",n)("m%s=d%s",n,n);break;case"string":i("m%s=String(d%s)",n,n);break;case"bool":i("m%s=Boolean(d%s)",n,n);break}}return i}K4.fromObject=function(t){var e=t.fieldsArray,n=lo.codegen(["d"],t.name+"$fromObject")("if(d instanceof this.ctor)")("return d");if(!e.length)return n("return new this.ctor");n("var m=new this.ctor");for(var r=0;r<e.length;++r){var s=e[r].resolve(),o=lo.safeProp(s.name);s.map?(n("if(d%s){",o)('if(typeof d%s!=="object")',o)("throw TypeError(%j)",s.fullName+": object expected")("m%s={}",o)("for(var ks=Object.keys(d%s),i=0;i<ks.length;++i){",o),nE(n,s,r,o+"[ks[i]]")("}")("}")):s.repeated?(n("if(d%s){",o)("if(!Array.isArray(d%s))",o)("throw TypeError(%j)",s.fullName+": array expected")("m%s=[]",o)("for(var i=0;i<d%s.length;++i){",o),nE(n,s,r,o+"[i]")("}")("}")):(s.resolvedType instanceof Cp||n("if(d%s!=null){",o),nE(n,s,r,o),s.resolvedType instanceof Cp||n("}"))}return n("return m")};function rE(i,t,e,n){if(t.resolvedType)t.resolvedType instanceof Cp?i("d%s=o.enums===String?(types[%i].values[m%s]===undefined?m%s:types[%i].values[m%s]):m%s",n,e,n,n,e,n,n):i("d%s=types[%i].toObject(m%s,o)",n,e,n);else{var r=!1;switch(t.type){case"double":case"float":i("d%s=o.json&&!isFinite(m%s)?String(m%s):m%s",n,n,n,n);break;case"uint64":r=!0;case"int64":case"sint64":case"fixed64":case"sfixed64":i('if(typeof m%s==="number")',n)("d%s=o.longs===String?String(m%s):m%s",n,n,n)("else")("d%s=o.longs===String?util.Long.prototype.toString.call(m%s):o.longs===Number?new util.LongBits(m%s.low>>>0,m%s.high>>>0).toNumber(%s):m%s",n,n,n,n,r?"true":"",n);break;case"bytes":i("d%s=o.bytes===String?util.base64.encode(m%s,0,m%s.length):o.bytes===Array?Array.prototype.slice.call(m%s):m%s",n,n,n,n,n);break;default:i("d%s=m%s",n,n);break}}return i}K4.toObject=function(t){var e=t.fieldsArray.slice().sort(lo.compareFieldsById);if(!e.length)return lo.codegen()("return {}");for(var n=lo.codegen(["m","o"],t.name+"$toObject")("if(!o)")("o={}")("var d={}"),r=[],s=[],o=[],a=0;a<e.length;++a)e[a].partOf||(e[a].resolve().repeated?r:e[a].map?s:o).push(e[a]);if(r.length){for(n("if(o.arrays||o.defaults){"),a=0;a<r.length;++a)n("d%s=[]",lo.safeProp(r[a].name));n("}")}if(s.length){for(n("if(o.objects||o.defaults){"),a=0;a<s.length;++a)n("d%s={}",lo.safeProp(s[a].name));n("}")}if(o.length){for(n("if(o.defaults){"),a=0;a<o.length;++a){var l=o[a],c=lo.safeProp(l.name);if(l.resolvedType instanceof Cp)n("d%s=o.enums===String?%j:%j",c,l.resolvedType.valuesById[l.typeDefault],l.typeDefault);else if(l.long)n("if(util.Long){")("var n=new util.Long(%i,%i,%j)",l.typeDefault.low,l.typeDefault.high,l.typeDefault.unsigned)("d%s=o.longs===String?n.toString():o.longs===Number?n.toNumber():n",c)("}else")("d%s=o.longs===String?%j:%i",c,l.typeDefault.toString(),l.typeDefault.toNumber());else if(l.bytes){var d="["+Array.prototype.slice.call(l.typeDefault).join(",")+"]";n("if(o.bytes===String)d%s=%j",c,String.fromCharCode.apply(String,l.typeDefault))("else{")("d%s=%s",c,d)("if(o.bytes!==Array)d%s=util.newBuffer(d%s)",c,c)("}")}else n("d%s=%j",c,l.typeDefault)}n("}")}var u=!1;for(a=0;a<e.length;++a){var l=e[a],h=t._fieldsArray.indexOf(l),c=lo.safeProp(l.name);l.map?(u||(u=!0,n("var ks2")),n("if(m%s&&(ks2=Object.keys(m%s)).length){",c,c)("d%s={}",c)("for(var j=0;j<ks2.length;++j){"),rE(n,l,h,c+"[ks2[j]]")("}")):l.repeated?(n("if(m%s&&m%s.length){",c,c)("d%s=[]",c)("for(var j=0;j<m%s.length;++j){",c),rE(n,l,h,c+"[j]")("}")):(n("if(m%s!=null&&m.hasOwnProperty(%j)){",c,l.name),rE(n,l,h,c),l.partOf&&n("if(o.oneofs)")("d%s=%j",lo.safeProp(l.partOf.name),l.name)),n("}")}return n("return d")}});var oE=G(Q4=>{"use strict";var zee=Q4,jee=Z0();zee[".google.protobuf.Any"]={fromObject:function(i){if(i&&i["@type"]){var t=i["@type"].substring(i["@type"].lastIndexOf("/")+1),e=this.lookup(t);if(e){var n=i["@type"].charAt(0)==="."?i["@type"].slice(1):i["@type"];return n.indexOf("/")===-1&&(n="/"+n),this.create({type_url:n,value:e.encode(e.fromObject(i)).finish()})}}return this.fromObject(i)},toObject:function(i,t){var e="type.googleapis.com/",n="",r="";if(t&&t.json&&i.type_url&&i.value){r=i.type_url.substring(i.type_url.lastIndexOf("/")+1),n=i.type_url.substring(0,i.type_url.lastIndexOf("/")+1);var s=this.lookup(r);s&&(i=s.decode(i.value))}if(!(i instanceof this.ctor)&&i instanceof jee){var o=i.$type.toObject(i,t),a=i.$type.fullName[0]==="."?i.$type.fullName.slice(1):i.$type.fullName;return n===""&&(n=e),r=n+a,o["@type"]=r,o}return this.toObject(i,t)}}});var tv=G((x2e,Z4)=>{"use strict";Z4.exports=Ht;var rs=Zu();((Ht.prototype=Object.create(rs.prototype)).constructor=Ht).className="Type";var Uee=As(),cE=Zc(),J0=rl(),Hee=Y0(),qee=X0(),aE=Z0(),lE=G0(),Wee=q0(),Pn=dn(),Gee=dE(),$ee=Jk(),Kee=iE(),X4=sE(),Yee=oE();function Ht(i,t){rs.call(this,i,t),this.fields={},this.oneofs=void 0,this.extensions=void 0,this.reserved=void 0,this.group=void 0,this._fieldsById=null,this._fieldsArray=null,this._oneofsArray=null,this._ctor=null}Object.defineProperties(Ht.prototype,{fieldsById:{get:function(){if(this._fieldsById)return this._fieldsById;this._fieldsById={};for(var i=Object.keys(this.fields),t=0;t<i.length;++t){var e=this.fields[i[t]],n=e.id;if(this._fieldsById[n])throw Error("duplicate id "+n+" in "+this);this._fieldsById[n]=e}return this._fieldsById}},fieldsArray:{get:function(){return this._fieldsArray||(this._fieldsArray=Pn.toArray(this.fields))}},oneofsArray:{get:function(){return this._oneofsArray||(this._oneofsArray=Pn.toArray(this.oneofs))}},ctor:{get:function(){return this._ctor||(this.ctor=Ht.generateConstructor(this)())},set:function(i){var t=i.prototype;t instanceof aE||((i.prototype=new aE).constructor=i,Pn.merge(i.prototype,t)),i.$type=i.prototype.$type=this,Pn.merge(i,aE,!0),this._ctor=i;for(var e=0;e<this.fieldsArray.length;++e)this._fieldsArray[e].resolve();var n={};for(e=0;e<this.oneofsArray.length;++e)n[this._oneofsArray[e].resolve().name]={get:Pn.oneOfGetter(this._oneofsArray[e].oneof),set:Pn.oneOfSetter(this._oneofsArray[e].oneof)};e&&Object.defineProperties(i.prototype,n)}}});Ht.generateConstructor=function(t){for(var e=Pn.codegen(["p"],t.name),n=0,r;n<t.fieldsArray.length;++n)(r=t._fieldsArray[n]).map?e("this%s={}",Pn.safeProp(r.name)):r.repeated&&e("this%s=[]",Pn.safeProp(r.name));return e("if(p)for(var ks=Object.keys(p),i=0;i<ks.length;++i)if(p[ks[i]]!=null)")("this[ks[i]]=p[ks[i]]")};function ev(i){return i._fieldsById=i._fieldsArray=i._oneofsArray=null,delete i.encode,delete i.decode,delete i.verify,i}Ht.fromJSON=function(t,e){var n=new Ht(t,e.options);n.extensions=e.extensions,n.reserved=e.reserved;for(var r=Object.keys(e.fields),s=0;s<r.length;++s)n.add((typeof e.fields[r[s]].keyType<"u"?Hee.fromJSON:J0.fromJSON)(r[s],e.fields[r[s]]));if(e.oneofs)for(r=Object.keys(e.oneofs),s=0;s<r.length;++s)n.add(cE.fromJSON(r[s],e.oneofs[r[s]]));if(e.nested)for(r=Object.keys(e.nested),s=0;s<r.length;++s){var o=e.nested[r[s]];n.add((o.id!==void 0?J0.fromJSON:o.fields!==void 0?Ht.fromJSON:o.values!==void 0?Uee.fromJSON:o.methods!==void 0?qee.fromJSON:rs.fromJSON)(r[s],o))}return e.extensions&&e.extensions.length&&(n.extensions=e.extensions),e.reserved&&e.reserved.length&&(n.reserved=e.reserved),e.group&&(n.group=!0),e.comment&&(n.comment=e.comment),e.edition&&(n._edition=e.edition),n._defaultEdition="proto3",n};Ht.prototype.toJSON=function(t){var e=rs.prototype.toJSON.call(this,t),n=t?!!t.keepComments:!1;return Pn.toObject(["edition",this._editionToJSON(),"options",e&&e.options||void 0,"oneofs",rs.arrayToJSON(this.oneofsArray,t),"fields",rs.arrayToJSON(this.fieldsArray.filter(function(r){return!r.declaringField}),t)||{},"extensions",this.extensions&&this.extensions.length?this.extensions:void 0,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"group",this.group||void 0,"nested",e&&e.nested||void 0,"comment",n?this.comment:void 0])};Ht.prototype.resolveAll=function(){rs.prototype.resolveAll.call(this);var t=this.oneofsArray;for(n=0;n<t.length;)t[n++].resolve();for(var e=this.fieldsArray,n=0;n<e.length;)e[n++].resolve();return this};Ht.prototype._resolveFeaturesRecursive=function(t){return t=this._edition||t,rs.prototype._resolveFeaturesRecursive.call(this,t),this.oneofsArray.forEach(e=>{e._resolveFeatures(t)}),this.fieldsArray.forEach(e=>{e._resolveFeatures(t)}),this};Ht.prototype.get=function(t){return this.fields[t]||this.oneofs&&this.oneofs[t]||this.nested&&this.nested[t]||null};Ht.prototype.add=function(t){if(this.get(t.name))throw Error("duplicate name '"+t.name+"' in "+this);if(t instanceof J0&&t.extend===void 0){if(this._fieldsById?this._fieldsById[t.id]:this.fieldsById[t.id])throw Error("duplicate id "+t.id+" in "+this);if(this.isReservedId(t.id))throw Error("id "+t.id+" is reserved in "+this);if(this.isReservedName(t.name))throw Error("name '"+t.name+"' is reserved in "+this);return t.parent&&t.parent.remove(t),this.fields[t.name]=t,t.message=this,t.onAdd(this),ev(this)}return t instanceof cE?(this.oneofs||(this.oneofs={}),this.oneofs[t.name]=t,t.onAdd(this),ev(this)):rs.prototype.add.call(this,t)};Ht.prototype.remove=function(t){if(t instanceof J0&&t.extend===void 0){if(!this.fields||this.fields[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.fields[t.name],t.parent=null,t.onRemove(this),ev(this)}if(t instanceof cE){if(!this.oneofs||this.oneofs[t.name]!==t)throw Error(t+" is not a member of "+this);return delete this.oneofs[t.name],t.parent=null,t.onRemove(this),ev(this)}return rs.prototype.remove.call(this,t)};Ht.prototype.isReservedId=function(t){return rs.isReservedId(this.reserved,t)};Ht.prototype.isReservedName=function(t){return rs.isReservedName(this.reserved,t)};Ht.prototype.create=function(t){return new this.ctor(t)};Ht.prototype.setup=function(){for(var t=this.fullName,e=[],n=0;n<this.fieldsArray.length;++n)e.push(this._fieldsArray[n].resolve().resolvedType);this.encode=Gee(this)({Writer:Wee,types:e,util:Pn}),this.decode=$ee(this)({Reader:lE,types:e,util:Pn}),this.verify=Kee(this)({types:e,util:Pn}),this.fromObject=X4.fromObject(this)({types:e,util:Pn}),this.toObject=X4.toObject(this)({types:e,util:Pn});var r=Yee[t];if(r){var s=Object.create(this);s.fromObject=this.fromObject,this.fromObject=r.fromObject.bind(s),s.toObject=this.toObject,this.toObject=r.toObject.bind(s)}return this};Ht.prototype.encode=function(t,e){return this.setup().encode(t,e)};Ht.prototype.encodeDelimited=function(t,e){return this.encode(t,e&&e.len?e.fork():e).ldelim()};Ht.prototype.decode=function(t,e){return this.setup().decode(t,e)};Ht.prototype.decodeDelimited=function(t){return t instanceof lE||(t=lE.create(t)),this.decode(t,t.uint32())};Ht.prototype.verify=function(t){return this.setup().verify(t)};Ht.prototype.fromObject=function(t){return this.setup().fromObject(t)};Ht.prototype.toObject=function(t,e){return this.setup().toObject(t,e)};Ht.d=function(t){return function(n){Pn.decorateType(n,t)}}});var rv=G((w2e,nB)=>{"use strict";nB.exports=Dr;var nv=Zu();((Dr.prototype=Object.create(nv.prototype)).constructor=Dr).className="Root";var hE=rl(),eB=As(),Qee=Zc(),ol=dn(),tB,uE,Sp;function Dr(i){nv.call(this,"",i),this.deferred=[],this.files=[],this._edition="proto2"}Dr.fromJSON=function(t,e){return e||(e=new Dr),t.options&&e.setOptions(t.options),e.addJSON(t.nested).resolveAll()};Dr.prototype.resolvePath=ol.path.resolve;Dr.prototype.fetch=ol.fetch;function iB(){}Dr.prototype.load=function i(t,e,n){typeof e=="function"&&(n=e,e=void 0);var r=this;if(!n)return ol.asPromise(i,r,t,e);var s=n===iB;function o(m,_){if(n){if(s)throw m;var b=n;n=null,_&&_.resolveAll(),b(m,_)}}function a(m){var _=m.lastIndexOf("google/protobuf/");if(_>-1){var b=m.substring(_);if(b in Sp)return b}return null}function l(m,_){try{if(ol.isString(_)&&_.charAt(0)==="{"&&(_=JSON.parse(_)),!ol.isString(_))r.setOptions(_.options).addJSON(_.nested);else{uE.filename=m;var b=uE(_,r,e),v,I=0;if(b.imports)for(;I<b.imports.length;++I)(v=a(b.imports[I])||r.resolvePath(m,b.imports[I]))&&c(v);if(b.weakImports)for(I=0;I<b.weakImports.length;++I)(v=a(b.weakImports[I])||r.resolvePath(m,b.weakImports[I]))&&c(v,!0)}}catch(A){o(A)}!s&&!d&&o(null,r)}function c(m,_){if(m=a(m)||m,!(r.files.indexOf(m)>-1)){if(r.files.push(m),m in Sp){s?l(m,Sp[m]):(++d,setTimeout(function(){--d,l(m,Sp[m])}));return}if(s){var b;try{b=ol.fs.readFileSync(m).toString("utf8")}catch(v){_||o(v);return}l(m,b)}else++d,r.fetch(m,function(v,I){if(--d,!!n){if(v){_?d||o(null,r):o(v);return}l(m,I)}})}}var d=0;ol.isString(t)&&(t=[t]);for(var u=0,h;u<t.length;++u)(h=r.resolvePath("",t[u]))&&c(h);return r.resolveAll(),s||d||o(null,r),r};Dr.prototype.loadSync=function(t,e){if(!ol.isNode)throw Error("not supported");return this.load(t,e,iB)};Dr.prototype.resolveAll=function(){if(this.deferred.length)throw Error("unresolvable extensions: "+this.deferred.map(function(t){return"'extend "+t.extend+"' in "+t.parent.fullName}).join(", "));return nv.prototype.resolveAll.call(this)};var iv=/^[A-Z]/;function J4(i,t){var e=t.parent.lookup(t.extend);if(e){var n=new hE(t.fullName,t.id,t.type,t.rule,void 0,t.options);return e.get(n.name)||(n.declaringField=t,t.extensionField=n,e.add(n)),!0}return!1}Dr.prototype._handleAdd=function(t){if(t instanceof hE)t.extend!==void 0&&!t.extensionField&&(J4(this,t)||this.deferred.push(t));else if(t instanceof eB)iv.test(t.name)&&(t.parent[t.name]=t.values);else if(!(t instanceof Qee)){if(t instanceof tB)for(var e=0;e<this.deferred.length;)J4(this,this.deferred[e])?this.deferred.splice(e,1):++e;for(var n=0;n<t.nestedArray.length;++n)this._handleAdd(t._nestedArray[n]);iv.test(t.name)&&(t.parent[t.name]=t)}};Dr.prototype._handleRemove=function(t){if(t instanceof hE){if(t.extend!==void 0)if(t.extensionField)t.extensionField.parent.remove(t.extensionField),t.extensionField=null;else{var e=this.deferred.indexOf(t);e>-1&&this.deferred.splice(e,1)}}else if(t instanceof eB)iv.test(t.name)&&delete t.parent[t.name];else if(t instanceof nv){for(var n=0;n<t.nestedArray.length;++n)this._handleRemove(t._nestedArray[n]);iv.test(t.name)&&delete t.parent[t.name]}};Dr._configure=function(i,t,e){tB=i,uE=t,Sp=e}});var dn=G((C2e,sB)=>{"use strict";var Li=sB.exports=so(),rB=qk(),mE,fE;Li.codegen=A4();Li.fetch=P4();Li.path=N4();Li.fs=Li.inquire("fs");Li.toArray=function(t){if(t){for(var e=Object.keys(t),n=new Array(e.length),r=0;r<e.length;)n[r]=t[e[r++]];return n}return[]};Li.toObject=function(t){for(var e={},n=0;n<t.length;){var r=t[n++],s=t[n++];s!==void 0&&(e[r]=s)}return e};var Xee=/\\/g,Zee=/"/g;Li.isReserved=function(t){return/^(?:do|if|in|for|let|new|try|var|case|else|enum|eval|false|null|this|true|void|with|break|catch|class|const|super|throw|while|yield|delete|export|import|public|return|static|switch|typeof|default|extends|finally|package|private|continue|debugger|function|arguments|interface|protected|implements|instanceof)$/.test(t)};Li.safeProp=function(t){return!/^[$\w_]+$/.test(t)||Li.isReserved(t)?'["'+t.replace(Xee,"\\\\").replace(Zee,'\\"')+'"]':"."+t};Li.ucFirst=function(t){return t.charAt(0).toUpperCase()+t.substring(1)};var Jee=/_([a-z])/g;Li.camelCase=function(t){return t.substring(0,1)+t.substring(1).replace(Jee,function(e,n){return n.toUpperCase()})};Li.compareFieldsById=function(t,e){return t.id-e.id};Li.decorateType=function(t,e){if(t.$type)return e&&t.$type.name!==e&&(Li.decorateRoot.remove(t.$type),t.$type.name=e,Li.decorateRoot.add(t.$type)),t.$type;mE||(mE=tv());var n=new mE(e||t.name);return Li.decorateRoot.add(n),n.ctor=t,Object.defineProperty(t,"$type",{value:n,enumerable:!1}),Object.defineProperty(t.prototype,"$type",{value:n,enumerable:!1}),n};var ete=0;Li.decorateEnum=function(t){if(t.$type)return t.$type;fE||(fE=As());var e=new fE("Enum"+ete++,t);return Li.decorateRoot.add(e),Object.defineProperty(t,"$type",{value:e,enumerable:!1}),e};Li.setProperty=function(t,e,n,r){function s(o,a,l){var c=a.shift();if(c==="__proto__"||c==="prototype")return o;if(a.length>0)o[c]=s(o[c]||{},a,l);else{var d=o[c];if(d&&r)return o;d&&(l=[].concat(d).concat(l)),o[c]=l}return o}if(typeof t!="object")throw TypeError("dst must be an object");if(!e)throw TypeError("path must be specified");return e=e.split("."),s(t,e,n)};Object.defineProperty(Li,"decorateRoot",{get:function(){return rB.decorated||(rB.decorated=new(rv()))}})});var Jc=G(oB=>{"use strict";var kp=oB,tte=dn(),ite=["double","float","int32","uint32","sint32","fixed32","sfixed32","int64","uint64","sint64","fixed64","sfixed64","bool","string","bytes"];function Ep(i,t){var e=0,n={};for(t|=0;e<i.length;)n[ite[e+t]]=i[e++];return n}kp.basic=Ep([1,5,0,0,0,5,5,0,0,0,1,1,0,2,2]);kp.defaults=Ep([0,0,0,0,0,0,0,0,0,0,0,0,!1,"",tte.emptyArray,null]);kp.long=Ep([0,0,0,1,1],7);kp.mapKey=Ep([0,0,0,5,5,0,0,0,1,1,0,2],2);kp.packed=Ep([1,5,0,0,0,5,5,0,0,0,1,1,0])});var rl=G((k2e,cB)=>{"use strict";cB.exports=un;var Ip=sl();((un.prototype=Object.create(Ip.prototype)).constructor=un).className="Field";var aB=As(),lB=Jc(),qi=dn(),Tp,nte=/^required|optional|repeated$/;un.fromJSON=function(t,e){var n=new un(t,e.id,e.type,e.rule,e.extend,e.options,e.comment);return e.edition&&(n._edition=e.edition),n._defaultEdition="proto3",n};function un(i,t,e,n,r,s,o){if(qi.isObject(n)?(o=r,s=n,n=r=void 0):qi.isObject(r)&&(o=s,s=r,r=void 0),Ip.call(this,i,s),!qi.isInteger(t)||t<0)throw TypeError("id must be a non-negative integer");if(!qi.isString(e))throw TypeError("type must be a string");if(n!==void 0&&!nte.test(n=n.toString().toLowerCase()))throw TypeError("rule must be a string rule");if(r!==void 0&&!qi.isString(r))throw TypeError("extend must be a string");n==="proto3_optional"&&(n="optional"),this.rule=n&&n!=="optional"?n:void 0,this.type=e,this.id=t,this.extend=r||void 0,this.repeated=n==="repeated",this.map=!1,this.message=null,this.partOf=null,this.typeDefault=null,this.defaultValue=null,this.long=qi.Long?lB.long[e]!==void 0:!1,this.bytes=e==="bytes",this.resolvedType=null,this.extensionField=null,this.declaringField=null,this.comment=o}Object.defineProperty(un.prototype,"required",{get:function(){return this._features.field_presence==="LEGACY_REQUIRED"}});Object.defineProperty(un.prototype,"optional",{get:function(){return!this.required}});Object.defineProperty(un.prototype,"delimited",{get:function(){return this.resolvedType instanceof Tp&&this._features.message_encoding==="DELIMITED"}});Object.defineProperty(un.prototype,"packed",{get:function(){return this._features.repeated_field_encoding==="PACKED"}});Object.defineProperty(un.prototype,"hasPresence",{get:function(){return this.repeated||this.map?!1:this.partOf||this.declaringField||this.extensionField||this._features.field_presence!=="IMPLICIT"}});un.prototype.setOption=function(t,e,n){return Ip.prototype.setOption.call(this,t,e,n)};un.prototype.toJSON=function(t){var e=t?!!t.keepComments:!1;return qi.toObject(["edition",this._editionToJSON(),"rule",this.rule!=="optional"&&this.rule||void 0,"type",this.type,"id",this.id,"extend",this.extend,"options",this.options,"comment",e?this.comment:void 0])};un.prototype.resolve=function(){if(this.resolved)return this;if((this.typeDefault=lB.defaults[this.type])===void 0?(this.resolvedType=(this.declaringField?this.declaringField.parent:this.parent).lookupTypeOrEnum(this.type),this.resolvedType instanceof Tp?this.typeDefault=null:this.typeDefault=this.resolvedType.values[Object.keys(this.resolvedType.values)[0]]):this.options&&this.options.proto3_optional&&(this.typeDefault=null),this.options&&this.options.default!=null&&(this.typeDefault=this.options.default,this.resolvedType instanceof aB&&typeof this.typeDefault=="string"&&(this.typeDefault=this.resolvedType.values[this.typeDefault])),this.options&&(this.options.packed!==void 0&&this.resolvedType&&!(this.resolvedType instanceof aB)&&delete this.options.packed,Object.keys(this.options).length||(this.options=void 0)),this.long)this.typeDefault=qi.Long.fromNumber(this.typeDefault,this.type.charAt(0)==="u"),Object.freeze&&Object.freeze(this.typeDefault);else if(this.bytes&&typeof this.typeDefault=="string"){var t;qi.base64.test(this.typeDefault)?qi.base64.decode(this.typeDefault,t=qi.newBuffer(qi.base64.length(this.typeDefault)),0):qi.utf8.write(this.typeDefault,t=qi.newBuffer(qi.utf8.length(this.typeDefault)),0),this.typeDefault=t}return this.map?this.defaultValue=qi.emptyObject:this.repeated?this.defaultValue=qi.emptyArray:this.defaultValue=this.typeDefault,this.parent instanceof Tp&&(this.parent.ctor.prototype[this.name]=this.defaultValue),Ip.prototype.resolve.call(this)};un.prototype._inferLegacyProtoFeatures=function(t){if(t!=="proto2"&&t!=="proto3")return{};var e={};return this.resolve(),this.rule==="required"&&(e.field_presence="LEGACY_REQUIRED"),this.resolvedType instanceof Tp&&this.resolvedType.group&&(e.message_encoding="DELIMITED"),this.getOption("packed")===!0?e.repeated_field_encoding="PACKED":this.getOption("packed")===!1&&(e.repeated_field_encoding="EXPANDED"),e};un.prototype._resolveFeatures=function(t){return Ip.prototype._resolveFeatures.call(this,this._edition||t)};un.d=function(t,e,n,r){return typeof e=="function"?e=qi.decorateType(e).name:e&&typeof e=="object"&&(e=qi.decorateEnum(e).name),function(o,a){qi.decorateType(o.constructor).add(new un(a,t,e,n,{default:r}))}};un._configure=function(t){Tp=t}});var Zc=G((E2e,hB)=>{"use strict";hB.exports=Mr;var ov=sl();((Mr.prototype=Object.create(ov.prototype)).constructor=Mr).className="OneOf";var dB=rl(),sv=dn();function Mr(i,t,e,n){if(Array.isArray(t)||(e=t,t=void 0),ov.call(this,i,e),!(t===void 0||Array.isArray(t)))throw TypeError("fieldNames must be an Array");this.oneof=t||[],this.fieldsArray=[],this.comment=n}Mr.fromJSON=function(t,e){return new Mr(t,e.oneof,e.options,e.comment)};Mr.prototype.toJSON=function(t){var e=t?!!t.keepComments:!1;return sv.toObject(["options",this.options,"oneof",this.oneof,"comment",e?this.comment:void 0])};function uB(i){if(i.parent)for(var t=0;t<i.fieldsArray.length;++t)i.fieldsArray[t].parent||i.parent.add(i.fieldsArray[t])}Mr.prototype.add=function(t){if(!(t instanceof dB))throw TypeError("field must be a Field");return t.parent&&t.parent!==this.parent&&t.parent.remove(t),this.oneof.push(t.name),this.fieldsArray.push(t),t.partOf=this,uB(this),this};Mr.prototype.remove=function(t){if(!(t instanceof dB))throw TypeError("field must be a Field");var e=this.fieldsArray.indexOf(t);if(e<0)throw Error(t+" is not a member of "+this);return this.fieldsArray.splice(e,1),e=this.oneof.indexOf(t.name),e>-1&&this.oneof.splice(e,1),t.partOf=null,this};Mr.prototype.onAdd=function(t){ov.prototype.onAdd.call(this,t);for(var e=this,n=0;n<this.oneof.length;++n){var r=t.get(this.oneof[n]);r&&!r.partOf&&(r.partOf=e,e.fieldsArray.push(r))}uB(this)};Mr.prototype.onRemove=function(t){for(var e=0,n;e<this.fieldsArray.length;++e)(n=this.fieldsArray[e]).parent&&n.parent.remove(n);ov.prototype.onRemove.call(this,t)};Object.defineProperty(Mr.prototype,"isProto3Optional",{get:function(){if(this.fieldsArray==null||this.fieldsArray.length!==1)return!1;var i=this.fieldsArray[0];return i.options!=null&&i.options.proto3_optional===!0}});Mr.d=function(){for(var t=new Array(arguments.length),e=0;e<arguments.length;)t[e]=arguments[e++];return function(r,s){sv.decorateType(r.constructor).add(new Mr(s,t)),Object.defineProperty(r,s,{get:sv.oneOfGetter(t),set:sv.oneOfSetter(t)})}}});var sl=G((T2e,mB)=>{"use strict";mB.exports=Cn;Cn.className="ReflectionObject";var rte=Zc(),Dp=dn(),av,ste={enum_type:"OPEN",field_presence:"EXPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"},ote={enum_type:"CLOSED",field_presence:"EXPLICIT",json_format:"LEGACY_BEST_EFFORT",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"EXPANDED",utf8_validation:"NONE"},ate={enum_type:"OPEN",field_presence:"IMPLICIT",json_format:"ALLOW",message_encoding:"LENGTH_PREFIXED",repeated_field_encoding:"PACKED",utf8_validation:"VERIFY"};function Cn(i,t){if(!Dp.isString(i))throw TypeError("name must be a string");if(t&&!Dp.isObject(t))throw TypeError("options must be an object");this.options=t,this.parsedOptions=null,this.name=i,this._edition=null,this._defaultEdition="proto2",this._features={},this.parent=null,this.resolved=!1,this.comment=null,this.filename=null}Object.defineProperties(Cn.prototype,{root:{get:function(){for(var i=this;i.parent!==null;)i=i.parent;return i}},fullName:{get:function(){for(var i=[this.name],t=this.parent;t;)i.unshift(t.name),t=t.parent;return i.join(".")}}});Cn.prototype.toJSON=function(){throw Error()};Cn.prototype.onAdd=function(t){this.parent&&this.parent!==t&&this.parent.remove(this),this.parent=t,this.resolved=!1;var e=t.root;e instanceof av&&e._handleAdd(this)};Cn.prototype.onRemove=function(t){var e=t.root;e instanceof av&&e._handleRemove(this),this.parent=null,this.resolved=!1};Cn.prototype.resolve=function(){return this.resolved?this:(this instanceof av&&(this._resolveFeaturesRecursive(this._edition),this.resolved=!0),this)};Cn.prototype._resolveFeaturesRecursive=function(t){return this._resolveFeatures(this._edition||t)};Cn.prototype._resolveFeatures=function(t){var e={};if(!t)throw new Error("Unknown edition for "+this.fullName);var n=Object.assign(this.options?Object.assign({},this.options.features):{},this._inferLegacyProtoFeatures(t));if(this._edition){if(t==="proto2")e=Object.assign({},ote);else if(t==="proto3")e=Object.assign({},ate);else if(t==="2023")e=Object.assign({},ste);else throw new Error("Unknown edition: "+t);this._features=Object.assign(e,n||{});return}if(this.partOf instanceof rte){var r=Object.assign({},this.partOf._features);this._features=Object.assign(r,n||{})}else if(!this.declaringField)if(this.parent){var s=Object.assign({},this.parent._features);this._features=Object.assign(s,n||{})}else throw new Error("Unable to find a parent for "+this.fullName);this.extensionField&&(this.extensionField._features=this._features)};Cn.prototype._inferLegacyProtoFeatures=function(){return{}};Cn.prototype.getOption=function(t){if(this.options)return this.options[t]};Cn.prototype.setOption=function(t,e,n){return this.options||(this.options={}),/^features\./.test(t)?Dp.setProperty(this.options,t,e,n):(!n||this.options[t]===void 0)&&(this.getOption(t)!==e&&(this.resolved=!1),this.options[t]=e),this};Cn.prototype.setParsedOption=function(t,e,n){this.parsedOptions||(this.parsedOptions=[]);var r=this.parsedOptions;if(n){var s=r.find(function(l){return Object.prototype.hasOwnProperty.call(l,t)});if(s){var o=s[t];Dp.setProperty(o,n,e)}else s={},s[t]=Dp.setProperty({},n,e),r.push(s)}else{var a={};a[t]=e,r.push(a)}return this};Cn.prototype.setOptions=function(t,e){if(t)for(var n=Object.keys(t),r=0;r<n.length;++r)this.setOption(n[r],t[n[r]],e);return this};Cn.prototype.toString=function(){var t=this.constructor.className,e=this.fullName;return e.length?t+" "+e:t};Cn.prototype._editionToJSON=function(){if(!(!this._edition||this._edition==="proto3"))return this._edition};Cn._configure=function(i){av=i}});var As=G((I2e,pB)=>{"use strict";pB.exports=Os;var pE=sl();((Os.prototype=Object.create(pE.prototype)).constructor=Os).className="Enum";var fB=Zu(),lv=dn();function Os(i,t,e,n,r,s){if(pE.call(this,i,e),t&&typeof t!="object")throw TypeError("values must be an object");if(this.valuesById={},this.values=Object.create(this.valuesById),this.comment=n,this.comments=r||{},this.valuesOptions=s,this._valuesFeatures={},this.reserved=void 0,t)for(var o=Object.keys(t),a=0;a<o.length;++a)typeof t[o[a]]=="number"&&(this.valuesById[this.values[o[a]]=t[o[a]]]=o[a])}Os.prototype._resolveFeatures=function(t){return t=this._edition||t,pE.prototype._resolveFeatures.call(this,t),Object.keys(this.values).forEach(e=>{var n=Object.assign({},this._features);this._valuesFeatures[e]=Object.assign(n,this.valuesOptions&&this.valuesOptions[e]&&this.valuesOptions[e].features)}),this};Os.fromJSON=function(t,e){var n=new Os(t,e.values,e.options,e.comment,e.comments);return n.reserved=e.reserved,e.edition&&(n._edition=e.edition),n._defaultEdition="proto3",n};Os.prototype.toJSON=function(t){var e=t?!!t.keepComments:!1;return lv.toObject(["edition",this._editionToJSON(),"options",this.options,"valuesOptions",this.valuesOptions,"values",this.values,"reserved",this.reserved&&this.reserved.length?this.reserved:void 0,"comment",e?this.comment:void 0,"comments",e?this.comments:void 0])};Os.prototype.add=function(t,e,n,r){if(!lv.isString(t))throw TypeError("name must be a string");if(!lv.isInteger(e))throw TypeError("id must be an integer");if(this.values[t]!==void 0)throw Error("duplicate name '"+t+"' in "+this);if(this.isReservedId(e))throw Error("id "+e+" is reserved in "+this);if(this.isReservedName(t))throw Error("name '"+t+"' is reserved in "+this);if(this.valuesById[e]!==void 0){if(!(this.options&&this.options.allow_alias))throw Error("duplicate id "+e+" in "+this);this.values[t]=e}else this.valuesById[this.values[t]=e]=t;return r&&(this.valuesOptions===void 0&&(this.valuesOptions={}),this.valuesOptions[t]=r||null),this.comments[t]=n||null,this};Os.prototype.remove=function(t){if(!lv.isString(t))throw TypeError("name must be a string");var e=this.values[t];if(e==null)throw Error("name '"+t+"' does not exist in "+this);return delete this.valuesById[e],delete this.values[t],delete this.comments[t],this.valuesOptions&&delete this.valuesOptions[t],this};Os.prototype.isReservedId=function(t){return fB.isReservedId(this.reserved,t)};Os.prototype.isReservedName=function(t){return fB.isReservedName(this.reserved,t)}});var dE=G((D2e,_B)=>{"use strict";_B.exports=cte;var lte=As(),gE=Jc(),_E=dn();function gB(i,t,e,n){return t.delimited?i("types[%i].encode(%s,w.uint32(%i)).uint32(%i)",e,n,(t.id<<3|3)>>>0,(t.id<<3|4)>>>0):i("types[%i].encode(%s,w.uint32(%i).fork()).ldelim()",e,n,(t.id<<3|2)>>>0)}function cte(i){for(var t=_E.codegen(["m","w"],i.name+"$encode")("if(!w)")("w=Writer.create()"),e,n,r=i.fieldsArray.slice().sort(_E.compareFieldsById),e=0;e<r.length;++e){var s=r[e].resolve(),o=i._fieldsArray.indexOf(s),a=s.resolvedType instanceof lte?"int32":s.type,l=gE.basic[a];n="m"+_E.safeProp(s.name),s.map?(t("if(%s!=null&&Object.hasOwnProperty.call(m,%j)){",n,s.name)("for(var ks=Object.keys(%s),i=0;i<ks.length;++i){",n)("w.uint32(%i).fork().uint32(%i).%s(ks[i])",(s.id<<3|2)>>>0,8|gE.mapKey[s.keyType],s.keyType),l===void 0?t("types[%i].encode(%s[ks[i]],w.uint32(18).fork()).ldelim().ldelim()",o,n):t(".uint32(%i).%s(%s[ks[i]]).ldelim()",16|l,a,n),t("}")("}")):s.repeated?(t("if(%s!=null&&%s.length){",n,n),s.packed&&gE.packed[a]!==void 0?t("w.uint32(%i).fork()",(s.id<<3|2)>>>0)("for(var i=0;i<%s.length;++i)",n)("w.%s(%s[i])",a,n)("w.ldelim()"):(t("for(var i=0;i<%s.length;++i)",n),l===void 0?gB(t,s,o,n+"[i]"):t("w.uint32(%i).%s(%s[i])",(s.id<<3|l)>>>0,a,n)),t("}")):(s.optional&&t("if(%s!=null&&Object.hasOwnProperty.call(m,%j))",n,s.name),l===void 0?gB(t,s,o,n):t("w.uint32(%i).%s(%s)",(s.id<<3|l)>>>0,a,n))}return t("return w")}});var vB=G((M2e,bB)=>{"use strict";var yt=bB.exports=D4();yt.build="light";function dte(i,t,e){return typeof t=="function"?(e=t,t=new yt.Root):t||(t=new yt.Root),t.load(i,e)}yt.load=dte;function ute(i,t){return t||(t=new yt.Root),t.loadSync(i)}yt.loadSync=ute;yt.encoder=dE();yt.decoder=Jk();yt.verifier=iE();yt.converter=sE();yt.ReflectionObject=sl();yt.Namespace=Zu();yt.Root=rv();yt.Enum=As();yt.Type=tv();yt.Field=rl();yt.OneOf=Zc();yt.MapField=Y0();yt.Service=X0();yt.Method=Q0();yt.Message=Z0();yt.wrappers=oE();yt.types=Jc();yt.util=dn();yt.ReflectionObject._configure(yt.Root);yt.Namespace._configure(yt.Type,yt.Service,yt.Enum);yt.Root._configure(yt.Type);yt.Field._configure(yt.Type)});var vE=G((A2e,wB)=>{"use strict";wB.exports=xB;var bE=/[\s{}=;:[\],'"()<>]/g,hte=/(?:"([^"\\]*(?:\\.[^"\\]*)*)")/g,mte=/(?:'([^'\\]*(?:\\.[^'\\]*)*)')/g,fte=/^ *[*/]+ */,pte=/^\s*\*?\/*/,gte=/\n/g,_te=/\s/,bte=/\\(.?)/g,vte={0:"\0",r:"\r",n:`
`,t:"	"};function yB(i){return i.replace(bte,function(t,e){switch(e){case"\\":case"":return e;default:return vte[e]||""}})}xB.unescape=yB;function xB(i,t){i=i.toString();var e=0,n=i.length,r=1,s=0,o={},a=[],l=null;function c(M){return Error("illegal "+M+" (line "+r+")")}function d(){var M=l==="'"?mte:hte;M.lastIndex=e-1;var L=M.exec(i);if(!L)throw c("string");return e=M.lastIndex,v(l),l=null,yB(L[1])}function u(M){return i.charAt(M)}function h(M,L,U){var T={type:i.charAt(M++),lineEmpty:!1,leading:U},C;t?C=2:C=3;var E=M-C,D;do if(--E<0||(D=i.charAt(E))===`
`){T.lineEmpty=!0;break}while(D===" "||D==="	");for(var S=i.substring(M,L).split(gte),R=0;R<S.length;++R)S[R]=S[R].replace(t?pte:fte,"").trim();T.text=S.join(`
`).trim(),o[r]=T,s=r}function m(M){var L=_(M),U=i.substring(M,L),T=/^\s*\/\//.test(U);return T}function _(M){for(var L=M;L<n&&u(L)!==`
`;)L++;return L}function b(){if(a.length>0)return a.shift();if(l)return d();var M,L,U,T,C,E=e===0;do{if(e===n)return null;for(M=!1;_te.test(U=u(e));)if(U===`
`&&(E=!0,++r),++e===n)return null;if(u(e)==="/"){if(++e===n)throw c("comment");if(u(e)==="/")if(t){if(T=e,C=!1,m(e-1)){C=!0;do if(e=_(e),e===n||(e++,!E))break;while(m(e))}else e=Math.min(n,_(e)+1);C&&(h(T,e,E),E=!0),r++,M=!0}else{for(C=u(T=e+1)==="/";u(++e)!==`
`;)if(e===n)return null;++e,C&&(h(T,e-1,E),E=!0),++r,M=!0}else if((U=u(e))==="*"){T=e+1,C=t||u(T)==="*";do{if(U===`
`&&++r,++e===n)throw c("comment");L=U,U=u(e)}while(L!=="*"||U!=="/");++e,C&&(h(T,e-2,E),E=!0),M=!0}else return"/"}}while(M);var D=e;bE.lastIndex=0;var S=bE.test(u(D++));if(!S)for(;D<n&&!bE.test(u(D));)++D;var R=i.substring(e,e=D);return(R==='"'||R==="'")&&(l=R),R}function v(M){a.push(M)}function I(){if(!a.length){var M=b();if(M===null)return null;v(M)}return a[0]}function A(M,L){var U=I(),T=U===M;if(T)return b(),!0;if(!L)throw c("token '"+U+"', '"+M+"' expected");return!1}function F(M){var L=null,U;return M===void 0?(U=o[r-1],delete o[r-1],U&&(t||U.type==="*"||U.lineEmpty)&&(L=U.leading?U.text:null)):(s<M&&I(),U=o[M],delete o[M],U&&!U.lineEmpty&&(t||U.type==="/")&&(L=U.leading?null:U.text)),L}return Object.defineProperty({next:b,peek:I,push:v,skip:A,cmnt:F},"line",{get:function(){return r}})}});var IB=G((O2e,TB)=>{"use strict";TB.exports=ra;ra.filename=null;ra.defaults={keepCase:!1};var yte=vE(),CB=rv(),SB=tv(),kB=rl(),xte=Y0(),EB=Zc(),wte=As(),Cte=X0(),Ste=Q0(),kte=sl(),Ete=Jc(),yE=dn(),Tte=/^[1-9][0-9]*$/,Ite=/^-?[1-9][0-9]*$/,Dte=/^0[x][0-9a-fA-F]+$/,Mte=/^-?0[x][0-9a-fA-F]+$/,Ate=/^0[0-7]+$/,Ote=/^-?0[0-7]+$/,Pte=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/,co=/^[a-zA-Z_][a-zA-Z_0-9]*$/,uo=/^(?:\.?[a-zA-Z_][a-zA-Z_0-9]*)(?:\.[a-zA-Z_][a-zA-Z_0-9]*)*$/;function ra(i,t,e){t instanceof CB||(e=t,t=new CB),e||(e=ra.defaults);var n=e.preferTrailingComment||!1,r=yte(i,e.alternateCommentMode||!1),s=r.next,o=r.push,a=r.peek,l=r.skip,c=r.cmnt,d=!0,u,h,m,_="proto2",b=t,v=[],I={},A=e.keepCase?function(ee){return ee}:yE.camelCase;function F(){v.forEach(ee=>{ee._edition=_,Object.keys(I).forEach(Z=>{ee.getOption(Z)===void 0&&ee.setOption(Z,I[Z],!0)})})}function M(ee,Z,se){var De=ra.filename;return se||(ra.filename=null),Error("illegal "+(Z||"token")+" '"+ee+"' ("+(De?De+", ":"")+"line "+r.line+")")}function L(){var ee=[],Z;do{if((Z=s())!=='"'&&Z!=="'")throw M(Z);ee.push(s()),l(Z),Z=a()}while(Z==='"'||Z==="'");return ee.join("")}function U(ee){var Z=s();switch(Z){case"'":case'"':return o(Z),L();case"true":case"TRUE":return!0;case"false":case"FALSE":return!1}try{return C(Z,!0)}catch{if(ee&&uo.test(Z))return Z;throw M(Z,"value")}}function T(ee,Z){var se,De;do if(Z&&((se=a())==='"'||se==="'")){var Ie=L();if(ee.push(Ie),_>=2023)throw M(Ie,"id")}else try{ee.push([De=E(s()),l("to",!0)?E(s()):De])}catch(ai){if(Z&&uo.test(se)&&_>=2023)ee.push(se);else throw ai}while(l(",",!0));var tt={options:void 0};tt.setOption=function(ai,Dn){this.options===void 0&&(this.options={}),this.options[ai]=Dn},X(tt,function(Dn){if(Dn==="option")at(tt,Dn),l(";");else throw M(Dn)},function(){Qo(tt)})}function C(ee,Z){var se=1;switch(ee.charAt(0)==="-"&&(se=-1,ee=ee.substring(1)),ee){case"inf":case"INF":case"Inf":return se*(1/0);case"nan":case"NAN":case"Nan":case"NaN":return NaN;case"0":return 0}if(Tte.test(ee))return se*parseInt(ee,10);if(Dte.test(ee))return se*parseInt(ee,16);if(Ate.test(ee))return se*parseInt(ee,8);if(Pte.test(ee))return se*parseFloat(ee);throw M(ee,"number",Z)}function E(ee,Z){switch(ee){case"max":case"MAX":case"Max":return 536870911;case"0":return 0}if(!Z&&ee.charAt(0)==="-")throw M(ee,"id");if(Ite.test(ee))return parseInt(ee,10);if(Mte.test(ee))return parseInt(ee,16);if(Ote.test(ee))return parseInt(ee,8);throw M(ee,"id")}function D(){if(u!==void 0)throw M("package");if(u=s(),!uo.test(u))throw M(u,"name");b=b.define(u),l(";")}function S(){var ee=a(),Z;switch(ee){case"weak":Z=m||(m=[]),s();break;case"public":s();default:Z=h||(h=[]);break}ee=L(),l(";"),Z.push(ee)}function R(){if(l("="),_=L(),_<2023)throw M(_,"syntax");l(";")}function w(){if(l("="),_=L(),!["2023"].includes(_))throw M(_,"edition");l(";")}function k(ee,Z){switch(Z){case"option":return at(ee,Z),l(";"),!0;case"message":return Oe(ee,Z),!0;case"enum":return Ui(ee,Z),!0;case"service":return UQ(ee,Z),!0;case"extend":return qQ(ee,Z),!0}return!1}function X(ee,Z,se){var De=r.line;if(ee&&(typeof ee.comment!="string"&&(ee.comment=c()),ee.filename=ra.filename),l("{",!0)){for(var Ie;(Ie=s())!=="}";)Z(Ie);l(";",!0)}else se&&se(),l(";"),ee&&(typeof ee.comment!="string"||n)&&(ee.comment=c(De)||ee.comment)}function Oe(ee,Z){if(!co.test(Z=s()))throw M(Z,"type name");var se=new SB(Z);X(se,function(Ie){if(!k(se,Ie))switch(Ie){case"map":ot(se,Ie);break;case"required":if(_!=="proto2")throw M(Ie);case"repeated":Pe(se,Ie);break;case"optional":if(_==="proto3")Pe(se,"proto3_optional");else{if(_!=="proto2")throw M(Ie);Pe(se,"optional")}break;case"oneof":fi(se,Ie);break;case"extensions":T(se.extensions||(se.extensions=[]));break;case"reserved":T(se.reserved||(se.reserved=[]),!0);break;default:if(_==="proto2"||!uo.test(Ie))throw M(Ie);o(Ie),Pe(se,"optional");break}}),ee.add(se),ee===b&&v.push(se)}function Pe(ee,Z,se){var De=s();if(De==="group"){it(ee,Z);return}for(;De.endsWith(".")||a().startsWith(".");)De+=s();if(!uo.test(De))throw M(De,"type");var Ie=s();if(!co.test(Ie))throw M(Ie,"name");Ie=A(Ie),l("=");var tt=new kB(Ie,E(s()),De,Z,se);if(X(tt,function(jn){if(jn==="option")at(tt,jn),l(";");else throw M(jn)},function(){Qo(tt)}),Z==="proto3_optional"){var ai=new EB("_"+Ie);tt.setOption("proto3_optional",!0),ai.add(tt),ee.add(ai)}else ee.add(tt);ee===b&&v.push(tt)}function it(ee,Z){if(_>=2023)throw M("group");var se=s();if(!co.test(se))throw M(se,"name");var De=yE.lcFirst(se);se===De&&(se=yE.ucFirst(se)),l("=");var Ie=E(s()),tt=new SB(se);tt.group=!0;var ai=new kB(De,Ie,se,Z);ai.filename=ra.filename,X(tt,function(jn){switch(jn){case"option":at(tt,jn),l(";");break;case"required":case"repeated":Pe(tt,jn);break;case"optional":_==="proto3"?Pe(tt,"proto3_optional"):Pe(tt,"optional");break;case"message":Oe(tt,jn);break;case"enum":Ui(tt,jn);break;default:throw M(jn)}}),ee.add(tt).add(ai)}function ot(ee){l("<");var Z=s();if(Ete.mapKey[Z]===void 0)throw M(Z,"type");l(",");var se=s();if(!uo.test(se))throw M(se,"type");l(">");var De=s();if(!co.test(De))throw M(De,"name");l("=");var Ie=new xte(A(De),E(s()),Z,se);X(Ie,function(ai){if(ai==="option")at(Ie,ai),l(";");else throw M(ai)},function(){Qo(Ie)}),ee.add(Ie)}function fi(ee,Z){if(!co.test(Z=s()))throw M(Z,"name");var se=new EB(A(Z));X(se,function(Ie){Ie==="option"?(at(se,Ie),l(";")):(o(Ie),Pe(se,"optional"))}),ee.add(se)}function Ui(ee,Z){if(!co.test(Z=s()))throw M(Z,"name");var se=new wte(Z);X(se,function(Ie){switch(Ie){case"option":at(se,Ie),l(";");break;case"reserved":T(se.reserved||(se.reserved=[]),!0),se.reserved===void 0&&(se.reserved=[]);break;default:ni(se,Ie)}}),ee.add(se),ee===b&&v.push(se)}function ni(ee,Z){if(!co.test(Z))throw M(Z,"name");l("=");var se=E(s(),!0),De={options:void 0};De.getOption=function(Ie){return this.options[Ie]},De.setOption=function(Ie,tt){kte.prototype.setOption.call(De,Ie,tt)},De.setParsedOption=function(){},X(De,function(tt){if(tt==="option")at(De,tt),l(";");else throw M(tt)},function(){Qo(De)}),ee.add(Z,se,De.comment,De.parsedOptions||De.options)}function at(ee,Z){var se,De,Ie=!0;for(Z==="option"&&(Z=s());Z!=="=";){if(Z==="("){var tt=s();l(")"),Z="("+tt+")"}if(Ie){if(Ie=!1,Z.includes(".")&&!Z.includes("(")){var ai=Z.split(".");se=ai[0]+".",Z=ai[1];continue}se=Z}else De=De?De+=Z:Z;Z=s()}var Dn=De?se.concat(De):se,jn=pi(ee,Dn);De=De&&De[0]==="."?De.slice(1):De,se=se&&se[se.length-1]==="."?se.slice(0,-1):se,gi(ee,se,jn,De)}function pi(ee,Z){if(l("{",!0)){for(var se={};!l("}",!0);){if(!co.test(bn=s()))throw M(bn,"name");if(bn===null)throw M(bn,"end of input");var De,Ie=bn;if(l(":",!0),a()==="{")De=pi(ee,Z+"."+bn);else if(a()==="["){De=[];var tt;if(l("[",!0)){do tt=U(!0),De.push(tt);while(l(",",!0));l("]"),typeof tt<"u"&&jt(ee,Z+"."+bn,tt)}}else De=U(!0),jt(ee,Z+"."+bn,De);var ai=se[Ie];ai&&(De=[].concat(ai).concat(De)),se[Ie]=De,l(",",!0),l(";",!0)}return se}var Dn=U(!0);return jt(ee,Z,Dn),Dn}function jt(ee,Z,se){if(b===ee&&/^features\./.test(Z)){I[Z]=se;return}ee.setOption&&ee.setOption(Z,se)}function gi(ee,Z,se,De){ee.setParsedOption&&ee.setParsedOption(Z,se,De)}function Qo(ee){if(l("[",!0)){do at(ee,"option");while(l(",",!0));l("]")}return ee}function UQ(ee,Z){if(!co.test(Z=s()))throw M(Z,"service name");var se=new Cte(Z);X(se,function(Ie){if(!k(se,Ie))if(Ie==="rpc")HQ(se,Ie);else throw M(Ie)}),ee.add(se),ee===b&&v.push(se)}function HQ(ee,Z){var se=c(),De=Z;if(!co.test(Z=s()))throw M(Z,"name");var Ie=Z,tt,ai,Dn,jn;if(l("("),l("stream",!0)&&(ai=!0),!uo.test(Z=s())||(tt=Z,l(")"),l("returns"),l("("),l("stream",!0)&&(jn=!0),!uo.test(Z=s())))throw M(Z);Dn=Z,l(")");var jb=new Ste(Ie,De,tt,Dn,ai,jn);jb.comment=se,X(jb,function(iS){if(iS==="option")at(jb,iS),l(";");else throw M(iS)}),ee.add(jb)}function qQ(ee,Z){if(!uo.test(Z=s()))throw M(Z,"reference");var se=Z;X(null,function(Ie){switch(Ie){case"required":case"repeated":Pe(ee,Ie,se);break;case"optional":_==="proto3"?Pe(ee,"proto3_optional",se):Pe(ee,"optional",se);break;default:if(_==="proto2"||!uo.test(Ie))throw M(Ie);o(Ie),Pe(ee,"optional",se);break}})}for(var bn;(bn=s())!==null;)switch(bn){case"package":if(!d)throw M(bn);D();break;case"import":if(!d)throw M(bn);S();break;case"syntax":if(!d)throw M(bn);R();break;case"edition":if(!d)throw M(bn);w();break;case"option":at(b,bn),l(";",!0);break;default:if(k(b,bn)){d=!1;continue}throw M(bn)}return F(),ra.filename=null,{package:u,imports:h,weakImports:m,root:t}}});var AB=G((P2e,MB)=>{"use strict";MB.exports=Ps;var Rte=/\/|\./;function Ps(i,t){Rte.test(i)||(i="google/protobuf/"+i+".proto",t={nested:{google:{nested:{protobuf:{nested:t}}}}}),Ps[i]=t}Ps("any",{Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}}});var DB;Ps("duration",{Duration:DB={fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}}});Ps("timestamp",{Timestamp:DB});Ps("empty",{Empty:{fields:{}}});Ps("struct",{Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}}});Ps("wrappers",{DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}}});Ps("field_mask",{FieldMask:{fields:{paths:{rule:"repeated",type:"string",id:1}}}});Ps.get=function(t){return Ps[t]||null}});var PB=G((R2e,OB)=>{"use strict";var al=OB.exports=vB();al.build="full";al.tokenize=vE();al.parse=IB();al.common=AB();al.Root._configure(al.Type,al.parse,al.common)});var cv=G((F2e,RB)=>{"use strict";RB.exports=PB()});var xE=G((N2e,Fte)=>{Fte.exports={nested:{google:{nested:{protobuf:{nested:{FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}}}}}}}}});var VB=G((lt,BB)=>{"use strict";var Wn=cv();BB.exports=lt=Wn.descriptor=Wn.Root.fromJSON(xE()).lookup(".google.protobuf");var FB=Wn.Namespace,Mp=Wn.Root,sa=Wn.Enum,ll=Wn.Type,cl=Wn.Field,Nte=Wn.MapField,dv=Wn.OneOf,Ap=Wn.Service,uv=Wn.Method;Mp.fromDescriptor=function(t){typeof t.length=="number"&&(t=lt.FileDescriptorSet.decode(t));var e=new Mp;if(t.file)for(var n,r,s=0,o;s<t.file.length;++s){if(r=e,(n=t.file[s]).package&&n.package.length&&(r=e.define(n.package)),n.name&&n.name.length&&e.files.push(r.filename=n.name),n.messageType)for(o=0;o<n.messageType.length;++o)r.add(ll.fromDescriptor(n.messageType[o],n.syntax));if(n.enumType)for(o=0;o<n.enumType.length;++o)r.add(sa.fromDescriptor(n.enumType[o]));if(n.extension)for(o=0;o<n.extension.length;++o)r.add(cl.fromDescriptor(n.extension[o]));if(n.service)for(o=0;o<n.service.length;++o)r.add(Ap.fromDescriptor(n.service[o]));var a=eh(n.options,lt.FileOptions);if(a){var l=Object.keys(a);for(o=0;o<l.length;++o)r.setOption(l[o],a[l[o]])}}return e};Mp.prototype.toDescriptor=function(t){var e=lt.FileDescriptorSet.create();return NB(this,e.file,t),e};function NB(i,t,e){var n=lt.FileDescriptorProto.create({name:i.filename||(i.fullName.substring(1).replace(/\./g,"_")||"root")+".proto"});e&&(n.syntax=e),i instanceof Mp||(n.package=i.fullName.substring(1));for(var r=0,s;r<i.nestedArray.length;++r)(s=i._nestedArray[r])instanceof ll?n.messageType.push(s.toDescriptor(e)):s instanceof sa?n.enumType.push(s.toDescriptor()):s instanceof cl?n.extension.push(s.toDescriptor(e)):s instanceof Ap?n.service.push(s.toDescriptor()):s instanceof FB&&NB(s,t,e);n.options=th(i.options,lt.FileOptions),n.messageType.length+n.enumType.length+n.extension.length+n.service.length&&t.push(n)}var Lte=0;ll.fromDescriptor=function(t,e){typeof t.length=="number"&&(t=lt.DescriptorProto.decode(t));var n=new ll(t.name.length?t.name:"Type"+Lte++,eh(t.options,lt.MessageOptions)),r;if(t.oneofDecl)for(r=0;r<t.oneofDecl.length;++r)n.add(dv.fromDescriptor(t.oneofDecl[r]));if(t.field)for(r=0;r<t.field.length;++r){var s=cl.fromDescriptor(t.field[r],e);n.add(s),t.field[r].hasOwnProperty("oneofIndex")&&n.oneofsArray[t.field[r].oneofIndex].add(s)}if(t.extension)for(r=0;r<t.extension.length;++r)n.add(cl.fromDescriptor(t.extension[r],e));if(t.nestedType)for(r=0;r<t.nestedType.length;++r)n.add(ll.fromDescriptor(t.nestedType[r],e)),t.nestedType[r].options&&t.nestedType[r].options.mapEntry&&n.setOption("map_entry",!0);if(t.enumType)for(r=0;r<t.enumType.length;++r)n.add(sa.fromDescriptor(t.enumType[r]));if(t.extensionRange&&t.extensionRange.length)for(n.extensions=[],r=0;r<t.extensionRange.length;++r)n.extensions.push([t.extensionRange[r].start,t.extensionRange[r].end]);if(t.reservedRange&&t.reservedRange.length||t.reservedName&&t.reservedName.length){if(n.reserved=[],t.reservedRange)for(r=0;r<t.reservedRange.length;++r)n.reserved.push([t.reservedRange[r].start,t.reservedRange[r].end]);if(t.reservedName)for(r=0;r<t.reservedName.length;++r)n.reserved.push(t.reservedName[r])}return n};ll.prototype.toDescriptor=function(t){var e=lt.DescriptorProto.create({name:this.name}),n;for(n=0;n<this.fieldsArray.length;++n){var r;if(e.field.push(r=this._fieldsArray[n].toDescriptor(t)),this._fieldsArray[n]instanceof Nte){var s=wE(this._fieldsArray[n].keyType,this._fieldsArray[n].resolvedKeyType),o=wE(this._fieldsArray[n].type,this._fieldsArray[n].resolvedType),a=o===11||o===14?this._fieldsArray[n].resolvedType&&LB(this.parent,this._fieldsArray[n].resolvedType)||this._fieldsArray[n].type:void 0;e.nestedType.push(lt.DescriptorProto.create({name:r.typeName,field:[lt.FieldDescriptorProto.create({name:"key",number:1,label:1,type:s}),lt.FieldDescriptorProto.create({name:"value",number:2,label:1,type:o,typeName:a})],options:lt.MessageOptions.create({mapEntry:!0})}))}}for(n=0;n<this.oneofsArray.length;++n)e.oneofDecl.push(this._oneofsArray[n].toDescriptor());for(n=0;n<this.nestedArray.length;++n)this._nestedArray[n]instanceof cl?e.field.push(this._nestedArray[n].toDescriptor(t)):this._nestedArray[n]instanceof ll?e.nestedType.push(this._nestedArray[n].toDescriptor(t)):this._nestedArray[n]instanceof sa&&e.enumType.push(this._nestedArray[n].toDescriptor());if(this.extensions)for(n=0;n<this.extensions.length;++n)e.extensionRange.push(lt.DescriptorProto.ExtensionRange.create({start:this.extensions[n][0],end:this.extensions[n][1]}));if(this.reserved)for(n=0;n<this.reserved.length;++n)typeof this.reserved[n]=="string"?e.reservedName.push(this.reserved[n]):e.reservedRange.push(lt.DescriptorProto.ReservedRange.create({start:this.reserved[n][0],end:this.reserved[n][1]}));return e.options=th(this.options,lt.MessageOptions),e};var Bte=/^(?![eE])[0-9]*(?:\.[0-9]*)?(?:[eE][+-]?[0-9]+)?$/;cl.fromDescriptor=function(t,e){if(typeof t.length=="number"&&(t=lt.DescriptorProto.decode(t)),typeof t.number!="number")throw Error("missing field id");var n;t.typeName&&t.typeName.length?n=t.typeName:n=Hte(t.type);var r;switch(t.label){case 1:r=void 0;break;case 2:r="required";break;case 3:r="repeated";break;default:throw Error("illegal label: "+t.label)}var s=t.extendee;t.extendee!==void 0&&(s=s.length?s:void 0);var o=new cl(t.name.length?t.name:"field"+t.number,t.number,n,r,s);if(o.options=eh(t.options,lt.FieldOptions),t.defaultValue&&t.defaultValue.length){var a=t.defaultValue;switch(a){case"true":case"TRUE":a=!0;break;case"false":case"FALSE":a=!1;break;default:var l=Bte.exec(a);l&&(a=parseInt(a));break}o.setOption("default",a)}return qte(t.type)&&(e==="proto3"?t.options&&!t.options.packed&&o.setOption("packed",!1):t.options&&t.options.packed||o.setOption("packed",!1)),o};cl.prototype.toDescriptor=function(t){var e=lt.FieldDescriptorProto.create({name:this.name,number:this.id});if(this.map)e.type=11,e.typeName=Wn.util.ucFirst(this.name),e.label=3;else{switch(e.type=wE(this.type,this.resolve().resolvedType)){case 10:case 11:case 14:e.typeName=this.resolvedType?LB(this.parent,this.resolvedType):this.type;break}switch(this.rule){case"repeated":e.label=3;break;case"required":e.label=2;break;default:e.label=1;break}}if(e.extendee=this.extensionField?this.extensionField.parent.fullName:this.extend,this.partOf&&(e.oneofIndex=this.parent.oneofsArray.indexOf(this.partOf))<0)throw Error("missing oneof");return this.options&&(e.options=th(this.options,lt.FieldOptions),this.options.default!=null&&(e.defaultValue=String(this.options.default))),t==="proto3"?this.packed||((e.options||(e.options=lt.FieldOptions.create())).packed=!1):this.packed&&((e.options||(e.options=lt.FieldOptions.create())).packed=!0),e};var Vte=0;sa.fromDescriptor=function(t){typeof t.length=="number"&&(t=lt.EnumDescriptorProto.decode(t));var e={};if(t.value)for(var n=0;n<t.value.length;++n){var r=t.value[n].name,s=t.value[n].number||0;e[r&&r.length?r:"NAME"+s]=s}return new sa(t.name&&t.name.length?t.name:"Enum"+Vte++,e,eh(t.options,lt.EnumOptions))};sa.prototype.toDescriptor=function(){for(var t=[],e=0,n=Object.keys(this.values);e<n.length;++e)t.push(lt.EnumValueDescriptorProto.create({name:n[e],number:this.values[n[e]]}));return lt.EnumDescriptorProto.create({name:this.name,value:t,options:th(this.options,lt.EnumOptions)})};var zte=0;dv.fromDescriptor=function(t){return typeof t.length=="number"&&(t=lt.OneofDescriptorProto.decode(t)),new dv(t.name&&t.name.length?t.name:"oneof"+zte++)};dv.prototype.toDescriptor=function(){return lt.OneofDescriptorProto.create({name:this.name})};var jte=0;Ap.fromDescriptor=function(t){typeof t.length=="number"&&(t=lt.ServiceDescriptorProto.decode(t));var e=new Ap(t.name&&t.name.length?t.name:"Service"+jte++,eh(t.options,lt.ServiceOptions));if(t.method)for(var n=0;n<t.method.length;++n)e.add(uv.fromDescriptor(t.method[n]));return e};Ap.prototype.toDescriptor=function(){for(var t=[],e=0;e<this.methodsArray.length;++e)t.push(this._methodsArray[e].toDescriptor());return lt.ServiceDescriptorProto.create({name:this.name,method:t,options:th(this.options,lt.ServiceOptions)})};var Ute=0;uv.fromDescriptor=function(t){return typeof t.length=="number"&&(t=lt.MethodDescriptorProto.decode(t)),new uv(t.name&&t.name.length?t.name:"Method"+Ute++,"rpc",t.inputType,t.outputType,!!t.clientStreaming,!!t.serverStreaming,eh(t.options,lt.MethodOptions))};uv.prototype.toDescriptor=function(){return lt.MethodDescriptorProto.create({name:this.name,inputType:this.resolvedRequestType?this.resolvedRequestType.fullName:this.requestType,outputType:this.resolvedResponseType?this.resolvedResponseType.fullName:this.responseType,clientStreaming:this.requestStream,serverStreaming:this.responseStream,options:th(this.options,lt.MethodOptions)})};function Hte(i){switch(i){case 1:return"double";case 2:return"float";case 3:return"int64";case 4:return"uint64";case 5:return"int32";case 6:return"fixed64";case 7:return"fixed32";case 8:return"bool";case 9:return"string";case 12:return"bytes";case 13:return"uint32";case 15:return"sfixed32";case 16:return"sfixed64";case 17:return"sint32";case 18:return"sint64"}throw Error("illegal type: "+i)}function qte(i){switch(i){case 1:case 2:case 3:case 4:case 5:case 6:case 7:case 8:case 13:case 14:case 15:case 16:case 17:case 18:return!0}return!1}function wE(i,t){switch(i){case"double":return 1;case"float":return 2;case"int64":return 3;case"uint64":return 4;case"int32":return 5;case"fixed64":return 6;case"fixed32":return 7;case"bool":return 8;case"string":return 9;case"bytes":return 12;case"uint32":return 13;case"sfixed32":return 15;case"sfixed64":return 16;case"sint32":return 17;case"sint64":return 18}if(t instanceof sa)return 14;if(t instanceof ll)return t.group?10:11;throw Error("illegal type: "+i)}function eh(i,t){if(i){for(var e=[],n=0,r,s,o;n<t.fieldsArray.length;++n)(s=(r=t._fieldsArray[n]).name)!=="uninterpretedOption"&&i.hasOwnProperty(s)&&(o=i[s],r.resolvedType instanceof sa&&typeof o=="number"&&r.resolvedType.valuesById[o]!==void 0&&(o=r.resolvedType.valuesById[o]),e.push(Wte(s),o));return e.length?Wn.util.toObject(e):void 0}}function th(i,t){if(i){for(var e=[],n=0,r=Object.keys(i),s,o;n<r.length;++n)if(o=i[s=r[n]],s!=="default"){var a=t.fields[s];!a&&!(a=t.fields[s=Wn.util.camelCase(s)])||e.push(s,o)}return e.length?t.fromObject(Wn.util.toObject(e)):void 0}}function LB(i,t){var e=i.fullName.split("."),n=t.fullName.split("."),r=0,s=0,o=n.length-1;if(!(i instanceof Mp)&&t instanceof FB)for(;r<e.length&&s<o&&e[r]===n[s];){var a=t.lookup(e[r++],!0);if(a!==null&&a!==t)break;++s}else for(;r<e.length&&s<o&&e[r]===n[s];++r,++s);return n.slice(s).join(".")}function Wte(i){return i.substring(0,1)+i.substring(1).replace(/([A-Z])(?=[a-z]|$)/g,function(t,e){return"_"+e.toLowerCase()})}});var zB=G((L2e,Gte)=>{Gte.exports={nested:{google:{nested:{protobuf:{nested:{Api:{fields:{name:{type:"string",id:1},methods:{rule:"repeated",type:"Method",id:2},options:{rule:"repeated",type:"Option",id:3},version:{type:"string",id:4},sourceContext:{type:"SourceContext",id:5},mixins:{rule:"repeated",type:"Mixin",id:6},syntax:{type:"Syntax",id:7}}},Method:{fields:{name:{type:"string",id:1},requestTypeUrl:{type:"string",id:2},requestStreaming:{type:"bool",id:3},responseTypeUrl:{type:"string",id:4},responseStreaming:{type:"bool",id:5},options:{rule:"repeated",type:"Option",id:6},syntax:{type:"Syntax",id:7}}},Mixin:{fields:{name:{type:"string",id:1},root:{type:"string",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}}}}}}}}});var jB=G((B2e,$te)=>{$te.exports={nested:{google:{nested:{protobuf:{nested:{SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var UB=G((V2e,Kte)=>{Kte.exports={nested:{google:{nested:{protobuf:{nested:{Type:{fields:{name:{type:"string",id:1},fields:{rule:"repeated",type:"Field",id:2},oneofs:{rule:"repeated",type:"string",id:3},options:{rule:"repeated",type:"Option",id:4},sourceContext:{type:"SourceContext",id:5},syntax:{type:"Syntax",id:6}}},Field:{fields:{kind:{type:"Kind",id:1},cardinality:{type:"Cardinality",id:2},number:{type:"int32",id:3},name:{type:"string",id:4},typeUrl:{type:"string",id:6},oneofIndex:{type:"int32",id:7},packed:{type:"bool",id:8},options:{rule:"repeated",type:"Option",id:9},jsonName:{type:"string",id:10},defaultValue:{type:"string",id:11}},nested:{Kind:{values:{TYPE_UNKNOWN:0,TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Cardinality:{values:{CARDINALITY_UNKNOWN:0,CARDINALITY_OPTIONAL:1,CARDINALITY_REQUIRED:2,CARDINALITY_REPEATED:3}}}},Enum:{fields:{name:{type:"string",id:1},enumvalue:{rule:"repeated",type:"EnumValue",id:2},options:{rule:"repeated",type:"Option",id:3},sourceContext:{type:"SourceContext",id:4},syntax:{type:"Syntax",id:5}}},EnumValue:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{rule:"repeated",type:"Option",id:3}}},Option:{fields:{name:{type:"string",id:1},value:{type:"Any",id:2}}},Syntax:{values:{SYNTAX_PROTO2:0,SYNTAX_PROTO3:1}},Any:{fields:{type_url:{type:"string",id:1},value:{type:"bytes",id:2}}},SourceContext:{fields:{fileName:{type:"string",id:1}}}}}}}}}});var GB=G(dl=>{"use strict";Object.defineProperty(dl,"__esModule",{value:!0});dl.addCommonProtos=dl.loadProtosWithOptionsSync=dl.loadProtosWithOptions=void 0;var HB=Be("fs"),qB=Be("path"),ih=cv();function WB(i,t){let e=i.resolvePath;i.resolvePath=(n,r)=>{if(qB.isAbsolute(r))return r;for(let s of t){let o=qB.join(s,r);try{return HB.accessSync(o,HB.constants.R_OK),o}catch{continue}}return process.emitWarning(`${r} not found in any of the include paths ${t}`),e(n,r)}}function Yte(i,t){return N(this,null,function*(){let e=new ih.Root;if(t=t||{},t.includeDirs){if(!Array.isArray(t.includeDirs))return Promise.reject(new Error("The includeDirs option must be an array"));WB(e,t.includeDirs)}let n=yield e.load(i,t);return n.resolveAll(),n})}dl.loadProtosWithOptions=Yte;function Qte(i,t){let e=new ih.Root;if(t=t||{},t.includeDirs){if(!Array.isArray(t.includeDirs))throw new Error("The includeDirs option must be an array");WB(e,t.includeDirs)}let n=e.loadSync(i,t);return n.resolveAll(),n}dl.loadProtosWithOptionsSync=Qte;function Xte(){let i=zB(),t=xE(),e=jB(),n=UB();ih.common("api",i.nested.google.nested.protobuf.nested),ih.common("descriptor",t.nested.google.nested.protobuf.nested),ih.common("source_context",e.nested.google.nested.protobuf.nested),ih.common("type",n.nested.google.nested.protobuf.nested)}dl.addCommonProtos=Xte});var $B=G((Op,CE)=>{"use strict";(function(i,t){function e(n){return n.default||n}typeof define=="function"&&define.amd?define([],function(){var n={};return t(n),e(n)}):typeof Op=="object"?(t(Op),typeof CE=="object"&&(CE.exports=e(Op))):function(){var n={};t(n),i.Long=e(n)}()})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:Op,function(i){"use strict";Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var t=null;try{t=new WebAssembly.Instance(new WebAssembly.Module(new Uint8Array([0,97,115,109,1,0,0,0,1,13,2,96,0,1,127,96,4,127,127,127,127,1,127,3,7,6,0,1,1,1,1,1,6,6,1,127,1,65,0,11,7,50,6,3,109,117,108,0,1,5,100,105,118,95,115,0,2,5,100,105,118,95,117,0,3,5,114,101,109,95,115,0,4,5,114,101,109,95,117,0,5,8,103,101,116,95,104,105,103,104,0,0,10,191,1,6,4,0,35,0,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,126,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,127,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,128,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,129,34,4,66,32,135,167,36,0,32,4,167,11,36,1,1,126,32,0,173,32,1,173,66,32,134,132,32,2,173,32,3,173,66,32,134,132,130,34,4,66,32,135,167,36,0,32,4,167,11])),{}).exports}catch{}function e(w,k,X){this.low=w|0,this.high=k|0,this.unsigned=!!X}e.prototype.__isLong__,Object.defineProperty(e.prototype,"__isLong__",{value:!0});function n(w){return(w&&w.__isLong__)===!0}function r(w){var k=Math.clz32(w&-w);return w?31-k:k}e.isLong=n;var s={},o={};function a(w,k){var X,Oe,Pe;return k?(w>>>=0,(Pe=0<=w&&w<256)&&(Oe=o[w],Oe)?Oe:(X=c(w,0,!0),Pe&&(o[w]=X),X)):(w|=0,(Pe=-128<=w&&w<128)&&(Oe=s[w],Oe)?Oe:(X=c(w,w<0?-1:0,!1),Pe&&(s[w]=X),X))}e.fromInt=a;function l(w,k){if(isNaN(w))return k?M:F;if(k){if(w<0)return M;if(w>=v)return E}else{if(w<=-I)return D;if(w+1>=I)return C}return w<0?l(-w,k).neg():c(w%b|0,w/b|0,k)}e.fromNumber=l;function c(w,k,X){return new e(w,k,X)}e.fromBits=c;var d=Math.pow;function u(w,k,X){if(w.length===0)throw Error("empty string");if(typeof k=="number"?(X=k,k=!1):k=!!k,w==="NaN"||w==="Infinity"||w==="+Infinity"||w==="-Infinity")return k?M:F;if(X=X||10,X<2||36<X)throw RangeError("radix");var Oe;if((Oe=w.indexOf("-"))>0)throw Error("interior hyphen");if(Oe===0)return u(w.substring(1),k,X).neg();for(var Pe=l(d(X,8)),it=F,ot=0;ot<w.length;ot+=8){var fi=Math.min(8,w.length-ot),Ui=parseInt(w.substring(ot,ot+fi),X);if(fi<8){var ni=l(d(X,fi));it=it.mul(ni).add(l(Ui))}else it=it.mul(Pe),it=it.add(l(Ui))}return it.unsigned=k,it}e.fromString=u;function h(w,k){return typeof w=="number"?l(w,k):typeof w=="string"?u(w,k):c(w.low,w.high,typeof k=="boolean"?k:w.unsigned)}e.fromValue=h;var m=65536,_=1<<24,b=m*m,v=b*b,I=v/2,A=a(_),F=a(0);e.ZERO=F;var M=a(0,!0);e.UZERO=M;var L=a(1);e.ONE=L;var U=a(1,!0);e.UONE=U;var T=a(-1);e.NEG_ONE=T;var C=c(-1,2147483647,!1);e.MAX_VALUE=C;var E=c(-1,-1,!0);e.MAX_UNSIGNED_VALUE=E;var D=c(0,-2147483648,!1);e.MIN_VALUE=D;var S=e.prototype;S.toInt=function(){return this.unsigned?this.low>>>0:this.low},S.toNumber=function(){return this.unsigned?(this.high>>>0)*b+(this.low>>>0):this.high*b+(this.low>>>0)},S.toString=function(k){if(k=k||10,k<2||36<k)throw RangeError("radix");if(this.isZero())return"0";if(this.isNegative())if(this.eq(D)){var X=l(k),Oe=this.div(X),Pe=Oe.mul(X).sub(this);return Oe.toString(k)+Pe.toInt().toString(k)}else return"-"+this.neg().toString(k);for(var it=l(d(k,6),this.unsigned),ot=this,fi="";;){var Ui=ot.div(it),ni=ot.sub(Ui.mul(it)).toInt()>>>0,at=ni.toString(k);if(ot=Ui,ot.isZero())return at+fi;for(;at.length<6;)at="0"+at;fi=""+at+fi}},S.getHighBits=function(){return this.high},S.getHighBitsUnsigned=function(){return this.high>>>0},S.getLowBits=function(){return this.low},S.getLowBitsUnsigned=function(){return this.low>>>0},S.getNumBitsAbs=function(){if(this.isNegative())return this.eq(D)?64:this.neg().getNumBitsAbs();for(var k=this.high!=0?this.high:this.low,X=31;X>0&&!(k&1<<X);X--);return this.high!=0?X+33:X+1},S.isSafeInteger=function(){var k=this.high>>21;return k?this.unsigned?!1:k===-1&&!(this.low===0&&this.high===-2097152):!0},S.isZero=function(){return this.high===0&&this.low===0},S.eqz=S.isZero,S.isNegative=function(){return!this.unsigned&&this.high<0},S.isPositive=function(){return this.unsigned||this.high>=0},S.isOdd=function(){return(this.low&1)===1},S.isEven=function(){return(this.low&1)===0},S.equals=function(k){return n(k)||(k=h(k)),this.unsigned!==k.unsigned&&this.high>>>31===1&&k.high>>>31===1?!1:this.high===k.high&&this.low===k.low},S.eq=S.equals,S.notEquals=function(k){return!this.eq(k)},S.neq=S.notEquals,S.ne=S.notEquals,S.lessThan=function(k){return this.comp(k)<0},S.lt=S.lessThan,S.lessThanOrEqual=function(k){return this.comp(k)<=0},S.lte=S.lessThanOrEqual,S.le=S.lessThanOrEqual,S.greaterThan=function(k){return this.comp(k)>0},S.gt=S.greaterThan,S.greaterThanOrEqual=function(k){return this.comp(k)>=0},S.gte=S.greaterThanOrEqual,S.ge=S.greaterThanOrEqual,S.compare=function(k){if(n(k)||(k=h(k)),this.eq(k))return 0;var X=this.isNegative(),Oe=k.isNegative();return X&&!Oe?-1:!X&&Oe?1:this.unsigned?k.high>>>0>this.high>>>0||k.high===this.high&&k.low>>>0>this.low>>>0?-1:1:this.sub(k).isNegative()?-1:1},S.comp=S.compare,S.negate=function(){return!this.unsigned&&this.eq(D)?D:this.not().add(L)},S.neg=S.negate,S.add=function(k){n(k)||(k=h(k));var X=this.high>>>16,Oe=this.high&65535,Pe=this.low>>>16,it=this.low&65535,ot=k.high>>>16,fi=k.high&65535,Ui=k.low>>>16,ni=k.low&65535,at=0,pi=0,jt=0,gi=0;return gi+=it+ni,jt+=gi>>>16,gi&=65535,jt+=Pe+Ui,pi+=jt>>>16,jt&=65535,pi+=Oe+fi,at+=pi>>>16,pi&=65535,at+=X+ot,at&=65535,c(jt<<16|gi,at<<16|pi,this.unsigned)},S.subtract=function(k){return n(k)||(k=h(k)),this.add(k.neg())},S.sub=S.subtract,S.multiply=function(k){if(this.isZero())return this;if(n(k)||(k=h(k)),t){var X=t.mul(this.low,this.high,k.low,k.high);return c(X,t.get_high(),this.unsigned)}if(k.isZero())return this.unsigned?M:F;if(this.eq(D))return k.isOdd()?D:F;if(k.eq(D))return this.isOdd()?D:F;if(this.isNegative())return k.isNegative()?this.neg().mul(k.neg()):this.neg().mul(k).neg();if(k.isNegative())return this.mul(k.neg()).neg();if(this.lt(A)&&k.lt(A))return l(this.toNumber()*k.toNumber(),this.unsigned);var Oe=this.high>>>16,Pe=this.high&65535,it=this.low>>>16,ot=this.low&65535,fi=k.high>>>16,Ui=k.high&65535,ni=k.low>>>16,at=k.low&65535,pi=0,jt=0,gi=0,Qo=0;return Qo+=ot*at,gi+=Qo>>>16,Qo&=65535,gi+=it*at,jt+=gi>>>16,gi&=65535,gi+=ot*ni,jt+=gi>>>16,gi&=65535,jt+=Pe*at,pi+=jt>>>16,jt&=65535,jt+=it*ni,pi+=jt>>>16,jt&=65535,jt+=ot*Ui,pi+=jt>>>16,jt&=65535,pi+=Oe*at+Pe*ni+it*Ui+ot*fi,pi&=65535,c(gi<<16|Qo,pi<<16|jt,this.unsigned)},S.mul=S.multiply,S.divide=function(k){if(n(k)||(k=h(k)),k.isZero())throw Error("division by zero");if(t){if(!this.unsigned&&this.high===-2147483648&&k.low===-1&&k.high===-1)return this;var X=(this.unsigned?t.div_u:t.div_s)(this.low,this.high,k.low,k.high);return c(X,t.get_high(),this.unsigned)}if(this.isZero())return this.unsigned?M:F;var Oe,Pe,it;if(this.unsigned){if(k.unsigned||(k=k.toUnsigned()),k.gt(this))return M;if(k.gt(this.shru(1)))return U;it=M}else{if(this.eq(D)){if(k.eq(L)||k.eq(T))return D;if(k.eq(D))return L;var ot=this.shr(1);return Oe=ot.div(k).shl(1),Oe.eq(F)?k.isNegative()?L:T:(Pe=this.sub(k.mul(Oe)),it=Oe.add(Pe.div(k)),it)}else if(k.eq(D))return this.unsigned?M:F;if(this.isNegative())return k.isNegative()?this.neg().div(k.neg()):this.neg().div(k).neg();if(k.isNegative())return this.div(k.neg()).neg();it=F}for(Pe=this;Pe.gte(k);){Oe=Math.max(1,Math.floor(Pe.toNumber()/k.toNumber()));for(var fi=Math.ceil(Math.log(Oe)/Math.LN2),Ui=fi<=48?1:d(2,fi-48),ni=l(Oe),at=ni.mul(k);at.isNegative()||at.gt(Pe);)Oe-=Ui,ni=l(Oe,this.unsigned),at=ni.mul(k);ni.isZero()&&(ni=L),it=it.add(ni),Pe=Pe.sub(at)}return it},S.div=S.divide,S.modulo=function(k){if(n(k)||(k=h(k)),t){var X=(this.unsigned?t.rem_u:t.rem_s)(this.low,this.high,k.low,k.high);return c(X,t.get_high(),this.unsigned)}return this.sub(this.div(k).mul(k))},S.mod=S.modulo,S.rem=S.modulo,S.not=function(){return c(~this.low,~this.high,this.unsigned)},S.countLeadingZeros=function(){return this.high?Math.clz32(this.high):Math.clz32(this.low)+32},S.clz=S.countLeadingZeros,S.countTrailingZeros=function(){return this.low?r(this.low):r(this.high)+32},S.ctz=S.countTrailingZeros,S.and=function(k){return n(k)||(k=h(k)),c(this.low&k.low,this.high&k.high,this.unsigned)},S.or=function(k){return n(k)||(k=h(k)),c(this.low|k.low,this.high|k.high,this.unsigned)},S.xor=function(k){return n(k)||(k=h(k)),c(this.low^k.low,this.high^k.high,this.unsigned)},S.shiftLeft=function(k){return n(k)&&(k=k.toInt()),(k&=63)===0?this:k<32?c(this.low<<k,this.high<<k|this.low>>>32-k,this.unsigned):c(0,this.low<<k-32,this.unsigned)},S.shl=S.shiftLeft,S.shiftRight=function(k){return n(k)&&(k=k.toInt()),(k&=63)===0?this:k<32?c(this.low>>>k|this.high<<32-k,this.high>>k,this.unsigned):c(this.high>>k-32,this.high>=0?0:-1,this.unsigned)},S.shr=S.shiftRight,S.shiftRightUnsigned=function(k){return n(k)&&(k=k.toInt()),(k&=63)===0?this:k<32?c(this.low>>>k|this.high<<32-k,this.high>>>k,this.unsigned):k===32?c(this.high,0,this.unsigned):c(this.high>>>k-32,0,this.unsigned)},S.shru=S.shiftRightUnsigned,S.shr_u=S.shiftRightUnsigned,S.rotateLeft=function(k){var X;return n(k)&&(k=k.toInt()),(k&=63)===0?this:k===32?c(this.high,this.low,this.unsigned):k<32?(X=32-k,c(this.low<<k|this.high>>>X,this.high<<k|this.low>>>X,this.unsigned)):(k-=32,X=32-k,c(this.high<<k|this.low>>>X,this.low<<k|this.high>>>X,this.unsigned))},S.rotl=S.rotateLeft,S.rotateRight=function(k){var X;return n(k)&&(k=k.toInt()),(k&=63)===0?this:k===32?c(this.high,this.low,this.unsigned):k<32?(X=32-k,c(this.high<<X|this.low>>>k,this.low<<X|this.high>>>k,this.unsigned)):(k-=32,X=32-k,c(this.low<<X|this.high>>>k,this.high<<X|this.low>>>k,this.unsigned))},S.rotr=S.rotateRight,S.toSigned=function(){return this.unsigned?c(this.low,this.high,!1):this},S.toUnsigned=function(){return this.unsigned?this:c(this.low,this.high,!0)},S.toBytes=function(k){return k?this.toBytesLE():this.toBytesBE()},S.toBytesLE=function(){var k=this.high,X=this.low;return[X&255,X>>>8&255,X>>>16&255,X>>>24,k&255,k>>>8&255,k>>>16&255,k>>>24]},S.toBytesBE=function(){var k=this.high,X=this.low;return[k>>>24,k>>>16&255,k>>>8&255,k&255,X>>>24,X>>>16&255,X>>>8&255,X&255]},e.fromBytes=function(k,X,Oe){return Oe?e.fromBytesLE(k,X):e.fromBytesBE(k,X)},e.fromBytesLE=function(k,X){return new e(k[0]|k[1]<<8|k[2]<<16|k[3]<<24,k[4]|k[5]<<8|k[6]<<16|k[7]<<24,X)},e.fromBytesBE=function(k,X){return new e(k[4]<<24|k[5]<<16|k[6]<<8|k[7],k[0]<<24|k[1]<<16|k[2]<<8|k[3],X)},typeof BigInt=="function"&&(e.fromBigInt=function(k,X){var Oe=Number(BigInt.asIntN(32,k)),Pe=Number(BigInt.asIntN(32,k>>BigInt(32)));return c(Oe,Pe,X)},e.fromValue=function(k,X){return typeof k=="bigint"?e.fromBigInt(k,X):h(k,X)},S.toBigInt=function(){var k=BigInt(this.low>>>0),X=BigInt(this.unsigned?this.high>>>0:this.high);return X<<BigInt(32)|k});var R=i.default=e})});var TE=G(Ji=>{"use strict";Object.defineProperty(Ji,"__esModule",{value:!0});Ji.loadFileDescriptorSetFromObject=Ji.loadFileDescriptorSetFromBuffer=Ji.fromJSON=Ji.loadSync=Ji.load=Ji.IdempotencyLevel=Ji.isAnyExtension=Ji.Long=void 0;var Zte=B3(),ho=cv(),kE=VB(),EE=GB(),Jte=$B();Ji.Long=Jte;function eie(i){return"@type"in i&&typeof i["@type"]=="string"}Ji.isAnyExtension=eie;var QB;(function(i){i.IDEMPOTENCY_UNKNOWN="IDEMPOTENCY_UNKNOWN",i.NO_SIDE_EFFECTS="NO_SIDE_EFFECTS",i.IDEMPOTENT="IDEMPOTENT"})(QB=Ji.IdempotencyLevel||(Ji.IdempotencyLevel={}));var XB={longs:String,enums:String,bytes:String,defaults:!0,oneofs:!0,json:!0};function tie(i,t){return i===""?t:i+"."+t}function iie(i){return i instanceof ho.Service||i instanceof ho.Type||i instanceof ho.Enum}function nie(i){return i instanceof ho.Namespace||i instanceof ho.Root}function ZB(i,t){let e=tie(t,i.name);return iie(i)?[[e,i]]:nie(i)&&typeof i.nested<"u"?Object.keys(i.nested).map(n=>ZB(i.nested[n],e)).reduce((n,r)=>n.concat(r),[]):[]}function KB(i,t){return function(n){return i.toObject(i.decode(n),t)}}function YB(i){return function(e){if(Array.isArray(e))throw new Error(`Failed to serialize message: expected object with ${i.name} structure, got array instead`);let n=i.fromObject(e);return i.encode(n).finish()}}function rie(i){return(i||[]).reduce((t,e)=>{for(let[n,r]of Object.entries(e))switch(n){case"uninterpreted_option":t.uninterpreted_option.push(e.uninterpreted_option);break;default:t[n]=r}return t},{deprecated:!1,idempotency_level:QB.IDEMPOTENCY_UNKNOWN,uninterpreted_option:[]})}function sie(i,t,e,n){let r=i.resolvedRequestType,s=i.resolvedResponseType;return{path:"/"+t+"/"+i.name,requestStream:!!i.requestStream,responseStream:!!i.responseStream,requestSerialize:YB(r),requestDeserialize:KB(r,e),responseSerialize:YB(s),responseDeserialize:KB(s,e),originalName:Zte(i.name),requestType:SE(r,n),responseType:SE(s,n),options:rie(i.parsedOptions)}}function oie(i,t,e,n){let r={};for(let s of i.methodsArray)r[s.name]=sie(s,t,e,n);return r}function SE(i,t){let e=i.toDescriptor("proto3");return{format:"Protocol Buffer 3 DescriptorProto",type:e.$type.toObject(e,XB),fileDescriptorProtos:t}}function aie(i,t){let e=i.toDescriptor("proto3");return{format:"Protocol Buffer 3 EnumDescriptorProto",type:e.$type.toObject(e,XB),fileDescriptorProtos:t}}function lie(i,t,e,n){if(i instanceof ho.Service)return oie(i,t,e,n);if(i instanceof ho.Type)return SE(i,n);if(i instanceof ho.Enum)return aie(i,n);throw new Error("Type mismatch in reflection object handling")}function hv(i,t){let e={};i.resolveAll();let r=i.toDescriptor("proto3").file.map(s=>Buffer.from(kE.FileDescriptorProto.encode(s).finish()));for(let[s,o]of ZB(i,""))e[s]=lie(o,s,t,r);return e}function JB(i,t){t=t||{};let e=ho.Root.fromDescriptor(i);return e.resolveAll(),hv(e,t)}function cie(i,t){return(0,EE.loadProtosWithOptions)(i,t).then(e=>hv(e,t))}Ji.load=cie;function die(i,t){let e=(0,EE.loadProtosWithOptionsSync)(i,t);return hv(e,t)}Ji.loadSync=die;function uie(i,t){t=t||{};let e=ho.Root.fromJSON(i);return e.resolveAll(),hv(e,t)}Ji.fromJSON=uie;function hie(i,t){let e=kE.FileDescriptorSet.decode(i);return JB(e,t)}Ji.loadFileDescriptorSetFromBuffer=hie;function mie(i,t){let e=kE.FileDescriptorSet.fromObject(i);return JB(e,t)}Ji.loadFileDescriptorSetFromObject=mie;(0,EE.addCommonProtos)()});var td=G(di=>{"use strict";Object.defineProperty(di,"__esModule",{value:!0});di.setup=di.getChannelzServiceDefinition=di.getChannelzHandlers=di.unregisterChannelzRef=di.registerChannelzSocket=di.registerChannelzServer=di.registerChannelzSubchannel=di.registerChannelzChannel=di.ChannelzCallTracker=di.ChannelzChildrenTracker=di.ChannelzTrace=void 0;var eV=Be("net"),Pp=Zr(),Fp=Mt(),fie=no(),pie=R0(),gie=kk();function IE(i){return{channel_id:i.id,name:i.name}}function OE(i){return{subchannel_id:i.id,name:i.name}}function _ie(i){return{server_id:i.id}}function fv(i){return{socket_id:i.id,name:i.name}}var tV=32,DE=class{constructor(){this.events=[],this.eventsLogged=0,this.creationTimestamp=new Date}addTrace(t,e,n){let r=new Date;this.events.push({description:e,severity:t,timestamp:r,childChannel:n?.kind==="channel"?n:void 0,childSubchannel:n?.kind==="subchannel"?n:void 0}),this.events.length>=tV*2&&(this.events=this.events.slice(tV)),this.eventsLogged+=1}getTraceMessage(){return{creation_timestamp:oa(this.creationTimestamp),num_events_logged:this.eventsLogged,events:this.events.map(t=>({description:t.description,severity:t.severity,timestamp:oa(t.timestamp),channel_ref:t.childChannel?IE(t.childChannel):null,subchannel_ref:t.childSubchannel?OE(t.childSubchannel):null}))}}};di.ChannelzTrace=DE;var ME=class{constructor(){this.channelChildren=new Map,this.subchannelChildren=new Map,this.socketChildren=new Map}refChild(t){var e,n,r;switch(t.kind){case"channel":{let s=(e=this.channelChildren.get(t.id))!==null&&e!==void 0?e:{ref:t,count:0};s.count+=1,this.channelChildren.set(t.id,s);break}case"subchannel":{let s=(n=this.subchannelChildren.get(t.id))!==null&&n!==void 0?n:{ref:t,count:0};s.count+=1,this.subchannelChildren.set(t.id,s);break}case"socket":{let s=(r=this.socketChildren.get(t.id))!==null&&r!==void 0?r:{ref:t,count:0};s.count+=1,this.socketChildren.set(t.id,s);break}}}unrefChild(t){switch(t.kind){case"channel":{let e=this.channelChildren.get(t.id);e!==void 0&&(e.count-=1,e.count===0?this.channelChildren.delete(t.id):this.channelChildren.set(t.id,e));break}case"subchannel":{let e=this.subchannelChildren.get(t.id);e!==void 0&&(e.count-=1,e.count===0?this.subchannelChildren.delete(t.id):this.subchannelChildren.set(t.id,e));break}case"socket":{let e=this.socketChildren.get(t.id);e!==void 0&&(e.count-=1,e.count===0?this.socketChildren.delete(t.id):this.socketChildren.set(t.id,e));break}}}getChildLists(){let t=[];for(let{ref:r}of this.channelChildren.values())t.push(r);let e=[];for(let{ref:r}of this.subchannelChildren.values())e.push(r);let n=[];for(let{ref:r}of this.socketChildren.values())n.push(r);return{channels:t,subchannels:e,sockets:n}}};di.ChannelzChildrenTracker=ME;var AE=class{constructor(){this.callsStarted=0,this.callsSucceeded=0,this.callsFailed=0,this.lastCallStartedTimestamp=null}addCallStarted(){this.callsStarted+=1,this.lastCallStartedTimestamp=new Date}addCallSucceeded(){this.callsSucceeded+=1}addCallFailed(){this.callsFailed+=1}};di.ChannelzCallTracker=AE;var bie=1;function pv(){return bie++}var Rp=[],PE=[],ul=[],RE=[];function vie(i,t,e){let n=pv(),r={id:n,name:i,kind:"channel"};return e&&(Rp[n]={ref:r,getInfo:t}),r}di.registerChannelzChannel=vie;function yie(i,t,e){let n=pv(),r={id:n,name:i,kind:"subchannel"};return e&&(PE[n]={ref:r,getInfo:t}),r}di.registerChannelzSubchannel=yie;function xie(i,t){let e=pv(),n={id:e,kind:"server"};return t&&(ul[e]={ref:n,getInfo:i}),n}di.registerChannelzServer=xie;function wie(i,t,e){let n=pv(),r={id:n,name:i,kind:"socket"};return e&&(RE[n]={ref:r,getInfo:t}),r}di.registerChannelzSocket=wie;function Cie(i){switch(i.kind){case"channel":delete Rp[i.id];return;case"subchannel":delete PE[i.id];return;case"server":delete ul[i.id];return;case"socket":delete RE[i.id];return}}di.unregisterChannelzRef=Cie;function Sie(i){let t=Number.parseInt(i,16);return[t/256|0,t%256]}function iV(i){if(i==="")return[];let t=i.split(":").map(n=>Sie(n));return[].concat(...t)}function kie(i){if((0,eV.isIPv4)(i))return Buffer.from(Uint8Array.from(i.split(".").map(t=>Number.parseInt(t))));if((0,eV.isIPv6)(i)){let t,e,n=i.indexOf("::");n===-1?(t=i,e=""):(t=i.substring(0,n),e=i.substring(n+2));let r=Buffer.from(iV(t)),s=Buffer.from(iV(e)),o=Buffer.alloc(16-r.length-s.length,0);return Buffer.concat([r,o,s])}else return null}function rV(i){switch(i){case Pp.ConnectivityState.CONNECTING:return{state:"CONNECTING"};case Pp.ConnectivityState.IDLE:return{state:"IDLE"};case Pp.ConnectivityState.READY:return{state:"READY"};case Pp.ConnectivityState.SHUTDOWN:return{state:"SHUTDOWN"};case Pp.ConnectivityState.TRANSIENT_FAILURE:return{state:"TRANSIENT_FAILURE"};default:return{state:"UNKNOWN"}}}function oa(i){if(!i)return null;let t=i.getTime();return{seconds:t/1e3|0,nanos:t%1e3*1e6}}function sV(i){let t=i.getInfo();return{ref:IE(i.ref),data:{target:t.target,state:rV(t.state),calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:oa(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},channel_ref:t.children.channels.map(e=>IE(e)),subchannel_ref:t.children.subchannels.map(e=>OE(e))}}function Eie(i,t){let e=Number.parseInt(i.request.channel_id),n=Rp[e];if(n===void 0){t({code:Fp.Status.NOT_FOUND,details:"No channel data found for id "+e});return}t(null,{channel:sV(n)})}function Tie(i,t){let e=Number.parseInt(i.request.max_results),n=[],r=Number.parseInt(i.request.start_channel_id);for(;r<Rp.length;r++){let s=Rp[r];if(s!==void 0&&(n.push(sV(s)),n.length>=e))break}t(null,{channel:n,end:r>=ul.length})}function oV(i){let t=i.getInfo();return{ref:_ie(i.ref),data:{calls_started:t.callTracker.callsStarted,calls_succeeded:t.callTracker.callsSucceeded,calls_failed:t.callTracker.callsFailed,last_call_started_timestamp:oa(t.callTracker.lastCallStartedTimestamp),trace:t.trace.getTraceMessage()},listen_socket:t.listenerChildren.sockets.map(e=>fv(e))}}function Iie(i,t){let e=Number.parseInt(i.request.server_id),n=ul[e];if(n===void 0){t({code:Fp.Status.NOT_FOUND,details:"No server data found for id "+e});return}t(null,{server:oV(n)})}function Die(i,t){let e=Number.parseInt(i.request.max_results),n=[],r=Number.parseInt(i.request.start_server_id);for(;r<ul.length;r++){let s=ul[r];if(s!==void 0&&(n.push(oV(s)),n.length>=e))break}t(null,{server:n,end:r>=ul.length})}function Mie(i,t){let e=Number.parseInt(i.request.subchannel_id),n=PE[e];if(n===void 0){t({code:Fp.Status.NOT_FOUND,details:"No subchannel data found for id "+e});return}let r=n.getInfo(),s={ref:OE(n.ref),data:{target:r.target,state:rV(r.state),calls_started:r.callTracker.callsStarted,calls_succeeded:r.callTracker.callsSucceeded,calls_failed:r.callTracker.callsFailed,last_call_started_timestamp:oa(r.callTracker.lastCallStartedTimestamp),trace:r.trace.getTraceMessage()},socket_ref:r.children.sockets.map(o=>fv(o))};t(null,{subchannel:s})}function nV(i){var t;return(0,fie.isTcpSubchannelAddress)(i)?{address:"tcpip_address",tcpip_address:{ip_address:(t=kie(i.host))!==null&&t!==void 0?t:void 0,port:i.port}}:{address:"uds_address",uds_address:{filename:i.path}}}function Aie(i,t){var e,n,r,s,o;let a=Number.parseInt(i.request.socket_id),l=RE[a];if(l===void 0){t({code:Fp.Status.NOT_FOUND,details:"No socket data found for id "+a});return}let c=l.getInfo(),d=c.security?{model:"tls",tls:{cipher_suite:c.security.cipherSuiteStandardName?"standard_name":"other_name",standard_name:(e=c.security.cipherSuiteStandardName)!==null&&e!==void 0?e:void 0,other_name:(n=c.security.cipherSuiteOtherName)!==null&&n!==void 0?n:void 0,local_certificate:(r=c.security.localCertificate)!==null&&r!==void 0?r:void 0,remote_certificate:(s=c.security.remoteCertificate)!==null&&s!==void 0?s:void 0}}:null,u={ref:fv(l.ref),local:c.localAddress?nV(c.localAddress):null,remote:c.remoteAddress?nV(c.remoteAddress):null,remote_name:(o=c.remoteName)!==null&&o!==void 0?o:void 0,security:d,data:{keep_alives_sent:c.keepAlivesSent,streams_started:c.streamsStarted,streams_succeeded:c.streamsSucceeded,streams_failed:c.streamsFailed,last_local_stream_created_timestamp:oa(c.lastLocalStreamCreatedTimestamp),last_remote_stream_created_timestamp:oa(c.lastRemoteStreamCreatedTimestamp),messages_received:c.messagesReceived,messages_sent:c.messagesSent,last_message_received_timestamp:oa(c.lastMessageReceivedTimestamp),last_message_sent_timestamp:oa(c.lastMessageSentTimestamp),local_flow_control_window:c.localFlowControlWindow?{value:c.localFlowControlWindow}:null,remote_flow_control_window:c.remoteFlowControlWindow?{value:c.remoteFlowControlWindow}:null}};t(null,{socket:u})}function Oie(i,t){let e=Number.parseInt(i.request.server_id),n=ul[e];if(n===void 0){t({code:Fp.Status.NOT_FOUND,details:"No server data found for id "+e});return}let r=Number.parseInt(i.request.start_socket_id),s=Number.parseInt(i.request.max_results),a=n.getInfo().sessionChildren.sockets.sort((d,u)=>d.id-u.id),l=[],c=0;for(;c<a.length&&!(a[c].id>=r&&(l.push(fv(a[c])),l.length>=s));c++);t(null,{socket_ref:l,end:c>=a.length})}function aV(){return{GetChannel:Eie,GetTopChannels:Tie,GetServer:Iie,GetServers:Die,GetSubchannel:Mie,GetSocket:Aie,GetServerSockets:Oie}}di.getChannelzHandlers=aV;var mv=null;function lV(){if(mv)return mv;let i=TE().loadSync,t=i("channelz.proto",{keepCase:!0,longs:String,enums:String,defaults:!0,oneofs:!0,includeDirs:[`${__dirname}/../../proto`]});return mv=(0,gie.loadPackageDefinition)(t).grpc.channelz.v1.Channelz.service,mv}di.getChannelzServiceDefinition=lV;function Pie(){(0,pie.registerAdminService)(lV,aV)}di.setup=Pie});var cV=G(_v=>{"use strict";Object.defineProperty(_v,"__esModule",{value:!0});_v.Subchannel=void 0;var Qt=Zr(),Rie=up(),FE=Ti(),gv=Mt(),Fie=Tr(),Nie=no(),nh=td(),Lie="subchannel",Bie=~(1<<31),NE=class{constructor(t,e,n,r,s){var o;this.channelTarget=t,this.subchannelAddress=e,this.options=n,this.credentials=r,this.connector=s,this.connectivityState=Qt.ConnectivityState.IDLE,this.transport=null,this.continueConnecting=!1,this.stateListeners=new Set,this.refcount=0,this.channelzEnabled=!0,this.callTracker=new nh.ChannelzCallTracker,this.childrenTracker=new nh.ChannelzChildrenTracker,this.streamTracker=new nh.ChannelzCallTracker;let a={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoffTimeout=new Rie.BackoffTimeout(()=>{this.handleBackoffTimer()},a),this.backoffTimeout.unref(),this.subchannelAddressString=(0,Nie.subchannelAddressToString)(e),this.keepaliveTime=(o=n["grpc.keepalive_time_ms"])!==null&&o!==void 0?o:-1,n["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzTrace=new nh.ChannelzTrace,this.channelzRef=(0,nh.registerChannelzSubchannel)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Subchannel created"),this.trace("Subchannel constructed with options "+JSON.stringify(n,void 0,2))}getChannelzInfo(){return{state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists(),target:this.subchannelAddressString}}trace(t){FE.trace(gv.LogVerbosity.DEBUG,Lie,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+t)}refTrace(t){FE.trace(gv.LogVerbosity.DEBUG,"subchannel_refcount","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+t)}handleBackoffTimer(){this.continueConnecting?this.transitionToState([Qt.ConnectivityState.TRANSIENT_FAILURE],Qt.ConnectivityState.CONNECTING):this.transitionToState([Qt.ConnectivityState.TRANSIENT_FAILURE],Qt.ConnectivityState.IDLE)}startBackoff(){this.backoffTimeout.runOnce()}stopBackoff(){this.backoffTimeout.stop(),this.backoffTimeout.reset()}startConnectingInternal(){let t=this.options;if(t["grpc.keepalive_time_ms"]){let e=Math.min(this.keepaliveTime,Bie);t=Object.assign(Object.assign({},t),{"grpc.keepalive_time_ms":e})}this.connector.connect(this.subchannelAddress,this.credentials,t).then(e=>{this.transitionToState([Qt.ConnectivityState.CONNECTING],Qt.ConnectivityState.READY)?(this.transport=e,this.channelzEnabled&&this.childrenTracker.refChild(e.getChannelzRef()),e.addDisconnectListener(n=>{this.transitionToState([Qt.ConnectivityState.READY],Qt.ConnectivityState.IDLE),n&&this.keepaliveTime>0&&(this.keepaliveTime*=2,FE.log(gv.LogVerbosity.ERROR,`Connection to ${(0,Fie.uriToString)(this.channelTarget)} at ${this.subchannelAddressString} rejected by server because of excess pings. Increasing ping interval to ${this.keepaliveTime} ms`))})):e.shutdown()},e=>{this.transitionToState([Qt.ConnectivityState.CONNECTING],Qt.ConnectivityState.TRANSIENT_FAILURE,`${e}`)})}transitionToState(t,e,n){var r,s;if(t.indexOf(this.connectivityState)===-1)return!1;this.trace(Qt.ConnectivityState[this.connectivityState]+" -> "+Qt.ConnectivityState[e]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+Qt.ConnectivityState[e]);let o=this.connectivityState;switch(this.connectivityState=e,e){case Qt.ConnectivityState.READY:this.stopBackoff();break;case Qt.ConnectivityState.CONNECTING:this.startBackoff(),this.startConnectingInternal(),this.continueConnecting=!1;break;case Qt.ConnectivityState.TRANSIENT_FAILURE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(r=this.transport)===null||r===void 0||r.shutdown(),this.transport=null,this.backoffTimeout.isRunning()||process.nextTick(()=>{this.handleBackoffTimer()});break;case Qt.ConnectivityState.IDLE:this.channelzEnabled&&this.transport&&this.childrenTracker.unrefChild(this.transport.getChannelzRef()),(s=this.transport)===null||s===void 0||s.shutdown(),this.transport=null;break;default:throw new Error(`Invalid state: unknown ConnectivityState ${e}`)}for(let a of this.stateListeners)a(this,o,e,this.keepaliveTime,n);return!0}ref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount+1)),this.refcount+=1}unref(){this.refTrace("refcount "+this.refcount+" -> "+(this.refcount-1)),this.refcount-=1,this.refcount===0&&(this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Shutting down"),this.channelzEnabled&&(0,nh.unregisterChannelzRef)(this.channelzRef),process.nextTick(()=>{this.transitionToState([Qt.ConnectivityState.CONNECTING,Qt.ConnectivityState.READY],Qt.ConnectivityState.IDLE)}))}unrefIfOneRef(){return this.refcount===1?(this.unref(),!0):!1}createCall(t,e,n,r){if(!this.transport)throw new Error("Cannot create call, subchannel not READY");let s;return this.channelzEnabled?(this.callTracker.addCallStarted(),this.streamTracker.addCallStarted(),s={onCallEnd:o=>{o.code===gv.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}}):s={},this.transport.createCall(t,e,n,r,s)}startConnecting(){process.nextTick(()=>{this.transitionToState([Qt.ConnectivityState.IDLE],Qt.ConnectivityState.CONNECTING)||this.connectivityState===Qt.ConnectivityState.TRANSIENT_FAILURE&&(this.continueConnecting=!0)})}getConnectivityState(){return this.connectivityState}addConnectivityStateListener(t){this.stateListeners.add(t)}removeConnectivityStateListener(t){this.stateListeners.delete(t)}resetBackoff(){process.nextTick(()=>{this.backoffTimeout.reset(),this.transitionToState([Qt.ConnectivityState.TRANSIENT_FAILURE],Qt.ConnectivityState.CONNECTING)})}getAddress(){return this.subchannelAddressString}getChannelzRef(){return this.channelzRef}getRealSubchannel(){return this}realSubchannelEquals(t){return t.getRealSubchannel()===this}throttleKeepalive(t){t>this.keepaliveTime&&(this.keepaliveTime=t)}};_v.Subchannel=NE});var zE=G(fl=>{"use strict";Object.defineProperty(fl,"__esModule",{value:!0});fl.setup=fl.DEFAULT_PORT=void 0;var dV=to(),hV=Be("dns"),mV=Be("util"),Vie=ZS(),LE=Mt(),BE=lr(),zie=Ti(),jie=Mt(),hl=Tr(),uV=Be("net"),Uie=up(),Hie="dns_resolver";function ml(i){zie.trace(jie.LogVerbosity.DEBUG,Hie,i)}fl.DEFAULT_PORT=443;var qie=3e4,Wie=mV.promisify(hV.resolveTxt),Gie=mV.promisify(hV.lookup);function $ie(...i){let t=[];for(let e=0;e<Math.max.apply(null,i.map(n=>n.length));e++)for(let n of i)e<n.length&&t.push(n[e]);return t}var VE=class{constructor(t,e,n){var r,s,o;this.target=t,this.listener=e,this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.continueResolving=!1,this.isNextResolutionTimerRunning=!1,this.isServiceConfigEnabled=!0,this.returnedIpResult=!1,ml("Resolver constructed for target "+(0,hl.uriToString)(t));let a=(0,hl.splitHostPort)(t.path);a===null?(this.ipResult=null,this.dnsHostname=null,this.port=null):(0,uV.isIPv4)(a.host)||(0,uV.isIPv6)(a.host)?(this.ipResult=[{host:a.host,port:(r=a.port)!==null&&r!==void 0?r:fl.DEFAULT_PORT}],this.dnsHostname=null,this.port=null):(this.ipResult=null,this.dnsHostname=a.host,this.port=(s=a.port)!==null&&s!==void 0?s:fl.DEFAULT_PORT),this.percentage=Math.random()*100,n["grpc.service_config_disable_resolution"]===1&&(this.isServiceConfigEnabled=!1),this.defaultResolutionError={code:LE.Status.UNAVAILABLE,details:`Name resolution failed for target ${(0,hl.uriToString)(this.target)}`,metadata:new BE.Metadata};let l={initialDelay:n["grpc.initial_reconnect_backoff_ms"],maxDelay:n["grpc.max_reconnect_backoff_ms"]};this.backoff=new Uie.BackoffTimeout(()=>{this.continueResolving&&this.startResolutionWithBackoff()},l),this.backoff.unref(),this.minTimeBetweenResolutionsMs=(o=n["grpc.dns_min_time_between_resolutions_ms"])!==null&&o!==void 0?o:qie,this.nextResolutionTimer=setTimeout(()=>{},0),clearTimeout(this.nextResolutionTimer)}startResolution(){if(this.ipResult!==null){this.returnedIpResult||(ml("Returning IP address for target "+(0,hl.uriToString)(this.target)),setImmediate(()=>{this.listener.onSuccessfulResolution(this.ipResult,null,null,null,{})}),this.returnedIpResult=!0),this.backoff.stop(),this.backoff.reset(),this.stopNextResolutionTimer();return}if(this.dnsHostname===null)ml("Failed to parse DNS address "+(0,hl.uriToString)(this.target)),setImmediate(()=>{this.listener.onError({code:LE.Status.UNAVAILABLE,details:`Failed to parse DNS address ${(0,hl.uriToString)(this.target)}`,metadata:new BE.Metadata})}),this.stopNextResolutionTimer();else{if(this.pendingLookupPromise!==null)return;ml("Looking up DNS hostname "+this.dnsHostname),this.latestLookupResult=null;let t=this.dnsHostname;this.pendingLookupPromise=Gie(t,{all:!0}),this.pendingLookupPromise.then(e=>{if(this.pendingLookupPromise===null)return;this.pendingLookupPromise=null,this.backoff.reset(),this.backoff.stop();let n=e.filter(o=>o.family===4),r=e.filter(o=>o.family===6);this.latestLookupResult=$ie(r,n).map(o=>({host:o.address,port:+this.port}));let s="["+this.latestLookupResult.map(o=>o.host+":"+o.port).join(",")+"]";if(ml("Resolved addresses for target "+(0,hl.uriToString)(this.target)+": "+s),this.latestLookupResult.length===0){this.listener.onError(this.defaultResolutionError);return}this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})},e=>{this.pendingLookupPromise!==null&&(ml("Resolution error for target "+(0,hl.uriToString)(this.target)+": "+e.message),this.pendingLookupPromise=null,this.stopNextResolutionTimer(),this.listener.onError(this.defaultResolutionError))}),this.isServiceConfigEnabled&&this.pendingTxtPromise===null&&(this.pendingTxtPromise=Wie(t),this.pendingTxtPromise.then(e=>{if(this.pendingTxtPromise!==null){this.pendingTxtPromise=null;try{this.latestServiceConfig=(0,Vie.extractAndSelectServiceConfig)(e,this.percentage)}catch(n){this.latestServiceConfigError={code:LE.Status.UNAVAILABLE,details:`Parsing service config failed with error ${n.message}`,metadata:new BE.Metadata}}this.latestLookupResult!==null&&this.listener.onSuccessfulResolution(this.latestLookupResult,this.latestServiceConfig,this.latestServiceConfigError,null,{})}},e=>{}))}}startNextResolutionTimer(){var t,e;clearTimeout(this.nextResolutionTimer),this.nextResolutionTimer=(e=(t=setTimeout(()=>{this.stopNextResolutionTimer(),this.continueResolving&&this.startResolutionWithBackoff()},this.minTimeBetweenResolutionsMs)).unref)===null||e===void 0?void 0:e.call(t),this.isNextResolutionTimerRunning=!0}stopNextResolutionTimer(){clearTimeout(this.nextResolutionTimer),this.isNextResolutionTimerRunning=!1}startResolutionWithBackoff(){this.pendingLookupPromise===null&&(this.continueResolving=!1,this.backoff.runOnce(),this.startNextResolutionTimer(),this.startResolution())}updateResolution(){this.pendingLookupPromise===null&&(this.isNextResolutionTimerRunning||this.backoff.isRunning()?(this.isNextResolutionTimerRunning?ml('resolution update delayed by "min time between resolutions" rate limit'):ml("resolution update delayed by backoff timer until "+this.backoff.getEndTime().toISOString()),this.continueResolving=!0):this.startResolutionWithBackoff())}destroy(){this.continueResolving=!1,this.backoff.reset(),this.backoff.stop(),this.stopNextResolutionTimer(),this.pendingLookupPromise=null,this.pendingTxtPromise=null,this.latestLookupResult=null,this.latestServiceConfig=null,this.latestServiceConfigError=null,this.returnedIpResult=!1}static getDefaultAuthority(t){return t.path}};function Kie(){(0,dV.registerResolver)("dns",VE),(0,dV.registerDefaultScheme)("dns")}fl.setup=Kie});var jE=G(oh=>{"use strict";Object.defineProperty(oh,"__esModule",{value:!0});oh.getProxiedConnection=oh.mapProxyName=void 0;var Np=Ti(),rh=Mt(),Yie=to(),Qie=Be("http"),Xie=Be("tls"),Zie=Ti(),fV=no(),sh=Tr(),Jie=Be("url"),ene=zE(),tne="proxy";function pl(i){Zie.trace(rh.LogVerbosity.DEBUG,tne,i)}function ine(){let i="",t="";if(process.env.grpc_proxy)t="grpc_proxy",i=process.env.grpc_proxy;else if(process.env.https_proxy)t="https_proxy",i=process.env.https_proxy;else if(process.env.http_proxy)t="http_proxy",i=process.env.http_proxy;else return{};let e;try{e=new Jie.URL(i)}catch{return(0,Np.log)(rh.LogVerbosity.ERROR,`cannot parse value of "${t}" env var`),{}}if(e.protocol!=="http:")return(0,Np.log)(rh.LogVerbosity.ERROR,`"${e.protocol}" scheme not supported in proxy URI`),{};let n=null;e.username&&(e.password?((0,Np.log)(rh.LogVerbosity.INFO,"userinfo found in proxy URI"),n=`${e.username}:${e.password}`):n=e.username);let r=e.hostname,s=e.port;s===""&&(s="80");let o={address:`${r}:${s}`};return n&&(o.creds=n),pl("Proxy server "+o.address+" set by environment variable "+t),o}function nne(){let i=process.env.no_grpc_proxy,t="no_grpc_proxy";return i||(i=process.env.no_proxy,t="no_proxy"),i?(pl("No proxy server list set by environment variable "+t),i.split(",")):[]}function rne(i,t){var e;let n={target:i,extraOptions:{}};if(((e=t["grpc.enable_http_proxy"])!==null&&e!==void 0?e:1)===0||i.scheme==="unix")return n;let r=ine();if(!r.address)return n;let s=(0,sh.splitHostPort)(i.path);if(!s)return n;let o=s.host;for(let l of nne())if(l===o)return pl("Not using proxy for target in no_proxy list: "+(0,sh.uriToString)(i)),n;let a={"grpc.http_connect_target":(0,sh.uriToString)(i)};return r.creds&&(a["grpc.http_connect_creds"]=r.creds),{target:{scheme:"dns",path:r.address},extraOptions:a}}oh.mapProxyName=rne;function sne(i,t,e){var n;if(!("grpc.http_connect_target"in t))return Promise.resolve({});let r=t["grpc.http_connect_target"],s=(0,sh.parseUri)(r);if(s===null)return Promise.resolve({});let o=(0,sh.splitHostPort)(s.path);if(o===null)return Promise.resolve({});let a=`${o.host}:${(n=o.port)!==null&&n!==void 0?n:ene.DEFAULT_PORT}`,l={method:"CONNECT",path:a},c={Host:a};(0,fV.isTcpSubchannelAddress)(i)?(l.host=i.host,l.port=i.port):l.socketPath=i.path,"grpc.http_connect_creds"in t&&(c["Proxy-Authorization"]="Basic "+Buffer.from(t["grpc.http_connect_creds"]).toString("base64")),l.headers=c;let d=(0,fV.subchannelAddressToString)(i);return pl("Using proxy "+d+" to connect to "+l.path),new Promise((u,h)=>{let m=Qie.request(l);m.once("connect",(_,b,v)=>{var I;if(m.removeAllListeners(),b.removeAllListeners(),_.statusCode===200)if(pl("Successfully connected to "+l.path+" through proxy "+d),"secureContext"in e){let A=(0,Yie.getDefaultAuthority)(s),F=(0,sh.splitHostPort)(A),M=(I=F?.host)!==null&&I!==void 0?I:A,L=Xie.connect(Object.assign({host:M,servername:M,socket:b},e),()=>{pl("Successfully established a TLS connection to "+l.path+" through proxy "+d),u({socket:L,realTarget:s})});L.on("error",U=>{pl("Failed to establish a TLS connection to "+l.path+" through proxy "+d+" with error "+U.message),h()})}else pl("Successfully established a plaintext connection to "+l.path+" through proxy "+d),u({socket:b,realTarget:s});else(0,Np.log)(rh.LogVerbosity.ERROR,"Failed to connect to "+l.path+" through proxy "+d+" with status "+_.statusCode),h()}),m.once("error",_=>{m.removeAllListeners(),(0,Np.log)(rh.LogVerbosity.ERROR,"Failed to connect to proxy "+d+" with error "+_.message),h()}),m.end()})}oh.getProxiedConnection=sne});var HE=G(bv=>{"use strict";Object.defineProperty(bv,"__esModule",{value:!0});bv.StreamDecoder=void 0;var aa=function(i){return i[i.NO_DATA=0]="NO_DATA",i[i.READING_SIZE=1]="READING_SIZE",i[i.READING_MESSAGE=2]="READING_MESSAGE",i}(aa||{}),UE=class{constructor(t){this.maxReadMessageLength=t,this.readState=aa.NO_DATA,this.readCompressFlag=Buffer.alloc(1),this.readPartialSize=Buffer.alloc(4),this.readSizeRemaining=4,this.readMessageSize=0,this.readPartialMessage=[],this.readMessageRemaining=0}write(t){let e=0,n,r=[];for(;e<t.length;)switch(this.readState){case aa.NO_DATA:this.readCompressFlag=t.slice(e,e+1),e+=1,this.readState=aa.READING_SIZE,this.readPartialSize.fill(0),this.readSizeRemaining=4,this.readMessageSize=0,this.readMessageRemaining=0,this.readPartialMessage=[];break;case aa.READING_SIZE:if(n=Math.min(t.length-e,this.readSizeRemaining),t.copy(this.readPartialSize,4-this.readSizeRemaining,e,e+n),this.readSizeRemaining-=n,e+=n,this.readSizeRemaining===0){if(this.readMessageSize=this.readPartialSize.readUInt32BE(0),this.maxReadMessageLength!==-1&&this.readMessageSize>this.maxReadMessageLength)throw new Error(`Received message larger than max (${this.readMessageSize} vs ${this.maxReadMessageLength})`);if(this.readMessageRemaining=this.readMessageSize,this.readMessageRemaining>0)this.readState=aa.READING_MESSAGE;else{let s=Buffer.concat([this.readCompressFlag,this.readPartialSize],5);this.readState=aa.NO_DATA,r.push(s)}}break;case aa.READING_MESSAGE:if(n=Math.min(t.length-e,this.readMessageRemaining),this.readPartialMessage.push(t.slice(e,e+n)),this.readMessageRemaining-=n,e+=n,this.readMessageRemaining===0){let s=[this.readCompressFlag,this.readPartialSize].concat(this.readPartialMessage),o=Buffer.concat(s,this.readMessageSize+5);this.readState=aa.NO_DATA,r.push(o)}break;default:throw new Error("Unexpected read state")}return r}};bv.StreamDecoder=UE});var pV=G(vv=>{"use strict";Object.defineProperty(vv,"__esModule",{value:!0});vv.Http2SubchannelCall=void 0;var la=Be("http2"),one=Be("os"),Vt=Mt(),gl=lr(),ane=HE(),lne=Ti(),cne=Mt(),dne="subchannel_call";function une(i){for(let[t,e]of Object.entries(one.constants.errno))if(e===i)return t;return"Unknown system error "+i}var qE=class{constructor(t,e,n,r,s){var o;this.http2Stream=t,this.callEventTracker=e,this.listener=n,this.transport=r,this.callId=s,this.isReadFilterPending=!1,this.isPushPending=!1,this.canPush=!1,this.readsClosed=!1,this.statusOutput=!1,this.unpushedReadMessages=[],this.mappedStatusCode=Vt.Status.UNKNOWN,this.finalStatus=null,this.internalError=null;let a=(o=r.getOptions()["grpc.max_receive_message_length"])!==null&&o!==void 0?o:Vt.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH;this.decoder=new ane.StreamDecoder(a),t.on("response",(l,c)=>{let d="";for(let u of Object.keys(l))d+="		"+u+": "+l[u]+`
`;switch(this.trace(`Received server headers:
`+d),l[":status"]){case 400:this.mappedStatusCode=Vt.Status.INTERNAL;break;case 401:this.mappedStatusCode=Vt.Status.UNAUTHENTICATED;break;case 403:this.mappedStatusCode=Vt.Status.PERMISSION_DENIED;break;case 404:this.mappedStatusCode=Vt.Status.UNIMPLEMENTED;break;case 429:case 502:case 503:case 504:this.mappedStatusCode=Vt.Status.UNAVAILABLE;break;default:this.mappedStatusCode=Vt.Status.UNKNOWN}if(c&la.constants.NGHTTP2_FLAG_END_STREAM)this.handleTrailers(l);else{let u;try{u=gl.Metadata.fromHttp2Headers(l)}catch(h){this.endCall({code:Vt.Status.UNKNOWN,details:h.message,metadata:new gl.Metadata});return}this.listener.onReceiveMetadata(u)}}),t.on("trailers",l=>{this.handleTrailers(l)}),t.on("data",l=>{if(this.statusOutput)return;this.trace("receive HTTP/2 data frame of length "+l.length);let c;try{c=this.decoder.write(l)}catch(d){this.cancelWithStatus(Vt.Status.RESOURCE_EXHAUSTED,d.message);return}for(let d of c)this.trace("parsed message of length "+d.length),this.callEventTracker.addMessageReceived(),this.tryPush(d)}),t.on("end",()=>{this.readsClosed=!0,this.maybeOutputStatus()}),t.on("close",()=>{process.nextTick(()=>{var l;if(this.trace("HTTP/2 stream closed with code "+t.rstCode),((l=this.finalStatus)===null||l===void 0?void 0:l.code)===Vt.Status.OK)return;let c,d="";switch(t.rstCode){case la.constants.NGHTTP2_NO_ERROR:if(this.finalStatus!==null)return;c=Vt.Status.INTERNAL,d=`Received RST_STREAM with code ${t.rstCode}`;break;case la.constants.NGHTTP2_REFUSED_STREAM:c=Vt.Status.UNAVAILABLE,d="Stream refused by server";break;case la.constants.NGHTTP2_CANCEL:c=Vt.Status.CANCELLED,d="Call cancelled";break;case la.constants.NGHTTP2_ENHANCE_YOUR_CALM:c=Vt.Status.RESOURCE_EXHAUSTED,d="Bandwidth exhausted or memory limit exceeded";break;case la.constants.NGHTTP2_INADEQUATE_SECURITY:c=Vt.Status.PERMISSION_DENIED,d="Protocol not secure enough";break;case la.constants.NGHTTP2_INTERNAL_ERROR:c=Vt.Status.INTERNAL,this.internalError===null?d=`Received RST_STREAM with code ${t.rstCode} (Internal server error)`:this.internalError.code==="ECONNRESET"||this.internalError.code==="ETIMEDOUT"?(c=Vt.Status.UNAVAILABLE,d=this.internalError.message):d=`Received RST_STREAM with code ${t.rstCode} triggered by internal client error: ${this.internalError.message}`;break;default:c=Vt.Status.INTERNAL,d=`Received RST_STREAM with code ${t.rstCode}`}this.endCall({code:c,details:d,metadata:new gl.Metadata,rstCode:t.rstCode})})}),t.on("error",l=>{l.code!=="ERR_HTTP2_STREAM_ERROR"&&(this.trace("Node error event: message="+l.message+" code="+l.code+" errno="+une(l.errno)+" syscall="+l.syscall),this.internalError=l),this.callEventTracker.onStreamEnd(!1)})}onDisconnect(){this.endCall({code:Vt.Status.UNAVAILABLE,details:"Connection dropped",metadata:new gl.Metadata})}outputStatus(){this.statusOutput||(this.statusOutput=!0,this.trace("ended with status: code="+this.finalStatus.code+' details="'+this.finalStatus.details+'"'),this.callEventTracker.onCallEnd(this.finalStatus),process.nextTick(()=>{this.listener.onReceiveStatus(this.finalStatus)}),this.http2Stream.resume())}trace(t){lne.trace(cne.LogVerbosity.DEBUG,dne,"["+this.callId+"] "+t)}endCall(t){(this.finalStatus===null||this.finalStatus.code===Vt.Status.OK)&&(this.finalStatus=t,this.maybeOutputStatus()),this.destroyHttp2Stream()}maybeOutputStatus(){this.finalStatus!==null&&(this.finalStatus.code!==Vt.Status.OK||this.readsClosed&&this.unpushedReadMessages.length===0&&!this.isReadFilterPending&&!this.isPushPending)&&this.outputStatus()}push(t){this.trace("pushing to reader message of length "+(t instanceof Buffer?t.length:null)),this.canPush=!1,this.isPushPending=!0,process.nextTick(()=>{this.isPushPending=!1,!this.statusOutput&&(this.listener.onReceiveMessage(t),this.maybeOutputStatus())})}tryPush(t){this.canPush?(this.http2Stream.pause(),this.push(t)):(this.trace("unpushedReadMessages.push message of length "+t.length),this.unpushedReadMessages.push(t))}handleTrailers(t){this.callEventTracker.onStreamEnd(!0);let e="";for(let l of Object.keys(t))e+="		"+l+": "+t[l]+`
`;this.trace(`Received server trailers:
`+e);let n;try{n=gl.Metadata.fromHttp2Headers(t)}catch{n=new gl.Metadata}let r=n.getMap(),s=this.mappedStatusCode;if(s===Vt.Status.UNKNOWN&&typeof r["grpc-status"]=="string"){let l=Number(r["grpc-status"]);l in Vt.Status&&(s=l,this.trace("received status code "+l+" from server")),n.remove("grpc-status")}let o="";if(typeof r["grpc-message"]=="string"){try{o=decodeURI(r["grpc-message"])}catch{o=r["grpc-message"]}n.remove("grpc-message"),this.trace('received status details string "'+o+'" from server')}let a={code:s,details:o,metadata:n};this.endCall(a)}destroyHttp2Stream(){var t;if(!this.http2Stream.destroyed){let e;((t=this.finalStatus)===null||t===void 0?void 0:t.code)===Vt.Status.OK?e=la.constants.NGHTTP2_NO_ERROR:e=la.constants.NGHTTP2_CANCEL,this.trace("close http2 stream with code "+e),this.http2Stream.close(e)}}cancelWithStatus(t,e){this.trace("cancelWithStatus code: "+t+' details: "'+e+'"'),this.endCall({code:t,details:e,metadata:new gl.Metadata})}getStatus(){return this.finalStatus}getPeer(){return this.transport.getPeerName()}getCallNumber(){return this.callId}startRead(){if(this.finalStatus!==null&&this.finalStatus.code!==Vt.Status.OK){this.readsClosed=!0,this.maybeOutputStatus();return}if(this.canPush=!0,this.unpushedReadMessages.length>0){let t=this.unpushedReadMessages.shift();this.push(t);return}this.http2Stream.resume()}sendMessageWithContext(t,e){this.trace("write() called with message of length "+e.length);let n=r=>{process.nextTick(()=>{var s;let o=Vt.Status.UNAVAILABLE;r?.code==="ERR_STREAM_WRITE_AFTER_END"&&(o=Vt.Status.INTERNAL),r&&this.cancelWithStatus(o,`Write error: ${r.message}`),(s=t.callback)===null||s===void 0||s.call(t)})};this.trace("sending data chunk of length "+e.length),this.callEventTracker.addMessageSent();try{this.http2Stream.write(e,n)}catch(r){this.endCall({code:Vt.Status.UNAVAILABLE,details:`Write failed with error ${r.message}`,metadata:new gl.Metadata})}}halfClose(){this.trace("end() called"),this.trace("calling end() on HTTP/2 stream"),this.http2Stream.end()}};vv.Http2SubchannelCall=qE});var WE=G(yv=>{"use strict";Object.defineProperty(yv,"__esModule",{value:!0});yv.getNextCallNumber=void 0;var hne=0;function mne(){return hne++}yv.getNextCallNumber=mne});var bV=G(wv=>{"use strict";Object.defineProperty(wv,"__esModule",{value:!0});wv.Http2SubchannelConnector=void 0;var QE=Be("http2"),gV=Be("tls"),GE=td(),Lp=Mt(),fne=jE(),lh=Ti(),_V=to(),xv=no(),ah=Tr(),pne=Be("net"),gne=pV(),_ne=WE(),$E="transport",bne="transport_flowctrl",vne=RS().version,{HTTP2_HEADER_AUTHORITY:yne,HTTP2_HEADER_CONTENT_TYPE:xne,HTTP2_HEADER_METHOD:wne,HTTP2_HEADER_PATH:Cne,HTTP2_HEADER_TE:Sne,HTTP2_HEADER_USER_AGENT:kne}=QE.constants,Ene=2e4,Tne=Buffer.from("too_many_pings","ascii"),KE=class{constructor(t,e,n,r){this.session=t,this.options=n,this.remoteName=r,this.keepaliveTimeMs=-1,this.keepaliveTimeoutMs=Ene,this.keepaliveTimerId=null,this.pendingSendKeepalivePing=!1,this.keepaliveTimeoutId=null,this.keepaliveWithoutCalls=!1,this.activeCalls=new Set,this.disconnectListeners=[],this.disconnectHandled=!1,this.channelzEnabled=!0,this.streamTracker=new GE.ChannelzCallTracker,this.keepalivesSent=0,this.messagesSent=0,this.messagesReceived=0,this.lastMessageSentTimestamp=null,this.lastMessageReceivedTimestamp=null,this.subchannelAddressString=(0,xv.subchannelAddressToString)(e),n["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,GE.registerChannelzSocket)(this.subchannelAddressString,()=>this.getChannelzInfo(),this.channelzEnabled),this.userAgent=[n["grpc.primary_user_agent"],`grpc-node-js/${vne}`,n["grpc.secondary_user_agent"]].filter(s=>s).join(" "),"grpc.keepalive_time_ms"in n&&(this.keepaliveTimeMs=n["grpc.keepalive_time_ms"]),"grpc.keepalive_timeout_ms"in n&&(this.keepaliveTimeoutMs=n["grpc.keepalive_timeout_ms"]),"grpc.keepalive_permit_without_calls"in n?this.keepaliveWithoutCalls=n["grpc.keepalive_permit_without_calls"]===1:this.keepaliveWithoutCalls=!1,t.once("close",()=>{this.trace("session closed"),this.stopKeepalivePings(),this.handleDisconnect()}),t.once("goaway",(s,o,a)=>{let l=!1;s===QE.constants.NGHTTP2_ENHANCE_YOUR_CALM&&a&&a.equals(Tne)&&(l=!0),this.trace("connection closed by GOAWAY with code "+s+" and data "+a?.toString()),this.reportDisconnectToOwner(l)}),t.once("error",s=>{this.trace("connection closed with error "+s.message)}),lh.isTracerEnabled($E)&&(t.on("remoteSettings",s=>{this.trace("new settings received"+(this.session!==t?" on the old connection":"")+": "+JSON.stringify(s))}),t.on("localSettings",s=>{this.trace("local settings acknowledged by remote"+(this.session!==t?" on the old connection":"")+": "+JSON.stringify(s))})),this.keepaliveWithoutCalls&&this.maybeStartKeepalivePingTimer()}getChannelzInfo(){var t,e,n;let r=this.session.socket,s=r.remoteAddress?(0,xv.stringToSubchannelAddress)(r.remoteAddress,r.remotePort):null,o=r.localAddress?(0,xv.stringToSubchannelAddress)(r.localAddress,r.localPort):null,a;if(this.session.encrypted){let c=r,d=c.getCipher(),u=c.getCertificate(),h=c.getPeerCertificate();a={cipherSuiteStandardName:(t=d.standardName)!==null&&t!==void 0?t:null,cipherSuiteOtherName:d.standardName?null:d.name,localCertificate:u&&"raw"in u?u.raw:null,remoteCertificate:h&&"raw"in h?h.raw:null}}else a=null;return{remoteAddress:s,localAddress:o,security:a,remoteName:this.remoteName,streamsStarted:this.streamTracker.callsStarted,streamsSucceeded:this.streamTracker.callsSucceeded,streamsFailed:this.streamTracker.callsFailed,messagesSent:this.messagesSent,messagesReceived:this.messagesReceived,keepAlivesSent:this.keepalivesSent,lastLocalStreamCreatedTimestamp:this.streamTracker.lastCallStartedTimestamp,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:this.lastMessageSentTimestamp,lastMessageReceivedTimestamp:this.lastMessageReceivedTimestamp,localFlowControlWindow:(e=this.session.state.localWindowSize)!==null&&e!==void 0?e:null,remoteFlowControlWindow:(n=this.session.state.remoteWindowSize)!==null&&n!==void 0?n:null}}trace(t){lh.trace(Lp.LogVerbosity.DEBUG,$E,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+t)}keepaliveTrace(t){lh.trace(Lp.LogVerbosity.DEBUG,"keepalive","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+t)}flowControlTrace(t){lh.trace(Lp.LogVerbosity.DEBUG,bne,"("+this.channelzRef.id+") "+this.subchannelAddressString+" "+t)}internalsTrace(t){lh.trace(Lp.LogVerbosity.DEBUG,"transport_internals","("+this.channelzRef.id+") "+this.subchannelAddressString+" "+t)}reportDisconnectToOwner(t){this.disconnectHandled||(this.disconnectHandled=!0,this.disconnectListeners.forEach(e=>e(t)))}handleDisconnect(){this.reportDisconnectToOwner(!1),setImmediate(()=>{for(let t of this.activeCalls)t.onDisconnect()})}addDisconnectListener(t){this.disconnectListeners.push(t)}clearKeepaliveTimer(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null)}clearKeepaliveTimeout(){this.keepaliveTimeoutId&&(clearTimeout(this.keepaliveTimeoutId),this.keepaliveTimeoutId=null)}canSendPing(){return this.keepaliveTimeMs>0&&(this.keepaliveWithoutCalls||this.activeCalls.size>0)}maybeSendPing(){var t,e;if(this.clearKeepaliveTimer(),!this.canSendPing()){this.pendingSendKeepalivePing=!0;return}this.channelzEnabled&&(this.keepalivesSent+=1),this.keepaliveTrace("Sending ping with timeout "+this.keepaliveTimeoutMs+"ms"),this.keepaliveTimeoutId||(this.keepaliveTimeoutId=setTimeout(()=>{this.keepaliveTrace("Ping timeout passed without response"),this.handleDisconnect()},this.keepaliveTimeoutMs),(e=(t=this.keepaliveTimeoutId).unref)===null||e===void 0||e.call(t));try{this.session.ping((n,r,s)=>{n&&(this.keepaliveTrace("Ping failed with error "+n.message),this.handleDisconnect()),this.keepaliveTrace("Received ping response"),this.clearKeepaliveTimeout(),this.maybeStartKeepalivePingTimer()})}catch{this.handleDisconnect()}}maybeStartKeepalivePingTimer(){var t,e;this.canSendPing()&&(this.pendingSendKeepalivePing?(this.pendingSendKeepalivePing=!1,this.maybeSendPing()):!this.keepaliveTimerId&&!this.keepaliveTimeoutId&&(this.keepaliveTrace("Starting keepalive timer for "+this.keepaliveTimeMs+"ms"),this.keepaliveTimerId=(e=(t=setTimeout(()=>{this.maybeSendPing()},this.keepaliveTimeMs)).unref)===null||e===void 0?void 0:e.call(t)))}stopKeepalivePings(){this.keepaliveTimerId&&(clearTimeout(this.keepaliveTimerId),this.keepaliveTimerId=null),this.clearKeepaliveTimeout()}removeActiveCall(t){this.activeCalls.delete(t),this.activeCalls.size===0&&this.session.unref()}addActiveCall(t){this.activeCalls.add(t),this.activeCalls.size===1&&(this.session.ref(),this.keepaliveWithoutCalls||this.maybeStartKeepalivePingTimer())}createCall(t,e,n,r,s){let o=t.toHttp2Headers();o[yne]=e,o[kne]=this.userAgent,o[xne]="application/grpc",o[wne]="POST",o[Cne]=n,o[Sne]="trailers";let a;try{a=this.session.request(o)}catch(d){throw this.handleDisconnect(),d}this.flowControlTrace("local window size: "+this.session.state.localWindowSize+" remote window size: "+this.session.state.remoteWindowSize),this.internalsTrace("session.closed="+this.session.closed+" session.destroyed="+this.session.destroyed+" session.socket.destroyed="+this.session.socket.destroyed);let l,c;return this.channelzEnabled?(this.streamTracker.addCallStarted(),l={addMessageSent:()=>{var d;this.messagesSent+=1,this.lastMessageSentTimestamp=new Date,(d=s.addMessageSent)===null||d===void 0||d.call(s)},addMessageReceived:()=>{var d;this.messagesReceived+=1,this.lastMessageReceivedTimestamp=new Date,(d=s.addMessageReceived)===null||d===void 0||d.call(s)},onCallEnd:d=>{var u;(u=s.onCallEnd)===null||u===void 0||u.call(s,d),this.removeActiveCall(c)},onStreamEnd:d=>{var u;d?this.streamTracker.addCallSucceeded():this.streamTracker.addCallFailed(),(u=s.onStreamEnd)===null||u===void 0||u.call(s,d)}}):l={addMessageSent:()=>{var d;(d=s.addMessageSent)===null||d===void 0||d.call(s)},addMessageReceived:()=>{var d;(d=s.addMessageReceived)===null||d===void 0||d.call(s)},onCallEnd:d=>{var u;(u=s.onCallEnd)===null||u===void 0||u.call(s,d),this.removeActiveCall(c)},onStreamEnd:d=>{var u;(u=s.onStreamEnd)===null||u===void 0||u.call(s,d)}},c=new gne.Http2SubchannelCall(a,l,r,this,(0,_ne.getNextCallNumber)()),this.addActiveCall(c),c}getChannelzRef(){return this.channelzRef}getPeerName(){return this.subchannelAddressString}getOptions(){return this.options}shutdown(){this.session.close(),(0,GE.unregisterChannelzRef)(this.channelzRef)}},YE=class{constructor(t){this.channelTarget=t,this.session=null,this.isShutdown=!1}trace(t){lh.trace(Lp.LogVerbosity.DEBUG,$E,(0,ah.uriToString)(this.channelTarget)+" "+t)}createSession(t,e,n,r){return this.isShutdown?Promise.reject():new Promise((s,o)=>{var a,l,c;let d;r.realTarget?(d=(0,ah.uriToString)(r.realTarget),this.trace("creating HTTP/2 session through proxy to "+(0,ah.uriToString)(r.realTarget))):(d=null,this.trace("creating HTTP/2 session to "+(0,xv.subchannelAddressToString)(t)));let u=(0,_V.getDefaultAuthority)((a=r.realTarget)!==null&&a!==void 0?a:this.channelTarget),h=e._getConnectionOptions()||{};h.maxSendHeaderBlockLength=Number.MAX_SAFE_INTEGER,"grpc-node.max_session_memory"in n?h.maxSessionMemory=n["grpc-node.max_session_memory"]:h.maxSessionMemory=Number.MAX_SAFE_INTEGER;let m="http://";if("secureContext"in h){if(m="https://",n["grpc.ssl_target_name_override"]){let v=n["grpc.ssl_target_name_override"];h.checkServerIdentity=(I,A)=>(0,gV.checkServerIdentity)(v,A),h.servername=v}else{let v=(c=(l=(0,ah.splitHostPort)(u))===null||l===void 0?void 0:l.host)!==null&&c!==void 0?c:"localhost";h.servername=v}r.socket&&(h.createConnection=(v,I)=>r.socket)}else h.createConnection=(v,I)=>r.socket?r.socket:pne.connect(t);h=Object.assign(Object.assign(Object.assign({},h),t),{enableTrace:n["grpc-node.tls_enable_trace"]===1});let _=QE.connect(m+u,h);this.session=_;let b="Failed to connect";_.unref(),_.once("connect",()=>{_.removeAllListeners(),s(new KE(_,t,n,d)),this.session=null}),_.once("close",()=>{this.session=null,setImmediate(()=>{o(`${b} (${new Date().toISOString()})`)})}),_.once("error",v=>{b=v.message,this.trace("connection failed with error "+b)})})}connect(t,e,n){var r,s;if(this.isShutdown)return Promise.reject();let o=e._getConnectionOptions()||{};if("secureContext"in o){if(o.ALPNProtocols=["h2"],n["grpc.ssl_target_name_override"]){let a=n["grpc.ssl_target_name_override"];o.checkServerIdentity=(l,c)=>(0,gV.checkServerIdentity)(a,c),o.servername=a}else if("grpc.http_connect_target"in n){let a=(0,_V.getDefaultAuthority)((r=(0,ah.parseUri)(n["grpc.http_connect_target"]))!==null&&r!==void 0?r:{path:"localhost"}),l=(0,ah.splitHostPort)(a);o.servername=(s=l?.host)!==null&&s!==void 0?s:a}n["grpc-node.tls_enable_trace"]&&(o.enableTrace=!0)}return(0,fne.getProxiedConnection)(t,n,o).then(a=>this.createSession(t,e,n,a))}shutdown(){var t;this.isShutdown=!0,(t=this.session)===null||t===void 0||t.close(),this.session=null}};wv.Http2SubchannelConnector=YE});var vV=G(ch=>{"use strict";Object.defineProperty(ch,"__esModule",{value:!0});ch.getSubchannelPool=ch.SubchannelPool=void 0;var Ine=o3(),Dne=cV(),Mne=no(),Ane=Tr(),One=bV(),Pne=1e4,Bp=class{constructor(){this.pool=Object.create(null),this.cleanupTimer=null}unrefUnusedSubchannels(){let t=!0;for(let e in this.pool){let r=this.pool[e].filter(s=>!s.subchannel.unrefIfOneRef());r.length>0&&(t=!1),this.pool[e]=r}t&&this.cleanupTimer!==null&&(clearInterval(this.cleanupTimer),this.cleanupTimer=null)}ensureCleanupTask(){var t,e;this.cleanupTimer===null&&(this.cleanupTimer=setInterval(()=>{this.unrefUnusedSubchannels()},Pne),(e=(t=this.cleanupTimer).unref)===null||e===void 0||e.call(t))}getOrCreateSubchannel(t,e,n,r){this.ensureCleanupTask();let s=(0,Ane.uriToString)(t);if(s in this.pool){let a=this.pool[s];for(let l of a)if((0,Mne.subchannelAddressEqual)(e,l.subchannelAddress)&&(0,Ine.channelOptionsEqual)(n,l.channelArguments)&&r._equals(l.channelCredentials))return l.subchannel}let o=new Dne.Subchannel(t,e,n,r,new One.Http2SubchannelConnector(t));return s in this.pool||(this.pool[s]=[]),this.pool[s].push({subchannelAddress:e,channelArguments:n,channelCredentials:r,subchannel:o}),o.ref(),o}};ch.SubchannelPool=Bp;var Rne=new Bp;function Fne(i){return i?Rne:new Bp}ch.getSubchannelPool=Fne});var ZE=G(dh=>{"use strict";Object.defineProperty(dh,"__esModule",{value:!0});dh.FilterStackFactory=dh.FilterStack=void 0;var Cv=class{constructor(t){this.filters=t}sendMetadata(t){let e=t;for(let n=0;n<this.filters.length;n++)e=this.filters[n].sendMetadata(e);return e}receiveMetadata(t){let e=t;for(let n=this.filters.length-1;n>=0;n--)e=this.filters[n].receiveMetadata(e);return e}sendMessage(t){let e=t;for(let n=0;n<this.filters.length;n++)e=this.filters[n].sendMessage(e);return e}receiveMessage(t){let e=t;for(let n=this.filters.length-1;n>=0;n--)e=this.filters[n].receiveMessage(e);return e}receiveTrailers(t){let e=t;for(let n=this.filters.length-1;n>=0;n--)e=this.filters[n].receiveTrailers(e);return e}push(t){this.filters.unshift(...t)}getFilters(){return this.filters}};dh.FilterStack=Cv;var XE=class i{constructor(t){this.factories=t}push(t){this.factories.unshift(...t)}clone(){return new i([...this.factories])}createFilter(){return new Cv(this.factories.map(t=>t.createFilter()))}};dh.FilterStackFactory=XE});var JE=G(Sv=>{"use strict";Object.defineProperty(Sv,"__esModule",{value:!0});Sv.CompressionAlgorithms=void 0;var yV=function(i){return i[i.identity=0]="identity",i[i.deflate=1]="deflate",i[i.gzip=2]="gzip",i}(yV||(Sv.CompressionAlgorithms=yV={}))});var tT=G(kv=>{"use strict";Object.defineProperty(kv,"__esModule",{value:!0});kv.BaseFilter=void 0;var eT=class{sendMetadata(t){return N(this,null,function*(){return t})}receiveMetadata(t){return t}sendMessage(t){return N(this,null,function*(){return t})}receiveMessage(t){return N(this,null,function*(){return t})}receiveTrailers(t){return t}};kv.BaseFilter=eT});var CV=G(hh=>{"use strict";Object.defineProperty(hh,"__esModule",{value:!0});hh.CompressionFilterFactory=hh.CompressionFilter=void 0;var Ev=Be("zlib"),wV=JE(),Tv=Mt(),Nne=tT(),Lne=Ti(),Bne=i=>typeof i=="number"&&typeof wV.CompressionAlgorithms[i]=="string",uh=class{writeMessage(t,e){return N(this,null,function*(){let n=t;e&&(n=yield this.compressMessage(n));let r=Buffer.allocUnsafe(n.length+5);return r.writeUInt8(e?1:0,0),r.writeUInt32BE(n.length,1),n.copy(r,5),r})}readMessage(t){return N(this,null,function*(){let e=t.readUInt8(0)===1,n=t.slice(5);return e&&(n=yield this.decompressMessage(n)),n})}},id=class extends uh{compressMessage(t){return N(this,null,function*(){return t})}writeMessage(t,e){return N(this,null,function*(){let n=Buffer.allocUnsafe(t.length+5);return n.writeUInt8(0,0),n.writeUInt32BE(t.length,1),t.copy(n,5),n})}decompressMessage(t){return Promise.reject(new Error('Received compressed message but "grpc-encoding" header was identity'))}},iT=class extends uh{constructor(t){super(),this.maxRecvMessageLength=t}compressMessage(t){return new Promise((e,n)=>{Ev.deflate(t,(r,s)=>{r?n(r):e(s)})})}decompressMessage(t){return new Promise((e,n)=>{let r=0,s=[],o=Ev.createInflate();o.on("data",a=>{s.push(a),r+=a.byteLength,this.maxRecvMessageLength!==-1&&r>this.maxRecvMessageLength&&(o.destroy(),n({code:Tv.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{e(Buffer.concat(s))}),o.write(t),o.end()})}},nT=class extends uh{constructor(t){super(),this.maxRecvMessageLength=t}compressMessage(t){return new Promise((e,n)=>{Ev.gzip(t,(r,s)=>{r?n(r):e(s)})})}decompressMessage(t){return new Promise((e,n)=>{let r=0,s=[],o=Ev.createGunzip();o.on("data",a=>{s.push(a),r+=a.byteLength,this.maxRecvMessageLength!==-1&&r>this.maxRecvMessageLength&&(o.destroy(),n({code:Tv.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxRecvMessageLength}`}))}),o.on("end",()=>{e(Buffer.concat(s))}),o.write(t),o.end()})}},rT=class extends uh{constructor(t){super(),this.compressionName=t}compressMessage(t){return Promise.reject(new Error(`Received message compressed with unsupported compression method ${this.compressionName}`))}decompressMessage(t){return Promise.reject(new Error(`Compression method not supported: ${this.compressionName}`))}};function xV(i,t){switch(i){case"identity":return new id;case"deflate":return new iT(t);case"gzip":return new nT(t);default:return new rT(i)}}var Iv=class extends Nne.BaseFilter{constructor(t,e){var n,r;super(),this.sharedFilterConfig=e,this.sendCompression=new id,this.receiveCompression=new id,this.currentCompressionAlgorithm="identity";let s=t["grpc.default_compression_algorithm"];if(this.maxReceiveMessageLength=(n=t["grpc.max_receive_message_length"])!==null&&n!==void 0?n:Tv.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,s!==void 0)if(Bne(s)){let o=wV.CompressionAlgorithms[s],a=(r=e.serverSupportedEncodingHeader)===null||r===void 0?void 0:r.split(",");(!a||a.includes(o))&&(this.currentCompressionAlgorithm=o,this.sendCompression=xV(this.currentCompressionAlgorithm,-1))}else Lne.log(Tv.LogVerbosity.ERROR,`Invalid value provided for grpc.default_compression_algorithm option: ${s}`)}sendMetadata(t){return N(this,null,function*(){let e=yield t;return e.set("grpc-accept-encoding","identity,deflate,gzip"),e.set("accept-encoding","identity"),this.currentCompressionAlgorithm==="identity"?e.remove("grpc-encoding"):e.set("grpc-encoding",this.currentCompressionAlgorithm),e})}receiveMetadata(t){let e=t.get("grpc-encoding");if(e.length>0){let r=e[0];typeof r=="string"&&(this.receiveCompression=xV(r,this.maxReceiveMessageLength))}t.remove("grpc-encoding");let n=t.get("grpc-accept-encoding")[0];return n&&(this.sharedFilterConfig.serverSupportedEncodingHeader=n,n.split(",").includes(this.currentCompressionAlgorithm)||(this.sendCompression=new id,this.currentCompressionAlgorithm="identity")),t.remove("grpc-accept-encoding"),t}sendMessage(t){return N(this,null,function*(){var e;let n=yield t,r;return this.sendCompression instanceof id?r=!1:r=(((e=n.flags)!==null&&e!==void 0?e:0)&2)===0,{message:yield this.sendCompression.writeMessage(n.message,r),flags:n.flags}})}receiveMessage(t){return N(this,null,function*(){return this.receiveCompression.readMessage(yield t)})}};hh.CompressionFilter=Iv;var sT=class{constructor(t,e){this.options=e,this.sharedFilterConfig={}}createFilter(){return new Iv(this.options,this.sharedFilterConfig)}};hh.CompressionFilterFactory=sT});var Dv=G(mo=>{"use strict";Object.defineProperty(mo,"__esModule",{value:!0});mo.deadlineToString=mo.getRelativeTimeout=mo.getDeadlineTimeoutString=mo.minDeadline=void 0;function Vne(...i){let t=1/0;for(let e of i){let n=e instanceof Date?e.getTime():e;n<t&&(t=n)}return t}mo.minDeadline=Vne;var zne=[["m",1],["S",1e3],["M",60*1e3],["H",60*60*1e3]];function jne(i){let t=new Date().getTime();i instanceof Date&&(i=i.getTime());let e=Math.max(i-t,0);for(let[n,r]of zne){let s=e/r;if(s<1e8)return String(Math.ceil(s))+n}throw new Error("Deadline is too far in the future")}mo.getDeadlineTimeoutString=jne;var Une=2147483647;function Hne(i){let t=i instanceof Date?i.getTime():i,e=new Date().getTime(),n=t-e;return n<0?0:n>Une?1/0:n}mo.getRelativeTimeout=Hne;function qne(i){if(i instanceof Date)return i.toISOString();{let t=new Date(i);return Number.isNaN(t.getTime())?""+i:t.toISOString()}}mo.deadlineToString=qne});var Av=G(Mv=>{"use strict";Object.defineProperty(Mv,"__esModule",{value:!0});Mv.restrictControlPlaneStatusCode=void 0;var fo=Mt(),Wne=[fo.Status.OK,fo.Status.INVALID_ARGUMENT,fo.Status.NOT_FOUND,fo.Status.ALREADY_EXISTS,fo.Status.FAILED_PRECONDITION,fo.Status.ABORTED,fo.Status.OUT_OF_RANGE,fo.Status.DATA_LOSS];function Gne(i,t){return Wne.includes(i)?{code:fo.Status.INTERNAL,details:`Invalid status from control plane: ${i} ${fo.Status[i]} ${t}`}:{code:i,details:t}}Mv.restrictControlPlaneStatusCode=Gne});var kV=G(Rv=>{"use strict";Object.defineProperty(Rv,"__esModule",{value:!0});Rv.LoadBalancingCall=void 0;var SV=Zr(),Ov=Mt(),$ne=Dv(),Pv=lr(),Vp=el(),Kne=Tr(),Yne=Ti(),oT=Av(),Qne=Be("http2"),Xne="load_balancing_call",aT=class{constructor(t,e,n,r,s,o,a){var l,c;this.channel=t,this.callConfig=e,this.methodName=n,this.host=r,this.credentials=s,this.deadline=o,this.callNumber=a,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.metadata=null,this.listener=null,this.onCallEnded=null;let d=this.methodName.split("/"),u="";d.length>=2&&(u=d[1]);let h=(c=(l=(0,Kne.splitHostPort)(this.host))===null||l===void 0?void 0:l.host)!==null&&c!==void 0?c:"localhost";this.serviceUrl=`https://${h}/${u}`}trace(t){Yne.trace(Ov.LogVerbosity.DEBUG,Xne,"["+this.callNumber+"] "+t)}outputStatus(t,e){var n,r;if(!this.ended){this.ended=!0,this.trace("ended with status: code="+t.code+' details="'+t.details+'"');let s=Object.assign(Object.assign({},t),{progress:e});(n=this.listener)===null||n===void 0||n.onReceiveStatus(s),(r=this.onCallEnded)===null||r===void 0||r.call(this,s.code)}}doPick(){var t,e;if(this.ended)return;if(!this.metadata)throw new Error("doPick called before start");this.trace("Pick called");let n=this.channel.doPick(this.metadata,this.callConfig.pickInformation),r=n.subchannel?"("+n.subchannel.getChannelzRef().id+") "+n.subchannel.getAddress():""+n.subchannel;switch(this.trace("Pick result: "+Vp.PickResultType[n.pickResultType]+" subchannel: "+r+" status: "+((t=n.status)===null||t===void 0?void 0:t.code)+" "+((e=n.status)===null||e===void 0?void 0:e.details)),n.pickResultType){case Vp.PickResultType.COMPLETE:this.credentials.generateMetadata({service_url:this.serviceUrl}).then(a=>{var l,c,d;if(this.ended){this.trace("Credentials metadata generation finished after call ended");return}let u=this.metadata.clone();if(u.merge(a),u.get("authorization").length>1&&this.outputStatus({code:Ov.Status.INTERNAL,details:'"authorization" metadata cannot have multiple values',metadata:new Pv.Metadata},"PROCESSED"),n.subchannel.getConnectivityState()!==SV.ConnectivityState.READY){this.trace("Picked subchannel "+r+" has state "+SV.ConnectivityState[n.subchannel.getConnectivityState()]+" after getting credentials metadata. Retrying pick"),this.doPick();return}this.deadline!==1/0&&u.set("grpc-timeout",(0,$ne.getDeadlineTimeoutString)(this.deadline));try{this.child=n.subchannel.getRealSubchannel().createCall(u,this.host,this.methodName,{onReceiveMetadata:h=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(h)},onReceiveMessage:h=>{this.trace("Received message"),this.listener.onReceiveMessage(h)},onReceiveStatus:h=>{this.trace("Received status"),h.rstCode===Qne.constants.NGHTTP2_REFUSED_STREAM?this.outputStatus(h,"REFUSED"):this.outputStatus(h,"PROCESSED")}})}catch(h){this.trace("Failed to start call on picked subchannel "+r+" with error "+h.message),this.outputStatus({code:Ov.Status.INTERNAL,details:"Failed to start HTTP/2 stream with error "+h.message,metadata:new Pv.Metadata},"NOT_STARTED");return}(c=(l=this.callConfig).onCommitted)===null||c===void 0||c.call(l),(d=n.onCallStarted)===null||d===void 0||d.call(n),this.onCallEnded=n.onCallEnded,this.trace("Created child call ["+this.child.getCallNumber()+"]"),this.readPending&&this.child.startRead(),this.pendingMessage&&this.child.sendMessageWithContext(this.pendingMessage.context,this.pendingMessage.message),this.pendingHalfClose&&this.child.halfClose()},a=>{let{code:l,details:c}=(0,oT.restrictControlPlaneStatusCode)(typeof a.code=="number"?a.code:Ov.Status.UNKNOWN,`Getting metadata from plugin failed with error: ${a.message}`);this.outputStatus({code:l,details:c,metadata:new Pv.Metadata},"PROCESSED")});break;case Vp.PickResultType.DROP:let{code:s,details:o}=(0,oT.restrictControlPlaneStatusCode)(n.status.code,n.status.details);setImmediate(()=>{this.outputStatus({code:s,details:o,metadata:n.status.metadata},"DROP")});break;case Vp.PickResultType.TRANSIENT_FAILURE:if(this.metadata.getOptions().waitForReady)this.channel.queueCallForPick(this);else{let{code:a,details:l}=(0,oT.restrictControlPlaneStatusCode)(n.status.code,n.status.details);setImmediate(()=>{this.outputStatus({code:a,details:l,metadata:n.status.metadata},"PROCESSED")})}break;case Vp.PickResultType.QUEUE:this.channel.queueCallForPick(this)}}cancelWithStatus(t,e){var n;this.trace("cancelWithStatus code: "+t+' details: "'+e+'"'),(n=this.child)===null||n===void 0||n.cancelWithStatus(t,e),this.outputStatus({code:t,details:e,metadata:new Pv.Metadata},"PROCESSED")}getPeer(){var t,e;return(e=(t=this.child)===null||t===void 0?void 0:t.getPeer())!==null&&e!==void 0?e:this.channel.getTarget()}start(t,e){this.trace("start called"),this.listener=e,this.metadata=t,this.doPick()}sendMessageWithContext(t,e){this.trace("write() called with message of length "+e.length),this.child?this.child.sendMessageWithContext(t,e):this.pendingMessage={context:t,message:e}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(t){throw new Error("Method not implemented.")}getCallNumber(){return this.callNumber}};Rv.LoadBalancingCall=aT});var TV=G(Nv=>{"use strict";Object.defineProperty(Nv,"__esModule",{value:!0});Nv.ResolvingCall=void 0;var mh=Mt(),Fv=Dv(),EV=lr(),Zne=Ti(),Jne=Av(),ere="resolving_call",lT=class{constructor(t,e,n,r,s,o){this.channel=t,this.method=e,this.filterStackFactory=r,this.credentials=s,this.callNumber=o,this.child=null,this.readPending=!1,this.pendingMessage=null,this.pendingHalfClose=!1,this.ended=!1,this.readFilterPending=!1,this.writeFilterPending=!1,this.pendingChildStatus=null,this.metadata=null,this.listener=null,this.statusWatchers=[],this.deadlineTimer=setTimeout(()=>{},0),this.filterStack=null,this.deadline=n.deadline,this.host=n.host,n.parentCall&&(n.flags&mh.Propagate.CANCELLATION&&n.parentCall.on("cancelled",()=>{this.cancelWithStatus(mh.Status.CANCELLED,"Cancelled by parent call")}),n.flags&mh.Propagate.DEADLINE&&(this.trace("Propagating deadline from parent: "+n.parentCall.getDeadline()),this.deadline=(0,Fv.minDeadline)(this.deadline,n.parentCall.getDeadline()))),this.trace("Created"),this.runDeadlineTimer()}trace(t){Zne.trace(mh.LogVerbosity.DEBUG,ere,"["+this.callNumber+"] "+t)}runDeadlineTimer(){clearTimeout(this.deadlineTimer),this.trace("Deadline: "+(0,Fv.deadlineToString)(this.deadline));let t=(0,Fv.getRelativeTimeout)(this.deadline);if(t!==1/0){this.trace("Deadline will be reached in "+t+"ms");let e=()=>{this.cancelWithStatus(mh.Status.DEADLINE_EXCEEDED,"Deadline exceeded")};t<=0?process.nextTick(e):this.deadlineTimer=setTimeout(e,t)}}outputStatus(t){if(!this.ended){this.ended=!0,this.filterStack||(this.filterStack=this.filterStackFactory.createFilter()),clearTimeout(this.deadlineTimer);let e=this.filterStack.receiveTrailers(t);this.trace("ended with status: code="+e.code+' details="'+e.details+'"'),this.statusWatchers.forEach(n=>n(e)),process.nextTick(()=>{var n;(n=this.listener)===null||n===void 0||n.onReceiveStatus(e)})}}sendMessageOnChild(t,e){if(!this.child)throw new Error("sendMessageonChild called with child not populated");let n=this.child;this.writeFilterPending=!0,this.filterStack.sendMessage(Promise.resolve({message:e,flags:t.flags})).then(r=>{this.writeFilterPending=!1,n.sendMessageWithContext(t,r.message),this.pendingHalfClose&&n.halfClose()},r=>{this.cancelWithStatus(r.code,r.details)})}getConfig(){if(this.ended)return;if(!this.metadata||!this.listener)throw new Error("getConfig called before start");let t=this.channel.getConfig(this.method,this.metadata);if(t.type==="NONE"){this.channel.queueCallForConfig(this);return}else if(t.type==="ERROR"){this.metadata.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(t.error);return}let e=t.config;if(e.status!==mh.Status.OK){let{code:n,details:r}=(0,Jne.restrictControlPlaneStatusCode)(e.status,"Failed to route call to method "+this.method);this.outputStatus({code:n,details:r,metadata:new EV.Metadata});return}if(e.methodConfig.timeout){let n=new Date;n.setSeconds(n.getSeconds()+e.methodConfig.timeout.seconds),n.setMilliseconds(n.getMilliseconds()+e.methodConfig.timeout.nanos/1e6),this.deadline=(0,Fv.minDeadline)(this.deadline,n),this.runDeadlineTimer()}this.filterStackFactory.push(e.dynamicFilterFactories),this.filterStack=this.filterStackFactory.createFilter(),this.filterStack.sendMetadata(Promise.resolve(this.metadata)).then(n=>{this.child=this.channel.createInnerCall(e,this.method,this.host,this.credentials,this.deadline),this.trace("Created child ["+this.child.getCallNumber()+"]"),this.child.start(n,{onReceiveMetadata:r=>{this.trace("Received metadata"),this.listener.onReceiveMetadata(this.filterStack.receiveMetadata(r))},onReceiveMessage:r=>{this.trace("Received message"),this.readFilterPending=!0,this.filterStack.receiveMessage(r).then(s=>{this.trace("Finished filtering received message"),this.readFilterPending=!1,this.listener.onReceiveMessage(s),this.pendingChildStatus&&this.outputStatus(this.pendingChildStatus)},s=>{this.cancelWithStatus(s.code,s.details)})},onReceiveStatus:r=>{this.trace("Received status"),this.readFilterPending?this.pendingChildStatus=r:this.outputStatus(r)}}),this.readPending&&this.child.startRead(),this.pendingMessage?this.sendMessageOnChild(this.pendingMessage.context,this.pendingMessage.message):this.pendingHalfClose&&this.child.halfClose()},n=>{this.outputStatus(n)})}reportResolverError(t){var e;!((e=this.metadata)===null||e===void 0)&&e.getOptions().waitForReady?this.channel.queueCallForConfig(this):this.outputStatus(t)}cancelWithStatus(t,e){var n;this.trace("cancelWithStatus code: "+t+' details: "'+e+'"'),(n=this.child)===null||n===void 0||n.cancelWithStatus(t,e),this.outputStatus({code:t,details:e,metadata:new EV.Metadata})}getPeer(){var t,e;return(e=(t=this.child)===null||t===void 0?void 0:t.getPeer())!==null&&e!==void 0?e:this.channel.getTarget()}start(t,e){this.trace("start called"),this.metadata=t.clone(),this.listener=e,this.getConfig()}sendMessageWithContext(t,e){this.trace("write() called with message of length "+e.length),this.child?this.sendMessageOnChild(t,e):this.pendingMessage={context:t,message:e}}startRead(){this.trace("startRead called"),this.child?this.child.startRead():this.readPending=!0}halfClose(){this.trace("halfClose called"),this.child&&!this.writeFilterPending?this.child.halfClose():this.pendingHalfClose=!0}setCredentials(t){this.credentials=this.credentials.compose(t)}addStatusWatcher(t){this.statusWatchers.push(t)}getCallNumber(){return this.callNumber}};Nv.ResolvingCall=lT});var IV=G(_l=>{"use strict";Object.defineProperty(_l,"__esModule",{value:!0});_l.RetryingCall=_l.MessageBufferTracker=_l.RetryThrottler=void 0;var Lv=Mt(),tre=lr(),ire=Ti(),nre="retrying_call",dT=class{constructor(t,e,n){this.maxTokens=t,this.tokenRatio=e,n?this.tokens=n.tokens*(t/n.maxTokens):this.tokens=t}addCallSucceeded(){this.tokens=Math.max(this.tokens+this.tokenRatio,this.maxTokens)}addCallFailed(){this.tokens=Math.min(this.tokens-1,0)}canRetryCall(){return this.tokens>this.maxTokens/2}};_l.RetryThrottler=dT;var uT=class{constructor(t,e){this.totalLimit=t,this.limitPerCall=e,this.totalAllocated=0,this.allocatedPerCall=new Map}allocate(t,e){var n;let r=(n=this.allocatedPerCall.get(e))!==null&&n!==void 0?n:0;return this.limitPerCall-r<t||this.totalLimit-this.totalAllocated<t?!1:(this.allocatedPerCall.set(e,r+t),this.totalAllocated+=t,!0)}free(t,e){var n;if(this.totalAllocated<t)throw new Error(`Invalid buffer allocation state: call ${e} freed ${t} > total allocated ${this.totalAllocated}`);this.totalAllocated-=t;let r=(n=this.allocatedPerCall.get(e))!==null&&n!==void 0?n:0;if(r<t)throw new Error(`Invalid buffer allocation state: call ${e} freed ${t} > allocated for call ${r}`);this.allocatedPerCall.set(e,r-t)}freeAll(t){var e;let n=(e=this.allocatedPerCall.get(t))!==null&&e!==void 0?e:0;if(this.totalAllocated<n)throw new Error(`Invalid buffer allocation state: call ${t} allocated ${n} > total allocated ${this.totalAllocated}`);this.totalAllocated-=n,this.allocatedPerCall.delete(t)}};_l.MessageBufferTracker=uT;var cT="grpc-previous-rpc-attempts",hT=class{constructor(t,e,n,r,s,o,a,l,c){if(this.channel=t,this.callConfig=e,this.methodName=n,this.host=r,this.credentials=s,this.deadline=o,this.callNumber=a,this.bufferTracker=l,this.retryThrottler=c,this.listener=null,this.initialMetadata=null,this.underlyingCalls=[],this.writeBuffer=[],this.writeBufferOffset=0,this.readStarted=!1,this.transparentRetryUsed=!1,this.attempts=0,this.hedgingTimer=null,this.committedCallIndex=null,this.initialRetryBackoffSec=0,this.nextRetryBackoffSec=0,e.methodConfig.retryPolicy){this.state="RETRY";let d=e.methodConfig.retryPolicy;this.nextRetryBackoffSec=this.initialRetryBackoffSec=Number(d.initialBackoff.substring(0,d.initialBackoff.length-1))}else e.methodConfig.hedgingPolicy?this.state="HEDGING":this.state="TRANSPARENT_ONLY"}getCallNumber(){return this.callNumber}trace(t){ire.trace(Lv.LogVerbosity.DEBUG,nre,"["+this.callNumber+"] "+t)}reportStatus(t){this.trace("ended with status: code="+t.code+' details="'+t.details+'"'),this.bufferTracker.freeAll(this.callNumber),this.writeBufferOffset=this.writeBufferOffset+this.writeBuffer.length,this.writeBuffer=[],process.nextTick(()=>{var e;(e=this.listener)===null||e===void 0||e.onReceiveStatus({code:t.code,details:t.details,metadata:t.metadata})})}cancelWithStatus(t,e){this.trace("cancelWithStatus code: "+t+' details: "'+e+'"'),this.reportStatus({code:t,details:e,metadata:new tre.Metadata});for(let{call:n}of this.underlyingCalls)n.cancelWithStatus(t,e)}getPeer(){return this.committedCallIndex!==null?this.underlyingCalls[this.committedCallIndex].call.getPeer():"unknown"}getBufferEntry(t){var e;return(e=this.writeBuffer[t-this.writeBufferOffset])!==null&&e!==void 0?e:{entryType:"FREED",allocated:!1}}getNextBufferIndex(){return this.writeBufferOffset+this.writeBuffer.length}clearSentMessages(){if(this.state!=="COMMITTED")return;let t=this.underlyingCalls[this.committedCallIndex].nextMessageToSend;for(let e=this.writeBufferOffset;e<t;e++){let n=this.getBufferEntry(e);n.allocated&&this.bufferTracker.free(n.message.message.length,this.callNumber)}this.writeBuffer=this.writeBuffer.slice(t-this.writeBufferOffset),this.writeBufferOffset=t}commitCall(t){if(this.state!=="COMMITTED"&&this.underlyingCalls[t].state!=="COMPLETED"){this.trace("Committing call ["+this.underlyingCalls[t].call.getCallNumber()+"] at index "+t),this.state="COMMITTED",this.committedCallIndex=t;for(let e=0;e<this.underlyingCalls.length;e++)e!==t&&this.underlyingCalls[e].state!=="COMPLETED"&&(this.underlyingCalls[e].state="COMPLETED",this.underlyingCalls[e].call.cancelWithStatus(Lv.Status.CANCELLED,"Discarded in favor of other hedged attempt"));this.clearSentMessages()}}commitCallWithMostMessages(){if(this.state==="COMMITTED")return;let t=-1,e=-1;for(let[n,r]of this.underlyingCalls.entries())r.state==="ACTIVE"&&r.nextMessageToSend>t&&(t=r.nextMessageToSend,e=n);e===-1?this.state="TRANSPARENT_ONLY":this.commitCall(e)}isStatusCodeInList(t,e){return t.some(n=>n===e||n.toString().toLowerCase()===Lv.Status[e].toLowerCase())}getNextRetryBackoffMs(){var t;let e=(t=this.callConfig)===null||t===void 0?void 0:t.methodConfig.retryPolicy;if(!e)return 0;let n=Math.random()*this.nextRetryBackoffSec*1e3,r=Number(e.maxBackoff.substring(0,e.maxBackoff.length-1));return this.nextRetryBackoffSec=Math.min(this.nextRetryBackoffSec*e.backoffMultiplier,r),n}maybeRetryCall(t,e){if(this.state!=="RETRY"){e(!1);return}let n=this.callConfig.methodConfig.retryPolicy;if(this.attempts>=Math.min(n.maxAttempts,5)){e(!1);return}let r;if(t===null)r=this.getNextRetryBackoffMs();else if(t<0){this.state="TRANSPARENT_ONLY",e(!1);return}else r=t,this.nextRetryBackoffSec=this.initialRetryBackoffSec;setTimeout(()=>{var s,o;if(this.state!=="RETRY"){e(!1);return}(!((o=(s=this.retryThrottler)===null||s===void 0?void 0:s.canRetryCall())!==null&&o!==void 0)||o)&&(e(!0),this.attempts+=1,this.startNewAttempt())},r)}countActiveCalls(){let t=0;for(let e of this.underlyingCalls)e?.state==="ACTIVE"&&(t+=1);return t}handleProcessedStatus(t,e,n){var r,s,o;switch(this.state){case"COMMITTED":case"TRANSPARENT_ONLY":this.commitCall(e),this.reportStatus(t);break;case"HEDGING":if(this.isStatusCodeInList((r=this.callConfig.methodConfig.hedgingPolicy.nonFatalStatusCodes)!==null&&r!==void 0?r:[],t.code)){(s=this.retryThrottler)===null||s===void 0||s.addCallFailed();let a;if(n===null)a=0;else if(n<0){this.state="TRANSPARENT_ONLY",this.commitCall(e),this.reportStatus(t);return}else a=n;setTimeout(()=>{this.maybeStartHedgingAttempt(),this.countActiveCalls()===0&&(this.commitCall(e),this.reportStatus(t))},a)}else this.commitCall(e),this.reportStatus(t);break;case"RETRY":this.isStatusCodeInList(this.callConfig.methodConfig.retryPolicy.retryableStatusCodes,t.code)?((o=this.retryThrottler)===null||o===void 0||o.addCallFailed(),this.maybeRetryCall(n,a=>{a||(this.commitCall(e),this.reportStatus(t))})):(this.commitCall(e),this.reportStatus(t));break}}getPushback(t){let e=t.get("grpc-retry-pushback-ms");if(e.length===0)return null;try{return parseInt(e[0])}catch{return-1}}handleChildStatus(t,e){var n;if(this.underlyingCalls[e].state==="COMPLETED")return;if(this.trace("state="+this.state+" handling status with progress "+t.progress+" from child ["+this.underlyingCalls[e].call.getCallNumber()+"] in state "+this.underlyingCalls[e].state),this.underlyingCalls[e].state="COMPLETED",t.code===Lv.Status.OK){(n=this.retryThrottler)===null||n===void 0||n.addCallSucceeded(),this.commitCall(e),this.reportStatus(t);return}if(this.state==="COMMITTED"){this.reportStatus(t);return}let r=this.getPushback(t.metadata);switch(t.progress){case"NOT_STARTED":this.startNewAttempt();break;case"REFUSED":this.transparentRetryUsed?this.handleProcessedStatus(t,e,r):(this.transparentRetryUsed=!0,this.startNewAttempt());break;case"DROP":this.commitCall(e),this.reportStatus(t);break;case"PROCESSED":this.handleProcessedStatus(t,e,r);break}}maybeStartHedgingAttempt(){if(this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let t=this.callConfig.methodConfig.hedgingPolicy;this.attempts>=Math.min(t.maxAttempts,5)||(this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer())}maybeStartHedgingTimer(){var t,e,n;if(this.hedgingTimer&&clearTimeout(this.hedgingTimer),this.state!=="HEDGING"||!this.callConfig.methodConfig.hedgingPolicy)return;let r=this.callConfig.methodConfig.hedgingPolicy;if(this.attempts>=Math.min(r.maxAttempts,5))return;let s=(t=r.hedgingDelay)!==null&&t!==void 0?t:"0s",o=Number(s.substring(0,s.length-1));this.hedgingTimer=setTimeout(()=>{this.maybeStartHedgingAttempt()},o*1e3),(n=(e=this.hedgingTimer).unref)===null||n===void 0||n.call(e)}startNewAttempt(){let t=this.channel.createLoadBalancingCall(this.callConfig,this.methodName,this.host,this.credentials,this.deadline);this.trace("Created child call ["+t.getCallNumber()+"] for attempt "+this.attempts);let e=this.underlyingCalls.length;this.underlyingCalls.push({state:"ACTIVE",call:t,nextMessageToSend:0});let n=this.attempts-1,r=this.initialMetadata.clone();n>0&&r.set(cT,`${n}`);let s=!1;t.start(r,{onReceiveMetadata:o=>{this.trace("Received metadata from child ["+t.getCallNumber()+"]"),this.commitCall(e),s=!0,n>0&&o.set(cT,`${n}`),this.underlyingCalls[e].state==="ACTIVE"&&this.listener.onReceiveMetadata(o)},onReceiveMessage:o=>{this.trace("Received message from child ["+t.getCallNumber()+"]"),this.commitCall(e),this.underlyingCalls[e].state==="ACTIVE"&&this.listener.onReceiveMessage(o)},onReceiveStatus:o=>{this.trace("Received status from child ["+t.getCallNumber()+"]"),!s&&n>0&&o.metadata.set(cT,`${n}`),this.handleChildStatus(o,e)}}),this.sendNextChildMessage(e),this.readStarted&&t.startRead()}start(t,e){this.trace("start called"),this.listener=e,this.initialMetadata=t,this.attempts+=1,this.startNewAttempt(),this.maybeStartHedgingTimer()}handleChildWriteCompleted(t){var e,n;let r=this.underlyingCalls[t],s=r.nextMessageToSend;(n=(e=this.getBufferEntry(s)).callback)===null||n===void 0||n.call(e),this.clearSentMessages(),r.nextMessageToSend+=1,this.sendNextChildMessage(t)}sendNextChildMessage(t){let e=this.underlyingCalls[t];if(e.state!=="COMPLETED"&&this.getBufferEntry(e.nextMessageToSend)){let n=this.getBufferEntry(e.nextMessageToSend);switch(n.entryType){case"MESSAGE":e.call.sendMessageWithContext({callback:r=>{this.handleChildWriteCompleted(t)}},n.message.message);break;case"HALF_CLOSE":e.nextMessageToSend+=1,e.call.halfClose();break;case"FREED":break}}}sendMessageWithContext(t,e){var n;this.trace("write() called with message of length "+e.length);let r={message:e,flags:t.flags},s=this.getNextBufferIndex(),o={entryType:"MESSAGE",message:r,allocated:this.bufferTracker.allocate(e.length,this.callNumber)};if(this.writeBuffer.push(o),o.allocated){(n=t.callback)===null||n===void 0||n.call(t);for(let[a,l]of this.underlyingCalls.entries())l.state==="ACTIVE"&&l.nextMessageToSend===s&&l.call.sendMessageWithContext({callback:c=>{this.handleChildWriteCompleted(a)}},e)}else{if(this.commitCallWithMostMessages(),this.committedCallIndex===null)return;let a=this.underlyingCalls[this.committedCallIndex];o.callback=t.callback,a.state==="ACTIVE"&&a.nextMessageToSend===s&&a.call.sendMessageWithContext({callback:l=>{this.handleChildWriteCompleted(this.committedCallIndex)}},e)}}startRead(){this.trace("startRead called"),this.readStarted=!0;for(let t of this.underlyingCalls)t?.state==="ACTIVE"&&t.call.startRead()}halfClose(){this.trace("halfClose called");let t=this.getNextBufferIndex();this.writeBuffer.push({entryType:"HALF_CLOSE",allocated:!1});for(let e of this.underlyingCalls)e?.state==="ACTIVE"&&e.nextMessageToSend===t&&(e.nextMessageToSend+=1,e.call.halfClose())}setCredentials(t){throw new Error("Method not implemented.")}getMethod(){return this.methodName}getHost(){return this.host}};_l.RetryingCall=hT});var Vv=G(Bv=>{"use strict";Object.defineProperty(Bv,"__esModule",{value:!0});Bv.BaseSubchannelWrapper=void 0;var mT=class{constructor(t){this.child=t}getConnectivityState(){return this.child.getConnectivityState()}addConnectivityStateListener(t){this.child.addConnectivityStateListener(t)}removeConnectivityStateListener(t){this.child.removeConnectivityStateListener(t)}startConnecting(){this.child.startConnecting()}getAddress(){return this.child.getAddress()}throttleKeepalive(t){this.child.throttleKeepalive(t)}ref(){this.child.ref()}unref(){this.child.unref()}getChannelzRef(){return this.child.getChannelzRef()}getRealSubchannel(){return this.child.getRealSubchannel()}realSubchannelEquals(t){return this.getRealSubchannel()===t.getRealSubchannel()}};Bv.BaseSubchannelWrapper=mT});var AV=G(Uv=>{"use strict";Object.defineProperty(Uv,"__esModule",{value:!0});Uv.InternalChannel=void 0;var rre=k0(),sre=s3(),ore=vV(),DV=el(),zp=Mt(),are=ZE(),lre=CV(),MV=to(),fT=Ti(),cre=jE(),zv=Tr(),po=Zr(),jp=td(),dre=kV(),ure=Dv(),hre=TV(),pT=WE(),mre=Av(),gT=IV(),fre=Vv(),pre=2147483647,gre=1e3,_re=30*60*1e3,jv=new Map,bre=1<<24,vre=1<<20,_T=class extends fre.BaseSubchannelWrapper{constructor(t,e){super(t),this.channel=e,this.refCount=0,this.subchannelStateListener=(n,r,s,o)=>{e.throttleKeepalive(o)},t.addConnectivityStateListener(this.subchannelStateListener)}ref(){this.child.ref(),this.refCount+=1}unref(){this.child.unref(),this.refCount-=1,this.refCount<=0&&(this.child.removeConnectivityStateListener(this.subchannelStateListener),this.channel.removeWrappedSubchannel(this))}},bT=class{constructor(t,e,n){var r,s,o,a,l,c,d,u;if(this.credentials=e,this.options=n,this.connectivityState=po.ConnectivityState.IDLE,this.currentPicker=new DV.UnavailablePicker,this.configSelectionQueue=[],this.pickQueue=[],this.connectivityStateWatchers=[],this.configSelector=null,this.currentResolutionError=null,this.wrappedSubchannels=new Set,this.callCount=0,this.idleTimer=null,this.channelzEnabled=!0,this.callTracker=new jp.ChannelzCallTracker,this.childrenTracker=new jp.ChannelzChildrenTracker,typeof t!="string")throw new TypeError("Channel target must be a string");if(!(e instanceof rre.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(n&&typeof n!="object")throw new TypeError("Channel options must be an object");this.originalTarget=t;let h=(0,zv.parseUri)(t);if(h===null)throw new Error(`Could not parse target name "${t}"`);let m=(0,MV.mapUriDefaultScheme)(h);if(m===null)throw new Error(`Could not find a default scheme for target name "${t}"`);this.callRefTimer=setInterval(()=>{},pre),(s=(r=this.callRefTimer).unref)===null||s===void 0||s.call(r),this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzTrace=new jp.ChannelzTrace,this.channelzRef=(0,jp.registerChannelzChannel)(t,()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Channel created"),this.options["grpc.default_authority"]?this.defaultAuthority=this.options["grpc.default_authority"]:this.defaultAuthority=(0,MV.getDefaultAuthority)(m);let _=(0,cre.mapProxyName)(m,n);this.target=_.target,this.options=Object.assign({},this.options,_.extraOptions),this.subchannelPool=(0,ore.getSubchannelPool)(((o=n["grpc.use_local_subchannel_pool"])!==null&&o!==void 0?o:0)===0),this.retryBufferTracker=new gT.MessageBufferTracker((a=n["grpc.retry_buffer_size"])!==null&&a!==void 0?a:bre,(l=n["grpc.per_rpc_retry_buffer_size"])!==null&&l!==void 0?l:vre),this.keepaliveTime=(c=n["grpc.keepalive_time_ms"])!==null&&c!==void 0?c:-1,this.idleTimeoutMs=Math.max((d=n["grpc.client_idle_timeout_ms"])!==null&&d!==void 0?d:_re,gre);let b={createSubchannel:(I,A)=>{let F=this.subchannelPool.getOrCreateSubchannel(this.target,I,Object.assign({},this.options,A),this.credentials);F.throttleKeepalive(this.keepaliveTime),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Created subchannel or used existing subchannel",F.getChannelzRef());let M=new _T(F,this);return this.wrappedSubchannels.add(M),M},updateState:(I,A)=>{this.currentPicker=A;let F=this.pickQueue.slice();this.pickQueue=[],F.length>0&&this.callRefTimerUnref();for(let M of F)M.doPick();this.updateState(I)},requestReresolution:()=>{throw new Error("Resolving load balancer should never call requestReresolution")},addChannelzChild:I=>{this.channelzEnabled&&this.childrenTracker.refChild(I)},removeChannelzChild:I=>{this.channelzEnabled&&this.childrenTracker.unrefChild(I)}};this.resolvingLoadBalancer=new sre.ResolvingLoadBalancer(this.target,b,n,(I,A)=>{I.retryThrottling?jv.set(this.getTarget(),new gT.RetryThrottler(I.retryThrottling.maxTokens,I.retryThrottling.tokenRatio,jv.get(this.getTarget()))):jv.delete(this.getTarget()),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Address resolution succeeded"),this.configSelector=A,this.currentResolutionError=null,process.nextTick(()=>{let F=this.configSelectionQueue;this.configSelectionQueue=[],F.length>0&&this.callRefTimerUnref();for(let M of F)M.getConfig()})},I=>{this.channelzEnabled&&this.channelzTrace.addTrace("CT_WARNING","Address resolution failed with code "+I.code+' and details "'+I.details+'"'),this.configSelectionQueue.length>0&&this.trace("Name resolution failed with calls queued for config selection"),this.configSelector===null&&(this.currentResolutionError=Object.assign(Object.assign({},(0,mre.restrictControlPlaneStatusCode)(I.code,I.details)),{metadata:I.metadata}));let A=this.configSelectionQueue;this.configSelectionQueue=[],A.length>0&&this.callRefTimerUnref();for(let F of A)F.reportResolverError(I)}),this.filterStackFactory=new are.FilterStackFactory([new lre.CompressionFilterFactory(this,this.options)]),this.trace("Channel constructed with options "+JSON.stringify(n,void 0,2));let v=new Error;(0,fT.trace)(zp.LogVerbosity.DEBUG,"channel_stacktrace","("+this.channelzRef.id+`) Channel constructed 
`+((u=v.stack)===null||u===void 0?void 0:u.substring(v.stack.indexOf(`
`)+1))),this.lastActivityTimestamp=new Date}getChannelzInfo(){return{target:this.originalTarget,state:this.connectivityState,trace:this.channelzTrace,callTracker:this.callTracker,children:this.childrenTracker.getChildLists()}}trace(t,e){(0,fT.trace)(e??zp.LogVerbosity.DEBUG,"channel","("+this.channelzRef.id+") "+(0,zv.uriToString)(this.target)+" "+t)}callRefTimerRef(){var t,e,n,r;!((e=(t=this.callRefTimer).hasRef)===null||e===void 0)&&e.call(t)||(this.trace("callRefTimer.ref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(r=(n=this.callRefTimer).ref)===null||r===void 0||r.call(n))}callRefTimerUnref(){var t,e;(!this.callRefTimer.hasRef||this.callRefTimer.hasRef())&&(this.trace("callRefTimer.unref | configSelectionQueue.length="+this.configSelectionQueue.length+" pickQueue.length="+this.pickQueue.length),(e=(t=this.callRefTimer).unref)===null||e===void 0||e.call(t))}removeConnectivityStateWatcher(t){let e=this.connectivityStateWatchers.findIndex(n=>n===t);e>=0&&this.connectivityStateWatchers.splice(e,1)}updateState(t){(0,fT.trace)(zp.LogVerbosity.DEBUG,"connectivity_state","("+this.channelzRef.id+") "+(0,zv.uriToString)(this.target)+" "+po.ConnectivityState[this.connectivityState]+" -> "+po.ConnectivityState[t]),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connectivity state change to "+po.ConnectivityState[t]),this.connectivityState=t;let e=this.connectivityStateWatchers.slice();for(let n of e)t!==n.currentState&&(n.timer&&clearTimeout(n.timer),this.removeConnectivityStateWatcher(n),n.callback());t!==po.ConnectivityState.TRANSIENT_FAILURE&&(this.currentResolutionError=null)}throttleKeepalive(t){if(t>this.keepaliveTime){this.keepaliveTime=t;for(let e of this.wrappedSubchannels)e.throttleKeepalive(t)}}removeWrappedSubchannel(t){this.wrappedSubchannels.delete(t)}doPick(t,e){return this.currentPicker.pick({metadata:t,extraPickInfo:e})}queueCallForPick(t){this.pickQueue.push(t),this.callRefTimerRef()}getConfig(t,e){return this.resolvingLoadBalancer.exitIdle(),this.configSelector?{type:"SUCCESS",config:this.configSelector(t,e)}:this.currentResolutionError?{type:"ERROR",error:this.currentResolutionError}:{type:"NONE"}}queueCallForConfig(t){this.configSelectionQueue.push(t),this.callRefTimerRef()}enterIdle(){this.resolvingLoadBalancer.destroy(),this.updateState(po.ConnectivityState.IDLE),this.currentPicker=new DV.QueuePicker(this.resolvingLoadBalancer),this.idleTimer&&(clearTimeout(this.idleTimer),this.idleTimer=null)}startIdleTimeout(t){var e,n;this.idleTimer=setTimeout(()=>{if(this.callCount>0){this.startIdleTimeout(this.idleTimeoutMs);return}let s=new Date().valueOf()-this.lastActivityTimestamp.valueOf();s>=this.idleTimeoutMs?(this.trace("Idle timer triggered after "+this.idleTimeoutMs+"ms of inactivity"),this.enterIdle()):this.startIdleTimeout(this.idleTimeoutMs-s)},t),(n=(e=this.idleTimer).unref)===null||n===void 0||n.call(e)}maybeStartIdleTimer(){this.connectivityState!==po.ConnectivityState.SHUTDOWN&&!this.idleTimer&&this.startIdleTimeout(this.idleTimeoutMs)}onCallStart(){this.channelzEnabled&&this.callTracker.addCallStarted(),this.callCount+=1}onCallEnd(t){this.channelzEnabled&&(t.code===zp.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()),this.callCount-=1,this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()}createLoadBalancingCall(t,e,n,r,s){let o=(0,pT.getNextCallNumber)();return this.trace("createLoadBalancingCall ["+o+'] method="'+e+'"'),new dre.LoadBalancingCall(this,t,e,n,r,s,o)}createRetryingCall(t,e,n,r,s){let o=(0,pT.getNextCallNumber)();return this.trace("createRetryingCall ["+o+'] method="'+e+'"'),new gT.RetryingCall(this,t,e,n,r,s,o,this.retryBufferTracker,jv.get(this.getTarget()))}createInnerCall(t,e,n,r,s){return this.options["grpc.enable_retries"]===0?this.createLoadBalancingCall(t,e,n,r,s):this.createRetryingCall(t,e,n,r,s)}createResolvingCall(t,e,n,r,s){let o=(0,pT.getNextCallNumber)();this.trace("createResolvingCall ["+o+'] method="'+t+'", deadline='+(0,ure.deadlineToString)(e));let a={deadline:e,flags:s??zp.Propagate.DEFAULTS,host:n??this.defaultAuthority,parentCall:r},l=new hre.ResolvingCall(this,t,a,this.filterStackFactory.clone(),this.credentials._getCallCredentials(),o);return this.onCallStart(),l.addStatusWatcher(c=>{this.onCallEnd(c)}),l}close(){this.resolvingLoadBalancer.destroy(),this.updateState(po.ConnectivityState.SHUTDOWN),clearInterval(this.callRefTimer),this.idleTimer&&clearTimeout(this.idleTimer),this.channelzEnabled&&(0,jp.unregisterChannelzRef)(this.channelzRef),this.subchannelPool.unrefUnusedSubchannels()}getTarget(){return(0,zv.uriToString)(this.target)}getConnectivityState(t){let e=this.connectivityState;return t&&(this.resolvingLoadBalancer.exitIdle(),this.lastActivityTimestamp=new Date,this.maybeStartIdleTimer()),e}watchConnectivityState(t,e,n){if(this.connectivityState===po.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");let r=null;if(e!==1/0){let o=e instanceof Date?e:new Date(e),a=new Date;if(e===-1/0||o<=a){process.nextTick(n,new Error("Deadline passed without connectivity state change"));return}r=setTimeout(()=>{this.removeConnectivityStateWatcher(s),n(new Error("Deadline passed without connectivity state change"))},o.getTime()-a.getTime())}let s={currentState:t,callback:n,timer:r};this.connectivityStateWatchers.push(s)}getChannelzRef(){return this.channelzRef}createCall(t,e,n,r,s){if(typeof t!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof e=="number"||e instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");if(this.connectivityState===po.ConnectivityState.SHUTDOWN)throw new Error("Channel has been shut down");return this.createResolvingCall(t,e,n,r,s)}};Uv.InternalChannel=bT});var Ck=G(Hv=>{"use strict";Object.defineProperty(Hv,"__esModule",{value:!0});Hv.ChannelImplementation=void 0;var yre=k0(),xre=AV(),vT=class{constructor(t,e,n){if(typeof t!="string")throw new TypeError("Channel target must be a string");if(!(e instanceof yre.ChannelCredentials))throw new TypeError("Channel credentials must be a ChannelCredentials object");if(n&&typeof n!="object")throw new TypeError("Channel options must be an object");this.internalChannel=new xre.InternalChannel(t,e,n)}close(){this.internalChannel.close()}getTarget(){return this.internalChannel.getTarget()}getConnectivityState(t){return this.internalChannel.getConnectivityState(t)}watchConnectivityState(t,e,n){this.internalChannel.watchConnectivityState(t,e,n)}getChannelzRef(){return this.internalChannel.getChannelzRef()}createCall(t,e,n,r,s){if(typeof t!="string")throw new TypeError("Channel#createCall: method must be a string");if(!(typeof e=="number"||e instanceof Date))throw new TypeError("Channel#createCall: deadline must be a number or Date");return this.internalChannel.createCall(t,e,n,r,s)}};Hv.ChannelImplementation=vT});var zV=G(ss=>{"use strict";Object.defineProperty(ss,"__esModule",{value:!0});ss.Http2ServerCallStream=ss.ServerDuplexStreamImpl=ss.ServerWritableStreamImpl=ss.ServerReadableStreamImpl=ss.ServerUnaryCallImpl=void 0;var LV=Be("events"),fh=Be("http2"),wT=Be("stream"),OV=Be("zlib"),ri=Mt(),CT=lr(),wre=HE(),BV=Ti(),Hp=v0(),VV="server_call";function Up(i){BV.trace(ri.LogVerbosity.DEBUG,VV,i)}var Cre="grpc-accept-encoding",Sre="grpc-encoding",PV="grpc-message",RV="grpc-status",FV="grpc-timeout",kre=/(\d{1,8})\s*([HMSmun])/,Ere={H:36e5,M:6e4,S:1e3,m:1,u:.001,n:1e-6},Tre={[Cre]:"identity,deflate,gzip",[Sre]:"identity"},NV={[fh.constants.HTTP2_HEADER_STATUS]:fh.constants.HTTP_STATUS_OK,[fh.constants.HTTP2_HEADER_CONTENT_TYPE]:"application/grpc+proto"},Ire={waitForTrailers:!0},yT=class extends LV.EventEmitter{constructor(t,e,n){super(),this.call=t,this.metadata=e,this.request=n,this.cancelled=!1,this.call.setupSurfaceCall(this)}getPeer(){return this.call.getPeer()}sendMetadata(t){this.call.sendMetadata(t)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}};ss.ServerUnaryCallImpl=yT;var qv=class extends wT.Readable{constructor(t,e,n,r){super({objectMode:!0}),this.call=t,this.metadata=e,this.deserialize=n,this.cancelled=!1,this.call.setupSurfaceCall(this),this.call.setupReadable(this,r)}_read(t){this.call.consumeUnpushedMessages(this)&&this.call.resume()}getPeer(){return this.call.getPeer()}sendMetadata(t){this.call.sendMetadata(t)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}};ss.ServerReadableStreamImpl=qv;var qp=class extends wT.Writable{constructor(t,e,n,r){super({objectMode:!0}),this.call=t,this.metadata=e,this.serialize=n,this.request=r,this.cancelled=!1,this.trailingMetadata=new CT.Metadata,this.call.setupSurfaceCall(this),this.on("error",s=>{this.call.sendError(s),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(t){this.call.sendMetadata(t)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}_write(t,e,n){try{let r=this.call.serializeMessage(t);if(!this.call.write(r)){this.call.once("drain",n);return}}catch(r){this.emit("error",{details:(0,Hp.getErrorMessage)(r),code:ri.Status.INTERNAL})}n()}_final(t){this.call.sendStatus({code:ri.Status.OK,details:"OK",metadata:this.trailingMetadata}),t(null)}end(t){return t&&(this.trailingMetadata=t),super.end()}};ss.ServerWritableStreamImpl=qp;var ph=class extends wT.Duplex{constructor(t,e,n,r,s){super({objectMode:!0}),this.call=t,this.metadata=e,this.serialize=n,this.deserialize=r,this.cancelled=!1,this.trailingMetadata=new CT.Metadata,this.call.setupSurfaceCall(this),this.call.setupReadable(this,s),this.on("error",o=>{this.call.sendError(o),this.end()})}getPeer(){return this.call.getPeer()}sendMetadata(t){this.call.sendMetadata(t)}getDeadline(){return this.call.getDeadline()}getPath(){return this.call.getPath()}end(t){return t&&(this.trailingMetadata=t),super.end()}};ss.ServerDuplexStreamImpl=ph;ph.prototype._read=qv.prototype._read;ph.prototype._write=qp.prototype._write;ph.prototype._final=qp.prototype._final;var xT=class extends LV.EventEmitter{constructor(t,e,n){super(),this.stream=t,this.handler=e,this.cancelled=!1,this.deadlineTimer=null,this.statusSent=!1,this.deadline=1/0,this.wantTrailers=!1,this.metadataSent=!1,this.canPush=!1,this.isPushPending=!1,this.bufferedMessages=[],this.messagesToPush=[],this.maxSendMessageSize=ri.DEFAULT_MAX_SEND_MESSAGE_LENGTH,this.maxReceiveMessageSize=ri.DEFAULT_MAX_RECEIVE_MESSAGE_LENGTH,this.stream.once("error",r=>{}),this.stream.once("close",()=>{var r;Up("Request to method "+((r=this.handler)===null||r===void 0?void 0:r.path)+" stream closed with rstCode "+this.stream.rstCode),this.statusSent||(this.cancelled=!0,this.emit("cancelled","cancelled"),this.emit("streamEnd",!1),this.sendStatus({code:ri.Status.CANCELLED,details:"Cancelled by client",metadata:null}),this.deadlineTimer&&clearTimeout(this.deadlineTimer))}),this.stream.on("drain",()=>{this.emit("drain")}),"grpc.max_send_message_length"in n&&(this.maxSendMessageSize=n["grpc.max_send_message_length"]),"grpc.max_receive_message_length"in n&&(this.maxReceiveMessageSize=n["grpc.max_receive_message_length"])}checkCancelled(){return(this.stream.destroyed||this.stream.closed)&&(this.cancelled=!0),this.cancelled}getDecompressedMessage(t,e){let n=t.subarray(5);if(e==="identity")return n;if(e==="deflate"||e==="gzip"){let r;return e==="deflate"?r=OV.createInflate():r=OV.createGunzip(),new Promise((s,o)=>{let a=0,l=[];r.on("data",c=>{l.push(c),a+=c.byteLength,this.maxReceiveMessageSize!==-1&&a>this.maxReceiveMessageSize&&(r.destroy(),o({code:ri.Status.RESOURCE_EXHAUSTED,details:`Received message that decompresses to a size larger than ${this.maxReceiveMessageSize}`}))}),r.on("end",()=>{s(Buffer.concat(l))}),r.write(n),r.end()})}else return Promise.reject({code:ri.Status.UNIMPLEMENTED,details:`Received message compressed with unsupported encoding "${e}"`})}sendMetadata(t){if(this.checkCancelled()||this.metadataSent)return;this.metadataSent=!0;let e=t?t.toHttp2Headers():null,n=Object.assign(Object.assign(Object.assign({},NV),Tre),e);this.stream.respond(n,Ire)}receiveMetadata(t){let e=CT.Metadata.fromHttp2Headers(t);BV.isTracerEnabled(VV)&&Up("Request to "+this.handler.path+" received headers "+JSON.stringify(e.toJSON()));let n=e.get(FV);if(n.length>0){let r=n[0].toString().match(kre);if(r===null){let a=new Error("Invalid deadline");return a.code=ri.Status.OUT_OF_RANGE,this.sendError(a),e}let s=+r[1]*Ere[r[2]]|0,o=new Date;this.deadline=o.setMilliseconds(o.getMilliseconds()+s),this.deadlineTimer=setTimeout(Dre,s,this),e.remove(FV)}return e.remove(fh.constants.HTTP2_HEADER_ACCEPT_ENCODING),e.remove(fh.constants.HTTP2_HEADER_TE),e.remove(fh.constants.HTTP2_HEADER_CONTENT_TYPE),e.remove("grpc-accept-encoding"),e}receiveUnaryMessage(t){return new Promise((e,n)=>{let{stream:r}=this,s=0,o=this,a=[],l=this.maxReceiveMessageSize;this.stream.on("data",c),this.stream.on("end",d),this.stream.on("error",d);function c(u){if(s+=u.byteLength,l!==-1&&s>l){r.removeListener("data",c),r.removeListener("end",d),r.removeListener("error",d),n({code:ri.Status.RESOURCE_EXHAUSTED,details:`Received message larger than max (${s} vs. ${l})`});return}a.push(u)}function d(u){if(r.removeListener("data",c),r.removeListener("end",d),r.removeListener("error",d),u!==void 0){n({code:ri.Status.INTERNAL,details:u.message});return}if(s===0){n({code:ri.Status.INTERNAL,details:"received empty unary message"});return}o.emit("receiveMessage");let h=Buffer.concat(a,s),_=h.readUInt8(0)===1?t:"identity",b=o.getDecompressedMessage(h,_);if(Buffer.isBuffer(b)){e(o.deserializeMessageWithInternalError(b));return}b.then(v=>e(o.deserializeMessageWithInternalError(v)),v=>n(v.code?v:{code:ri.Status.INTERNAL,details:`Received "grpc-encoding" header "${t}" but ${t} decompression failed`}))}})}deserializeMessageWithInternalError(t){return N(this,null,function*(){try{return this.deserializeMessage(t)}catch(e){throw{details:(0,Hp.getErrorMessage)(e),code:ri.Status.INTERNAL}}})}serializeMessage(t){let e=this.handler.serialize(t),n=e.byteLength,r=Buffer.allocUnsafe(n+5);return r.writeUInt8(0,0),r.writeUInt32BE(n,1),e.copy(r,5),r}deserializeMessage(t){return this.handler.deserialize(t)}sendUnaryMessage(t,e,n,r){return N(this,null,function*(){if(!this.checkCancelled()){if(n===void 0&&(n=null),t){!Object.prototype.hasOwnProperty.call(t,"metadata")&&n&&(t.metadata=n),this.sendError(t);return}try{let s=this.serializeMessage(e);this.write(s),this.sendStatus({code:ri.Status.OK,details:"OK",metadata:n})}catch(s){this.sendError({details:(0,Hp.getErrorMessage)(s),code:ri.Status.INTERNAL})}}})}sendStatus(t){var e,n;if(this.emit("callEnd",t.code),this.emit("streamEnd",t.code===ri.Status.OK),!this.checkCancelled())if(Up("Request to method "+((e=this.handler)===null||e===void 0?void 0:e.path)+" ended with status code: "+ri.Status[t.code]+" details: "+t.details),this.deadlineTimer&&clearTimeout(this.deadlineTimer),this.stream.headersSent)this.wantTrailers||(this.wantTrailers=!0,this.stream.once("wantTrailers",()=>{var r;let s=Object.assign({[RV]:t.code,[PV]:encodeURI(t.details)},(r=t.metadata)===null||r===void 0?void 0:r.toHttp2Headers());this.stream.sendTrailers(s),this.statusSent=!0}),this.stream.end());else{let r=Object.assign(Object.assign({[RV]:t.code,[PV]:encodeURI(t.details)},NV),(n=t.metadata)===null||n===void 0?void 0:n.toHttp2Headers());this.stream.respond(r,{endStream:!0}),this.statusSent=!0}}sendError(t){let e={code:ri.Status.UNKNOWN,details:"message"in t?t.message:"Unknown Error",metadata:"metadata"in t&&t.metadata!==void 0?t.metadata:null};"code"in t&&typeof t.code=="number"&&Number.isInteger(t.code)&&(e.code=t.code,"details"in t&&typeof t.details=="string"&&(e.details=t.details)),this.sendStatus(e)}write(t){if(!this.checkCancelled()){if(this.maxSendMessageSize!==-1&&t.length>this.maxSendMessageSize){this.sendError({code:ri.Status.RESOURCE_EXHAUSTED,details:`Sent message larger than max (${t.length} vs. ${this.maxSendMessageSize})`});return}return this.sendMetadata(),this.emit("sendMessage"),this.stream.write(t)}}resume(){this.stream.resume()}setupSurfaceCall(t){this.once("cancelled",e=>{t.cancelled=!0,t.emit("cancelled",e)}),this.once("callEnd",e=>t.emit("callEnd",e))}setupReadable(t,e){let n=new wre.StreamDecoder(this.maxReceiveMessageSize),r=!1,s=!1,o=!1,a=()=>N(this,null,function*(){!o&&r&&!s&&(o=!0,yield this.pushOrBufferMessage(t,null))});this.stream.on("data",l=>N(this,null,function*(){let c;try{c=n.write(l)}catch(d){this.sendError({code:ri.Status.RESOURCE_EXHAUSTED,details:d.message});return}s=!0,this.stream.pause();for(let d of c){this.emit("receiveMessage");let h=d.readUInt8(0)===1?e:"identity",m;try{m=yield this.getDecompressedMessage(d,h)}catch(_){this.sendError(_);return}if(!m)return;yield this.pushOrBufferMessage(t,m)}s=!1,this.stream.resume(),yield a()})),this.stream.once("end",()=>N(this,null,function*(){r=!0,yield a()}))}consumeUnpushedMessages(t){for(this.canPush=!0;this.messagesToPush.length>0;){let e=this.messagesToPush.shift(),n=t.push(e);if(e===null||n===!1){this.canPush=!1;break}}return this.canPush}pushOrBufferMessage(t,e){return N(this,null,function*(){this.isPushPending?this.bufferedMessages.push(e):yield this.pushMessage(t,e)})}pushMessage(t,e){return N(this,null,function*(){if(e===null){Up("Received end of stream"),this.canPush?t.push(null):this.messagesToPush.push(null);return}Up("Received message of length "+e.length),this.isPushPending=!0;try{let n=yield this.deserializeMessage(e);this.canPush?t.push(n)||(this.canPush=!1,this.stream.pause()):this.messagesToPush.push(n)}catch(n){this.bufferedMessages.length=0;let r=(0,Hp.getErrorCode)(n);(r===null||r<ri.Status.OK||r>ri.Status.UNAUTHENTICATED)&&(r=ri.Status.INTERNAL),t.emit("error",{details:(0,Hp.getErrorMessage)(n),code:r})}this.isPushPending=!1,this.bufferedMessages.length>0&&(yield this.pushMessage(t,this.bufferedMessages.shift()))})}getPeer(){var t;let e=(t=this.stream.session)===null||t===void 0?void 0:t.socket;return e?.remoteAddress?e.remotePort?`${e.remoteAddress}:${e.remotePort}`:e.remoteAddress:"unknown"}getDeadline(){return this.deadline}getPath(){return this.handler.path}};ss.Http2ServerCallStream=xT;function Dre(i){let t=new Error("Deadline exceeded");t.code=ri.Status.DEADLINE_EXCEEDED,i.sendError(t),i.cancelled=!0,i.emit("cancelled","deadline")}});var ET=G(Wv=>{"use strict";Object.defineProperty(Wv,"__esModule",{value:!0});Wv.ServerCredentials=void 0;var jV=$S(),Wp=class{static createInsecure(){return new ST}static createSsl(t,e,n=!1){if(t!==null&&!Buffer.isBuffer(t))throw new TypeError("rootCerts must be null or a Buffer");if(!Array.isArray(e))throw new TypeError("keyCertPairs must be an array");if(typeof n!="boolean")throw new TypeError("checkClientCertificate must be a boolean");let r=[],s=[];for(let o=0;o<e.length;o++){let a=e[o];if(a===null||typeof a!="object")throw new TypeError(`keyCertPair[${o}] must be an object`);if(!Buffer.isBuffer(a.private_key))throw new TypeError(`keyCertPair[${o}].private_key must be a Buffer`);if(!Buffer.isBuffer(a.cert_chain))throw new TypeError(`keyCertPair[${o}].cert_chain must be a Buffer`);r.push(a.cert_chain),s.push(a.private_key)}return new kT({ca:t||(0,jV.getDefaultRootsData)()||void 0,cert:r,key:s,requestCert:n,ciphers:jV.CIPHER_SUITES})}};Wv.ServerCredentials=Wp;var ST=class extends Wp{_isSecure(){return!1}_getSettings(){return null}},kT=class extends Wp{constructor(t){super(),this.options=t}_isSecure(){return!0}_getSettings(){return this.options}}});var qV=G(Kv=>{"use strict";Object.defineProperty(Kv,"__esModule",{value:!0});Kv.Server=void 0;var bl=Be("http2"),ca=Mt(),nd=zV(),Mre=ET(),UV=to(),Gv=Ti(),Rs=no(),Are=Tr(),ur=td(),$v=~(1<<31),Ore=~(1<<31),Pre=2e4,{HTTP2_HEADER_PATH:HV}=bl.constants,Rre="server";function Fre(){}function TT(i){return{code:ca.Status.UNIMPLEMENTED,details:`The server does not implement the method ${i}`}}function Nre(i,t){let e=TT(t);switch(i){case"unary":return(n,r)=>{r(e,null)};case"clientStream":return(n,r)=>{r(e,null)};case"serverStream":return n=>{n.emit("error",e)};case"bidi":return n=>{n.emit("error",e)};default:throw new Error(`Invalid handlerType ${i}`)}}var IT=class{constructor(t){var e,n,r,s;this.http2ServerList=[],this.handlers=new Map,this.sessions=new Map,this.started=!1,this.shutdown=!1,this.serverAddressString="null",this.channelzEnabled=!0,this.channelzTrace=new ur.ChannelzTrace,this.callTracker=new ur.ChannelzCallTracker,this.listenerChildrenTracker=new ur.ChannelzChildrenTracker,this.sessionChildrenTracker=new ur.ChannelzChildrenTracker,this.options=t??{},this.options["grpc.enable_channelz"]===0&&(this.channelzEnabled=!1),this.channelzRef=(0,ur.registerChannelzServer)(()=>this.getChannelzInfo(),this.channelzEnabled),this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Server created"),this.maxConnectionAgeMs=(e=this.options["grpc.max_connection_age_ms"])!==null&&e!==void 0?e:$v,this.maxConnectionAgeGraceMs=(n=this.options["grpc.max_connection_age_grace_ms"])!==null&&n!==void 0?n:$v,this.keepaliveTimeMs=(r=this.options["grpc.keepalive_time_ms"])!==null&&r!==void 0?r:Ore,this.keepaliveTimeoutMs=(s=this.options["grpc.keepalive_timeout_ms"])!==null&&s!==void 0?s:Pre,this.trace("Server constructed")}getChannelzInfo(){return{trace:this.channelzTrace,callTracker:this.callTracker,listenerChildren:this.listenerChildrenTracker.getChildLists(),sessionChildren:this.sessionChildrenTracker.getChildLists()}}getChannelzSessionInfoGetter(t){return()=>{var e,n,r;let s=this.sessions.get(t),o=t.socket,a=o.remoteAddress?(0,Rs.stringToSubchannelAddress)(o.remoteAddress,o.remotePort):null,l=o.localAddress?(0,Rs.stringToSubchannelAddress)(o.localAddress,o.localPort):null,c;if(t.encrypted){let u=o,h=u.getCipher(),m=u.getCertificate(),_=u.getPeerCertificate();c={cipherSuiteStandardName:(e=h.standardName)!==null&&e!==void 0?e:null,cipherSuiteOtherName:h.standardName?null:h.name,localCertificate:m&&"raw"in m?m.raw:null,remoteCertificate:_&&"raw"in _?_.raw:null}}else c=null;return{remoteAddress:a,localAddress:l,security:c,remoteName:null,streamsStarted:s.streamTracker.callsStarted,streamsSucceeded:s.streamTracker.callsSucceeded,streamsFailed:s.streamTracker.callsFailed,messagesSent:s.messagesSent,messagesReceived:s.messagesReceived,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:s.streamTracker.lastCallStartedTimestamp,lastMessageSentTimestamp:s.lastMessageSentTimestamp,lastMessageReceivedTimestamp:s.lastMessageReceivedTimestamp,localFlowControlWindow:(n=t.state.localWindowSize)!==null&&n!==void 0?n:null,remoteFlowControlWindow:(r=t.state.remoteWindowSize)!==null&&r!==void 0?r:null}}}trace(t){Gv.trace(ca.LogVerbosity.DEBUG,Rre,"("+this.channelzRef.id+") "+t)}addProtoService(){throw new Error("Not implemented. Use addService() instead")}addService(t,e){if(t===null||typeof t!="object"||e===null||typeof e!="object")throw new Error("addService() requires two objects as arguments");let n=Object.keys(t);if(n.length===0)throw new Error("Cannot add an empty service to a server");n.forEach(r=>{let s=t[r],o;s.requestStream?s.responseStream?o="bidi":o="clientStream":s.responseStream?o="serverStream":o="unary";let a=e[r],l;if(a===void 0&&typeof s.originalName=="string"&&(a=e[s.originalName]),a!==void 0?l=a.bind(e):l=Nre(o,r),this.register(s.path,l,s.responseSerialize,s.requestDeserialize,o)===!1)throw new Error(`Method handler for ${s.path} already provided.`)})}removeService(t){if(t===null||typeof t!="object")throw new Error("removeService() requires object as argument");Object.keys(t).forEach(n=>{let r=t[n];this.unregister(r.path)})}bind(t,e){throw new Error("Not implemented. Use bindAsync() instead")}bindAsync(t,e,n){if(this.started===!0)throw new Error("server is already started");if(this.shutdown)throw new Error("bindAsync called after shutdown");if(typeof t!="string")throw new TypeError("port must be a string");if(e===null||!(e instanceof Mre.ServerCredentials))throw new TypeError("creds must be a ServerCredentials object");if(typeof n!="function")throw new TypeError("callback must be a function");let r=(0,Are.parseUri)(t);if(r===null)throw new Error(`Could not parse port "${t}"`);let s=(0,UV.mapUriDefaultScheme)(r);if(s===null)throw new Error(`Could not get a default scheme for port "${t}"`);let o={maxSendHeaderBlockLength:Number.MAX_SAFE_INTEGER};"grpc-node.max_session_memory"in this.options?o.maxSessionMemory=this.options["grpc-node.max_session_memory"]:o.maxSessionMemory=Number.MAX_SAFE_INTEGER,"grpc.max_concurrent_streams"in this.options&&(o.settings={maxConcurrentStreams:this.options["grpc.max_concurrent_streams"]});let a=(m,_)=>{process.nextTick(()=>n(m,_))},l=()=>{let m;if(e._isSecure()){let _=Object.assign(o,e._getSettings());_.enableTrace=this.options["grpc-node.tls_enable_trace"]===1,m=bl.createSecureServer(_),m.on("secureConnection",b=>{b.on("error",v=>{this.trace("An incoming TLS connection closed with error: "+v.message)})})}else m=bl.createServer(o);return m.setTimeout(0,Fre),this._setupHandlers(m),m},c=(m,_,b)=>m.length===0?Promise.resolve({port:_,count:b}):Promise.all(m.map(v=>{this.trace("Attempting to bind "+(0,Rs.subchannelAddressToString)(v));let I;(0,Rs.isTcpSubchannelAddress)(v)?I={host:v.host,port:_}:I=v;let A=l();return new Promise((F,M)=>{let L=U=>{this.trace("Failed to bind "+(0,Rs.subchannelAddressToString)(v)+" with error "+U.message),F(U)};A.once("error",L),A.listen(I,()=>{if(this.shutdown){A.close(),F(new Error("bindAsync failed because server is shutdown"));return}let U=A.address(),T;typeof U=="string"?T={path:U}:T={host:U.address,port:U.port};let C=(0,ur.registerChannelzSocket)((0,Rs.subchannelAddressToString)(T),()=>({localAddress:T,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(C),this.http2ServerList.push({server:A,channelzRef:C}),this.trace("Successfully bound "+(0,Rs.subchannelAddressToString)(T)),F("port"in T?T.port:_),A.removeListener("error",L)})})})).then(v=>{let I=0;for(let A of v)if(typeof A=="number"&&(I+=1,A!==_))throw new Error("Invalid state: multiple port numbers added from single address");return{port:_,count:I+b}}),d=m=>{if(m.length===0)return Promise.resolve({port:0,count:0});let _=m[0],b=l();return new Promise((v,I)=>{let A=F=>{this.trace("Failed to bind "+(0,Rs.subchannelAddressToString)(_)+" with error "+F.message),v(d(m.slice(1)))};b.once("error",A),b.listen(_,()=>{if(this.shutdown){b.close(),v({port:0,count:0});return}let F=b.address(),M={host:F.address,port:F.port},L=(0,ur.registerChannelzSocket)((0,Rs.subchannelAddressToString)(M),()=>({localAddress:M,remoteAddress:null,security:null,remoteName:null,streamsStarted:0,streamsSucceeded:0,streamsFailed:0,messagesSent:0,messagesReceived:0,keepAlivesSent:0,lastLocalStreamCreatedTimestamp:null,lastRemoteStreamCreatedTimestamp:null,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null,localFlowControlWindow:null,remoteFlowControlWindow:null}),this.channelzEnabled);this.channelzEnabled&&this.listenerChildrenTracker.refChild(L),this.http2ServerList.push({server:b,channelzRef:L}),this.trace("Successfully bound "+(0,Rs.subchannelAddressToString)(M)),v(c(m.slice(1),F.port,1)),b.removeListener("error",A)})})},u={onSuccessfulResolution:(m,_,b)=>{if(u.onSuccessfulResolution=()=>{},this.shutdown&&a(new Error("bindAsync failed because server is shutdown"),0),m.length===0){a(new Error(`No addresses resolved for port ${t}`),0);return}let v;(0,Rs.isTcpSubchannelAddress)(m[0])?m[0].port===0?v=d(m):v=c(m,m[0].port,0):v=c(m,1,0),v.then(I=>{if(I.count===0){let A=`No address added out of total ${m.length} resolved`;Gv.log(ca.LogVerbosity.ERROR,A),a(new Error(A),0)}else I.count<m.length&&Gv.log(ca.LogVerbosity.INFO,`WARNING Only ${I.count} addresses added out of total ${m.length} resolved`),a(null,I.port)},I=>{let A=`No address added out of total ${m.length} resolved`;Gv.log(ca.LogVerbosity.ERROR,A),a(new Error(A),0)})},onError:m=>{a(new Error(m.details),0)}};(0,UV.createResolver)(s,u,this.options).updateResolution()}forceShutdown(){for(let{server:t,channelzRef:e}of this.http2ServerList)t.listening&&t.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(e),(0,ur.unregisterChannelzRef)(e))});this.started=!1,this.shutdown=!0,this.sessions.forEach((t,e)=>{e.destroy(bl.constants.NGHTTP2_CANCEL)}),this.sessions.clear(),this.channelzEnabled&&(0,ur.unregisterChannelzRef)(this.channelzRef)}register(t,e,n,r,s){return this.handlers.has(t)?!1:(this.handlers.set(t,{func:e,serialize:n,deserialize:r,type:s,path:t}),!0)}unregister(t){return this.handlers.delete(t)}start(){if(this.http2ServerList.length===0||this.http2ServerList.every(({server:t})=>t.listening!==!0))throw new Error("server must be bound in order to start");if(this.started===!0)throw new Error("server is already started");this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Starting"),this.started=!0}tryShutdown(t){let e=s=>{this.channelzEnabled&&(0,ur.unregisterChannelzRef)(this.channelzRef),t(s)},n=0;function r(){n--,n===0&&e()}this.started=!1,this.shutdown=!0;for(let{server:s,channelzRef:o}of this.http2ServerList)s.listening&&(n++,s.close(()=>{this.channelzEnabled&&(this.listenerChildrenTracker.unrefChild(o),(0,ur.unregisterChannelzRef)(o)),r()}));this.sessions.forEach((s,o)=>{o.closed||(n+=1,o.close(r))}),n===0&&e()}addHttp2Port(){throw new Error("Not yet implemented")}getChannelzRef(){return this.channelzRef}_verifyContentType(t,e){let n=e[bl.constants.HTTP2_HEADER_CONTENT_TYPE];return typeof n!="string"||!n.startsWith("application/grpc")?(t.respond({[bl.constants.HTTP2_HEADER_STATUS]:bl.constants.HTTP_STATUS_UNSUPPORTED_MEDIA_TYPE},{endStream:!0}),!1):!0}_retrieveHandler(t){this.trace("Received call to method "+t+" at address "+this.serverAddressString);let e=this.handlers.get(t);return e===void 0?(this.trace("No handler registered for method "+t+". Sending UNIMPLEMENTED status."),null):e}_respondWithError(t,e,n=null){let r=new nd.Http2ServerCallStream(e,null,this.options);t.code===void 0&&(t.code=ca.Status.INTERNAL),this.channelzEnabled&&(this.callTracker.addCallFailed(),n?.streamTracker.addCallFailed()),r.sendError(t)}_channelzHandler(t,e){let n=this.sessions.get(t.session);if(this.callTracker.addCallStarted(),n?.streamTracker.addCallStarted(),!this._verifyContentType(t,e)){this.callTracker.addCallFailed(),n?.streamTracker.addCallFailed();return}let r=e[HV],s=this._retrieveHandler(r);if(!s){this._respondWithError(TT(r),t,n);return}let o=new nd.Http2ServerCallStream(t,s,this.options);o.once("callEnd",a=>{a===ca.Status.OK?this.callTracker.addCallSucceeded():this.callTracker.addCallFailed()}),n&&(o.once("streamEnd",a=>{a?n.streamTracker.addCallSucceeded():n.streamTracker.addCallFailed()}),o.on("sendMessage",()=>{n.messagesSent+=1,n.lastMessageSentTimestamp=new Date}),o.on("receiveMessage",()=>{n.messagesReceived+=1,n.lastMessageReceivedTimestamp=new Date})),this._runHandlerForCall(o,s,e)||(this.callTracker.addCallFailed(),n?.streamTracker.addCallFailed(),o.sendError({code:ca.Status.INTERNAL,details:`Unknown handler type: ${s.type}`}))}_streamHandler(t,e){if(this._verifyContentType(t,e)!==!0)return;let n=e[HV],r=this._retrieveHandler(n);if(!r){this._respondWithError(TT(n),t,null);return}let s=new nd.Http2ServerCallStream(t,r,this.options);this._runHandlerForCall(s,r,e)||s.sendError({code:ca.Status.INTERNAL,details:`Unknown handler type: ${r.type}`})}_runHandlerForCall(t,e,n){var r;let s=t.receiveMetadata(n),o=(r=s.get("grpc-encoding")[0])!==null&&r!==void 0?r:"identity";s.remove("grpc-encoding");let{type:a}=e;if(a==="unary")Lre(t,e,s,o);else if(a==="clientStream")Bre(t,e,s,o);else if(a==="serverStream")Vre(t,e,s,o);else if(a==="bidi")zre(t,e,s,o);else return!1;return!0}_setupHandlers(t){if(t===null)return;let e=t.address(),n="null";e&&(typeof e=="string"?n=e:n=e.address+":"+e.port),this.serverAddressString=n;let r=this.channelzEnabled?this._channelzHandler:this._streamHandler;t.on("stream",r.bind(this)),t.on("session",s=>{var o,a,l,c,d;if(!this.started){s.destroy();return}let u=(0,ur.registerChannelzSocket)((o=s.socket.remoteAddress)!==null&&o!==void 0?o:"unknown",this.getChannelzSessionInfoGetter(s),this.channelzEnabled),h={ref:u,streamTracker:new ur.ChannelzCallTracker,messagesSent:0,messagesReceived:0,lastMessageSentTimestamp:null,lastMessageReceivedTimestamp:null};this.sessions.set(s,h);let m=s.socket.remoteAddress;this.channelzEnabled&&(this.channelzTrace.addTrace("CT_INFO","Connection established by client "+m),this.sessionChildrenTracker.refChild(u));let _=null,b=null,v=!1;if(this.maxConnectionAgeMs!==$v){let A=this.maxConnectionAgeMs/10,F=Math.random()*A*2-A;_=(l=(a=setTimeout(()=>{var M,L;v=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by max connection age from "+m);try{s.goaway(bl.constants.NGHTTP2_NO_ERROR,~(1<<31),Buffer.from("max_age"))}catch{s.destroy();return}s.close(),this.maxConnectionAgeGraceMs!==$v&&(b=(L=(M=setTimeout(()=>{s.destroy()},this.maxConnectionAgeGraceMs)).unref)===null||L===void 0?void 0:L.call(M))},this.maxConnectionAgeMs+F)).unref)===null||l===void 0?void 0:l.call(a)}let I=(d=(c=setInterval(()=>{var A,F;let M=(F=(A=setTimeout(()=>{v=!0,this.channelzEnabled&&this.channelzTrace.addTrace("CT_INFO","Connection dropped by keepalive timeout from "+m),s.close()},this.keepaliveTimeoutMs)).unref)===null||F===void 0?void 0:F.call(A);try{s.ping((L,U,T)=>{clearTimeout(M)})}catch{s.destroy()}},this.keepaliveTimeMs)).unref)===null||d===void 0?void 0:d.call(c);s.on("close",()=>{this.channelzEnabled&&(v||this.channelzTrace.addTrace("CT_INFO","Connection dropped by client "+m),this.sessionChildrenTracker.unrefChild(u),(0,ur.unregisterChannelzRef)(u)),_&&clearTimeout(_),b&&clearTimeout(b),I&&clearTimeout(I),this.sessions.delete(s)})})}};Kv.Server=IT;function Lre(i,t,e,n){return N(this,null,function*(){try{let r=yield i.receiveUnaryMessage(n);if(r===void 0||i.cancelled)return;let s=new nd.ServerUnaryCallImpl(i,e,r);t.func(s,(o,a,l,c)=>{i.sendUnaryMessage(o,a,l,c)})}catch(r){i.sendError(r)}})}function Bre(i,t,e,n){let r=new nd.ServerReadableStreamImpl(i,e,t.deserialize,n);function s(o,a,l,c){r.destroy(),i.sendUnaryMessage(o,a,l,c)}i.cancelled||(r.on("error",s),t.func(r,s))}function Vre(i,t,e,n){return N(this,null,function*(){try{let r=yield i.receiveUnaryMessage(n);if(r===void 0||i.cancelled)return;let s=new nd.ServerWritableStreamImpl(i,e,t.serialize,r);t.func(s)}catch(r){i.sendError(r)}})}function zre(i,t,e,n){let r=new nd.ServerDuplexStreamImpl(i,e,t.serialize,t.deserialize,n);i.cancelled||t.func(r)}});var WV=G(Yv=>{"use strict";Object.defineProperty(Yv,"__esModule",{value:!0});Yv.StatusBuilder=void 0;var DT=class{constructor(){this.code=null,this.details=null,this.metadata=null}withCode(t){return this.code=t,this}withDetails(t){return this.details=t,this}withMetadata(t){return this.metadata=t,this}build(){let t={};return this.code!==null&&(t.code=this.code),this.details!==null&&(t.details=this.details),this.metadata!==null&&(t.metadata=this.metadata),t}};Yv.StatusBuilder=DT});var MT=G(vl=>{"use strict";Object.defineProperty(vl,"__esModule",{value:!0});vl.isDuration=vl.durationToMs=vl.msToDuration=void 0;function jre(i){return{seconds:i/1e3|0,nanos:i%1e3*1e6|0}}vl.msToDuration=jre;function Ure(i){return i.seconds*1e3+i.nanos/1e6|0}vl.durationToMs=Ure;function Hre(i){return typeof i.seconds=="number"&&typeof i.nanos=="number"}vl.isDuration=Hre});var BT=G(yl=>{"use strict";var AT;Object.defineProperty(yl,"__esModule",{value:!0});yl.setup=yl.OutlierDetectionLoadBalancer=yl.OutlierDetectionLoadBalancingConfig=void 0;var Xv=Zr(),$V=Mt(),rd=MT(),KV=VT(),YV=Qa(),qre=O0(),Wre=el(),GV=no(),Gre=Vv(),$re=Ti(),Kre="outlier_detection";function hn(i){$re.trace($V.LogVerbosity.DEBUG,Kre,i)}var LT="outlier_detection",Yre=((AT=process.env.GRPC_EXPERIMENTAL_ENABLE_OUTLIER_DETECTION)!==null&&AT!==void 0?AT:"true")==="true",Qre={stdev_factor:1900,enforcement_percentage:100,minimum_hosts:5,request_volume:100},Xre={threshold:85,enforcement_percentage:100,minimum_hosts:5,request_volume:50};function gh(i,t,e,n){if(t in i&&typeof i[t]!==e){let r=n?`${n}.${t}`:t;throw new Error(`outlier detection config ${r} parse error: expected ${e}, got ${typeof i[t]}`)}}function OT(i,t,e){let n=e?`${e}.${t}`:t;if(t in i){if(!(0,rd.isDuration)(i[t]))throw new Error(`outlier detection config ${n} parse error: expected Duration, got ${typeof i[t]}`);if(!(i[t].seconds>=0&&i[t].seconds<=315576e6&&i[t].nanos>=0&&i[t].nanos<=999999999))throw new Error(`outlier detection config ${n} parse error: values out of range for non-negative Duaration`)}}function Qv(i,t,e){let n=e?`${e}.${t}`:t;if(gh(i,t,"number",e),t in i&&!(i[t]>=0&&i[t]<=100))throw new Error(`outlier detection config ${n} parse error: value out of range for percentage (0-100)`)}var Gp=class i{constructor(t,e,n,r,s,o,a){if(this.childPolicy=a,a.length>0&&a[0].getLoadBalancerName()==="pick_first")throw new Error("outlier_detection LB policy cannot have a pick_first child policy");this.intervalMs=t??1e4,this.baseEjectionTimeMs=e??3e4,this.maxEjectionTimeMs=n??3e5,this.maxEjectionPercent=r??10,this.successRateEjection=s?Object.assign(Object.assign({},Qre),s):null,this.failurePercentageEjection=o?Object.assign(Object.assign({},Xre),o):null}getLoadBalancerName(){return LT}toJsonObject(){return{interval:(0,rd.msToDuration)(this.intervalMs),base_ejection_time:(0,rd.msToDuration)(this.baseEjectionTimeMs),max_ejection_time:(0,rd.msToDuration)(this.maxEjectionTimeMs),max_ejection_percent:this.maxEjectionPercent,success_rate_ejection:this.successRateEjection,failure_percentage_ejection:this.failurePercentageEjection,child_policy:this.childPolicy.map(t=>t.toJsonObject())}}getIntervalMs(){return this.intervalMs}getBaseEjectionTimeMs(){return this.baseEjectionTimeMs}getMaxEjectionTimeMs(){return this.maxEjectionTimeMs}getMaxEjectionPercent(){return this.maxEjectionPercent}getSuccessRateEjectionConfig(){return this.successRateEjection}getFailurePercentageEjectionConfig(){return this.failurePercentageEjection}getChildPolicy(){return this.childPolicy}copyWithChildPolicy(t){return new i(this.intervalMs,this.baseEjectionTimeMs,this.maxEjectionTimeMs,this.maxEjectionPercent,this.successRateEjection,this.failurePercentageEjection,t)}static createFromJson(t){var e;if(OT(t,"interval"),OT(t,"base_ejection_time"),OT(t,"max_ejection_time"),Qv(t,"max_ejection_percent"),"success_rate_ejection"in t){if(typeof t.success_rate_ejection!="object")throw new Error("outlier detection config success_rate_ejection must be an object");gh(t.success_rate_ejection,"stdev_factor","number","success_rate_ejection"),Qv(t.success_rate_ejection,"enforcement_percentage","success_rate_ejection"),gh(t.success_rate_ejection,"minimum_hosts","number","success_rate_ejection"),gh(t.success_rate_ejection,"request_volume","number","success_rate_ejection")}if("failure_percentage_ejection"in t){if(typeof t.failure_percentage_ejection!="object")throw new Error("outlier detection config failure_percentage_ejection must be an object");Qv(t.failure_percentage_ejection,"threshold","failure_percentage_ejection"),Qv(t.failure_percentage_ejection,"enforcement_percentage","failure_percentage_ejection"),gh(t.failure_percentage_ejection,"minimum_hosts","number","failure_percentage_ejection"),gh(t.failure_percentage_ejection,"request_volume","number","failure_percentage_ejection")}return new i(t.interval?(0,rd.durationToMs)(t.interval):null,t.base_ejection_time?(0,rd.durationToMs)(t.base_ejection_time):null,t.max_ejection_time?(0,rd.durationToMs)(t.max_ejection_time):null,(e=t.max_ejection_percent)!==null&&e!==void 0?e:null,t.success_rate_ejection,t.failure_percentage_ejection,t.child_policy.map(YV.validateLoadBalancingConfig))}};yl.OutlierDetectionLoadBalancingConfig=Gp;var RT=class extends Gre.BaseSubchannelWrapper{constructor(t,e){super(t),this.mapEntry=e,this.stateListeners=[],this.ejected=!1,this.refCount=0,this.childSubchannelState=t.getConnectivityState(),t.addConnectivityStateListener((n,r,s,o)=>{if(this.childSubchannelState=s,!this.ejected)for(let a of this.stateListeners)a(this,r,s,o)})}getConnectivityState(){return this.ejected?Xv.ConnectivityState.TRANSIENT_FAILURE:this.childSubchannelState}addConnectivityStateListener(t){this.stateListeners.push(t)}removeConnectivityStateListener(t){let e=this.stateListeners.indexOf(t);e>-1&&this.stateListeners.splice(e,1)}ref(){this.child.ref(),this.refCount+=1}unref(){if(this.child.unref(),this.refCount-=1,this.refCount<=0&&this.mapEntry){let t=this.mapEntry.subchannelWrappers.indexOf(this);t>=0&&this.mapEntry.subchannelWrappers.splice(t,1)}}eject(){this.ejected=!0;for(let t of this.stateListeners)t(this,this.childSubchannelState,Xv.ConnectivityState.TRANSIENT_FAILURE,-1)}uneject(){this.ejected=!1;for(let t of this.stateListeners)t(this,Xv.ConnectivityState.TRANSIENT_FAILURE,this.childSubchannelState,-1)}getMapEntry(){return this.mapEntry}getWrappedSubchannel(){return this.child}};function PT(){return{success:0,failure:0}}var FT=class{constructor(){this.activeBucket=PT(),this.inactiveBucket=PT()}addSuccess(){this.activeBucket.success+=1}addFailure(){this.activeBucket.failure+=1}switchBuckets(){this.inactiveBucket=this.activeBucket,this.activeBucket=PT()}getLastSuccesses(){return this.inactiveBucket.success}getLastFailures(){return this.inactiveBucket.failure}},NT=class{constructor(t,e){this.wrappedPicker=t,this.countCalls=e}pick(t){let e=this.wrappedPicker.pick(t);if(e.pickResultType===Wre.PickResultType.COMPLETE){let n=e.subchannel,r=n.getMapEntry();if(r){let s=e.onCallEnded;return this.countCalls&&(s=o=>{var a;o===$V.Status.OK?r.counter.addSuccess():r.counter.addFailure(),(a=e.onCallEnded)===null||a===void 0||a.call(e,o)}),Object.assign(Object.assign({},e),{subchannel:n.getWrappedSubchannel(),onCallEnded:s})}else return Object.assign(Object.assign({},e),{subchannel:n.getWrappedSubchannel()})}else return e}},Zv=class{constructor(t){this.addressMap=new Map,this.latestConfig=null,this.timerStartTime=null,this.childBalancer=new qre.ChildLoadBalancerHandler((0,KV.createChildChannelControlHelper)(t,{createSubchannel:(e,n)=>{let r=t.createSubchannel(e,n),s=this.addressMap.get((0,GV.subchannelAddressToString)(e)),o=new RT(r,s);return s?.currentEjectionTimestamp!==null&&o.eject(),s?.subchannelWrappers.push(o),o},updateState:(e,n)=>{e===Xv.ConnectivityState.READY?t.updateState(e,new NT(n,this.isCountingEnabled())):t.updateState(e,n)}})),this.ejectionTimer=setInterval(()=>{},0),clearInterval(this.ejectionTimer)}isCountingEnabled(){return this.latestConfig!==null&&(this.latestConfig.getSuccessRateEjectionConfig()!==null||this.latestConfig.getFailurePercentageEjectionConfig()!==null)}getCurrentEjectionPercent(){let t=0;for(let e of this.addressMap.values())e.currentEjectionTimestamp!==null&&(t+=1);return t*100/this.addressMap.size}runSuccessRateCheck(t){if(!this.latestConfig)return;let e=this.latestConfig.getSuccessRateEjectionConfig();if(!e)return;hn("Running success rate check");let n=e.request_volume,r=0,s=[];for(let[u,h]of this.addressMap){let m=h.counter.getLastSuccesses(),_=h.counter.getLastFailures();hn("Stats for "+u+": successes="+m+" failures="+_+" targetRequestVolume="+n),m+_>=n&&(r+=1,s.push(m/(m+_)))}if(hn("Found "+r+" success rate candidates; currentEjectionPercent="+this.getCurrentEjectionPercent()+" successRates=["+s+"]"),r<e.minimum_hosts)return;let o=s.reduce((u,h)=>u+h)/s.length,a=0;for(let u of s){let h=u-o;a+=h*h}let l=a/s.length,c=Math.sqrt(l),d=o-c*(e.stdev_factor/1e3);hn("stdev="+c+" ejectionThreshold="+d);for(let[u,h]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let m=h.counter.getLastSuccesses(),_=h.counter.getLastFailures();if(m+_<n)continue;let b=m/(m+_);if(hn("Checking candidate "+u+" successRate="+b),b<d){let v=Math.random()*100;hn("Candidate "+u+" randomNumber="+v+" enforcement_percentage="+e.enforcement_percentage),v<e.enforcement_percentage&&(hn("Ejecting candidate "+u),this.eject(h,t))}}}runFailurePercentageCheck(t){if(!this.latestConfig)return;let e=this.latestConfig.getFailurePercentageEjectionConfig();if(!e)return;hn("Running failure percentage check. threshold="+e.threshold+" request volume threshold="+e.request_volume);let n=0;for(let r of this.addressMap.values()){let s=r.counter.getLastSuccesses(),o=r.counter.getLastFailures();s+o>=e.request_volume&&(n+=1)}if(!(n<e.minimum_hosts))for(let[r,s]of this.addressMap.entries()){if(this.getCurrentEjectionPercent()>=this.latestConfig.getMaxEjectionPercent())break;let o=s.counter.getLastSuccesses(),a=s.counter.getLastFailures();if(hn("Candidate successes="+o+" failures="+a),o+a<e.request_volume)continue;if(a*100/(a+o)>e.threshold){let c=Math.random()*100;hn("Candidate "+r+" randomNumber="+c+" enforcement_percentage="+e.enforcement_percentage),c<e.enforcement_percentage&&(hn("Ejecting candidate "+r),this.eject(s,t))}}}eject(t,e){t.currentEjectionTimestamp=new Date,t.ejectionTimeMultiplier+=1;for(let n of t.subchannelWrappers)n.eject()}uneject(t){t.currentEjectionTimestamp=null;for(let e of t.subchannelWrappers)e.uneject()}switchAllBuckets(){for(let t of this.addressMap.values())t.counter.switchBuckets()}startTimer(t){var e,n;this.ejectionTimer=setTimeout(()=>this.runChecks(),t),(n=(e=this.ejectionTimer).unref)===null||n===void 0||n.call(e)}runChecks(){let t=new Date;if(hn("Ejection timer running"),this.switchAllBuckets(),!!this.latestConfig){this.timerStartTime=t,this.startTimer(this.latestConfig.getIntervalMs()),this.runSuccessRateCheck(t),this.runFailurePercentageCheck(t);for(let[e,n]of this.addressMap.entries())if(n.currentEjectionTimestamp===null)n.ejectionTimeMultiplier>0&&(n.ejectionTimeMultiplier-=1);else{let r=this.latestConfig.getBaseEjectionTimeMs(),s=this.latestConfig.getMaxEjectionTimeMs(),o=new Date(n.currentEjectionTimestamp.getTime());o.setMilliseconds(o.getMilliseconds()+Math.min(r*n.ejectionTimeMultiplier,Math.max(r,s))),o<new Date&&(hn("Unejecting "+e),this.uneject(n))}}}updateAddressList(t,e,n){if(!(e instanceof Gp))return;let r=new Set;for(let o of t)r.add((0,GV.subchannelAddressToString)(o));for(let o of r)this.addressMap.has(o)||(hn("Adding map entry for "+o),this.addressMap.set(o,{counter:new FT,currentEjectionTimestamp:null,ejectionTimeMultiplier:0,subchannelWrappers:[]}));for(let o of this.addressMap.keys())r.has(o)||(hn("Removing map entry for "+o),this.addressMap.delete(o));let s=(0,YV.getFirstUsableConfig)(e.getChildPolicy(),!0);if(this.childBalancer.updateAddressList(t,s,n),e.getSuccessRateEjectionConfig()||e.getFailurePercentageEjectionConfig())if(this.timerStartTime){hn("Previous timer existed. Replacing timer"),clearTimeout(this.ejectionTimer);let o=e.getIntervalMs()-(new Date().getTime()-this.timerStartTime.getTime());this.startTimer(o)}else hn("Starting new timer"),this.timerStartTime=new Date,this.startTimer(e.getIntervalMs()),this.switchAllBuckets();else{hn("Counting disabled. Cancelling timer."),this.timerStartTime=null,clearTimeout(this.ejectionTimer);for(let o of this.addressMap.values())this.uneject(o),o.ejectionTimeMultiplier=0}this.latestConfig=e}exitIdle(){this.childBalancer.exitIdle()}resetBackoff(){this.childBalancer.resetBackoff()}destroy(){clearTimeout(this.ejectionTimer),this.childBalancer.destroy()}getTypeName(){return LT}};yl.OutlierDetectionLoadBalancer=Zv;function Zre(){Yre&&(0,KV.registerLoadBalancerType)(LT,Zv,Gp)}yl.setup=Zre});var VT=G(Ke=>{"use strict";Object.defineProperty(Ke,"__esModule",{value:!0});Ke.OutlierDetectionLoadBalancingConfig=Ke.BaseSubchannelWrapper=Ke.registerAdminService=Ke.FilterStackFactory=Ke.BaseFilter=Ke.PickResultType=Ke.QueuePicker=Ke.UnavailablePicker=Ke.ChildLoadBalancerHandler=Ke.subchannelAddressToString=Ke.validateLoadBalancingConfig=Ke.getFirstUsableConfig=Ke.registerLoadBalancerType=Ke.createChildChannelControlHelper=Ke.BackoffTimeout=Ke.durationToMs=Ke.uriToString=Ke.createResolver=Ke.registerResolver=Ke.log=Ke.trace=void 0;var QV=Ti();Object.defineProperty(Ke,"trace",{enumerable:!0,get:function(){return QV.trace}});Object.defineProperty(Ke,"log",{enumerable:!0,get:function(){return QV.log}});var XV=to();Object.defineProperty(Ke,"registerResolver",{enumerable:!0,get:function(){return XV.registerResolver}});Object.defineProperty(Ke,"createResolver",{enumerable:!0,get:function(){return XV.createResolver}});var Jre=Tr();Object.defineProperty(Ke,"uriToString",{enumerable:!0,get:function(){return Jre.uriToString}});var ese=MT();Object.defineProperty(Ke,"durationToMs",{enumerable:!0,get:function(){return ese.durationToMs}});var tse=up();Object.defineProperty(Ke,"BackoffTimeout",{enumerable:!0,get:function(){return tse.BackoffTimeout}});var Jv=Qa();Object.defineProperty(Ke,"createChildChannelControlHelper",{enumerable:!0,get:function(){return Jv.createChildChannelControlHelper}});Object.defineProperty(Ke,"registerLoadBalancerType",{enumerable:!0,get:function(){return Jv.registerLoadBalancerType}});Object.defineProperty(Ke,"getFirstUsableConfig",{enumerable:!0,get:function(){return Jv.getFirstUsableConfig}});Object.defineProperty(Ke,"validateLoadBalancingConfig",{enumerable:!0,get:function(){return Jv.validateLoadBalancingConfig}});var ise=no();Object.defineProperty(Ke,"subchannelAddressToString",{enumerable:!0,get:function(){return ise.subchannelAddressToString}});var nse=O0();Object.defineProperty(Ke,"ChildLoadBalancerHandler",{enumerable:!0,get:function(){return nse.ChildLoadBalancerHandler}});var zT=el();Object.defineProperty(Ke,"UnavailablePicker",{enumerable:!0,get:function(){return zT.UnavailablePicker}});Object.defineProperty(Ke,"QueuePicker",{enumerable:!0,get:function(){return zT.QueuePicker}});Object.defineProperty(Ke,"PickResultType",{enumerable:!0,get:function(){return zT.PickResultType}});var rse=tT();Object.defineProperty(Ke,"BaseFilter",{enumerable:!0,get:function(){return rse.BaseFilter}});var sse=ZE();Object.defineProperty(Ke,"FilterStackFactory",{enumerable:!0,get:function(){return sse.FilterStackFactory}});var ose=R0();Object.defineProperty(Ke,"registerAdminService",{enumerable:!0,get:function(){return ose.registerAdminService}});var ase=Vv();Object.defineProperty(Ke,"BaseSubchannelWrapper",{enumerable:!0,get:function(){return ase.BaseSubchannelWrapper}});var lse=BT();Object.defineProperty(Ke,"OutlierDetectionLoadBalancingConfig",{enumerable:!0,get:function(){return lse.OutlierDetectionLoadBalancingConfig}})});var ZV=G(ey=>{"use strict";Object.defineProperty(ey,"__esModule",{value:!0});ey.setup=void 0;var cse=to(),jT=class{constructor(t,e,n){this.listener=e,this.addresses=[],this.hasReturnedResult=!1;let r;t.authority===""?r="/"+t.path:r=t.path,this.addresses=[{path:r}]}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(this.listener.onSuccessfulResolution,this.addresses,null,null,null,{}))}destroy(){}static getDefaultAuthority(t){return"localhost"}};function dse(){(0,cse.registerResolver)("unix",jT)}ey.setup=dse});var n5=G(ny=>{"use strict";Object.defineProperty(ny,"__esModule",{value:!0});ny.setup=void 0;var JV=Be("net"),ty=Mt(),UT=lr(),e5=to(),t5=Tr(),use=Ti(),hse="ip_resolver";function i5(i){use.trace(ty.LogVerbosity.DEBUG,hse,i)}var HT="ipv4",qT="ipv6",mse=443,iy=class{constructor(t,e,n){var r;this.listener=e,this.addresses=[],this.error=null,this.hasReturnedResult=!1,i5("Resolver constructed for target "+(0,t5.uriToString)(t));let s=[];if(!(t.scheme===HT||t.scheme===qT)){this.error={code:ty.Status.UNAVAILABLE,details:`Unrecognized scheme ${t.scheme} in IP resolver`,metadata:new UT.Metadata};return}let o=t.path.split(",");for(let a of o){let l=(0,t5.splitHostPort)(a);if(l===null){this.error={code:ty.Status.UNAVAILABLE,details:`Failed to parse ${t.scheme} address ${a}`,metadata:new UT.Metadata};return}if(t.scheme===HT&&!(0,JV.isIPv4)(l.host)||t.scheme===qT&&!(0,JV.isIPv6)(l.host)){this.error={code:ty.Status.UNAVAILABLE,details:`Failed to parse ${t.scheme} address ${a}`,metadata:new UT.Metadata};return}s.push({host:l.host,port:(r=l.port)!==null&&r!==void 0?r:mse})}this.addresses=s,i5("Parsed "+t.scheme+" address list "+this.addresses)}updateResolution(){this.hasReturnedResult||(this.hasReturnedResult=!0,process.nextTick(()=>{this.error?this.listener.onError(this.error):this.listener.onSuccessfulResolution(this.addresses,null,null,null,{})}))}destroy(){this.hasReturnedResult=!1}static getDefaultAuthority(t){return t.path.split(",")[0]}};function fse(){(0,e5.registerResolver)(HT,iy),(0,e5.registerResolver)(qT,iy)}ny.setup=fse});var o5=G(go=>{"use strict";Object.defineProperty(go,"__esModule",{value:!0});go.setup=go.PickFirstLoadBalancer=go.shuffled=go.PickFirstLoadBalancingConfig=void 0;var r5=Qa(),Rn=Zr(),ry=el(),pse=Ti(),gse=Mt(),_se="pick_first";function WT(i){pse.trace(gse.LogVerbosity.DEBUG,_se,i)}var $p="pick_first",bse=250,Kp=class i{constructor(t){this.shuffleAddressList=t}getLoadBalancerName(){return $p}toJsonObject(){return{[$p]:{shuffleAddressList:this.shuffleAddressList}}}getShuffleAddressList(){return this.shuffleAddressList}static createFromJson(t){if("shuffleAddressList"in t&&typeof t.shuffleAddressList!="boolean")throw new Error("pick_first config field shuffleAddressList must be a boolean if provided");return new i(t.shuffleAddressList===!0)}};go.PickFirstLoadBalancingConfig=Kp;var GT=class{constructor(t){this.subchannel=t}pick(t){return{pickResultType:ry.PickResultType.COMPLETE,subchannel:this.subchannel,status:null,onCallStarted:null,onCallEnded:null}}};function s5(i){let t=i.slice();for(let e=t.length-1;e>1;e--){let n=Math.floor(Math.random()*(e+1)),r=t[e];t[e]=t[n],t[n]=r}return t}go.shuffled=s5;var sy=class{constructor(t){this.channelControlHelper=t,this.children=[],this.currentState=Rn.ConnectivityState.IDLE,this.currentSubchannelIndex=0,this.currentPick=null,this.subchannelStateListener=(e,n,r,s,o)=>{this.onSubchannelStateUpdate(e,n,r,o)},this.triedAllSubchannels=!1,this.stickyTransientFailureMode=!1,this.requestedResolutionSinceLastUpdate=!1,this.lastError=null,this.latestAddressList=null,this.connectionDelayTimeout=setTimeout(()=>{},0),clearTimeout(this.connectionDelayTimeout)}allChildrenHaveReportedTF(){return this.children.every(t=>t.hasReportedTransientFailure)}calculateAndReportNewState(){this.currentPick?this.updateState(Rn.ConnectivityState.READY,new GT(this.currentPick)):this.children.length===0?this.updateState(Rn.ConnectivityState.IDLE,new ry.QueuePicker(this)):this.stickyTransientFailureMode?this.updateState(Rn.ConnectivityState.TRANSIENT_FAILURE,new ry.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(Rn.ConnectivityState.CONNECTING,new ry.QueuePicker(this))}requestReresolution(){this.requestedResolutionSinceLastUpdate=!0,this.channelControlHelper.requestReresolution()}maybeEnterStickyTransientFailureMode(){if(this.allChildrenHaveReportedTF()&&(this.requestedResolutionSinceLastUpdate||this.requestReresolution(),!this.stickyTransientFailureMode)){this.stickyTransientFailureMode=!0;for(let{subchannel:t}of this.children)t.startConnecting();this.calculateAndReportNewState()}}removeCurrentPick(){if(this.currentPick!==null){let t=this.currentPick;this.currentPick=null,t.unref(),t.removeConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.removeChannelzChild(t.getChannelzRef())}}onSubchannelStateUpdate(t,e,n,r){var s;if(!((s=this.currentPick)===null||s===void 0)&&s.realSubchannelEquals(t)){n!==Rn.ConnectivityState.READY&&(this.removeCurrentPick(),this.calculateAndReportNewState(),this.requestReresolution());return}for(let[o,a]of this.children.entries())if(t.realSubchannelEquals(a.subchannel)){n===Rn.ConnectivityState.READY&&this.pickSubchannel(a.subchannel),n===Rn.ConnectivityState.TRANSIENT_FAILURE&&(a.hasReportedTransientFailure=!0,r&&(this.lastError=r),this.maybeEnterStickyTransientFailureMode(),o===this.currentSubchannelIndex&&this.startNextSubchannelConnecting(o+1)),a.subchannel.startConnecting();return}}startNextSubchannelConnecting(t){if(clearTimeout(this.connectionDelayTimeout),!this.triedAllSubchannels){for(let[e,n]of this.children.entries())if(e>=t){let r=n.subchannel.getConnectivityState();if(r===Rn.ConnectivityState.IDLE||r===Rn.ConnectivityState.CONNECTING){this.startConnecting(e);return}}this.triedAllSubchannels=!0,this.maybeEnterStickyTransientFailureMode()}}startConnecting(t){var e,n;clearTimeout(this.connectionDelayTimeout),this.currentSubchannelIndex=t,this.children[t].subchannel.getConnectivityState()===Rn.ConnectivityState.IDLE&&(WT("Start connecting to subchannel with address "+this.children[t].subchannel.getAddress()),process.nextTick(()=>{var r;(r=this.children[t])===null||r===void 0||r.subchannel.startConnecting()})),this.connectionDelayTimeout=(n=(e=setTimeout(()=>{this.startNextSubchannelConnecting(t+1)},bse)).unref)===null||n===void 0?void 0:n.call(e)}pickSubchannel(t){this.currentPick&&t.realSubchannelEquals(this.currentPick)||(WT("Pick subchannel with address "+t.getAddress()),this.stickyTransientFailureMode=!1,this.currentPick!==null&&(this.currentPick.unref(),this.channelControlHelper.removeChannelzChild(this.currentPick.getChannelzRef()),this.currentPick.removeConnectivityStateListener(this.subchannelStateListener)),this.currentPick=t,t.ref(),this.channelControlHelper.addChannelzChild(t.getChannelzRef()),this.resetSubchannelList(),clearTimeout(this.connectionDelayTimeout),this.calculateAndReportNewState())}updateState(t,e){WT(Rn.ConnectivityState[this.currentState]+" -> "+Rn.ConnectivityState[t]),this.currentState=t,this.channelControlHelper.updateState(t,e)}resetSubchannelList(){for(let t of this.children)this.currentPick&&t.subchannel.realSubchannelEquals(this.currentPick)||t.subchannel.removeConnectivityStateListener(this.subchannelStateListener),t.subchannel.unref(),this.channelControlHelper.removeChannelzChild(t.subchannel.getChannelzRef());this.currentSubchannelIndex=0,this.children=[],this.triedAllSubchannels=!1,this.requestedResolutionSinceLastUpdate=!1}connectToAddressList(t){let e=t.map(n=>({subchannel:this.channelControlHelper.createSubchannel(n,{}),hasReportedTransientFailure:!1}));for(let{subchannel:n}of e)n.ref(),this.channelControlHelper.addChannelzChild(n.getChannelzRef());this.resetSubchannelList(),this.children=e;for(let{subchannel:n}of this.children)if(n.addConnectivityStateListener(this.subchannelStateListener),n.getConnectivityState()===Rn.ConnectivityState.READY){this.pickSubchannel(n);return}for(let n of this.children)n.subchannel.getConnectivityState()===Rn.ConnectivityState.TRANSIENT_FAILURE&&(n.hasReportedTransientFailure=!0);this.startNextSubchannelConnecting(0),this.calculateAndReportNewState()}updateAddressList(t,e){e instanceof Kp&&(e.getShuffleAddressList()&&(t=s5(t)),this.latestAddressList=t,this.connectToAddressList(t))}exitIdle(){this.currentState===Rn.ConnectivityState.IDLE&&this.latestAddressList&&this.connectToAddressList(this.latestAddressList)}resetBackoff(){}destroy(){this.resetSubchannelList(),this.removeCurrentPick()}getTypeName(){return $p}};go.PickFirstLoadBalancer=sy;function vse(){(0,r5.registerLoadBalancerType)($p,sy,Kp),(0,r5.registerDefaultLoadBalancerType)($p)}go.setup=vse});var l5=G(_h=>{"use strict";Object.defineProperty(_h,"__esModule",{value:!0});_h.setup=_h.RoundRobinLoadBalancer=void 0;var yse=Qa(),Fn=Zr(),oy=el(),xse=no(),wse=Ti(),Cse=Mt(),Sse="round_robin";function a5(i){wse.trace(Cse.LogVerbosity.DEBUG,Sse,i)}var ay="round_robin",$T=class i{getLoadBalancerName(){return ay}constructor(){}toJsonObject(){return{[ay]:{}}}static createFromJson(t){return new i}},KT=class{constructor(t,e=0){this.subchannelList=t,this.nextIndex=e}pick(t){let e=this.subchannelList[this.nextIndex];return this.nextIndex=(this.nextIndex+1)%this.subchannelList.length,{pickResultType:oy.PickResultType.COMPLETE,subchannel:e,status:null,onCallStarted:null,onCallEnded:null}}peekNextSubchannel(){return this.subchannelList[this.nextIndex]}},ly=class{constructor(t){this.channelControlHelper=t,this.subchannels=[],this.currentState=Fn.ConnectivityState.IDLE,this.currentReadyPicker=null,this.lastError=null,this.subchannelStateListener=(e,n,r,s,o)=>{this.calculateAndUpdateState(),(r===Fn.ConnectivityState.TRANSIENT_FAILURE||r===Fn.ConnectivityState.IDLE)&&(o&&(this.lastError=o),this.channelControlHelper.requestReresolution(),e.startConnecting())}}countSubchannelsWithState(t){return this.subchannels.filter(e=>e.getConnectivityState()===t).length}calculateAndUpdateState(){if(this.countSubchannelsWithState(Fn.ConnectivityState.READY)>0){let t=this.subchannels.filter(n=>n.getConnectivityState()===Fn.ConnectivityState.READY),e=0;this.currentReadyPicker!==null&&(e=t.indexOf(this.currentReadyPicker.peekNextSubchannel()),e<0&&(e=0)),this.updateState(Fn.ConnectivityState.READY,new KT(t,e))}else this.countSubchannelsWithState(Fn.ConnectivityState.CONNECTING)>0?this.updateState(Fn.ConnectivityState.CONNECTING,new oy.QueuePicker(this)):this.countSubchannelsWithState(Fn.ConnectivityState.TRANSIENT_FAILURE)>0?this.updateState(Fn.ConnectivityState.TRANSIENT_FAILURE,new oy.UnavailablePicker({details:`No connection established. Last error: ${this.lastError}`})):this.updateState(Fn.ConnectivityState.IDLE,new oy.QueuePicker(this))}updateState(t,e){a5(Fn.ConnectivityState[this.currentState]+" -> "+Fn.ConnectivityState[t]),t===Fn.ConnectivityState.READY?this.currentReadyPicker=e:this.currentReadyPicker=null,this.currentState=t,this.channelControlHelper.updateState(t,e)}resetSubchannelList(){for(let t of this.subchannels)t.removeConnectivityStateListener(this.subchannelStateListener),t.unref(),this.channelControlHelper.removeChannelzChild(t.getChannelzRef());this.subchannels=[]}updateAddressList(t,e){this.resetSubchannelList(),a5("Connect to address list "+t.map(n=>(0,xse.subchannelAddressToString)(n))),this.subchannels=t.map(n=>this.channelControlHelper.createSubchannel(n,{}));for(let n of this.subchannels){n.ref(),n.addConnectivityStateListener(this.subchannelStateListener),this.channelControlHelper.addChannelzChild(n.getChannelzRef());let r=n.getConnectivityState();(r===Fn.ConnectivityState.IDLE||r===Fn.ConnectivityState.TRANSIENT_FAILURE)&&n.startConnecting()}this.calculateAndUpdateState()}exitIdle(){for(let t of this.subchannels)t.startConnecting()}resetBackoff(){}destroy(){this.resetSubchannelList()}getTypeName(){return ay}};_h.RoundRobinLoadBalancer=ly;function kse(){(0,yse.registerLoadBalancerType)(ay,ly,$T)}_h.setup=kse});var h5=G(Te=>{"use strict";Object.defineProperty(Te,"__esModule",{value:!0});Te.experimental=Te.addAdminServicesToServer=Te.getChannelzHandlers=Te.getChannelzServiceDefinition=Te.InterceptorConfigurationError=Te.InterceptingCall=Te.RequesterBuilder=Te.ListenerBuilder=Te.StatusBuilder=Te.getClientChannel=Te.ServerCredentials=Te.Server=Te.setLogVerbosity=Te.setLogger=Te.load=Te.loadObject=Te.CallCredentials=Te.ChannelCredentials=Te.waitForClientReady=Te.closeClient=Te.Channel=Te.makeGenericClientConstructor=Te.makeClientConstructor=Te.loadPackageDefinition=Te.Client=Te.compressionAlgorithms=Te.propagate=Te.connectivityState=Te.status=Te.logVerbosity=Te.Metadata=Te.credentials=void 0;var cy=WS();Object.defineProperty(Te,"CallCredentials",{enumerable:!0,get:function(){return cy.CallCredentials}});var Ese=Ck();Object.defineProperty(Te,"Channel",{enumerable:!0,get:function(){return Ese.ChannelImplementation}});var Tse=JE();Object.defineProperty(Te,"compressionAlgorithms",{enumerable:!0,get:function(){return Tse.CompressionAlgorithms}});var Ise=Zr();Object.defineProperty(Te,"connectivityState",{enumerable:!0,get:function(){return Ise.ConnectivityState}});var dy=k0();Object.defineProperty(Te,"ChannelCredentials",{enumerable:!0,get:function(){return dy.ChannelCredentials}});var c5=wk();Object.defineProperty(Te,"Client",{enumerable:!0,get:function(){return c5.Client}});var YT=Mt();Object.defineProperty(Te,"logVerbosity",{enumerable:!0,get:function(){return YT.LogVerbosity}});Object.defineProperty(Te,"status",{enumerable:!0,get:function(){return YT.Status}});Object.defineProperty(Te,"propagate",{enumerable:!0,get:function(){return YT.Propagate}});var d5=Ti(),QT=kk();Object.defineProperty(Te,"loadPackageDefinition",{enumerable:!0,get:function(){return QT.loadPackageDefinition}});Object.defineProperty(Te,"makeClientConstructor",{enumerable:!0,get:function(){return QT.makeClientConstructor}});Object.defineProperty(Te,"makeGenericClientConstructor",{enumerable:!0,get:function(){return QT.makeClientConstructor}});var Dse=lr();Object.defineProperty(Te,"Metadata",{enumerable:!0,get:function(){return Dse.Metadata}});var Mse=qV();Object.defineProperty(Te,"Server",{enumerable:!0,get:function(){return Mse.Server}});var Ase=ET();Object.defineProperty(Te,"ServerCredentials",{enumerable:!0,get:function(){return Ase.ServerCredentials}});var Ose=WV();Object.defineProperty(Te,"StatusBuilder",{enumerable:!0,get:function(){return Ose.StatusBuilder}});Te.credentials={combineChannelCredentials:(i,...t)=>t.reduce((e,n)=>e.compose(n),i),combineCallCredentials:(i,...t)=>t.reduce((e,n)=>e.compose(n),i),createInsecure:dy.ChannelCredentials.createInsecure,createSsl:dy.ChannelCredentials.createSsl,createFromSecureContext:dy.ChannelCredentials.createFromSecureContext,createFromMetadataGenerator:cy.CallCredentials.createFromMetadataGenerator,createFromGoogleCredential:cy.CallCredentials.createFromGoogleCredential,createEmpty:cy.CallCredentials.createEmpty};var Pse=i=>i.close();Te.closeClient=Pse;var Rse=(i,t,e)=>i.waitForReady(t,e);Te.waitForClientReady=Rse;var Fse=(i,t)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};Te.loadObject=Fse;var Nse=(i,t,e)=>{throw new Error("Not available in this library. Use @grpc/proto-loader and loadPackageDefinition instead")};Te.load=Nse;var Lse=i=>{d5.setLogger(i)};Te.setLogger=Lse;var Bse=i=>{d5.setLoggerVerbosity(i)};Te.setLogVerbosity=Bse;var Vse=i=>c5.Client.prototype.getChannel.call(i);Te.getClientChannel=Vse;var uy=vk();Object.defineProperty(Te,"ListenerBuilder",{enumerable:!0,get:function(){return uy.ListenerBuilder}});Object.defineProperty(Te,"RequesterBuilder",{enumerable:!0,get:function(){return uy.RequesterBuilder}});Object.defineProperty(Te,"InterceptingCall",{enumerable:!0,get:function(){return uy.InterceptingCall}});Object.defineProperty(Te,"InterceptorConfigurationError",{enumerable:!0,get:function(){return uy.InterceptorConfigurationError}});var u5=td();Object.defineProperty(Te,"getChannelzServiceDefinition",{enumerable:!0,get:function(){return u5.getChannelzServiceDefinition}});Object.defineProperty(Te,"getChannelzHandlers",{enumerable:!0,get:function(){return u5.getChannelzHandlers}});var zse=R0();Object.defineProperty(Te,"addAdminServicesToServer",{enumerable:!0,get:function(){return zse.addAdminServicesToServer}});var jse=VT();Te.experimental=jse;var Use=zE(),Hse=ZV(),qse=n5(),Wse=o5(),Gse=l5(),$se=BT(),Kse=td();Use.setup(),Hse.setup(),qse.setup(),Wse.setup(),Gse.setup(),$se.setup(),Kse.setup()});var Io=G((qA,X6)=>{"use strict";var $x=Be("buffer"),To=$x.Buffer;function Q6(i,t){for(var e in i)t[e]=i[e]}To.from&&To.alloc&&To.allocUnsafe&&To.allocUnsafeSlow?X6.exports=$x:(Q6($x,qA),qA.Buffer=Ld);function Ld(i,t,e){return To(i,t,e)}Ld.prototype=Object.create(To.prototype);Q6(To,Ld);Ld.from=function(i,t,e){if(typeof i=="number")throw new TypeError("Argument must not be a number");return To(i,t,e)};Ld.alloc=function(i,t,e){if(typeof i!="number")throw new TypeError("Argument must be a number");var n=To(i);return t!==void 0?typeof e=="string"?n.fill(t,e):n.fill(t):n.fill(0),n};Ld.allocUnsafe=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return To(i)};Ld.allocUnsafeSlow=function(i){if(typeof i!="number")throw new TypeError("Argument must be a number");return $x.SlowBuffer(i)}});var e8=G(WA=>{"use strict";var Z6=Be("stream").Stream,J6=Be("util"),Bd=function(i){this.readable=this.writable=!0,this._paused=!1,this._driver=i};J6.inherits(Bd,Z6);Bd.prototype.pause=function(){this._paused=!0,this._driver.messages._paused=!0};Bd.prototype.resume=function(){this._paused=!1,this.emit("drain");var i=this._driver.messages;i._paused=!1,i.emit("drain")};Bd.prototype.write=function(i){return this.writable?(this._driver.parse(i),!this._paused):!1};Bd.prototype.end=function(i){if(this.writable){i!==void 0&&this.write(i),this.writable=!1;var t=this._driver.messages;t.readable&&(t.readable=t.writable=!1,t.emit("end"))}};Bd.prototype.destroy=function(){this.end()};var Vd=function(i){this.readable=this.writable=!0,this._paused=!1,this._driver=i};J6.inherits(Vd,Z6);Vd.prototype.pause=function(){this._driver.io._paused=!0};Vd.prototype.resume=function(){this._driver.io._paused=!1,this._driver.io.emit("drain")};Vd.prototype.write=function(i){return this.writable?(typeof i=="string"?this._driver.text(i):this._driver.binary(i),!this._paused):!1};Vd.prototype.end=function(i){i!==void 0&&this.write(i)};Vd.prototype.destroy=function(){};WA.IO=Bd;WA.Messages=Vd});var Kx=G((rNe,t8)=>{"use strict";var mm=function(){this.clear()};mm.prototype.ALLOWED_DUPLICATES=["set-cookie","set-cookie2","warning","www-authenticate"];mm.prototype.clear=function(){this._sent={},this._lines=[]};mm.prototype.set=function(i,t){if(t!==void 0){i=this._strip(i),t=this._strip(t);var e=i.toLowerCase();(!this._sent.hasOwnProperty(e)||this.ALLOWED_DUPLICATES.indexOf(e)>=0)&&(this._sent[e]=!0,this._lines.push(i+": "+t+`\r
`))}};mm.prototype.toString=function(){return this._lines.join("")};mm.prototype._strip=function(i){return i.toString().replace(/^ */,"").replace(/ *$/,"")};t8.exports=mm});var n8=G((sNe,i8)=>{"use strict";var Yx=Io().Buffer,Qx=function(){this._queue=[],this._queueSize=0,this._offset=0};Qx.prototype.put=function(i){!i||i.length===0||(Yx.isBuffer(i)||(i=Yx.from(i)),this._queue.push(i),this._queueSize+=i.length)};Qx.prototype.read=function(i){if(i>this._queueSize)return null;if(i===0)return Yx.alloc(0);this._queueSize-=i;var t=this._queue,e=i,n=t[0],r,s;if(n.length>=i)return n.length===i?t.shift():(s=n.slice(0,i),t[0]=n.slice(i),s);for(var o=0,a=t.length;o<a&&!(e<t[o].length);o++)e-=t[o].length;return r=t.splice(0,o),e>0&&t.length>0&&(r.push(t[0].slice(0,e)),t[0]=t[0].slice(e)),Yx.concat(r,i)};Qx.prototype.eachByte=function(i,t){for(var e,n,r;this._queue.length>0;){for(e=this._queue[0],n=e.length;this._offset<n;)r=this._offset,this._offset+=1,i.call(t,e[r]);this._offset=0,this._queue.shift()}};i8.exports=Qx});var ql=G((oNe,c8)=>{"use strict";var r8=Io().Buffer,a8=Be("events").EventEmitter,Qme=Be("util"),s8=e8(),l8=Kx(),Xme=n8(),Qn=function(i,t,e){a8.call(this),Qn.validateOptions(e||{},["maxLength","masking","requireMasking","protocols"]),this._request=i,this._reader=new Xme,this._options=e||{},this._maxLength=this._options.maxLength||this.MAX_LENGTH,this._headers=new l8,this.__queue=[],this.readyState=0,this.url=t,this.io=new s8.IO(this),this.messages=new s8.Messages(this),this._bindEventListeners()};Qme.inherits(Qn,a8);Qn.isWebSocket=function(i){var t=i.headers.connection||"",e=i.headers.upgrade||"";return i.method==="GET"&&t.toLowerCase().split(/ *, */).indexOf("upgrade")>=0&&e.toLowerCase()==="websocket"};Qn.validateOptions=function(i,t){for(var e in i)if(t.indexOf(e)<0)throw new Error("Unrecognized option: "+e)};var o8={MAX_LENGTH:67108863,STATES:["connecting","open","closing","closed"],_bindEventListeners:function(){var i=this;this.messages.on("error",function(){}),this.on("message",function(t){var e=i.messages;e.readable&&e.emit("data",t.data)}),this.on("error",function(t){var e=i.messages;e.readable&&e.emit("error",t)}),this.on("close",function(){var t=i.messages;t.readable&&(t.readable=t.writable=!1,t.emit("end"))})},getState:function(){return this.STATES[this.readyState]||null},addExtension:function(i){return!1},setHeader:function(i,t){return this.readyState>0?!1:(this._headers.set(i,t),!0)},start:function(){if(this.readyState!==0)return!1;if(!Qn.isWebSocket(this._request))return this._failHandshake(new Error("Not a WebSocket request"));var i;try{i=this._handshakeResponse()}catch(t){return this._failHandshake(t)}return this._write(i),this._stage!==-1&&this._open(),!0},_failHandshake:function(i){var t=new l8;return t.set("Content-Type","text/plain"),t.set("Content-Length",r8.byteLength(i.message,"utf8")),t=["HTTP/1.1 400 Bad Request",t.toString(),i.message],this._write(r8.from(t.join(`\r
`),"utf8")),this._fail("protocol_error",i.message),!1},text:function(i){return this.frame(i)},binary:function(i){return!1},ping:function(){return!1},pong:function(){return!1},close:function(i,t){return this.readyState!==1?!1:(this.readyState=3,this.emit("close",new Qn.CloseEvent(null,null)),!0)},_open:function(){this.readyState=1,this.__queue.forEach(function(i){this.frame.apply(this,i)},this),this.__queue=[],this.emit("open",new Qn.OpenEvent)},_queue:function(i){return this.__queue.push(i),!0},_write:function(i){var t=this.io;t.readable&&t.emit("data",i)},_fail:function(i,t){this.readyState=2,this.emit("error",new Error(t)),this.close()}};for(GA in o8)Qn.prototype[GA]=o8[GA];var GA;Qn.ConnectEvent=function(){};Qn.OpenEvent=function(){};Qn.CloseEvent=function(i,t){this.code=i,this.reason=t};Qn.MessageEvent=function(i){this.data=i};Qn.PingEvent=function(i){this.data=i};Qn.PongEvent=function(i){this.data=i};c8.exports=Qn});var f8=G(YA=>{"use strict";YA.HTTPParser=Le;function Le(i){if(i!==void 0&&i!==Le.REQUEST&&i!==Le.RESPONSE)throw new Error("type must be REQUEST or RESPONSE");i===void 0||this.initialize(i),this.maxHeaderSize=Le.maxHeaderSize}Le.prototype.initialize=function(i,t){if(i!==Le.REQUEST&&i!==Le.RESPONSE)throw new Error("type must be REQUEST or RESPONSE");this.type=i,this.state=i+"_LINE",this.info={headers:[],upgrade:!1},this.trailers=[],this.line="",this.isChunked=!1,this.connection="",this.headerSize=0,this.body_bytes=null,this.isUserCall=!1,this.hadError=!1};Le.encoding="ascii";Le.maxHeaderSize=80*1024;Le.REQUEST="REQUEST";Le.RESPONSE="RESPONSE";var d8=Le.kOnHeaders=1,$A=Le.kOnHeadersComplete=2,Xx=Le.kOnBody=3,KA=Le.kOnMessageComplete=4;Le.prototype[d8]=Le.prototype[$A]=Le.prototype[Xx]=Le.prototype[KA]=function(){};var u8=!0;Object.defineProperty(Le,"kOnExecute",{get:function(){return u8=!1,99}});var h8=YA.methods=Le.methods=["DELETE","GET","HEAD","POST","PUT","CONNECT","OPTIONS","TRACE","COPY","LOCK","MKCOL","MOVE","PROPFIND","PROPPATCH","SEARCH","UNLOCK","BIND","REBIND","UNBIND","ACL","REPORT","MKACTIVITY","CHECKOUT","MERGE","M-SEARCH","NOTIFY","SUBSCRIBE","UNSUBSCRIBE","PATCH","PURGE","MKCALENDAR","LINK","UNLINK","SOURCE"],m8=h8.indexOf("CONNECT");Le.prototype.reinitialize=Le;Le.prototype.close=Le.prototype.pause=Le.prototype.resume=Le.prototype.remove=Le.prototype.free=function(){};Le.prototype._compatMode0_11=!1;Le.prototype.getAsyncId=function(){return 0};var Zme={REQUEST_LINE:!0,RESPONSE_LINE:!0,HEADER:!0};Le.prototype.execute=function(i,t,e){if(!(this instanceof Le))throw new TypeError("not a HTTPParser");t=t||0,e=typeof e=="number"?e:i.length,this.chunk=i,this.offset=t;var n=this.end=t+e;try{for(;this.offset<n&&!this[this.state](););}catch(r){if(this.isUserCall)throw r;return this.hadError=!0,r}return this.chunk=null,e=this.offset-t,Zme[this.state]&&(this.headerSize+=e,this.headerSize>(this.maxHeaderSize||Le.maxHeaderSize))?new Error("max header size exceeded"):e};var Jme={REQUEST_LINE:!0,RESPONSE_LINE:!0,BODY_RAW:!0};Le.prototype.finish=function(){if(!this.hadError){if(!Jme[this.state])return new Error("invalid state for EOF");this.state==="BODY_RAW"&&this.userCall()(this[KA]())}};Le.prototype.consume=Le.prototype.unconsume=Le.prototype.getCurrentBuffer=function(){};Le.prototype.userCall=function(){this.isUserCall=!0;var i=this;return function(t){return i.isUserCall=!1,t}};Le.prototype.nextRequest=function(){this.userCall()(this[KA]()),this.reinitialize(this.type)};Le.prototype.consumeLine=function(){for(var i=this.end,t=this.chunk,e=this.offset;e<i;e++)if(t[e]===10){var n=this.line+t.toString(Le.encoding,this.offset,e);return n.charAt(n.length-1)==="\r"&&(n=n.substr(0,n.length-1)),this.line="",this.offset=e+1,n}this.line+=t.toString(Le.encoding,this.offset,this.end),this.offset=this.end};var efe=/^([^: \t]+):[ \t]*((?:.*[^ \t])|)/,tfe=/^[ \t]+(.*[^ \t])/;Le.prototype.parseHeader=function(i,t){if(i.indexOf("\r")!==-1)throw Zx("HPE_LF_EXPECTED");var e=efe.exec(i),n=e&&e[1];if(n)t.push(n),t.push(e[2]);else{var r=tfe.exec(i);r&&t.length&&(t[t.length-1]&&(t[t.length-1]+=" "),t[t.length-1]+=r[1])}};var ife=/^([A-Z-]+) ([^ ]+) HTTP\/(\d)\.(\d)$/;Le.prototype.REQUEST_LINE=function(){var i=this.consumeLine();if(i){var t=ife.exec(i);if(t===null)throw Zx("HPE_INVALID_CONSTANT");if(this.info.method=this._compatMode0_11?t[1]:h8.indexOf(t[1]),this.info.method===-1)throw new Error("invalid request method");this.info.url=t[2],this.info.versionMajor=+t[3],this.info.versionMinor=+t[4],this.body_bytes=0,this.state="HEADER"}};var nfe=/^HTTP\/(\d)\.(\d) (\d{3}) ?(.*)$/;Le.prototype.RESPONSE_LINE=function(){var i=this.consumeLine();if(i){var t=nfe.exec(i);if(t===null)throw Zx("HPE_INVALID_CONSTANT");this.info.versionMajor=+t[1],this.info.versionMinor=+t[2];var e=this.info.statusCode=+t[3];this.info.statusMessage=t[4],((e/100|0)===1||e===204||e===304)&&(this.body_bytes=0),this.state="HEADER"}};Le.prototype.shouldKeepAlive=function(){if(this.info.versionMajor>0&&this.info.versionMinor>0){if(this.connection.indexOf("close")!==-1)return!1}else if(this.connection.indexOf("keep-alive")===-1)return!1;return!!(this.body_bytes!==null||this.isChunked)};Le.prototype.HEADER=function(){var i=this.consumeLine();if(i!==void 0){var t=this.info;if(i)this.parseHeader(i,t.headers);else{for(var e=t.headers,n=!1,r,s=!1,o=0;o<e.length;o+=2)switch(e[o].toLowerCase()){case"transfer-encoding":this.isChunked=e[o+1].toLowerCase()==="chunked";break;case"content-length":if(r=+e[o+1],n){if(r!==this.body_bytes)throw Zx("HPE_UNEXPECTED_CONTENT_LENGTH")}else n=!0,this.body_bytes=r;break;case"connection":this.connection+=e[o+1].toLowerCase();break;case"upgrade":s=!0;break}this.isChunked&&n&&(n=!1,this.body_bytes=null),s&&this.connection.indexOf("upgrade")!=-1?t.upgrade=this.type===Le.REQUEST||t.statusCode===101:t.upgrade=t.method===m8,this.isChunked&&t.upgrade&&(this.isChunked=!1),t.shouldKeepAlive=this.shouldKeepAlive();var a;if(u8?a=this.userCall()(this[$A](t)):a=this.userCall()(this[$A](t.versionMajor,t.versionMinor,t.headers,t.method,t.url,t.statusCode,t.statusMessage,t.upgrade,t.shouldKeepAlive)),a===2)return this.nextRequest(),!0;if(this.isChunked&&!a)this.state="BODY_CHUNKHEAD";else{if(a||this.body_bytes===0)return this.nextRequest(),t.upgrade;this.body_bytes===null?this.state="BODY_RAW":this.state="BODY_SIZED"}}}};Le.prototype.BODY_CHUNKHEAD=function(){var i=this.consumeLine();i!==void 0&&(this.body_bytes=parseInt(i,16),this.body_bytes?this.state="BODY_CHUNK":this.state="BODY_CHUNKTRAILERS")};Le.prototype.BODY_CHUNK=function(){var i=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[Xx](this.chunk.slice(this.offset,this.offset+i),0,i)),this.offset+=i,this.body_bytes-=i,this.body_bytes||(this.state="BODY_CHUNKEMPTYLINE")};Le.prototype.BODY_CHUNKEMPTYLINE=function(){var i=this.consumeLine();if(i!==void 0){if(i!=="")throw new Error("Expected empty line");this.state="BODY_CHUNKHEAD"}};Le.prototype.BODY_CHUNKTRAILERS=function(){var i=this.consumeLine();i!==void 0&&(i?this.parseHeader(i,this.trailers):(this.trailers.length&&this.userCall()(this[d8](this.trailers,"")),this.nextRequest()))};Le.prototype.BODY_RAW=function(){this.userCall()(this[Xx](this.chunk.slice(this.offset,this.end),0,this.end-this.offset)),this.offset=this.end};Le.prototype.BODY_SIZED=function(){var i=Math.min(this.end-this.offset,this.body_bytes);this.userCall()(this[Xx](this.chunk.slice(this.offset,this.offset+i),0,i)),this.offset+=i,this.body_bytes-=i,this.body_bytes||this.nextRequest()};["Headers","HeadersComplete","Body","MessageComplete"].forEach(function(i){var t=Le["kOn"+i];Object.defineProperty(Le.prototype,"on"+i,{get:function(){return this[t]},set:function(e){return this._compatMode0_11=!0,m8="CONNECT",this[t]=e}})});function Zx(i){var t=new Error("Parse Error");return t.code=i,t}});var ew=G((lNe,g8)=>{"use strict";var Jx=f8().HTTPParser,rfe=Io().Buffer,sfe={request:Jx.REQUEST||"request",response:Jx.RESPONSE||"response"},Xn=function(i){this._type=i,this._parser=new Jx(sfe[i]),this._complete=!1,this.headers={};var t=null,e=this;this._parser.onHeaderField=function(n,r,s){t=n.toString("utf8",r,r+s).toLowerCase()},this._parser.onHeaderValue=function(n,r,s){var o=n.toString("utf8",r,r+s);e.headers.hasOwnProperty(t)?e.headers[t]+=", "+o:e.headers[t]=o},this._parser.onHeadersComplete=this._parser[Jx.kOnHeadersComplete]=function(n,r,s,o,a,l){var c=arguments[0];if(typeof c=="object"&&(o=c.method,a=c.url,l=c.statusCode,s=c.headers),e.method=typeof o=="number"?Xn.METHODS[o]:o,e.statusCode=l,e.url=a,!!s){for(var d=0,u=s.length,h,m;d<u;d+=2)h=s[d].toLowerCase(),m=s[d+1],e.headers.hasOwnProperty(h)?e.headers[h]+=", "+m:e.headers[h]=m;e._complete=!0}}};Xn.METHODS={0:"DELETE",1:"GET",2:"HEAD",3:"POST",4:"PUT",5:"CONNECT",6:"OPTIONS",7:"TRACE",8:"COPY",9:"LOCK",10:"MKCOL",11:"MOVE",12:"PROPFIND",13:"PROPPATCH",14:"SEARCH",15:"UNLOCK",16:"BIND",17:"REBIND",18:"UNBIND",19:"ACL",20:"REPORT",21:"MKACTIVITY",22:"CHECKOUT",23:"MERGE",24:"M-SEARCH",25:"NOTIFY",26:"SUBSCRIBE",27:"UNSUBSCRIBE",28:"PATCH",29:"PURGE",30:"MKCALENDAR",31:"LINK",32:"UNLINK"};var p8=process.version?process.version.match(/[0-9]+/g).map(function(i){return parseInt(i,10)}):[];p8[0]===0&&p8[1]===12&&(Xn.METHODS[16]="REPORT",Xn.METHODS[17]="MKACTIVITY",Xn.METHODS[18]="CHECKOUT",Xn.METHODS[19]="MERGE",Xn.METHODS[20]="M-SEARCH",Xn.METHODS[21]="NOTIFY",Xn.METHODS[22]="SUBSCRIBE",Xn.METHODS[23]="UNSUBSCRIBE",Xn.METHODS[24]="PATCH",Xn.METHODS[25]="PURGE");Xn.prototype.isComplete=function(){return this._complete};Xn.prototype.parse=function(i){var t=this._parser.execute(i,0,i.length);if(typeof t!="number"){this.error=t,this._complete=!0;return}this._complete&&(this.body=t<i.length?i.slice(t):rfe.alloc(0))};g8.exports=Xn});var v8=G((cNe,b8)=>{"use strict";var QA=/([!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z]+)/,ofe=/([^!#\$%&'\*\+\-\.\^_`\|~0-9A-Za-z])/g,afe=/"((?:\\[\x00-\x7f]|[^\x00-\x08\x0a-\x1f\x7f"\\])*)"/,XA=new RegExp(QA.source+"(?:=(?:"+QA.source+"|"+afe.source+"))?"),ZA=new RegExp(QA.source+"(?: *; *"+XA.source+")*","g"),lfe=new RegExp("^"+ZA.source+"(?: *, *"+ZA.source+")*$"),cfe=/^-?(0|[1-9][0-9]*)(\.[0-9]+)?$/,_8=Object.prototype.hasOwnProperty,dfe={parseHeader:function(i){var t=new qg;if(i===""||i===void 0)return t;if(!lfe.test(i))throw new SyntaxError("Invalid Sec-WebSocket-Extensions header: "+i);var e=i.match(ZA);return e.forEach(function(n){var r=n.match(new RegExp(XA.source,"g")),s=r.shift(),o={};r.forEach(function(a){var l=a.match(XA),c=l[1],d;l[2]!==void 0?d=l[2]:l[3]!==void 0?d=l[3].replace(/\\/g,""):d=!0,cfe.test(d)&&(d=parseFloat(d)),_8.call(o,c)?(o[c]=[].concat(o[c]),o[c].push(d)):o[c]=d},this),t.push(s,o)},this),t},serializeParams:function(i,t){var e=[],n=function(s,o){o instanceof Array?o.forEach(function(a){n(s,a)}):o===!0?e.push(s):typeof o=="number"?e.push(s+"="+o):ofe.test(o)?e.push(s+'="'+o.replace(/"/g,'\\"')+'"'):e.push(s+"="+o)};for(var r in t)n(r,t[r]);return[i].concat(e).join("; ")}},qg=function(){this._byName={},this._inOrder=[]};qg.prototype.push=function(i,t){_8.call(this._byName,i)||(this._byName[i]=[]),this._byName[i].push(t),this._inOrder.push({name:i,params:t})};qg.prototype.eachOffer=function(i,t){for(var e=this._inOrder,n=0,r=e.length;n<r;n++)i.call(t,e[n].name,e[n].params)};qg.prototype.byName=function(i){return this._byName[i]||[]};qg.prototype.toArray=function(){return this._inOrder.slice()};b8.exports=dfe});var JA=G((dNe,y8)=>{"use strict";var Wg=function(i){this._bufferSize=i,this.clear()};Wg.prototype.clear=function(){this._buffer=new Array(this._bufferSize),this._ringOffset=0,this._ringSize=this._bufferSize,this._head=0,this._tail=0,this.length=0};Wg.prototype.push=function(i){var t=!1,e=!1;this._ringSize<this._bufferSize?t=this._tail===0:this._ringOffset===this._ringSize&&(t=!0,e=this._tail===0),t&&(this._tail=this._bufferSize,this._buffer=this._buffer.concat(new Array(this._bufferSize)),this._bufferSize=this._buffer.length,e&&(this._ringSize=this._bufferSize)),this._buffer[this._tail]=i,this.length+=1,this._tail<this._ringSize&&(this._ringOffset+=1),this._tail=(this._tail+1)%this._bufferSize};Wg.prototype.peek=function(){if(this.length!==0)return this._buffer[this._head]};Wg.prototype.shift=function(){if(this.length!==0){var i=this._buffer[this._head];return this._buffer[this._head]=void 0,this.length-=1,this._ringOffset-=1,this._ringOffset===0&&this.length>0?(this._head=this._ringSize,this._ringOffset=this.length,this._ringSize=this._bufferSize):this._head=(this._head+1)%this._ringSize,i}};y8.exports=Wg});var w8=G((uNe,x8)=>{"use strict";var ufe=JA(),fm=function(i,t){this._session=i,this._method=t,this._queue=new ufe(fm.QUEUE_SIZE),this._stopped=!1,this.pending=0};fm.QUEUE_SIZE=8;fm.prototype.call=function(i,t,e,n){if(!this._stopped){var r={error:i,message:t,callback:e,context:n,done:!1},s=!1,o=this;if(this._queue.push(r),r.error)return r.done=!0,this._stop(),this._flushQueue();var a=function(l,c){s^(s=!0)&&(l?(o._stop(),r.error=l,r.message=null):r.message=c,r.done=!0,o._flushQueue())};try{this._session[this._method](t,a)}catch(l){a(l)}}};fm.prototype._stop=function(){this.pending=this._queue.length,this._stopped=!0};fm.prototype._flushQueue=function(){for(var i=this._queue,t;i.length>0&&i.peek().done;)t=i.shift(),t.error?(this.pending=0,i.clear()):this.pending-=1,t.callback.call(t.context,t.error,t.message)};x8.exports=fm});var eO=G((hNe,C8)=>{"use strict";var hfe=JA(),zd=function(){this._complete=!1,this._callbacks=new hfe(zd.QUEUE_SIZE)};zd.QUEUE_SIZE=4;zd.all=function(i){var t=new zd,e=i.length,n=e;for(e===0&&t.done();n--;)i[n].then(function(){e-=1,e===0&&t.done()});return t};zd.prototype.then=function(i){this._complete?i():this._callbacks.push(i)};zd.prototype.done=function(){this._complete=!0;for(var i=this._callbacks,t;t=i.shift();)t()};C8.exports=zd});var E8=G((mNe,k8)=>{"use strict";var S8=w8(),mfe=eO(),jd=function(i){this._ext=i[0],this._session=i[1],this._functors={incoming:new S8(this._session,"processIncomingMessage"),outgoing:new S8(this._session,"processOutgoingMessage")}};jd.prototype.pending=function(i){var t=this._functors[i];t._stopped||(t.pending+=1)};jd.prototype.incoming=function(i,t,e,n){this._exec("incoming",i,t,e,n)};jd.prototype.outgoing=function(i,t,e,n){this._exec("outgoing",i,t,e,n)};jd.prototype.close=function(){return this._closed=this._closed||new mfe,this._doClose(),this._closed};jd.prototype._exec=function(i,t,e,n,r){this._functors[i].call(t,e,function(s,o){s&&(s.message=this._ext.name+": "+s.message),n.call(r,s,o),this._doClose()},this)};jd.prototype._doClose=function(){var i=this._functors.incoming,t=this._functors.outgoing;!this._closed||i.pending+t.pending!==0||(this._session&&this._session.close(),this._session=null,this._closed.done())};k8.exports=jd});var I8=G((fNe,T8)=>{"use strict";var ffe=E8(),pfe=eO(),Gg=function(i){this._cells=i.map(function(t){return new ffe(t)}),this._stopped={incoming:!1,outgoing:!1}};Gg.prototype.processIncomingMessage=function(i,t,e){this._stopped.incoming||this._loop("incoming",this._cells.length-1,-1,-1,i,t,e)};Gg.prototype.processOutgoingMessage=function(i,t,e){this._stopped.outgoing||this._loop("outgoing",0,this._cells.length,1,i,t,e)};Gg.prototype.close=function(i,t){this._stopped={incoming:!0,outgoing:!0};var e=this._cells.map(function(n){return n.close()});i&&pfe.all(e).then(function(){i.call(t)})};Gg.prototype._loop=function(i,t,e,n,r,s,o){for(var a=this._cells,l=a.length,c=this;l--;)a[l].pending(i);var d=function(u,h,m){if(u===e)return s.call(o,h,m);a[u][i](h,m,function(_,b){_&&(c._stopped[i]=!0),d(u+n,_,b)})};d(t,null,r)};T8.exports=Gg});var O8=G((pNe,A8)=>{"use strict";var $g=v8(),D8=I8(),tw=function(){this._rsv1=this._rsv2=this._rsv3=null,this._byName={},this._inOrder=[],this._sessions=[],this._index={}};tw.MESSAGE_OPCODES=[1,2];var M8={add:function(i){if(typeof i.name!="string")throw new TypeError("extension.name must be a string");if(i.type!=="permessage")throw new TypeError('extension.type must be "permessage"');if(typeof i.rsv1!="boolean")throw new TypeError("extension.rsv1 must be true or false");if(typeof i.rsv2!="boolean")throw new TypeError("extension.rsv2 must be true or false");if(typeof i.rsv3!="boolean")throw new TypeError("extension.rsv3 must be true or false");if(this._byName.hasOwnProperty(i.name))throw new TypeError('An extension with name "'+i.name+'" is already registered');this._byName[i.name]=i,this._inOrder.push(i)},generateOffer:function(){var i=[],t=[],e={};return this._inOrder.forEach(function(n){var r=n.createClientSession();if(r){var s=[n,r];i.push(s),e[n.name]=s;var o=r.generateOffer();o=o?[].concat(o):[],o.forEach(function(a){t.push($g.serializeParams(n.name,a))},this)}},this),this._sessions=i,this._index=e,t.length>0?t.join(", "):null},activate:function(i){var t=$g.parseHeader(i),e=[];t.eachOffer(function(n,r){var s=this._index[n];if(!s)throw new Error('Server sent an extension response for unknown extension "'+n+'"');var o=s[0],a=s[1],l=this._reserved(o);if(l)throw new Error("Server sent two extension responses that use the RSV"+l[0]+' bit: "'+l[1]+'" and "'+o.name+'"');if(a.activate(r)!==!0)throw new Error("Server sent unacceptable extension parameters: "+$g.serializeParams(n,r));this._reserve(o),e.push(s)},this),this._sessions=e,this._pipeline=new D8(e)},generateResponse:function(i){var t=[],e=[],n=$g.parseHeader(i);return this._inOrder.forEach(function(r){var s=n.byName(r.name);if(!(s.length===0||this._reserved(r))){var o=r.createServerSession(s);o&&(this._reserve(r),t.push([r,o]),e.push($g.serializeParams(r.name,o.generateResponse())))}},this),this._sessions=t,this._pipeline=new D8(t),e.length>0?e.join(", "):null},validFrameRsv:function(i){var t={rsv1:!1,rsv2:!1,rsv3:!1},e;if(tw.MESSAGE_OPCODES.indexOf(i.opcode)>=0)for(var n=0,r=this._sessions.length;n<r;n++)e=this._sessions[n][0],t.rsv1=t.rsv1||e.rsv1,t.rsv2=t.rsv2||e.rsv2,t.rsv3=t.rsv3||e.rsv3;return(t.rsv1||!i.rsv1)&&(t.rsv2||!i.rsv2)&&(t.rsv3||!i.rsv3)},processIncomingMessage:function(i,t,e){this._pipeline.processIncomingMessage(i,t,e)},processOutgoingMessage:function(i,t,e){this._pipeline.processOutgoingMessage(i,t,e)},close:function(i,t){if(!this._pipeline)return i.call(t);this._pipeline.close(i,t)},_reserve:function(i){this._rsv1=this._rsv1||i.rsv1&&i.name,this._rsv2=this._rsv2||i.rsv2&&i.name,this._rsv3=this._rsv3||i.rsv3&&i.name},_reserved:function(i){return this._rsv1&&i.rsv1?[1,this._rsv1]:this._rsv2&&i.rsv2?[2,this._rsv2]:this._rsv3&&i.rsv3?[3,this._rsv3]:!1}};for(tO in M8)tw.prototype[tO]=M8[tO];var tO;A8.exports=tw});var N8=G((gNe,F8)=>{"use strict";var R8=function(){},P8={final:!1,rsv1:!1,rsv2:!1,rsv3:!1,opcode:null,masked:!1,maskingKey:null,lengthBytes:1,length:0,payload:null};for(iO in P8)R8.prototype[iO]=P8[iO];var iO;F8.exports=R8});var z8=G((_Ne,V8)=>{"use strict";var gfe=Io().Buffer,B8=function(){this.rsv1=!1,this.rsv2=!1,this.rsv3=!1,this.opcode=null,this.length=0,this._chunks=[]},L8={read:function(){return this.data=this.data||gfe.concat(this._chunks,this.length)},pushFrame:function(i){this.rsv1=this.rsv1||i.rsv1,this.rsv2=this.rsv2||i.rsv2,this.rsv3=this.rsv3||i.rsv3,this.opcode===null&&(this.opcode=i.opcode),this._chunks.push(i.payload),this.length+=i.length}};for(nO in L8)B8.prototype[nO]=L8[nO];var nO;V8.exports=B8});var sO=G((bNe,W8)=>{"use strict";var Kg=Io().Buffer,q8=Be("crypto"),_fe=Be("util"),bfe=O8(),Ud=ql(),j8=N8(),U8=z8(),Rr=function(i,t,e){if(Ud.apply(this,arguments),this._extensions=new bfe,this._stage=0,this._masking=this._options.masking,this._protocols=this._options.protocols||[],this._requireMasking=this._options.requireMasking,this._pingCallbacks={},typeof this._protocols=="string"&&(this._protocols=this._protocols.split(/ *, */)),!!this._request){var n=this._request.headers["sec-websocket-protocol"],r=this._protocols;n!==void 0&&(typeof n=="string"&&(n=n.split(/ *, */)),this.protocol=n.filter(function(s){return r.indexOf(s)>=0})[0]),this.version="hybi-"+Rr.VERSION}};_fe.inherits(Rr,Ud);Rr.VERSION="13";Rr.mask=function(i,t,e){if(!t||t.length===0)return i;e=e||0;for(var n=0,r=i.length-e;n<r;n++)i[e+n]=i[e+n]^t[n%4];return i};Rr.generateAccept=function(i){var t=q8.createHash("sha1");return t.update(i+Rr.GUID),t.digest("base64")};Rr.GUID="258EAFA5-E914-47DA-95CA-C5AB0DC85B11";var H8={FIN:128,MASK:128,RSV1:64,RSV2:32,RSV3:16,OPCODE:15,LENGTH:127,OPCODES:{continuation:0,text:1,binary:2,close:8,ping:9,pong:10},OPCODE_CODES:[0,1,2,8,9,10],MESSAGE_OPCODES:[0,1,2],OPENING_OPCODES:[1,2],ERRORS:{normal_closure:1e3,going_away:1001,protocol_error:1002,unacceptable:1003,encoding_error:1007,policy_violation:1008,too_large:1009,extension_error:1010,unexpected_condition:1011},ERROR_CODES:[1e3,1001,1002,1003,1007,1008,1009,1010,1011],DEFAULT_ERROR_CODE:1e3,MIN_RESERVED_ERROR:3e3,MAX_RESERVED_ERROR:4999,UTF8_MATCH:/^([\x00-\x7F]|[\xC2-\xDF][\x80-\xBF]|\xE0[\xA0-\xBF][\x80-\xBF]|[\xE1-\xEC\xEE\xEF][\x80-\xBF]{2}|\xED[\x80-\x9F][\x80-\xBF]|\xF0[\x90-\xBF][\x80-\xBF]{2}|[\xF1-\xF3][\x80-\xBF]{3}|\xF4[\x80-\x8F][\x80-\xBF]{2})*$/,addExtension:function(i){return this._extensions.add(i),!0},parse:function(i){this._reader.put(i);for(var t=!0;t;)switch(this._stage){case 0:t=this._reader.read(1),t&&this._parseOpcode(t[0]);break;case 1:t=this._reader.read(1),t&&this._parseLength(t[0]);break;case 2:t=this._reader.read(this._frame.lengthBytes),t&&this._parseExtendedLength(t);break;case 3:t=this._reader.read(4),t&&(this._stage=4,this._frame.maskingKey=t);break;case 4:t=this._reader.read(this._frame.length),t&&(this._stage=0,this._emitFrame(t));break;default:t=null}},text:function(i){return this.readyState>1?!1:this.frame(i,"text")},binary:function(i){return this.readyState>1?!1:this.frame(i,"binary")},ping:function(i,t){return this.readyState>1?!1:(i=i||"",t&&(this._pingCallbacks[i]=t),this.frame(i,"ping"))},pong:function(i){return this.readyState>1?!1:(i=i||"",this.frame(i,"pong"))},close:function(i,t){return i=i||"",t=t||this.ERRORS.normal_closure,this.readyState<=0?(this.readyState=3,this.emit("close",new Ud.CloseEvent(t,i)),!0):this.readyState===1?(this.readyState=2,this._extensions.close(function(){this.frame(i,"close",t)},this),!0):!1},frame:function(i,t,e){if(this.readyState<=0)return this._queue([i,t,e]);if(this.readyState>2)return!1;i instanceof Array&&(i=Kg.from(i)),typeof i=="number"&&(i=i.toString());var n=new U8,r=typeof i=="string",s,o;n.rsv1=n.rsv2=n.rsv3=!1,n.opcode=this.OPCODES[t||(r?"text":"binary")],s=r?Kg.from(i,"utf8"):i,e&&(o=s,s=Kg.allocUnsafe(2+o.length),s.writeUInt16BE(e,0),o.copy(s,2)),n.data=s;var a=function(l){var c=new j8;c.final=!0,c.rsv1=l.rsv1,c.rsv2=l.rsv2,c.rsv3=l.rsv3,c.opcode=l.opcode,c.masked=!!this._masking,c.length=l.data.length,c.payload=l.data,c.masked&&(c.maskingKey=q8.randomBytes(4)),this._sendFrame(c)};return this.MESSAGE_OPCODES.indexOf(n.opcode)>=0?this._extensions.processOutgoingMessage(n,function(l,c){if(l)return this._fail("extension_error",l.message);a.call(this,c)},this):a.call(this,n),!0},_sendFrame:function(i){var t=i.length,e=t<=125?2:t<=65535?4:10,n=e+(i.masked?4:0),r=Kg.allocUnsafe(n+t),s=i.masked?this.MASK:0;r[0]=(i.final?this.FIN:0)|(i.rsv1?this.RSV1:0)|(i.rsv2?this.RSV2:0)|(i.rsv3?this.RSV3:0)|i.opcode,t<=125?r[1]=s|t:t<=65535?(r[1]=s|126,r.writeUInt16BE(t,2)):(r[1]=s|127,r.writeUInt32BE(Math.floor(t/4294967296),2),r.writeUInt32BE(t%4294967296,6)),i.payload.copy(r,n),i.masked&&(i.maskingKey.copy(r,e),Rr.mask(r,i.maskingKey,n)),this._write(r)},_handshakeResponse:function(){var i=this._request.headers["sec-websocket-key"],t=this._request.headers["sec-websocket-version"];if(t!==Rr.VERSION)throw new Error("Unsupported WebSocket version: "+t);if(typeof i!="string")throw new Error("Missing handshake request header: Sec-WebSocket-Key");this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Accept",Rr.generateAccept(i)),this.protocol&&this._headers.set("Sec-WebSocket-Protocol",this.protocol);var e=this._extensions.generateResponse(this._request.headers["sec-websocket-extensions"]);e&&this._headers.set("Sec-WebSocket-Extensions",e);var n="HTTP/1.1 101 Switching Protocols",r=[n,this._headers.toString(),""];return Kg.from(r.join(`\r
`),"utf8")},_shutdown:function(i,t,e){delete this._frame,delete this._message,this._stage=5;var n=this.readyState===1;this.readyState=2,this._extensions.close(function(){n&&this.frame(t,"close",i),this.readyState=3,e&&this.emit("error",new Error(t)),this.emit("close",new Ud.CloseEvent(i,t))},this)},_fail:function(i,t){this.readyState>1||this._shutdown(this.ERRORS[i],t,!0)},_parseOpcode:function(i){var t=[this.RSV1,this.RSV2,this.RSV3].map(function(n){return(i&n)===n}),e=this._frame=new j8;if(e.final=(i&this.FIN)===this.FIN,e.rsv1=t[0],e.rsv2=t[1],e.rsv3=t[2],e.opcode=i&this.OPCODE,this._stage=1,!this._extensions.validFrameRsv(e))return this._fail("protocol_error","One or more reserved bits are on: reserved1 = "+(e.rsv1?1:0)+", reserved2 = "+(e.rsv2?1:0)+", reserved3 = "+(e.rsv3?1:0));if(this.OPCODE_CODES.indexOf(e.opcode)<0)return this._fail("protocol_error","Unrecognized frame opcode: "+e.opcode);if(this.MESSAGE_OPCODES.indexOf(e.opcode)<0&&!e.final)return this._fail("protocol_error","Received fragmented control frame: opcode = "+e.opcode);if(this._message&&this.OPENING_OPCODES.indexOf(e.opcode)>=0)return this._fail("protocol_error","Received new data frame but previous continuous frame is unfinished")},_parseLength:function(i){var t=this._frame;if(t.masked=(i&this.MASK)===this.MASK,t.length=i&this.LENGTH,t.length>=0&&t.length<=125){if(this._stage=t.masked?3:4,!this._checkFrameLength())return}else this._stage=2,t.lengthBytes=t.length===126?2:8;if(this._requireMasking&&!t.masked)return this._fail("unacceptable","Received unmasked frame but masking is required")},_parseExtendedLength:function(i){var t=this._frame;if(t.length=this._readUInt(i),this._stage=t.masked?3:4,this.MESSAGE_OPCODES.indexOf(t.opcode)<0&&t.length>125)return this._fail("protocol_error","Received control frame having too long payload: "+t.length);this._checkFrameLength()},_checkFrameLength:function(){var i=this._message?this._message.length:0;return i+this._frame.length>this._maxLength?(this._fail("too_large","WebSocket frame length too large"),!1):!0},_emitFrame:function(i){var t=this._frame,e=t.payload=Rr.mask(i,t.maskingKey),n=t.opcode,r,s,o,a,l;if(delete this._frame,n===this.OPCODES.continuation){if(!this._message)return this._fail("protocol_error","Received unexpected continuation frame");this._message.pushFrame(t)}if((n===this.OPCODES.text||n===this.OPCODES.binary)&&(this._message=new U8,this._message.pushFrame(t)),t.final&&this.MESSAGE_OPCODES.indexOf(n)>=0)return this._emitMessage(this._message);n===this.OPCODES.close&&(s=e.length>=2?e.readUInt16BE(0):null,o=e.length>2?this._encode(e.slice(2)):null,e.length!==0&&!(s!==null&&s>=this.MIN_RESERVED_ERROR&&s<=this.MAX_RESERVED_ERROR)&&this.ERROR_CODES.indexOf(s)<0&&(s=this.ERRORS.protocol_error),(e.length>125||e.length>2&&!o)&&(s=this.ERRORS.protocol_error),this._shutdown(s||this.DEFAULT_ERROR_CODE,o||"")),n===this.OPCODES.ping&&(this.frame(e,"pong"),this.emit("ping",new Ud.PingEvent(e.toString()))),n===this.OPCODES.pong&&(a=this._pingCallbacks,r=this._encode(e),l=a[r],delete a[r],l&&l(),this.emit("pong",new Ud.PongEvent(e.toString())))},_emitMessage:function(t){var t=this._message;t.read(),delete this._message,this._extensions.processIncomingMessage(t,function(e,n){if(e)return this._fail("extension_error",e.message);var r=n.data;if(n.opcode===this.OPCODES.text&&(r=this._encode(r)),r===null)return this._fail("encoding_error","Could not decode a text frame as UTF-8");this.emit("message",new Ud.MessageEvent(r))},this)},_encode:function(i){try{var t=i.toString("binary",0,i.length);if(!this.UTF8_MATCH.test(t))return null}catch{}return i.toString("utf8",0,i.length)},_readUInt:function(i){return i.length===2?i.readUInt16BE(0):i.readUInt32BE(0)*4294967296+i.readUInt32BE(4)}};for(rO in H8)Rr.prototype[rO]=H8[rO];var rO;W8.exports=Rr});var Q8=G((vNe,Y8)=>{"use strict";var K8=Io().Buffer,vfe=Be("stream").Stream,G8=Be("url"),yfe=Be("util"),xfe=ql(),wfe=Kx(),Cfe=ew(),Sfe={"ws:":80,"wss:":443},aO=function(i,t,e){this._client=i,this._http=new Cfe("response"),this._origin=typeof i.url=="object"?i.url:G8.parse(i.url),this._url=typeof t=="object"?t:G8.parse(t),this._options=e||{},this._state=0,this.readable=this.writable=!0,this._paused=!1,this._headers=new wfe,this._headers.set("Host",this._origin.host),this._headers.set("Connection","keep-alive"),this._headers.set("Proxy-Connection","keep-alive");var n=this._url.auth&&K8.from(this._url.auth,"utf8").toString("base64");n&&this._headers.set("Proxy-Authorization","Basic "+n)};yfe.inherits(aO,vfe);var $8={setHeader:function(i,t){return this._state!==0?!1:(this._headers.set(i,t),!0)},start:function(){if(this._state!==0)return!1;this._state=1;var i=this._origin,t=i.port||Sfe[i.protocol],e="CONNECT "+i.hostname+":"+t+" HTTP/1.1",n=[e,this._headers.toString(),""];return this.emit("data",K8.from(n.join(`\r
`),"utf8")),!0},pause:function(){this._paused=!0},resume:function(){this._paused=!1,this.emit("drain")},write:function(i){if(!this.writable)return!1;if(this._http.parse(i),!this._http.isComplete())return!this._paused;if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this.statusCode===200)this.emit("connect",new xfe.ConnectEvent);else{var t="Can't establish a connection to the server at "+this._origin.href;this.emit("error",new Error(t))}return this.end(),!this._paused},end:function(i){this.writable&&(i!==void 0&&this.write(i),this.readable=this.writable=!1,this.emit("close"),this.emit("end"))},destroy:function(){this.end()}};for(oO in $8)aO.prototype[oO]=$8[oO];var oO;Y8.exports=aO});var eU=G((yNe,J8)=>{"use strict";var Z8=Io().Buffer,kfe=Be("crypto"),Efe=Be("url"),Tfe=Be("util"),Ife=ew(),Dfe=ql(),pm=sO(),Mfe=Q8(),Yg=function(i,t){this.version="hybi-"+pm.VERSION,pm.call(this,null,i,t),this.readyState=-1,this._key=Yg.generateKey(),this._accept=pm.generateAccept(this._key),this._http=new Ife("response");var e=Efe.parse(this.url),n=e.auth&&Z8.from(e.auth,"utf8").toString("base64");if(this.VALID_PROTOCOLS.indexOf(e.protocol)<0)throw new Error(this.url+" is not a valid WebSocket URL");this._pathname=(e.pathname||"/")+(e.search||""),this._headers.set("Host",e.host),this._headers.set("Upgrade","websocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Key",this._key),this._headers.set("Sec-WebSocket-Version",pm.VERSION),this._protocols.length>0&&this._headers.set("Sec-WebSocket-Protocol",this._protocols.join(", ")),n&&this._headers.set("Authorization","Basic "+n)};Tfe.inherits(Yg,pm);Yg.generateKey=function(){return kfe.randomBytes(16).toString("base64")};var X8={VALID_PROTOCOLS:["ws:","wss:"],proxy:function(i,t){return new Mfe(this,i,t)},start:function(){return this.readyState!==-1?!1:(this._write(this._handshakeRequest()),this.readyState=0,!0)},parse:function(i){if(this.readyState!==3){if(this.readyState>0)return pm.prototype.parse.call(this,i);this._http.parse(i),this._http.isComplete()&&(this._validateHandshake(),this.readyState!==3&&(this._open(),this.parse(this._http.body)))}},_handshakeRequest:function(){var i=this._extensions.generateOffer();i&&this._headers.set("Sec-WebSocket-Extensions",i);var t="GET "+this._pathname+" HTTP/1.1",e=[t,this._headers.toString(),""];return Z8.from(e.join(`\r
`),"utf8")},_failHandshake:function(i){i="Error during WebSocket handshake: "+i,this.readyState=3,this.emit("error",new Error(i)),this.emit("close",new Dfe.CloseEvent(this.ERRORS.protocol_error,i))},_validateHandshake:function(){if(this.statusCode=this._http.statusCode,this.headers=this._http.headers,this._http.error)return this._failHandshake(this._http.error.message);if(this._http.statusCode!==101)return this._failHandshake("Unexpected response code: "+this._http.statusCode);var i=this._http.headers,t=i.upgrade||"",e=i.connection||"",n=i["sec-websocket-accept"]||"",r=i["sec-websocket-protocol"]||"";if(t==="")return this._failHandshake("'Upgrade' header is missing");if(t.toLowerCase()!=="websocket")return this._failHandshake("'Upgrade' header value is not 'WebSocket'");if(e==="")return this._failHandshake("'Connection' header is missing");if(e.toLowerCase()!=="upgrade")return this._failHandshake("'Connection' header value is not 'Upgrade'");if(n!==this._accept)return this._failHandshake("Sec-WebSocket-Accept mismatch");if(this.protocol=null,r!==""){if(this._protocols.indexOf(r)<0)return this._failHandshake("Sec-WebSocket-Protocol mismatch");this.protocol=r}try{this._extensions.activate(this.headers["sec-websocket-extensions"])}catch(s){return this._failHandshake(s.message)}}};for(lO in X8)Yg.prototype[lO]=X8[lO];var lO;J8.exports=Yg});var uO=G((xNe,iU)=>{"use strict";var iw=Io().Buffer,nw=ql(),Afe=Be("util"),dO=function(i,t,e){nw.apply(this,arguments),this._stage=0,this.version="hixie-75",this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("WebSocket-Origin",this._request.headers.origin),this._headers.set("WebSocket-Location",this.url)};Afe.inherits(dO,nw);var tU={close:function(){return this.readyState===3?!1:(this.readyState=3,this.emit("close",new nw.CloseEvent(null,null)),!0)},parse:function(i){this.readyState>1||(this._reader.put(i),this._reader.eachByte(function(t){var e;switch(this._stage){case-1:this._body.push(t),this._sendHandshakeBody();break;case 0:this._parseLeadingByte(t);break;case 1:if(this._length=(t&127)+128*this._length,this._closing&&this._length===0)return this.close();(t&128)!==128&&(this._length===0?this._stage=0:(this._skipped=0,this._stage=2));break;case 2:if(t===255)this._stage=0,e=iw.from(this._buffer).toString("utf8",0,this._buffer.length),this.emit("message",new nw.MessageEvent(e));else if(this._length)this._skipped+=1,this._skipped===this._length&&(this._stage=0);else if(this._buffer.push(t),this._buffer.length>this._maxLength)return this.close();break}},this))},frame:function(i){if(this.readyState===0)return this._queue([i]);if(this.readyState>1)return!1;typeof i!="string"&&(i=i.toString());var t=iw.byteLength(i),e=iw.allocUnsafe(t+2);return e[0]=0,e.write(i,1),e[e.length-1]=255,this._write(e),!0},_handshakeResponse:function(){var i="HTTP/1.1 101 Web Socket Protocol Handshake",t=[i,this._headers.toString(),""];return iw.from(t.join(`\r
`),"utf8")},_parseLeadingByte:function(i){(i&128)===128?(this._length=0,this._stage=1):(delete this._length,delete this._skipped,this._buffer=[],this._stage=2)}};for(cO in tU)dO.prototype[cO]=tU[cO];var cO;iU.exports=dO});var aU=G((wNe,oU)=>{"use strict";var Qg=Io().Buffer,Ofe=ql(),rw=uO(),Pfe=Be("crypto"),Rfe=Be("util"),nU=function(i){return parseInt((i.match(/[0-9]/g)||[]).join(""),10)},rU=function(i){return(i.match(/ /g)||[]).length},mO=function(i,t,e){rw.apply(this,arguments),this._stage=-1,this._body=[],this.version="hixie-76",this._headers.clear(),this._headers.set("Upgrade","WebSocket"),this._headers.set("Connection","Upgrade"),this._headers.set("Sec-WebSocket-Origin",this._request.headers.origin),this._headers.set("Sec-WebSocket-Location",this.url)};Rfe.inherits(mO,rw);var sU={BODY_SIZE:8,start:function(){return rw.prototype.start.call(this)?(this._started=!0,this._sendHandshakeBody(),!0):!1},close:function(){return this.readyState===3?!1:(this.readyState===1&&this._write(Qg.from([255,0])),this.readyState=3,this.emit("close",new Ofe.CloseEvent(null,null)),!0)},_handshakeResponse:function(){var a=this._request.headers,i=a["sec-websocket-key1"],t=a["sec-websocket-key2"];if(!i)throw new Error("Missing required header: Sec-WebSocket-Key1");if(!t)throw new Error("Missing required header: Sec-WebSocket-Key2");var e=nU(i),n=rU(i),r=nU(t),s=rU(t);if(e%n!==0||r%s!==0)throw new Error("Client sent invalid Sec-WebSocket-Key headers");this._keyValues=[e/n,r/s];var o="HTTP/1.1 101 WebSocket Protocol Handshake",a=[o,this._headers.toString(),""];return Qg.from(a.join(`\r
`),"binary")},_handshakeSignature:function(){if(this._body.length<this.BODY_SIZE)return null;var i=Pfe.createHash("md5"),t=Qg.allocUnsafe(8+this.BODY_SIZE);return t.writeUInt32BE(this._keyValues[0],0),t.writeUInt32BE(this._keyValues[1],4),Qg.from(this._body).copy(t,8,0,this.BODY_SIZE),i.update(t),Qg.from(i.digest("binary"),"binary")},_sendHandshakeBody:function(){if(this._started){var i=this._handshakeSignature();i&&(this._write(i),this._stage=0,this._open(),this._body.length>this.BODY_SIZE&&this.parse(this._body.slice(this.BODY_SIZE)))}},_parseLeadingByte:function(i){if(i!==255)return rw.prototype._parseLeadingByte.call(this,i);this._closing=!0,this._length=0,this._stage=1}};for(hO in sU)mO.prototype[hO]=sU[hO];var hO;oU.exports=mO});var cU=G((CNe,lU)=>{"use strict";var Ffe=Be("util"),Nfe=ew(),gO=ql(),Lfe=uO(),Bfe=aU(),Vfe=sO(),Hd=function(i){gO.call(this,null,null,i),this._http=new Nfe("request")};Ffe.inherits(Hd,gO);var pO={EVENTS:["open","message","error","close","ping","pong"],_bindEventListeners:function(){this.messages.on("error",function(){}),this.on("error",function(){})},parse:function(i){if(this._delegate)return this._delegate.parse(i);if(this._http.parse(i),!!this._http.isComplete()){this.method=this._http.method,this.url=this._http.url,this.headers=this._http.headers,this.body=this._http.body;var t=this;this._delegate=Hd.http(this,this._options),this._delegate.messages=this.messages,this._delegate.io=this.io,this._open(),this.EVENTS.forEach(function(e){this._delegate.on(e,function(n){t.emit(e,n)})},this),this.protocol=this._delegate.protocol,this.version=this._delegate.version,this.parse(this._http.body),this.emit("connect",new gO.ConnectEvent)}},_open:function(){this.__queue.forEach(function(i){this._delegate[i[0]].apply(this._delegate,i[1])},this),this.__queue=[]}};["addExtension","setHeader","start","frame","text","binary","ping","close"].forEach(function(i){pO[i]=function(){return this._delegate?this._delegate[i].apply(this._delegate,arguments):(this.__queue.push([i,arguments]),!0)}});for(fO in pO)Hd.prototype[fO]=pO[fO];var fO;Hd.isSecureRequest=function(i){if(i.connection&&i.connection.authorized!==void 0||i.socket&&i.socket.secure)return!0;var t=i.headers;return t?t.https==="on"||t["x-forwarded-ssl"]==="on"||t["x-forwarded-scheme"]==="https"||t["x-forwarded-proto"]==="https":!1};Hd.determineUrl=function(i){var t=this.isSecureRequest(i)?"wss:":"ws:";return t+"//"+i.headers.host+i.url};Hd.http=function(i,t){t=t||{},t.requireMasking===void 0&&(t.requireMasking=!0);var e=i.headers,n=e["sec-websocket-version"],r=e["sec-websocket-key"],s=e["sec-websocket-key1"],o=e["sec-websocket-key2"],a=this.determineUrl(i);return n||r?new Vfe(i,a,t):s||o?new Bfe(i,a,t):new Lfe(i,a,t)};lU.exports=Hd});var Xg=G((SNe,uU)=>{"use strict";var dU=ql(),zfe=eU(),sw=cU(),jfe={client:function(i,t){return t=t||{},t.masking===void 0&&(t.masking=!0),new zfe(i,t)},server:function(i){return i=i||{},i.requireMasking===void 0&&(i.requireMasking=!0),new sw(i)},http:function(){return sw.http.apply(sw,arguments)},isSecureRequest:function(i){return sw.isSecureRequest(i)},isWebSocket:function(i){return dU.isWebSocket(i)},validateOptions:function(i,t){dU.validateOptions(i,t)}};uU.exports=jfe});var Zg=G((kNe,hU)=>{"use strict";var qd=function(i,t){this.type=i;for(var e in t)this[e]=t[e]};qd.prototype.initEvent=function(i,t,e){this.type=i,this.bubbles=t,this.cancelable=e};qd.prototype.stopPropagation=function(){};qd.prototype.preventDefault=function(){};qd.CAPTURING_PHASE=1;qd.AT_TARGET=2;qd.BUBBLING_PHASE=3;hU.exports=qd});var _O=G((ENe,mU)=>{"use strict";var Ufe=Zg(),Hfe={onopen:null,onmessage:null,onerror:null,onclose:null,addEventListener:function(i,t,e){this.on(i,t)},removeEventListener:function(i,t,e){this.removeListener(i,t)},dispatchEvent:function(i){i.target=i.currentTarget=this,i.eventPhase=Ufe.AT_TARGET,this["on"+i.type]&&this["on"+i.type](i),this.emit(i.type,i)}};mU.exports=Hfe});var aw=G((TNe,gU)=>{"use strict";var qfe=Be("stream").Stream,Wfe=Be("util"),Gfe=Xg(),fU=_O(),ow=Zg(),hi=function(i){i=i||{},Gfe.validateOptions(i,["headers","extensions","maxLength","ping","proxy","tls","ca"]),this.readable=this.writable=!0;var t=i.headers;if(t)for(var e in t)this._driver.setHeader(e,t[e]);var n=i.extensions;n&&[].concat(n).forEach(this._driver.addExtension,this._driver),this._ping=i.ping,this._pingId=0,this.readyState=hi.CONNECTING,this.bufferedAmount=0,this.protocol="",this.url=this._driver.url,this.version=this._driver.version;var r=this;this._driver.on("open",function(s){r._open()}),this._driver.on("message",function(s){r._receiveMessage(s.data)}),this._driver.on("close",function(s){r._beginClose(s.reason,s.code)}),this._driver.on("error",function(s){r._emitError(s.message)}),this.on("error",function(){}),this._driver.messages.on("drain",function(){r.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){r._pingId+=1,r.ping(r._pingId.toString())},this._ping*1e3)),this._configureStream(),this._proxy||(this._stream.pipe(this._driver.io),this._driver.io.pipe(this._stream))};Wfe.inherits(hi,qfe);hi.CONNECTING=0;hi.OPEN=1;hi.CLOSING=2;hi.CLOSED=3;hi.CLOSE_TIMEOUT=3e4;var pU={write:function(i){return this.send(i)},end:function(i){i!==void 0&&this.send(i),this.close()},pause:function(){return this._driver.messages.pause()},resume:function(){return this._driver.messages.resume()},send:function(i){return this.readyState>hi.OPEN?!1:(i instanceof Buffer||(i=String(i)),this._driver.messages.write(i))},ping:function(i,t){return this.readyState>hi.OPEN?!1:this._driver.ping(i,t)},close:function(i,t){if(i===void 0&&(i=1e3),t===void 0&&(t=""),i!==1e3&&(i<3e3||i>4999))throw new Error("Failed to execute 'close' on WebSocket: The code must be either 1000, or between 3000 and 4999. "+i+" is neither.");if(this.readyState<hi.CLOSING){var e=this;this._closeTimer=setTimeout(function(){e._beginClose("",1006)},hi.CLOSE_TIMEOUT)}this.readyState!==hi.CLOSED&&(this.readyState=hi.CLOSING),this._driver.close(t,i)},_configureStream:function(){var i=this;this._stream.setTimeout(0),this._stream.setNoDelay(!0),["close","end"].forEach(function(t){this._stream.on(t,function(){i._finalizeClose()})},this),this._stream.on("error",function(t){i._emitError("Network error: "+i.url+": "+t.message),i._finalizeClose()})},_open:function(){if(this.readyState===hi.CONNECTING){this.readyState=hi.OPEN,this.protocol=this._driver.protocol||"";var i=new ow("open");i.initEvent("open",!1,!1),this.dispatchEvent(i)}},_receiveMessage:function(i){if(this.readyState>hi.OPEN)return!1;this.readable&&this.emit("data",i);var t=new ow("message",{data:i});t.initEvent("message",!1,!1),this.dispatchEvent(t)},_emitError:function(i){if(!(this.readyState>=hi.CLOSING)){var t=new ow("error",{message:i});t.initEvent("error",!1,!1),this.dispatchEvent(t)}},_beginClose:function(i,t){this.readyState!==hi.CLOSED&&(this.readyState=hi.CLOSING,this._closeParams=[i,t],this._stream&&(this._stream.destroy(),this._stream.readable||this._finalizeClose()))},_finalizeClose:function(){if(this.readyState!==hi.CLOSED){this.readyState=hi.CLOSED,this._closeTimer&&clearTimeout(this._closeTimer),this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end(),this.readable&&this.emit("end"),this.readable=this.writable=!1;var i=this._closeParams?this._closeParams[0]:"",t=this._closeParams?this._closeParams[1]:1006,e=new ow("close",{code:t,reason:i});e.initEvent("close",!1,!1),this.dispatchEvent(e)}}};for(bO in pU)hi.prototype[bO]=pU[bO];var bO;for(vO in fU)hi.prototype[vO]=fU[vO];var vO;gU.exports=hi});var wU=G((DNe,xU)=>{"use strict";var $fe=Be("util"),Kfe=Be("net"),_U=Be("tls"),bU=Be("url"),Yfe=Xg(),vU=aw(),INe=Zg(),Qfe={"http:":80,"https:":443,"ws:":80,"wss:":443},yU=["https:","wss:"],lw=function(i,t,e){e=e||{},this.url=i,this._driver=Yfe.client(this.url,{maxLength:e.maxLength,protocols:t}),["open","error"].forEach(function(h){this._driver.on(h,function(){u.headers=u._driver.headers,u.statusCode=u._driver.statusCode})},this);var n=e.proxy||{},r=bU.parse(n.origin||this.url),s=r.port||Qfe[r.protocol],o=yU.indexOf(r.protocol)>=0,a=function(){u._onConnect()},l=e.net||{},c=e.tls||{},d=n.origin?n.tls||{}:c,u=this;l.host=d.host=r.hostname,l.port=d.port=s,c.ca=c.ca||e.ca,d.servername=d.servername||r.hostname,this._stream=o?_U.connect(d,a):Kfe.connect(l,a),n.origin&&this._configureProxy(n,c),vU.call(this,e)};$fe.inherits(lw,vU);lw.prototype._onConnect=function(){var i=this._proxy||this._driver;i.start()};lw.prototype._configureProxy=function(i,t){var e=bU.parse(this.url),n=yU.indexOf(e.protocol)>=0,r=this,s;if(this._proxy=this._driver.proxy(i.origin),i.headers)for(s in i.headers)this._proxy.setHeader(s,i.headers[s]);this._proxy.pipe(this._stream,{end:!1}),this._stream.pipe(this._proxy),this._proxy.on("connect",function(){if(n){var o={socket:r._stream,servername:e.hostname};for(s in t)o[s]=t[s];r._stream=_U.connect(o),r._configureStream()}r._driver.io.pipe(r._stream),r._stream.pipe(r._driver.io),r._driver.start()}),this._proxy.on("error",function(o){r._driver.emit("error",o)})};xU.exports=lw});var TU=G((MNe,EU)=>{"use strict";var Xfe=Be("stream").Stream,Zfe=Be("util"),Jfe=Xg(),epe=Kx(),gm=aw(),CU=_O(),SU=Zg(),Jg=function(i,t,e){this.writable=!0,e=e||{},this._stream=t.socket,this._ping=e.ping||this.DEFAULT_PING,this._retry=e.retry||this.DEFAULT_RETRY;var n=Jfe.isSecureRequest(i)?"https:":"http:";this.url=n+"//"+i.headers.host+i.url,this.lastEventId=i.headers["last-event-id"]||"",this.readyState=gm.CONNECTING;var r=new epe,s=this;if(e.headers)for(var o in e.headers)r.set(o,e.headers[o]);if(!(!this._stream||!this._stream.writable)){process.nextTick(function(){s._open()}),this._stream.setTimeout(0),this._stream.setNoDelay(!0);var a=`HTTP/1.1 200 OK\r
Content-Type: text/event-stream\r
Cache-Control: no-cache, no-store\r
Connection: close\r
`+r.toString()+`\r
retry: `+Math.floor(this._retry*1e3)+`\r
\r
`;this._write(a),this._stream.on("drain",function(){s.emit("drain")}),this._ping&&(this._pingTimer=setInterval(function(){s.ping()},this._ping*1e3)),["error","end"].forEach(function(l){s._stream.on(l,function(){s.close()})})}};Zfe.inherits(Jg,Xfe);Jg.isEventSource=function(i){if(i.method!=="GET")return!1;var t=(i.headers.accept||"").split(/\s*,\s*/);return t.indexOf("text/event-stream")>=0};var kU={DEFAULT_PING:10,DEFAULT_RETRY:5,_write:function(i){if(!this.writable)return!1;try{return this._stream.write(i,"utf8")}catch{return!1}},_open:function(){if(this.readyState===gm.CONNECTING){this.readyState=gm.OPEN;var i=new SU("open");i.initEvent("open",!1,!1),this.dispatchEvent(i)}},write:function(i){return this.send(i)},end:function(i){i!==void 0&&this.write(i),this.close()},send:function(i,t){if(this.readyState>gm.OPEN)return!1;i=String(i).replace(/(\r\n|\r|\n)/g,"$1data: "),t=t||{};var e="";return t.event&&(e+="event: "+t.event+`\r
`),t.id&&(e+="id: "+t.id+`\r
`),e+="data: "+i+`\r
\r
`,this._write(e)},ping:function(){return this._write(`:\r
\r
`)},close:function(){if(this.readyState>gm.OPEN)return!1;this.readyState=gm.CLOSED,this.writable=!1,this._pingTimer&&clearInterval(this._pingTimer),this._stream&&this._stream.end();var i=new SU("close");return i.initEvent("close",!1,!1),this.dispatchEvent(i),!0}};for(yO in kU)Jg.prototype[yO]=kU[yO];var yO;for(xO in CU)Jg.prototype[xO]=CU[xO];var xO;EU.exports=Jg});var MU=G((ANe,DU)=>{"use strict";var tpe=Be("util"),wO=Xg(),IU=aw(),Wl=function(i,t,e,n,r){r=r||{},this._stream=t,this._driver=wO.http(i,{maxLength:r.maxLength,protocols:n});var s=this;if(!(!this._stream||!this._stream.writable)){if(!this._stream.readable)return this._stream.end();var o=function(){s._stream.removeListener("data",o)};this._stream.on("data",o),IU.call(this,r),process.nextTick(function(){s._driver.start(),s._driver.io.write(e)})}};tpe.inherits(Wl,IU);Wl.isWebSocket=function(i){return wO.isWebSocket(i)};Wl.validateOptions=function(i,t){wO.validateOptions(i,t)};Wl.WebSocket=Wl;Wl.Client=wU();Wl.EventSource=TU();DU.exports=Wl});var GQ="firebase",$Q="10.14.1";Ei.registerVersion(GQ,$Q,"app-compat");var KQ="firebase",YQ="10.14.1";ln(KQ,YQ,"app");var kr=new Zb("ANGULARFIRE2_VERSION");function wS(i,t,e){if(t){if(t.length===1)return t[0];let s=t.filter(o=>o.app===e);if(s.length===1)return s[0]}return e.container.getProvider(i).getImmediate({optional:!0})}var tp=(i,t)=>{let e=t?[t]:p0(),n=[];return e.forEach(r=>{r.container.getProvider(i).instances.forEach(o=>{n.includes(o)||n.push(o)})}),n},Qr=class{constructor(){return tp(QQ)}},QQ="app-check";function yS(){}var g0=class{zone;delegate;constructor(t,e=LN){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){let r=this.zone,s=function(o){r.runGuarded(()=>{t.apply(this,[o])})};return this.delegate.schedule(s,e,n)}},xS=class{zone;task=null;constructor(t){this.zone=t}call(t,e){let n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",yS,{},yS,yS)),e.pipe(Va({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{this.task!=null&&this.task.state==="scheduled"&&(this.task.invoke(),this.task=null)},10)}},ks=(()=>{class i{ngZone;outsideAngular;insideAngular;constructor(e){this.ngZone=e,this.outsideAngular=e.runOutsideAngular(()=>new g0(Zone.current)),this.insideAngular=e.run(()=>new g0(Zone.current,Cu)),globalThis.\u0275AngularFireScheduler||=this}static \u0275fac=function(n){return new(n||i)(V(_e))};static \u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();function XQ(){let i=globalThis.\u0275AngularFireScheduler;if(!i)throw new Error(`Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using
provideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).`);return i}function Fi(i){return ZQ(XQ())(i)}function ZQ(i){return function(e){return e=e.lift(new xS(i.ngZone)),e.pipe(Su(i.outsideAngular),Bc(i.insideAngular))}}var Wc=class{constructor(t){return t}},ip=class{constructor(){return p0()}};function JQ(i){return i&&i.length===1?i[0]:new Wc(Ou())}var SS=new te("angularfire2._apps"),eX={provide:Wc,useFactory:JQ,deps:[[new wr,SS]]},tX={provide:ip,deps:[[new wr,SS]]};function iX(i){return(t,e)=>{let n=e.get(Gr);ln("angularfire",kr.full,"core"),ln("angularfire",kr.full,"app"),ln("angular",Jb.full,n.toString());let r=t.runOutsideAngular(()=>i(e));return new Wc(r)}}function DL(i,...t){return jc([eX,tX,{provide:SS,useFactory:iX(i),multi:!0,deps:[_e,xn,ks,...t]}])}var nX=new Map,rX={activated:!1,tokenObservers:[]},sX={initialized:!1,enabled:!1};function Es(i){return nX.get(i)||Object.assign({},rX)}function RL(){return sX}var oX="https://content-firebaseappcheck.googleapis.com/v1";var aX="exchangeDebugToken",ML={OFFSET_DURATION:5*60*1e3,RETRIAL_MIN_WAIT:30*1e3,RETRIAL_MAX_WAIT:16*60*1e3},BPe=24*60*60*1e3;var ES=class{constructor(t,e,n,r,s){if(this.operation=t,this.retryPolicy=e,this.getWaitDuration=n,this.lowerBound=r,this.upperBound=s,this.pending=null,this.nextErrorWaitInterval=r,r>s)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(t){return N(this,null,function*(){this.stop();try{this.pending=new an,this.pending.promise.catch(e=>{}),yield lX(this.getNextRun(t)),this.pending.resolve(),yield this.pending.promise,this.pending=new an,this.pending.promise.catch(e=>{}),yield this.operation(),this.pending.resolve(),yield this.pending.promise,this.process(!0).catch(()=>{})}catch(e){this.retryPolicy(e)?this.process(!1).catch(()=>{}):this.stop()}})}getNextRun(t){if(t)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{let e=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),e}}};function lX(i){return new Promise(t=>{setTimeout(t,i)})}var cX={"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"},qa=new wL("appCheck","AppCheck",cX);function FL(i){if(!Es(i).activated)throw qa.create("use-before-activation",{appName:i.name})}function NL(n,r){return N(this,arguments,function*({url:i,body:t},e){let s={"Content-Type":"application/json"},o=e.getImmediate({optional:!0});if(o){let m=yield o.getHeartbeatsHeader();m&&(s["X-Firebase-Client"]=m)}let a={method:"POST",body:JSON.stringify(t),headers:s},l;try{l=yield fetch(i,a)}catch(m){throw qa.create("fetch-network-error",{originalErrorMessage:m?.message})}if(l.status!==200)throw qa.create("fetch-status-error",{httpStatus:l.status});let c;try{c=yield l.json()}catch(m){throw qa.create("fetch-parse-error",{originalErrorMessage:m?.message})}let d=c.ttl.match(/^([\d.]+)(s)$/);if(!d||!d[2]||isNaN(Number(d[1])))throw qa.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${c.ttl}`});let u=Number(d[1])*1e3,h=Date.now();return{token:c.token,expireTimeMillis:h+u,issuedAtTimeMillis:h}})}function LL(i,t){let{projectId:e,appId:n,apiKey:r}=i.options;return{url:`${oX}/projects/${e}/apps/${n}:${aX}?key=${r}`,body:{debug_token:t}}}var dX="firebase-app-check-database",uX=1,TS="firebase-app-check-store";var _0=null;function hX(){return _0||(_0=new Promise((i,t)=>{try{let e=indexedDB.open(dX,uX);e.onsuccess=n=>{i(n.target.result)},e.onerror=n=>{var r;t(qa.create("storage-open",{originalErrorMessage:(r=n.target.error)===null||r===void 0?void 0:r.message}))},e.onupgradeneeded=n=>{let r=n.target.result;switch(n.oldVersion){case 0:r.createObjectStore(TS,{keyPath:"compositeKey"})}}}catch(e){t(qa.create("storage-open",{originalErrorMessage:e?.message}))}}),_0)}function mX(i,t){return fX(pX(i),t)}function fX(i,t){return N(this,null,function*(){let n=(yield hX()).transaction(TS,"readwrite"),s=n.objectStore(TS).put({compositeKey:i,value:t});return new Promise((o,a)=>{s.onsuccess=l=>{o()},n.onerror=l=>{var c;a(qa.create("storage-set",{originalErrorMessage:(c=l.target.error)===null||c===void 0?void 0:c.message}))}})})}function pX(i){return`${i.options.appId}-${i.name}`}var IS=new Ha("@firebase/app-check");function kS(i,t){return c0()?mX(i,t).catch(e=>{IS.warn(`Failed to write token to IndexedDB. Error: ${e}`)}):Promise.resolve()}function BL(){return RL().enabled}function VL(){return N(this,null,function*(){let i=RL();if(i.enabled&&i.token)return i.token.promise;throw Error(`
            Can't get debug token in production mode.
        `)})}var gX={error:"UNKNOWN_ERROR"};function _X(i){return a0.encodeString(JSON.stringify(i),!1)}function DS(i,t=!1){return N(this,null,function*(){let e=i.app;FL(e);let n=Es(e),r=n.token,s;if(r&&!np(r)&&(n.token=void 0,r=void 0),!r){let l=yield n.cachedTokenPromise;l&&(np(l)?r=l:yield kS(e,void 0))}if(!t&&r&&np(r))return{token:r.token};let o=!1;if(BL()){n.exchangeTokenPromise||(n.exchangeTokenPromise=NL(LL(e,yield VL()),i.heartbeatServiceProvider).finally(()=>{n.exchangeTokenPromise=void 0}),o=!0);let l=yield n.exchangeTokenPromise;return yield kS(e,l),n.token=l,{token:l.token}}try{n.exchangeTokenPromise||(n.exchangeTokenPromise=n.provider.getToken().finally(()=>{n.exchangeTokenPromise=void 0}),o=!0),r=yield Es(e).exchangeTokenPromise}catch(l){l.code==="appCheck/throttled"?IS.warn(l.message):IS.error(l),s=l}let a;return r?s?np(r)?a={token:r.token,internalError:s}:a=OL(s):(a={token:r.token},n.token=r,yield kS(e,r)):a=OL(s),o&&xX(e,a),a})}function bX(i){return N(this,null,function*(){let t=i.app;FL(t);let{provider:e}=Es(t);if(BL()){let n=yield VL(),{token:r}=yield NL(LL(t,n),i.heartbeatServiceProvider);return{token:r}}else{let{token:n}=yield e.getToken();return{token:n}}})}function vX(i,t,e,n){let{app:r}=i,s=Es(r),o={next:e,error:n,type:t};if(s.tokenObservers=[...s.tokenObservers,o],s.token&&np(s.token)){let a=s.token;Promise.resolve().then(()=>{e({token:a.token}),AL(i)}).catch(()=>{})}s.cachedTokenPromise.then(()=>AL(i))}function zL(i,t){let e=Es(i),n=e.tokenObservers.filter(r=>r.next!==t);n.length===0&&e.tokenRefresher&&e.tokenRefresher.isRunning()&&e.tokenRefresher.stop(),e.tokenObservers=n}function AL(i){let{app:t}=i,e=Es(t),n=e.tokenRefresher;n||(n=yX(i),e.tokenRefresher=n),!n.isRunning()&&e.isTokenAutoRefreshEnabled&&n.start()}function yX(i){let{app:t}=i;return new ES(()=>N(this,null,function*(){let e=Es(t),n;if(e.token?n=yield DS(i,!0):n=yield DS(i),n.error)throw n.error;if(n.internalError)throw n.internalError}),()=>!0,()=>{let e=Es(t);if(e.token){let n=e.token.issuedAtTimeMillis+(e.token.expireTimeMillis-e.token.issuedAtTimeMillis)*.5+3e5,r=e.token.expireTimeMillis-5*60*1e3;return n=Math.min(n,r),Math.max(0,n-Date.now())}else return 0},ML.RETRIAL_MIN_WAIT,ML.RETRIAL_MAX_WAIT)}function xX(i,t){let e=Es(i).tokenObservers;for(let n of e)try{n.type==="EXTERNAL"&&t.error!=null?n.error(t.error):n.next(t)}catch{}}function np(i){return i.expireTimeMillis-Date.now()>0}function OL(i){return{token:_X(gX),error:i}}var MS=class{constructor(t,e){this.app=t,this.heartbeatServiceProvider=e}_delete(){let{tokenObservers:t}=Es(this.app);for(let e of t)zL(this.app,e.next);return Promise.resolve()}};function wX(i,t){return new MS(i,t)}function CX(i){return{getToken:t=>DS(i,t),getLimitedUseToken:()=>bX(i),addTokenListener:t=>vX(i,"INTERNAL",t),removeTokenListener:t=>zL(i.app,t)}}var SX="@firebase/app-check",kX="0.8.8";var EX="app-check",PL="app-check-internal";function TX(){qc(new Sr(EX,i=>{let t=i.getProvider("app").getImmediate(),e=i.getProvider("heartbeat");return wX(t,e)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((i,t,e)=>{i.getProvider(PL).initialize()})),qc(new Sr(PL,i=>{let t=i.getProvider("app-check").getImmediate();return CX(t)},"PUBLIC").setInstantiationMode("EXPLICIT")),ln(SX,kX)}TX();var IX=["localhost","0.0.0.0","127.0.0.1"],QPe=typeof window<"u"&&IX.includes(window.location.hostname);var DX=["ngOnDestroy"],UL=(i,t,e,n={})=>new Proxy(i,{get:(r,s)=>e.runOutsideAngular(()=>{if(i[s])return n?.spy?.get&&n.spy.get(s,i[s]),i[s];if(DX.indexOf(s)>-1)return()=>{};let o=t.toPromise().then(a=>{let l=a?.[s];return typeof l=="function"?l.bind(a):l?.then?l.then(c=>e.run(()=>c)):e.run(()=>l)});return new Proxy(()=>{},{get:(a,l)=>o[l],apply:(a,l,c)=>o.then(d=>{let u=d?.(...c);return n?.spy?.apply&&n.spy.apply(s,c,u),u})})})});var b0=class{constructor(t){return t}},Wa=new te("angularfire2.app.options"),Ga=new te("angularfire2.app.name");function Gc(i,t,e){let n=typeof e=="string"&&e||"[DEFAULT]",r=typeof e=="object"&&e||{};r.name=r.name||n;let o=Ei.apps.filter(a=>a&&a.name===r.name)[0]||t.runOutsideAngular(()=>Ei.initializeApp(i,r));try{if(JSON.stringify(i)!==JSON.stringify(o.options)){let a=!!module.hot;MX("error",`${o.name} Firebase App already initialized with different options${a?", you may need to reload as Firebase is not HMR aware.":"."}`)}}catch{}return new b0(o)}var MX=(i,...t)=>{dS()&&typeof console<"u"&&console[i](...t)},AX={provide:b0,useFactory:Gc,deps:[Wa,_e,[new wr,Ga]]},OS=(()=>{class i{static initializeApp(e,n){return{ngModule:i,providers:[{provide:Wa,useValue:e},{provide:Ga,useValue:n}]}}constructor(e){Ei.registerVersion("angularfire",kr.full,"core"),Ei.registerVersion("angularfire",kr.full,"app-compat"),Ei.registerVersion("angular",Jb.full,e.toString())}static \u0275fac=function(n){return new(n||i)(V(Gr))};static \u0275mod=de({type:i});static \u0275inj=ce({providers:[AX]})}return i})();function Pu(i,t,e,n,r){let[,s,o]=globalThis.\u0275AngularfireInstanceCache.find(a=>a[0]===i)||[];if(s)return OX(r,o)||(jL("error",`${t} was already initialized on the ${e} Firebase App with different settings.${PX?" You may need to reload as Firebase is not HMR aware.":""}`),jL("warn",{is:r,was:o})),s;{let a=n();return globalThis.\u0275AngularfireInstanceCache.push([i,a,r]),a}}function OX(i,t){try{return i.toString()===t.toString()}catch{return i===t}}var PX=typeof module<"u"&&!!module.hot,jL=(i,...t)=>{dS()&&typeof console<"u"&&console[i](...t)};globalThis.\u0275AngularfireInstanceCache||=[];var rp=new te("angularfire2.auth.use-emulator"),sp=new te("angularfire2.auth.settings"),op=new te("angularfire2.auth.tenant-id"),ap=new te("angularfire2.auth.langugage-code"),lp=new te("angularfire2.auth.use-device-language"),cp=new te("angularfire.auth.persistence"),dp=(i,t,e,n,r,s,o,a)=>Pu(`${i.name}.auth`,"AngularFireAuth",i.name,()=>{let l=t.runOutsideAngular(()=>i.auth());if(e&&l.useEmulator(...e),n&&(l.tenantId=n),l.languageCode=r,s&&l.useDeviceLanguage(),o)for(let[c,d]of Object.entries(o))l.settings[c]=d;return a&&l.setPersistence(a),l},[e,n,r,s,o,a]),Yt=(()=>{class i{authState;idToken;user;idTokenResult;credential;constructor(e,n,r,s,o,a,l,c,d,u,h,m){let _=new ke,b=We(void 0).pipe(Bc(o.outsideAngular),bi(()=>s.runOutsideAngular(()=>import("./chunk-XE2OATC4.mjs"))),Ue(()=>Gc(e,s,n)),Ue(v=>dp(v,s,a,c,d,u,l,h)),Jo({bufferSize:1,refCount:!1}));if(r0(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=We(null);else{b.pipe(jN()).subscribe();let v=b.pipe(bi(F=>F.getRedirectResult().then(M=>M,()=>null)),Fi,Jo({bufferSize:1,refCount:!1})),I=b.pipe(bi(F=>new vn(M=>({unsubscribe:s.runOutsideAngular(()=>F.onAuthStateChanged(L=>M.next(L),L=>M.error(L),()=>M.complete()))})))),A=b.pipe(bi(F=>new vn(M=>({unsubscribe:s.runOutsideAngular(()=>F.onIdTokenChanged(L=>M.next(L),L=>M.error(L),()=>M.complete()))}))));this.authState=v.pipe(aS(I),Su(o.outsideAngular),Bc(o.insideAngular)),this.user=v.pipe(aS(A),Su(o.outsideAngular),Bc(o.insideAngular)),this.idToken=this.user.pipe(bi(F=>F?Wr(F.getIdToken()):We(null))),this.idTokenResult=this.user.pipe(bi(F=>F?Wr(F.getIdTokenResult()):We(null))),this.credential=_i(v,_,this.authState.pipe(Ot(F=>!F))).pipe(Ue(F=>F?.user?F:null),Su(o.outsideAngular),Bc(o.insideAngular))}return UL(this,b,s,{spy:{apply:(v,I,A)=>{(v.startsWith("signIn")||v.startsWith("createUser"))&&A.then(F=>_.next(F))}}})}static \u0275fac=function(n){return new(n||i)(V(Wa),V(Ga,8),V(Gr),V(_e),V(ks),V(rp,8),V(sp,8),V(op,8),V(ap,8),V(lp,8),V(cp,8),V(Qr,8))};static \u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})();import{inspect as Yse,TextEncoder as Qse,TextDecoder as Xse}from"util";import{randomBytes as Zse}from"crypto";var HL=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},qL={};var $a,PS;(function(){var i;function t(T,C){function E(){}E.prototype=C.prototype,T.D=C.prototype,T.prototype=new E,T.prototype.constructor=T,T.C=function(D,S,R){for(var w=Array(arguments.length-2),k=2;k<arguments.length;k++)w[k-2]=arguments[k];return C.prototype[S].apply(D,w)}}function e(){this.blockSize=-1}function n(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(n,e),n.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(T,C,E){E||(E=0);var D=Array(16);if(typeof C=="string")for(var S=0;16>S;++S)D[S]=C.charCodeAt(E++)|C.charCodeAt(E++)<<8|C.charCodeAt(E++)<<16|C.charCodeAt(E++)<<24;else for(S=0;16>S;++S)D[S]=C[E++]|C[E++]<<8|C[E++]<<16|C[E++]<<24;C=T.g[0],E=T.g[1],S=T.g[2];var R=T.g[3],w=C+(R^E&(S^R))+D[0]+3614090360&4294967295;C=E+(w<<7&4294967295|w>>>25),w=R+(S^C&(E^S))+D[1]+3905402710&4294967295,R=C+(w<<12&4294967295|w>>>20),w=S+(E^R&(C^E))+D[2]+606105819&4294967295,S=R+(w<<17&4294967295|w>>>15),w=E+(C^S&(R^C))+D[3]+3250441966&4294967295,E=S+(w<<22&4294967295|w>>>10),w=C+(R^E&(S^R))+D[4]+4118548399&4294967295,C=E+(w<<7&4294967295|w>>>25),w=R+(S^C&(E^S))+D[5]+1200080426&4294967295,R=C+(w<<12&4294967295|w>>>20),w=S+(E^R&(C^E))+D[6]+2821735955&4294967295,S=R+(w<<17&4294967295|w>>>15),w=E+(C^S&(R^C))+D[7]+4249261313&4294967295,E=S+(w<<22&4294967295|w>>>10),w=C+(R^E&(S^R))+D[8]+1770035416&4294967295,C=E+(w<<7&4294967295|w>>>25),w=R+(S^C&(E^S))+D[9]+2336552879&4294967295,R=C+(w<<12&4294967295|w>>>20),w=S+(E^R&(C^E))+D[10]+4294925233&4294967295,S=R+(w<<17&4294967295|w>>>15),w=E+(C^S&(R^C))+D[11]+2304563134&4294967295,E=S+(w<<22&4294967295|w>>>10),w=C+(R^E&(S^R))+D[12]+1804603682&4294967295,C=E+(w<<7&4294967295|w>>>25),w=R+(S^C&(E^S))+D[13]+4254626195&4294967295,R=C+(w<<12&4294967295|w>>>20),w=S+(E^R&(C^E))+D[14]+2792965006&4294967295,S=R+(w<<17&4294967295|w>>>15),w=E+(C^S&(R^C))+D[15]+1236535329&4294967295,E=S+(w<<22&4294967295|w>>>10),w=C+(S^R&(E^S))+D[1]+4129170786&4294967295,C=E+(w<<5&4294967295|w>>>27),w=R+(E^S&(C^E))+D[6]+3225465664&4294967295,R=C+(w<<9&4294967295|w>>>23),w=S+(C^E&(R^C))+D[11]+643717713&4294967295,S=R+(w<<14&4294967295|w>>>18),w=E+(R^C&(S^R))+D[0]+3921069994&4294967295,E=S+(w<<20&4294967295|w>>>12),w=C+(S^R&(E^S))+D[5]+3593408605&4294967295,C=E+(w<<5&4294967295|w>>>27),w=R+(E^S&(C^E))+D[10]+38016083&4294967295,R=C+(w<<9&4294967295|w>>>23),w=S+(C^E&(R^C))+D[15]+3634488961&4294967295,S=R+(w<<14&4294967295|w>>>18),w=E+(R^C&(S^R))+D[4]+3889429448&4294967295,E=S+(w<<20&4294967295|w>>>12),w=C+(S^R&(E^S))+D[9]+568446438&4294967295,C=E+(w<<5&4294967295|w>>>27),w=R+(E^S&(C^E))+D[14]+3275163606&4294967295,R=C+(w<<9&4294967295|w>>>23),w=S+(C^E&(R^C))+D[3]+4107603335&4294967295,S=R+(w<<14&4294967295|w>>>18),w=E+(R^C&(S^R))+D[8]+1163531501&4294967295,E=S+(w<<20&4294967295|w>>>12),w=C+(S^R&(E^S))+D[13]+2850285829&4294967295,C=E+(w<<5&4294967295|w>>>27),w=R+(E^S&(C^E))+D[2]+4243563512&4294967295,R=C+(w<<9&4294967295|w>>>23),w=S+(C^E&(R^C))+D[7]+1735328473&4294967295,S=R+(w<<14&4294967295|w>>>18),w=E+(R^C&(S^R))+D[12]+2368359562&4294967295,E=S+(w<<20&4294967295|w>>>12),w=C+(E^S^R)+D[5]+4294588738&4294967295,C=E+(w<<4&4294967295|w>>>28),w=R+(C^E^S)+D[8]+2272392833&4294967295,R=C+(w<<11&4294967295|w>>>21),w=S+(R^C^E)+D[11]+1839030562&4294967295,S=R+(w<<16&4294967295|w>>>16),w=E+(S^R^C)+D[14]+4259657740&4294967295,E=S+(w<<23&4294967295|w>>>9),w=C+(E^S^R)+D[1]+2763975236&4294967295,C=E+(w<<4&4294967295|w>>>28),w=R+(C^E^S)+D[4]+1272893353&4294967295,R=C+(w<<11&4294967295|w>>>21),w=S+(R^C^E)+D[7]+4139469664&4294967295,S=R+(w<<16&4294967295|w>>>16),w=E+(S^R^C)+D[10]+3200236656&4294967295,E=S+(w<<23&4294967295|w>>>9),w=C+(E^S^R)+D[13]+681279174&4294967295,C=E+(w<<4&4294967295|w>>>28),w=R+(C^E^S)+D[0]+3936430074&4294967295,R=C+(w<<11&4294967295|w>>>21),w=S+(R^C^E)+D[3]+3572445317&4294967295,S=R+(w<<16&4294967295|w>>>16),w=E+(S^R^C)+D[6]+76029189&4294967295,E=S+(w<<23&4294967295|w>>>9),w=C+(E^S^R)+D[9]+3654602809&4294967295,C=E+(w<<4&4294967295|w>>>28),w=R+(C^E^S)+D[12]+3873151461&4294967295,R=C+(w<<11&4294967295|w>>>21),w=S+(R^C^E)+D[15]+530742520&4294967295,S=R+(w<<16&4294967295|w>>>16),w=E+(S^R^C)+D[2]+3299628645&4294967295,E=S+(w<<23&4294967295|w>>>9),w=C+(S^(E|~R))+D[0]+4096336452&4294967295,C=E+(w<<6&4294967295|w>>>26),w=R+(E^(C|~S))+D[7]+1126891415&4294967295,R=C+(w<<10&4294967295|w>>>22),w=S+(C^(R|~E))+D[14]+2878612391&4294967295,S=R+(w<<15&4294967295|w>>>17),w=E+(R^(S|~C))+D[5]+4237533241&4294967295,E=S+(w<<21&4294967295|w>>>11),w=C+(S^(E|~R))+D[12]+1700485571&4294967295,C=E+(w<<6&4294967295|w>>>26),w=R+(E^(C|~S))+D[3]+2399980690&4294967295,R=C+(w<<10&4294967295|w>>>22),w=S+(C^(R|~E))+D[10]+4293915773&4294967295,S=R+(w<<15&4294967295|w>>>17),w=E+(R^(S|~C))+D[1]+2240044497&4294967295,E=S+(w<<21&4294967295|w>>>11),w=C+(S^(E|~R))+D[8]+1873313359&4294967295,C=E+(w<<6&4294967295|w>>>26),w=R+(E^(C|~S))+D[15]+4264355552&4294967295,R=C+(w<<10&4294967295|w>>>22),w=S+(C^(R|~E))+D[6]+2734768916&4294967295,S=R+(w<<15&4294967295|w>>>17),w=E+(R^(S|~C))+D[13]+1309151649&4294967295,E=S+(w<<21&4294967295|w>>>11),w=C+(S^(E|~R))+D[4]+4149444226&4294967295,C=E+(w<<6&4294967295|w>>>26),w=R+(E^(C|~S))+D[11]+3174756917&4294967295,R=C+(w<<10&4294967295|w>>>22),w=S+(C^(R|~E))+D[2]+718787259&4294967295,S=R+(w<<15&4294967295|w>>>17),w=E+(R^(S|~C))+D[9]+3951481745&4294967295,T.g[0]=T.g[0]+C&4294967295,T.g[1]=T.g[1]+(S+(w<<21&4294967295|w>>>11))&4294967295,T.g[2]=T.g[2]+S&4294967295,T.g[3]=T.g[3]+R&4294967295}n.prototype.u=function(T,C){C===void 0&&(C=T.length);for(var E=C-this.blockSize,D=this.B,S=this.h,R=0;R<C;){if(S==0)for(;R<=E;)r(this,T,R),R+=this.blockSize;if(typeof T=="string"){for(;R<C;)if(D[S++]=T.charCodeAt(R++),S==this.blockSize){r(this,D),S=0;break}}else for(;R<C;)if(D[S++]=T[R++],S==this.blockSize){r(this,D),S=0;break}}this.h=S,this.o+=C},n.prototype.v=function(){var T=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);T[0]=128;for(var C=1;C<T.length-8;++C)T[C]=0;var E=8*this.o;for(C=T.length-8;C<T.length;++C)T[C]=E&255,E/=256;for(this.u(T),T=Array(16),C=E=0;4>C;++C)for(var D=0;32>D;D+=8)T[E++]=this.g[C]>>>D&255;return T};function s(T,C){var E=a;return Object.prototype.hasOwnProperty.call(E,T)?E[T]:E[T]=C(T)}function o(T,C){this.h=C;for(var E=[],D=!0,S=T.length-1;0<=S;S--){var R=T[S]|0;D&&R==C||(E[S]=R,D=!1)}this.g=E}var a={};function l(T){return-128<=T&&128>T?s(T,function(C){return new o([C|0],0>C?-1:0)}):new o([T|0],0>T?-1:0)}function c(T){if(isNaN(T)||!isFinite(T))return u;if(0>T)return v(c(-T));for(var C=[],E=1,D=0;T>=E;D++)C[D]=T/E|0,E*=4294967296;return new o(C,0)}function d(T,C){if(T.length==0)throw Error("number format error: empty string");if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(T.charAt(0)=="-")return v(d(T.substring(1),C));if(0<=T.indexOf("-"))throw Error('number format error: interior "-" character');for(var E=c(Math.pow(C,8)),D=u,S=0;S<T.length;S+=8){var R=Math.min(8,T.length-S),w=parseInt(T.substring(S,S+R),C);8>R?(R=c(Math.pow(C,R)),D=D.j(R).add(c(w))):(D=D.j(E),D=D.add(c(w)))}return D}var u=l(0),h=l(1),m=l(16777216);i=o.prototype,i.m=function(){if(b(this))return-v(this).m();for(var T=0,C=1,E=0;E<this.g.length;E++){var D=this.i(E);T+=(0<=D?D:4294967296+D)*C,C*=4294967296}return T},i.toString=function(T){if(T=T||10,2>T||36<T)throw Error("radix out of range: "+T);if(_(this))return"0";if(b(this))return"-"+v(this).toString(T);for(var C=c(Math.pow(T,6)),E=this,D="";;){var S=M(E,C).g;E=I(E,S.j(C));var R=((0<E.g.length?E.g[0]:E.h)>>>0).toString(T);if(E=S,_(E))return R+D;for(;6>R.length;)R="0"+R;D=R+D}},i.i=function(T){return 0>T?0:T<this.g.length?this.g[T]:this.h};function _(T){if(T.h!=0)return!1;for(var C=0;C<T.g.length;C++)if(T.g[C]!=0)return!1;return!0}function b(T){return T.h==-1}i.l=function(T){return T=I(this,T),b(T)?-1:_(T)?0:1};function v(T){for(var C=T.g.length,E=[],D=0;D<C;D++)E[D]=~T.g[D];return new o(E,~T.h).add(h)}i.abs=function(){return b(this)?v(this):this},i.add=function(T){for(var C=Math.max(this.g.length,T.g.length),E=[],D=0,S=0;S<=C;S++){var R=D+(this.i(S)&65535)+(T.i(S)&65535),w=(R>>>16)+(this.i(S)>>>16)+(T.i(S)>>>16);D=w>>>16,R&=65535,w&=65535,E[S]=w<<16|R}return new o(E,E[E.length-1]&-2147483648?-1:0)};function I(T,C){return T.add(v(C))}i.j=function(T){if(_(this)||_(T))return u;if(b(this))return b(T)?v(this).j(v(T)):v(v(this).j(T));if(b(T))return v(this.j(v(T)));if(0>this.l(m)&&0>T.l(m))return c(this.m()*T.m());for(var C=this.g.length+T.g.length,E=[],D=0;D<2*C;D++)E[D]=0;for(D=0;D<this.g.length;D++)for(var S=0;S<T.g.length;S++){var R=this.i(D)>>>16,w=this.i(D)&65535,k=T.i(S)>>>16,X=T.i(S)&65535;E[2*D+2*S]+=w*X,A(E,2*D+2*S),E[2*D+2*S+1]+=R*X,A(E,2*D+2*S+1),E[2*D+2*S+1]+=w*k,A(E,2*D+2*S+1),E[2*D+2*S+2]+=R*k,A(E,2*D+2*S+2)}for(D=0;D<C;D++)E[D]=E[2*D+1]<<16|E[2*D];for(D=C;D<2*C;D++)E[D]=0;return new o(E,0)};function A(T,C){for(;(T[C]&65535)!=T[C];)T[C+1]+=T[C]>>>16,T[C]&=65535,C++}function F(T,C){this.g=T,this.h=C}function M(T,C){if(_(C))throw Error("division by zero");if(_(T))return new F(u,u);if(b(T))return C=M(v(T),C),new F(v(C.g),v(C.h));if(b(C))return C=M(T,v(C)),new F(v(C.g),C.h);if(30<T.g.length){if(b(T)||b(C))throw Error("slowDivide_ only works with positive integers.");for(var E=h,D=C;0>=D.l(T);)E=L(E),D=L(D);var S=U(E,1),R=U(D,1);for(D=U(D,2),E=U(E,2);!_(D);){var w=R.add(D);0>=w.l(T)&&(S=S.add(E),R=w),D=U(D,1),E=U(E,1)}return C=I(T,S.j(C)),new F(S,C)}for(S=u;0<=T.l(C);){for(E=Math.max(1,Math.floor(T.m()/C.m())),D=Math.ceil(Math.log(E)/Math.LN2),D=48>=D?1:Math.pow(2,D-48),R=c(E),w=R.j(C);b(w)||0<w.l(T);)E-=D,R=c(E),w=R.j(C);_(R)&&(R=h),S=S.add(R),T=I(T,w)}return new F(S,T)}i.A=function(T){return M(this,T).h},i.and=function(T){for(var C=Math.max(this.g.length,T.g.length),E=[],D=0;D<C;D++)E[D]=this.i(D)&T.i(D);return new o(E,this.h&T.h)},i.or=function(T){for(var C=Math.max(this.g.length,T.g.length),E=[],D=0;D<C;D++)E[D]=this.i(D)|T.i(D);return new o(E,this.h|T.h)},i.xor=function(T){for(var C=Math.max(this.g.length,T.g.length),E=[],D=0;D<C;D++)E[D]=this.i(D)^T.i(D);return new o(E,this.h^T.h)};function L(T){for(var C=T.g.length+1,E=[],D=0;D<C;D++)E[D]=T.i(D)<<1|T.i(D-1)>>>31;return new o(E,T.h)}function U(T,C){var E=C>>5;C%=32;for(var D=T.g.length-E,S=[],R=0;R<D;R++)S[R]=0<C?T.i(R+E)>>>C|T.i(R+E+1)<<32-C:T.i(R+E);return new o(S,T.h)}n.prototype.digest=n.prototype.v,n.prototype.reset=n.prototype.s,n.prototype.update=n.prototype.u,PS=qL.Md5=n,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,$a=qL.Integer=o}).apply(typeof HL<"u"?HL:typeof self<"u"?self:typeof window<"u"?window:{});var fd=Ub(h5(),1),Cz=Ub(TE(),1);var m5="@firebase/firestore",f5="4.7.3";var Ki=class{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}};Ki.UNAUTHENTICATED=new Ki(null);Ki.GOOGLE_CREDENTIALS=new Ki("google-credentials-uid");Ki.FIRST_PARTY=new Ki("first-party-uid");Ki.MOCK_USER=new Ki("mock-user");var Jse="10.14.0";var Zh=Jse;function eoe(i){Zh=i}function toe(i){return Yse(i,{depth:100})}var Il=new Ha("@firebase/firestore");function kh(){return Il.logLevel}function cM(i){Il.setLogLevel(i)}function oe(i,...t){if(Il.logLevel<=Yr.DEBUG){let e=t.map(dM);Il.debug(`Firestore (${Zh}): ${i}`,...e)}}function xi(i,...t){if(Il.logLevel<=Yr.ERROR){let e=t.map(dM);Il.error(`Firestore (${Zh}): ${i}`,...e)}}function Ns(i,...t){if(Il.logLevel<=Yr.WARN){let e=t.map(dM);Il.warn(`Firestore (${Zh}): ${i}`,...e)}}function dM(i){if(typeof i=="string")return i;try{return toe(i)}catch{return i}}function Ce(i="Unexpected state"){let t=`FIRESTORE (${Zh}) INTERNAL ASSERTION FAILED: `+i;throw xi(t),new Error(t)}function Ae(i,t){i||Ce()}function Sz(i,t){i||Ce()}function ge(i,t){return i}var K={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},ie=class extends xL{constructor(t,e){super(t,e),this.code=t,this.message=e,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}};var Gi=class{constructor(){this.promise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}};var xy=class{constructor(t,e){this.user=e,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}},lI=class{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,e){t.enqueueRetryable(()=>e(Ki.UNAUTHENTICATED))}shutdown(){}},cI=class{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,e){this.changeListener=e,t.enqueueRetryable(()=>e(this.token.user))}shutdown(){this.changeListener=null}},dI=class{constructor(t){this.authProvider=t,this.currentUser=Ki.UNAUTHENTICATED,this.tokenCounter=0,this.forceRefresh=!1,this.auth=null}start(t,e){Ae(this.tokenListener===void 0);let n=this.tokenCounter,r=l=>this.tokenCounter!==n?(n=this.tokenCounter,e(l)):Promise.resolve(),s=new Gi;this.tokenListener=()=>{this.tokenCounter++,this.currentUser=this.getUser(),s.resolve(),s=new Gi,t.enqueueRetryable(()=>r(this.currentUser))};let o=()=>{let l=s;t.enqueueRetryable(()=>N(this,null,function*(){yield l.promise,yield r(this.currentUser)}))},a=l=>{oe("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.tokenListener&&(this.auth.addAuthTokenListener(this.tokenListener),o())};this.authProvider.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){let l=this.authProvider.getImmediate({optional:!0});l?a(l):(oe("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Gi)}},0),o()}getToken(){let t=this.tokenCounter,e=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(e).then(n=>this.tokenCounter!==t?(oe("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):n?(Ae(typeof n.accessToken=="string"),new xy(n.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.tokenListener&&this.auth.removeAuthTokenListener(this.tokenListener),this.tokenListener=void 0}getUser(){let t=this.auth&&this.auth.getUid();return Ae(t===null||typeof t=="string"),new Ki(t)}},uI=class{constructor(t,e,n){this.sessionIndex=t,this.iamToken=e,this.authTokenFactory=n,this.type="FirstParty",this.user=Ki.FIRST_PARTY,this._headers=new Map}getAuthToken(){return this.authTokenFactory?this.authTokenFactory():null}get headers(){this._headers.set("X-Goog-AuthUser",this.sessionIndex);let t=this.getAuthToken();return t&&this._headers.set("Authorization",t),this.iamToken&&this._headers.set("X-Goog-Iam-Authorization-Token",this.iamToken),this._headers}},hI=class{constructor(t,e,n){this.sessionIndex=t,this.iamToken=e,this.authTokenFactory=n}getToken(){return Promise.resolve(new uI(this.sessionIndex,this.iamToken,this.authTokenFactory))}start(t,e){t.enqueueRetryable(()=>e(Ki.FIRST_PARTY))}shutdown(){}invalidateToken(){}},mI=class{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}},fI=class{constructor(t){this.appCheckProvider=t,this.forceRefresh=!1,this.appCheck=null,this.latestAppCheckToken=null}start(t,e){Ae(this.tokenListener===void 0);let n=s=>{s.error!=null&&oe("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);let o=s.token!==this.latestAppCheckToken;return this.latestAppCheckToken=s.token,oe("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?e(s.token):Promise.resolve()};this.tokenListener=s=>{t.enqueueRetryable(()=>n(s))};let r=s=>{oe("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.tokenListener&&this.appCheck.addTokenListener(this.tokenListener)};this.appCheckProvider.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){let s=this.appCheckProvider.getImmediate({optional:!0});s?r(s):oe("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){let t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(e=>e?(Ae(typeof e.token=="string"),this.latestAppCheckToken=e.token,new mI(e.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.tokenListener&&this.appCheck.removeTokenListener(this.tokenListener),this.tokenListener=void 0}};function ioe(i){if(!i)return new lI;switch(i.type){case"firstParty":return new hI(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new ie(K.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}function noe(i){return Zse(i)}var wy=class{static newId(){let t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="",r=20;for(;n.length<r;){let s=noe(40);for(let o=0;o<s.length;++o)n.length<r&&s[o]<e&&(n+=t.charAt(s[o]%t.length))}return n}};function Ye(i,t){return i<t?-1:i>t?1:0}function pd(i,t,e){return i.length!==t.length?!1:i.every((n,r)=>e(n,t[r]))}function kz(i){return i+"\0"}var p5=-62135596800,g5=1e6,wi=class i{constructor(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new ie(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new ie(K.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<p5)throw new ie(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new ie(K.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}static now(){return i.fromMillis(Date.now())}static fromDate(t){return i.fromMillis(t.getTime())}static fromMillis(t){let e=Math.floor(t/1e3),n=Math.floor((t-e*1e3)*g5);return new i(e,n)}toDate(){return new Date(this.toMillis())}toMillis(){return this.seconds*1e3+this.nanoseconds/g5}_compareTo(t){return this.seconds===t.seconds?Ye(this.nanoseconds,t.nanoseconds):Ye(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){let t=this.seconds-p5,e=String(t).padStart(12,"0"),n=String(this.nanoseconds).padStart(9,"0");return e+"."+n}};var Ne=class i{constructor(t){this.timestamp=t}static fromTimestamp(t){return new i(t)}static min(){return new i(new wi(0,0))}static max(){return new i(new wi(253402300799,999999999))}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return this.timestamp.seconds*1e6+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}};var _5="__name__",Cy=class i{constructor(t,e,n){e===void 0?e=0:e>t.length&&Ce(),n===void 0?n=t.length-e:n>t.length-e&&Ce(),this.segments=t,this.offset=e,this.len=n}get length(){return this.len}isEqual(t){return i.comparator(this,t)===0}child(t){let e=this.segments.slice(this.offset,this.limit());return t instanceof i?t.forEach(n=>{e.push(n)}):e.push(t),this.construct(e)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0}forEach(t){for(let e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,e){let n=Math.min(t.length,e.length);for(let r=0;r<n;r++){let s=t.get(r),o=e.get(r);if(s<o)return-1;if(s>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0}},xt=class i extends Cy{construct(t,e,n){return new i(t,e,n)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){let e=[];for(let n of t){if(n.indexOf("//")>=0)throw new ie(K.INVALID_ARGUMENT,`Invalid segment (${n}). Paths must not contain // in them.`);e.push(...n.split("/").filter(r=>r.length>0))}return new i(e)}static emptyPath(){return new i([])}},roe=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Vi=class i extends Cy{construct(t,e,n){return new i(t,e,n)}static isValidIdentifier(t){return roe.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),i.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===_5}static keyField(){return new i([_5])}static fromServerFormat(t){let e=[],n="",r=0,s=()=>{if(n.length===0)throw new ie(K.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);e.push(n),n=""},o=!1;for(;r<t.length;){let a=t[r];if(a==="\\"){if(r+1===t.length)throw new ie(K.INVALID_ARGUMENT,"Path has trailing escape character: "+t);let l=t[r+1];if(!(l==="\\"||l==="."||l==="`"))throw new ie(K.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);n+=l,r+=2}else a==="`"?(o=!o,r++):a==="."&&!o?(s(),r++):(n+=a,r++)}if(s(),o)throw new ie(K.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new i(e)}static emptyPath(){return new i([])}};var pe=class i{constructor(t){this.path=t}static fromPath(t){return new i(xt.fromString(t))}static fromName(t){return new i(xt.fromString(t).popFirst(5))}static empty(){return new i(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&xt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,e){return xt.comparator(t.path,e.path)}static isDocumentKey(t){return t.length%2===0}static fromSegments(t){return new i(new xt(t.slice()))}};var Rh=-1,soe=0,pI=(()=>{class i{constructor(e,n,r,s){this.indexId=e,this.collectionGroup=n,this.fields=r,this.indexState=s}}return i.UNKNOWN_ID=-1,i})();function uM(i){return i.fields.find(t=>t.kind===2)}function gd(i){return i.fields.filter(t=>t.kind!==2)}function ooe(i){let t=gd(i);return t.length===0?0:t[t.length-1].kind}function aoe(i){return`id=${i.indexId}|cg=${i.collectionGroup}|f=${i.fields.map(t=>`${t.fieldPath}:${t.kind}`).join(",")}`}var Ah=class{constructor(t,e){this.fieldPath=t,this.kind=e}};var ag=class i{constructor(t,e){this.sequenceNumber=t,this.offset=e}static empty(){return new i(soe,as.min())}};function Ez(i,t){let e=i.toTimestamp().seconds,n=i.toTimestamp().nanoseconds+1,r=Ne.fromTimestamp(n===1e9?new wi(e+1,0):new wi(e,n));return new as(r,pe.empty(),t)}function Tz(i){return new as(i.readTime,i.key,Rh)}var as=class i{constructor(t,e,n){this.readTime=t,this.documentKey=e,this.largestBatchId=n}static min(){return new i(Ne.min(),pe.empty(),Rh)}static max(){return new i(Ne.max(),pe.empty(),Rh)}};function hM(i,t){let e=i.readTime.compareTo(t.readTime);return e!==0||(e=pe.comparator(i.documentKey,t.documentKey),e!==0)?e:Ye(i.largestBatchId,t.largestBatchId)}var Iz="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Sy=class{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}};function Vl(i){return N(this,null,function*(){if(i.code===K.FAILED_PRECONDITION&&i.message===Iz)oe("LocalStore","Unexpectedly lost primary lease");else throw i})}var q=class i{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(e=>{this.isDone=!0,this.result=e,this.nextCallback&&this.nextCallback(e)},e=>{this.isDone=!0,this.error=e,this.catchCallback&&this.catchCallback(e)})}catch(t){return this.next(void 0,t)}next(t,e){return this.callbackAttached&&Ce(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(e,this.error):this.wrapSuccess(t,this.result):new i((n,r)=>{this.nextCallback=s=>{this.wrapSuccess(t,s).next(n,r)},this.catchCallback=s=>{this.wrapFailure(e,s).next(n,r)}})}toPromise(){return new Promise((t,e)=>{this.next(t,e)})}wrapUserFunction(t){try{let e=t();return e instanceof i?e:i.resolve(e)}catch(e){return i.reject(e)}}wrapSuccess(t,e){return t?this.wrapUserFunction(()=>t(e)):i.resolve(e)}wrapFailure(t,e){return t?this.wrapUserFunction(()=>t(e)):i.reject(e)}static resolve(t){return new i((e,n)=>{e(t)})}static reject(t){return new i((e,n)=>{n(t)})}static waitFor(t){return new i((e,n)=>{let r=0,s=0,o=!1;t.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&e()},l=>n(l))}),o=!0,s===r&&e()})}static or(t){let e=i.resolve(!1);for(let n of t)e=e.next(r=>r?i.resolve(r):n());return e}static forEach(t,e){let n=[];return t.forEach((r,s)=>{n.push(e.call(this,r,s))}),this.waitFor(n)}static mapArray(t,e){return new i((n,r)=>{let s=t.length,o=new Array(s),a=0;for(let l=0;l<s;l++){let c=l;e(t[c]).next(d=>{o[c]=d,++a,a===s&&n(o)},d=>r(d))}})}static doWhile(t,e){return new i((n,r)=>{let s=()=>{t()===!0?e().next(()=>{s()},r):n()};s()})}};var Ar="SimpleDb",loe=3,ky=class i{constructor(t,e){this.action=t,this.transaction=e,this.aborted=!1,this.completionDeferred=new Gi,this.transaction.oncomplete=()=>{this.completionDeferred.resolve()},this.transaction.onabort=()=>{e.error?this.completionDeferred.reject(new md(t,e.error)):this.completionDeferred.resolve()},this.transaction.onerror=n=>{let r=mM(n.target.error);this.completionDeferred.reject(new md(t,r))}}static open(t,e,n,r){try{return new i(e,t.transaction(r,n))}catch(s){throw new md(e,s)}}get completionPromise(){return this.completionDeferred.promise}abort(t){t&&this.completionDeferred.reject(t),this.aborted||(oe(Ar,"Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}maybeCommit(){let t=this.transaction;!this.aborted&&typeof t.commit=="function"&&t.commit()}store(t){let e=this.transaction.objectStore(t);return new _I(e)}},Dl=class i{constructor(t,e,n){this.name=t,this.version=e,this.schemaConverter=n,i.getIOSVersion(Xf())===12.2&&xi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(t){return oe(Ar,"Removing database:",t),od(window.indexedDB.deleteDatabase(t)).toPromise()}static isAvailable(){if(!c0())return!1;if(i.isMockPersistence())return!0;let t=Xf(),e=i.getIOSVersion(t),n=0<e&&e<10,r=Dz(t),s=0<r&&r<4.5;return!(t.indexOf("MSIE ")>0||t.indexOf("Trident/")>0||t.indexOf("Edge/")>0||n||s)}static isMockPersistence(){var t;return typeof process<"u"&&((t=process.env)===null||t===void 0?void 0:t.USE_MOCK_PERSISTENCE)==="YES"}static getStore(t,e){return t.store(e)}static getIOSVersion(t){let e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)}ensureDb(t){return N(this,null,function*(){return this.db||(oe(Ar,"Opening database:",this.name),this.db=yield new Promise((e,n)=>{let r=indexedDB.open(this.name,this.version);r.onsuccess=s=>{let o=s.target.result;e(o)},r.onblocked=()=>{n(new md(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},r.onerror=s=>{let o=s.target.error;o.name==="VersionError"?n(new ie(K.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh.")):o.name==="InvalidStateError"?n(new ie(K.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+o)):n(new md(t,o))},r.onupgradeneeded=s=>{oe(Ar,'Database "'+this.name+'" requires upgrade from version:',s.oldVersion);let o=s.target.result;this.schemaConverter.createOrUpgrade(o,r.transaction,s.oldVersion,this.version).next(()=>{oe(Ar,"Database upgrade to version "+this.version+" complete")})}})),this.versionchangelistener&&(this.db.onversionchange=e=>this.versionchangelistener(e)),this.db})}setVersionChangeListener(t){this.versionchangelistener=t,this.db&&(this.db.onversionchange=e=>t(e))}runTransaction(t,e,n,r){return N(this,null,function*(){let s=e==="readonly",o=0;for(;;){++o;try{this.db=yield this.ensureDb(t);let a=ky.open(this.db,t,s?"readonly":"readwrite",n),l=r(a).next(c=>(a.maybeCommit(),c)).catch(c=>(a.abort(c),q.reject(c))).toPromise();return l.catch(()=>{}),yield a.completionPromise,l}catch(a){let l=a,c=l.name!=="FirebaseError"&&o<loe;if(oe(Ar,"Transaction failed with error:",l.message,"Retrying:",c),this.close(),!c)return Promise.reject(l)}}})}close(){this.db&&this.db.close(),this.db=void 0}};function Dz(i){let t=i.match(/Android ([\d.]+)/i),e=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(e)}var gI=class{constructor(t){this.dbCursor=t,this.shouldStop=!1,this.nextKey=null}get isDone(){return this.shouldStop}get skipToKey(){return this.nextKey}set cursor(t){this.dbCursor=t}done(){this.shouldStop=!0}skip(t){this.nextKey=t}delete(){return od(this.dbCursor.delete())}},md=class extends ie{constructor(t,e){super(K.UNAVAILABLE,`IndexedDB transaction '${t}' failed: ${e}`),this.name="IndexedDbTransactionError"}};function zl(i){return i.name==="IndexedDbTransactionError"}var _I=class{constructor(t){this.store=t}put(t,e){let n;return e!==void 0?(oe(Ar,"PUT",this.store.name,t,e),n=this.store.put(e,t)):(oe(Ar,"PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),od(n)}add(t){oe(Ar,"ADD",this.store.name,t,t);let e=this.store.add(t);return od(e)}get(t){let e=this.store.get(t);return od(e).next(n=>(n===void 0&&(n=null),oe(Ar,"GET",this.store.name,t,n),n))}delete(t){oe(Ar,"DELETE",this.store.name,t);let e=this.store.delete(t);return od(e)}count(){oe(Ar,"COUNT",this.store.name);let t=this.store.count();return od(t)}loadAll(t,e){let n=this.options(t,e),r=n.index?this.store.index(n.index):this.store;if(typeof r.getAll=="function"){let s=r.getAll(n.range);return new q((o,a)=>{s.onerror=l=>{a(l.target.error)},s.onsuccess=l=>{o(l.target.result)}})}else{let s=this.cursor(n),o=[];return this.iterateCursor(s,(a,l)=>{o.push(l)}).next(()=>o)}}loadFirst(t,e){let n=this.store.getAll(t,e===null?void 0:e);return new q((r,s)=>{n.onerror=o=>{s(o.target.error)},n.onsuccess=o=>{r(o.target.result)}})}deleteAll(t,e){oe(Ar,"DELETE ALL",this.store.name);let n=this.options(t,e);n.keysOnly=!1;let r=this.cursor(n);return this.iterateCursor(r,(s,o,a)=>a.delete())}iterate(t,e){let n;e?n=t:(n={},e=t);let r=this.cursor(n);return this.iterateCursor(r,e)}iterateSerial(t){let e=this.cursor({});return new q((n,r)=>{e.onerror=s=>{let o=mM(s.target.error);r(o)},e.onsuccess=s=>{let o=s.target.result;if(!o){n();return}t(o.primaryKey,o.value).next(a=>{a?o.continue():n()})}})}iterateCursor(t,e){let n=[];return new q((r,s)=>{t.onerror=o=>{s(o.target.error)},t.onsuccess=o=>{let a=o.target.result;if(!a){r();return}let l=new gI(a),c=e(a.primaryKey,a.value,l);if(c instanceof q){let d=c.catch(u=>(l.done(),q.reject(u)));n.push(d)}l.isDone?r():l.skipToKey===null?a.continue():a.continue(l.skipToKey)}}).next(()=>q.waitFor(n))}options(t,e){let n;return t!==void 0&&(typeof t=="string"?n=t:e=t),{index:n,range:e}}cursor(t){let e="next";if(t.reverse&&(e="prev"),t.index){let n=this.store.index(t.index);return t.keysOnly?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}else return this.store.openCursor(t.range,e)}};function od(i){return new q((t,e)=>{i.onsuccess=n=>{let r=n.target.result;t(r)},i.onerror=n=>{let r=mM(n.target.error);e(r)}})}var b5=!1;function mM(i){let t=Dl.getIOSVersion(Xf());if(t>=12.2&&t<13){let e="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(e)>=0){let n=new ie("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${e}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return b5||(b5=!0,setTimeout(()=>{throw n},0)),n}}return i}var tg="IndexBackfiller",coe=15*1e3,doe=60*1e3,uoe=50,bI=class{constructor(t,e){this.asyncQueue=t,this.backfiller=e,this.task=null}start(){this.schedule(coe)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return this.task!==null}schedule(t){oe(tg,`Scheduled in ${t}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",t,()=>N(this,null,function*(){this.task=null;try{let e=yield this.backfiller.backfill();oe(tg,`Documents written: ${e}`)}catch(e){zl(e)?oe(tg,"Ignoring IndexedDB error during index backfill: ",e):yield Vl(e)}yield this.schedule(doe)}))}},vI=class{constructor(t,e){this.localStore=t,this.persistence=e}backfill(){return N(this,arguments,function*(t=uoe){return this.persistence.runTransaction("Backfill Indexes","readwrite-primary",e=>this.writeIndexEntries(e,t))})}writeIndexEntries(t,e){let n=new Set,r=e,s=!0;return q.doWhile(()=>s===!0&&r>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(t).next(o=>{if(o===null||n.has(o))s=!1;else return oe(tg,`Processing collection: ${o}`),this.writeEntriesForCollectionGroup(t,o,r).next(a=>{r-=a,n.add(o)})})).next(()=>e-r)}writeEntriesForCollectionGroup(t,e,n){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(t,e).next(r=>this.localStore.localDocuments.getNextDocuments(t,e,r,n).next(s=>{let o=s.changes;return this.localStore.indexManager.updateIndexEntries(t,o).next(()=>this.getNewOffset(r,s)).next(a=>(oe(tg,`Updating offset: ${a}`),this.localStore.indexManager.updateCollectionGroup(t,e,a))).next(()=>o.size)}))}getNewOffset(t,e){let n=t;return e.changes.forEach((r,s)=>{let o=Tz(s);hM(o,n)>0&&(n=o)}),new as(n.readTime,n.documentKey,Math.max(e.batchId,t.largestBatchId))}};var Or=(()=>{class i{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.setPreviousValue(r),this.writeNewSequenceNumber=r=>n.writeSequenceNumber(r))}setPreviousValue(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){let e=++this.previousValue;return this.writeNewSequenceNumber&&this.writeNewSequenceNumber(e),e}}i.INVALID=-1;return i})(),Oh="",yI="",Mz="",Az="";function $n(i){let t="";for(let e=0;e<i.length;e++)t.length>0&&(t=v5(t)),t=hoe(i.get(e),t);return v5(t)}function hoe(i,t){let e=t,n=i.length;for(let r=0;r<n;r++){let s=i.charAt(r);switch(s){case"\0":e+=Oh+Mz;break;case Oh:e+=Oh+Az;break;default:e+=s}}return e}function v5(i){return i+Oh+yI}function bo(i){let t=i.length;if(Ae(t>=2),t===2)return Ae(i.charAt(0)===Oh&&i.charAt(1)===yI),xt.emptyPath();let e=t-2,n=[],r="";for(let s=0;s<t;){let o=i.indexOf(Oh,s);switch((o<0||o>e)&&Ce(),i.charAt(o+1)){case yI:let l=i.substring(s,o),c;r.length===0?c=l:(r+=l,c=r,r=""),n.push(c);break;case Mz:r+=i.substring(s,o),r+="\0";break;case Az:r+=i.substring(s,o+1);break;default:Ce()}s=o+2}return new xt(n)}var ad="remoteDocuments";var Ag="owner",bh="owner",Og="mutationQueues",moe="userId",Fs="mutations",Oz="batchId",ud="userMutationsIndex",Pz=["userId","batchId"];function foe(i){return[i]}function gy(i,t){return[i,$n(t)]}function Rz(i,t,e){return[i,$n(t),e]}var poe={},Jh="documentMutations",fx="remoteDocumentsV14",goe=["prefixPath","collectionGroup","readTime","documentId"],_y="documentKeyIndex",_oe=["prefixPath","collectionGroup","documentId"],Fz="collectionGroupIndex",boe=["collectionGroup","readTime","prefixPath","documentId"],Pg="remoteDocumentGlobal",xI="remoteDocumentGlobalKey",em="targets",voe="targetId",Nz="queryTargetsIndex",yoe=["canonicalId","targetId"],tm="targetDocuments",xoe=["targetId","path"],fM="documentTargetsIndex",woe=["path","targetId"],Ey="targetGlobalKey",Dd="targetGlobal",lg="collectionParents",Coe=["collectionId","parent"],Fh="clientMetadata",Soe="clientId",px="bundles",koe="bundleId",gx="namedQueries",Eoe="name",pM="indexConfiguration",Toe="indexId",wI="collectionGroupIndex",Ioe="collectionGroup",_x="indexState",Doe=["indexId","uid"],Lz="sequenceNumberIndex",Moe=["uid","sequenceNumber"],bx="indexEntries",Aoe=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],Bz="documentKeyIndex",Ooe=["indexId","uid","orderedDocumentKey"],vx="documentOverlays",Poe=["userId","collectionPath","documentId"],CI="collectionPathOverlayIndex",Roe=["userId","collectionPath","largestBatchId"],Vz="collectionGroupOverlayIndex",Foe=["userId","collectionGroup","largestBatchId"],gM="globals",Noe="name",Loe=[Og,Fs,Jh,ad,em,Ag,Dd,tm],Boe=Loe,Voe=[...Boe,Fh],zoe=[...Voe,Pg],joe=[...zoe,lg],zz=[...joe,px,gx],Uoe=[...zz,vx],jz=[Og,Fs,Jh,fx,em,Ag,Dd,tm,Fh,Pg,lg,px,gx,vx],Uz=jz,_M=[...Uz,pM,_x,bx],Hoe=_M,qoe=[..._M,gM];function Woe(i){if(i===17)return qoe;if(i===16)return Hoe;if(i===15)return _M;if(i===14)return Uz;if(i===13)return jz;if(i===12)return Uoe;if(i===11)return zz;Ce()}var cg=class extends Sy{constructor(t,e){super(),this.simpleDbTransaction=t,this.currentSequenceNumber=e}};function en(i,t){let e=ge(i);return Dl.getStore(e.simpleDbTransaction,t)}function y5(i){let t=0;for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&t++;return t}function Md(i,t){for(let e in i)Object.prototype.hasOwnProperty.call(i,e)&&t(e,i[e])}function Hz(i){for(let t in i)if(Object.prototype.hasOwnProperty.call(i,t))return!1;return!0}var si=class i{constructor(t,e){this.comparator=t,this.root=e||ig.EMPTY}insert(t,e){return new i(this.comparator,this.root.insert(t,e,this.comparator).copy(null,null,ig.BLACK,null,null))}remove(t){return new i(this.comparator,this.root.remove(t,this.comparator).copy(null,null,ig.BLACK,null,null))}get(t){let e=this.root;for(;!e.isEmpty();){let n=this.comparator(t,e.key);if(n===0)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null}indexOf(t){let e=0,n=this.root;for(;!n.isEmpty();){let r=this.comparator(t,n.key);if(r===0)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((e,n)=>(t(e,n),!1))}toString(){let t=[];return this.inorderTraversal((e,n)=>(t.push(`${e}:${n}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Dh(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Dh(this.root,t,this.comparator,!1)}getReverseIterator(){return new Dh(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Dh(this.root,t,this.comparator,!0)}},Dh=class{constructor(t,e,n,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!t.isEmpty();)if(s=e?n(t.key,e):1,e&&r&&(s*=-1),s<0)this.isReverse?t=t.left:t=t.right;else if(s===0){this.nodeStack.push(t);break}else this.nodeStack.push(t),this.isReverse?t=t.right:t=t.left}getNext(){let t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;let t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}},ig=(()=>{class i{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??i.RED,this.left=s??i.EMPTY,this.right=o??i.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,s,o){return new i(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this,o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return i.EMPTY;let e=this;return!e.left.isRed()&&!e.left.left.isRed()&&(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,s=this;if(n(e,s.key)<0)!s.left.isEmpty()&&!s.left.isRed()&&!s.left.left.isRed()&&(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(e,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),!s.right.isEmpty()&&!s.right.isRed()&&!s.right.left.isRed()&&(s=s.moveRedRight()),n(e,s.key)===0){if(s.right.isEmpty())return i.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(e,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){let e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){let e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){let e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ce();let e=this.left.check();if(e!==this.right.check())throw Ce();return e+(this.isRed()?0:1)}}return i.EMPTY=null,i.RED=!0,i.BLACK=!1,i})(),SI=class{constructor(){this.size=0}get key(){throw Ce()}get value(){throw Ce()}get color(){throw Ce()}get left(){throw Ce()}get right(){throw Ce()}copy(t,e,n,r,s){return this}insert(t,e,n){return new ig(t,e)}remove(t,e){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};ig.EMPTY=new SI;var qt=class i{constructor(t){this.comparator=t,this.data=new si(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((e,n)=>(t(e),!1))}forEachInRange(t,e){let n=this.data.getIteratorFrom(t[0]);for(;n.hasNext();){let r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}}forEachWhile(t,e){let n;for(e!==void 0?n=this.data.getIteratorFrom(e):n=this.data.getIterator();n.hasNext();){let r=n.getNext();if(!t(r.key))return}}firstAfterOrEqual(t){let e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null}getIterator(){return new Ty(this.data.getIterator())}getIteratorFrom(t){return new Ty(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let e=this;return e.size<t.size&&(e=t,t=this),t.forEach(n=>{e=e.add(n)}),e}isEqual(t){if(!(t instanceof i)||this.size!==t.size)return!1;let e=this.data.getIterator(),n=t.data.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=n.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){let t=[];return this.forEach(e=>{t.push(e)}),t}toString(){let t=[];return this.forEach(e=>t.push(e)),"SortedSet("+t.toString()+")"}copy(t){let e=new i(this.comparator);return e.data=t,e}},Ty=class{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}};function Goe(i,t,e,n,r){let s=i.getIterator(),o=t.getIterator(),a=vh(s),l=vh(o);for(;a||l;){let c=!1,d=!1;if(a&&l){let u=e(a,l);u<0?d=!0:u>0&&(c=!0)}else a!=null?d=!0:c=!0;c?(n(l),l=vh(o)):d?(r(a),a=vh(s)):(a=vh(s),l=vh(o))}}function vh(i){return i.hasNext()?i.getNext():void 0}var Pr=class i{constructor(t){this.fields=t,t.sort(Vi.comparator)}static empty(){return new i([])}unionWith(t){let e=new qt(Vi.comparator);for(let n of this.fields)e=e.add(n);for(let n of t)e=e.add(n);return new i(e.toArray())}covers(t){for(let e of this.fields)if(e.isPrefixOf(t))return!0;return!1}isEqual(t){return pd(this.fields,t.fields,(e,n)=>e.isEqual(n))}};function $oe(i){return Buffer.from(i,"base64").toString("binary")}function Koe(i){return Buffer.from(i,"binary").toString("base64")}function qz(){return!0}var zi=class i{constructor(t){this.binaryString=t}static fromBase64String(t){let e=$oe(t);return new i(e)}static fromUint8Array(t){let e=Yoe(t);return new i(e)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return Koe(this.binaryString)}toUint8Array(){return Qoe(this.binaryString)}approximateByteSize(){return this.binaryString.length*2}compareTo(t){return Ye(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}};zi.EMPTY_BYTE_STRING=new zi("");function Yoe(i){let t="";for(let e=0;e<i.length;++e)t+=String.fromCharCode(i[e]);return t}function Qoe(i){let t=new Uint8Array(i.length);for(let e=0;e<i.length;e++)t[e]=i.charCodeAt(e);return t}var Xoe=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ua(i){if(Ae(!!i),typeof i=="string"){let t=0,e=Xoe.exec(i);if(Ae(!!e),e[1]){let s=e[1];s=(s+"000000000").substr(0,9),t=Number(s)}let n=new Date(i);return{seconds:Math.floor(n.getTime()/1e3),nanos:t}}else{let t=ui(i.seconds),e=ui(i.nanos);return{seconds:t,nanos:e}}}function ui(i){return typeof i=="number"?i:typeof i=="string"?Number(i):0}function Ml(i){return typeof i=="string"?zi.fromBase64String(i):zi.fromUint8Array(i)}var Wz="server_timestamp",Gz="__type__",$z="__previous_value__",Kz="__local_write_time__";function yx(i){var t,e;return((e=(((t=i?.mapValue)===null||t===void 0?void 0:t.fields)||{})[Gz])===null||e===void 0?void 0:e.stringValue)===Wz}function Zoe(i,t){let e={fields:{[Gz]:{stringValue:Wz},[Kz]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return t&&yx(t)&&(t=bM(t)),t&&(e.fields[$z]=t),{mapValue:e}}function bM(i){let t=i.mapValue.fields[$z];return yx(t)?bM(t):t}function dg(i){let t=ua(i.mapValue.fields[Kz].timestampValue);return new wi(t.seconds,t.nanos)}var kI=class{constructor(t,e,n,r,s,o,a,l,c){this.databaseId=t,this.appId=e,this.persistenceKey=n,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}},EI="(default)",Al=class i{constructor(t,e){this.projectId=t,this.database=e||EI}static empty(){return new i("","")}get isDefaultDatabase(){return this.database===EI}isEqual(t){return t instanceof i&&t.projectId===this.projectId&&t.database===this.database}};function Joe(i,t){if(!Object.prototype.hasOwnProperty.apply(i.options,["projectId"]))throw new ie(K.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Al(i.options.projectId,t)}var Tl=-1;function Rg(i){return i==null}function ug(i){return i===0&&1/i===-1/0}function Yz(i){return typeof i=="number"&&Number.isInteger(i)&&!ug(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}var vM="__type__",Qz="__max__",kl={mapValue:{fields:{__type__:{stringValue:Qz}}}},yM="__vector__",Nh="value",by={nullValue:"NULL_VALUE"};function _d(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?yx(i)?4:Zz(i)?9007199254740991:xx(i)?10:11:Ce()}function Ls(i,t){if(i===t)return!0;let e=_d(i),n=_d(t);if(e!==n)return!1;switch(e){case 0:return!0;case 1:return i.booleanValue===t.booleanValue;case 4:return dg(i).isEqual(dg(t));case 3:return eae(i,t);case 5:return i.stringValue===t.stringValue;case 6:return iae(i,t);case 7:return i.referenceValue===t.referenceValue;case 8:return tae(i,t);case 2:return nae(i,t);case 9:return pd(i.arrayValue.values||[],t.arrayValue.values||[],Ls);case 10:case 11:return rae(i,t);case 9007199254740991:return!0;default:return Ce()}}function eae(i,t){if(typeof i.timestampValue=="string"&&typeof t.timestampValue=="string"&&i.timestampValue.length===t.timestampValue.length)return i.timestampValue===t.timestampValue;let e=ua(i.timestampValue),n=ua(t.timestampValue);return e.seconds===n.seconds&&e.nanos===n.nanos}function tae(i,t){return ui(i.geoPointValue.latitude)===ui(t.geoPointValue.latitude)&&ui(i.geoPointValue.longitude)===ui(t.geoPointValue.longitude)}function iae(i,t){return Ml(i.bytesValue).isEqual(Ml(t.bytesValue))}function nae(i,t){if("integerValue"in i&&"integerValue"in t)return ui(i.integerValue)===ui(t.integerValue);if("doubleValue"in i&&"doubleValue"in t){let e=ui(i.doubleValue),n=ui(t.doubleValue);return e===n?ug(e)===ug(n):isNaN(e)&&isNaN(n)}return!1}function rae(i,t){let e=i.mapValue.fields||{},n=t.mapValue.fields||{};if(y5(e)!==y5(n))return!1;for(let r in e)if(e.hasOwnProperty(r)&&(n[r]===void 0||!Ls(e[r],n[r])))return!1;return!0}function hg(i,t){return(i.values||[]).find(e=>Ls(e,t))!==void 0}function Ol(i,t){if(i===t)return 0;let e=_d(i),n=_d(t);if(e!==n)return Ye(e,n);switch(e){case 0:case 9007199254740991:return 0;case 1:return Ye(i.booleanValue,t.booleanValue);case 2:return sae(i,t);case 3:return x5(i.timestampValue,t.timestampValue);case 4:return x5(dg(i),dg(t));case 5:return Ye(i.stringValue,t.stringValue);case 6:return lae(i.bytesValue,t.bytesValue);case 7:return oae(i.referenceValue,t.referenceValue);case 8:return aae(i.geoPointValue,t.geoPointValue);case 9:return Xz(i.arrayValue,t.arrayValue);case 10:return cae(i.mapValue,t.mapValue);case 11:return dae(i.mapValue,t.mapValue);default:throw Ce()}}function sae(i,t){let e=ui(i.integerValue||i.doubleValue),n=ui(t.integerValue||t.doubleValue);return e<n?-1:e>n?1:e===n?0:isNaN(e)?isNaN(n)?0:-1:1}function x5(i,t){if(typeof i=="string"&&typeof t=="string"&&i.length===t.length)return Ye(i,t);let e=ua(i),n=ua(t),r=Ye(e.seconds,n.seconds);return r!==0?r:Ye(e.nanos,n.nanos)}function oae(i,t){let e=i.split("/"),n=t.split("/");for(let r=0;r<e.length&&r<n.length;r++){let s=Ye(e[r],n[r]);if(s!==0)return s}return Ye(e.length,n.length)}function aae(i,t){let e=Ye(ui(i.latitude),ui(t.latitude));return e!==0?e:Ye(ui(i.longitude),ui(t.longitude))}function lae(i,t){let e=Ml(i),n=Ml(t);return e.compareTo(n)}function Xz(i,t){let e=i.values||[],n=t.values||[];for(let r=0;r<e.length&&r<n.length;++r){let s=Ol(e[r],n[r]);if(s)return s}return Ye(e.length,n.length)}function cae(i,t){var e,n,r,s;let o=i.fields||{},a=t.fields||{},l=(e=o[Nh])===null||e===void 0?void 0:e.arrayValue,c=(n=a[Nh])===null||n===void 0?void 0:n.arrayValue,d=Ye(((r=l?.values)===null||r===void 0?void 0:r.length)||0,((s=c?.values)===null||s===void 0?void 0:s.length)||0);return d!==0?d:Xz(l,c)}function dae(i,t){if(i===kl.mapValue&&t===kl.mapValue)return 0;if(i===kl.mapValue)return 1;if(t===kl.mapValue)return-1;let e=i.fields||{},n=Object.keys(e),r=t.fields||{},s=Object.keys(r);n.sort(),s.sort();for(let o=0;o<n.length&&o<s.length;++o){let a=Ye(n[o],s[o]);if(a!==0)return a;let l=Ol(e[n[o]],r[s[o]]);if(l!==0)return l}return Ye(n.length,s.length)}function Lh(i){return xM(i)}function xM(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?hae(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?uae(i.bytesValue):"referenceValue"in i?fae(i.referenceValue):"geoPointValue"in i?mae(i.geoPointValue):"arrayValue"in i?gae(i.arrayValue):"mapValue"in i?pae(i.mapValue):Ce()}function uae(i){return Ml(i).toBase64()}function hae(i){let t=ua(i);return`time(${t.seconds},${t.nanos})`}function mae(i){return`geo(${i.latitude},${i.longitude})`}function fae(i){return pe.fromName(i).toString()}function pae(i){let t=Object.keys(i.fields||{}).sort(),e="{",n=!0;for(let r of t)n?n=!1:e+=",",e+=`${r}:${xM(i.fields[r])}`;return e+"}"}function gae(i){let t="[",e=!0;for(let n of i.values||[])e?e=!1:t+=",",t+=xM(n);return t+"]"}function bd(i,t){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${t.path.canonicalString()}`}}function TI(i){return!!i&&"integerValue"in i}function _ae(i){return!!i&&"doubleValue"in i}function bae(i){return TI(i)||_ae(i)}function mg(i){return!!i&&"arrayValue"in i}function w5(i){return!!i&&"nullValue"in i}function C5(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function vy(i){return!!i&&"mapValue"in i}function xx(i){var t,e;return((e=(((t=i?.mapValue)===null||t===void 0?void 0:t.fields)||{})[vM])===null||e===void 0?void 0:e.stringValue)===yM}function ng(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&typeof i.timestampValue=="object")return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){let t={mapValue:{fields:{}}};return Md(i.mapValue.fields,(e,n)=>t.mapValue.fields[e]=ng(n)),t}else if(i.arrayValue){let t={arrayValue:{values:[]}};for(let e=0;e<(i.arrayValue.values||[]).length;++e)t.arrayValue.values[e]=ng(i.arrayValue.values[e]);return t}else return Object.assign({},i)}function Zz(i){return(((i.mapValue||{}).fields||{}).__type__||{}).stringValue===Qz}var Jz={mapValue:{fields:{[vM]:{stringValue:yM},[Nh]:{arrayValue:{}}}}};function vae(i){return"nullValue"in i?by:"booleanValue"in i?{booleanValue:!1}:"integerValue"in i||"doubleValue"in i?{doubleValue:NaN}:"timestampValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in i?{stringValue:""}:"bytesValue"in i?{bytesValue:""}:"referenceValue"in i?bd(Al.empty(),pe.empty()):"geoPointValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in i?{arrayValue:{}}:"mapValue"in i?xx(i)?Jz:{mapValue:{}}:Ce()}function yae(i){return"nullValue"in i?{booleanValue:!1}:"booleanValue"in i?{doubleValue:NaN}:"integerValue"in i||"doubleValue"in i?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in i?{stringValue:""}:"stringValue"in i?{bytesValue:""}:"bytesValue"in i?bd(Al.empty(),pe.empty()):"referenceValue"in i?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in i?{arrayValue:{}}:"arrayValue"in i?Jz:"mapValue"in i?xx(i)?{mapValue:{}}:kl:Ce()}function S5(i,t){let e=Ol(i.value,t.value);return e!==0?e:i.inclusive&&!t.inclusive?-1:!i.inclusive&&t.inclusive?1:0}function k5(i,t){let e=Ol(i.value,t.value);return e!==0?e:i.inclusive&&!t.inclusive?1:!i.inclusive&&t.inclusive?-1:0}var Nn=class i{constructor(t){this.value=t}static empty(){return new i({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let e=this.value;for(let n=0;n<t.length-1;++n)if(e=(e.mapValue.fields||{})[t.get(n)],!vy(e))return null;return e=(e.mapValue.fields||{})[t.lastSegment()],e||null}}set(t,e){let n=this.getFieldsMap(t.popLast());n[t.lastSegment()]=ng(e)}setAll(t){let e=Vi.emptyPath(),n={},r=[];t.forEach((o,a)=>{if(!e.isImmediateParentOf(a)){let l=this.getFieldsMap(e);this.applyChanges(l,n,r),n={},r=[],e=a.popLast()}o?n[a.lastSegment()]=ng(o):r.push(a.lastSegment())});let s=this.getFieldsMap(e);this.applyChanges(s,n,r)}delete(t){let e=this.field(t.popLast());vy(e)&&e.mapValue.fields&&delete e.mapValue.fields[t.lastSegment()]}isEqual(t){return Ls(this.value,t.value)}getFieldsMap(t){let e=this.value;e.mapValue.fields||(e.mapValue={fields:{}});for(let n=0;n<t.length;++n){let r=e.mapValue.fields[t.get(n)];(!vy(r)||!r.mapValue.fields)&&(r={mapValue:{fields:{}}},e.mapValue.fields[t.get(n)]=r),e=r}return e.mapValue.fields}applyChanges(t,e,n){Md(e,(r,s)=>t[r]=s);for(let r of n)delete t[r]}clone(){return new i(ng(this.value))}};function ej(i){let t=[];return Md(i.fields,(e,n)=>{let r=new Vi([e]);if(vy(n)){let o=ej(n.mapValue).fields;if(o.length===0)t.push(r);else for(let a of o)t.push(r.child(a))}else t.push(r)}),new Pr(t)}var $i=class i{constructor(t,e,n,r,s,o,a){this.key=t,this.documentType=e,this.version=n,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(t){return new i(t,0,Ne.min(),Ne.min(),Ne.min(),Nn.empty(),0)}static newFoundDocument(t,e,n,r){return new i(t,1,e,Ne.min(),n,r,0)}static newNoDocument(t,e){return new i(t,2,e,Ne.min(),Ne.min(),Nn.empty(),0)}static newUnknownDocument(t,e){return new i(t,3,e,Ne.min(),Ne.min(),Nn.empty(),2)}convertToFoundDocument(t,e){return this.createTime.isEqual(Ne.min())&&(this.documentType===2||this.documentType===0)&&(this.createTime=t),this.version=t,this.documentType=1,this.data=e,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Nn.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Ne.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof i&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new i(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}};function xae(i,t,e){let n=t.data.field(i),r=e.data.field(i);return n!==null&&r!==null?Ol(n,r):Ce()}var wo=class{constructor(t,e){this.position=t,this.inclusive=e}};function tj(i,t,e){let n=0;for(let r=0;r<i.position.length;r++){let s=t[r],o=i.position[r];if(s.field.isKeyField())n=pe.comparator(pe.fromName(o.referenceValue),e.key);else{let a=e.data.field(s.field);n=Ol(o,a)}if(s.dir==="desc"&&(n=n*-1),n!==0)break}return n}function wae(i,t,e){let n=tj(i,t,e);return i.inclusive?n>=0:n>0}function Cae(i,t,e){let n=tj(i,t,e);return i.inclusive?n<=0:n<0}function E5(i,t){if(i===null)return t===null;if(t===null||i.inclusive!==t.inclusive||i.position.length!==t.position.length)return!1;for(let e=0;e<i.position.length;e++){let n=i.position[e],r=t.position[e];if(!Ls(n,r))return!1}return!0}var vd=class{constructor(t,e="asc"){this.field=t,this.dir=e}};function Sae(i){return i.field.canonicalString()+i.dir}function kae(i){return`${i.field.canonicalString()} (${i.dir})`}function Eae(i,t){return i.dir===t.dir&&i.field.isEqual(t.field)}var Iy=class{},_t=class i extends Iy{constructor(t,e,n){super(),this.field=t,this.op=e,this.value=n}static create(t,e,n){return t.isKeyField()?e==="in"||e==="not-in"?this.createKeyFieldInFilter(t,e,n):new MI(t,e,n):e==="array-contains"?new PI(t,n):e==="in"?new Dy(t,n):e==="not-in"?new RI(t,n):e==="array-contains-any"?new FI(t,n):new i(t,e,n)}static createKeyFieldInFilter(t,e,n){return e==="in"?new AI(t,n):new OI(t,n)}matches(t){let e=t.data.field(this.field);return this.op==="!="?e!==null&&this.matchesComparison(Ol(e,this.value)):e!==null&&_d(this.value)===_d(e)&&this.matchesComparison(Ol(e,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return Ce()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}},zt=class i extends Iy{constructor(t,e){super(),this.filters=t,this.op=e,this.memoizedFlattenedFilters=null}static create(t,e){return new i(t,e)}matches(t){return Bh(this)?this.filters.find(e=>!e.matches(t))===void 0:this.filters.find(e=>e.matches(t))!==void 0}getFlattenedFilters(){return this.memoizedFlattenedFilters!==null?this.memoizedFlattenedFilters:(this.memoizedFlattenedFilters=this.filters.reduce((t,e)=>t.concat(e.getFlattenedFilters()),[]),this.memoizedFlattenedFilters)}getFilters(){return Object.assign([],this.filters)}};function Bh(i){return i.op==="and"}function II(i){return i.op==="or"}function wM(i){return ij(i)&&Bh(i)}function ij(i){for(let t of i.filters)if(t instanceof zt)return!1;return!0}function DI(i){if(i instanceof _t)return i.field.canonicalString()+i.op.toString()+Lh(i.value);if(wM(i))return i.filters.map(t=>DI(t)).join(",");{let t=i.filters.map(e=>DI(e)).join(",");return`${i.op}(${t})`}}function nj(i,t){if(i instanceof _t)return Tae(i,t);if(i instanceof zt)return Iae(i,t);Ce()}function Tae(i,t){return t instanceof _t&&i.op===t.op&&i.field.isEqual(t.field)&&Ls(i.value,t.value)}function Iae(i,t){return t instanceof zt&&i.op===t.op&&i.filters.length===t.filters.length?i.filters.reduce((n,r,s)=>n&&nj(r,t.filters[s]),!0):!1}function rj(i,t){let e=i.filters.concat(t);return zt.create(e,i.op)}function sj(i){return i instanceof _t?Mae(i):i instanceof zt?Dae(i):"Filter"}function Dae(i){return i.op.toString()+" {"+i.getFilters().map(sj).join(" ,")+"}"}function Mae(i){return`${i.field.canonicalString()} ${i.op} ${Lh(i.value)}`}var MI=class extends _t{constructor(t,e,n){super(t,e,n),this.key=pe.fromName(n.referenceValue)}matches(t){let e=pe.comparator(t.key,this.key);return this.matchesComparison(e)}},AI=class extends _t{constructor(t,e){super(t,"in",e),this.keys=oj("in",e)}matches(t){return this.keys.some(e=>e.isEqual(t.key))}},OI=class extends _t{constructor(t,e){super(t,"not-in",e),this.keys=oj("not-in",e)}matches(t){return!this.keys.some(e=>e.isEqual(t.key))}};function oj(i,t){var e;return(((e=t.arrayValue)===null||e===void 0?void 0:e.values)||[]).map(n=>pe.fromName(n.referenceValue))}var PI=class extends _t{constructor(t,e){super(t,"array-contains",e)}matches(t){let e=t.data.field(this.field);return mg(e)&&hg(e.arrayValue,this.value)}},Dy=class extends _t{constructor(t,e){super(t,"in",e)}matches(t){let e=t.data.field(this.field);return e!==null&&hg(this.value.arrayValue,e)}},RI=class extends _t{constructor(t,e){super(t,"not-in",e)}matches(t){if(hg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;let e=t.data.field(this.field);return e!==null&&!hg(this.value.arrayValue,e)}},FI=class extends _t{constructor(t,e){super(t,"array-contains-any",e)}matches(t){let e=t.data.field(this.field);return!mg(e)||!e.arrayValue.values?!1:e.arrayValue.values.some(n=>hg(this.value.arrayValue,n))}};var NI=class{constructor(t,e=null,n=[],r=[],s=null,o=null,a=null){this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.memoizedCanonicalId=null}};function LI(i,t=null,e=[],n=[],r=null,s=null,o=null){return new NI(i,t,e,n,r,s,o)}function yd(i){let t=ge(i);if(t.memoizedCanonicalId===null){let e=t.path.canonicalString();t.collectionGroup!==null&&(e+="|cg:"+t.collectionGroup),e+="|f:",e+=t.filters.map(n=>DI(n)).join(","),e+="|ob:",e+=t.orderBy.map(n=>Sae(n)).join(","),Rg(t.limit)||(e+="|l:",e+=t.limit),t.startAt&&(e+="|lb:",e+=t.startAt.inclusive?"b:":"a:",e+=t.startAt.position.map(n=>Lh(n)).join(",")),t.endAt&&(e+="|ub:",e+=t.endAt.inclusive?"a:":"b:",e+=t.endAt.position.map(n=>Lh(n)).join(",")),t.memoizedCanonicalId=e}return t.memoizedCanonicalId}function Aae(i){let t=i.path.canonicalString();return i.collectionGroup!==null&&(t+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(t+=`, filters: [${i.filters.map(e=>sj(e)).join(", ")}]`),Rg(i.limit)||(t+=", limit: "+i.limit),i.orderBy.length>0&&(t+=`, orderBy: [${i.orderBy.map(e=>kae(e)).join(", ")}]`),i.startAt&&(t+=", startAt: ",t+=i.startAt.inclusive?"b:":"a:",t+=i.startAt.position.map(e=>Lh(e)).join(",")),i.endAt&&(t+=", endAt: ",t+=i.endAt.inclusive?"a:":"b:",t+=i.endAt.position.map(e=>Lh(e)).join(",")),`Target(${t})`}function Fg(i,t){if(i.limit!==t.limit||i.orderBy.length!==t.orderBy.length)return!1;for(let e=0;e<i.orderBy.length;e++)if(!Eae(i.orderBy[e],t.orderBy[e]))return!1;if(i.filters.length!==t.filters.length)return!1;for(let e=0;e<i.filters.length;e++)if(!nj(i.filters[e],t.filters[e]))return!1;return i.collectionGroup!==t.collectionGroup||!i.path.isEqual(t.path)||!E5(i.startAt,t.startAt)?!1:E5(i.endAt,t.endAt)}function My(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function wx(i,t){return i.filters.filter(e=>e instanceof _t&&e.field.isEqual(t))}function Oae(i,t){let e=uM(t);if(e===void 0)return null;for(let n of wx(i,e.fieldPath))switch(n.op){case"array-contains-any":return n.value.arrayValue.values||[];case"array-contains":return[n.value]}return null}function Pae(i,t){let e=new Map;for(let n of gd(t))for(let r of wx(i,n.fieldPath))switch(r.op){case"==":case"in":e.set(n.fieldPath.canonicalString(),r.value);break;case"not-in":case"!=":return e.set(n.fieldPath.canonicalString(),r.value),Array.from(e.values())}return null}function Rae(i,t){let e=[],n=!0;for(let r of gd(t)){let s=r.kind===0?aj(i,r.fieldPath,i.startAt):lj(i,r.fieldPath,i.startAt);e.push(s.value),n&&(n=s.inclusive)}return new wo(e,n)}function Fae(i,t){let e=[],n=!0;for(let r of gd(t)){let s=r.kind===0?lj(i,r.fieldPath,i.endAt):aj(i,r.fieldPath,i.endAt);e.push(s.value),n&&(n=s.inclusive)}return new wo(e,n)}function aj(i,t,e){let n=by,r=!0;for(let s of wx(i,t)){let o=by,a=!0;switch(s.op){case"<":case"<=":o=vae(s.value);break;case"==":case"in":case">=":o=s.value;break;case">":o=s.value,a=!1;break;case"!=":case"not-in":o=by;break}S5({value:n,inclusive:r},{value:o,inclusive:a})<0&&(n=o,r=a)}if(e!==null){for(let s=0;s<i.orderBy.length;++s)if(i.orderBy[s].field.isEqual(t)){let a=e.position[s];S5({value:n,inclusive:r},{value:a,inclusive:e.inclusive})<0&&(n=a,r=e.inclusive);break}}return{value:n,inclusive:r}}function lj(i,t,e){let n=kl,r=!0;for(let s of wx(i,t)){let o=kl,a=!0;switch(s.op){case">=":case">":o=yae(s.value),a=!1;break;case"==":case"in":case"<=":o=s.value;break;case"<":o=s.value,a=!1;break;case"!=":case"not-in":o=kl;break}k5({value:n,inclusive:r},{value:o,inclusive:a})>0&&(n=o,r=a)}if(e!==null){for(let s=0;s<i.orderBy.length;++s)if(i.orderBy[s].field.isEqual(t)){let a=e.position[s];k5({value:n,inclusive:r},{value:a,inclusive:e.inclusive})>0&&(n=a,r=e.inclusive);break}}return{value:n,inclusive:r}}function Nae(i){let t=new qt(Vi.comparator),e=!1;for(let n of i.filters)for(let r of n.getFlattenedFilters())r.field.isKeyField()||(r.op==="array-contains"||r.op==="array-contains-any"?e=!0:t=t.add(r.field));for(let n of i.orderBy)n.field.isKeyField()||(t=t.add(n.field));return t.size+(e?1:0)}function Lae(i){return i.limit!==null}var Bs=class{constructor(t,e=null,n=[],r=[],s=null,o="F",a=null,l=null){this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.memoizedNormalizedOrderBy=null,this.memoizedTarget=null,this.memoizedAggregateTarget=null,this.startAt,this.endAt}};function cj(i,t,e,n,r,s,o,a){return new Bs(i,t,e,n,r,s,o,a)}function im(i){return new Bs(i)}function Bae(i,t){return new Bs(t,null,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function T5(i){return i.filters.length===0&&i.limit===null&&i.startAt==null&&i.endAt==null&&(i.explicitOrderBy.length===0||i.explicitOrderBy.length===1&&i.explicitOrderBy[0].field.isKeyField())}function Vae(i){let t=new qt(Vi.comparator);return i.filters.forEach(e=>{e.getFlattenedFilters().forEach(r=>{r.isInequality()&&(t=t.add(r.field))})}),t}function zae(i){return new Bs(xt.emptyPath(),i)}function jae(i){return pe.isDocumentKey(i.path)&&i.collectionGroup===null&&i.filters.length===0}function CM(i){return i.collectionGroup!==null}function Vh(i){let t=ge(i);if(t.memoizedNormalizedOrderBy===null){t.memoizedNormalizedOrderBy=[];let e=new Set;for(let s of t.explicitOrderBy)t.memoizedNormalizedOrderBy.push(s),e.add(s.field.canonicalString());let n=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";Vae(t).forEach(s=>{!e.has(s.canonicalString())&&!s.isKeyField()&&t.memoizedNormalizedOrderBy.push(new vd(s,n))}),e.has(Vi.keyField().canonicalString())||t.memoizedNormalizedOrderBy.push(new vd(Vi.keyField(),n))}return t.memoizedNormalizedOrderBy}function Kn(i){let t=ge(i);return t.memoizedTarget||(t.memoizedTarget=Uae(t,Vh(i))),t.memoizedTarget}function Uae(i,t){if(i.limitType==="F")return LI(i.path,i.collectionGroup,t,i.filters,i.limit,i.startAt,i.endAt);{t=t.map(r=>{let s=r.dir==="desc"?"asc":"desc";return new vd(r.field,s)});let e=i.endAt?new wo(i.endAt.position,i.endAt.inclusive):null,n=i.startAt?new wo(i.startAt.position,i.startAt.inclusive):null;return LI(i.path,i.collectionGroup,t,i.filters,i.limit,e,n)}}function SM(i,t){let e=i.filters.concat([t]);return new Bs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),e,i.limit,i.limitType,i.startAt,i.endAt)}function Hae(i,t){let e=i.explicitOrderBy.concat([t]);return new Bs(i.path,i.collectionGroup,e,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}function Ay(i,t,e){return new Bs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),t,e,i.startAt,i.endAt)}function qae(i,t){return new Bs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,t,i.endAt)}function Wae(i,t){return new Bs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,i.startAt,t)}function Ng(i,t){return Fg(Kn(i),Kn(t))&&i.limitType===t.limitType}function dj(i){return`${yd(Kn(i))}|lt:${i.limitType}`}function Eh(i){return`Query(target=${Aae(Kn(i))}; limitType=${i.limitType})`}function Lg(i,t){return t.isFoundDocument()&&Gae(i,t)&&$ae(i,t)&&Kae(i,t)&&Yae(i,t)}function Gae(i,t){let e=t.key.path;return i.collectionGroup!==null?t.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(e):pe.isDocumentKey(i.path)?i.path.isEqual(e):i.path.isImmediateParentOf(e)}function $ae(i,t){for(let e of Vh(i))if(!e.field.isKeyField()&&t.data.field(e.field)===null)return!1;return!0}function Kae(i,t){for(let e of i.filters)if(!e.matches(t))return!1;return!0}function Yae(i,t){return!(i.startAt&&!Cae(i.startAt,Vh(i),t)||i.endAt&&!wae(i.endAt,Vh(i),t))}function uj(i){return i.collectionGroup||(i.path.length%2===1?i.path.lastSegment():i.path.get(i.path.length-2))}function hj(i){return(t,e)=>{let n=!1;for(let r of Vh(i)){let s=Qae(r,t,e);if(s!==0)return s;n=n||r.field.isKeyField()}return 0}}function Qae(i,t,e){let n=i.field.isKeyField()?pe.comparator(t.key,e.key):xae(i.field,t,e);switch(i.dir){case"asc":return n;case"desc":return-1*n;default:return Ce()}}var Co=class{constructor(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={},this.innerSize=0}get(t){let e=this.mapKeyFn(t),n=this.inner[e];if(n!==void 0){for(let[r,s]of n)if(this.equalsFn(r,t))return s}}has(t){return this.get(t)!==void 0}set(t,e){let n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0){this.inner[n]=[[t,e]],this.innerSize++;return}for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t)){r[s]=[t,e];return}r.push([t,e]),this.innerSize++}delete(t){let e=this.mapKeyFn(t),n=this.inner[e];if(n===void 0)return!1;for(let r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return n.length===1?delete this.inner[e]:n.splice(r,1),this.innerSize--,!0;return!1}forEach(t){Md(this.inner,(e,n)=>{for(let[r,s]of n)t(r,s)})}isEmpty(){return Hz(this.inner)}size(){return this.innerSize}};var Xae=new si(pe.comparator);function hr(){return Xae}var mj=new si(pe.comparator);function Jp(...i){let t=mj;for(let e of i)t=t.insert(e.key,e);return t}function Zae(){return fg()}function fj(i){let t=mj;return i.forEach((e,n)=>t=t.insert(e,n.overlayedDocument)),t}function vo(){return fg()}function pj(){return fg()}function fg(){return new Co(i=>i.toString(),(i,t)=>i.isEqual(t))}var Jae=new si(pe.comparator);function ele(){return Jae}var tle=new qt(pe.comparator);function Je(...i){let t=tle;for(let e of i)t=t.add(e);return t}var ile=new qt(Ye);function kM(){return ile}function EM(i,t){if(i.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:ug(t)?"-0":t}}function gj(i){return{integerValue:""+i}}function _j(i,t){return Yz(t)?gj(t):EM(i,t)}var zh=class{constructor(){this._=void 0}};function nle(i,t,e){return i instanceof Pl?Zoe(e,t):i instanceof ha?vj(i,t):i instanceof ma?yj(i,t):ole(i,t)}function rle(i,t,e){return i instanceof ha?vj(i,t):i instanceof ma?yj(i,t):e}function bj(i,t){return i instanceof Rl?bae(t)?t:{integerValue:0}:null}function sle(i,t){return i instanceof ha&&t instanceof ha||i instanceof ma&&t instanceof ma?pd(i.elements,t.elements,Ls):i instanceof Rl&&t instanceof Rl?Ls(i.operand,t.operand):i instanceof Pl&&t instanceof Pl}var Pl=class extends zh{},ha=class extends zh{constructor(t){super(),this.elements=t}};function vj(i,t){let e=xj(t);for(let n of i.elements)e.some(r=>Ls(r,n))||e.push(n);return{arrayValue:{values:e}}}var ma=class extends zh{constructor(t){super(),this.elements=t}};function yj(i,t){let e=xj(t);for(let n of i.elements)e=e.filter(r=>!Ls(r,n));return{arrayValue:{values:e}}}var Rl=class extends zh{constructor(t,e){super(),this.serializer=t,this.operand=e}};function ole(i,t){let e=bj(i,t),n=I5(e)+I5(i.operand);return TI(e)&&TI(i.operand)?gj(n):EM(i.serializer,n)}function I5(i){return ui(i.integerValue||i.doubleValue)}function xj(i){return mg(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}var xd=class{constructor(t,e){this.field=t,this.transform=e}};function ale(i,t){return i.field.isEqual(t.field)&&sle(i.transform,t.transform)}function lle(i,t){return i===void 0&&t===void 0?!0:i&&t?pd(i,t,(e,n)=>ale(e,n)):!1}var BI=class{constructor(t,e){this.version=t,this.transformResults=e}},Ii=class i{constructor(t,e){this.updateTime=t,this.exists=e}static none(){return new i}static exists(t){return new i(void 0,t)}static updateTime(t){return new i(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}};function Cx(i,t){return i.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(i.updateTime):i.exists!==void 0?i.exists===t.isFoundDocument():!0}var jh=class{};function wj(i,t){if(!i.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return i.isNoDocument()?new Nl(i.key,Ii.none()):new Fl(i.key,i.data,Ii.none());{let e=i.data,n=Nn.empty(),r=new qt(Vi.comparator);for(let s of t.fields)if(!r.has(s)){let o=e.field(s);o===null&&s.length>1&&(s=s.popLast(),o=e.field(s)),o===null?n.delete(s):n.set(s,o),r=r.add(s)}return new Vs(i.key,n,new Pr(r.toArray()),Ii.none())}}function cle(i,t,e){i instanceof Fl?ule(i,t,e):i instanceof Vs?mle(i,t,e):ple(i,t,e)}function rg(i,t,e,n){return i instanceof Fl?hle(i,t,e,n):i instanceof Vs?fle(i,t,e,n):gle(i,t,e)}function dle(i,t){let e=null;for(let n of i.fieldTransforms){let r=t.data.field(n.field),s=bj(n.transform,r||null);s!=null&&(e===null&&(e=Nn.empty()),e.set(n.field,s))}return e||null}function D5(i,t){return i.type!==t.type||!i.key.isEqual(t.key)||!i.precondition.isEqual(t.precondition)||!lle(i.fieldTransforms,t.fieldTransforms)?!1:i.type===0?i.value.isEqual(t.value):i.type===1?i.data.isEqual(t.data)&&i.fieldMask.isEqual(t.fieldMask):!0}var Fl=class extends jh{constructor(t,e,n,r=[]){super(),this.key=t,this.value=e,this.precondition=n,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}};function ule(i,t,e){let n=i.value.clone(),r=Sj(i.fieldTransforms,t,e.transformResults);n.setAll(r),t.convertToFoundDocument(e.version,n).setHasCommittedMutations()}function hle(i,t,e,n){if(!Cx(i.precondition,t))return e;let r=i.value.clone(),s=kj(i.fieldTransforms,n,t);return r.setAll(s),t.convertToFoundDocument(t.version,r).setHasLocalMutations(),null}var Vs=class extends jh{constructor(t,e,n,r,s=[]){super(),this.key=t,this.data=e,this.fieldMask=n,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}};function mle(i,t,e){if(!Cx(i.precondition,t)){t.convertToUnknownDocument(e.version);return}let n=Sj(i.fieldTransforms,t,e.transformResults),r=t.data;r.setAll(Cj(i)),r.setAll(n),t.convertToFoundDocument(e.version,r).setHasCommittedMutations()}function fle(i,t,e,n){if(!Cx(i.precondition,t))return e;let r=kj(i.fieldTransforms,n,t),s=t.data;return s.setAll(Cj(i)),s.setAll(r),t.convertToFoundDocument(t.version,s).setHasLocalMutations(),e===null?null:e.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(o=>o.field))}function Cj(i){let t=new Map;return i.fieldMask.fields.forEach(e=>{if(!e.isEmpty()){let n=i.data.field(e);t.set(e,n)}}),t}function Sj(i,t,e){let n=new Map;Ae(i.length===e.length);for(let r=0;r<e.length;r++){let s=i[r],o=s.transform,a=t.data.field(s.field);n.set(s.field,rle(o,a,e[r]))}return n}function kj(i,t,e){let n=new Map;for(let r of i){let s=r.transform,o=e.data.field(r.field);n.set(r.field,nle(s,o,t))}return n}var Nl=class extends jh{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}};function ple(i,t,e){t.convertToNoDocument(e.version).setHasCommittedMutations()}function gle(i,t,e){return Cx(i.precondition,t)?(t.convertToNoDocument(t.version).setHasLocalMutations(),null):e}var pg=class extends jh{constructor(t,e){super(),this.key=t,this.precondition=e,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}};var gg=class{constructor(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}applyToRemoteDocument(t,e){let n=e.mutationResults;for(let r=0;r<this.mutations.length;r++){let s=this.mutations[r];if(s.key.isEqual(t.key)){let o=n[r];cle(s,t,o)}}}applyToLocalView(t,e){for(let n of this.baseMutations)n.key.isEqual(t.key)&&(e=rg(n,t,e,this.localWriteTime));for(let n of this.mutations)n.key.isEqual(t.key)&&(e=rg(n,t,e,this.localWriteTime));return e}applyToLocalDocumentSet(t,e){let n=pj();return this.mutations.forEach(r=>{let s=t.get(r.key),o=s.overlayedDocument,a=this.applyToLocalView(o,s.mutatedFields);a=e.has(r.key)?null:a;let l=wj(o,a);l!==null&&n.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Ne.min())}),n}keys(){return this.mutations.reduce((t,e)=>t.add(e.key),Je())}isEqual(t){return this.batchId===t.batchId&&pd(this.mutations,t.mutations,(e,n)=>D5(e,n))&&pd(this.baseMutations,t.baseMutations,(e,n)=>D5(e,n))}},VI=class i{constructor(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}static from(t,e,n){Ae(t.mutations.length===n.length);let r=ele(),s=t.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,n[o].version);return new i(t,e,n,r)}};var _g=class{constructor(t,e){this.largestBatchId=t,this.mutation=e}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}};var zI=class{constructor(t,e){this.count=t,this.unchangedNames=e}};var mn=function(i){return i[i.OK=0]="OK",i[i.CANCELLED=1]="CANCELLED",i[i.UNKNOWN=2]="UNKNOWN",i[i.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",i[i.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",i[i.NOT_FOUND=5]="NOT_FOUND",i[i.ALREADY_EXISTS=6]="ALREADY_EXISTS",i[i.PERMISSION_DENIED=7]="PERMISSION_DENIED",i[i.UNAUTHENTICATED=16]="UNAUTHENTICATED",i[i.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",i[i.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",i[i.ABORTED=10]="ABORTED",i[i.OUT_OF_RANGE=11]="OUT_OF_RANGE",i[i.UNIMPLEMENTED=12]="UNIMPLEMENTED",i[i.INTERNAL=13]="INTERNAL",i[i.UNAVAILABLE=14]="UNAVAILABLE",i[i.DATA_LOSS=15]="DATA_LOSS",i}(mn||{});function Ej(i){switch(i){case K.OK:return Ce();case K.CANCELLED:case K.UNKNOWN:case K.DEADLINE_EXCEEDED:case K.RESOURCE_EXHAUSTED:case K.INTERNAL:case K.UNAVAILABLE:case K.UNAUTHENTICATED:return!1;case K.INVALID_ARGUMENT:case K.NOT_FOUND:case K.ALREADY_EXISTS:case K.PERMISSION_DENIED:case K.FAILED_PRECONDITION:case K.ABORTED:case K.OUT_OF_RANGE:case K.UNIMPLEMENTED:case K.DATA_LOSS:return!0;default:return Ce()}}function _le(i){return Ej(i)&&i!==K.ABORTED}function yy(i){if(i===void 0)return xi("GRPC error has no .code"),K.UNKNOWN;switch(i){case mn.OK:return K.OK;case mn.CANCELLED:return K.CANCELLED;case mn.UNKNOWN:return K.UNKNOWN;case mn.DEADLINE_EXCEEDED:return K.DEADLINE_EXCEEDED;case mn.RESOURCE_EXHAUSTED:return K.RESOURCE_EXHAUSTED;case mn.INTERNAL:return K.INTERNAL;case mn.UNAVAILABLE:return K.UNAVAILABLE;case mn.UNAUTHENTICATED:return K.UNAUTHENTICATED;case mn.INVALID_ARGUMENT:return K.INVALID_ARGUMENT;case mn.NOT_FOUND:return K.NOT_FOUND;case mn.ALREADY_EXISTS:return K.ALREADY_EXISTS;case mn.PERMISSION_DENIED:return K.PERMISSION_DENIED;case mn.FAILED_PRECONDITION:return K.FAILED_PRECONDITION;case mn.ABORTED:return K.ABORTED;case mn.OUT_OF_RANGE:return K.OUT_OF_RANGE;case mn.UNIMPLEMENTED:return K.UNIMPLEMENTED;case mn.DATA_LOSS:return K.DATA_LOSS;default:return Ce()}}var jI=class extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}};var XT=null;function Tj(){return new Qse}function ble(){return new Xse("utf-8")}var vle=new $a([4294967295,4294967295],0);function M5(i){let t=Tj().encode(i),e=new PS;return e.update(t),new Uint8Array(e.digest())}function A5(i){let t=new DataView(i.buffer),e=t.getUint32(0,!0),n=t.getUint32(4,!0),r=t.getUint32(8,!0),s=t.getUint32(12,!0),o=new $a([e,n],0),a=new $a([r,s],0);return[o,a]}var UI=class i{constructor(t,e,n){if(this.bitmap=t,this.padding=e,this.hashCount=n,e<0||e>=8)throw new hd(`Invalid padding: ${e}`);if(n<0)throw new hd(`Invalid hash count: ${n}`);if(t.length>0&&this.hashCount===0)throw new hd(`Invalid hash count: ${n}`);if(t.length===0&&e!==0)throw new hd(`Invalid padding when bitmap length is 0: ${e}`);this.bitCount=t.length*8-e,this.bitCountInInteger=$a.fromNumber(this.bitCount)}getBitIndex(t,e,n){let r=t.add(e.multiply($a.fromNumber(n)));return r.compare(vle)===1&&(r=new $a([r.getBits(0),r.getBits(1)],0)),r.modulo(this.bitCountInInteger).toNumber()}isBitSet(t){let e=this.bitmap[Math.floor(t/8)],n=t%8;return(e&1<<n)!==0}mightContain(t){if(this.bitCount===0)return!1;let e=M5(t),[n,r]=A5(e);for(let s=0;s<this.hashCount;s++){let o=this.getBitIndex(n,r,s);if(!this.isBitSet(o))return!1}return!0}static create(t,e,n){let r=t%8===0?0:8-t%8,s=new Uint8Array(Math.ceil(t/8)),o=new i(s,r,e);return n.forEach(a=>o.insert(a)),o}insert(t){if(this.bitCount===0)return;let e=M5(t),[n,r]=A5(e);for(let s=0;s<this.hashCount;s++){let o=this.getBitIndex(n,r,s);this.setBit(o)}}setBit(t){let e=Math.floor(t/8),n=t%8;this.bitmap[e]|=1<<n}},hd=class extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}};var bg=class i{constructor(t,e,n,r,s){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(t,e,n){let r=new Map;return r.set(t,vg.createSynthesizedTargetChangeForCurrentChange(t,e,n)),new i(Ne.min(),r,new si(Ye),hr(),Je())}},vg=class i{constructor(t,e,n,r,s){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(t,e,n){return new i(n,e,Je(),Je(),Je())}};var Ph=class{constructor(t,e,n,r){this.updatedTargetIds=t,this.removedTargetIds=e,this.key=n,this.newDoc=r}},Oy=class{constructor(t,e){this.targetId=t,this.existenceFilter=e}},Py=class{constructor(t,e,n=zi.EMPTY_BYTE_STRING,r=null){this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r}},Ry=class{constructor(){this.pendingResponses=0,this.documentChanges=P5(),this._resumeToken=zi.EMPTY_BYTE_STRING,this._current=!1,this._hasPendingChanges=!0}get current(){return this._current}get resumeToken(){return this._resumeToken}get isPending(){return this.pendingResponses!==0}get hasPendingChanges(){return this._hasPendingChanges}updateResumeToken(t){t.approximateByteSize()>0&&(this._hasPendingChanges=!0,this._resumeToken=t)}toTargetChange(){let t=Je(),e=Je(),n=Je();return this.documentChanges.forEach((r,s)=>{switch(s){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ce()}}),new vg(this._resumeToken,this._current,t,e,n)}clearPendingChanges(){this._hasPendingChanges=!1,this.documentChanges=P5()}addDocumentChange(t,e){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.insert(t,e)}removeDocumentChange(t){this._hasPendingChanges=!0,this.documentChanges=this.documentChanges.remove(t)}recordPendingTargetRequest(){this.pendingResponses+=1}recordTargetResponse(){this.pendingResponses-=1,Ae(this.pendingResponses>=0)}markCurrent(){this._hasPendingChanges=!0,this._current=!0}},yle="WatchChangeAggregator",HI=class{constructor(t){this.metadataProvider=t,this.targetStates=new Map,this.pendingDocumentUpdates=hr(),this.pendingDocumentTargetMapping=O5(),this.pendingTargetResets=new si(Ye)}handleDocumentChange(t){for(let e of t.updatedTargetIds)t.newDoc&&t.newDoc.isFoundDocument()?this.addDocumentToTarget(e,t.newDoc):this.removeDocumentFromTarget(e,t.key,t.newDoc);for(let e of t.removedTargetIds)this.removeDocumentFromTarget(e,t.key,t.newDoc)}handleTargetChange(t){this.forEachTarget(t,e=>{let n=this.ensureTargetState(e);switch(t.state){case 0:this.isActiveTarget(e)&&n.updateResumeToken(t.resumeToken);break;case 1:n.recordTargetResponse(),n.isPending||n.clearPendingChanges(),n.updateResumeToken(t.resumeToken);break;case 2:n.recordTargetResponse(),n.isPending||this.removeTarget(e);break;case 3:this.isActiveTarget(e)&&(n.markCurrent(),n.updateResumeToken(t.resumeToken));break;case 4:this.isActiveTarget(e)&&(this.resetTarget(e),n.updateResumeToken(t.resumeToken));break;default:Ce()}})}forEachTarget(t,e){t.targetIds.length>0?t.targetIds.forEach(e):this.targetStates.forEach((n,r)=>{this.isActiveTarget(r)&&e(r)})}handleExistenceFilter(t){let e=t.targetId,n=t.existenceFilter.count,r=this.targetDataForActiveTarget(e);if(r){let s=r.target;if(My(s))if(n===0){let o=new pe(s.path);this.removeDocumentFromTarget(e,o,$i.newNoDocument(o,Ne.min()))}else Ae(n===1);else{let o=this.getCurrentDocumentCountForTarget(e);if(o!==n){let a=this.parseBloomFilter(t),l=a?this.applyBloomFilter(a,t,o):1;if(l!==0){this.resetTarget(e);let c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.pendingTargetResets=this.pendingTargetResets.insert(e,c)}XT?.notifyOnExistenceFilterMismatch(xle(o,t.existenceFilter,this.metadataProvider.getDatabaseId(),a,l))}}}}parseBloomFilter(t){let e=t.existenceFilter.unchangedNames;if(!e||!e.bits)return null;let{bits:{bitmap:n="",padding:r=0},hashCount:s=0}=e,o;try{o=Ml(n).toUint8Array()}catch(l){if(l instanceof jI)return Ns("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}let a;try{a=new UI(o,r,s)}catch(l){return l instanceof hd?Ns("BloomFilter error: ",l):Ns("Applying bloom filter failed: ",l),null}return a.bitCount===0?null:a}applyBloomFilter(t,e,n){let r=e.existenceFilter.count,s=this.filterRemovedDocuments(t,e.targetId);return r===n-s?0:2}filterRemovedDocuments(t,e){let n=this.metadataProvider.getRemoteKeysForTarget(e),r=0;return n.forEach(s=>{let o=this.metadataProvider.getDatabaseId(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;t.mightContain(a)||(this.removeDocumentFromTarget(e,s,null),r++)}),r}createRemoteEvent(t){let e=new Map;this.targetStates.forEach((s,o)=>{let a=this.targetDataForActiveTarget(o);if(a){if(s.current&&My(a.target)){let l=new pe(a.target.path);this.pendingDocumentUpdates.get(l)===null&&!this.targetContainsDocument(o,l)&&this.removeDocumentFromTarget(o,l,$i.newNoDocument(l,t))}s.hasPendingChanges&&(e.set(o,s.toTargetChange()),s.clearPendingChanges())}});let n=Je();this.pendingDocumentTargetMapping.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{let c=this.targetDataForActiveTarget(l);return c&&c.purpose!=="TargetPurposeLimboResolution"?(a=!1,!1):!0}),a&&(n=n.add(s))}),this.pendingDocumentUpdates.forEach((s,o)=>o.setReadTime(t));let r=new bg(t,e,this.pendingTargetResets,this.pendingDocumentUpdates,n);return this.pendingDocumentUpdates=hr(),this.pendingDocumentTargetMapping=O5(),this.pendingTargetResets=new si(Ye),r}addDocumentToTarget(t,e){if(!this.isActiveTarget(t))return;let n=this.targetContainsDocument(t,e.key)?2:0;this.ensureTargetState(t).addDocumentChange(e.key,n),this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e.key,e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e.key,this.ensureDocumentTargetMapping(e.key).add(t))}removeDocumentFromTarget(t,e,n){if(!this.isActiveTarget(t))return;let r=this.ensureTargetState(t);this.targetContainsDocument(t,e)?r.addDocumentChange(e,1):r.removeDocumentChange(e),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(e,this.ensureDocumentTargetMapping(e).delete(t)),n&&(this.pendingDocumentUpdates=this.pendingDocumentUpdates.insert(e,n))}removeTarget(t){this.targetStates.delete(t)}getCurrentDocumentCountForTarget(t){let n=this.ensureTargetState(t).toTargetChange();return this.metadataProvider.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}recordPendingTargetRequest(t){this.ensureTargetState(t).recordPendingTargetRequest()}ensureTargetState(t){let e=this.targetStates.get(t);return e||(e=new Ry,this.targetStates.set(t,e)),e}ensureDocumentTargetMapping(t){let e=this.pendingDocumentTargetMapping.get(t);return e||(e=new qt(Ye),this.pendingDocumentTargetMapping=this.pendingDocumentTargetMapping.insert(t,e)),e}isActiveTarget(t){let e=this.targetDataForActiveTarget(t)!==null;return e||oe(yle,"Detected inactive target",t),e}targetDataForActiveTarget(t){let e=this.targetStates.get(t);return e&&e.isPending?null:this.metadataProvider.getTargetDataForTarget(t)}resetTarget(t){this.targetStates.set(t,new Ry),this.metadataProvider.getRemoteKeysForTarget(t).forEach(n=>{this.removeDocumentFromTarget(t,n,null)})}targetContainsDocument(t,e){return this.metadataProvider.getRemoteKeysForTarget(t).has(e)}};function O5(){return new si(pe.comparator)}function P5(){return new si(pe.comparator)}function xle(i,t,e,n,r){var s,o,a,l,c,d;let u={localCacheCount:i,existenceFilterCount:t.count,databaseId:e.database,projectId:e.projectId},h=t.unchangedNames;return h&&(u.bloomFilter={applied:r===0,hashCount:(s=h?.hashCount)!==null&&s!==void 0?s:0,bitmapLength:(l=(a=(o=h?.bits)===null||o===void 0?void 0:o.bitmap)===null||a===void 0?void 0:a.length)!==null&&l!==void 0?l:0,padding:(d=(c=h?.bits)===null||c===void 0?void 0:c.padding)!==null&&d!==void 0?d:0,mightContain:m=>{var _;return(_=n?.mightContain(m))!==null&&_!==void 0?_:!1}}),u}var wle=(()=>{let i={};return i.asc="ASCENDING",i.desc="DESCENDING",i})(),Cle=(()=>{let i={};return i["<"]="LESS_THAN",i["<="]="LESS_THAN_OR_EQUAL",i[">"]="GREATER_THAN",i[">="]="GREATER_THAN_OR_EQUAL",i["=="]="EQUAL",i["!="]="NOT_EQUAL",i["array-contains"]="ARRAY_CONTAINS",i.in="IN",i["not-in"]="NOT_IN",i["array-contains-any"]="ARRAY_CONTAINS_ANY",i})(),Sle=(()=>{let i={};return i.and="AND",i.or="OR",i})();var qI=class{constructor(t,e){this.databaseId=t,this.useProto3Json=e}};function kle(i){let t=i.code===void 0?K.UNKNOWN:yy(i.code);return new ie(t,i.message||"")}function WI(i,t){return i.useProto3Json||Rg(t)?t:{value:t}}function Ele(i){let t;return typeof i=="object"?t=i.value:t=i,Rg(t)?null:t}function Uh(i,t){if(i.useProto3Json){let n=new Date(t.seconds*1e3).toISOString().replace(/\.\d*/,"").replace("Z",""),r=("000000000"+t.nanoseconds).slice(-9);return`${n}.${r}Z`}else return{seconds:""+t.seconds,nanos:t.nanoseconds}}function Tle(i){let t=ua(i);return new wi(t.seconds,t.nanos)}function Ij(i,t){return i.useProto3Json?t.toBase64():t.toUint8Array()}function Ile(i,t){return i.useProto3Json?(Ae(t===void 0||typeof t=="string"),zi.fromBase64String(t||"")):(Ae(t===void 0||t instanceof Buffer||t instanceof Uint8Array),zi.fromUint8Array(t||new Uint8Array))}function Dle(i,t){return Uh(i,t.toTimestamp())}function Bi(i){return Ae(!!i),Ne.fromTimestamp(Tle(i))}function TM(i,t){return GI(i,t).canonicalString()}function GI(i,t){let e=Mle(i).child("documents");return t===void 0?e:e.child(t)}function Dj(i){let t=xt.fromString(i);return Ae(Vj(t)),t}function yg(i,t){return TM(i.databaseId,t.path)}function yo(i,t){let e=Dj(t);if(e.get(1)!==i.databaseId.projectId)throw new ie(K.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+e.get(1)+" vs "+i.databaseId.projectId);if(e.get(3)!==i.databaseId.database)throw new ie(K.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+e.get(3)+" vs "+i.databaseId.database);return new pe(Oj(e))}function Mj(i,t){return TM(i.databaseId,t)}function Aj(i){let t=Dj(i);return t.length===4?xt.emptyPath():Oj(t)}function $I(i){return new xt(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function Mle(i){return new xt(["projects",i.projectId,"databases",i.database])}function Oj(i){return Ae(i.length>4&&i.get(4)==="documents"),i.popFirst(5)}function R5(i,t,e){return{name:yg(i,t),fields:e.value.mapValue.fields}}function Ale(i,t){return{name:yg(i,t.key),fields:t.data.value.mapValue.fields,updateTime:Uh(i,t.version.toTimestamp()),createTime:Uh(i,t.createTime.toTimestamp())}}function Pj(i,t,e){let n=yo(i,t.name),r=Bi(t.updateTime),s=t.createTime?Bi(t.createTime):Ne.min(),o=new Nn({mapValue:{fields:t.fields}}),a=$i.newFoundDocument(n,r,s,o);return e&&a.setHasCommittedMutations(),e?a.setHasCommittedMutations():a}function Ole(i,t){Ae(!!t.found),t.found.name,t.found.updateTime;let e=yo(i,t.found.name),n=Bi(t.found.updateTime),r=t.found.createTime?Bi(t.found.createTime):Ne.min(),s=new Nn({mapValue:{fields:t.found.fields}});return $i.newFoundDocument(e,n,r,s)}function Ple(i,t){Ae(!!t.missing),Ae(!!t.readTime);let e=yo(i,t.missing),n=Bi(t.readTime);return $i.newNoDocument(e,n)}function Rle(i,t){return"found"in t?Ole(i,t):"missing"in t?Ple(i,t):Ce()}function Fle(i,t){let e;if("targetChange"in t){t.targetChange;let n=Nle(t.targetChange.targetChangeType||"NO_CHANGE"),r=t.targetChange.targetIds||[],s=Ile(i,t.targetChange.resumeToken),o=t.targetChange.cause,a=o&&kle(o);e=new Py(n,r,s,a||null)}else if("documentChange"in t){t.documentChange;let n=t.documentChange;n.document,n.document.name,n.document.updateTime;let r=yo(i,n.document.name),s=Bi(n.document.updateTime),o=n.document.createTime?Bi(n.document.createTime):Ne.min(),a=new Nn({mapValue:{fields:n.document.fields}}),l=$i.newFoundDocument(r,s,o,a),c=n.targetIds||[],d=n.removedTargetIds||[];e=new Ph(c,d,l.key,l)}else if("documentDelete"in t){t.documentDelete;let n=t.documentDelete;n.document;let r=yo(i,n.document),s=n.readTime?Bi(n.readTime):Ne.min(),o=$i.newNoDocument(r,s),a=n.removedTargetIds||[];e=new Ph([],a,o.key,o)}else if("documentRemove"in t){t.documentRemove;let n=t.documentRemove;n.document;let r=yo(i,n.document),s=n.removedTargetIds||[];e=new Ph([],s,r,null)}else if("filter"in t){t.filter;let n=t.filter;n.targetId;let{count:r=0,unchangedNames:s}=n,o=new zI(r,s),a=n.targetId;e=new Oy(a,o)}else return Ce();return e}function Nle(i){return i==="NO_CHANGE"?0:i==="ADD"?1:i==="REMOVE"?2:i==="CURRENT"?3:i==="RESET"?4:Ce()}function Lle(i){if(!("targetChange"in i))return Ne.min();let t=i.targetChange;return t.targetIds&&t.targetIds.length||!t.readTime?Ne.min():Bi(t.readTime)}function xg(i,t){let e;if(t instanceof Fl)e={update:R5(i,t.key,t.value)};else if(t instanceof Nl)e={delete:yg(i,t.key)};else if(t instanceof Vs)e={update:R5(i,t.key,t.data),updateMask:gce(t.fieldMask)};else if(t instanceof pg)e={verify:yg(i,t.key)};else return Ce();return t.fieldTransforms.length>0&&(e.updateTransforms=t.fieldTransforms.map(n=>Ule(i,n))),t.precondition.isNone||(e.currentDocument=Ble(i,t.precondition)),e}function KI(i,t){let e=t.currentDocument?Vle(t.currentDocument):Ii.none(),n=t.updateTransforms?t.updateTransforms.map(r=>Hle(i,r)):[];if(t.update){t.update.name;let r=yo(i,t.update.name),s=new Nn({mapValue:{fields:t.update.fields}});if(t.updateMask){let o=_ce(t.updateMask);return new Vs(r,s,o,e,n)}else return new Fl(r,s,e,n)}else if(t.delete){let r=yo(i,t.delete);return new Nl(r,e)}else if(t.verify){let r=yo(i,t.verify);return new pg(r,e)}else return Ce()}function Ble(i,t){return t.updateTime!==void 0?{updateTime:Dle(i,t.updateTime)}:t.exists!==void 0?{exists:t.exists}:Ce()}function Vle(i){return i.updateTime!==void 0?Ii.updateTime(Bi(i.updateTime)):i.exists!==void 0?Ii.exists(i.exists):Ii.none()}function zle(i,t){let e=i.updateTime?Bi(i.updateTime):Bi(t);return e.isEqual(Ne.min())&&(e=Bi(t)),new BI(e,i.transformResults||[])}function jle(i,t){return i&&i.length>0?(Ae(t!==void 0),i.map(e=>zle(e,t))):[]}function Ule(i,t){let e=t.transform;if(e instanceof Pl)return{fieldPath:t.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(e instanceof ha)return{fieldPath:t.field.canonicalString(),appendMissingElements:{values:e.elements}};if(e instanceof ma)return{fieldPath:t.field.canonicalString(),removeAllFromArray:{values:e.elements}};if(e instanceof Rl)return{fieldPath:t.field.canonicalString(),increment:e.operand};throw Ce()}function Hle(i,t){let e=null;if("setToServerValue"in t)Ae(t.setToServerValue==="REQUEST_TIME"),e=new Pl;else if("appendMissingElements"in t){let r=t.appendMissingElements.values||[];e=new ha(r)}else if("removeAllFromArray"in t){let r=t.removeAllFromArray.values||[];e=new ma(r)}else"increment"in t?e=new Rl(i,t.increment):Ce();let n=Vi.fromServerFormat(t.fieldPath);return new xd(n,e)}function Rj(i,t){return{documents:[Mj(i,t.path)]}}function qle(i){let t=i.documents.length;Ae(t===1);let e=i.documents[0];return Kn(im(Aj(e)))}function Fj(i,t){let e={structuredQuery:{}},n=t.path,r;t.collectionGroup!==null?(r=n,e.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(r=n.popLast(),e.structuredQuery.from=[{collectionId:n.lastSegment()}]),e.parent=Mj(i,r);let s=Yle(t.filters);s&&(e.structuredQuery.where=s);let o=Xle(t.orderBy);o&&(e.structuredQuery.orderBy=o);let a=WI(i,t.limit);return a!==null&&(e.structuredQuery.limit=a),t.startAt&&(e.structuredQuery.startAt=Jle(t.startAt)),t.endAt&&(e.structuredQuery.endAt=ece(t.endAt)),{queryTarget:e,parent:r}}function Nj(i){let t=Aj(i.parent),e=i.structuredQuery,n=e.from?e.from.length:0,r=null;if(n>0){Ae(n===1);let d=e.from[0];d.allDescendants?r=d.collectionId:t=t.child(d.collectionId)}let s=[];e.where&&(s=Qle(e.where));let o=[];e.orderBy&&(o=Zle(e.orderBy));let a=null;e.limit&&(a=Ele(e.limit));let l=null;e.startAt&&(l=tce(e.startAt));let c=null;return e.endAt&&(c=ice(e.endAt)),cj(t,r,o,s,a,"F",l,c)}function Wle(i){return Kn(Nj(i))}function Gle(i,t){let e=$le(t.purpose);return e==null?null:{"goog-listen-tags":e}}function $le(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ce()}}function Kle(i,t){let e,n=t.target;if(My(n)?e={documents:Rj(i,n)}:e={query:Fj(i,n).queryTarget},e.targetId=t.targetId,t.resumeToken.approximateByteSize()>0){e.resumeToken=Ij(i,t.resumeToken);let r=WI(i,t.expectedCount);r!==null&&(e.expectedCount=r)}else if(t.snapshotVersion.compareTo(Ne.min())>0){e.readTime=Uh(i,t.snapshotVersion.toTimestamp());let r=WI(i,t.expectedCount);r!==null&&(e.expectedCount=r)}return e}function Yle(i){if(i.length!==0)return Bj(zt.create(i,"and"))}function Qle(i){let t=Lj(i);return t instanceof zt&&wM(t)?t.getFilters():[t]}function Lj(i){return i.unaryFilter!==void 0?mce(i):i.fieldFilter!==void 0?fce(i):i.compositeFilter!==void 0?pce(i):Ce()}function Xle(i){if(i.length!==0)return i.map(t=>cce(t))}function Zle(i){return i.map(t=>dce(t))}function Jle(i){return{before:i.inclusive,values:i.position}}function ece(i){return{before:!i.inclusive,values:i.position}}function tce(i){let t=!!i.before,e=i.values||[];return new wo(e,t)}function ice(i){let t=!i.before,e=i.values||[];return new wo(e,t)}function nce(i){return wle[i]}function rce(i){switch(i){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}function sce(i){return Cle[i]}function oce(i){return Sle[i]}function ace(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return Ce();default:return Ce()}}function lce(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Ce()}}function Th(i){return{fieldPath:i.canonicalString()}}function Mh(i){return Vi.fromServerFormat(i.fieldPath)}function cce(i){return{field:Th(i.field),direction:nce(i.dir)}}function dce(i){return new vd(Mh(i.field),rce(i.direction))}function Bj(i){return i instanceof _t?hce(i):i instanceof zt?uce(i):Ce()}function uce(i){let t=i.getFilters().map(e=>Bj(e));return t.length===1?t[0]:{compositeFilter:{op:oce(i.op),filters:t}}}function hce(i){if(i.op==="=="){if(C5(i.value))return{unaryFilter:{field:Th(i.field),op:"IS_NAN"}};if(w5(i.value))return{unaryFilter:{field:Th(i.field),op:"IS_NULL"}}}else if(i.op==="!="){if(C5(i.value))return{unaryFilter:{field:Th(i.field),op:"IS_NOT_NAN"}};if(w5(i.value))return{unaryFilter:{field:Th(i.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Th(i.field),op:sce(i.op),value:i.value}}}function mce(i){switch(i.unaryFilter.op){case"IS_NAN":let t=Mh(i.unaryFilter.field);return _t.create(t,"==",{doubleValue:NaN});case"IS_NULL":let e=Mh(i.unaryFilter.field);return _t.create(e,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":let n=Mh(i.unaryFilter.field);return _t.create(n,"!=",{doubleValue:NaN});case"IS_NOT_NULL":let r=Mh(i.unaryFilter.field);return _t.create(r,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return Ce();default:return Ce()}}function fce(i){return _t.create(Mh(i.fieldFilter.field),ace(i.fieldFilter.op),i.fieldFilter.value)}function pce(i){return zt.create(i.compositeFilter.filters.map(t=>Lj(t)),lce(i.compositeFilter.op))}function gce(i){let t=[];return i.fields.forEach(e=>t.push(e.canonicalString())),{fieldPaths:t}}function _ce(i){let t=i.fieldPaths||[];return new Pr(t.map(e=>Vi.fromServerFormat(e)))}function Vj(i){return i.length>=4&&i.get(0)==="projects"&&i.get(2)==="databases"}var Hh=class i{constructor(t,e,n,r,s=Ne.min(),o=Ne.min(),a=zi.EMPTY_BYTE_STRING,l=null){this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(t){return new i(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,e){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,e,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new i(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}};var Fy=class{constructor(t){this.remoteSerializer=t}};function bce(i,t){let e;if(t.document)e=Pj(i.remoteSerializer,t.document,!!t.hasCommittedMutations);else if(t.noDocument){let n=pe.fromSegments(t.noDocument.path),r=Cd(t.noDocument.readTime);e=$i.newNoDocument(n,r),t.hasCommittedMutations&&e.setHasCommittedMutations()}else if(t.unknownDocument){let n=pe.fromSegments(t.unknownDocument.path),r=Cd(t.unknownDocument.version);e=$i.newUnknownDocument(n,r)}else return Ce();return t.readTime&&e.setReadTime(vce(t.readTime)),e}function F5(i,t){let e=t.key,n={prefixPath:e.getCollectionPath().popLast().toArray(),collectionGroup:e.collectionGroup,documentId:e.path.lastSegment(),readTime:Sx(t.readTime),hasCommittedMutations:t.hasCommittedMutations};if(t.isFoundDocument())n.document=Ale(i.remoteSerializer,t);else if(t.isNoDocument())n.noDocument={path:e.path.toArray(),readTime:wd(t.version)};else if(t.isUnknownDocument())n.unknownDocument={path:e.path.toArray(),version:wd(t.version)};else return Ce();return n}function Sx(i){let t=i.toTimestamp();return[t.seconds,t.nanoseconds]}function vce(i){let t=new wi(i[0],i[1]);return Ne.fromTimestamp(t)}function wd(i){let t=i.toTimestamp();return{seconds:t.seconds,nanoseconds:t.nanoseconds}}function Cd(i){let t=new wi(i.seconds,i.nanoseconds);return Ne.fromTimestamp(t)}function yce(i,t,e){let n=e.baseMutations.map(s=>xg(i.remoteSerializer,s)),r=e.mutations.map(s=>xg(i.remoteSerializer,s));return{userId:t,batchId:e.batchId,localWriteTimeMs:e.localWriteTime.toMillis(),baseMutations:n,mutations:r}}function ld(i,t){let e=(t.baseMutations||[]).map(s=>KI(i.remoteSerializer,s));for(let s=0;s<t.mutations.length-1;++s){let o=t.mutations[s];if(s+1<t.mutations.length&&t.mutations[s+1].transform!==void 0){let l=t.mutations[s+1];o.updateTransforms=l.transform.fieldTransforms,t.mutations.splice(s+1,1),++s}}let n=t.mutations.map(s=>KI(i.remoteSerializer,s)),r=wi.fromMillis(t.localWriteTimeMs);return new gg(t.batchId,r,e,n)}function eg(i){let t=Cd(i.readTime),e=i.lastLimboFreeSnapshotVersion!==void 0?Cd(i.lastLimboFreeSnapshotVersion):Ne.min(),n;return xce(i.query)?n=qle(i.query):n=Wle(i.query),new Hh(n,i.targetId,"TargetPurposeListen",i.lastListenSequenceNumber,t,e,zi.fromBase64String(i.resumeToken))}function zj(i,t){let e=wd(t.snapshotVersion),n=wd(t.lastLimboFreeSnapshotVersion),r;My(t.target)?r=Rj(i.remoteSerializer,t.target):r=Fj(i.remoteSerializer,t.target).queryTarget;let s=t.resumeToken.toBase64();return{targetId:t.targetId,canonicalId:yd(t.target),readTime:e,resumeToken:s,lastListenSequenceNumber:t.sequenceNumber,lastLimboFreeSnapshotVersion:n,query:r}}function xce(i){return i.documents!==void 0}function wce(i){return{id:i.bundleId,createTime:Cd(i.createTime),version:i.version}}function Cce(i){return{bundleId:i.id,createTime:wd(Bi(i.createTime)),version:i.version}}function Sce(i){return{name:i.name,query:IM(i.bundledQuery),readTime:Cd(i.readTime)}}function kce(i){return{name:i.name,readTime:wd(Bi(i.readTime)),bundledQuery:i.bundledQuery}}function IM(i){let t=Nj({parent:i.parent,structuredQuery:i.structuredQuery});return i.limitType==="LAST"?Ay(t,t.limit,"L"):t}function Ece(i){return{name:i.name,query:IM(i.bundledQuery),readTime:Bi(i.readTime)}}function Tce(i){return{id:i.id,version:i.version,createTime:Bi(i.createTime)}}function ZT(i,t){return new _g(t.largestBatchId,KI(i.remoteSerializer,t.overlayMutation))}function Ice(i,t,e){let[n,r,s]=jj(t,e.mutation.key);return{userId:t,collectionPath:r,documentId:s,collectionGroup:e.mutation.key.getCollectionGroup(),largestBatchId:e.largestBatchId,overlayMutation:xg(i.remoteSerializer,e.mutation)}}function jj(i,t){let e=t.path.lastSegment(),n=$n(t.path.popLast());return[i,n,e]}function Dce(i){return{indexId:i.indexId,collectionGroup:i.collectionGroup,fields:i.fields.map(t=>[t.fieldPath.canonicalString(),t.kind])}}function Mce(i,t){let e=t?new ag(t.sequenceNumber,new as(Cd(t.readTime),new pe(bo(t.documentKey)),t.largestBatchId)):ag.empty(),n=i.fields.map(([r,s])=>new Ah(Vi.fromServerFormat(r),s));return new pI(i.indexId,i.collectionGroup,n,e)}function N5(i,t,e,n){return{indexId:i,uid:t,sequenceNumber:e,readTime:wd(n.readTime),documentKey:$n(n.documentKey.path),largestBatchId:n.largestBatchId}}var YI=class{getBundleMetadata(t,e){return L5(t).get(e).next(n=>{if(n)return wce(n)})}saveBundleMetadata(t,e){return L5(t).put(Cce(e))}getNamedQuery(t,e){return B5(t).get(e).next(n=>{if(n)return Sce(n)})}saveNamedQuery(t,e){return B5(t).put(kce(e))}};function L5(i){return en(i,px)}function B5(i){return en(i,gx)}var Ny=class i{constructor(t,e){this.serializer=t,this.userId=e}static forUser(t,e){let n=e.uid||"";return new i(t,n)}getOverlay(t,e){return Yp(t).get(jj(this.userId,e)).next(n=>n?ZT(this.serializer,n):null)}getOverlays(t,e){let n=vo();return q.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(t,e,n){let r=[];return n.forEach((s,o)=>{let a=new _g(e,o);r.push(this.saveOverlay(t,a))}),q.waitFor(r)}removeOverlaysForBatchId(t,e,n){let r=new Set;e.forEach(o=>r.add($n(o.getCollectionPath())));let s=[];return r.forEach(o=>{let a=IDBKeyRange.bound([this.userId,o,n],[this.userId,o,n+1],!1,!0);s.push(Yp(t).deleteAll(CI,a))}),q.waitFor(s)}getOverlaysForCollection(t,e,n){let r=vo(),s=$n(e),o=IDBKeyRange.bound([this.userId,s,n],[this.userId,s,Number.POSITIVE_INFINITY],!0);return Yp(t).loadAll(CI,o).next(a=>{for(let l of a){let c=ZT(this.serializer,l);r.set(c.getKey(),c)}return r})}getOverlaysForCollectionGroup(t,e,n,r){let s=vo(),o,a=IDBKeyRange.bound([this.userId,e,n],[this.userId,e,Number.POSITIVE_INFINITY],!0);return Yp(t).iterate({index:Vz,range:a},(l,c,d)=>{let u=ZT(this.serializer,c);s.size()<r||u.largestBatchId===o?(s.set(u.getKey(),u),o=u.largestBatchId):d.done()}).next(()=>s)}saveOverlay(t,e){return Yp(t).put(Ice(this.serializer,this.userId,e))}};function Yp(i){return en(i,vx)}var QI=class{globalsStore(t){return en(t,gM)}getSessionToken(t){return this.globalsStore(t).get("sessionToken").next(n=>{let r=n?.value;return r?zi.fromUint8Array(r):zi.EMPTY_BYTE_STRING})}setSessionToken(t,e){return this.globalsStore(t).put({name:"sessionToken",value:e.toUint8Array()})}};var Ace=5,Oce=10,Pce=13,JT=15,Rce=20,Fce=25,Nce=30,Lce=37,Bce=45,Vce=50,zce=53,jce=55,Uce=60,Hce=2,da=class{constructor(){}writeIndexValue(t,e){this.writeIndexValueAux(t,e),e.writeInfinity()}writeIndexValueAux(t,e){if("nullValue"in t)this.writeValueTypeLabel(e,Ace);else if("booleanValue"in t)this.writeValueTypeLabel(e,Oce),e.writeNumber(t.booleanValue?1:0);else if("integerValue"in t)this.writeValueTypeLabel(e,JT),e.writeNumber(ui(t.integerValue));else if("doubleValue"in t){let n=ui(t.doubleValue);isNaN(n)?this.writeValueTypeLabel(e,Pce):(this.writeValueTypeLabel(e,JT),ug(n)?e.writeNumber(0):e.writeNumber(n))}else if("timestampValue"in t){let n=t.timestampValue;this.writeValueTypeLabel(e,Rce),typeof n=="string"&&(n=ua(n)),e.writeString(`${n.seconds||""}`),e.writeNumber(n.nanos||0)}else if("stringValue"in t)this.writeIndexString(t.stringValue,e),this.writeTruncationMarker(e);else if("bytesValue"in t)this.writeValueTypeLabel(e,Nce),e.writeBytes(Ml(t.bytesValue)),this.writeTruncationMarker(e);else if("referenceValue"in t)this.writeIndexEntityRef(t.referenceValue,e);else if("geoPointValue"in t){let n=t.geoPointValue;this.writeValueTypeLabel(e,Bce),e.writeNumber(n.latitude||0),e.writeNumber(n.longitude||0)}else"mapValue"in t?Zz(t)?this.writeValueTypeLabel(e,Number.MAX_SAFE_INTEGER):xx(t)?this.writeIndexVector(t.mapValue,e):(this.writeIndexMap(t.mapValue,e),this.writeTruncationMarker(e)):"arrayValue"in t?(this.writeIndexArray(t.arrayValue,e),this.writeTruncationMarker(e)):Ce()}writeIndexString(t,e){this.writeValueTypeLabel(e,Fce),this.writeUnlabeledIndexString(t,e)}writeUnlabeledIndexString(t,e){e.writeString(t)}writeIndexMap(t,e){let n=t.fields||{};this.writeValueTypeLabel(e,jce);for(let r of Object.keys(n))this.writeIndexString(r,e),this.writeIndexValueAux(n[r],e)}writeIndexVector(t,e){var n,r;let s=t.fields||{};this.writeValueTypeLabel(e,zce);let o=Nh,a=((r=(n=s[o].arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.length)||0;this.writeValueTypeLabel(e,JT),e.writeNumber(ui(a)),this.writeIndexString(o,e),this.writeIndexValueAux(s[o],e)}writeIndexArray(t,e){let n=t.values||[];this.writeValueTypeLabel(e,Vce);for(let r of n)this.writeIndexValueAux(r,e)}writeIndexEntityRef(t,e){this.writeValueTypeLabel(e,Lce),pe.fromName(t).path.forEach(r=>{this.writeValueTypeLabel(e,Uce),this.writeUnlabeledIndexString(r,e)})}writeValueTypeLabel(t,e){t.writeNumber(e)}writeTruncationMarker(t){t.writeNumber(Hce)}};da.INSTANCE=new da;var V5="\uD800",z5="\uDBFF",yh=0,j5=255,U5=1,xh=255,H5=255,q5=0,qce=64,Wce=8,Gce=1024;function $ce(i){let t=new DataView(new ArrayBuffer(8));return t.setFloat64(0,i,!1),new Uint8Array(t.buffer)}function Kce(i){if(i===0)return 8;let t=0;return i>>4||(t+=4,i=i<<4),i>>6||(t+=2,i=i<<2),i>>7||(t+=1),t}function Yce(i){let t=0;for(let e=0;e<8;++e){let n=Kce(i[e]&255);if(t+=n,n!==8)break}return t}function W5(i){let t=qce-Yce(i);return Math.ceil(t/Wce)}var XI=class{constructor(){this.buffer=new Uint8Array(Gce),this.position=0}writeBytesAscending(t){let e=t[Symbol.iterator](),n=e.next();for(;!n.done;)this.writeByteAscending(n.value),n=e.next();this.writeSeparatorAscending()}writeBytesDescending(t){let e=t[Symbol.iterator](),n=e.next();for(;!n.done;)this.writeByteDescending(n.value),n=e.next();this.writeSeparatorDescending()}writeUtf8Ascending(t){for(let e of t){let n=e.charCodeAt(0);if(n<128)this.writeByteAscending(n);else if(n<2048)this.writeByteAscending(960|n>>>6),this.writeByteAscending(128|63&n);else if(e<V5||z5<e)this.writeByteAscending(480|n>>>12),this.writeByteAscending(128|63&n>>>6),this.writeByteAscending(128|63&n);else{let r=e.codePointAt(0);this.writeByteAscending(240|r>>>18),this.writeByteAscending(128|63&r>>>12),this.writeByteAscending(128|63&r>>>6),this.writeByteAscending(128|63&r)}}this.writeSeparatorAscending()}writeUtf8Descending(t){for(let e of t){let n=e.charCodeAt(0);if(n<128)this.writeByteDescending(n);else if(n<2048)this.writeByteDescending(960|n>>>6),this.writeByteDescending(128|63&n);else if(e<V5||z5<e)this.writeByteDescending(480|n>>>12),this.writeByteDescending(128|63&n>>>6),this.writeByteDescending(128|63&n);else{let r=e.codePointAt(0);this.writeByteDescending(240|r>>>18),this.writeByteDescending(128|63&r>>>12),this.writeByteDescending(128|63&r>>>6),this.writeByteDescending(128|63&r)}}this.writeSeparatorDescending()}writeNumberAscending(t){let e=this.toOrderedBits(t),n=W5(e);this.ensureAvailable(1+n),this.buffer[this.position++]=n&255;for(let r=e.length-n;r<e.length;++r)this.buffer[this.position++]=e[r]&255}writeNumberDescending(t){let e=this.toOrderedBits(t),n=W5(e);this.ensureAvailable(1+n),this.buffer[this.position++]=~(n&255);for(let r=e.length-n;r<e.length;++r)this.buffer[this.position++]=~(e[r]&255)}writeInfinityAscending(){this.writeEscapedByteAscending(xh),this.writeEscapedByteAscending(H5)}writeInfinityDescending(){this.writeEscapedByteDescending(xh),this.writeEscapedByteDescending(H5)}reset(){this.position=0}seed(t){this.ensureAvailable(t.length),this.buffer.set(t,this.position),this.position+=t.length}encodedBytes(){return this.buffer.slice(0,this.position)}toOrderedBits(t){let e=$ce(t),n=(e[0]&128)!==0;e[0]^=n?255:128;for(let r=1;r<e.length;++r)e[r]^=n?255:0;return e}writeByteAscending(t){let e=t&255;e===yh?(this.writeEscapedByteAscending(yh),this.writeEscapedByteAscending(j5)):e===xh?(this.writeEscapedByteAscending(xh),this.writeEscapedByteAscending(q5)):this.writeEscapedByteAscending(e)}writeByteDescending(t){let e=t&255;e===yh?(this.writeEscapedByteDescending(yh),this.writeEscapedByteDescending(j5)):e===xh?(this.writeEscapedByteDescending(xh),this.writeEscapedByteDescending(q5)):this.writeEscapedByteDescending(t)}writeSeparatorAscending(){this.writeEscapedByteAscending(yh),this.writeEscapedByteAscending(U5)}writeSeparatorDescending(){this.writeEscapedByteDescending(yh),this.writeEscapedByteDescending(U5)}writeEscapedByteAscending(t){this.ensureAvailable(1),this.buffer[this.position++]=t}writeEscapedByteDescending(t){this.ensureAvailable(1),this.buffer[this.position++]=~t}ensureAvailable(t){let e=t+this.position;if(e<=this.buffer.length)return;let n=this.buffer.length*2;n<e&&(n=e);let r=new Uint8Array(n);r.set(this.buffer),this.buffer=r}},ZI=class{constructor(t){this.orderedCode=t}writeBytes(t){this.orderedCode.writeBytesAscending(t)}writeString(t){this.orderedCode.writeUtf8Ascending(t)}writeNumber(t){this.orderedCode.writeNumberAscending(t)}writeInfinity(){this.orderedCode.writeInfinityAscending()}},JI=class{constructor(t){this.orderedCode=t}writeBytes(t){this.orderedCode.writeBytesDescending(t)}writeString(t){this.orderedCode.writeUtf8Descending(t)}writeNumber(t){this.orderedCode.writeNumberDescending(t)}writeInfinity(){this.orderedCode.writeInfinityDescending()}},cd=class{constructor(){this.orderedCode=new XI,this.ascending=new ZI(this.orderedCode),this.descending=new JI(this.orderedCode)}seed(t){this.orderedCode.seed(t)}forKind(t){return t===0?this.ascending:this.descending}encodedBytes(){return this.orderedCode.encodedBytes()}reset(){this.orderedCode.reset()}};var dd=class i{constructor(t,e,n,r){this.indexId=t,this.documentKey=e,this.arrayValue=n,this.directionalValue=r}successor(){let t=this.directionalValue.length,e=t===0||this.directionalValue[t-1]===255?t+1:t,n=new Uint8Array(e);return n.set(this.directionalValue,0),e!==t?n.set([0],this.directionalValue.length):++n[n.length-1],new i(this.indexId,this.documentKey,this.arrayValue,n)}};function xl(i,t){let e=i.indexId-t.indexId;return e!==0||(e=G5(i.arrayValue,t.arrayValue),e!==0)||(e=G5(i.directionalValue,t.directionalValue),e!==0)?e:pe.comparator(i.documentKey,t.documentKey)}function G5(i,t){for(let e=0;e<i.length&&e<t.length;++e){let n=i[e]-t[e];if(n!==0)return n}return i.length-t.length}var Ly=class{constructor(t){this.inequalityFilters=new qt((e,n)=>Vi.comparator(e.field,n.field)),this.collectionId=t.collectionGroup!=null?t.collectionGroup:t.path.lastSegment(),this.orderBys=t.orderBy,this.equalityFilters=[];for(let e of t.filters){let n=e;n.isInequality()?this.inequalityFilters=this.inequalityFilters.add(n):this.equalityFilters.push(n)}}get hasMultipleInequality(){return this.inequalityFilters.size>1}servedByIndex(t){if(Ae(t.collectionGroup===this.collectionId),this.hasMultipleInequality)return!1;let e=uM(t);if(e!==void 0&&!this.hasMatchingEqualityFilter(e))return!1;let n=gd(t),r=new Set,s=0,o=0;for(;s<n.length&&this.hasMatchingEqualityFilter(n[s]);++s)r=r.add(n[s].fieldPath.canonicalString());if(s===n.length)return!0;if(this.inequalityFilters.size>0){let a=this.inequalityFilters.getIterator().getNext();if(!r.has(a.field.canonicalString())){let l=n[s];if(!this.matchesFilter(a,l)||!this.matchesOrderBy(this.orderBys[o++],l))return!1}++s}for(;s<n.length;++s){let a=n[s];if(o>=this.orderBys.length||!this.matchesOrderBy(this.orderBys[o++],a))return!1}return!0}buildTargetIndex(){if(this.hasMultipleInequality)return null;let t=new qt(Vi.comparator),e=[];for(let n of this.equalityFilters){if(n.field.isKeyField())continue;if(n.op==="array-contains"||n.op==="array-contains-any")e.push(new Ah(n.field,2));else{if(t.has(n.field))continue;t=t.add(n.field),e.push(new Ah(n.field,0))}}for(let n of this.orderBys)n.field.isKeyField()||t.has(n.field)||(t=t.add(n.field),e.push(new Ah(n.field,n.dir==="asc"?0:1)));return new pI(pI.UNKNOWN_ID,this.collectionId,e,ag.empty())}hasMatchingEqualityFilter(t){for(let e of this.equalityFilters)if(this.matchesFilter(e,t))return!0;return!1}matchesFilter(t,e){if(t===void 0||!t.field.isEqual(e.fieldPath))return!1;let n=t.op==="array-contains"||t.op==="array-contains-any";return e.kind===2===n}matchesOrderBy(t,e){return t.field.isEqual(e.fieldPath)?e.kind===0&&t.dir==="asc"||e.kind===1&&t.dir==="desc":!1}};function Uj(i){var t,e;if(Ae(i instanceof _t||i instanceof zt),i instanceof _t)if(i instanceof Dy){let r=((e=(t=i.value.arrayValue)===null||t===void 0?void 0:t.values)===null||e===void 0?void 0:e.map(s=>_t.create(i.field,"==",s)))||[];return zt.create(r,"or")}else return i;let n=i.filters.map(r=>Uj(r));return zt.create(n,i.op)}function Qce(i){if(i.getFilters().length===0)return[];let t=eD(Uj(i));return Ae(Hj(t)),DM(t)||MM(t)?[t]:t.getFilters()}function DM(i){return i instanceof _t}function MM(i){return i instanceof zt&&wM(i)}function Hj(i){return DM(i)||MM(i)||Xce(i)}function Xce(i){if(i instanceof zt&&II(i)){for(let t of i.getFilters())if(!DM(t)&&!MM(t))return!1;return!0}return!1}function eD(i){if(Ae(i instanceof _t||i instanceof zt),i instanceof _t)return i;if(i.filters.length===1)return eD(i.filters[0]);let t=i.filters.map(n=>eD(n)),e=zt.create(t,i.op);return e=By(e),Hj(e)?e:(Ae(e instanceof zt),Ae(Bh(e)),Ae(e.filters.length>1),e.filters.reduce((n,r)=>AM(n,r)))}function AM(i,t){Ae(i instanceof _t||i instanceof zt),Ae(t instanceof _t||t instanceof zt);let e;return i instanceof _t?t instanceof _t?e=Zce(i,t):e=$5(i,t):t instanceof _t?e=$5(t,i):e=Jce(i,t),By(e)}function Zce(i,t){return zt.create([i,t],"and")}function Jce(i,t){if(Ae(i.filters.length>0&&t.filters.length>0),Bh(i)&&Bh(t))return rj(i,t.getFilters());let e=II(i)?i:t,n=II(i)?t:i,r=e.filters.map(s=>AM(s,n));return zt.create(r,"or")}function $5(i,t){if(Bh(t))return rj(t,i.getFilters());{let e=t.filters.map(n=>AM(i,n));return zt.create(e,"or")}}function By(i){if(Ae(i instanceof _t||i instanceof zt),i instanceof _t)return i;let t=i.getFilters();if(t.length===1)return By(t[0]);if(ij(i))return i;let e=t.map(r=>By(r)),n=[];return e.forEach(r=>{r instanceof _t?n.push(r):r instanceof zt&&(r.op===i.op?n.push(...r.filters):n.push(r))}),n.length===1?n[0]:zt.create(n,i.op)}var tD=class{constructor(){this.collectionParentIndex=new wg}addToCollectionParentIndex(t,e){return this.collectionParentIndex.add(e),q.resolve()}getCollectionParents(t,e){return q.resolve(this.collectionParentIndex.getEntries(e))}addFieldIndex(t,e){return q.resolve()}deleteFieldIndex(t,e){return q.resolve()}deleteAllFieldIndexes(t){return q.resolve()}createTargetIndexes(t,e){return q.resolve()}getDocumentsMatchingTarget(t,e){return q.resolve(null)}getIndexType(t,e){return q.resolve(0)}getFieldIndexes(t,e){return q.resolve([])}getNextCollectionGroupToUpdate(t){return q.resolve(null)}getMinOffset(t,e){return q.resolve(as.min())}getMinOffsetFromCollectionGroup(t,e){return q.resolve(as.min())}updateCollectionGroup(t,e,n){return q.resolve()}updateIndexEntries(t,e){return q.resolve()}},wg=class{constructor(){this.index={}}add(t){let e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new qt(xt.comparator),s=!r.has(n);return this.index[e]=r.add(n),s}has(t){let e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)}getEntries(t){return(this.index[t]||new qt(xt.comparator)).toArray()}};var K5="IndexedDbIndexManager",hy=new Uint8Array(0),iD=class{constructor(t,e){this.databaseId=e,this.collectionParentsCache=new wg,this.targetToDnfSubTargets=new Co(n=>yd(n),(n,r)=>Fg(n,r)),this.uid=t.uid||""}addToCollectionParentIndex(t,e){if(!this.collectionParentsCache.has(e)){let n=e.lastSegment(),r=e.popLast();t.addOnCommittedListener(()=>{this.collectionParentsCache.add(e)});let s={collectionId:n,parent:$n(r)};return Y5(t).put(s)}return q.resolve()}getCollectionParents(t,e){let n=[],r=IDBKeyRange.bound([e,""],[kz(e),""],!1,!0);return Y5(t).loadAll(r).next(s=>{for(let o of s){if(o.collectionId!==e)break;n.push(bo(o.parent))}return n})}addFieldIndex(t,e){let n=Qp(t),r=Dce(e);delete r.indexId;let s=n.add(r);if(e.indexState){let o=Ch(t);return s.next(a=>{o.put(N5(a,this.uid,e.indexState.sequenceNumber,e.indexState.offset))})}else return s.next()}deleteFieldIndex(t,e){let n=Qp(t),r=Ch(t),s=wh(t);return n.delete(e.indexId).next(()=>r.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0))).next(()=>s.delete(IDBKeyRange.bound([e.indexId],[e.indexId+1],!1,!0)))}deleteAllFieldIndexes(t){let e=Qp(t),n=wh(t),r=Ch(t);return e.deleteAll().next(()=>n.deleteAll()).next(()=>r.deleteAll())}createTargetIndexes(t,e){return q.forEach(this.getSubTargets(e),n=>this.getIndexType(t,n).next(r=>{if(r===0||r===1){let o=new Ly(n).buildTargetIndex();if(o!=null)return this.addFieldIndex(t,o)}}))}getDocumentsMatchingTarget(t,e){let n=wh(t),r=!0,s=new Map;return q.forEach(this.getSubTargets(e),o=>this.getFieldIndex(t,o).next(a=>{r&&(r=!!a),s.set(o,a)})).next(()=>{if(r){let o=Je(),a=[];return q.forEach(s,(l,c)=>{oe(K5,`Using index ${aoe(l)} to execute ${yd(e)}`);let d=Oae(c,l),u=Pae(c,l),h=Rae(c,l),m=Fae(c,l),_=this.encodeBound(l,c,h),b=this.encodeBound(l,c,m),v=this.encodeValues(l,c,u),I=this.generateIndexRanges(l.indexId,d,_,h.inclusive,b,m.inclusive,v);return q.forEach(I,A=>n.loadFirst(A,e.limit).next(F=>{F.forEach(M=>{let L=pe.fromSegments(M.documentKey);o.has(L)||(o=o.add(L),a.push(L))})}))}).next(()=>a)}else return q.resolve(null)})}getSubTargets(t){let e=this.targetToDnfSubTargets.get(t);return e||(t.filters.length===0?e=[t]:e=Qce(zt.create(t.filters,"and")).map(r=>LI(t.path,t.collectionGroup,t.orderBy,r.getFilters(),t.limit,t.startAt,t.endAt)),this.targetToDnfSubTargets.set(t,e),e)}generateIndexRanges(t,e,n,r,s,o,a){let l=(e!=null?e.length:1)*Math.max(n.length,s.length),c=l/(e!=null?e.length:1),d=[];for(let u=0;u<l;++u){let h=e?this.encodeSingleElement(e[u/c]):hy,m=this.generateLowerBound(t,h,n[u%c],r),_=this.generateUpperBound(t,h,s[u%c],o),b=a.map(v=>this.generateLowerBound(t,h,v,!0));d.push(...this.createRange(m,_,b))}return d}generateLowerBound(t,e,n,r){let s=new dd(t,pe.empty(),e,n);return r?s:s.successor()}generateUpperBound(t,e,n,r){let s=new dd(t,pe.empty(),e,n);return r?s.successor():s}getFieldIndex(t,e){let n=new Ly(e),r=e.collectionGroup!=null?e.collectionGroup:e.path.lastSegment();return this.getFieldIndexes(t,r).next(s=>{let o=null;for(let a of s)n.servedByIndex(a)&&(!o||a.fields.length>o.fields.length)&&(o=a);return o})}getIndexType(t,e){let n=2,r=this.getSubTargets(e);return q.forEach(r,s=>this.getFieldIndex(t,s).next(o=>{o?n!==0&&o.fields.length<Nae(s)&&(n=1):n=0})).next(()=>Lae(e)&&r.length>1&&n===2?1:n)}encodeDirectionalElements(t,e){let n=new cd;for(let r of gd(t)){let s=e.data.field(r.fieldPath);if(s==null)return null;let o=n.forKind(r.kind);da.INSTANCE.writeIndexValue(s,o)}return n.encodedBytes()}encodeSingleElement(t){let e=new cd;return da.INSTANCE.writeIndexValue(t,e.forKind(0)),e.encodedBytes()}encodeDirectionalKey(t,e){let n=new cd;return da.INSTANCE.writeIndexValue(bd(this.databaseId,e),n.forKind(ooe(t))),n.encodedBytes()}encodeValues(t,e,n){if(n===null)return[];let r=[];r.push(new cd);let s=0;for(let o of gd(t)){let a=n[s++];for(let l of r)if(this.isInFilter(e,o.fieldPath)&&mg(a))r=this.expandIndexValues(r,o,a);else{let c=l.forKind(o.kind);da.INSTANCE.writeIndexValue(a,c)}}return this.getEncodedBytes(r)}encodeBound(t,e,n){return this.encodeValues(t,e,n.position)}getEncodedBytes(t){let e=[];for(let n=0;n<t.length;++n)e[n]=t[n].encodedBytes();return e}expandIndexValues(t,e,n){let r=[...t],s=[];for(let o of n.arrayValue.values||[])for(let a of r){let l=new cd;l.seed(a.encodedBytes()),da.INSTANCE.writeIndexValue(o,l.forKind(e.kind)),s.push(l)}return s}isInFilter(t,e){return!!t.filters.find(n=>n instanceof _t&&n.field.isEqual(e)&&(n.op==="in"||n.op==="not-in"))}getFieldIndexes(t,e){let n=Qp(t),r=Ch(t);return(e?n.loadAll(wI,IDBKeyRange.bound(e,e)):n.loadAll()).next(s=>{let o=[];return q.forEach(s,a=>r.get([a.indexId,this.uid]).next(l=>{o.push(Mce(a,l))})).next(()=>o)})}getNextCollectionGroupToUpdate(t){return this.getFieldIndexes(t).next(e=>e.length===0?null:(e.sort((n,r)=>{let s=n.indexState.sequenceNumber-r.indexState.sequenceNumber;return s!==0?s:Ye(n.collectionGroup,r.collectionGroup)}),e[0].collectionGroup))}updateCollectionGroup(t,e,n){let r=Qp(t),s=Ch(t);return this.getNextSequenceNumber(t).next(o=>r.loadAll(wI,IDBKeyRange.bound(e,e)).next(a=>q.forEach(a,l=>s.put(N5(l.indexId,this.uid,o,n)))))}updateIndexEntries(t,e){let n=new Map;return q.forEach(e,(r,s)=>{let o=n.get(r.collectionGroup);return(o?q.resolve(o):this.getFieldIndexes(t,r.collectionGroup)).next(l=>(n.set(r.collectionGroup,l),q.forEach(l,c=>this.getExistingIndexEntries(t,r,c).next(d=>{let u=this.computeIndexEntries(s,c);return d.isEqual(u)?q.resolve():this.updateEntries(t,s,c,d,u)}))))})}addIndexEntry(t,e,n,r){return wh(t).put({indexId:r.indexId,uid:this.uid,arrayValue:r.arrayValue,directionalValue:r.directionalValue,orderedDocumentKey:this.encodeDirectionalKey(n,e.key),documentKey:e.key.path.toArray()})}deleteIndexEntry(t,e,n,r){return wh(t).delete([r.indexId,this.uid,r.arrayValue,r.directionalValue,this.encodeDirectionalKey(n,e.key),e.key.path.toArray()])}getExistingIndexEntries(t,e,n){let r=wh(t),s=new qt(xl);return r.iterate({index:Bz,range:IDBKeyRange.only([n.indexId,this.uid,this.encodeDirectionalKey(n,e)])},(o,a)=>{s=s.add(new dd(n.indexId,e,a.arrayValue,a.directionalValue))}).next(()=>s)}computeIndexEntries(t,e){let n=new qt(xl),r=this.encodeDirectionalElements(e,t);if(r==null)return n;let s=uM(e);if(s!=null){let o=t.data.field(s.fieldPath);if(mg(o))for(let a of o.arrayValue.values||[])n=n.add(new dd(e.indexId,t.key,this.encodeSingleElement(a),r))}else n=n.add(new dd(e.indexId,t.key,hy,r));return n}updateEntries(t,e,n,r,s){oe(K5,"Updating index entries for document '%s'",e.key);let o=[];return Goe(r,s,xl,a=>{o.push(this.addIndexEntry(t,e,n,a))},a=>{o.push(this.deleteIndexEntry(t,e,n,a))}),q.waitFor(o)}getNextSequenceNumber(t){let e=1;return Ch(t).iterate({index:Lz,reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,s,o)=>{o.done(),e=s.sequenceNumber+1}).next(()=>e)}createRange(t,e,n){n=n.sort((o,a)=>xl(o,a)).filter((o,a,l)=>!a||xl(o,l[a-1])!==0);let r=[];r.push(t);for(let o of n){let a=xl(o,t),l=xl(o,e);if(a===0)r[0]=t.successor();else if(a>0&&l<0)r.push(o),r.push(o.successor());else if(l>0)break}r.push(e);let s=[];for(let o=0;o<r.length;o+=2){if(this.isRangeMatchable(r[o],r[o+1]))return[];let a=[r[o].indexId,this.uid,r[o].arrayValue,r[o].directionalValue,hy,[]],l=[r[o+1].indexId,this.uid,r[o+1].arrayValue,r[o+1].directionalValue,hy,[]];s.push(IDBKeyRange.bound(a,l))}return s}isRangeMatchable(t,e){return xl(t,e)>0}getMinOffsetFromCollectionGroup(t,e){return this.getFieldIndexes(t,e).next(Q5)}getMinOffset(t,e){return q.mapArray(this.getSubTargets(e),n=>this.getFieldIndex(t,n).next(r=>r||Ce())).next(Q5)}};function Y5(i){return en(i,lg)}function wh(i){return en(i,bx)}function Qp(i){return en(i,pM)}function Ch(i){return en(i,_x)}function Q5(i){Ae(i.length!==0);let t=i[0].indexState.offset,e=t.largestBatchId;for(let n=1;n<i.length;n++){let r=i[n].indexState.offset;hM(r,t)<0&&(t=r),e<r.largestBatchId&&(e=r.largestBatchId)}return new as(t.readTime,t.documentKey,e)}function qj(i,t,e){let n=i.store(Fs),r=i.store(Jh),s=[],o=IDBKeyRange.only(e.batchId),a=0,l=n.iterate({range:o},(d,u,h)=>(a++,h.delete()));s.push(l.next(()=>{Ae(a===1)}));let c=[];for(let d of e.mutations){let u=Rz(t,d.key.path,e.batchId);s.push(r.delete(u)),c.push(d.key)}return q.waitFor(s).next(()=>c)}function Vy(i){if(!i)return 0;let t;if(i.document)t=i.document;else if(i.unknownDocument)t=i.unknownDocument;else if(i.noDocument)t=i.noDocument;else throw Ce();return JSON.stringify(t).length}var zy=class i{constructor(t,e,n,r){this.userId=t,this.serializer=e,this.indexManager=n,this.referenceDelegate=r,this.documentKeysByBatchId={}}static forUser(t,e,n,r){Ae(t.uid!=="");let s=t.isAuthenticated()?t.uid:"";return new i(s,e,n,r)}checkEmpty(t){let e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return wl(t).iterate({index:ud,range:n},(r,s,o)=>{e=!1,o.done()}).next(()=>e)}addMutationBatch(t,e,n,r){let s=Ih(t),o=wl(t);return o.add({}).next(a=>{Ae(typeof a=="number");let l=new gg(a,e,n,r),c=yce(this.serializer,this.userId,l),d=[],u=new qt((h,m)=>Ye(h.canonicalString(),m.canonicalString()));for(let h of r){let m=Rz(this.userId,h.key.path,a);u=u.add(h.key.path.popLast()),d.push(o.put(c)),d.push(s.put(m,poe))}return u.forEach(h=>{d.push(this.indexManager.addToCollectionParentIndex(t,h))}),t.addOnCommittedListener(()=>{this.documentKeysByBatchId[a]=l.keys()}),q.waitFor(d).next(()=>l)})}lookupMutationBatch(t,e){return wl(t).get(e).next(n=>n?(Ae(n.userId===this.userId),ld(this.serializer,n)):null)}lookupMutationKeys(t,e){return this.documentKeysByBatchId[e]?q.resolve(this.documentKeysByBatchId[e]):this.lookupMutationBatch(t,e).next(n=>{if(n){let r=n.keys();return this.documentKeysByBatchId[e]=r,r}else return null})}getNextMutationBatchAfterBatchId(t,e){let n=e+1,r=IDBKeyRange.lowerBound([this.userId,n]),s=null;return wl(t).iterate({index:ud,range:r},(o,a,l)=>{a.userId===this.userId&&(Ae(a.batchId>=n),s=ld(this.serializer,a)),l.done()}).next(()=>s)}getHighestUnacknowledgedBatchId(t){let e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=Tl;return wl(t).iterate({index:ud,range:e,reverse:!0},(r,s,o)=>{n=s.batchId,o.done()}).next(()=>n)}getAllMutationBatches(t){let e=IDBKeyRange.bound([this.userId,Tl],[this.userId,Number.POSITIVE_INFINITY]);return wl(t).loadAll(ud,e).next(n=>n.map(r=>ld(this.serializer,r)))}getAllMutationBatchesAffectingDocumentKey(t,e){let n=gy(this.userId,e.path),r=IDBKeyRange.lowerBound(n),s=[];return Ih(t).iterate({range:r},(o,a,l)=>{let[c,d,u]=o,h=bo(d);if(c!==this.userId||!e.path.isEqual(h)){l.done();return}return wl(t).get(u).next(m=>{if(!m)throw Ce();Ae(m.userId===this.userId),s.push(ld(this.serializer,m))})}).next(()=>s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new qt(Ye),r=[];return e.forEach(s=>{let o=gy(this.userId,s.path),a=IDBKeyRange.lowerBound(o),l=Ih(t).iterate({range:a},(c,d,u)=>{let[h,m,_]=c,b=bo(m);if(h!==this.userId||!s.path.isEqual(b)){u.done();return}n=n.add(_)});r.push(l)}),q.waitFor(r).next(()=>this.lookupMutationBatches(t,n))}getAllMutationBatchesAffectingQuery(t,e){let n=e.path,r=n.length+1,s=gy(this.userId,n),o=IDBKeyRange.lowerBound(s),a=new qt(Ye);return Ih(t).iterate({range:o},(l,c,d)=>{let[u,h,m]=l,_=bo(h);if(u!==this.userId||!n.isPrefixOf(_)){d.done();return}_.length===r&&(a=a.add(m))}).next(()=>this.lookupMutationBatches(t,a))}lookupMutationBatches(t,e){let n=[],r=[];return e.forEach(s=>{r.push(wl(t).get(s).next(o=>{if(o===null)throw Ce();Ae(o.userId===this.userId),n.push(ld(this.serializer,o))}))}),q.waitFor(r).next(()=>n)}removeMutationBatch(t,e){return qj(t.simpleDbTransaction,this.userId,e).next(n=>(t.addOnCommittedListener(()=>{this.removeCachedMutationKeys(e.batchId)}),q.forEach(n,r=>this.referenceDelegate.markPotentiallyOrphaned(t,r))))}removeCachedMutationKeys(t){delete this.documentKeysByBatchId[t]}performConsistencyCheck(t){return this.checkEmpty(t).next(e=>{if(!e)return q.resolve();let n=IDBKeyRange.lowerBound(foe(this.userId)),r=[];return Ih(t).iterate({range:n},(s,o,a)=>{if(s[0]!==this.userId){a.done();return}else{let c=bo(s[1]);r.push(c)}}).next(()=>{Ae(r.length===0)})})}containsKey(t,e){return Wj(t,this.userId,e)}getMutationQueueMetadata(t){return Gj(t).get(this.userId).next(e=>e||{userId:this.userId,lastAcknowledgedBatchId:Tl,lastStreamToken:""})}};function Wj(i,t,e){let n=gy(t,e.path),r=n[1],s=IDBKeyRange.lowerBound(n),o=!1;return Ih(i).iterate({range:s,keysOnly:!0},(a,l,c)=>{let[d,u,h]=a;d===t&&u===r&&(o=!0),c.done()}).next(()=>o)}function ede(i,t){let e=!1;return Gj(i).iterateSerial(n=>Wj(i,n,t).next(r=>(r&&(e=!0),q.resolve(!r)))).next(()=>e)}function wl(i){return en(i,Fs)}function Ih(i){return en(i,Jh)}function Gj(i){return en(i,Og)}var eI=2,qh=class i{constructor(t){this.lastId=t}next(){return this.lastId+=eI,this.lastId}static forTargetCache(){return new i(2-eI)}static forSyncEngine(){return new i(1-eI)}};var nD=class{constructor(t,e){this.referenceDelegate=t,this.serializer=e}allocateTargetId(t){return this.retrieveMetadata(t).next(e=>{let n=new qh(e.highestTargetId);return e.highestTargetId=n.next(),this.saveMetadata(t,e).next(()=>e.highestTargetId)})}getLastRemoteSnapshotVersion(t){return this.retrieveMetadata(t).next(e=>Ne.fromTimestamp(new wi(e.lastRemoteSnapshotVersion.seconds,e.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(t){return this.retrieveMetadata(t).next(e=>e.highestListenSequenceNumber)}setTargetsMetadata(t,e,n){return this.retrieveMetadata(t).next(r=>(r.highestListenSequenceNumber=e,n&&(r.lastRemoteSnapshotVersion=n.toTimestamp()),e>r.highestListenSequenceNumber&&(r.highestListenSequenceNumber=e),this.saveMetadata(t,r)))}addTargetData(t,e){return this.saveTargetData(t,e).next(()=>this.retrieveMetadata(t).next(n=>(n.targetCount+=1,this.updateMetadataFromTargetData(e,n),this.saveMetadata(t,n))))}updateTargetData(t,e){return this.saveTargetData(t,e)}removeTargetData(t,e){return this.removeMatchingKeysForTargetId(t,e.targetId).next(()=>Sh(t).delete(e.targetId)).next(()=>this.retrieveMetadata(t)).next(n=>(Ae(n.targetCount>0),n.targetCount-=1,this.saveMetadata(t,n)))}removeTargets(t,e,n){let r=0,s=[];return Sh(t).iterate((o,a)=>{let l=eg(a);l.sequenceNumber<=e&&n.get(l.targetId)===null&&(r++,s.push(this.removeTargetData(t,l)))}).next(()=>q.waitFor(s)).next(()=>r)}forEachTarget(t,e){return Sh(t).iterate((n,r)=>{let s=eg(r);e(s)})}retrieveMetadata(t){return X5(t).get(Ey).next(e=>(Ae(e!==null),e))}saveMetadata(t,e){return X5(t).put(Ey,e)}saveTargetData(t,e){return Sh(t).put(zj(this.serializer,e))}updateMetadataFromTargetData(t,e){let n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n}getTargetCount(t){return this.retrieveMetadata(t).next(e=>e.targetCount)}getTargetData(t,e){let n=yd(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),s=null;return Sh(t).iterate({range:r,index:Nz},(o,a,l)=>{let c=eg(a);Fg(e,c.target)&&(s=c,l.done())}).next(()=>s)}addMatchingKeys(t,e,n){let r=[],s=Sl(t);return e.forEach(o=>{let a=$n(o.path);r.push(s.put({targetId:n,path:a})),r.push(this.referenceDelegate.addReference(t,n,o))}),q.waitFor(r)}removeMatchingKeys(t,e,n){let r=Sl(t);return q.forEach(e,s=>{let o=$n(s.path);return q.waitFor([r.delete([n,o]),this.referenceDelegate.removeReference(t,n,s)])})}removeMatchingKeysForTargetId(t,e){let n=Sl(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)}getMatchingKeysForTargetId(t,e){let n=IDBKeyRange.bound([e],[e+1],!1,!0),r=Sl(t),s=Je();return r.iterate({range:n,keysOnly:!0},(o,a,l)=>{let c=bo(o[1]),d=new pe(c);s=s.add(d)}).next(()=>s)}containsKey(t,e){let n=$n(e.path),r=IDBKeyRange.bound([n],[kz(n)],!1,!0),s=0;return Sl(t).iterate({index:fM,keysOnly:!0,range:r},([o,a],l,c)=>{o!==0&&(s++,c.done())}).next(()=>s>0)}getTargetDataForTarget(t,e){return Sh(t).get(e).next(n=>n?eg(n):null)}};function Sh(i){return en(i,em)}function X5(i){return en(i,Dd)}function Sl(i){return en(i,tm)}var Z5={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Bg=-1,$j=40*1024*1024,os=class i{constructor(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}static withCacheSize(t){return new i(t,i.DEFAULT_COLLECTION_PERCENTILE,i.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}};os.DEFAULT_COLLECTION_PERCENTILE=10;os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3;os.DEFAULT=new os($j,os.DEFAULT_COLLECTION_PERCENTILE,os.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT);os.DISABLED=new os(Bg,0,0);var J5="LruGarbageCollector",ez=1*1024*1024,tde=1*60*1e3,ide=5*60*1e3;function tz([i,t],[e,n]){let r=Ye(i,e);return r===0?Ye(t,n):r}var rD=class{constructor(t){this.maxElements=t,this.buffer=new qt(tz),this.previousIndex=0}nextIndex(){return++this.previousIndex}addElement(t){let e=[t,this.nextIndex()];if(this.buffer.size<this.maxElements)this.buffer=this.buffer.add(e);else{let n=this.buffer.last();tz(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}}get maxValue(){return this.buffer.last()[0]}},sD=class{constructor(t,e,n){this.garbageCollector=t,this.asyncQueue=e,this.localStore=n,this.gcTask=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==Bg&&this.scheduleGC(tde)}stop(){this.gcTask&&(this.gcTask.cancel(),this.gcTask=null)}get started(){return this.gcTask!==null}scheduleGC(t){oe(J5,`Garbage collection scheduled in ${t}ms`),this.gcTask=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,()=>N(this,null,function*(){this.gcTask=null;try{yield this.localStore.collectGarbage(this.garbageCollector)}catch(e){zl(e)?oe(J5,"Ignoring IndexedDB error during garbage collection: ",e):yield Vl(e)}yield this.scheduleGC(ide)}))}},oD=class{constructor(t,e){this.delegate=t,this.params=e}calculateTargetCount(t,e){return this.delegate.getSequenceNumberCount(t).next(n=>Math.floor(e/100*n))}nthSequenceNumber(t,e){if(e===0)return q.resolve(Or.INVALID);let n=new rD(e);return this.delegate.forEachTarget(t,r=>n.addElement(r.sequenceNumber)).next(()=>this.delegate.forEachOrphanedDocumentSequenceNumber(t,r=>n.addElement(r))).next(()=>n.maxValue)}removeTargets(t,e,n){return this.delegate.removeTargets(t,e,n)}removeOrphanedDocuments(t,e){return this.delegate.removeOrphanedDocuments(t,e)}collect(t,e){return this.params.cacheSizeCollectionThreshold===Bg?(oe("LruGarbageCollector","Garbage collection skipped; disabled"),q.resolve(Z5)):this.getCacheSize(t).next(n=>n<this.params.cacheSizeCollectionThreshold?(oe("LruGarbageCollector",`Garbage collection skipped; Cache size ${n} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Z5):this.runGarbageCollection(t,e))}getCacheSize(t){return this.delegate.getCacheSize(t)}runGarbageCollection(t,e){let n,r,s,o,a,l,c,d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(u=>(u>this.params.maximumSequenceNumbersToCollect?(oe("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${u}`),r=this.params.maximumSequenceNumbersToCollect):r=u,o=Date.now(),this.nthSequenceNumber(t,r))).next(u=>(n=u,a=Date.now(),this.removeTargets(t,n,e))).next(u=>(s=u,l=Date.now(),this.removeOrphanedDocuments(t,n))).next(u=>{if(c=Date.now(),kh()<=Yr.DEBUG){let h=`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${r} in ${a-o}ms
	Removed ${s} targets in ${l-a}ms
	Removed ${u} documents in ${c-l}ms
Total Duration: ${c-d}ms`;oe("LruGarbageCollector",h)}return q.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:u})})}};function nde(i,t){return new oD(i,t)}var aD=class{constructor(t,e){this.db=t,this.garbageCollector=nde(this,e)}getSequenceNumberCount(t){let e=this.orphanedDocumentCount(t);return this.db.getTargetCache().getTargetCount(t).next(r=>e.next(s=>r+s))}orphanedDocumentCount(t){let e=0;return this.forEachOrphanedDocumentSequenceNumber(t,n=>{e++}).next(()=>e)}forEachTarget(t,e){return this.db.getTargetCache().forEachTarget(t,e)}forEachOrphanedDocumentSequenceNumber(t,e){return this.forEachOrphanedDocument(t,(n,r)=>e(r))}addReference(t,e,n){return my(t,n)}removeReference(t,e,n){return my(t,n)}removeTargets(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)}markPotentiallyOrphaned(t,e){return my(t,e)}isPinned(t,e){return ede(t,e)}removeOrphanedDocuments(t,e){let r=this.db.getRemoteDocumentCache().newChangeBuffer(),s=[],o=0;return this.forEachOrphanedDocument(t,(l,c)=>{if(c<=e){let d=this.isPinned(t,l).next(u=>{if(!u)return o++,r.getEntry(t,l).next(()=>(r.removeEntry(l,Ne.min()),Sl(t).delete(rde(l))))});s.push(d)}}).next(()=>q.waitFor(s)).next(()=>r.apply(t)).next(()=>o)}removeTarget(t,e){let n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)}updateLimboDocument(t,e){return my(t,e)}forEachOrphanedDocument(t,e){let n=Sl(t),r=Or.INVALID,s;return n.iterate({index:fM},([o,a],{path:l,sequenceNumber:c})=>{o===0?(r!==Or.INVALID&&e(new pe(bo(s)),r),r=c,s=l):r=Or.INVALID}).next(()=>{r!==Or.INVALID&&e(new pe(bo(s)),r)})}getCacheSize(t){return this.db.getRemoteDocumentCache().getSize(t)}};function rde(i){return[0,$n(i.path)]}function sde(i,t){return{targetId:0,path:$n(i.path),sequenceNumber:t}}function my(i,t){return Sl(i).put(sde(t,i.currentSequenceNumber))}var jy=class{constructor(){this.changes=new Co(t=>t.toString(),(t,e)=>t.isEqual(e)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,e){this.assertNotApplied(),this.changes.set(t,$i.newInvalidDocument(t).setReadTime(e))}getEntry(t,e){this.assertNotApplied();let n=this.changes.get(e);return n!==void 0?q.resolve(n):this.getFromCache(t,e)}getEntries(t,e){return this.getAllFromCache(t,e)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}};var lD=class{constructor(t){this.serializer=t}setIndexManager(t){this.indexManager=t}addEntry(t,e,n){return sd(t).put(n)}removeEntry(t,e,n){return sd(t).delete(ode(e,n))}updateMetadata(t,e){return this.getMetadata(t).next(n=>(n.byteSize+=e,this.setMetadata(t,n)))}getEntry(t,e){let n=$i.newInvalidDocument(e);return sd(t).iterate({index:_y,range:IDBKeyRange.only(Xp(e))},(r,s)=>{n=this.maybeDecodeDocument(e,s)}).next(()=>n)}getSizedEntry(t,e){let n={size:0,document:$i.newInvalidDocument(e)};return sd(t).iterate({index:_y,range:IDBKeyRange.only(Xp(e))},(r,s)=>{n={document:this.maybeDecodeDocument(e,s),size:Vy(s)}}).next(()=>n)}getEntries(t,e){let n=hr();return this.forEachDbEntry(t,e,(r,s)=>{let o=this.maybeDecodeDocument(r,s);n=n.insert(r,o)}).next(()=>n)}getSizedEntries(t,e){let n=hr(),r=new si(pe.comparator);return this.forEachDbEntry(t,e,(s,o)=>{let a=this.maybeDecodeDocument(s,o);n=n.insert(s,a),r=r.insert(s,Vy(o))}).next(()=>({documents:n,sizeMap:r}))}forEachDbEntry(t,e,n){if(e.isEmpty())return q.resolve();let r=new qt(rz);e.forEach(l=>r=r.add(l));let s=IDBKeyRange.bound(Xp(r.first()),Xp(r.last())),o=r.getIterator(),a=o.getNext();return sd(t).iterate({index:_y,range:s},(l,c,d)=>{let u=pe.fromSegments([...c.prefixPath,c.collectionGroup,c.documentId]);for(;a&&rz(a,u)<0;)n(a,null),a=o.getNext();a&&a.isEqual(u)&&(n(a,c),a=o.hasNext()?o.getNext():null),a?d.skip(Xp(a)):d.done()}).next(()=>{for(;a;)n(a,null),a=o.hasNext()?o.getNext():null})}getDocumentsMatchingQuery(t,e,n,r,s){let o=e.path,a=[o.popLast().toArray(),o.lastSegment(),Sx(n.readTime),n.documentKey.path.isEmpty()?"":n.documentKey.path.lastSegment()],l=[o.popLast().toArray(),o.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return sd(t).loadAll(IDBKeyRange.bound(a,l,!0)).next(c=>{s?.incrementDocumentReadCount(c.length);let d=hr();for(let u of c){let h=this.maybeDecodeDocument(pe.fromSegments(u.prefixPath.concat(u.collectionGroup,u.documentId)),u);h.isFoundDocument()&&(Lg(e,h)||r.has(h.key))&&(d=d.insert(h.key,h))}return d})}getAllFromCollectionGroup(t,e,n,r){let s=hr(),o=nz(e,n),a=nz(e,as.max());return sd(t).iterate({index:Fz,range:IDBKeyRange.bound(o,a,!0)},(l,c,d)=>{let u=this.maybeDecodeDocument(pe.fromSegments(c.prefixPath.concat(c.collectionGroup,c.documentId)),c);s=s.insert(u.key,u),s.size===r&&d.done()}).next(()=>s)}newChangeBuffer(t){return new cD(this,!!t&&t.trackRemovals)}getSize(t){return this.getMetadata(t).next(e=>e.byteSize)}getMetadata(t){return iz(t).get(xI).next(e=>(Ae(!!e),e))}setMetadata(t,e){return iz(t).put(xI,e)}maybeDecodeDocument(t,e){if(e){let n=bce(this.serializer,e);if(!(n.isNoDocument()&&n.version.isEqual(Ne.min())))return n}return $i.newInvalidDocument(t)}};function Kj(i){return new lD(i)}var cD=class extends jy{constructor(t,e){super(),this.documentCache=t,this.trackRemovals=e,this.documentStates=new Co(n=>n.toString(),(n,r)=>n.isEqual(r))}applyChanges(t){let e=[],n=0,r=new qt((s,o)=>Ye(s.canonicalString(),o.canonicalString()));return this.changes.forEach((s,o)=>{let a=this.documentStates.get(s);if(e.push(this.documentCache.removeEntry(t,s,a.readTime)),o.isValidDocument()){let l=F5(this.documentCache.serializer,o);r=r.add(s.path.popLast());let c=Vy(l);n+=c-a.size,e.push(this.documentCache.addEntry(t,s,l))}else if(n-=a.size,this.trackRemovals){let l=F5(this.documentCache.serializer,o.convertToNoDocument(Ne.min()));e.push(this.documentCache.addEntry(t,s,l))}}),r.forEach(s=>{e.push(this.documentCache.indexManager.addToCollectionParentIndex(t,s))}),e.push(this.documentCache.updateMetadata(t,n)),q.waitFor(e)}getFromCache(t,e){return this.documentCache.getSizedEntry(t,e).next(n=>(this.documentStates.set(e,{size:n.size,readTime:n.document.readTime}),n.document))}getAllFromCache(t,e){return this.documentCache.getSizedEntries(t,e).next(({documents:n,sizeMap:r})=>(r.forEach((s,o)=>{this.documentStates.set(s,{size:o,readTime:n.get(s).readTime})}),n))}};function iz(i){return en(i,Pg)}function sd(i){return en(i,fx)}function Xp(i){let t=i.path.toArray();return[t.slice(0,t.length-2),t[t.length-2],t[t.length-1]]}function ode(i,t){let e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],Sx(t),e[e.length-1]]}function nz(i,t){let e=t.documentKey.path.toArray();return[i,Sx(t.readTime),e.slice(0,e.length-2),e.length>0?e[e.length-1]:""]}function rz(i,t){let e=i.path.toArray(),n=t.path.toArray(),r=0;for(let s=0;s<e.length-2&&s<n.length-2;++s)if(r=Ye(e[s],n[s]),r)return r;return r=Ye(e.length,n.length),r||(r=Ye(e[e.length-2],n[n.length-2]),r)?r:Ye(e[e.length-1],n[n.length-1])}var ade=17;var dD=class{constructor(t,e){this.overlayedDocument=t,this.mutatedFields=e}};var Uy=class{constructor(t,e,n,r){this.remoteDocumentCache=t,this.mutationQueue=e,this.documentOverlayCache=n,this.indexManager=r}getDocument(t,e){let n=null;return this.documentOverlayCache.getOverlay(t,e).next(r=>(n=r,this.remoteDocumentCache.getEntry(t,e))).next(r=>(n!==null&&rg(n.mutation,r,Pr.empty(),wi.now()),r))}getDocuments(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.getLocalViewOfDocuments(t,n,Je()).next(()=>n))}getLocalViewOfDocuments(t,e,n=Je()){let r=vo();return this.populateOverlays(t,r,e).next(()=>this.computeViews(t,e,r,n).next(s=>{let o=Jp();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(t,e){let n=vo();return this.populateOverlays(t,n,e).next(()=>this.computeViews(t,e,n,Je()))}populateOverlays(t,e,n){let r=[];return n.forEach(s=>{e.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(t,r).next(s=>{s.forEach((o,a)=>{e.set(o,a)})})}computeViews(t,e,n,r){let s=hr(),o=fg(),a=Zae();return e.forEach((l,c)=>{let d=n.get(c.key);r.has(c.key)&&(d===void 0||d.mutation instanceof Vs)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),rg(d.mutation,c,d.mutation.getFieldMask(),wi.now())):o.set(c.key,Pr.empty())}),this.recalculateAndSaveOverlays(t,s).next(l=>(l.forEach((c,d)=>o.set(c,d)),e.forEach((c,d)=>{var u;return a.set(c,new dD(d,(u=o.get(c))!==null&&u!==void 0?u:null))}),a))}recalculateAndSaveOverlays(t,e){let n=fg(),r=new si((o,a)=>o-a),s=Je();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,e).next(o=>{for(let a of o)a.keys().forEach(l=>{let c=e.get(l);if(c===null)return;let d=n.get(l)||Pr.empty();d=a.applyToLocalView(c,d),n.set(l,d);let u=(r.get(a.batchId)||Je()).add(l);r=r.insert(a.batchId,u)})}).next(()=>{let o=[],a=r.getReverseIterator();for(;a.hasNext();){let l=a.getNext(),c=l.key,d=l.value,u=pj();d.forEach(h=>{if(!s.has(h)){let m=wj(e.get(h),n.get(h));m!==null&&u.set(h,m),s=s.add(h)}}),o.push(this.documentOverlayCache.saveOverlays(t,c,u))}return q.waitFor(o)}).next(()=>n)}recalculateAndSaveOverlaysForDocumentKeys(t,e){return this.remoteDocumentCache.getEntries(t,e).next(n=>this.recalculateAndSaveOverlays(t,n))}getDocumentsMatchingQuery(t,e,n,r){return jae(e)?this.getDocumentsMatchingDocumentQuery(t,e.path):CM(e)?this.getDocumentsMatchingCollectionGroupQuery(t,e,n,r):this.getDocumentsMatchingCollectionQuery(t,e,n,r)}getNextDocuments(t,e,n,r){return this.remoteDocumentCache.getAllFromCollectionGroup(t,e,n,r).next(s=>{let o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,e,n.largestBatchId,r-s.size):q.resolve(vo()),a=Rh,l=s;return o.next(c=>q.forEach(c,(d,u)=>(a<u.largestBatchId&&(a=u.largestBatchId),s.get(d)?q.resolve():this.remoteDocumentCache.getEntry(t,d).next(h=>{l=l.insert(d,h)}))).next(()=>this.populateOverlays(t,c,s)).next(()=>this.computeViews(t,l,c,Je())).next(d=>({batchId:a,changes:fj(d)})))})}getDocumentsMatchingDocumentQuery(t,e){return this.getDocument(t,new pe(e)).next(n=>{let r=Jp();return n.isFoundDocument()&&(r=r.insert(n.key,n)),r})}getDocumentsMatchingCollectionGroupQuery(t,e,n,r){let s=e.collectionGroup,o=Jp();return this.indexManager.getCollectionParents(t,s).next(a=>q.forEach(a,l=>{let c=Bae(e,l.child(s));return this.getDocumentsMatchingCollectionQuery(t,c,n,r).next(d=>{d.forEach((u,h)=>{o=o.insert(u,h)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(t,e,n,r){let s;return this.documentOverlayCache.getOverlaysForCollection(t,e.path,n.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(t,e,n,s,r))).next(o=>{s.forEach((l,c)=>{let d=c.getKey();o.get(d)===null&&(o=o.insert(d,$i.newInvalidDocument(d)))});let a=Jp();return o.forEach((l,c)=>{let d=s.get(l);d!==void 0&&rg(d.mutation,c,Pr.empty(),wi.now()),Lg(e,c)&&(a=a.insert(l,c))}),a})}};var uD=class{constructor(t){this.serializer=t,this.bundles=new Map,this.namedQueries=new Map}getBundleMetadata(t,e){return q.resolve(this.bundles.get(e))}saveBundleMetadata(t,e){return this.bundles.set(e.id,Tce(e)),q.resolve()}getNamedQuery(t,e){return q.resolve(this.namedQueries.get(e))}saveNamedQuery(t,e){return this.namedQueries.set(e.name,Ece(e)),q.resolve()}};var hD=class{constructor(){this.overlays=new si(pe.comparator),this.overlayByBatchId=new Map}getOverlay(t,e){return q.resolve(this.overlays.get(e))}getOverlays(t,e){let n=vo();return q.forEach(e,r=>this.getOverlay(t,r).next(s=>{s!==null&&n.set(r,s)})).next(()=>n)}saveOverlays(t,e,n){return n.forEach((r,s)=>{this.saveOverlay(t,e,s)}),q.resolve()}removeOverlaysForBatchId(t,e,n){let r=this.overlayByBatchId.get(n);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.overlayByBatchId.delete(n)),q.resolve()}getOverlaysForCollection(t,e,n){let r=vo(),s=e.length+1,o=new pe(e.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){let c=a.getNext().value,d=c.getKey();if(!e.isPrefixOf(d.path))break;d.path.length===s&&c.largestBatchId>n&&r.set(c.getKey(),c)}return q.resolve(r)}getOverlaysForCollectionGroup(t,e,n,r){let s=new si((c,d)=>c-d),o=this.overlays.getIterator();for(;o.hasNext();){let d=o.getNext().value;if(d.getKey().getCollectionGroup()===e&&d.largestBatchId>n){let h=s.get(d.largestBatchId);h===null&&(h=vo(),s=s.insert(d.largestBatchId,h)),h.set(d.getKey(),d)}}let a=vo(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((u,h)=>a.set(u,h)),!(a.size()>=r)););return q.resolve(a)}saveOverlay(t,e,n){let r=this.overlays.get(n.key);if(r!==null){let o=this.overlayByBatchId.get(r.largestBatchId).delete(n.key);this.overlayByBatchId.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(n.key,new _g(e,n));let s=this.overlayByBatchId.get(e);s===void 0&&(s=Je(),this.overlayByBatchId.set(e,s)),this.overlayByBatchId.set(e,s.add(n.key))}};var mD=class{constructor(){this.sessionToken=zi.EMPTY_BYTE_STRING}getSessionToken(t){return q.resolve(this.sessionToken)}setSessionToken(t,e){return this.sessionToken=e,q.resolve()}};var Cg=class{constructor(){this.refsByKey=new qt(Wi.compareByKey),this.refsByTarget=new qt(Wi.compareByTargetId)}isEmpty(){return this.refsByKey.isEmpty()}addReference(t,e){let n=new Wi(t,e);this.refsByKey=this.refsByKey.add(n),this.refsByTarget=this.refsByTarget.add(n)}addReferences(t,e){t.forEach(n=>this.addReference(n,e))}removeReference(t,e){this.removeRef(new Wi(t,e))}removeReferences(t,e){t.forEach(n=>this.removeReference(n,e))}removeReferencesForId(t){let e=new pe(new xt([])),n=new Wi(e,t),r=new Wi(e,t+1),s=[];return this.refsByTarget.forEachInRange([n,r],o=>{this.removeRef(o),s.push(o.key)}),s}removeAllReferences(){this.refsByKey.forEach(t=>this.removeRef(t))}removeRef(t){this.refsByKey=this.refsByKey.delete(t),this.refsByTarget=this.refsByTarget.delete(t)}referencesForId(t){let e=new pe(new xt([])),n=new Wi(e,t),r=new Wi(e,t+1),s=Je();return this.refsByTarget.forEachInRange([n,r],o=>{s=s.add(o.key)}),s}containsKey(t){let e=new Wi(t,0),n=this.refsByKey.firstAfterOrEqual(e);return n!==null&&t.isEqual(n.key)}},Wi=class{constructor(t,e){this.key=t,this.targetOrBatchId=e}static compareByKey(t,e){return pe.comparator(t.key,e.key)||Ye(t.targetOrBatchId,e.targetOrBatchId)}static compareByTargetId(t,e){return Ye(t.targetOrBatchId,e.targetOrBatchId)||pe.comparator(t.key,e.key)}};var fD=class{constructor(t,e){this.indexManager=t,this.referenceDelegate=e,this.mutationQueue=[],this.nextBatchId=1,this.batchesByDocumentKey=new qt(Wi.compareByKey)}checkEmpty(t){return q.resolve(this.mutationQueue.length===0)}addMutationBatch(t,e,n,r){let s=this.nextBatchId;this.nextBatchId++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];let o=new gg(s,e,n,r);this.mutationQueue.push(o);for(let a of r)this.batchesByDocumentKey=this.batchesByDocumentKey.add(new Wi(a.key,s)),this.indexManager.addToCollectionParentIndex(t,a.key.path.popLast());return q.resolve(o)}lookupMutationBatch(t,e){return q.resolve(this.findMutationBatch(e))}getNextMutationBatchAfterBatchId(t,e){let n=e+1,r=this.indexOfBatchId(n),s=r<0?0:r;return q.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return q.resolve(this.mutationQueue.length===0?Tl:this.nextBatchId-1)}getAllMutationBatches(t){return q.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,e){let n=new Wi(e,0),r=new Wi(e,Number.POSITIVE_INFINITY),s=[];return this.batchesByDocumentKey.forEachInRange([n,r],o=>{let a=this.findMutationBatch(o.targetOrBatchId);s.push(a)}),q.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(t,e){let n=new qt(Ye);return e.forEach(r=>{let s=new Wi(r,0),o=new Wi(r,Number.POSITIVE_INFINITY);this.batchesByDocumentKey.forEachInRange([s,o],a=>{n=n.add(a.targetOrBatchId)})}),q.resolve(this.findMutationBatches(n))}getAllMutationBatchesAffectingQuery(t,e){let n=e.path,r=n.length+1,s=n;pe.isDocumentKey(s)||(s=s.child(""));let o=new Wi(new pe(s),0),a=new qt(Ye);return this.batchesByDocumentKey.forEachWhile(l=>{let c=l.key.path;return n.isPrefixOf(c)?(c.length===r&&(a=a.add(l.targetOrBatchId)),!0):!1},o),q.resolve(this.findMutationBatches(a))}findMutationBatches(t){let e=[];return t.forEach(n=>{let r=this.findMutationBatch(n);r!==null&&e.push(r)}),e}removeMutationBatch(t,e){let n=this.indexOfExistingBatchId(e.batchId,"removed");Ae(n===0),this.mutationQueue.shift();let r=this.batchesByDocumentKey;return q.forEach(e.mutations,s=>{let o=new Wi(s.key,e.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.batchesByDocumentKey=r})}removeCachedMutationKeys(t){}containsKey(t,e){let n=new Wi(e,0),r=this.batchesByDocumentKey.firstAfterOrEqual(n);return q.resolve(e.isEqual(r&&r.key))}performConsistencyCheck(t){return this.mutationQueue.length,q.resolve()}indexOfExistingBatchId(t,e){return this.indexOfBatchId(t)}indexOfBatchId(t){if(this.mutationQueue.length===0)return 0;let e=this.mutationQueue[0].batchId;return t-e}findMutationBatch(t){let e=this.indexOfBatchId(t);return e<0||e>=this.mutationQueue.length?null:this.mutationQueue[e]}};function lde(){return new si(pe.comparator)}var pD=class{constructor(t){this.sizer=t,this.docs=lde(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,e){let n=e.key,r=this.docs.get(n),s=r?r.size:0,o=this.sizer(e);return this.docs=this.docs.insert(n,{document:e.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(t,n.path.popLast())}removeEntry(t){let e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)}getEntry(t,e){let n=this.docs.get(e);return q.resolve(n?n.document.mutableCopy():$i.newInvalidDocument(e))}getEntries(t,e){let n=hr();return e.forEach(r=>{let s=this.docs.get(r);n=n.insert(r,s?s.document.mutableCopy():$i.newInvalidDocument(r))}),q.resolve(n)}getDocumentsMatchingQuery(t,e,n,r){let s=hr(),o=e.path,a=new pe(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){let{key:c,value:{document:d}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||hM(Tz(d),n)<=0||!r.has(d.key)&&!Lg(e,d)||(s=s.insert(d.key,d.mutableCopy()))}return q.resolve(s)}getAllFromCollectionGroup(t,e,n,r){Ce()}forEachDocumentKey(t,e){return q.forEach(this.docs,n=>e(n))}newChangeBuffer(t){return new gD(this)}getSize(t){return q.resolve(this.size)}};function cde(i){return new pD(i)}var gD=class extends jy{constructor(t){super(),this.documentCache=t}applyChanges(t){let e=[];return this.changes.forEach((n,r)=>{r.isValidDocument()?e.push(this.documentCache.addEntry(t,r)):this.documentCache.removeEntry(n)}),q.waitFor(e)}getFromCache(t,e){return this.documentCache.getEntry(t,e)}getAllFromCache(t,e){return this.documentCache.getEntries(t,e)}};var _D=class{constructor(t){this.persistence=t,this.targets=new Co(e=>yd(e),Fg),this.lastRemoteSnapshotVersion=Ne.min(),this.highestTargetId=0,this.highestSequenceNumber=0,this.references=new Cg,this.targetCount=0,this.targetIdGenerator=qh.forTargetCache()}forEachTarget(t,e){return this.targets.forEach((n,r)=>e(r)),q.resolve()}getLastRemoteSnapshotVersion(t){return q.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return q.resolve(this.highestSequenceNumber)}allocateTargetId(t){return this.highestTargetId=this.targetIdGenerator.next(),q.resolve(this.highestTargetId)}setTargetsMetadata(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.highestSequenceNumber&&(this.highestSequenceNumber=e),q.resolve()}saveTargetData(t){this.targets.set(t.target,t);let e=t.targetId;e>this.highestTargetId&&(this.targetIdGenerator=new qh(e),this.highestTargetId=e),t.sequenceNumber>this.highestSequenceNumber&&(this.highestSequenceNumber=t.sequenceNumber)}addTargetData(t,e){return this.saveTargetData(e),this.targetCount+=1,q.resolve()}updateTargetData(t,e){return this.saveTargetData(e),q.resolve()}removeTargetData(t,e){return this.targets.delete(e.target),this.references.removeReferencesForId(e.targetId),this.targetCount-=1,q.resolve()}removeTargets(t,e,n){let r=0,s=[];return this.targets.forEach((o,a)=>{a.sequenceNumber<=e&&n.get(a.targetId)===null&&(this.targets.delete(o),s.push(this.removeMatchingKeysForTargetId(t,a.targetId)),r++)}),q.waitFor(s).next(()=>r)}getTargetCount(t){return q.resolve(this.targetCount)}getTargetData(t,e){let n=this.targets.get(e)||null;return q.resolve(n)}addMatchingKeys(t,e,n){return this.references.addReferences(e,n),q.resolve()}removeMatchingKeys(t,e,n){this.references.removeReferences(e,n);let r=this.persistence.referenceDelegate,s=[];return r&&e.forEach(o=>{s.push(r.markPotentiallyOrphaned(t,o))}),q.waitFor(s)}removeMatchingKeysForTargetId(t,e){return this.references.removeReferencesForId(e),q.resolve()}getMatchingKeysForTargetId(t,e){let n=this.references.referencesForId(e);return q.resolve(n)}containsKey(t,e){return q.resolve(this.references.containsKey(e))}};var dde="MemoryPersistence",Hy=class{constructor(t,e){this.mutationQueues={},this.overlays={},this.listenSequence=new Or(0),this._started=!1,this._started=!0,this.globalsCache=new mD,this.referenceDelegate=t(this),this.targetCache=new _D(this);let n=r=>this.referenceDelegate.documentSize(r);this.indexManager=new tD,this.remoteDocumentCache=cde(n),this.serializer=new Fy(e),this.bundleCache=new uD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this._started=!1,Promise.resolve()}get started(){return this._started}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let e=this.overlays[t.toKey()];return e||(e=new hD,this.overlays[t.toKey()]=e),e}getMutationQueue(t,e){let n=this.mutationQueues[t.toKey()];return n||(n=new fD(e,this.referenceDelegate),this.mutationQueues[t.toKey()]=n),n}getGlobalsCache(){return this.globalsCache}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.bundleCache}runTransaction(t,e,n){oe(dde,"Starting transaction:",t);let r=new bD(this.listenSequence.next());return this.referenceDelegate.onTransactionStarted(),n(r).next(s=>this.referenceDelegate.onTransactionCommitted(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}mutationQueuesContainKey(t,e){return q.or(Object.values(this.mutationQueues).map(n=>()=>n.containsKey(t,e)))}},bD=class extends Sy{constructor(t){super(),this.currentSequenceNumber=t}},qy=class i{constructor(t){this.persistence=t,this.localViewReferences=new Cg,this._orphanedDocuments=null}static factory(t){return new i(t)}get orphanedDocuments(){if(this._orphanedDocuments)return this._orphanedDocuments;throw Ce()}addReference(t,e,n){return this.localViewReferences.addReference(n,e),this.orphanedDocuments.delete(n.toString()),q.resolve()}removeReference(t,e,n){return this.localViewReferences.removeReference(n,e),this.orphanedDocuments.add(n.toString()),q.resolve()}markPotentiallyOrphaned(t,e){return this.orphanedDocuments.add(e.toString()),q.resolve()}removeTarget(t,e){this.localViewReferences.removeReferencesForId(e.targetId).forEach(s=>this.orphanedDocuments.add(s.toString()));let r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(s=>{s.forEach(o=>this.orphanedDocuments.add(o.toString()))}).next(()=>r.removeTargetData(t,e))}onTransactionStarted(){this._orphanedDocuments=new Set}onTransactionCommitted(t){let n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return q.forEach(this.orphanedDocuments,r=>{let s=pe.fromPath(r);return this.isReferenced(t,s).next(o=>{o||n.removeEntry(s,Ne.min())})}).next(()=>(this._orphanedDocuments=null,n.apply(t)))}updateLimboDocument(t,e){return this.isReferenced(t,e).next(n=>{n?this.orphanedDocuments.delete(e.toString()):this.orphanedDocuments.add(e.toString())})}documentSize(t){return 0}isReferenced(t,e){return q.or([()=>q.resolve(this.localViewReferences.containsKey(e)),()=>this.persistence.getTargetCache().containsKey(t,e),()=>this.persistence.mutationQueuesContainKey(t,e)])}};var vD=class{constructor(t){this.serializer=t}createOrUpgrade(t,e,n,r){let s=new ky("createOrUpgrade",e);n<1&&r>=1&&(hde(t),mde(t),sz(t),pde(t));let o=q.resolve();return n<3&&r>=3&&(n!==0&&(bde(t),sz(t)),o=o.next(()=>yde(s))),n<4&&r>=4&&(n!==0&&(o=o.next(()=>fde(t,s))),o=o.next(()=>{xde(t)})),n<5&&r>=5&&(o=o.next(()=>this.removeAcknowledgedMutations(s))),n<6&&r>=6&&(o=o.next(()=>(_de(t),this.addDocumentGlobal(s)))),n<7&&r>=7&&(o=o.next(()=>this.ensureSequenceNumbers(s))),n<8&&r>=8&&(o=o.next(()=>this.createCollectionParentIndex(t,s))),n<9&&r>=9&&(o=o.next(()=>{vde(t)})),n<10&&r>=10&&(o=o.next(()=>this.rewriteCanonicalIds(s))),n<11&&r>=11&&(o=o.next(()=>{wde(t),Cde(t)})),n<12&&r>=12&&(o=o.next(()=>{kde(t)})),n<13&&r>=13&&(o=o.next(()=>gde(t)).next(()=>this.rewriteRemoteDocumentCache(t,s)).next(()=>t.deleteObjectStore(ad))),n<14&&r>=14&&(o=o.next(()=>this.runOverlayMigration(t,s))),n<15&&r>=15&&(o=o.next(()=>Sde(t))),n<16&&r>=16&&(o=o.next(()=>{e.objectStore(_x).clear()}).next(()=>{e.objectStore(bx).clear()})),n<17&&r>=17&&(o=o.next(()=>{Ede(t)})),o}addDocumentGlobal(t){let e=0;return t.store(ad).iterate((n,r)=>{e+=Vy(r)}).next(()=>{let n={byteSize:e};return t.store(Pg).put(xI,n)})}removeAcknowledgedMutations(t){let e=t.store(Og),n=t.store(Fs);return e.loadAll().next(r=>q.forEach(r,s=>{let o=IDBKeyRange.bound([s.userId,Tl],[s.userId,s.lastAcknowledgedBatchId]);return n.loadAll(ud,o).next(a=>q.forEach(a,l=>{Ae(l.userId===s.userId);let c=ld(this.serializer,l);return qj(t,s.userId,c).next(()=>{})}))}))}ensureSequenceNumbers(t){let e=t.store(tm),n=t.store(ad);return t.store(Dd).get(Ey).next(s=>{let o=l=>e.put({targetId:0,path:$n(l),sequenceNumber:s.highestListenSequenceNumber}),a=[];return n.iterate((l,c)=>{let d=new xt(l),u=ude(d);a.push(e.get(u).next(h=>h?q.resolve():o(d)))}).next(()=>q.waitFor(a))})}createCollectionParentIndex(t,e){t.createObjectStore(lg,{keyPath:Coe});let n=e.store(lg),r=new wg,s=o=>{if(r.add(o)){let a=o.lastSegment(),l=o.popLast();return n.put({collectionId:a,parent:$n(l)})}};return e.store(ad).iterate({keysOnly:!0},(o,a)=>{let l=new xt(o);return s(l.popLast())}).next(()=>e.store(Jh).iterate({keysOnly:!0},([o,a,l],c)=>{let d=bo(a);return s(d.popLast())}))}rewriteCanonicalIds(t){let e=t.store(em);return e.iterate((n,r)=>{let s=eg(r),o=zj(this.serializer,s);return e.put(o)})}rewriteRemoteDocumentCache(t,e){let n=e.store(ad),r=[];return n.iterate((s,o)=>{let a=e.store(fx),l=Tde(o).path.toArray(),c={prefixPath:l.slice(0,l.length-2),collectionGroup:l[l.length-2],documentId:l[l.length-1],readTime:o.readTime||[0,0],unknownDocument:o.unknownDocument,noDocument:o.noDocument,document:o.document,hasCommittedMutations:!!o.hasCommittedMutations};r.push(a.put(c))}).next(()=>q.waitFor(r))}runOverlayMigration(t,e){let n=e.store(Fs),r=Kj(this.serializer),s=new Hy(qy.factory,this.serializer.remoteSerializer);return n.loadAll().next(o=>{let a=new Map;return o.forEach(l=>{var c;let d=(c=a.get(l.userId))!==null&&c!==void 0?c:Je();ld(this.serializer,l).keys().forEach(h=>d=d.add(h)),a.set(l.userId,d)}),q.forEach(a,(l,c)=>{let d=new Ki(c),u=Ny.forUser(this.serializer,d),h=s.getIndexManager(d),m=zy.forUser(d,this.serializer,h,s.referenceDelegate);return new Uy(r,m,u,h).recalculateAndSaveOverlaysForDocumentKeys(new cg(e,Or.INVALID),l).next()})})}};function ude(i){return[0,$n(i)]}function hde(i){i.createObjectStore(Ag)}function mde(i){i.createObjectStore(Og,{keyPath:moe}),i.createObjectStore(Fs,{keyPath:Oz,autoIncrement:!0}).createIndex(ud,Pz,{unique:!0}),i.createObjectStore(Jh)}function fde(i,t){return t.store(Fs).loadAll().next(n=>{i.deleteObjectStore(Fs),i.createObjectStore(Fs,{keyPath:Oz,autoIncrement:!0}).createIndex(ud,Pz,{unique:!0});let s=t.store(Fs),o=n.map(a=>s.put(a));return q.waitFor(o)})}function pde(i){i.createObjectStore(ad)}function gde(i){let t=i.createObjectStore(fx,{keyPath:goe});t.createIndex(_y,_oe),t.createIndex(Fz,boe)}function _de(i){i.createObjectStore(Pg)}function sz(i){i.createObjectStore(tm,{keyPath:xoe}).createIndex(fM,woe,{unique:!0}),i.createObjectStore(em,{keyPath:voe}).createIndex(Nz,yoe,{unique:!0}),i.createObjectStore(Dd)}function bde(i){i.deleteObjectStore(tm),i.deleteObjectStore(em),i.deleteObjectStore(Dd)}function vde(i){i.objectStoreNames.contains("remoteDocumentChanges")&&i.deleteObjectStore("remoteDocumentChanges")}function yde(i){let t=i.store(Dd),e={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Ne.min().toTimestamp(),targetCount:0};return t.put(Ey,e)}function xde(i){i.createObjectStore(Fh,{keyPath:Soe})}function wde(i){i.createObjectStore(px,{keyPath:koe})}function Cde(i){i.createObjectStore(gx,{keyPath:Eoe})}function Sde(i){i.createObjectStore(pM,{keyPath:Toe,autoIncrement:!0}).createIndex(wI,Ioe,{unique:!1}),i.createObjectStore(_x,{keyPath:Doe}).createIndex(Lz,Moe,{unique:!1}),i.createObjectStore(bx,{keyPath:Aoe}).createIndex(Bz,Ooe,{unique:!1})}function kde(i){let t=i.createObjectStore(vx,{keyPath:Poe});t.createIndex(CI,Roe,{unique:!1}),t.createIndex(Vz,Foe,{unique:!1})}function Ede(i){i.createObjectStore(gM,{keyPath:Noe})}function Tde(i){return i.document?new pe(xt.fromString(i.document.name).popFirst(5)):i.noDocument?pe.fromSegments(i.noDocument.path):i.unknownDocument?pe.fromSegments(i.unknownDocument.path):Ce()}var Cl="IndexedDbPersistence",tI=30*60*1e3,iI=5e3,Ide=4e3,nI="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Dde="This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.",Mde="firestore_zombie",Yj="main",yD=class i{constructor(t,e,n,r,s,o,a,l,c,d,u=ade){if(this.allowTabSynchronization=t,this.persistenceKey=e,this.clientId=n,this.queue=s,this.window=o,this.document=a,this.sequenceNumberSyncer=c,this.forceOwningTab=d,this.schemaVersion=u,this.listenSequence=null,this._started=!1,this.isPrimary=!1,this.networkEnabled=!0,this.windowUnloadHandler=null,this.inForeground=!1,this.documentVisibilityHandler=null,this.clientMetadataRefresher=null,this.lastGarbageCollectionTime=Number.NEGATIVE_INFINITY,this.primaryStateListener=h=>Promise.resolve(),!i.isAvailable())throw new ie(K.UNIMPLEMENTED,Dde);this.referenceDelegate=new aD(this,r),this.dbName=e+Yj,this.serializer=new Fy(l),this.simpleDb=new Dl(this.dbName,this.schemaVersion,new vD(this.serializer)),this.globalsCache=new QI,this.targetCache=new nD(this.referenceDelegate,this.serializer),this.remoteDocumentCache=Kj(this.serializer),this.bundleCache=new YI,this.window&&this.window.localStorage?this.webStorage=this.window.localStorage:(this.webStorage=null,d===!1&&xi(Cl,"LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.updateClientMetadataAndTryBecomePrimary().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new ie(K.FAILED_PRECONDITION,nI);return this.attachVisibilityHandler(),this.attachWindowUnloadHook(),this.scheduleClientMetadataAndPrimaryLeaseRefreshes(),this.runTransaction("getHighestListenSequenceNumber","readonly",t=>this.targetCache.getHighestSequenceNumber(t))}).then(t=>{this.listenSequence=new Or(t,this.sequenceNumberSyncer)}).then(()=>{this._started=!0}).catch(t=>(this.simpleDb&&this.simpleDb.close(),Promise.reject(t)))}setPrimaryStateListener(t){return this.primaryStateListener=e=>N(this,null,function*(){if(this.started)return t(e)}),t(this.isPrimary)}setDatabaseDeletedListener(t){this.simpleDb.setVersionChangeListener(e=>N(this,null,function*(){e.newVersion===null&&(yield t())}))}setNetworkEnabled(t){this.networkEnabled!==t&&(this.networkEnabled=t,this.queue.enqueueAndForget(()=>N(this,null,function*(){this.started&&(yield this.updateClientMetadataAndTryBecomePrimary())})))}updateClientMetadataAndTryBecomePrimary(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",t=>fy(t).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.verifyPrimaryLease(t).next(n=>{n||(this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)))})}).next(()=>this.canActAsPrimary(t)).next(n=>this.isPrimary&&!n?this.releasePrimaryLeaseIfHeld(t).next(()=>!1):n?this.acquireOrExtendPrimaryLease(t).next(()=>!0):!1)).catch(t=>{if(zl(t))return oe(Cl,"Failed to extend owner lease: ",t),this.isPrimary;if(!this.allowTabSynchronization)throw t;return oe(Cl,"Releasing owner lease after error during lease refresh",t),!1}).then(t=>{this.isPrimary!==t&&this.queue.enqueueRetryable(()=>this.primaryStateListener(t)),this.isPrimary=t})}verifyPrimaryLease(t){return Zp(t).get(bh).next(n=>q.resolve(this.isLocalClient(n)))}removeClientMetadata(t){return fy(t).delete(this.clientId)}maybeGarbageCollectMultiClientState(){return N(this,null,function*(){if(this.isPrimary&&!this.isWithinAge(this.lastGarbageCollectionTime,tI)){this.lastGarbageCollectionTime=Date.now();let t=yield this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",e=>{let n=en(e,Fh);return n.loadAll().next(r=>{let s=this.filterActiveClients(r,tI),o=r.filter(a=>s.indexOf(a)===-1);return q.forEach(o,a=>n.delete(a.clientId)).next(()=>o)})}).catch(()=>[]);if(this.webStorage)for(let e of t)this.webStorage.removeItem(this.zombiedClientLocalStorageKey(e.clientId))}})}scheduleClientMetadataAndPrimaryLeaseRefreshes(){this.clientMetadataRefresher=this.queue.enqueueAfterDelay("client_metadata_refresh",Ide,()=>this.updateClientMetadataAndTryBecomePrimary().then(()=>this.maybeGarbageCollectMultiClientState()).then(()=>this.scheduleClientMetadataAndPrimaryLeaseRefreshes()))}isLocalClient(t){return t?t.ownerId===this.clientId:!1}canActAsPrimary(t){return this.forceOwningTab?q.resolve(!0):Zp(t).get(bh).next(n=>{if(n!==null&&this.isWithinAge(n.leaseTimestampMs,iI)&&!this.isClientZombied(n.ownerId)){if(this.isLocalClient(n)&&this.networkEnabled)return!0;if(!this.isLocalClient(n)){if(!n.allowTabSynchronization)throw new ie(K.FAILED_PRECONDITION,nI);return!1}}return this.networkEnabled&&this.inForeground?!0:fy(t).loadAll().next(s=>this.filterActiveClients(s,iI).find(a=>{if(this.clientId!==a.clientId){let l=!this.networkEnabled&&a.networkEnabled,c=!this.inForeground&&a.inForeground,d=this.networkEnabled===a.networkEnabled;if(l||c&&d)return!0}return!1})===void 0)}).next(n=>(this.isPrimary!==n&&oe(Cl,`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){return N(this,null,function*(){this._started=!1,this.markClientZombied(),this.clientMetadataRefresher&&(this.clientMetadataRefresher.cancel(),this.clientMetadataRefresher=null),this.detachVisibilityHandler(),this.detachWindowUnloadHook(),yield this.simpleDb.runTransaction("shutdown","readwrite",[Ag,Fh],t=>{let e=new cg(t,Or.INVALID);return this.releasePrimaryLeaseIfHeld(e).next(()=>this.removeClientMetadata(e))}),this.simpleDb.close(),this.removeClientZombiedEntry()})}filterActiveClients(t,e){return t.filter(n=>this.isWithinAge(n.updateTimeMs,e)&&!this.isClientZombied(n.clientId))}getActiveClients(){return this.runTransaction("getActiveClients","readonly",t=>fy(t).loadAll().next(e=>this.filterActiveClients(e,tI).map(n=>n.clientId)))}get started(){return this._started}getGlobalsCache(){return this.globalsCache}getMutationQueue(t,e){return zy.forUser(t,this.serializer,e,this.referenceDelegate)}getTargetCache(){return this.targetCache}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(t){return new iD(t,this.serializer.remoteSerializer.databaseId)}getDocumentOverlayCache(t){return Ny.forUser(this.serializer,t)}getBundleCache(){return this.bundleCache}runTransaction(t,e,n){oe(Cl,"Starting transaction:",t);let r=e==="readonly"?"readonly":"readwrite",s=Woe(this.schemaVersion),o;return this.simpleDb.runTransaction(t,r,s,a=>(o=new cg(a,this.listenSequence?this.listenSequence.next():Or.INVALID),e==="readwrite-primary"?this.verifyPrimaryLease(o).next(l=>l?!0:this.canActAsPrimary(o)).next(l=>{if(!l)throw xi(`Failed to obtain primary lease for action '${t}'.`),this.isPrimary=!1,this.queue.enqueueRetryable(()=>this.primaryStateListener(!1)),new ie(K.FAILED_PRECONDITION,Iz);return n(o)}).next(l=>this.acquireOrExtendPrimaryLease(o).next(()=>l)):this.verifyAllowTabSynchronization(o).next(()=>n(o)))).then(a=>(o.raiseOnCommittedEvent(),a))}verifyAllowTabSynchronization(t){return Zp(t).get(bh).next(n=>{if(n!==null&&this.isWithinAge(n.leaseTimestampMs,iI)&&!this.isClientZombied(n.ownerId)&&!this.isLocalClient(n)&&!this.forceOwningTab&&(!this.allowTabSynchronization||!n.allowTabSynchronization))throw new ie(K.FAILED_PRECONDITION,nI)})}acquireOrExtendPrimaryLease(t){let e={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return Zp(t).put(bh,e)}static isAvailable(){return Dl.isAvailable()}releasePrimaryLeaseIfHeld(t){let e=Zp(t);return e.get(bh).next(n=>this.isLocalClient(n)?(oe(Cl,"Releasing primary lease."),e.delete(bh)):q.resolve())}isWithinAge(t,e){let n=Date.now(),r=n-e,s=n;return t<r?!1:t>s?(xi(`Detected an update time that is in the future: ${t} > ${s}`),!1):!0}attachVisibilityHandler(){this.document!==null&&typeof this.document.addEventListener=="function"&&(this.documentVisibilityHandler=()=>{this.queue.enqueueAndForget(()=>(this.inForeground=this.document.visibilityState==="visible",this.updateClientMetadataAndTryBecomePrimary()))},this.document.addEventListener("visibilitychange",this.documentVisibilityHandler),this.inForeground=this.document.visibilityState==="visible")}detachVisibilityHandler(){this.documentVisibilityHandler&&(this.document.removeEventListener("visibilitychange",this.documentVisibilityHandler),this.documentVisibilityHandler=null)}attachWindowUnloadHook(){var t;typeof((t=this.window)===null||t===void 0?void 0:t.addEventListener)=="function"&&(this.windowUnloadHandler=()=>{this.markClientZombied();let e=/(?:Version|Mobile)\/1[456]/;gS()&&(navigator.appVersion.match(e)||navigator.userAgent.match(e))&&this.queue.enterRestrictedMode(!0),this.queue.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.windowUnloadHandler))}detachWindowUnloadHook(){this.windowUnloadHandler&&(this.window.removeEventListener("pagehide",this.windowUnloadHandler),this.windowUnloadHandler=null)}isClientZombied(t){var e;try{let n=((e=this.webStorage)===null||e===void 0?void 0:e.getItem(this.zombiedClientLocalStorageKey(t)))!==null;return oe(Cl,`Client '${t}' ${n?"is":"is not"} zombied in LocalStorage`),n}catch(n){return xi(Cl,"Failed to get zombied client id.",n),!1}}markClientZombied(){if(this.webStorage)try{this.webStorage.setItem(this.zombiedClientLocalStorageKey(this.clientId),String(Date.now()))}catch(t){xi("Failed to set zombie client id.",t)}}removeClientZombiedEntry(){if(this.webStorage)try{this.webStorage.removeItem(this.zombiedClientLocalStorageKey(this.clientId))}catch{}}zombiedClientLocalStorageKey(t){return`${Mde}_${this.persistenceKey}_${t}`}};function Zp(i){return en(i,Ag)}function fy(i){return en(i,Fh)}function OM(i,t){let e=i.projectId;return i.isDefaultDatabase||(e+="."+i.database),"firestore/"+t+"/"+e+"/"}function Ade(i){return N(this,null,function*(){if(!Dl.isAvailable())return Promise.resolve();let t=i+Yj;yield Dl.delete(t)})}function Ode(i,t){if(i.length!==t.length)return!1;for(let e=0;e<i.length;++e)if(i[e]!==t[e])return!1;return!0}var PM="LocalStore",Pde=5*60*1e6,Sg=class{constructor(t,e,n,r){this.persistence=t,this.queryEngine=e,this.serializer=r,this.targetDataByTarget=new si(Ye),this.targetIdByTarget=new Co(s=>yd(s),Fg),this.collectionGroupReadTime=new Map,this.remoteDocuments=t.getRemoteDocumentCache(),this.targetCache=t.getTargetCache(),this.bundleCache=t.getBundleCache(),this.initializeUserComponents(n)}initializeUserComponents(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new Uy(this.remoteDocuments,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.remoteDocuments.setIndexManager(this.indexManager),this.queryEngine.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",e=>t.collect(e,this.targetDataByTarget))}};function Qj(i,t,e,n){return new Sg(i,t,e,n)}function Xj(i,t){return N(this,null,function*(){let e=ge(i);return yield e.persistence.runTransaction("Handle user change","readonly",r=>{let s;return e.mutationQueue.getAllMutationBatches(r).next(o=>(s=o,e.initializeUserComponents(t),e.mutationQueue.getAllMutationBatches(r))).next(o=>{let a=[],l=[],c=Je();for(let d of s){a.push(d.batchId);for(let u of d.mutations)c=c.add(u.key)}for(let d of o){l.push(d.batchId);for(let u of d.mutations)c=c.add(u.key)}return e.localDocuments.getDocuments(r,c).next(d=>({affectedDocuments:d,removedBatchIds:a,addedBatchIds:l}))})})})}function Rde(i,t){let e=ge(i),n=wi.now(),r=t.reduce((a,l)=>a.add(l.key),Je()),s,o;return e.persistence.runTransaction("Locally write mutations","readwrite",a=>{let l=hr(),c=Je();return e.remoteDocuments.getEntries(a,r).next(d=>{l=d,l.forEach((u,h)=>{h.isValidDocument()||(c=c.add(u))})}).next(()=>e.localDocuments.getOverlayedDocuments(a,l)).next(d=>{s=d;let u=[];for(let h of t){let m=dle(h,s.get(h.key).overlayedDocument);m!=null&&u.push(new Vs(h.key,m,ej(m.value.mapValue),Ii.exists(!0)))}return e.mutationQueue.addMutationBatch(a,n,u,t)}).next(d=>{o=d;let u=d.applyToLocalDocumentSet(s,c);return e.documentOverlayCache.saveOverlays(a,d.batchId,u)})}).then(()=>({batchId:o.batchId,changes:fj(s)}))}function Fde(i,t){let e=ge(i);return e.persistence.runTransaction("Acknowledge batch","readwrite-primary",n=>{let r=t.batch.keys(),s=e.remoteDocuments.newChangeBuffer({trackRemovals:!0});return Wde(e,n,t,s).next(()=>s.apply(n)).next(()=>e.mutationQueue.performConsistencyCheck(n)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(n,r,t.batch.batchId)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,Nde(t))).next(()=>e.localDocuments.getDocuments(n,r))})}function Nde(i){let t=Je();for(let e=0;e<i.mutationResults.length;++e)i.mutationResults[e].transformResults.length>0&&(t=t.add(i.batch.mutations[e].key));return t}function Lde(i,t){let e=ge(i);return e.persistence.runTransaction("Reject batch","readwrite-primary",n=>{let r;return e.mutationQueue.lookupMutationBatch(n,t).next(s=>(Ae(s!==null),r=s.keys(),e.mutationQueue.removeMutationBatch(n,s))).next(()=>e.mutationQueue.performConsistencyCheck(n)).next(()=>e.documentOverlayCache.removeOverlaysForBatchId(n,r,t)).next(()=>e.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(n,r)).next(()=>e.localDocuments.getDocuments(n,r))})}function Bde(i){let t=ge(i);return t.persistence.runTransaction("Get highest unacknowledged batch id","readonly",e=>t.mutationQueue.getHighestUnacknowledgedBatchId(e))}function Zj(i){let t=ge(i);return t.persistence.runTransaction("Get last remote snapshot version","readonly",e=>t.targetCache.getLastRemoteSnapshotVersion(e))}function Vde(i,t){let e=ge(i),n=t.snapshotVersion,r=e.targetDataByTarget;return e.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{let o=e.remoteDocuments.newChangeBuffer({trackRemovals:!0});r=e.targetDataByTarget;let a=[];t.targetChanges.forEach((d,u)=>{let h=r.get(u);if(!h)return;a.push(e.targetCache.removeMatchingKeys(s,d.removedDocuments,u).next(()=>e.targetCache.addMatchingKeys(s,d.addedDocuments,u)));let m=h.withSequenceNumber(s.currentSequenceNumber);t.targetMismatches.get(u)!==null?m=m.withResumeToken(zi.EMPTY_BYTE_STRING,Ne.min()).withLastLimboFreeSnapshotVersion(Ne.min()):d.resumeToken.approximateByteSize()>0&&(m=m.withResumeToken(d.resumeToken,n)),r=r.insert(u,m),zde(h,m,d)&&a.push(e.targetCache.updateTargetData(s,m))});let l=hr(),c=Je();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&a.push(e.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(Jj(s,o,t.documentUpdates).next(d=>{l=d.changedDocuments,c=d.existenceChangedKeys})),!n.isEqual(Ne.min())){let d=e.targetCache.getLastRemoteSnapshotVersion(s).next(u=>e.targetCache.setTargetsMetadata(s,s.currentSequenceNumber,n));a.push(d)}return q.waitFor(a).next(()=>o.apply(s)).next(()=>e.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(e.targetDataByTarget=r,s))}function Jj(i,t,e){let n=Je(),r=Je();return e.forEach(s=>n=n.add(s)),t.getEntries(i,n).next(s=>{let o=hr();return e.forEach((a,l)=>{let c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Ne.min())?(t.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(t.addEntry(l),o=o.insert(a,l)):oe(PM,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{changedDocuments:o,existenceChangedKeys:r}})}function zde(i,t,e){return i.resumeToken.approximateByteSize()===0||t.snapshotVersion.toMicroseconds()-i.snapshotVersion.toMicroseconds()>=Pde?!0:e.addedDocuments.size+e.modifiedDocuments.size+e.removedDocuments.size>0}function jde(i,t){return N(this,null,function*(){let e=ge(i);try{yield e.persistence.runTransaction("notifyLocalViewChanges","readwrite",n=>q.forEach(t,r=>q.forEach(r.addedKeys,s=>e.persistence.referenceDelegate.addReference(n,r.targetId,s)).next(()=>q.forEach(r.removedKeys,s=>e.persistence.referenceDelegate.removeReference(n,r.targetId,s)))))}catch(n){if(zl(n))oe(PM,"Failed to update sequence numbers: "+n);else throw n}for(let n of t){let r=n.targetId;if(!n.fromCache){let s=e.targetDataByTarget.get(r),o=s.snapshotVersion,a=s.withLastLimboFreeSnapshotVersion(o);e.targetDataByTarget=e.targetDataByTarget.insert(r,a)}}})}function Ude(i,t){let e=ge(i);return e.persistence.runTransaction("Get next mutation batch","readonly",n=>(t===void 0&&(t=Tl),e.mutationQueue.getNextMutationBatchAfterBatchId(n,t)))}function Hde(i,t){let e=ge(i);return e.persistence.runTransaction("read document","readonly",n=>e.localDocuments.getDocument(n,t))}function Wh(i,t){let e=ge(i);return e.persistence.runTransaction("Allocate target","readwrite",n=>{let r;return e.targetCache.getTargetData(n,t).next(s=>s?(r=s,q.resolve(r)):e.targetCache.allocateTargetId(n).next(o=>(r=new Hh(t,o,"TargetPurposeListen",n.currentSequenceNumber),e.targetCache.addTargetData(n,r).next(()=>r))))}).then(n=>{let r=e.targetDataByTarget.get(n.targetId);return(r===null||n.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(e.targetDataByTarget=e.targetDataByTarget.insert(n.targetId,n),e.targetIdByTarget.set(t,n.targetId)),n})}function qde(i,t,e){let n=ge(i),r=n.targetIdByTarget.get(e);return r!==void 0?q.resolve(n.targetDataByTarget.get(r)):n.targetCache.getTargetData(t,e)}function Gh(i,t,e){return N(this,null,function*(){let n=ge(i),r=n.targetDataByTarget.get(t),s=e?"readwrite":"readwrite-primary";try{e||(yield n.persistence.runTransaction("Release target",s,o=>n.persistence.referenceDelegate.removeTarget(o,r)))}catch(o){if(zl(o))oe(PM,`Failed to update sequence numbers for target ${t}: ${o}`);else throw o}n.targetDataByTarget=n.targetDataByTarget.remove(t),n.targetIdByTarget.delete(r.target)})}function kx(i,t,e){let n=ge(i),r=Ne.min(),s=Je();return n.persistence.runTransaction("Execute query","readwrite",o=>qde(n,o,Kn(t)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,n.targetCache.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>n.queryEngine.getDocumentsMatchingQuery(o,t,e?r:Ne.min(),e?s:Je())).next(a=>(i6(n,uj(t),a),{documents:a,remoteKeys:s})))}function Wde(i,t,e,n){let r=e.batch,s=r.keys(),o=q.resolve();return s.forEach(a=>{o=o.next(()=>n.getEntry(t,a)).next(l=>{let c=e.docVersions.get(a);Ae(c!==null),l.version.compareTo(c)<0&&(r.applyToRemoteDocument(l,e),l.isValidDocument()&&(l.setReadTime(e.commitVersion),n.addEntry(l)))})}),o.next(()=>i.mutationQueue.removeMutationBatch(t,r))}function Gde(i,t){let e=ge(i),n=ge(e.mutationQueue);return e.persistence.runTransaction("Lookup mutation documents","readonly",r=>n.lookupMutationKeys(r,t).next(s=>s?e.localDocuments.getDocuments(r,s):q.resolve(null)))}function $de(i,t){ge(ge(i,Sg).mutationQueue).removeCachedMutationKeys(t)}function Kde(i){return ge(ge(i,Sg).persistence).getActiveClients()}function e6(i,t){let e=ge(i),n=ge(e.targetCache),r=e.targetDataByTarget.get(t);return r?Promise.resolve(r.target):e.persistence.runTransaction("Get target data","readonly",s=>n.getTargetDataForTarget(s,t).next(o=>o?o.target:null))}function t6(i,t){let e=ge(i),n=e.collectionGroupReadTime.get(t)||Ne.min();return e.persistence.runTransaction("Get new document changes","readonly",r=>e.remoteDocuments.getAllFromCollectionGroup(r,t,Ez(n,Rh),Number.MAX_SAFE_INTEGER)).then(r=>(i6(e,t,r),r))}function i6(i,t,e){let n=i.collectionGroupReadTime.get(t)||Ne.min();e.forEach((r,s)=>{s.readTime.compareTo(n)>0&&(n=s.readTime)}),i.collectionGroupReadTime.set(t,n)}function Yde(i){return Kn(im(xt.fromString(`__bundle__/docs/${i}`)))}function Qde(i,t,e,n){return N(this,null,function*(){let r=ge(i),s=Je(),o=hr();for(let c of e){let d=t.toDocumentKey(c.metadata.name);c.document&&(s=s.add(d));let u=t.toMutableDocument(c);u.setReadTime(t.toSnapshotVersion(c.metadata.readTime)),o=o.insert(d,u)}let a=r.remoteDocuments.newChangeBuffer({trackRemovals:!0}),l=yield Wh(r,Yde(n));return r.persistence.runTransaction("Apply bundle documents","readwrite",c=>Jj(c,a,o).next(d=>(a.apply(c),d)).next(d=>r.targetCache.removeMatchingKeysForTargetId(c,l.targetId).next(()=>r.targetCache.addMatchingKeys(c,s,l.targetId)).next(()=>r.localDocuments.getLocalViewOfDocuments(c,d.changedDocuments,d.existenceChangedKeys)).next(()=>d.changedDocuments)))})}function Xde(i,t){let e=ge(i),n=Bi(t.createTime);return e.persistence.runTransaction("hasNewerBundle","readonly",r=>e.bundleCache.getBundleMetadata(r,t.id)).then(r=>!!r&&r.createTime.compareTo(n)>=0)}function Zde(i,t){let e=ge(i);return e.persistence.runTransaction("Save bundle","readwrite",n=>e.bundleCache.saveBundleMetadata(n,t))}function Jde(i,t){let e=ge(i);return e.persistence.runTransaction("Get named query","readonly",n=>e.bundleCache.getNamedQuery(n,t))}function eue(n,r){return N(this,arguments,function*(i,t,e=Je()){let s=yield Wh(i,Kn(IM(t.bundledQuery))),o=ge(i);return o.persistence.runTransaction("Save named query","readwrite",a=>{let l=Bi(t.readTime);if(s.snapshotVersion.compareTo(l)>=0)return o.bundleCache.saveNamedQuery(a,t);let c=s.withResumeToken(zi.EMPTY_BYTE_STRING,l);return o.targetDataByTarget=o.targetDataByTarget.insert(c.targetId,c),o.targetCache.updateTargetData(a,c).next(()=>o.targetCache.removeMatchingKeysForTargetId(a,s.targetId)).next(()=>o.targetCache.addMatchingKeys(a,e,s.targetId)).next(()=>o.bundleCache.saveNamedQuery(a,t))})})}var xD=class{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}};var tue=100;function iue(){return gS()?8:Dz(Xf())>0?6:4}var Wy=class{constructor(){this.initialized=!1,this.indexAutoCreationEnabled=!1,this.indexAutoCreationMinCollectionSize=tue,this.relativeIndexReadCostPerDocument=iue()}initialize(t,e){this.localDocumentsView=t,this.indexManager=e,this.initialized=!0}getDocumentsMatchingQuery(t,e,n,r){let s={result:null};return this.performQueryUsingIndex(t,e).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.performQueryUsingRemoteKeys(t,e,r,n).next(o=>{s.result=o})}).next(()=>{if(s.result)return;let o=new xD;return this.executeFullCollectionScan(t,e,o).next(a=>{if(s.result=a,this.indexAutoCreationEnabled)return this.createCacheIndexes(t,e,o,a.size)})}).next(()=>s.result)}createCacheIndexes(t,e,n,r){return n.documentReadCount<this.indexAutoCreationMinCollectionSize?(kh()<=Yr.DEBUG&&oe("QueryEngine","SDK will not create cache indexes for query:",Eh(e),"since it only creates cache indexes for collection contains","more than or equal to",this.indexAutoCreationMinCollectionSize,"documents"),q.resolve()):(kh()<=Yr.DEBUG&&oe("QueryEngine","Query:",Eh(e),"scans",n.documentReadCount,"local documents and returns",r,"documents as results."),n.documentReadCount>this.relativeIndexReadCostPerDocument*r?(kh()<=Yr.DEBUG&&oe("QueryEngine","The SDK decides to create cache indexes for query:",Eh(e),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,Kn(e))):q.resolve())}performQueryUsingIndex(t,e){if(T5(e))return q.resolve(null);let n=Kn(e);return this.indexManager.getIndexType(t,n).next(r=>r===0?null:(e.limit!==null&&r===1&&(e=Ay(e,null,"F"),n=Kn(e)),this.indexManager.getDocumentsMatchingTarget(t,n).next(s=>{let o=Je(...s);return this.localDocumentsView.getDocuments(t,o).next(a=>this.indexManager.getMinOffset(t,n).next(l=>{let c=this.applyQuery(e,a);return this.needsRefill(e,c,o,l.readTime)?this.performQueryUsingIndex(t,Ay(e,null,"F")):this.appendRemainingResults(t,c,e,l)}))})))}performQueryUsingRemoteKeys(t,e,n,r){return T5(e)||r.isEqual(Ne.min())?q.resolve(null):this.localDocumentsView.getDocuments(t,n).next(s=>{let o=this.applyQuery(e,s);return this.needsRefill(e,o,n,r)?q.resolve(null):(kh()<=Yr.DEBUG&&oe("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Eh(e)),this.appendRemainingResults(t,o,e,Ez(r,Rh)).next(a=>a))})}applyQuery(t,e){let n=new qt(hj(t));return e.forEach((r,s)=>{Lg(t,s)&&(n=n.add(s))}),n}needsRefill(t,e,n,r){if(t.limit===null)return!1;if(n.size!==e.size)return!0;let s=t.limitType==="F"?e.last():e.first();return s?s.hasPendingWrites||s.version.compareTo(r)>0:!1}executeFullCollectionScan(t,e,n){return kh()<=Yr.DEBUG&&oe("QueryEngine","Using full collection scan to execute query:",Eh(e)),this.localDocumentsView.getDocumentsMatchingQuery(t,e,as.min(),n)}appendRemainingResults(t,e,n,r){return this.localDocumentsView.getDocumentsMatchingQuery(t,n,r).next(s=>(e.forEach(o=>{s=s.insert(o.key,o)}),s))}};var n6="firestore_clients";function oz(i,t){return`${n6}_${i}_${t}`}var r6="firestore_mutations";function az(i,t,e){let n=`${r6}_${i}_${e}`;return t.isAuthenticated()&&(n+=`_${t.uid}`),n}var s6="firestore_targets";function rI(i,t){return`${s6}_${i}_${t}`}var nue="firestore_online_state";function rue(i){return`${nue}_${i}`}var sue="firestore_bundle_loaded_v2";function oue(i){return`${sue}_${i}`}var aue="firestore_sequence_number";function lue(i){return`${aue}_${i}`}var _o="SharedClientState",Gy=class i{constructor(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}static fromWebStorageEntry(t,e,n){let r=JSON.parse(n),s=typeof r=="object"&&["pending","acknowledged","rejected"].indexOf(r.state)!==-1&&(r.error===void 0||typeof r.error=="object"),o;return s&&r.error&&(s=typeof r.error.message=="string"&&typeof r.error.code=="string",s&&(o=new ie(r.error.code,r.error.message))),s?new i(t,e,r.state,o):(xi(_o,`Failed to parse mutation state for ID '${e}': ${n}`),null)}toWebStorageJSON(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},sg=class i{constructor(t,e,n){this.targetId=t,this.state=e,this.error=n}static fromWebStorageEntry(t,e){let n=JSON.parse(e),r=typeof n=="object"&&["not-current","current","rejected"].indexOf(n.state)!==-1&&(n.error===void 0||typeof n.error=="object"),s;return r&&n.error&&(r=typeof n.error.message=="string"&&typeof n.error.code=="string",r&&(s=new ie(n.error.code,n.error.message))),r?new i(t,n.state,s):(xi(_o,`Failed to parse target state for ID '${t}': ${e}`),null)}toWebStorageJSON(){let t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)}},$y=class i{constructor(t,e){this.clientId=t,this.activeTargetIds=e}static fromWebStorageEntry(t,e){let n=JSON.parse(e),r=typeof n=="object"&&n.activeTargetIds instanceof Array,s=kM();for(let o=0;r&&o<n.activeTargetIds.length;++o)r=Yz(n.activeTargetIds[o]),s=s.add(n.activeTargetIds[o]);return r?new i(t,s):(xi(_o,`Failed to parse client data for instance '${t}': ${e}`),null)}},wD=class i{constructor(t,e){this.clientId=t,this.onlineState=e}static fromWebStorageEntry(t){let e=JSON.parse(t);return typeof e=="object"&&["Unknown","Online","Offline"].indexOf(e.onlineState)!==-1&&typeof e.clientId=="string"?new i(e.clientId,e.onlineState):(xi(_o,`Failed to parse online state: ${t}`),null)}},kg=class{constructor(){this.activeTargetIds=kM()}addQueryTarget(t){this.activeTargetIds=this.activeTargetIds.add(t)}removeQueryTarget(t){this.activeTargetIds=this.activeTargetIds.delete(t)}toWebStorageJSON(){let t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}},og=class{constructor(t,e,n,r,s){this.window=t,this.queue=e,this.persistenceKey=n,this.localClientId=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.storageListener=this.handleWebStorageEvent.bind(this),this.activeClients=new si(Ye),this.started=!1,this.earlyEvents=[];let o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=s,this.localClientStorageKey=oz(this.persistenceKey,this.localClientId),this.sequenceNumberKey=lue(this.persistenceKey),this.activeClients=this.activeClients.insert(this.localClientId,new kg),this.clientStateKeyRe=new RegExp(`^${n6}_${o}_([^_]*)$`),this.mutationBatchKeyRe=new RegExp(`^${r6}_${o}_(\\d+)(?:_(.*))?$`),this.queryTargetKeyRe=new RegExp(`^${s6}_${o}_(\\d+)$`),this.onlineStateKey=rue(this.persistenceKey),this.bundleLoadedKey=oue(this.persistenceKey),this.window.addEventListener("storage",this.storageListener)}static isAvailable(t){return!!(t&&t.localStorage)}start(){return N(this,null,function*(){let t=yield this.syncEngine.getActiveClients();for(let n of t){if(n===this.localClientId)continue;let r=this.getItem(oz(this.persistenceKey,n));if(r){let s=$y.fromWebStorageEntry(n,r);s&&(this.activeClients=this.activeClients.insert(s.clientId,s))}}this.persistClientState();let e=this.storage.getItem(this.onlineStateKey);if(e){let n=this.fromWebStorageOnlineState(e);n&&this.handleOnlineStateEvent(n)}for(let n of this.earlyEvents)this.handleWebStorageEvent(n);this.earlyEvents=[],this.window.addEventListener("pagehide",()=>this.shutdown()),this.started=!0})}writeSequenceNumber(t){this.setItem(this.sequenceNumberKey,JSON.stringify(t))}getAllActiveQueryTargets(){return this.extractActiveQueryTargets(this.activeClients)}isActiveQueryTarget(t){let e=!1;return this.activeClients.forEach((n,r)=>{r.activeTargetIds.has(t)&&(e=!0)}),e}addPendingMutation(t){this.persistMutationState(t,"pending")}updateMutationState(t,e,n){this.persistMutationState(t,e,n),this.removeMutationState(t)}addLocalQueryTarget(t,e=!0){let n="not-current";if(this.isActiveQueryTarget(t)){let r=this.storage.getItem(rI(this.persistenceKey,t));if(r){let s=sg.fromWebStorageEntry(t,r);s&&(n=s.state)}}return e&&this.localClientState.addQueryTarget(t),this.persistClientState(),n}removeLocalQueryTarget(t){this.localClientState.removeQueryTarget(t),this.persistClientState()}isLocalQueryTarget(t){return this.localClientState.activeTargetIds.has(t)}clearQueryState(t){this.removeItem(rI(this.persistenceKey,t))}updateQueryState(t,e,n){this.persistQueryTargetState(t,e,n)}handleUserChange(t,e,n){e.forEach(r=>{this.removeMutationState(r)}),this.currentUser=t,n.forEach(r=>{this.addPendingMutation(r)})}setOnlineState(t){this.persistOnlineState(t)}notifyBundleLoaded(t){this.persistBundleLoadedState(t)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.storageListener),this.removeItem(this.localClientStorageKey),this.started=!1)}getItem(t){let e=this.storage.getItem(t);return oe(_o,"READ",t,e),e}setItem(t,e){oe(_o,"SET",t,e),this.storage.setItem(t,e)}removeItem(t){oe(_o,"REMOVE",t),this.storage.removeItem(t)}handleWebStorageEvent(t){let e=t;if(e.storageArea===this.storage){if(oe(_o,"EVENT",e.key,e.newValue),e.key===this.localClientStorageKey){xi("Received WebStorage notification for local change. Another client might have garbage-collected our state");return}this.queue.enqueueRetryable(()=>N(this,null,function*(){if(!this.started){this.earlyEvents.push(e);return}if(e.key!==null){if(this.clientStateKeyRe.test(e.key))if(e.newValue!=null){let n=this.fromWebStorageClientState(e.key,e.newValue);if(n)return this.handleClientStateEvent(n.clientId,n)}else{let n=this.fromWebStorageClientStateKey(e.key);return this.handleClientStateEvent(n,null)}else if(this.mutationBatchKeyRe.test(e.key)){if(e.newValue!==null){let n=this.fromWebStorageMutationMetadata(e.key,e.newValue);if(n)return this.handleMutationBatchEvent(n)}}else if(this.queryTargetKeyRe.test(e.key)){if(e.newValue!==null){let n=this.fromWebStorageQueryTargetMetadata(e.key,e.newValue);if(n)return this.handleQueryTargetEvent(n)}}else if(e.key===this.onlineStateKey){if(e.newValue!==null){let n=this.fromWebStorageOnlineState(e.newValue);if(n)return this.handleOnlineStateEvent(n)}}else if(e.key===this.sequenceNumberKey){let n=cue(e.newValue);n!==Or.INVALID&&this.sequenceNumberHandler(n)}else if(e.key===this.bundleLoadedKey){let n=this.fromWebStoreBundleLoadedState(e.newValue);yield Promise.all(n.map(r=>this.syncEngine.synchronizeWithChangedDocuments(r)))}}}))}}get localClientState(){return this.activeClients.get(this.localClientId)}persistClientState(){this.setItem(this.localClientStorageKey,this.localClientState.toWebStorageJSON())}persistMutationState(t,e,n){let r=new Gy(this.currentUser,t,e,n),s=az(this.persistenceKey,this.currentUser,t);this.setItem(s,r.toWebStorageJSON())}removeMutationState(t){let e=az(this.persistenceKey,this.currentUser,t);this.removeItem(e)}persistOnlineState(t){let e={clientId:this.localClientId,onlineState:t};this.storage.setItem(this.onlineStateKey,JSON.stringify(e))}persistQueryTargetState(t,e,n){let r=rI(this.persistenceKey,t),s=new sg(t,e,n);this.setItem(r,s.toWebStorageJSON())}persistBundleLoadedState(t){let e=JSON.stringify(Array.from(t));this.setItem(this.bundleLoadedKey,e)}fromWebStorageClientStateKey(t){let e=this.clientStateKeyRe.exec(t);return e?e[1]:null}fromWebStorageClientState(t,e){let n=this.fromWebStorageClientStateKey(t);return $y.fromWebStorageEntry(n,e)}fromWebStorageMutationMetadata(t,e){let n=this.mutationBatchKeyRe.exec(t),r=Number(n[1]),s=n[2]!==void 0?n[2]:null;return Gy.fromWebStorageEntry(new Ki(s),r,e)}fromWebStorageQueryTargetMetadata(t,e){let n=this.queryTargetKeyRe.exec(t),r=Number(n[1]);return sg.fromWebStorageEntry(r,e)}fromWebStorageOnlineState(t){return wD.fromWebStorageEntry(t)}fromWebStoreBundleLoadedState(t){return JSON.parse(t)}handleMutationBatchEvent(t){return N(this,null,function*(){if(t.user.uid!==this.currentUser.uid){oe(_o,`Ignoring mutation for non-active user ${t.user.uid}`);return}return this.syncEngine.applyBatchState(t.batchId,t.state,t.error)})}handleQueryTargetEvent(t){return this.syncEngine.applyTargetState(t.targetId,t.state,t.error)}handleClientStateEvent(t,e){let n=e?this.activeClients.insert(t,e):this.activeClients.remove(t),r=this.extractActiveQueryTargets(this.activeClients),s=this.extractActiveQueryTargets(n),o=[],a=[];return s.forEach(l=>{r.has(l)||o.push(l)}),r.forEach(l=>{s.has(l)||a.push(l)}),this.syncEngine.applyActiveTargetsChange(o,a).then(()=>{this.activeClients=n})}handleOnlineStateEvent(t){this.activeClients.get(t.clientId)&&this.onlineStateHandler(t.onlineState)}extractActiveQueryTargets(t){let e=kM();return t.forEach((n,r)=>{e=e.unionWith(r.activeTargetIds)}),e}};function cue(i){let t=Or.INVALID;if(i!=null)try{let e=JSON.parse(i);Ae(typeof e=="number"),t=e}catch(e){xi(_o,"Failed to read sequence number from WebStorage",e)}return t}var Ky=class{constructor(){this.localState=new kg,this.queryState={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,e,n){}addLocalQueryTarget(t,e=!0){return e&&this.localState.addQueryTarget(t),this.queryState[t]||"not-current"}updateQueryState(t,e,n){this.queryState[t]=e}removeLocalQueryTarget(t){this.localState.removeQueryTarget(t)}isLocalQueryTarget(t){return this.localState.activeTargetIds.has(t)}clearQueryState(t){delete this.queryState[t]}getAllActiveQueryTargets(){return this.localState.activeTargetIds}isActiveQueryTarget(t){return this.localState.activeTargetIds.has(t)}start(){return this.localState=new kg,Promise.resolve()}handleUserChange(t,e,n){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}};var CD=class{addCallback(t){}shutdown(){}};var SD=class{constructor(t){this.sendFn=t.sendFn,this.closeFn=t.closeFn}onConnected(t){this.wrappedOnConnected=t}onOpen(t){this.wrappedOnOpen=t}onClose(t){this.wrappedOnClose=t}onMessage(t){this.wrappedOnMessage=t}close(){this.closeFn()}send(t){this.sendFn(t)}callOnConnected(){this.wrappedOnConnected()}callOnOpen(){this.wrappedOnOpen()}callOnClose(t){this.wrappedOnClose(t)}callOnMessage(t){this.wrappedOnMessage(t)}};var py=null;function due(){return 268435456+Math.round(2147483648*Math.random())}function sI(){return py===null?py=due():py++,"0x"+py.toString(16)}function uue(i){return new Promise((t,e)=>{i((n,r)=>{n?e(n):t(r)})})}var hue="1.9.1",Gn="GrpcConnection",mue=`gl-node/${process.versions.node} fire/${Zh} grpc/${hue}`;function oI(i,t,e,n){Ae(t===null||t.type==="OAuth");let r=new fd.Metadata;return t&&t.headers.forEach((s,o)=>r.set(o,s)),e&&e.headers.forEach((s,o)=>r.set(o,s)),n&&r.set("X-Firebase-GMPID",n),r.set("X-Goog-Api-Client",mue),r.set("Google-Cloud-Resource-Prefix",i),r.set("x-goog-request-params",i),r}var kD=class{constructor(t,e){this.databaseInfo=e,this.cachedStub=null,this.firestore=t.google.firestore.v1,this.databasePath=`projects/${e.databaseId.projectId}/databases/${e.databaseId.database}`}get shouldResourcePathBeIncludedInRequest(){return!0}ensureActiveStub(){if(!this.cachedStub){oe(Gn,"Creating Firestore stub.");let t=this.databaseInfo.ssl?fd.credentials.createSsl():fd.credentials.createInsecure();this.cachedStub=new this.firestore.Firestore(this.databaseInfo.host,t)}return this.cachedStub}invokeRPC(t,e,n,r,s){let o=sI(),a=this.ensureActiveStub(),l=oI(this.databasePath,r,s,this.databaseInfo.appId),c=Object.assign({database:this.databasePath},n);return uue(d=>(oe(Gn,`RPC '${t}' ${o} invoked with request:`,n),a[t](c,l,(u,h)=>{u?(oe(Gn,`RPC '${t}' ${o} failed with error:`,u),d(new ie(yy(u.code),u.message))):(oe(Gn,`RPC '${t}' ${o} completed with response:`,h),d(void 0,h))})))}invokeStreamingRPC(t,e,n,r,s,o){let a=sI(),l=[],c=new Gi;oe(Gn,`RPC '${t}' ${a} invoked (streaming) with request:`,n);let d=this.ensureActiveStub(),u=oI(this.databasePath,r,s,this.databaseInfo.appId),h=Object.assign(Object.assign({},n),{database:this.databasePath}),m=d[t](h,u),_=!1;return m.on("data",b=>{oe(Gn,`RPC ${t} ${a} received result:`,b),l.push(b),o!==void 0&&l.length===o&&(_=!0,c.resolve(l))}),m.on("end",()=>{oe(Gn,`RPC '${t}' ${a} completed.`),_||(_=!0,c.resolve(l))}),m.on("error",b=>{oe(Gn,`RPC '${t}' ${a} failed with error:`,b);let v=yy(b.code);c.reject(new ie(v,b.message))}),c.promise}openStream(t,e,n){let r=sI(),s=this.ensureActiveStub(),o=oI(this.databasePath,e,n,this.databaseInfo.appId),a=s[t](o),l=!1,c=h=>{l||(l=!0,d.callOnClose(h),a.end())},d=new SD({sendFn:h=>{if(l)oe(Gn,`RPC '${t}' stream ${r} not sending because gRPC stream is closed:`,h);else{oe(Gn,`RPC '${t}' stream ${r} sending:`,h);try{a.write(h)}catch(m){throw xi("Failure sending:",h),xi("Error:",m),m}}},closeFn:()=>{oe(Gn,`RPC '${t}' stream ${r} closed locally via close().`),c()}}),u=!1;return a.on("data",h=>{l||(oe(Gn,`RPC '${t}' stream ${r} received:`,h),u||(d.callOnConnected(),u=!0),d.callOnMessage(h))}),a.on("end",()=>{oe(Gn,`RPC '${t}' stream ${r} ended.`),c()}),a.on("error",h=>{if(!l){Ns(Gn,`RPC '${t}' stream ${r} error. Code:`,h.code,"Message:",h.message);let m=yy(h.code);c(new ie(m,h.message))}}),oe(Gn,`Opening RPC '${t}' stream ${r} to ${this.databaseInfo.host}`),setTimeout(()=>{d.callOnOpen()},0),d}terminate(){this.cachedStub&&(this.cachedStub.close(),this.cachedStub=void 0)}},o6={google:{nested:{protobuf:{options:{csharp_namespace:"Google.Protobuf.WellKnownTypes",go_package:"github.com/golang/protobuf/ptypes/wrappers",java_package:"com.google.protobuf",java_outer_classname:"WrappersProto",java_multiple_files:!0,objc_class_prefix:"GPB",cc_enable_arenas:!0,optimize_for:"SPEED"},nested:{Timestamp:{fields:{seconds:{type:"int64",id:1},nanos:{type:"int32",id:2}}},FileDescriptorSet:{fields:{file:{rule:"repeated",type:"FileDescriptorProto",id:1}}},FileDescriptorProto:{fields:{name:{type:"string",id:1},package:{type:"string",id:2},dependency:{rule:"repeated",type:"string",id:3},publicDependency:{rule:"repeated",type:"int32",id:10,options:{packed:!1}},weakDependency:{rule:"repeated",type:"int32",id:11,options:{packed:!1}},messageType:{rule:"repeated",type:"DescriptorProto",id:4},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:5},service:{rule:"repeated",type:"ServiceDescriptorProto",id:6},extension:{rule:"repeated",type:"FieldDescriptorProto",id:7},options:{type:"FileOptions",id:8},sourceCodeInfo:{type:"SourceCodeInfo",id:9},syntax:{type:"string",id:12}}},DescriptorProto:{fields:{name:{type:"string",id:1},field:{rule:"repeated",type:"FieldDescriptorProto",id:2},extension:{rule:"repeated",type:"FieldDescriptorProto",id:6},nestedType:{rule:"repeated",type:"DescriptorProto",id:3},enumType:{rule:"repeated",type:"EnumDescriptorProto",id:4},extensionRange:{rule:"repeated",type:"ExtensionRange",id:5},oneofDecl:{rule:"repeated",type:"OneofDescriptorProto",id:8},options:{type:"MessageOptions",id:7},reservedRange:{rule:"repeated",type:"ReservedRange",id:9},reservedName:{rule:"repeated",type:"string",id:10}},nested:{ExtensionRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}},ReservedRange:{fields:{start:{type:"int32",id:1},end:{type:"int32",id:2}}}}},FieldDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:3},label:{type:"Label",id:4},type:{type:"Type",id:5},typeName:{type:"string",id:6},extendee:{type:"string",id:2},defaultValue:{type:"string",id:7},oneofIndex:{type:"int32",id:9},jsonName:{type:"string",id:10},options:{type:"FieldOptions",id:8}},nested:{Type:{values:{TYPE_DOUBLE:1,TYPE_FLOAT:2,TYPE_INT64:3,TYPE_UINT64:4,TYPE_INT32:5,TYPE_FIXED64:6,TYPE_FIXED32:7,TYPE_BOOL:8,TYPE_STRING:9,TYPE_GROUP:10,TYPE_MESSAGE:11,TYPE_BYTES:12,TYPE_UINT32:13,TYPE_ENUM:14,TYPE_SFIXED32:15,TYPE_SFIXED64:16,TYPE_SINT32:17,TYPE_SINT64:18}},Label:{values:{LABEL_OPTIONAL:1,LABEL_REQUIRED:2,LABEL_REPEATED:3}}}},OneofDescriptorProto:{fields:{name:{type:"string",id:1},options:{type:"OneofOptions",id:2}}},EnumDescriptorProto:{fields:{name:{type:"string",id:1},value:{rule:"repeated",type:"EnumValueDescriptorProto",id:2},options:{type:"EnumOptions",id:3}}},EnumValueDescriptorProto:{fields:{name:{type:"string",id:1},number:{type:"int32",id:2},options:{type:"EnumValueOptions",id:3}}},ServiceDescriptorProto:{fields:{name:{type:"string",id:1},method:{rule:"repeated",type:"MethodDescriptorProto",id:2},options:{type:"ServiceOptions",id:3}}},MethodDescriptorProto:{fields:{name:{type:"string",id:1},inputType:{type:"string",id:2},outputType:{type:"string",id:3},options:{type:"MethodOptions",id:4},clientStreaming:{type:"bool",id:5},serverStreaming:{type:"bool",id:6}}},FileOptions:{fields:{javaPackage:{type:"string",id:1},javaOuterClassname:{type:"string",id:8},javaMultipleFiles:{type:"bool",id:10},javaGenerateEqualsAndHash:{type:"bool",id:20,options:{deprecated:!0}},javaStringCheckUtf8:{type:"bool",id:27},optimizeFor:{type:"OptimizeMode",id:9,options:{default:"SPEED"}},goPackage:{type:"string",id:11},ccGenericServices:{type:"bool",id:16},javaGenericServices:{type:"bool",id:17},pyGenericServices:{type:"bool",id:18},deprecated:{type:"bool",id:23},ccEnableArenas:{type:"bool",id:31},objcClassPrefix:{type:"string",id:36},csharpNamespace:{type:"string",id:37},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[38,38]],nested:{OptimizeMode:{values:{SPEED:1,CODE_SIZE:2,LITE_RUNTIME:3}}}},MessageOptions:{fields:{messageSetWireFormat:{type:"bool",id:1},noStandardDescriptorAccessor:{type:"bool",id:2},deprecated:{type:"bool",id:3},mapEntry:{type:"bool",id:7},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[8,8]]},FieldOptions:{fields:{ctype:{type:"CType",id:1,options:{default:"STRING"}},packed:{type:"bool",id:2},jstype:{type:"JSType",id:6,options:{default:"JS_NORMAL"}},lazy:{type:"bool",id:5},deprecated:{type:"bool",id:3},weak:{type:"bool",id:10},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]],reserved:[[4,4]],nested:{CType:{values:{STRING:0,CORD:1,STRING_PIECE:2}},JSType:{values:{JS_NORMAL:0,JS_STRING:1,JS_NUMBER:2}}}},OneofOptions:{fields:{uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumOptions:{fields:{allowAlias:{type:"bool",id:2},deprecated:{type:"bool",id:3},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},EnumValueOptions:{fields:{deprecated:{type:"bool",id:1},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},ServiceOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},MethodOptions:{fields:{deprecated:{type:"bool",id:33},uninterpretedOption:{rule:"repeated",type:"UninterpretedOption",id:999}},extensions:[[1e3,536870911]]},UninterpretedOption:{fields:{name:{rule:"repeated",type:"NamePart",id:2},identifierValue:{type:"string",id:3},positiveIntValue:{type:"uint64",id:4},negativeIntValue:{type:"int64",id:5},doubleValue:{type:"double",id:6},stringValue:{type:"bytes",id:7},aggregateValue:{type:"string",id:8}},nested:{NamePart:{fields:{namePart:{rule:"required",type:"string",id:1},isExtension:{rule:"required",type:"bool",id:2}}}}},SourceCodeInfo:{fields:{location:{rule:"repeated",type:"Location",id:1}},nested:{Location:{fields:{path:{rule:"repeated",type:"int32",id:1},span:{rule:"repeated",type:"int32",id:2},leadingComments:{type:"string",id:3},trailingComments:{type:"string",id:4},leadingDetachedComments:{rule:"repeated",type:"string",id:6}}}}},GeneratedCodeInfo:{fields:{annotation:{rule:"repeated",type:"Annotation",id:1}},nested:{Annotation:{fields:{path:{rule:"repeated",type:"int32",id:1},sourceFile:{type:"string",id:2},begin:{type:"int32",id:3},end:{type:"int32",id:4}}}}},Struct:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Value:{oneofs:{kind:{oneof:["nullValue","numberValue","stringValue","boolValue","structValue","listValue"]}},fields:{nullValue:{type:"NullValue",id:1},numberValue:{type:"double",id:2},stringValue:{type:"string",id:3},boolValue:{type:"bool",id:4},structValue:{type:"Struct",id:5},listValue:{type:"ListValue",id:6}}},NullValue:{values:{NULL_VALUE:0}},ListValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},Empty:{fields:{}},DoubleValue:{fields:{value:{type:"double",id:1}}},FloatValue:{fields:{value:{type:"float",id:1}}},Int64Value:{fields:{value:{type:"int64",id:1}}},UInt64Value:{fields:{value:{type:"uint64",id:1}}},Int32Value:{fields:{value:{type:"int32",id:1}}},UInt32Value:{fields:{value:{type:"uint32",id:1}}},BoolValue:{fields:{value:{type:"bool",id:1}}},StringValue:{fields:{value:{type:"string",id:1}}},BytesValue:{fields:{value:{type:"bytes",id:1}}},Any:{fields:{typeUrl:{type:"string",id:1},value:{type:"bytes",id:2}}}}},firestore:{nested:{v1:{options:{csharp_namespace:"Google.Cloud.Firestore.V1",go_package:"google.golang.org/genproto/googleapis/firestore/v1;firestore",java_multiple_files:!0,java_outer_classname:"WriteProto",java_package:"com.google.firestore.v1",objc_class_prefix:"GCFS",php_namespace:"Google\\Cloud\\Firestore\\V1",ruby_package:"Google::Cloud::Firestore::V1"},nested:{AggregationResult:{fields:{aggregateFields:{keyType:"string",type:"Value",id:2}}},BitSequence:{fields:{bitmap:{type:"bytes",id:1},padding:{type:"int32",id:2}}},BloomFilter:{fields:{bits:{type:"BitSequence",id:1},hashCount:{type:"int32",id:2}}},DocumentMask:{fields:{fieldPaths:{rule:"repeated",type:"string",id:1}}},Precondition:{oneofs:{conditionType:{oneof:["exists","updateTime"]}},fields:{exists:{type:"bool",id:1},updateTime:{type:"google.protobuf.Timestamp",id:2}}},TransactionOptions:{oneofs:{mode:{oneof:["readOnly","readWrite"]}},fields:{readOnly:{type:"ReadOnly",id:2},readWrite:{type:"ReadWrite",id:3}},nested:{ReadWrite:{fields:{retryTransaction:{type:"bytes",id:1}}},ReadOnly:{oneofs:{consistencySelector:{oneof:["readTime"]}},fields:{readTime:{type:"google.protobuf.Timestamp",id:2}}}}},Document:{fields:{name:{type:"string",id:1},fields:{keyType:"string",type:"Value",id:2},createTime:{type:"google.protobuf.Timestamp",id:3},updateTime:{type:"google.protobuf.Timestamp",id:4}}},Value:{oneofs:{valueType:{oneof:["nullValue","booleanValue","integerValue","doubleValue","timestampValue","stringValue","bytesValue","referenceValue","geoPointValue","arrayValue","mapValue"]}},fields:{nullValue:{type:"google.protobuf.NullValue",id:11},booleanValue:{type:"bool",id:1},integerValue:{type:"int64",id:2},doubleValue:{type:"double",id:3},timestampValue:{type:"google.protobuf.Timestamp",id:10},stringValue:{type:"string",id:17},bytesValue:{type:"bytes",id:18},referenceValue:{type:"string",id:5},geoPointValue:{type:"google.type.LatLng",id:8},arrayValue:{type:"ArrayValue",id:9},mapValue:{type:"MapValue",id:6}}},ArrayValue:{fields:{values:{rule:"repeated",type:"Value",id:1}}},MapValue:{fields:{fields:{keyType:"string",type:"Value",id:1}}},Firestore:{options:{"(google.api.default_host)":"firestore.googleapis.com","(google.api.oauth_scopes)":"https://www.googleapis.com/auth/cloud-platform,https://www.googleapis.com/auth/datastore"},methods:{GetDocument:{requestType:"GetDocumentRequest",responseType:"Document",options:{"(google.api.http).get":"/v1/{name=projects/*/databases/*/documents/*/**}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{name=projects/*/databases/*/documents/*/**}"}}]},ListDocuments:{requestType:"ListDocumentsRequest",responseType:"ListDocumentsResponse",options:{"(google.api.http).get":"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"},parsedOptions:[{"(google.api.http)":{get:"/v1/{parent=projects/*/databases/*/documents/*/**}/{collection_id}"}}]},UpdateDocument:{requestType:"UpdateDocumentRequest",responseType:"Document",options:{"(google.api.http).patch":"/v1/{document.name=projects/*/databases/*/documents/*/**}","(google.api.http).body":"document","(google.api.method_signature)":"document,update_mask"},parsedOptions:[{"(google.api.http)":{patch:"/v1/{document.name=projects/*/databases/*/documents/*/**}",body:"document"}},{"(google.api.method_signature)":"document,update_mask"}]},DeleteDocument:{requestType:"DeleteDocumentRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).delete":"/v1/{name=projects/*/databases/*/documents/*/**}","(google.api.method_signature)":"name"},parsedOptions:[{"(google.api.http)":{delete:"/v1/{name=projects/*/databases/*/documents/*/**}"}},{"(google.api.method_signature)":"name"}]},BatchGetDocuments:{requestType:"BatchGetDocumentsRequest",responseType:"BatchGetDocumentsResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchGet","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchGet",body:"*"}}]},BeginTransaction:{requestType:"BeginTransactionRequest",responseType:"BeginTransactionResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:beginTransaction","(google.api.http).body":"*","(google.api.method_signature)":"database"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:beginTransaction",body:"*"}},{"(google.api.method_signature)":"database"}]},Commit:{requestType:"CommitRequest",responseType:"CommitResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:commit","(google.api.http).body":"*","(google.api.method_signature)":"database,writes"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:commit",body:"*"}},{"(google.api.method_signature)":"database,writes"}]},Rollback:{requestType:"RollbackRequest",responseType:"google.protobuf.Empty",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:rollback","(google.api.http).body":"*","(google.api.method_signature)":"database,transaction"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:rollback",body:"*"}},{"(google.api.method_signature)":"database,transaction"}]},RunQuery:{requestType:"RunQueryRequest",responseType:"RunQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runQuery",body:"*"}}}]},RunAggregationQuery:{requestType:"RunAggregationQueryRequest",responseType:"RunAggregationQueryResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:runAggregationQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:runAggregationQuery",body:"*"}}}]},PartitionQuery:{requestType:"PartitionQueryRequest",responseType:"PartitionQueryResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:partitionQuery","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery","(google.api.http).additional_bindings.body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:partitionQuery",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:partitionQuery",body:"*"}}}]},Write:{requestType:"WriteRequest",requestStream:!0,responseType:"WriteResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:write","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:write",body:"*"}}]},Listen:{requestType:"ListenRequest",requestStream:!0,responseType:"ListenResponse",responseStream:!0,options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:listen","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:listen",body:"*"}}]},ListCollectionIds:{requestType:"ListCollectionIdsRequest",responseType:"ListCollectionIdsResponse",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds","(google.api.http).body":"*","(google.api.http).additional_bindings.post":"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds","(google.api.http).additional_bindings.body":"*","(google.api.method_signature)":"parent"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents}:listCollectionIds",body:"*",additional_bindings:{post:"/v1/{parent=projects/*/databases/*/documents/*/**}:listCollectionIds",body:"*"}}},{"(google.api.method_signature)":"parent"}]},BatchWrite:{requestType:"BatchWriteRequest",responseType:"BatchWriteResponse",options:{"(google.api.http).post":"/v1/{database=projects/*/databases/*}/documents:batchWrite","(google.api.http).body":"*"},parsedOptions:[{"(google.api.http)":{post:"/v1/{database=projects/*/databases/*}/documents:batchWrite",body:"*"}}]},CreateDocument:{requestType:"CreateDocumentRequest",responseType:"Document",options:{"(google.api.http).post":"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}","(google.api.http).body":"document"},parsedOptions:[{"(google.api.http)":{post:"/v1/{parent=projects/*/databases/*/documents/**}/{collection_id}",body:"document"}}]}}},GetDocumentRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:5}}},ListDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:3},pageToken:{type:"string",id:4},orderBy:{type:"string",id:6},mask:{type:"DocumentMask",id:7},transaction:{type:"bytes",id:8},readTime:{type:"google.protobuf.Timestamp",id:10},showMissing:{type:"bool",id:12}}},ListDocumentsResponse:{fields:{documents:{rule:"repeated",type:"Document",id:1},nextPageToken:{type:"string",id:2}}},CreateDocumentRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},collectionId:{type:"string",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}},documentId:{type:"string",id:3},document:{type:"Document",id:4,options:{"(google.api.field_behavior)":"REQUIRED"}},mask:{type:"DocumentMask",id:5}}},UpdateDocumentRequest:{fields:{document:{type:"Document",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},updateMask:{type:"DocumentMask",id:2},mask:{type:"DocumentMask",id:3},currentDocument:{type:"Precondition",id:4}}},DeleteDocumentRequest:{fields:{name:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},currentDocument:{type:"Precondition",id:2}}},BatchGetDocumentsRequest:{oneofs:{consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},documents:{rule:"repeated",type:"string",id:2},mask:{type:"DocumentMask",id:3},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:7}}},BatchGetDocumentsResponse:{oneofs:{result:{oneof:["found","missing"]}},fields:{found:{type:"Document",id:1},missing:{type:"string",id:2},transaction:{type:"bytes",id:3},readTime:{type:"google.protobuf.Timestamp",id:4}}},BeginTransactionRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},options:{type:"TransactionOptions",id:2}}},BeginTransactionResponse:{fields:{transaction:{type:"bytes",id:1}}},CommitRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},transaction:{type:"bytes",id:3}}},CommitResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},commitTime:{type:"google.protobuf.Timestamp",id:2}}},RollbackRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},transaction:{type:"bytes",id:2,options:{"(google.api.field_behavior)":"REQUIRED"}}}},RunQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},transaction:{type:"bytes",id:5},newTransaction:{type:"TransactionOptions",id:6},readTime:{type:"google.protobuf.Timestamp",id:7}}},RunQueryResponse:{fields:{transaction:{type:"bytes",id:2},document:{type:"Document",id:1},readTime:{type:"google.protobuf.Timestamp",id:3},skippedResults:{type:"int32",id:4}}},RunAggregationQueryRequest:{oneofs:{queryType:{oneof:["structuredAggregationQuery"]},consistencySelector:{oneof:["transaction","newTransaction","readTime"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredAggregationQuery:{type:"StructuredAggregationQuery",id:2},transaction:{type:"bytes",id:4},newTransaction:{type:"TransactionOptions",id:5},readTime:{type:"google.protobuf.Timestamp",id:6}}},RunAggregationQueryResponse:{fields:{result:{type:"AggregationResult",id:1},transaction:{type:"bytes",id:2},readTime:{type:"google.protobuf.Timestamp",id:3}}},PartitionQueryRequest:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},structuredQuery:{type:"StructuredQuery",id:2},partitionCount:{type:"int64",id:3},pageToken:{type:"string",id:4},pageSize:{type:"int32",id:5}}},PartitionQueryResponse:{fields:{partitions:{rule:"repeated",type:"Cursor",id:1},nextPageToken:{type:"string",id:2}}},WriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},streamId:{type:"string",id:2},writes:{rule:"repeated",type:"Write",id:3},streamToken:{type:"bytes",id:4},labels:{keyType:"string",type:"string",id:5}}},WriteResponse:{fields:{streamId:{type:"string",id:1},streamToken:{type:"bytes",id:2},writeResults:{rule:"repeated",type:"WriteResult",id:3},commitTime:{type:"google.protobuf.Timestamp",id:4}}},ListenRequest:{oneofs:{targetChange:{oneof:["addTarget","removeTarget"]}},fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},addTarget:{type:"Target",id:2},removeTarget:{type:"int32",id:3},labels:{keyType:"string",type:"string",id:4}}},ListenResponse:{oneofs:{responseType:{oneof:["targetChange","documentChange","documentDelete","documentRemove","filter"]}},fields:{targetChange:{type:"TargetChange",id:2},documentChange:{type:"DocumentChange",id:3},documentDelete:{type:"DocumentDelete",id:4},documentRemove:{type:"DocumentRemove",id:6},filter:{type:"ExistenceFilter",id:5}}},Target:{oneofs:{targetType:{oneof:["query","documents"]},resumeType:{oneof:["resumeToken","readTime"]}},fields:{query:{type:"QueryTarget",id:2},documents:{type:"DocumentsTarget",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:11},targetId:{type:"int32",id:5},once:{type:"bool",id:6},expectedCount:{type:"google.protobuf.Int32Value",id:12}},nested:{DocumentsTarget:{fields:{documents:{rule:"repeated",type:"string",id:2}}},QueryTarget:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{parent:{type:"string",id:1},structuredQuery:{type:"StructuredQuery",id:2}}}}},TargetChange:{fields:{targetChangeType:{type:"TargetChangeType",id:1},targetIds:{rule:"repeated",type:"int32",id:2},cause:{type:"google.rpc.Status",id:3},resumeToken:{type:"bytes",id:4},readTime:{type:"google.protobuf.Timestamp",id:6}},nested:{TargetChangeType:{values:{NO_CHANGE:0,ADD:1,REMOVE:2,CURRENT:3,RESET:4}}}},ListCollectionIdsRequest:{fields:{parent:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},pageSize:{type:"int32",id:2},pageToken:{type:"string",id:3}}},ListCollectionIdsResponse:{fields:{collectionIds:{rule:"repeated",type:"string",id:1},nextPageToken:{type:"string",id:2}}},BatchWriteRequest:{fields:{database:{type:"string",id:1,options:{"(google.api.field_behavior)":"REQUIRED"}},writes:{rule:"repeated",type:"Write",id:2},labels:{keyType:"string",type:"string",id:3}}},BatchWriteResponse:{fields:{writeResults:{rule:"repeated",type:"WriteResult",id:1},status:{rule:"repeated",type:"google.rpc.Status",id:2}}},StructuredQuery:{fields:{select:{type:"Projection",id:1},from:{rule:"repeated",type:"CollectionSelector",id:2},where:{type:"Filter",id:3},orderBy:{rule:"repeated",type:"Order",id:4},startAt:{type:"Cursor",id:7},endAt:{type:"Cursor",id:8},offset:{type:"int32",id:6},limit:{type:"google.protobuf.Int32Value",id:5}},nested:{CollectionSelector:{fields:{collectionId:{type:"string",id:2},allDescendants:{type:"bool",id:3}}},Filter:{oneofs:{filterType:{oneof:["compositeFilter","fieldFilter","unaryFilter"]}},fields:{compositeFilter:{type:"CompositeFilter",id:1},fieldFilter:{type:"FieldFilter",id:2},unaryFilter:{type:"UnaryFilter",id:3}}},CompositeFilter:{fields:{op:{type:"Operator",id:1},filters:{rule:"repeated",type:"Filter",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,AND:1,OR:2}}}},FieldFilter:{fields:{field:{type:"FieldReference",id:1},op:{type:"Operator",id:2},value:{type:"Value",id:3}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,LESS_THAN:1,LESS_THAN_OR_EQUAL:2,GREATER_THAN:3,GREATER_THAN_OR_EQUAL:4,EQUAL:5,NOT_EQUAL:6,ARRAY_CONTAINS:7,IN:8,ARRAY_CONTAINS_ANY:9,NOT_IN:10}}}},UnaryFilter:{oneofs:{operandType:{oneof:["field"]}},fields:{op:{type:"Operator",id:1},field:{type:"FieldReference",id:2}},nested:{Operator:{values:{OPERATOR_UNSPECIFIED:0,IS_NAN:2,IS_NULL:3,IS_NOT_NAN:4,IS_NOT_NULL:5}}}},Order:{fields:{field:{type:"FieldReference",id:1},direction:{type:"Direction",id:2}}},FieldReference:{fields:{fieldPath:{type:"string",id:2}}},Projection:{fields:{fields:{rule:"repeated",type:"FieldReference",id:2}}},Direction:{values:{DIRECTION_UNSPECIFIED:0,ASCENDING:1,DESCENDING:2}}}},StructuredAggregationQuery:{oneofs:{queryType:{oneof:["structuredQuery"]}},fields:{structuredQuery:{type:"StructuredQuery",id:1},aggregations:{rule:"repeated",type:"Aggregation",id:3}},nested:{Aggregation:{oneofs:{operator:{oneof:["count","sum","avg"]}},fields:{count:{type:"Count",id:1},sum:{type:"Sum",id:2},avg:{type:"Avg",id:3},alias:{type:"string",id:7}},nested:{Count:{fields:{upTo:{type:"google.protobuf.Int64Value",id:1}}},Sum:{fields:{field:{type:"FieldReference",id:1}}},Avg:{fields:{field:{type:"FieldReference",id:1}}}}}}},Cursor:{fields:{values:{rule:"repeated",type:"Value",id:1},before:{type:"bool",id:2}}},Write:{oneofs:{operation:{oneof:["update","delete","verify","transform"]}},fields:{update:{type:"Document",id:1},delete:{type:"string",id:2},verify:{type:"string",id:5},transform:{type:"DocumentTransform",id:6},updateMask:{type:"DocumentMask",id:3},updateTransforms:{rule:"repeated",type:"DocumentTransform.FieldTransform",id:7},currentDocument:{type:"Precondition",id:4}}},DocumentTransform:{fields:{document:{type:"string",id:1},fieldTransforms:{rule:"repeated",type:"FieldTransform",id:2}},nested:{FieldTransform:{oneofs:{transformType:{oneof:["setToServerValue","increment","maximum","minimum","appendMissingElements","removeAllFromArray"]}},fields:{fieldPath:{type:"string",id:1},setToServerValue:{type:"ServerValue",id:2},increment:{type:"Value",id:3},maximum:{type:"Value",id:4},minimum:{type:"Value",id:5},appendMissingElements:{type:"ArrayValue",id:6},removeAllFromArray:{type:"ArrayValue",id:7}},nested:{ServerValue:{values:{SERVER_VALUE_UNSPECIFIED:0,REQUEST_TIME:1}}}}}},WriteResult:{fields:{updateTime:{type:"google.protobuf.Timestamp",id:1},transformResults:{rule:"repeated",type:"Value",id:2}}},DocumentChange:{fields:{document:{type:"Document",id:1},targetIds:{rule:"repeated",type:"int32",id:5},removedTargetIds:{rule:"repeated",type:"int32",id:6}}},DocumentDelete:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:6},readTime:{type:"google.protobuf.Timestamp",id:4}}},DocumentRemove:{fields:{document:{type:"string",id:1},removedTargetIds:{rule:"repeated",type:"int32",id:2},readTime:{type:"google.protobuf.Timestamp",id:4}}},ExistenceFilter:{fields:{targetId:{type:"int32",id:1},count:{type:"int32",id:2},unchangedNames:{type:"BloomFilter",id:3}}}}}}},api:{options:{go_package:"google.golang.org/genproto/googleapis/api/annotations;annotations",java_multiple_files:!0,java_outer_classname:"HttpProto",java_package:"com.google.api",objc_class_prefix:"GAPI",cc_enable_arenas:!0},nested:{http:{type:"HttpRule",id:72295728,extend:"google.protobuf.MethodOptions"},Http:{fields:{rules:{rule:"repeated",type:"HttpRule",id:1}}},HttpRule:{oneofs:{pattern:{oneof:["get","put","post","delete","patch","custom"]}},fields:{get:{type:"string",id:2},put:{type:"string",id:3},post:{type:"string",id:4},delete:{type:"string",id:5},patch:{type:"string",id:6},custom:{type:"CustomHttpPattern",id:8},selector:{type:"string",id:1},body:{type:"string",id:7},additionalBindings:{rule:"repeated",type:"HttpRule",id:11}}},CustomHttpPattern:{fields:{kind:{type:"string",id:1},path:{type:"string",id:2}}},methodSignature:{rule:"repeated",type:"string",id:1051,extend:"google.protobuf.MethodOptions"},defaultHost:{type:"string",id:1049,extend:"google.protobuf.ServiceOptions"},oauthScopes:{type:"string",id:1050,extend:"google.protobuf.ServiceOptions"},fieldBehavior:{rule:"repeated",type:"google.api.FieldBehavior",id:1052,extend:"google.protobuf.FieldOptions"},FieldBehavior:{values:{FIELD_BEHAVIOR_UNSPECIFIED:0,OPTIONAL:1,REQUIRED:2,OUTPUT_ONLY:3,INPUT_ONLY:4,IMMUTABLE:5,UNORDERED_LIST:6,NON_EMPTY_DEFAULT:7}}}},type:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/type/latlng;latlng",java_multiple_files:!0,java_outer_classname:"LatLngProto",java_package:"com.google.type",objc_class_prefix:"GTP"},nested:{LatLng:{fields:{latitude:{type:"double",id:1},longitude:{type:"double",id:2}}}}},rpc:{options:{cc_enable_arenas:!0,go_package:"google.golang.org/genproto/googleapis/rpc/status;status",java_multiple_files:!0,java_outer_classname:"StatusProto",java_package:"com.google.rpc",objc_class_prefix:"RPC"},nested:{Status:{fields:{code:{type:"int32",id:1},message:{type:"string",id:2},details:{rule:"repeated",type:"google.protobuf.Any",id:3}}}}}}}},fue={nested:o6},pue=Object.freeze({__proto__:null,nested:o6,default:fue});var gue={longs:String,enums:String,defaults:!0,oneofs:!1};function _ue(){let i=Cz.fromJSON(pue,gue);return fd.loadPackageDefinition(i)}function bue(i){let t=_ue();return new kD(t,i)}function vue(){return new CD}function a6(){return process.env.USE_MOCK_PERSISTENCE==="YES"?window:null}function yue(){return null}function Vg(i){return new qI(i,!1)}var xue="ExponentialBackoff",wue=1e3,Cue=1.5,Sue=60*1e3,Eg=class{constructor(t,e,n=wue,r=Cue,s=Sue){this.queue=t,this.timerId=e,this.initialDelayMs=n,this.backoffFactor=r,this.maxDelayMs=s,this.currentBaseMs=0,this.timerPromise=null,this.lastAttemptTime=Date.now(),this.reset()}reset(){this.currentBaseMs=0}resetToMax(){this.currentBaseMs=this.maxDelayMs}backoffAndRun(t){this.cancel();let e=Math.floor(this.currentBaseMs+this.jitterDelayMs()),n=Math.max(0,Date.now()-this.lastAttemptTime),r=Math.max(0,e-n);r>0&&oe(xue,`Backing off for ${r} ms (base delay: ${this.currentBaseMs} ms, delay with jitter: ${e} ms, last attempt: ${n} ms ago)`),this.timerPromise=this.queue.enqueueAfterDelay(this.timerId,r,()=>(this.lastAttemptTime=Date.now(),t())),this.currentBaseMs*=this.backoffFactor,this.currentBaseMs<this.initialDelayMs&&(this.currentBaseMs=this.initialDelayMs),this.currentBaseMs>this.maxDelayMs&&(this.currentBaseMs=this.maxDelayMs)}skipBackoff(){this.timerPromise!==null&&(this.timerPromise.skipDelay(),this.timerPromise=null)}cancel(){this.timerPromise!==null&&(this.timerPromise.cancel(),this.timerPromise=null)}jitterDelayMs(){return(Math.random()-.5)*this.currentBaseMs}};var lz="PersistentStream",kue=60*1e3,Eue=10*1e3,Yy=class{constructor(t,e,n,r,s,o,a,l){this.queue=t,this.idleTimerId=n,this.healthTimerId=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.closeCount=0,this.idleTimer=null,this.healthCheck=null,this.stream=null,this.responseCount=0,this.backoff=new Eg(t,e)}isStarted(){return this.state===1||this.state===5||this.isOpen()}isOpen(){return this.state===2||this.state===3}start(){if(this.responseCount=0,this.state===4){this.performBackoff();return}this.auth()}stop(){return N(this,null,function*(){this.isStarted()&&(yield this.close(0))})}inhibitBackoff(){this.state=0,this.backoff.reset()}markIdle(){this.isOpen()&&this.idleTimer===null&&(this.idleTimer=this.queue.enqueueAfterDelay(this.idleTimerId,kue,()=>this.handleIdleCloseTimer()))}sendRequest(t){this.cancelIdleCheck(),this.stream.send(t)}handleIdleCloseTimer(){return N(this,null,function*(){if(this.isOpen())return this.close(0)})}cancelIdleCheck(){this.idleTimer&&(this.idleTimer.cancel(),this.idleTimer=null)}cancelHealthCheck(){this.healthCheck&&(this.healthCheck.cancel(),this.healthCheck=null)}close(t,e){return N(this,null,function*(){this.cancelIdleCheck(),this.cancelHealthCheck(),this.backoff.cancel(),this.closeCount++,t!==4?this.backoff.reset():e&&e.code===K.RESOURCE_EXHAUSTED?(xi(e.toString()),xi("Using maximum backoff delay to prevent overloading the backend."),this.backoff.resetToMax()):e&&e.code===K.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.tearDown(),this.stream.close(),this.stream=null),this.state=t,yield this.listener.onClose(e)})}tearDown(){}auth(){this.state=1;let t=this.getCloseGuardedDispatcher(this.closeCount),e=this.closeCount;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([n,r])=>{this.closeCount===e&&this.startStream(n,r)},n=>{t(()=>{let r=new ie(K.UNKNOWN,"Fetching auth token failed: "+n.message);return this.handleStreamClose(r)})})}startStream(t,e){let n=this.getCloseGuardedDispatcher(this.closeCount);this.stream=this.startRpc(t,e),this.stream.onConnected(()=>{n(()=>this.listener.onConnected())}),this.stream.onOpen(()=>{n(()=>(this.state=2,this.healthCheck=this.queue.enqueueAfterDelay(this.healthTimerId,Eue,()=>(this.isOpen()&&(this.state=3),Promise.resolve())),this.listener.onOpen()))}),this.stream.onClose(r=>{n(()=>this.handleStreamClose(r))}),this.stream.onMessage(r=>{n(()=>++this.responseCount===1?this.onFirst(r):this.onNext(r))})}performBackoff(){this.state=5,this.backoff.backoffAndRun(()=>N(this,null,function*(){this.state=0,this.start()}))}handleStreamClose(t){return oe(lz,`close with error: ${t}`),this.stream=null,this.close(4,t)}getCloseGuardedDispatcher(t){return e=>{this.queue.enqueueAndForget(()=>this.closeCount===t?e():(oe(lz,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}},ED=class extends Yy{constructor(t,e,n,r,s,o){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s}startRpc(t,e){return this.connection.openStream("Listen",t,e)}onFirst(t){return this.onNext(t)}onNext(t){this.backoff.reset();let e=Fle(this.serializer,t),n=Lle(t);return this.listener.onWatchChange(e,n)}watch(t){let e={};e.database=$I(this.serializer),e.addTarget=Kle(this.serializer,t);let n=Gle(this.serializer,t);n&&(e.labels=n),this.sendRequest(e)}unwatch(t){let e={};e.database=$I(this.serializer),e.removeTarget=t,this.sendRequest(e)}},TD=class extends Yy{constructor(t,e,n,r,s,o){super(t,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",e,n,r,o),this.serializer=s}get handshakeComplete(){return this.responseCount>0}start(){this.lastStreamToken=void 0,super.start()}tearDown(){this.handshakeComplete&&this.writeMutations([])}startRpc(t,e){return this.connection.openStream("Write",t,e)}onFirst(t){return Ae(!!t.streamToken),this.lastStreamToken=t.streamToken,Ae(!t.writeResults||t.writeResults.length===0),this.listener.onHandshakeComplete()}onNext(t){Ae(!!t.streamToken),this.lastStreamToken=t.streamToken,this.backoff.reset();let e=jle(t.writeResults,t.commitTime),n=Bi(t.commitTime);return this.listener.onMutationResult(n,e)}writeHandshake(){let t={};t.database=$I(this.serializer),this.sendRequest(t)}writeMutations(t){let e={streamToken:this.lastStreamToken,writes:t.map(n=>xg(this.serializer,n))};this.sendRequest(e)}};var ID=class{},DD=class extends ID{constructor(t,e,n,r){super(),this.authCredentials=t,this.appCheckCredentials=e,this.connection=n,this.serializer=r,this.terminated=!1}verifyInitialized(){if(this.terminated)throw new ie(K.FAILED_PRECONDITION,"The client has already been terminated.")}invokeRPC(t,e,n,r){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.invokeRPC(t,GI(e,n),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new ie(K.UNKNOWN,s.toString())})}invokeStreamingRPC(t,e,n,r,s){return this.verifyInitialized(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.invokeStreamingRPC(t,GI(e,n),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===K.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(K.UNKNOWN,o.toString())})}terminate(){this.terminated=!0,this.connection.terminate()}};function Tue(i,t,e,n){return new DD(i,t,e,n)}function Iue(i,t){return N(this,null,function*(){let e=ge(i),n={writes:t.map(r=>xg(e.serializer,r))};yield e.invokeRPC("Commit",e.serializer.databaseId,xt.emptyPath(),n)})}function Due(i,t){return N(this,null,function*(){let e=ge(i),n={documents:t.map(a=>yg(e.serializer,a))},r=yield e.invokeStreamingRPC("BatchGetDocuments",e.serializer.databaseId,xt.emptyPath(),n,t.length),s=new Map;r.forEach(a=>{let l=Rle(e.serializer,a);s.set(l.key.toString(),l)});let o=[];return t.forEach(a=>{let l=s.get(a.toString());Ae(!!l),o.push(l)}),o})}function Mue(i,t,e){let n=ge(i);return n.verifyInitialized(),new TD(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,e)}function Aue(i,t,e){let n=ge(i);return n.verifyInitialized(),new ED(t,n.connection,n.authCredentials,n.appCheckCredentials,n.serializer,e)}var Oue="OnlineStateTracker",cz=1,dz=10*1e3,MD=class{constructor(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.watchStreamFailures=0,this.onlineStateTimer=null,this.shouldWarnClientIsOffline=!0}handleWatchStreamStart(){this.watchStreamFailures===0&&(this.setAndBroadcast("Unknown"),this.onlineStateTimer=this.asyncQueue.enqueueAfterDelay("online_state_timeout",dz,()=>(this.onlineStateTimer=null,this.logClientOfflineWarningIfNecessary(`Backend didn't respond within ${dz/1e3} seconds.`),this.setAndBroadcast("Offline"),Promise.resolve())))}handleWatchStreamFailure(t){this.state==="Online"?this.setAndBroadcast("Unknown"):(this.watchStreamFailures++,this.watchStreamFailures>=cz&&(this.clearOnlineStateTimer(),this.logClientOfflineWarningIfNecessary(`Connection failed ${cz} times. Most recent error: ${t.toString()}`),this.setAndBroadcast("Offline")))}set(t){this.clearOnlineStateTimer(),this.watchStreamFailures=0,t==="Online"&&(this.shouldWarnClientIsOffline=!1),this.setAndBroadcast(t)}setAndBroadcast(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}logClientOfflineWarningIfNecessary(t){let e=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.shouldWarnClientIsOffline?(xi(e),this.shouldWarnClientIsOffline=!1):oe(Oue,e)}clearOnlineStateTimer(){this.onlineStateTimer!==null&&(this.onlineStateTimer.cancel(),this.onlineStateTimer=null)}};var Sd="RemoteStore",Pue=10,AD=class{constructor(t,e,n,r,s){this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.writePipeline=[],this.listenTargets=new Map,this.offlineCauses=new Set,this.onNetworkStatusChange=[],this.connectivityMonitor=s,this.connectivityMonitor.addCallback(o=>{n.enqueueAndForget(()=>N(this,null,function*(){jl(this)&&(oe(Sd,"Restarting streams for network reachability change."),yield Xue(this))}))}),this.onlineStateTracker=new MD(n,r)}};function Rue(i,t,e,n,r){return new AD(i,t,e,n,r)}function Fue(i){let t=ge(i);return t.offlineCauses.delete(0),zg(t)}function zg(i){return N(this,null,function*(){if(jl(i))for(let t of i.onNetworkStatusChange)yield t(!0)})}function Nue(i){return N(this,null,function*(){let t=ge(i);t.offlineCauses.add(0),yield nm(t),t.onlineStateTracker.set("Offline")})}function nm(i){return N(this,null,function*(){for(let t of i.onNetworkStatusChange)yield t(!1)})}function Lue(i){return N(this,null,function*(){let t=ge(i);oe(Sd,"RemoteStore shutting down."),t.offlineCauses.add(5),yield nm(t),t.connectivityMonitor.shutdown(),t.onlineStateTracker.set("Unknown")})}function Ex(i,t){let e=ge(i);e.listenTargets.has(t.targetId)||(e.listenTargets.set(t.targetId,t),NM(e)?FM(e):om(e).isOpen()&&RM(e,t))}function rm(i,t){let e=ge(i),n=om(e);e.listenTargets.delete(t),n.isOpen()&&l6(e,t),e.listenTargets.size===0&&(n.isOpen()?n.markIdle():jl(e)&&e.onlineStateTracker.set("Unknown"))}function RM(i,t){if(i.watchChangeAggregator.recordPendingTargetRequest(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(Ne.min())>0){let e=i.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(e)}om(i).watch(t)}function l6(i,t){i.watchChangeAggregator.recordPendingTargetRequest(t),om(i).unwatch(t)}function FM(i){i.watchChangeAggregator=new HI({getRemoteKeysForTarget:t=>i.remoteSyncer.getRemoteKeysForTarget(t),getTargetDataForTarget:t=>i.listenTargets.get(t)||null,getDatabaseId:()=>i.datastore.serializer.databaseId}),om(i).start(),i.onlineStateTracker.handleWatchStreamStart()}function NM(i){return jl(i)&&!om(i).isStarted()&&i.listenTargets.size>0}function jl(i){return ge(i).offlineCauses.size===0}function c6(i){i.watchChangeAggregator=void 0}function Bue(i){return N(this,null,function*(){i.onlineStateTracker.set("Online")})}function Vue(i){return N(this,null,function*(){i.listenTargets.forEach((t,e)=>{RM(i,t)})})}function zue(i,t){return N(this,null,function*(){c6(i),NM(i)?(i.onlineStateTracker.handleWatchStreamFailure(t),FM(i)):i.onlineStateTracker.set("Unknown")})}function jue(i,t,e){return N(this,null,function*(){if(i.onlineStateTracker.set("Online"),t instanceof Py&&t.state===2&&t.cause){try{yield Hue(i,t)}catch(n){oe(Sd,"Failed to remove targets %s: %s ",t.targetIds.join(","),n),yield Qy(i,n)}return}if(t instanceof Ph?i.watchChangeAggregator.handleDocumentChange(t):t instanceof Oy?i.watchChangeAggregator.handleExistenceFilter(t):i.watchChangeAggregator.handleTargetChange(t),!e.isEqual(Ne.min()))try{let n=yield Zj(i.localStore);e.compareTo(n)>=0&&(yield Uue(i,e))}catch(n){oe(Sd,"Failed to raise snapshot:",n),yield Qy(i,n)}})}function Qy(i,t,e){return N(this,null,function*(){if(zl(t))i.offlineCauses.add(1),yield nm(i),i.onlineStateTracker.set("Offline"),e||(e=()=>Zj(i.localStore)),i.asyncQueue.enqueueRetryable(()=>N(this,null,function*(){oe(Sd,"Retrying IndexedDB access"),yield e(),i.offlineCauses.delete(1),yield zg(i)}));else throw t})}function d6(i,t){return t().catch(e=>Qy(i,e,t))}function Uue(i,t){let e=i.watchChangeAggregator.createRemoteEvent(t);return e.targetChanges.forEach((n,r)=>{if(n.resumeToken.approximateByteSize()>0){let s=i.listenTargets.get(r);s&&i.listenTargets.set(r,s.withResumeToken(n.resumeToken,t))}}),e.targetMismatches.forEach((n,r)=>{let s=i.listenTargets.get(n);if(!s)return;i.listenTargets.set(n,s.withResumeToken(zi.EMPTY_BYTE_STRING,s.snapshotVersion)),l6(i,n);let o=new Hh(s.target,n,r,s.sequenceNumber);RM(i,o)}),i.remoteSyncer.applyRemoteEvent(e)}function Hue(i,t){return N(this,null,function*(){let e=t.cause;for(let n of t.targetIds)i.listenTargets.has(n)&&(yield i.remoteSyncer.rejectListen(n,e),i.listenTargets.delete(n),i.watchChangeAggregator.removeTarget(n))})}function sm(i){return N(this,null,function*(){let t=ge(i),e=Ul(t),n=t.writePipeline.length>0?t.writePipeline[t.writePipeline.length-1].batchId:Tl;for(;que(t);)try{let r=yield Ude(t.localStore,n);if(r===null){t.writePipeline.length===0&&e.markIdle();break}else n=r.batchId,Wue(t,r)}catch(r){yield Qy(t,r)}u6(t)&&h6(t)})}function que(i){return jl(i)&&i.writePipeline.length<Pue}function Wue(i,t){i.writePipeline.push(t);let e=Ul(i);e.isOpen()&&e.handshakeComplete&&e.writeMutations(t.mutations)}function u6(i){return jl(i)&&!Ul(i).isStarted()&&i.writePipeline.length>0}function h6(i){Ul(i).start()}function Gue(i){return N(this,null,function*(){Ul(i).writeHandshake()})}function $ue(i){return N(this,null,function*(){let t=Ul(i);for(let e of i.writePipeline)t.writeMutations(e.mutations)})}function Kue(i,t,e){return N(this,null,function*(){let n=i.writePipeline.shift(),r=VI.from(n,t,e);yield d6(i,()=>i.remoteSyncer.applySuccessfulWrite(r)),yield sm(i)})}function Yue(i,t){return N(this,null,function*(){t&&Ul(i).handshakeComplete&&(yield Que(i,t)),u6(i)&&h6(i)})}function Que(i,t){return N(this,null,function*(){if(_le(t.code)){let e=i.writePipeline.shift();Ul(i).inhibitBackoff(),yield d6(i,()=>i.remoteSyncer.rejectFailedWrite(e.batchId,t)),yield sm(i)}})}function Xue(i){return N(this,null,function*(){let t=ge(i);t.offlineCauses.add(4),yield nm(t),t.onlineStateTracker.set("Unknown"),t.offlineCauses.delete(4),yield zg(t)})}function uz(i,t){return N(this,null,function*(){let e=ge(i);e.asyncQueue.verifyOperationInProgress(),oe(Sd,"RemoteStore received new credentials");let n=jl(e);e.offlineCauses.add(3),yield nm(e),n&&e.onlineStateTracker.set("Unknown"),yield e.remoteSyncer.handleCredentialChange(t),e.offlineCauses.delete(3),yield zg(e)})}function OD(i,t){return N(this,null,function*(){let e=ge(i);t?(e.offlineCauses.delete(2),yield zg(e)):t||(e.offlineCauses.add(2),yield nm(e),e.onlineStateTracker.set("Unknown"))})}function om(i){return i.watchStream||(i.watchStream=Aue(i.datastore,i.asyncQueue,{onConnected:Bue.bind(null,i),onOpen:Vue.bind(null,i),onClose:zue.bind(null,i),onWatchChange:jue.bind(null,i)}),i.onNetworkStatusChange.push(t=>N(this,null,function*(){t?(i.watchStream.inhibitBackoff(),NM(i)?FM(i):i.onlineStateTracker.set("Unknown")):(yield i.watchStream.stop(),c6(i))}))),i.watchStream}function Ul(i){return i.writeStream||(i.writeStream=Mue(i.datastore,i.asyncQueue,{onConnected:()=>Promise.resolve(),onOpen:Gue.bind(null,i),onClose:Yue.bind(null,i),onHandshakeComplete:$ue.bind(null,i),onMutationResult:Kue.bind(null,i)}),i.onNetworkStatusChange.push(t=>N(this,null,function*(){t?(i.writeStream.inhibitBackoff(),yield sm(i)):(yield i.writeStream.stop(),i.writePipeline.length>0&&(oe(Sd,`Stopping write stream with ${i.writePipeline.length} pending writes`),i.writePipeline=[]))}))),i.writeStream}var Zue="AsyncQueue",PD=class i{constructor(t,e,n,r,s){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=s,this.deferred=new Gi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,e,n,r,s){let o=Date.now()+n,a=new i(t,e,o,r,s);return a.start(n),a}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(K.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}};function am(i,t){if(xi(Zue,`${t}: ${i}`),zl(i))return new ie(K.UNAVAILABLE,`${t}: ${i}`);throw i}var Xy=class i{constructor(t){t?this.comparator=(e,n)=>t(e,n)||pe.comparator(e.key,n.key):this.comparator=(e,n)=>pe.comparator(e.key,n.key),this.keyedMap=Jp(),this.sortedSet=new si(this.comparator)}static emptySet(t){return new i(t.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){let e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((e,n)=>(t(e),!1))}add(t){let e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))}delete(t){let e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this}isEqual(t){if(!(t instanceof i)||this.size!==t.size)return!1;let e=this.sortedSet.getIterator(),n=t.sortedSet.getIterator();for(;e.hasNext();){let r=e.getNext().key,s=n.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){let t=[];return this.forEach(e=>{t.push(e.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,e){let n=new i;return n.comparator=this.comparator,n.keyedMap=t,n.sortedSet=e,n}};var Zy=class{constructor(){this.changeMap=new si(pe.comparator)}track(t){let e=t.doc.key,n=this.changeMap.get(e);if(!n){this.changeMap=this.changeMap.insert(e,t);return}t.type!==0&&n.type===3?this.changeMap=this.changeMap.insert(e,t):t.type===3&&n.type!==1?this.changeMap=this.changeMap.insert(e,{type:n.type,doc:t.doc}):t.type===2&&n.type===2?this.changeMap=this.changeMap.insert(e,{type:2,doc:t.doc}):t.type===2&&n.type===0?this.changeMap=this.changeMap.insert(e,{type:0,doc:t.doc}):t.type===1&&n.type===0?this.changeMap=this.changeMap.remove(e):t.type===1&&n.type===2?this.changeMap=this.changeMap.insert(e,{type:1,doc:n.doc}):t.type===0&&n.type===1?this.changeMap=this.changeMap.insert(e,{type:2,doc:t.doc}):Ce()}getChanges(){let t=[];return this.changeMap.inorderTraversal((e,n)=>{t.push(n)}),t}},$h=class i{constructor(t,e,n,r,s,o,a,l,c){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(t,e,n,r,s){let o=[];return e.forEach(a=>{o.push({type:0,doc:a})}),new i(t,e,Xy.emptySet(e),o,n,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(this.fromCache!==t.fromCache||this.hasCachedResults!==t.hasCachedResults||this.syncStateChanged!==t.syncStateChanged||!this.mutatedKeys.isEqual(t.mutatedKeys)||!Ng(this.query,t.query)||!this.docs.isEqual(t.docs)||!this.oldDocs.isEqual(t.oldDocs))return!1;let e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0}};var RD=class{constructor(){this.viewSnap=void 0,this.listeners=[]}hasRemoteListeners(){return this.listeners.some(t=>t.listensToRemoteStore())}};function Jue(){return new FD}var FD=class{constructor(){this.queries=m6(),this.onlineState="Unknown",this.snapshotsInSyncListeners=new Set}terminate(){she(this,new ie(K.ABORTED,"Firestore shutting down"))}};function m6(){return new Co(i=>dj(i),Ng)}function LM(i,t){return N(this,null,function*(){let e=ge(i),n=3,r=t.query,s=e.queries.get(r);s?!s.hasRemoteListeners()&&t.listensToRemoteStore()&&(n=2):(s=new RD,n=t.listensToRemoteStore()?0:1);try{switch(n){case 0:s.viewSnap=yield e.onListen(r,!0);break;case 1:s.viewSnap=yield e.onListen(r,!1);break;case 2:yield e.onFirstRemoteStoreListen(r);break;default:break}}catch(o){let a=am(o,`Initialization of query '${Eh(t.query)}' failed`);t.onError(a);return}e.queries.set(r,s),s.listeners.push(t),t.applyOnlineStateChange(e.onlineState),s.viewSnap&&t.onViewSnapshot(s.viewSnap)&&VM(e)})}function BM(i,t){return N(this,null,function*(){let e=ge(i),n=t.query,r=3,s=e.queries.get(n);if(s){let o=s.listeners.indexOf(t);o>=0&&(s.listeners.splice(o,1),s.listeners.length===0?r=t.listensToRemoteStore()?0:1:!s.hasRemoteListeners()&&t.listensToRemoteStore()&&(r=2))}switch(r){case 0:return e.queries.delete(n),e.onUnlisten(n,!0);case 1:return e.queries.delete(n),e.onUnlisten(n,!1);case 2:return e.onLastRemoteStoreUnlisten(n);default:return}})}function ehe(i,t){let e=ge(i),n=!1;for(let r of t){let s=r.query,o=e.queries.get(s);if(o){for(let a of o.listeners)a.onViewSnapshot(r)&&(n=!0);o.viewSnap=r}}n&&VM(e)}function the(i,t,e){let n=ge(i),r=n.queries.get(t);if(r)for(let s of r.listeners)s.onError(e);n.queries.delete(t)}function ihe(i,t){let e=ge(i);e.onlineState=t;let n=!1;e.queries.forEach((r,s)=>{for(let o of s.listeners)o.applyOnlineStateChange(t)&&(n=!0)}),n&&VM(e)}function nhe(i,t){ge(i).snapshotsInSyncListeners.add(t),t.next()}function rhe(i,t){ge(i).snapshotsInSyncListeners.delete(t)}function she(i,t){let e=ge(i),n=e.queries;e.queries=m6(),n.forEach((r,s)=>{for(let o of s.listeners)o.onError(t)})}function VM(i){i.snapshotsInSyncListeners.forEach(t=>{t.next()})}var f6=function(i){return i.Default="default",i.Cache="cache",i}(f6||{}),Tg=class{constructor(t,e,n){this.query=t,this.queryObserver=e,this.raisedInitialEvent=!1,this.snap=null,this.onlineState="Unknown",this.options=n||{}}onViewSnapshot(t){if(!this.options.includeMetadataChanges){let n=[];for(let r of t.docChanges)r.type!==3&&n.push(r);t=new $h(t.query,t.docs,t.oldDocs,n,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let e=!1;return this.raisedInitialEvent?this.shouldRaiseEvent(t)&&(this.queryObserver.next(t),e=!0):this.shouldRaiseInitialEvent(t,this.onlineState)&&(this.raiseInitialEvent(t),e=!0),this.snap=t,e}onError(t){this.queryObserver.error(t)}applyOnlineStateChange(t){this.onlineState=t;let e=!1;return this.snap&&!this.raisedInitialEvent&&this.shouldRaiseInitialEvent(this.snap,t)&&(this.raiseInitialEvent(this.snap),e=!0),e}shouldRaiseInitialEvent(t,e){if(!t.fromCache||!this.listensToRemoteStore())return!0;let n=e!=="Offline";return this.options.waitForSyncWhenOnline&&n?!1:!t.docs.isEmpty()||t.hasCachedResults||e==="Offline"}shouldRaiseEvent(t){if(t.docChanges.length>0)return!0;let e=this.snap&&this.snap.hasPendingWrites!==t.hasPendingWrites;return t.syncStateChanged||e?this.options.includeMetadataChanges===!0:!1}raiseInitialEvent(t){t=$h.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.raisedInitialEvent=!0,this.queryObserver.next(t)}listensToRemoteStore(){return this.options.source!==f6.Cache}};var ND=class i{constructor(t,e,n,r){this.targetId=t,this.fromCache=e,this.addedKeys=n,this.removedKeys=r}static fromSnapshot(t,e){let n=Je(),r=Je();for(let s of e.docChanges)switch(s.type){case 0:n=n.add(s.doc.key);break;case 1:r=r.add(s.doc.key);break}return new i(t,e.fromCache,n,r)}};var Jy=class{constructor(t){this.serializer=t}toDocumentKey(t){return yo(this.serializer,t)}toMutableDocument(t){return t.metadata.exists?Pj(this.serializer,t.document,!1):$i.newNoDocument(this.toDocumentKey(t.metadata.name),this.toSnapshotVersion(t.metadata.readTime))}toSnapshotVersion(t){return Bi(t)}},LD=class{constructor(t,e,n){this.bundleMetadata=t,this.localStore=e,this.serializer=n,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=p6(t)}addSizedElement(t){this.progress.bytesLoaded+=t.byteLength;let e=this.progress.documentsLoaded;if(t.payload.namedQuery)this.queries.push(t.payload.namedQuery);else if(t.payload.documentMetadata){this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e;let n=xt.fromString(t.payload.documentMetadata.name);this.collectionGroups.add(n.get(n.length-2))}else t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e);return e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null}getQueryDocumentMapping(t){let e=new Map,n=new Jy(this.serializer);for(let r of t)if(r.metadata.queries){let s=n.toDocumentKey(r.metadata.name);for(let o of r.metadata.queries){let a=(e.get(o)||Je()).add(s);e.set(o,a)}}return e}complete(){return N(this,null,function*(){let t=yield Qde(this.localStore,new Jy(this.serializer),this.documents,this.bundleMetadata.id),e=this.getQueryDocumentMapping(this.documents);for(let n of this.queries)yield eue(this.localStore,n,e.get(n.name));return this.progress.taskState="Success",{progress:this.progress,changedCollectionGroups:this.collectionGroups,changedDocs:t}})}};function p6(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}function ohe(i){return{taskState:"Success",documentsLoaded:i.totalDocuments,bytesLoaded:i.totalBytes,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}var ex=class{constructor(t){this.key=t}},tx=class{constructor(t){this.key=t}},ix=class{constructor(t,e){this.query=t,this._syncedDocuments=e,this.syncState=null,this.hasCachedResults=!1,this.current=!1,this.limboDocuments=Je(),this.mutatedKeys=Je(),this.docComparator=hj(t),this.documentSet=new Xy(this.docComparator)}get syncedDocuments(){return this._syncedDocuments}computeDocChanges(t,e){let n=e?e.changeSet:new Zy,r=e?e.documentSet:this.documentSet,s=e?e.mutatedKeys:this.mutatedKeys,o=r,a=!1,l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(t.inorderTraversal((d,u)=>{let h=r.get(d),m=Lg(this.query,u)?u:null,_=h?this.mutatedKeys.has(h.key):!1,b=m?m.hasLocalMutations||this.mutatedKeys.has(m.key)&&m.hasCommittedMutations:!1,v=!1;h&&m?h.data.isEqual(m.data)?_!==b&&(n.track({type:3,doc:m}),v=!0):this.shouldWaitForSyncedDocument(h,m)||(n.track({type:2,doc:m}),v=!0,(l&&this.docComparator(m,l)>0||c&&this.docComparator(m,c)<0)&&(a=!0)):!h&&m?(n.track({type:0,doc:m}),v=!0):h&&!m&&(n.track({type:1,doc:h}),v=!0,(l||c)&&(a=!0)),v&&(m?(o=o.add(m),b?s=s.add(d):s=s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){let d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),n.track({type:1,doc:d})}return{documentSet:o,changeSet:n,needsRefill:a,mutatedKeys:s}}shouldWaitForSyncedDocument(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations}applyChanges(t,e,n,r){let s=this.documentSet;this.documentSet=t.documentSet,this.mutatedKeys=t.mutatedKeys;let o=t.changeSet.getChanges();o.sort((u,h)=>ahe(u.type,h.type)||this.docComparator(u.doc,h.doc)),this.applyTargetChange(n),r=r??!1;let a=e&&!r?this.updateLimboDocuments():[],c=this.limboDocuments.size===0&&this.current&&!r?1:0,d=c!==this.syncState;return this.syncState=c,o.length===0&&!d?{limboChanges:a}:{snapshot:new $h(this.query,t.documentSet,s,o,t.mutatedKeys,c===0,d,!1,n?n.resumeToken.approximateByteSize()>0:!1),limboChanges:a}}applyOnlineStateChange(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({documentSet:this.documentSet,changeSet:new Zy,mutatedKeys:this.mutatedKeys,needsRefill:!1},!1)):{limboChanges:[]}}shouldBeInLimbo(t){return!(this._syncedDocuments.has(t)||!this.documentSet.has(t)||this.documentSet.get(t).hasLocalMutations)}applyTargetChange(t){t&&(t.addedDocuments.forEach(e=>this._syncedDocuments=this._syncedDocuments.add(e)),t.modifiedDocuments.forEach(e=>{}),t.removedDocuments.forEach(e=>this._syncedDocuments=this._syncedDocuments.delete(e)),this.current=t.current)}updateLimboDocuments(){if(!this.current)return[];let t=this.limboDocuments;this.limboDocuments=Je(),this.documentSet.forEach(n=>{this.shouldBeInLimbo(n.key)&&(this.limboDocuments=this.limboDocuments.add(n.key))});let e=[];return t.forEach(n=>{this.limboDocuments.has(n)||e.push(new tx(n))}),this.limboDocuments.forEach(n=>{t.has(n)||e.push(new ex(n))}),e}synchronizeWithPersistedState(t){this._syncedDocuments=t.remoteKeys,this.limboDocuments=Je();let e=this.computeDocChanges(t.documents);return this.applyChanges(e,!0)}computeInitialSnapshot(){return $h.fromInitialDocuments(this.query,this.documentSet,this.mutatedKeys,this.syncState===0,this.hasCachedResults)}};function ahe(i,t){let e=n=>{switch(n){case 0:return 1;case 2:return 2;case 3:return 2;case 1:return 0;default:return Ce()}};return e(i)-e(t)}var Hl="SyncEngine",BD=class{constructor(t,e,n){this.query=t,this.targetId=e,this.view=n}},VD=class{constructor(t){this.key=t,this.receivedDocument=!1}},zD=class{constructor(t,e,n,r,s,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.syncEngineListener={},this.queryViewsByQuery=new Co(a=>dj(a),Ng),this.queriesByTarget=new Map,this.enqueuedLimboResolutions=new Set,this.activeLimboTargetsByKey=new si(pe.comparator),this.activeLimboResolutionsByTarget=new Map,this.limboDocumentRefs=new Cg,this.mutationUserCallbacks={},this.pendingWritesCallbacks=new Map,this.limboTargetIdGenerator=qh.forSyncEngine(),this.onlineState="Unknown",this._isPrimaryClient=void 0}get isPrimaryClient(){return this._isPrimaryClient===!0}};function lhe(i,t,e,n,r,s,o){let a=new zD(i,t,e,n,r,s);return o&&(a._isPrimaryClient=!0),a}function che(i,t,e=!0){return N(this,null,function*(){let n=Tx(i),r,s=n.queryViewsByQuery.get(t);return s?(n.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.computeInitialSnapshot()):r=yield g6(n,t,e,!0),r})}function dhe(i,t){return N(this,null,function*(){let e=Tx(i);yield g6(e,t,!0,!1)})}function g6(i,t,e,n){return N(this,null,function*(){let r=yield Wh(i.localStore,Kn(t)),s=r.targetId,o=i.sharedClientState.addLocalQueryTarget(s,e),a;return n&&(a=yield zM(i,t,s,o==="current",r.resumeToken)),i.isPrimaryClient&&e&&Ex(i.remoteStore,r),a})}function zM(i,t,e,n,r){return N(this,null,function*(){i.applyDocChanges=(u,h,m)=>xhe(i,u,h,m);let s=yield kx(i.localStore,t,!0),o=new ix(t,s.remoteKeys),a=o.computeDocChanges(s.documents),l=vg.createSynthesizedTargetChangeForCurrentChange(e,n&&i.onlineState!=="Offline",r),c=o.applyChanges(a,i.isPrimaryClient,l);HM(i,e,c.limboChanges);let d=new BD(t,e,o);return i.queryViewsByQuery.set(t,d),i.queriesByTarget.has(e)?i.queriesByTarget.get(e).push(t):i.queriesByTarget.set(e,[t]),c.snapshot})}function uhe(i,t,e){return N(this,null,function*(){let n=ge(i),r=n.queryViewsByQuery.get(t),s=n.queriesByTarget.get(r.targetId);if(s.length>1){n.queriesByTarget.set(r.targetId,s.filter(o=>!Ng(o,t))),n.queryViewsByQuery.delete(t);return}n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||(yield Gh(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),e&&rm(n.remoteStore,r.targetId),Kh(n,r.targetId)}).catch(Vl))):(Kh(n,r.targetId),yield Gh(n.localStore,r.targetId,!0))})}function hhe(i,t){return N(this,null,function*(){let e=ge(i),n=e.queryViewsByQuery.get(t),r=e.queriesByTarget.get(n.targetId);e.isPrimaryClient&&r.length===1&&(e.sharedClientState.removeLocalQueryTarget(n.targetId),rm(e.remoteStore,n.targetId))})}function mhe(i,t,e){return N(this,null,function*(){let n=WM(i);try{let r=yield Rde(n.localStore,t);n.sharedClientState.addPendingMutation(r.batchId),vhe(n,r.batchId,e),yield _a(n,r.changes),yield sm(n.remoteStore)}catch(r){let s=am(r,"Failed to persist write");e.reject(s)}})}function _6(i,t){return N(this,null,function*(){let e=ge(i);try{let n=yield Vde(e.localStore,t);t.targetChanges.forEach((r,s)=>{let o=e.activeLimboResolutionsByTarget.get(s);o&&(Ae(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.receivedDocument=!0:r.modifiedDocuments.size>0?Ae(o.receivedDocument):r.removedDocuments.size>0&&(Ae(o.receivedDocument),o.receivedDocument=!1))}),yield _a(e,n,t)}catch(n){yield Vl(n)}})}function hz(i,t,e){let n=ge(i);if(n.isPrimaryClient&&e===0||!n.isPrimaryClient&&e===1){let r=[];n.queryViewsByQuery.forEach((s,o)=>{let a=o.view.applyOnlineStateChange(t);a.snapshot&&r.push(a.snapshot)}),ihe(n.eventManager,t),r.length&&n.syncEngineListener.onWatchChange(r),n.onlineState=t,n.isPrimaryClient&&n.sharedClientState.setOnlineState(t)}}function fhe(i,t,e){return N(this,null,function*(){let n=ge(i);n.sharedClientState.updateQueryState(t,"rejected",e);let r=n.activeLimboResolutionsByTarget.get(t),s=r&&r.key;if(s){let o=new si(pe.comparator);o=o.insert(s,$i.newNoDocument(s,Ne.min()));let a=Je().add(s),l=new bg(Ne.min(),new Map,new si(Ye),o,a);yield _6(n,l),n.activeLimboTargetsByKey=n.activeLimboTargetsByKey.remove(s),n.activeLimboResolutionsByTarget.delete(t),qM(n)}else yield Gh(n.localStore,t,!1).then(()=>Kh(n,t,e)).catch(Vl)})}function phe(i,t){return N(this,null,function*(){let e=ge(i),n=t.batch.batchId;try{let r=yield Fde(e.localStore,t);UM(e,n,null),jM(e,n),e.sharedClientState.updateMutationState(n,"acknowledged"),yield _a(e,r)}catch(r){yield Vl(r)}})}function ghe(i,t,e){return N(this,null,function*(){let n=ge(i);try{let r=yield Lde(n.localStore,t);UM(n,t,e),jM(n,t),n.sharedClientState.updateMutationState(t,"rejected",e),yield _a(n,r)}catch(r){yield Vl(r)}})}function _he(i,t){return N(this,null,function*(){let e=ge(i);jl(e.remoteStore)||oe(Hl,"The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{let n=yield Bde(e.localStore);if(n===Tl){t.resolve();return}let r=e.pendingWritesCallbacks.get(n)||[];r.push(t),e.pendingWritesCallbacks.set(n,r)}catch(n){let r=am(n,"Initialization of waitForPendingWrites() operation failed");t.reject(r)}})}function jM(i,t){(i.pendingWritesCallbacks.get(t)||[]).forEach(e=>{e.resolve()}),i.pendingWritesCallbacks.delete(t)}function bhe(i,t){i.pendingWritesCallbacks.forEach(e=>{e.forEach(n=>{n.reject(new ie(K.CANCELLED,t))})}),i.pendingWritesCallbacks.clear()}function vhe(i,t,e){let n=i.mutationUserCallbacks[i.currentUser.toKey()];n||(n=new si(Ye)),n=n.insert(t,e),i.mutationUserCallbacks[i.currentUser.toKey()]=n}function UM(i,t,e){let n=ge(i),r=n.mutationUserCallbacks[n.currentUser.toKey()];if(r){let s=r.get(t);s&&(e?s.reject(e):s.resolve(),r=r.remove(t)),n.mutationUserCallbacks[n.currentUser.toKey()]=r}}function Kh(i,t,e=null){i.sharedClientState.removeLocalQueryTarget(t);for(let n of i.queriesByTarget.get(t))i.queryViewsByQuery.delete(n),e&&i.syncEngineListener.onWatchError(n,e);i.queriesByTarget.delete(t),i.isPrimaryClient&&i.limboDocumentRefs.removeReferencesForId(t).forEach(r=>{i.limboDocumentRefs.containsKey(r)||b6(i,r)})}function b6(i,t){i.enqueuedLimboResolutions.delete(t.path.canonicalString());let e=i.activeLimboTargetsByKey.get(t);e!==null&&(rm(i.remoteStore,e),i.activeLimboTargetsByKey=i.activeLimboTargetsByKey.remove(t),i.activeLimboResolutionsByTarget.delete(e),qM(i))}function HM(i,t,e){for(let n of e)n instanceof ex?(i.limboDocumentRefs.addReference(n.key,t),yhe(i,n)):n instanceof tx?(oe(Hl,"Document no longer in limbo: "+n.key),i.limboDocumentRefs.removeReference(n.key,t),i.limboDocumentRefs.containsKey(n.key)||b6(i,n.key)):Ce()}function yhe(i,t){let e=t.key,n=e.path.canonicalString();!i.activeLimboTargetsByKey.get(e)&&!i.enqueuedLimboResolutions.has(n)&&(oe(Hl,"New document in limbo: "+e),i.enqueuedLimboResolutions.add(n),qM(i))}function qM(i){for(;i.enqueuedLimboResolutions.size>0&&i.activeLimboTargetsByKey.size<i.maxConcurrentLimboResolutions;){let t=i.enqueuedLimboResolutions.values().next().value;i.enqueuedLimboResolutions.delete(t);let e=new pe(xt.fromString(t)),n=i.limboTargetIdGenerator.next();i.activeLimboResolutionsByTarget.set(n,new VD(e)),i.activeLimboTargetsByKey=i.activeLimboTargetsByKey.insert(e,n),Ex(i.remoteStore,new Hh(Kn(im(e.path)),n,"TargetPurposeLimboResolution",Or.INVALID))}}function _a(i,t,e){return N(this,null,function*(){let n=ge(i),r=[],s=[],o=[];n.queryViewsByQuery.isEmpty()||(n.queryViewsByQuery.forEach((a,l)=>{o.push(n.applyDocChanges(l,t,e).then(c=>{var d;if((c||e)&&n.isPrimaryClient){let u=c?!c.fromCache:(d=e?.targetChanges.get(l.targetId))===null||d===void 0?void 0:d.current;n.sharedClientState.updateQueryState(l.targetId,u?"current":"not-current")}if(c){r.push(c);let u=ND.fromSnapshot(l.targetId,c);s.push(u)}}))}),yield Promise.all(o),n.syncEngineListener.onWatchChange(r),yield jde(n.localStore,s))})}function xhe(i,t,e,n){return N(this,null,function*(){let r=t.view.computeDocChanges(e);r.needsRefill&&(r=yield kx(i.localStore,t.query,!1).then(({documents:l})=>t.view.computeDocChanges(l,r)));let s=n&&n.targetChanges.get(t.targetId),o=n&&n.targetMismatches.get(t.targetId)!=null,a=t.view.applyChanges(r,i.isPrimaryClient,s,o);return HM(i,t.targetId,a.limboChanges),a.snapshot})}function whe(i,t){return N(this,null,function*(){let e=ge(i);if(!e.currentUser.isEqual(t)){oe(Hl,"User change. New user:",t.toKey());let r=yield Xj(e.localStore,t);e.currentUser=t,bhe(e,"'waitForPendingWrites' promise is rejected due to a user change."),e.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),yield _a(e,r.affectedDocuments)}})}function Che(i,t){let e=ge(i),n=e.activeLimboResolutionsByTarget.get(t);if(n&&n.receivedDocument)return Je().add(n.key);{let r=Je(),s=e.queriesByTarget.get(t);if(!s)return r;for(let o of s){let a=e.queryViewsByQuery.get(o);r=r.unionWith(a.view.syncedDocuments)}return r}}function She(i,t){return N(this,null,function*(){let e=ge(i),n=yield kx(e.localStore,t.query,!0),r=t.view.synchronizeWithPersistedState(n);return e.isPrimaryClient&&HM(e,t.targetId,r.limboChanges),r})}function khe(i,t){return N(this,null,function*(){let e=ge(i);return t6(e.localStore,t).then(n=>_a(e,n))})}function Ehe(i,t,e,n){return N(this,null,function*(){let r=ge(i),s=yield Gde(r.localStore,t);if(s===null){oe(Hl,"Cannot apply mutation batch with id: "+t);return}e==="pending"?yield sm(r.remoteStore):e==="acknowledged"||e==="rejected"?(UM(r,t,n||null),jM(r,t),$de(r.localStore,t)):Ce(),yield _a(r,s)})}function The(i,t){return N(this,null,function*(){let e=ge(i);if(Tx(e),WM(e),t===!0&&e._isPrimaryClient!==!0){let n=e.sharedClientState.getAllActiveQueryTargets(),r=yield mz(e,n.toArray());e._isPrimaryClient=!0,yield OD(e.remoteStore,!0);for(let s of r)Ex(e.remoteStore,s)}else if(t===!1&&e._isPrimaryClient!==!1){let n=[],r=Promise.resolve();e.queriesByTarget.forEach((s,o)=>{e.sharedClientState.isLocalQueryTarget(o)?n.push(o):r=r.then(()=>(Kh(e,o),Gh(e.localStore,o,!0))),rm(e.remoteStore,o)}),yield r,yield mz(e,n),Ihe(e),e._isPrimaryClient=!1,yield OD(e.remoteStore,!1)}})}function Ihe(i){let t=ge(i);t.activeLimboResolutionsByTarget.forEach((e,n)=>{rm(t.remoteStore,n)}),t.limboDocumentRefs.removeAllReferences(),t.activeLimboResolutionsByTarget=new Map,t.activeLimboTargetsByKey=new si(pe.comparator)}function mz(i,t,e){return N(this,null,function*(){let n=ge(i),r=[],s=[];for(let o of t){let a,l=n.queriesByTarget.get(o);if(l&&l.length!==0){a=yield Wh(n.localStore,Kn(l[0]));for(let c of l){let d=n.queryViewsByQuery.get(c),u=yield She(n,d);u.snapshot&&s.push(u.snapshot)}}else{let c=yield e6(n.localStore,o);a=yield Wh(n.localStore,c),yield zM(n,v6(c),o,!1,a.resumeToken)}r.push(a)}return n.syncEngineListener.onWatchChange(s),r})}function v6(i){return cj(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function Dhe(i){let t=ge(i);return Kde(t.localStore)}function Mhe(i,t,e,n){return N(this,null,function*(){let r=ge(i);if(r._isPrimaryClient){oe(Hl,"Ignoring unexpected query state notification.");return}let s=r.queriesByTarget.get(t);if(s&&s.length>0)switch(e){case"current":case"not-current":{let o=yield t6(r.localStore,uj(s[0])),a=bg.createSynthesizedRemoteEventForCurrentChange(t,e==="current",zi.EMPTY_BYTE_STRING);yield _a(r,o,a);break}case"rejected":{yield Gh(r.localStore,t,!0),Kh(r,t,n);break}default:Ce()}})}function Ahe(i,t,e){return N(this,null,function*(){let n=Tx(i);if(n._isPrimaryClient){for(let r of t){if(n.queriesByTarget.has(r)&&n.sharedClientState.isActiveQueryTarget(r)){oe(Hl,"Adding an already active target "+r);continue}let o=yield e6(n.localStore,r),a=yield Wh(n.localStore,o);yield zM(n,v6(o),a.targetId,!1,a.resumeToken),Ex(n.remoteStore,a)}for(let r of e)n.queriesByTarget.has(r)&&(yield Gh(n.localStore,r,!1).then(()=>{rm(n.remoteStore,r),Kh(n,r)}).catch(Vl))}})}function Tx(i){let t=ge(i);return t.remoteStore.remoteSyncer.applyRemoteEvent=_6.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Che.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=fhe.bind(null,t),t.syncEngineListener.onWatchChange=ehe.bind(null,t.eventManager),t.syncEngineListener.onWatchError=the.bind(null,t.eventManager),t}function WM(i){let t=ge(i);return t.remoteStore.remoteSyncer.applySuccessfulWrite=phe.bind(null,t),t.remoteStore.remoteSyncer.rejectFailedWrite=ghe.bind(null,t),t}function Ohe(i,t,e){let n=ge(i);Phe(n,t,e).then(r=>{n.sharedClientState.notifyBundleLoaded(r)})}function Phe(i,t,e){return N(this,null,function*(){try{let n=yield t.getMetadata();if(yield Xde(i.localStore,n))return yield t.close(),e._completeWith(ohe(n)),Promise.resolve(new Set);e._updateProgress(p6(n));let s=new LD(n,i.localStore,t.serializer),o=yield t.nextElement();for(;o;){let l=yield s.addSizedElement(o);l&&e._updateProgress(l),o=yield t.nextElement()}let a=yield s.complete();return yield _a(i,a.changedDocs,void 0),yield Zde(i.localStore,n),e._completeWith(a.progress),Promise.resolve(a.changedCollectionGroups)}catch(n){return Ns(Hl,`Loading bundle failed with ${n}`),e._failWith(n),Promise.resolve(new Set)}})}var jD=(()=>{class i{constructor(){this.kind="memory",this.synchronizeTabs=!1}initialize(e){return N(this,null,function*(){this.serializer=Vg(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),yield this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)})}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return Qj(this.persistence,new Wy,e.initialUser,this.serializer)}createPersistence(e){return new Hy(qy.factory,this.serializer)}createSharedClientState(e){return new Ky}terminate(){return N(this,null,function*(){var e,n;(e=this.gcScheduler)===null||e===void 0||e.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),yield this.persistence.shutdown()})}}return i.provider={build:()=>new i},i})();var nx=class i extends jD{constructor(t,e,n){super(),this.onlineComponentProvider=t,this.cacheSizeBytes=e,this.forceOwnership=n,this.kind="persistent",this.synchronizeTabs=!1}initialize(t){return N(this,null,function*(){yield nS(i.prototype,this,"initialize").call(this,t),yield this.onlineComponentProvider.initialize(this,t),yield WM(this.onlineComponentProvider.syncEngine),yield sm(this.onlineComponentProvider.remoteStore),yield this.persistence.setPrimaryStateListener(()=>(this.gcScheduler&&!this.gcScheduler.started&&this.gcScheduler.start(),this.indexBackfillerScheduler&&!this.indexBackfillerScheduler.started&&this.indexBackfillerScheduler.start(),Promise.resolve()))})}createLocalStore(t){return Qj(this.persistence,new Wy,t.initialUser,this.serializer)}createGarbageCollectionScheduler(t,e){let n=this.persistence.referenceDelegate.garbageCollector;return new sD(n,t.asyncQueue,e)}createIndexBackfillerScheduler(t,e){let n=new vI(e,this.persistence);return new bI(t.asyncQueue,n)}createPersistence(t){let e=OM(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=this.cacheSizeBytes!==void 0?os.withCacheSize(this.cacheSizeBytes):os.DEFAULT;return new yD(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,a6(),yue(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(t){return new Ky}},UD=class i extends nx{constructor(t,e){super(t,e,!1),this.onlineComponentProvider=t,this.cacheSizeBytes=e,this.synchronizeTabs=!0}initialize(t){return N(this,null,function*(){yield nS(i.prototype,this,"initialize").call(this,t);let e=this.onlineComponentProvider.syncEngine;this.sharedClientState instanceof og&&(this.sharedClientState.syncEngine={applyBatchState:Ehe.bind(null,e),applyTargetState:Mhe.bind(null,e),applyActiveTargetsChange:Ahe.bind(null,e),getActiveClients:Dhe.bind(null,e),synchronizeWithChangedDocuments:khe.bind(null,e)},yield this.sharedClientState.start()),yield this.persistence.setPrimaryStateListener(n=>N(this,null,function*(){yield The(this.onlineComponentProvider.syncEngine,n),this.gcScheduler&&(n&&!this.gcScheduler.started?this.gcScheduler.start():n||this.gcScheduler.stop()),this.indexBackfillerScheduler&&(n&&!this.indexBackfillerScheduler.started?this.indexBackfillerScheduler.start():n||this.indexBackfillerScheduler.stop())}))})}createSharedClientState(t){let e=a6();if(!og.isAvailable(e))throw new ie(K.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");let n=OM(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new og(e,t.asyncQueue,n,t.clientId,t.initialUser)}},GM=(()=>{class i{initialize(e,n){return N(this,null,function*(){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>hz(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=whe.bind(null,this.syncEngine),yield OD(this.remoteStore,this.syncEngine.isPrimaryClient))})}createEventManager(e){return Jue()}createDatastore(e){let n=Vg(e.databaseInfo.databaseId),r=bue(e.databaseInfo);return Tue(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return Rue(this.localStore,this.datastore,e.asyncQueue,n=>hz(this.syncEngine,n,0),vue())}createSyncEngine(e,n){return lhe(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return N(this,null,function*(){var e,n;yield Lue(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()})}}i.provider={build:()=>new i};return i})(),Rhe=10240;function Fhe(i,t=Rhe){let e=0;return{read(){return N(this,null,function*(){if(e<i.byteLength){let s={value:i.slice(e,e+t),done:!1};return e+=t,s}return{done:!0}})},cancel(){return N(this,null,function*(){})},releaseLock(){},closed:Promise.resolve()}}function $M(i,t,e){if(!e)throw new ie(K.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${t}.`)}function KM(i,t,e,n){if(t===!0&&n===!0)throw new ie(K.INVALID_ARGUMENT,`${i} and ${e} cannot be used together.`)}function fz(i){if(!pe.isDocumentKey(i))throw new ie(K.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function pz(i){if(pe.isDocumentKey(i))throw new ie(K.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Nhe(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}function jg(i){if(i===void 0)return"undefined";if(i===null)return"null";if(typeof i=="string")return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if(typeof i=="number"||typeof i=="boolean")return""+i;if(typeof i=="object"){if(i instanceof Array)return"an array";{let t=Lhe(i);return t?`a custom ${t} object`:"an object"}}else return typeof i=="function"?"a function":Ce()}function Lhe(i){return i.constructor?i.constructor.name:null}function Et(i,t){if("_delegate"in i&&(i=i._delegate),!(i instanceof t)){if(t.name===i.constructor.name)throw new ie(K.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{let e=jg(i);throw new ie(K.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${e}`)}}return i}function y6(i,t){if(t<=0)throw new ie(K.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${t}.`)}function Bhe(i,t){if(!(i instanceof Uint8Array))throw new ie(K.INVALID_ARGUMENT,`NodePlatform.toByteStreamReader expects source to be Uint8Array, got ${jg(i)}`);return Fhe(i,t)}var Yh=class{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.scheduleEvent(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.scheduleEvent(this.observer.error,t):xi("Uncaught Error in snapshot listener:",t.toString()))}mute(){this.muted=!0}scheduleEvent(t,e){setTimeout(()=>{this.muted||t(e)},0)}};var HD=class{constructor(t,e){this.payload=t,this.byteLength=e}isBundleMetadata(){return"metadata"in this.payload}};var qD=class{constructor(t,e){this.reader=t,this.serializer=e,this.metadata=new Gi,this.buffer=new Uint8Array,this.textDecoder=ble(),this.nextElementImpl().then(n=>{n&&n.isBundleMetadata()?this.metadata.resolve(n.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is
             ${JSON.stringify(n?.payload)}`))},n=>this.metadata.reject(n))}close(){return this.reader.cancel()}getMetadata(){return N(this,null,function*(){return this.metadata.promise})}nextElement(){return N(this,null,function*(){return yield this.getMetadata(),this.nextElementImpl()})}nextElementImpl(){return N(this,null,function*(){let t=yield this.readLength();if(t===null)return null;let e=this.textDecoder.decode(t),n=Number(e);isNaN(n)&&this.raiseError(`length string (${e}) is not valid number`);let r=yield this.readJsonString(n);return new HD(JSON.parse(r),t.length+n)})}indexOfOpenBracket(){return this.buffer.findIndex(t=>t===123)}readLength(){return N(this,null,function*(){for(;this.indexOfOpenBracket()<0&&!(yield this.pullMoreDataToBuffer()););if(this.buffer.length===0)return null;let t=this.indexOfOpenBracket();t<0&&this.raiseError("Reached the end of bundle when a length string is expected.");let e=this.buffer.slice(0,t);return this.buffer=this.buffer.slice(t),e})}readJsonString(t){return N(this,null,function*(){for(;this.buffer.length<t;)(yield this.pullMoreDataToBuffer())&&this.raiseError("Reached the end of bundle when more is expected.");let e=this.textDecoder.decode(this.buffer.slice(0,t));return this.buffer=this.buffer.slice(t),e})}raiseError(t){throw this.reader.cancel(),new Error(`Invalid bundle format: ${t}`)}pullMoreDataToBuffer(){return N(this,null,function*(){let t=yield this.reader.read();if(!t.done){let e=new Uint8Array(this.buffer.length+t.value.length);e.set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e}return t.done})}};function Vhe(i,t){return new qD(i,t)}var WD=class{constructor(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastTransactionError=null,this.writtenDocs=new Set}lookup(t){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.mutations.length>0)throw this.lastTransactionError=new ie(K.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes."),this.lastTransactionError;let e=yield Due(this.datastore,t);return e.forEach(n=>this.recordVersion(n)),e})}set(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())}update(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(n){this.lastTransactionError=n}this.writtenDocs.add(t.toString())}delete(t){this.write(new Nl(t,this.precondition(t))),this.writtenDocs.add(t.toString())}commit(){return N(this,null,function*(){if(this.ensureCommitNotCalled(),this.lastTransactionError)throw this.lastTransactionError;let t=this.readVersions;this.mutations.forEach(e=>{t.delete(e.key.toString())}),t.forEach((e,n)=>{let r=pe.fromPath(n);this.mutations.push(new pg(r,this.precondition(r)))}),yield Iue(this.datastore,this.mutations),this.committed=!0})}recordVersion(t){let e;if(t.isFoundDocument())e=t.version;else if(t.isNoDocument())e=Ne.min();else throw Ce();let n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new ie(K.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)}precondition(t){let e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?e.isEqual(Ne.min())?Ii.exists(!1):Ii.updateTime(e):Ii.none()}preconditionForUpdate(t){let e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(Ne.min()))throw new ie(K.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Ii.updateTime(e)}else return Ii.exists(!0)}write(t){this.ensureCommitNotCalled(),this.mutations.push(t)}ensureCommitNotCalled(){}};var GD=class{constructor(t,e,n,r,s){this.asyncQueue=t,this.datastore=e,this.options=n,this.updateFunction=r,this.deferred=s,this.attemptsRemaining=n.maxAttempts,this.backoff=new Eg(this.asyncQueue,"transaction_retry")}run(){this.attemptsRemaining-=1,this.runWithBackOff()}runWithBackOff(){this.backoff.backoffAndRun(()=>N(this,null,function*(){let t=new WD(this.datastore),e=this.tryRunUpdateFunction(t);e&&e.then(n=>{this.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{this.deferred.resolve(n)}).catch(r=>{this.handleTransactionError(r)}))}).catch(n=>{this.handleTransactionError(n)})}))}tryRunUpdateFunction(t){try{let e=this.updateFunction(t);return Rg(e)||!e.catch||!e.then?(this.deferred.reject(Error("Transaction callback must return a Promise")),null):e}catch(e){return this.deferred.reject(e),null}}handleTransactionError(t){this.attemptsRemaining>0&&this.isRetryableTransactionError(t)?(this.attemptsRemaining-=1,this.asyncQueue.enqueueAndForget(()=>(this.runWithBackOff(),Promise.resolve()))):this.deferred.reject(t)}isRetryableTransactionError(t){if(t.name==="FirebaseError"){let e=t.code;return e==="aborted"||e==="failed-precondition"||e==="already-exists"||!Ej(e)}return!1}};var Ll="FirestoreClient",zhe=100,jhe=11,Uhe=20,Hhe=22,$D=class{constructor(t,e,n,r,s){this.authCredentials=t,this.appCheckCredentials=e,this.asyncQueue=n,this.databaseInfo=r,this.user=Ki.UNAUTHENTICATED,this.clientId=wy.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(n,o=>N(this,null,function*(){oe(Ll,"Received user=",o.uid),yield this.authCredentialListener(o),this.user=o})),this.appCheckCredentials.start(n,o=>(oe(Ll,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:zhe}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();let t=new Gi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{this._onlineComponents&&(yield this._onlineComponents.terminate()),this._offlineComponents&&(yield this._offlineComponents.terminate()),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(e){let n=am(e,"Failed to shutdown persistence");t.reject(n)}})),t.promise}};function aI(i,t){return N(this,null,function*(){i.asyncQueue.verifyOperationInProgress(),oe(Ll,"Initializing OfflineComponentProvider");let e=i.configuration;yield t.initialize(e);let n=e.initialUser;i.setCredentialChangeListener(r=>N(this,null,function*(){n.isEqual(r)||(yield Xj(t.localStore,r),n=r)})),t.persistence.setDatabaseDeletedListener(()=>i.terminate()),i._offlineComponents=t})}function gz(i,t){return N(this,null,function*(){i.asyncQueue.verifyOperationInProgress();let e=yield YM(i);oe(Ll,"Initializing OnlineComponentProvider"),yield t.initialize(e,i.configuration),i.setCredentialChangeListener(n=>uz(t.remoteStore,n)),i.setAppCheckTokenChangeListener((n,r)=>uz(t.remoteStore,r)),i._onlineComponents=t})}function qhe(i){return i.name==="FirebaseError"?i.code===K.FAILED_PRECONDITION||i.code===K.UNIMPLEMENTED:typeof DOMException<"u"&&i instanceof DOMException?i.code===Hhe||i.code===Uhe||i.code===jhe:!0}function YM(i){return N(this,null,function*(){if(!i._offlineComponents)if(i._uninitializedComponentsProvider){oe(Ll,"Using user provided OfflineComponentProvider");try{yield aI(i,i._uninitializedComponentsProvider._offline)}catch(t){let e=t;if(!qhe(e))throw e;Ns("Error using user provided cache. Falling back to memory cache: "+e),yield aI(i,new jD)}}else oe(Ll,"Using default OfflineComponentProvider"),yield aI(i,new jD);return i._offlineComponents})}function Ix(i){return N(this,null,function*(){return i._onlineComponents||(i._uninitializedComponentsProvider?(oe(Ll,"Using user provided OnlineComponentProvider"),yield gz(i,i._uninitializedComponentsProvider._online)):(oe(Ll,"Using default OnlineComponentProvider"),yield gz(i,new GM))),i._onlineComponents})}function x6(i){return YM(i).then(t=>t.persistence)}function QM(i){return YM(i).then(t=>t.localStore)}function w6(i){return Ix(i).then(t=>t.remoteStore)}function XM(i){return Ix(i).then(t=>t.syncEngine)}function Whe(i){return Ix(i).then(t=>t.datastore)}function Qh(i){return N(this,null,function*(){let t=yield Ix(i),e=t.eventManager;return e.onListen=che.bind(null,t.syncEngine),e.onUnlisten=uhe.bind(null,t.syncEngine),e.onFirstRemoteStoreListen=dhe.bind(null,t.syncEngine),e.onLastRemoteStoreUnlisten=hhe.bind(null,t.syncEngine),e})}function Ghe(i){return i.asyncQueue.enqueue(()=>N(this,null,function*(){let t=yield x6(i),e=yield w6(i);return t.setNetworkEnabled(!0),Fue(e)}))}function $he(i){return i.asyncQueue.enqueue(()=>N(this,null,function*(){let t=yield x6(i),e=yield w6(i);return t.setNetworkEnabled(!1),Nue(e)}))}function Khe(i){let t=new Gi;return i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let e=yield XM(i);return _he(e,t)})),t.promise}function Yhe(i,t,e,n){let r=new Yh(n),s=new Tg(t,r,e);return i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let o=yield Qh(i);return LM(o,s)})),()=>{r.mute(),i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let o=yield Qh(i);return BM(o,s)}))}}function Qhe(i,t){let e=new Gi;return i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let n=yield QM(i);return tme(n,t,e)})),e.promise}function C6(i,t,e={}){let n=new Gi;return i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let r=yield Qh(i);return ime(r,i.asyncQueue,t,e,n)})),n.promise}function Xhe(i,t){let e=new Gi;return i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let n=yield QM(i);return nme(n,t,e)})),e.promise}function S6(i,t,e={}){let n=new Gi;return i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let r=yield Qh(i);return rme(r,i.asyncQueue,t,e,n)})),n.promise}function Zhe(i,t){let e=new Gi;return i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let n=yield XM(i);return mhe(n,t,e)})),e.promise}function Jhe(i,t){let e=new Yh(t);return i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let n=yield Qh(i);return nhe(n,e)})),()=>{e.mute(),i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let n=yield Qh(i);return rhe(n,e)}))}}function eme(i,t,e){let n=new Gi;return i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){let r=yield Whe(i);new GD(i.asyncQueue,r,e,t,n).run()})),n.promise}function tme(i,t,e){return N(this,null,function*(){try{let n=yield Hde(i,t);n.isFoundDocument()?e.resolve(n):n.isNoDocument()?e.resolve(null):e.reject(new ie(K.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(n){let r=am(n,`Failed to get document '${t} from cache`);e.reject(r)}})}function ime(i,t,e,n,r){let s=new Yh({next:a=>{s.mute(),t.enqueueAndForget(()=>BM(i,o));let l=a.docs.has(e);!l&&a.fromCache?r.reject(new ie(K.UNAVAILABLE,"Failed to get document because the client is offline.")):l&&a.fromCache&&n&&n.source==="server"?r.reject(new ie(K.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):r.resolve(a)},error:a=>r.reject(a)}),o=new Tg(im(e.path),s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return LM(i,o)}function nme(i,t,e){return N(this,null,function*(){try{let n=yield kx(i,t,!0),r=new ix(t,n.remoteKeys),s=r.computeDocChanges(n.documents),o=r.applyChanges(s,!1);e.resolve(o.snapshot)}catch(n){let r=am(n,`Failed to execute query '${t} against cache`);e.reject(r)}})}function rme(i,t,e,n,r){let s=new Yh({next:a=>{s.mute(),t.enqueueAndForget(()=>BM(i,o)),a.fromCache&&n.source==="server"?r.reject(new ie(K.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):r.resolve(a)},error:a=>r.reject(a)}),o=new Tg(e,s,{includeMetadataChanges:!0,waitForSyncWhenOnline:!0});return LM(i,o)}function sme(i,t,e,n){let r=ame(e,Vg(t));i.asyncQueue.enqueueAndForget(()=>N(this,null,function*(){Ohe(yield XM(i),r,n)}))}function ome(i,t){return i.asyncQueue.enqueue(()=>N(this,null,function*(){return Jde(yield QM(i),t)}))}function ame(i,t){let e;return typeof i=="string"?e=Tj().encode(i):e=i,Vhe(Bhe(e),t)}function lme(i,t){return i.timeoutSeconds===t.timeoutSeconds}function k6(i){let t={};return i.timeoutSeconds!==void 0&&(t.timeoutSeconds=i.timeoutSeconds),t}var cme="ComponentProvider",_z=new Map;function dme(i){let t=_z.get(i);t&&(oe(cme,"Removing Datastore"),_z.delete(i),t.terminate())}function ume(i,t,e,n){return new kI(i,t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling,k6(n.experimentalLongPollingOptions),n.useFetchStreams)}var E6="firestore.googleapis.com",bz=!0,vz=5,yz=30,hme=!0,rx=class{constructor(t){var e,n;if(t.host===void 0){if(t.ssl!==void 0)throw new ie(K.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=E6,this.ssl=bz}else this.host=t.host,this.ssl=(e=t.ssl)!==null&&e!==void 0?e:bz;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=$j;else{if(t.cacheSizeBytes!==Bg&&t.cacheSizeBytes<ez)throw new ie(K.INVALID_ARGUMENT,`cacheSizeBytes must be at least ${ez}`);this.cacheSizeBytes=t.cacheSizeBytes}KM("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=hme:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=k6((n=t.experimentalLongPollingOptions)!==null&&n!==void 0?n:{}),mme(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&lme(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}};function mme(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new ie(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<vz)throw new ie(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is ${vz})`);if(i.timeoutSeconds>yz)throw new ie(K.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is ${yz})`)}}var kd=class{constructor(t,e,n,r){this._authCredentials=t,this._appCheckCredentials=e,this._databaseId=n,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new rx({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new ie(K.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new ie(K.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new rx(t),t.credentials!==void 0&&(this._authCredentials=ioe(t.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}_restart(){return N(this,null,function*(){this._terminateTask==="notTerminated"?yield this._terminate():this._terminateTask="notTerminated"})}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return dme(this),Promise.resolve()}};function Dx(i,t,e,n={}){var r;i=Et(i,kd);let s=i._getSettings(),o=`${t}:${e}`;if(s.host!==E6&&s.host!==o&&Ns("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),i._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),n.mockUserToken){let a,l;if(typeof n.mockUserToken=="string")a=n.mockUserToken,l=Ki.MOCK_USER;else{a=l0(n.mockUserToken,(r=i._app)===null||r===void 0?void 0:r.options.projectId);let c=n.mockUserToken.sub||n.mockUserToken.user_id;if(!c)throw new ie(K.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ki(c)}i._authCredentials=new cI(new xy(a,l))}}var Sn=class i{constructor(t,e,n){this.converter=e,this._query=n,this.type="query",this.firestore=t}withConverter(t){return new i(this.firestore,t,this._query)}},Xt=class i{constructor(t,e,n){this.converter=e,this._key=n,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new xo(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new i(this.firestore,t,this._key)}},xo=class i extends Sn{constructor(t,e,n){super(t,e,im(n)),this._path=n,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){let t=this._path.popLast();return t.isEmpty()?null:new Xt(this.firestore,null,new pe(t))}withConverter(t){return new i(this.firestore,t,this._path)}};function Mx(i,t,...e){if(i=ft(i),$M("collection","path",t),i instanceof kd){let n=xt.fromString(t,...e);return pz(n),new xo(i,null,n)}else{if(!(i instanceof Xt)&&!(i instanceof xo))throw new ie(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=i._path.child(xt.fromString(t,...e));return pz(n),new xo(i.firestore,null,n)}}function ZM(i,t){if(i=Et(i,kd),$M("collectionGroup","collection id",t),t.indexOf("/")>=0)throw new ie(K.INVALID_ARGUMENT,`Invalid collection ID '${t}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Sn(i,null,zae(t))}function lm(i,t,...e){if(i=ft(i),arguments.length===1&&(t=wy.newId()),$M("doc","path",t),i instanceof kd){let n=xt.fromString(t,...e);return fz(n),new Xt(i,null,new pe(n))}else{if(!(i instanceof Xt)&&!(i instanceof xo))throw new ie(K.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");let n=i._path.child(xt.fromString(t,...e));return fz(n),new Xt(i.firestore,i instanceof xo?i.converter:null,new pe(n))}}function Ax(i,t){return i=ft(i),t=ft(t),(i instanceof Xt||i instanceof xo)&&(t instanceof Xt||t instanceof xo)?i.firestore===t.firestore&&i.path===t.path&&i.converter===t.converter:!1}function Ox(i,t){return i=ft(i),t=ft(t),i instanceof Sn&&t instanceof Sn?i.firestore===t.firestore&&Ng(i._query,t._query)&&i.converter===t.converter:!1}var fme="AsyncQueue",sx=class{constructor(t=Promise.resolve()){this.retryableOps=[],this._isShuttingDown=!1,this.delayedOperations=[],this.failure=null,this.operationInProgress=!1,this.skipNonRestrictedTasks=!1,this.timerIdsToSkip=[],this.backoff=new Eg(this,"async_queue_retry"),this.visibilityHandler=()=>{this.backoff.skipBackoff()},this.tail=t}get isShuttingDown(){return this._isShuttingDown}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.verifyNotFailed(),this.enqueueInternal(t)}enterRestrictedMode(t){this._isShuttingDown||(this._isShuttingDown=!0,this.skipNonRestrictedTasks=t||!1)}enqueue(t){if(this.verifyNotFailed(),this._isShuttingDown)return new Promise(()=>{});let e=new Gi;return this.enqueueInternal(()=>this._isShuttingDown&&this.skipNonRestrictedTasks?Promise.resolve():(t().then(e.resolve,e.reject),e.promise)).then(()=>e.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.retryableOps.push(t),this.retryNextOp()))}retryNextOp(){return N(this,null,function*(){if(this.retryableOps.length!==0){try{yield this.retryableOps[0](),this.retryableOps.shift(),this.backoff.reset()}catch(t){if(zl(t))oe(fme,"Operation failed with retryable error: "+t);else throw t}this.retryableOps.length>0&&this.backoff.backoffAndRun(()=>this.retryNextOp())}})}enqueueInternal(t){let e=this.tail.then(()=>(this.operationInProgress=!0,t().catch(n=>{this.failure=n,this.operationInProgress=!1;let r=pme(n);throw xi("INTERNAL UNHANDLED ERROR: ",r),n}).then(n=>(this.operationInProgress=!1,n))));return this.tail=e,e}enqueueAfterDelay(t,e,n){this.verifyNotFailed(),this.timerIdsToSkip.indexOf(t)>-1&&(e=0);let r=PD.createAndSchedule(this,t,e,n,s=>this.removeDelayedOperation(s));return this.delayedOperations.push(r),r}verifyNotFailed(){this.failure&&Ce()}verifyOperationInProgress(){}drain(){return N(this,null,function*(){let t;do t=this.tail,yield t;while(t!==this.tail)})}containsDelayedOperation(t){for(let e of this.delayedOperations)if(e.timerId===t)return!0;return!1}runAllDelayedOperationsUntil(t){return this.drain().then(()=>{this.delayedOperations.sort((e,n)=>e.targetTimeMs-n.targetTimeMs);for(let e of this.delayedOperations)if(e.skipDelay(),t!=="all"&&e.timerId===t)break;return this.drain()})}skipDelaysForTimerId(t){this.timerIdsToSkip.push(t)}removeDelayedOperation(t){let e=this.delayedOperations.indexOf(t);this.delayedOperations.splice(e,1)}};function pme(i){let t=i.message||"";return i.stack&&(i.stack.includes(i.message)?t=i.stack:t=i.message+`
`+i.stack),t}var KD=class{constructor(){this._progressObserver={},this._taskCompletionResolver=new Gi,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(t,e,n){this._progressObserver={next:t,error:e,complete:n}}catch(t){return this._taskCompletionResolver.promise.catch(t)}then(t,e){return this._taskCompletionResolver.promise.then(t,e)}_completeWith(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)}_failWith(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)}_updateProgress(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}};var T6=Bg,Ci=class extends kd{constructor(t,e,n,r){super(t,e,n,r),this.type="firestore",this._queue=new sx,this._persistenceKey=r?.name||"[DEFAULT]"}_terminate(){return N(this,null,function*(){if(this._firestoreClient){let t=this._firestoreClient.terminate();this._queue=new sx(t),this._firestoreClient=void 0,yield t}})}};function Ug(i,t){let e=typeof i=="object"?i:Ou(),n=typeof i=="string"?i:t||EI,r=m0(e,"firestore").getImmediate({identifier:n});if(!r._initialized){let s=fS("firestore");s&&Dx(r,...s)}return r}function kn(i){if(i._terminated)throw new ie(K.FAILED_PRECONDITION,"The client has already been terminated.");return i._firestoreClient||I6(i),i._firestoreClient}function I6(i){var t,e,n;let r=i._freezeSettings(),s=ume(i._databaseId,((t=i._app)===null||t===void 0?void 0:t.options.appId)||"",i._persistenceKey,r);i._componentsProvider||!((e=r.localCache)===null||e===void 0)&&e._offlineComponentProvider&&(!((n=r.localCache)===null||n===void 0)&&n._onlineComponentProvider)&&(i._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),i._firestoreClient=new $D(i._authCredentials,i._appCheckCredentials,i._queue,s,i._componentsProvider&&gme(i._componentsProvider))}function gme(i){let t=i?._online.build();return{_offline:i?._offline.build(t),_online:t}}function JM(i,t){Ns("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let e=i._freezeSettings();return D6(i,GM.provider,{build:n=>new nx(n,e.cacheSizeBytes,t?.forceOwnership)}),Promise.resolve()}function eA(i){return N(this,null,function*(){Ns("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");let t=i._freezeSettings();D6(i,GM.provider,{build:e=>new UD(e,t.cacheSizeBytes)})})}function D6(i,t,e){if(i=Et(i,Ci),i._firestoreClient||i._terminated)throw new ie(K.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.");if(i._componentsProvider||i._getSettings().localCache)throw new ie(K.FAILED_PRECONDITION,"SDK cache is already specified.");i._componentsProvider={_online:t,_offline:e},I6(i)}function tA(i){if(i._initialized&&!i._terminated)throw new ie(K.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");let t=new Gi;return i._queue.enqueueAndForgetEvenWhileRestricted(()=>N(this,null,function*(){try{yield Ade(OM(i._databaseId,i._persistenceKey)),t.resolve()}catch(e){t.reject(e)}})),t.promise}function iA(i){i=Et(i,Ci);let t=kn(i);return Khe(t)}function nA(i){i=Et(i,Ci);let t=kn(i);return Ghe(t)}function rA(i){i=Et(i,Ci);let t=kn(i);return $he(t)}function sA(i,t){i=Et(i,Ci);let e=kn(i),n=new KD;return sme(e,i._databaseId,t,n),n}function oA(i,t){i=Et(i,Ci);let e=kn(i);return ome(e,t).then(n=>n?new Sn(i,null,n.query):null)}function _me(i,t=!0){eoe(f0),qc(new Sr("firestore",(e,{instanceIdentifier:n,options:r})=>{let s=e.getProvider("app").getImmediate(),o=new Ci(new dI(e.getProvider("auth-internal")),new fI(e.getProvider("app-check-internal")),Joe(s,n),s);return r=Object.assign({useFetchStreams:t},r),o._setSettings(r),o},"PUBLIC").setMultipleInstances(!0)),ln(m5,f5,i),ln(m5,f5,"esm2017")}var So=class i{constructor(t){this._byteString=t}static fromBase64String(t){try{return new i(zi.fromBase64String(t))}catch(e){throw new ie(K.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}}static fromUint8Array(t){return new i(zi.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}};var zs=class{constructor(...t){for(let e=0;e<t.length;++e)if(t[e].length===0)throw new ie(K.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Vi(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}};var fa=class{constructor(t){this._methodName=t}};var Ed=class{constructor(t,e){if(!isFinite(t)||t<-90||t>90)throw new ie(K.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new ie(K.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return Ye(this._lat,t._lat)||Ye(this._long,t._long)}};var Ig=class{constructor(t){this._values=(t||[]).map(e=>e)}toArray(){return this._values.map(t=>t)}isEqual(t){return Ode(this._values,t._values)}};var bme=/^__.*__$/,YD=class{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return this.fieldMask!==null?new Vs(t,this.data,this.fieldMask,e,this.fieldTransforms):new Fl(t,this.data,e,this.fieldTransforms)}},ox=class{constructor(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}toMutation(t,e){return new Vs(t,this.data,this.fieldMask,e,this.fieldTransforms)}};function M6(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ce()}}var ax=class i{constructor(t,e,n,r,s,o){this.settings=t,this.databaseId=e,this.serializer=n,this.ignoreUndefinedProperties=r,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(t){return new i(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(t){var e;let n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(t),r}childContextForFieldPath(t){var e;let n=(e=this.path)===null||e===void 0?void 0:e.child(t),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(t){return this.contextWith({path:void 0,arrayElement:!0})}createError(t){return lx(t,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(t){return this.fieldMask.find(e=>t.isPrefixOf(e))!==void 0||this.fieldTransforms.find(e=>t.isPrefixOf(e.field))!==void 0}validatePath(){if(this.path)for(let t=0;t<this.path.length;t++)this.validatePathSegment(this.path.get(t))}validatePathSegment(t){if(t.length===0)throw this.createError("Document fields must not be empty");if(M6(this.dataSource)&&bme.test(t))throw this.createError('Document fields cannot begin and end with "__"')}},QD=class{constructor(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.serializer=n||Vg(t)}createContext(t,e,n,r=!1){return new ax({dataSource:t,methodName:e,targetDoc:n,path:Vi.emptyPath(),arrayElement:!1,hasConverter:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}};function Ad(i){let t=i._freezeSettings(),e=Vg(i._databaseId);return new QD(i._databaseId,!!t.ignoreUndefinedProperties,e)}function Px(i,t,e,n,r,s={}){let o=i.createContext(s.merge||s.mergeFields?2:0,t,e,r);cA("Data must be an object, but it was:",o,n);let a=P6(n,o),l,c;if(s.merge)l=new Pr(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){let d=[];for(let u of s.mergeFields){let h=tM(t,u,e);if(!o.contains(h))throw new ie(K.INVALID_ARGUMENT,`Field '${h}' is specified in your field mask but missing from your input data.`);F6(d,h)||d.push(h)}l=new Pr(d),c=o.fieldTransforms.filter(u=>l.covers(u.field))}else l=null,c=o.fieldTransforms;return new YD(new Nn(a),l,c)}var Dg=class i extends fa{_toFieldTransform(t){if(t.dataSource===2)t.fieldMask.push(t.path);else throw t.dataSource===1?t.createError(`${this._methodName}() can only appear at the top level of your update data`):t.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return null}isEqual(t){return t instanceof i}};function A6(i,t,e){return new ax({dataSource:3,targetDoc:t.settings.targetDoc,methodName:i._methodName,arrayElement:e},t.databaseId,t.serializer,t.ignoreUndefinedProperties)}var XD=class i extends fa{_toFieldTransform(t){return new xd(t.path,new Pl)}isEqual(t){return t instanceof i}},ZD=class i extends fa{constructor(t,e){super(t),this._elements=e}_toFieldTransform(t){let e=A6(this,t,!0),n=this._elements.map(s=>Od(s,e)),r=new ha(n);return new xd(t.path,r)}isEqual(t){return t instanceof i&&_S(this._elements,t._elements)}},JD=class i extends fa{constructor(t,e){super(t),this._elements=e}_toFieldTransform(t){let e=A6(this,t,!0),n=this._elements.map(s=>Od(s,e)),r=new ma(n);return new xd(t.path,r)}isEqual(t){return t instanceof i&&_S(this._elements,t._elements)}},eM=class i extends fa{constructor(t,e){super(t),this._operand=e}_toFieldTransform(t){let e=new Rl(t.serializer,_j(t.serializer,this._operand));return new xd(t.path,e)}isEqual(t){return t instanceof i&&this._operand===t._operand}};function aA(i,t,e,n){let r=i.createContext(1,t,e);cA("Data must be an object, but it was:",r,n);let s=[],o=Nn.empty();Md(n,(l,c)=>{let d=dA(t,l,e);c=ft(c);let u=r.childContextForFieldPath(d);if(c instanceof Dg)s.push(d);else{let h=Od(c,u);h!=null&&(s.push(d),o.set(d,h))}});let a=new Pr(s);return new ox(o,a,r.fieldTransforms)}function lA(i,t,e,n,r,s){let o=i.createContext(1,t,e),a=[tM(t,n,e)],l=[r];if(s.length%2!==0)throw new ie(K.INVALID_ARGUMENT,`Function ${t}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let h=0;h<s.length;h+=2)a.push(tM(t,s[h])),l.push(s[h+1]);let c=[],d=Nn.empty();for(let h=a.length-1;h>=0;--h)if(!F6(c,a[h])){let m=a[h],_=l[h];_=ft(_);let b=o.childContextForFieldPath(m);if(_ instanceof Dg)c.push(m);else{let v=Od(_,b);v!=null&&(c.push(m),d.set(m,v))}}let u=new Pr(c);return new ox(d,u,o.fieldTransforms)}function O6(i,t,e,n=!1){let r=i.createContext(n?4:3,t);return Od(e,r)}function Od(i,t){if(i=ft(i),R6(i))return cA("Unsupported field value:",t,i),P6(i,t);if(i instanceof fa)return yme(i,t),null;if(i===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),i instanceof Array){if(t.settings.arrayElement&&t.dataSource!==4)throw t.createError("Nested arrays are not supported");return vme(i,t)}else return xme(i,t)}function P6(i,t){let e={};return Hz(i)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Md(i,(n,r)=>{let s=Od(r,t.childContextForField(n));s!=null&&(e[n]=s)}),{mapValue:{fields:e}}}function vme(i,t){let e=[],n=0;for(let r of i){let s=Od(r,t.childContextForArray(n));s==null&&(s={nullValue:"NULL_VALUE"}),e.push(s),n++}return{arrayValue:{values:e}}}function yme(i,t){if(!M6(t.dataSource))throw t.createError(`${i._methodName}() can only be used with update() and set()`);if(!t.path)throw t.createError(`${i._methodName}() is not currently supported inside arrays`);let e=i._toFieldTransform(t);e&&t.fieldTransforms.push(e)}function xme(i,t){if(i=ft(i),i===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return _j(t.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){let e=wi.fromDate(i);return{timestampValue:Uh(t.serializer,e)}}else if(i instanceof wi){let e=new wi(i.seconds,Math.floor(i.nanoseconds/1e3)*1e3);return{timestampValue:Uh(t.serializer,e)}}else{if(i instanceof Ed)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof So)return{bytesValue:Ij(t.serializer,i._byteString)};if(i instanceof Xt){let e=t.databaseId,n=i.firestore._databaseId;if(!n.isEqual(e))throw t.createError(`Document reference is for database ${n.projectId}/${n.database} but should be for database ${e.projectId}/${e.database}`);return{referenceValue:TM(i.firestore._databaseId||t.databaseId,i._key.path)}}else{if(i instanceof Ig)return wme(i,t);throw t.createError(`Unsupported field value: ${jg(i)}`)}}}function wme(i,t){return{mapValue:{fields:{[vM]:{stringValue:yM},[Nh]:{arrayValue:{values:i.toArray().map(n=>{if(typeof n!="number")throw t.createError("VectorValues must only contain numeric values.");return EM(t.serializer,n)})}}}}}}function R6(i){return typeof i=="object"&&i!==null&&!(i instanceof Array)&&!(i instanceof Date)&&!(i instanceof wi)&&!(i instanceof Ed)&&!(i instanceof So)&&!(i instanceof Xt)&&!(i instanceof fa)&&!(i instanceof Ig)}function cA(i,t,e){if(!R6(e)||!Nhe(e)){let n=jg(e);throw n==="an object"?t.createError(i+" a custom object"):t.createError(i+" "+n)}}function tM(i,t,e){if(t=ft(t),t instanceof zs)return t._internalPath;if(typeof t=="string")return dA(i,t);throw lx("Field path arguments must be of type string or ",i,!1,void 0,e)}var Cme=new RegExp("[~\\*/\\[\\]]");function dA(i,t,e){if(t.search(Cme)>=0)throw lx(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,e);try{return new zs(...t.split("."))._internalPath}catch{throw lx(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,e)}}function lx(i,t,e,n,r){let s=n&&!n.isEmpty(),o=r!==void 0,a=`Function ${t}() called with invalid data`;e&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${n}`),o&&(l+=` in document ${r}`),l+=")"),new ie(K.INVALID_ARGUMENT,a+i+l)}function F6(i,t){return i.some(e=>e.isEqual(t))}var Td=class{constructor(t,e,n,r,s){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Xt(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document)if(this._converter){let t=new iM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}else return this._userDataWriter.convertValue(this._document.data.value);else return}get(t){if(this._document){let e=this._document.data.field(Rx("DocumentSnapshot.get",t));if(e!==null)return this._userDataWriter.convertValue(e)}}},iM=class extends Td{data(){return super.data()}};function Rx(i,t){return typeof t=="string"?dA(i,t):t instanceof zs?t._internalPath:t._delegate._internalPath}function N6(i){if(i.limitType==="L"&&i.explicitOrderBy.length===0)throw new ie(K.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Mg=class{},Id=class extends Mg{};function ko(i,t,...e){let n=[];t instanceof Mg&&n.push(t),n=n.concat(e),Ame(n);for(let r of n)i=r._apply(i);return i}var cx=class i extends Id{constructor(t,e,n){super(),this._field=t,this._op=e,this._value=n,this.type="where"}static _create(t,e,n){return new i(t,e,n)}_apply(t){let e=this._parse(t);return B6(t._query,e),new Sn(t.firestore,t.converter,SM(t._query,e))}_parse(t){let e=Ad(t.firestore);return Sme(t._query,"where",e,t.firestore._databaseId,this._field,this._op,this._value)}};function uA(i,t,e){let n=t,r=Rx("where",i);return cx._create(r,n,e)}var nM=class i extends Mg{constructor(t,e){super(),this.type=t,this._queryConstraints=e}static _create(t,e){return new i(t,e)}_parse(t){let e=this._queryConstraints.map(n=>n._parse(t)).filter(n=>n.getFilters().length>0);return e.length===1?e[0]:zt.create(e,this._getOperator())}_apply(t){let e=this._parse(t);return e.getFilters().length===0?t:(Dme(t._query,e),new Sn(t.firestore,t.converter,SM(t._query,e)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}};var rM=class i extends Id{constructor(t,e){super(),this._field=t,this._direction=e,this.type="orderBy"}static _create(t,e){return new i(t,e)}_apply(t){let e=kme(t._query,this._field,this._direction);return new Sn(t.firestore,t.converter,Hae(t._query,e))}};function hA(i,t="asc"){let e=t,n=Rx("orderBy",i);return rM._create(n,e)}var dx=class i extends Id{constructor(t,e,n){super(),this.type=t,this._limit=e,this._limitType=n}static _create(t,e,n){return new i(t,e,n)}_apply(t){return new Sn(t.firestore,t.converter,Ay(t._query,this._limit,this._limitType))}};function mA(i){return y6("limit",i),dx._create("limit",i,"F")}function fA(i){return y6("limitToLast",i),dx._create("limitToLast",i,"L")}var ux=class i extends Id{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new i(t,e,n)}_apply(t){let e=L6(t,this.type,this._docOrFields,this._inclusive);return new Sn(t.firestore,t.converter,qae(t._query,e))}};function pA(...i){return ux._create("startAt",i,!0)}function gA(...i){return ux._create("startAfter",i,!1)}var hx=class i extends Id{constructor(t,e,n){super(),this.type=t,this._docOrFields=e,this._inclusive=n}static _create(t,e,n){return new i(t,e,n)}_apply(t){let e=L6(t,this.type,this._docOrFields,this._inclusive);return new Sn(t.firestore,t.converter,Wae(t._query,e))}};function _A(...i){return hx._create("endBefore",i,!1)}function bA(...i){return hx._create("endAt",i,!0)}function L6(i,t,e,n){if(e[0]=ft(e[0]),e[0]instanceof Td)return Eme(i._query,i.firestore._databaseId,t,e[0]._document,n);{let r=Ad(i.firestore);return Tme(i._query,i.firestore._databaseId,r,t,e,n)}}function Sme(i,t,e,n,r,s,o){let a;if(r.isKeyField()){if(s==="array-contains"||s==="array-contains-any")throw new ie(K.INVALID_ARGUMENT,`Invalid Query. You can't perform '${s}' queries on documentId().`);if(s==="in"||s==="not-in"){wz(o,s);let c=[];for(let d of o)c.push(xz(n,i,d));a={arrayValue:{values:c}}}else a=xz(n,i,o)}else(s==="in"||s==="not-in"||s==="array-contains-any")&&wz(o,s),a=O6(e,t,o,s==="in"||s==="not-in");return _t.create(r,s,a)}function kme(i,t,e){if(i.startAt!==null)throw new ie(K.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new ie(K.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new vd(t,e)}function Eme(i,t,e,n,r){if(!n)throw new ie(K.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${e}().`);let s=[];for(let o of Vh(i))if(o.field.isKeyField())s.push(bd(t,n.key));else{let a=n.data.field(o.field);if(yx(a))throw new ie(K.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+o.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(a!==null)s.push(a);else{let l=o.field.canonicalString();throw new ie(K.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${l}' (used as the orderBy) does not exist.`)}}return new wo(s,r)}function Tme(i,t,e,n,r,s){let o=i.explicitOrderBy;if(r.length>o.length)throw new ie(K.INVALID_ARGUMENT,`Too many arguments provided to ${n}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);let a=[];for(let l=0;l<r.length;l++){let c=r[l];if(o[l].field.isKeyField()){if(typeof c!="string")throw new ie(K.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${n}(), but got a ${typeof c}`);if(!CM(i)&&c.indexOf("/")!==-1)throw new ie(K.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${n}() must be a plain document ID, but '${c}' contains a slash.`);let u=i.path.child(xt.fromString(c));if(!pe.isDocumentKey(u))throw new ie(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${n}() must result in a valid document path, but '${u}' is not because it contains an odd number of segments.`);let h=new pe(u);a.push(bd(t,h))}else{let u=O6(e,n,c);a.push(u)}}return new wo(a,s)}function xz(i,t,e){if(e=ft(e),typeof e=="string"){if(e==="")throw new ie(K.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!CM(t)&&e.indexOf("/")!==-1)throw new ie(K.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${e}' contains a '/' character.`);let n=t.path.child(xt.fromString(e));if(!pe.isDocumentKey(n))throw new ie(K.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${n}' is not because it has an odd number of segments (${n.length}).`);return bd(i,new pe(n))}else{if(e instanceof Xt)return bd(i,e._key);throw new ie(K.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${jg(e)}.`)}}function wz(i,t){if(!Array.isArray(i)||i.length===0)throw new ie(K.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function Ime(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}function B6(i,t){let e=Mme(i.filters,Ime(t.op));if(e!==null)throw e===t.op?new ie(K.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new ie(K.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${e.toString()}' filters.`)}function Dme(i,t){let e=i,n=t.getFlattenedFilters();for(let r of n)B6(e,r),e=SM(e,r)}function Mme(i,t){for(let e of i)for(let n of e.getFlattenedFilters())if(t.indexOf(n.op)>=0)return n.op;return null}function Ame(i){let t=i.filter(n=>n instanceof nM).length,e=i.filter(n=>n instanceof cx).length;if(t>1||t>0&&e>0)throw new ie(K.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}var Xh=class{convertValue(t,e="none"){switch(_d(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ui(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(Ml(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 11:return this.convertObject(t.mapValue,e);case 10:return this.convertVectorValue(t.mapValue);default:throw Ce()}}convertObject(t,e){return this.convertObjectMap(t.fields,e)}convertObjectMap(t,e="none"){let n={};return Md(t,(r,s)=>{n[r]=this.convertValue(s,e)}),n}convertVectorValue(t){var e,n,r;let s=(r=(n=(e=t.fields)===null||e===void 0?void 0:e[Nh].arrayValue)===null||n===void 0?void 0:n.values)===null||r===void 0?void 0:r.map(o=>ui(o.doubleValue));return new Ig(s)}convertGeoPoint(t){return new Ed(ui(t.latitude),ui(t.longitude))}convertArray(t,e){return(t.values||[]).map(n=>this.convertValue(n,e))}convertServerTimestamp(t,e){switch(e){case"previous":let n=bM(t);return n==null?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(dg(t));default:return null}}convertTimestamp(t){let e=ua(t);return new wi(e.seconds,e.nanos)}convertDocumentKey(t,e){let n=xt.fromString(t);Ae(Vj(n));let r=new Al(n.get(1),n.get(3)),s=new pe(n.popFirst(5));return r.isEqual(e)||xi(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${e.projectId}/${e.database}) instead.`),s}};function Fx(i,t,e){let n;return i?e&&(e.merge||e.mergeFields)?n=i.toFirestore(t,e):n=i.toFirestore(t):n=t,n}var sM=class extends Xh{constructor(t){super(),this.firestore=t}convertBytes(t){return new So(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new Xt(this.firestore,null,e)}};function oM(i){return Ome(i,["next","error","complete"])}function Ome(i,t){if(typeof i!="object"||i===null)return!1;let e=i;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}var pa=class{constructor(t,e){this.hasPendingWrites=t,this.fromCache=e}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}},ls=class extends Td{constructor(t,e,n,r,s,o){super(t,e,n,r,o),this._firestore=t,this._firestoreImpl=t,this.metadata=s}exists(){return super.exists()}data(t={}){if(this._document)if(this._converter){let e=new Bl(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}else return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps);else return}get(t,e={}){if(this._document){let n=this._document.data.field(Rx("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n,e.serverTimestamps)}}},Bl=class extends ls{data(t={}){return super.data(t)}},js=class{constructor(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new pa(r.hasPendingWrites,r.fromCache),this.query=n}get docs(){let t=[];return this.forEach(e=>t.push(e)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,e){this._snapshot.docs.forEach(n=>{t.call(e,new Bl(this._firestore,this._userDataWriter,n.key,n,new pa(this._snapshot.mutatedKeys.has(n.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){let e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new ie(K.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return(!this._cachedChanges||this._cachedChangesIncludeMetadataChanges!==e)&&(this._cachedChanges=Pme(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges}};function Pme(i,t){if(i._snapshot.oldDocs.isEmpty()){let e=0;return i._snapshot.docChanges.map(n=>{let r=new Bl(i._firestore,i._userDataWriter,n.doc.key,n.doc,new pa(i._snapshot.mutatedKeys.has(n.doc.key),i._snapshot.fromCache),i.query.converter);return n.doc,{type:"added",doc:r,oldIndex:-1,newIndex:e++}})}else{let e=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(n=>t||n.type!==3).map(n=>{let r=new Bl(i._firestore,i._userDataWriter,n.doc.key,n.doc,new pa(i._snapshot.mutatedKeys.has(n.doc.key),i._snapshot.fromCache),i.query.converter),s=-1,o=-1;return n.type!==0&&(s=e.indexOf(n.doc.key),e=e.delete(n.doc.key)),n.type!==1&&(e=e.add(n.doc),o=e.indexOf(n.doc.key)),{type:Rme(n.type),doc:r,oldIndex:s,newIndex:o}})}}function Rme(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ce()}}function Nx(i,t){return i instanceof ls&&t instanceof ls?i._firestore===t._firestore&&i._key.isEqual(t._key)&&(i._document===null?t._document===null:i._document.isEqual(t._document))&&i._converter===t._converter:i instanceof js&&t instanceof js?i._firestore===t._firestore&&Ox(i.query,t.query)&&i.metadata.isEqual(t.metadata)&&i._snapshot.isEqual(t._snapshot):!1}function vA(i){i=Et(i,Xt);let t=Et(i.firestore,Ci),e=kn(t);return C6(e,i._key).then(n=>IA(t,i,n))}var ga=class extends Xh{constructor(t){super(),this.firestore=t}convertBytes(t){return new So(t)}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return new Xt(this.firestore,null,e)}};function yA(i){i=Et(i,Xt);let t=Et(i.firestore,Ci),e=kn(t),n=new ga(t);return Qhe(e,i._key).then(r=>new ls(t,n,i._key,r,new pa(r!==null&&r.hasLocalMutations,!0),i.converter))}function xA(i){i=Et(i,Xt);let t=Et(i.firestore,Ci),e=kn(t);return C6(e,i._key,{source:"server"}).then(n=>IA(t,i,n))}function wA(i){i=Et(i,Sn);let t=Et(i.firestore,Ci),e=kn(t),n=new ga(t);return N6(i._query),S6(e,i._query).then(r=>new js(t,n,i,r))}function CA(i){i=Et(i,Sn);let t=Et(i.firestore,Ci),e=kn(t),n=new ga(t);return Xhe(e,i._query).then(r=>new js(t,n,i,r))}function SA(i){i=Et(i,Sn);let t=Et(i.firestore,Ci),e=kn(t),n=new ga(t);return S6(e,i._query,{source:"server"}).then(r=>new js(t,n,i,r))}function Lx(i,t,e){i=Et(i,Xt);let n=Et(i.firestore,Ci),r=Fx(i.converter,t,e),s=Ad(n),a=Px(s,"setDoc",i._key,r,i.converter!==null,e).toMutation(i._key,Ii.none());return cm(n,[a])}function Bx(i,t,e,...n){i=Et(i,Xt);let r=Et(i.firestore,Ci),s=Ad(r);t=ft(t);let o;typeof t=="string"||t instanceof zs?o=lA(s,"updateDoc",i._key,t,e,n):o=aA(s,"updateDoc",i._key,t);let a=o.toMutation(i._key,Ii.exists(!0));return cm(r,[a])}function kA(i){let t=Et(i.firestore,Ci),e=[new Nl(i._key,Ii.none())];return cm(t,e)}function EA(i,t){let e=Et(i.firestore,Ci),n=lm(i),r=Fx(i.converter,t),s=Ad(i.firestore),a=Px(s,"addDoc",n._key,r,i.converter!==null,{}).toMutation(n._key,Ii.exists(!1));return cm(e,[a]).then(()=>n)}function Vx(i,...t){var e,n,r;i=ft(i);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof t[o]=="object"&&!oM(t[o])&&(s=t[o],o++);let a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(oM(t[o])){let h=t[o];t[o]=(e=h.next)===null||e===void 0?void 0:e.bind(h),t[o+1]=(n=h.error)===null||n===void 0?void 0:n.bind(h),t[o+2]=(r=h.complete)===null||r===void 0?void 0:r.bind(h)}let l,c,d;if(i instanceof Xt)c=Et(i.firestore,Ci),d=im(i._key.path),l={next:h=>{t[o]&&t[o](IA(c,i,h))},error:t[o+1],complete:t[o+2]};else{let h=Et(i,Sn);c=Et(h.firestore,Ci),d=h._query;let m=new ga(c);l={next:_=>{t[o]&&t[o](new js(c,m,h,_))},error:t[o+1],complete:t[o+2]},N6(i._query)}let u=kn(c);return Yhe(u,d,a,l)}function TA(i,t){i=Et(i,Ci);let e=kn(i),n=oM(t)?t:{next:t};return Jhe(e,n)}function cm(i,t){let e=kn(i);return Zhe(e,t)}function IA(i,t,e){let n=e.docs.get(t._key),r=new ga(i);return new ls(i,r,t._key,n,new pa(e.hasPendingWrites,e.fromCache),t.converter)}var Fme={maxAttempts:5};function Nme(i){if(i.maxAttempts<1)throw new ie(K.INVALID_ARGUMENT,"Max attempts must be at least 1")}var mx=class{constructor(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=Ad(t)}set(t,e,n){this._verifyNotCommitted();let r=El(t,this._firestore),s=Fx(r.converter,e,n),o=Px(this._dataReader,"WriteBatch.set",r._key,s,r.converter!==null,n);return this._mutations.push(o.toMutation(r._key,Ii.none())),this}update(t,e,n,...r){this._verifyNotCommitted();let s=El(t,this._firestore);e=ft(e);let o;return typeof e=="string"||e instanceof zs?o=lA(this._dataReader,"WriteBatch.update",s._key,e,n,r):o=aA(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Ii.exists(!0))),this}delete(t){this._verifyNotCommitted();let e=El(t,this._firestore);return this._mutations=this._mutations.concat(new Nl(e._key,Ii.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new ie(K.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}};function El(i,t){if(i=ft(i),i.firestore!==t)throw new ie(K.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}var aM=class{constructor(t,e){this._firestore=t,this._transaction=e,this._dataReader=Ad(t)}get(t){let e=El(t,this._firestore),n=new sM(this._firestore);return this._transaction.lookup([e._key]).then(r=>{if(!r||r.length!==1)return Ce();let s=r[0];if(s.isFoundDocument())return new Td(this._firestore,n,s.key,s,e.converter);if(s.isNoDocument())return new Td(this._firestore,n,e._key,null,e.converter);throw Ce()})}set(t,e,n){let r=El(t,this._firestore),s=Fx(r.converter,e,n),o=Px(this._dataReader,"Transaction.set",r._key,s,r.converter!==null,n);return this._transaction.set(r._key,o),this}update(t,e,n,...r){let s=El(t,this._firestore);e=ft(e);let o;return typeof e=="string"||e instanceof zs?o=lA(this._dataReader,"Transaction.update",s._key,e,n,r):o=aA(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this}delete(t){let e=El(t,this._firestore);return this._transaction.delete(e._key),this}};var lM=class extends aM{constructor(t,e){super(t,e),this._firestore=t}get(t){let e=El(t,this._firestore),n=new ga(this._firestore);return super.get(t).then(r=>new ls(this._firestore,n,e._key,r._document,new pa(!1,!1),e.converter))}};function DA(i,t,e){i=Et(i,Ci);let n=Object.assign(Object.assign({},Fme),e);Nme(n);let r=kn(i);return eme(r,s=>t(new lM(i,s)),n)}function MA(){return new Dg("deleteField")}function AA(){return new XD("serverTimestamp")}function OA(...i){return new ZD("arrayUnion",i)}function PA(...i){return new JD("arrayRemove",i)}function RA(i){return new eM("increment",i)}_me("node");var Lme="@firebase/firestore-compat",Bme="0.3.38";function zA(i,t){if(t===void 0)return{merge:!1};if(t.mergeFields!==void 0&&t.merge!==void 0)throw new ie("invalid-argument",`Invalid options passed to function ${i}(): You cannot specify both "merge" and "mergeFields".`);return t}function V6(){if(typeof Uint8Array>"u")throw new ie("unimplemented","Uint8Arrays are not available in this environment.")}function z6(){if(!qz())throw new ie("unimplemented","Blobs are unavailable in Firestore in this environment.")}var zx=class i{constructor(t){this._delegate=t}static fromBase64String(t){return z6(),new i(So.fromBase64String(t))}static fromUint8Array(t){return V6(),new i(So.fromUint8Array(t))}toBase64(){return z6(),this._delegate.toBase64()}toUint8Array(){return V6(),this._delegate.toUint8Array()}isEqual(t){return this._delegate.isEqual(t._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}};function FA(i){return Vme(i,["next","error","complete"])}function Vme(i,t){if(typeof i!="object"||i===null)return!1;let e=i;for(let n of t)if(n in e&&typeof e[n]=="function")return!0;return!1}var NA=class{enableIndexedDbPersistence(t,e){return JM(t._delegate,{forceOwnership:e})}enableMultiTabIndexedDbPersistence(t){return eA(t._delegate)}clearIndexedDbPersistence(t){return tA(t._delegate)}},jx=class{constructor(t,e,n){this._delegate=e,this._persistenceProvider=n,this.INTERNAL={delete:()=>this.terminate()},t instanceof Al||(this._appCompat=t)}get _databaseId(){return this._delegate._databaseId}settings(t){let e=this._delegate._getSettings();!t.merge&&e.host!==t.host&&Ns("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),t.merge&&(t=Object.assign(Object.assign({},e),t),delete t.merge),this._delegate._setSettings(t)}useEmulator(t,e,n={}){Dx(this._delegate,t,e,n)}enableNetwork(){return nA(this._delegate)}disableNetwork(){return rA(this._delegate)}enablePersistence(t){let e=!1,n=!1;return t&&(e=!!t.synchronizeTabs,n=!!t.experimentalForceOwningTab,KM("synchronizeTabs",e,"experimentalForceOwningTab",n)),e?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,n)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return iA(this._delegate)}onSnapshotsInSync(t){return TA(this._delegate,t)}get app(){if(!this._appCompat)throw new ie("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(t){try{return new hm(this,Mx(this._delegate,t))}catch(e){throw Yn(e,"collection()","Firestore.collection()")}}doc(t){try{return new Eo(this,lm(this._delegate,t))}catch(e){throw Yn(e,"doc()","Firestore.doc()")}}collectionGroup(t){try{return new Nd(this,ZM(this._delegate,t))}catch(e){throw Yn(e,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(t){return DA(this._delegate,e=>t(new Ux(this,e)))}batch(){return kn(this._delegate),new Hx(new mx(this._delegate,t=>cm(this._delegate,t)))}loadBundle(t){return sA(this._delegate,t)}namedQuery(t){return oA(this._delegate,t).then(e=>e?new Nd(this,e):null)}},dm=class extends Xh{constructor(t){super(),this.firestore=t}convertBytes(t){return new zx(new So(t))}convertReference(t){let e=this.convertDocumentKey(t,this.firestore._databaseId);return Eo.forKey(e,this.firestore,null)}};function zme(i){cM(i)}var Ux=class{constructor(t,e){this._firestore=t,this._delegate=e,this._userDataWriter=new dm(t)}get(t){let e=Pd(t);return this._delegate.get(e).then(n=>new Rd(this._firestore,new ls(this._firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,e.converter)))}set(t,e,n){let r=Pd(t);return n?(zA("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this}update(t,e,n,...r){let s=Pd(t);return arguments.length===2?this._delegate.update(s,e):this._delegate.update(s,e,n,...r),this}delete(t){let e=Pd(t);return this._delegate.delete(e),this}},Hx=class{constructor(t){this._delegate=t}set(t,e,n){let r=Pd(t);return n?(zA("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this}update(t,e,n,...r){let s=Pd(t);return arguments.length===2?this._delegate.update(s,e):this._delegate.update(s,e,n,...r),this}delete(t){let e=Pd(t);return this._delegate.delete(e),this}commit(){return this._delegate.commit()}},um=class i{constructor(t,e,n){this._firestore=t,this._userDataWriter=e,this._delegate=n}fromFirestore(t,e){let n=new Bl(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Fd(this._firestore,n),e??{})}toFirestore(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)}static getInstance(t,e){let n=i.INSTANCES,r=n.get(t);r||(r=new WeakMap,n.set(t,r));let s=r.get(e);return s||(s=new i(t,new dm(t),e),r.set(e,s)),s}};um.INSTANCES=new WeakMap;var Eo=class i{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new dm(t)}static forPath(t,e,n){if(t.length%2!==0)throw new ie("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${t.canonicalString()} has ${t.length}`);return new i(e,new Xt(e._delegate,n,new pe(t)))}static forKey(t,e,n){return new i(e,new Xt(e._delegate,n,t))}get id(){return this._delegate.id}get parent(){return new hm(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(t){try{return new hm(this.firestore,Mx(this._delegate,t))}catch(e){throw Yn(e,"collection()","DocumentReference.collection()")}}isEqual(t){return t=ft(t),t instanceof Xt?Ax(this._delegate,t):!1}set(t,e){e=zA("DocumentReference.set",e);try{return e?Lx(this._delegate,t,e):Lx(this._delegate,t)}catch(n){throw Yn(n,"setDoc()","DocumentReference.set()")}}update(t,e,...n){try{return arguments.length===1?Bx(this._delegate,t):Bx(this._delegate,t,e,...n)}catch(r){throw Yn(r,"updateDoc()","DocumentReference.update()")}}delete(){return kA(this._delegate)}onSnapshot(...t){let e=j6(t),n=U6(t,r=>new Rd(this.firestore,new ls(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)));return Vx(this._delegate,e,n)}get(t){let e;return t?.source==="cache"?e=yA(this._delegate):t?.source==="server"?e=xA(this._delegate):e=vA(this._delegate),e.then(n=>new Rd(this.firestore,new ls(this.firestore._delegate,this._userDataWriter,n._key,n._document,n.metadata,this._delegate.converter)))}withConverter(t){return new i(this.firestore,t?this._delegate.withConverter(um.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function Yn(i,t,e){return i.message=i.message.replace(t,e),i}function j6(i){for(let t of i)if(typeof t=="object"&&!FA(t))return t;return{}}function U6(i,t){var e,n;let r;return FA(i[0])?r=i[0]:FA(i[1])?r=i[1]:typeof i[0]=="function"?r={next:i[0],error:i[1],complete:i[2]}:r={next:i[1],error:i[2],complete:i[3]},{next:s=>{r.next&&r.next(t(s))},error:(e=r.error)===null||e===void 0?void 0:e.bind(r),complete:(n=r.complete)===null||n===void 0?void 0:n.bind(r)}}var Rd=class{constructor(t,e){this._firestore=t,this._delegate=e}get ref(){return new Eo(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(t){return this._delegate.data(t)}get(t,e){return this._delegate.get(t,e)}isEqual(t){return Nx(this._delegate,t._delegate)}},Fd=class extends Rd{data(t){let e=this._delegate.data(t);return this._delegate._converter||Sz(e!==void 0,"Document in a QueryDocumentSnapshot should exist"),e}},Nd=class i{constructor(t,e){this.firestore=t,this._delegate=e,this._userDataWriter=new dm(t)}where(t,e,n){try{return new i(this.firestore,ko(this._delegate,uA(t,e,n)))}catch(r){throw Yn(r,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(t,e){try{return new i(this.firestore,ko(this._delegate,hA(t,e)))}catch(n){throw Yn(n,/(orderBy|where)\(\)/,"Query.$1()")}}limit(t){try{return new i(this.firestore,ko(this._delegate,mA(t)))}catch(e){throw Yn(e,"limit()","Query.limit()")}}limitToLast(t){try{return new i(this.firestore,ko(this._delegate,fA(t)))}catch(e){throw Yn(e,"limitToLast()","Query.limitToLast()")}}startAt(...t){try{return new i(this.firestore,ko(this._delegate,pA(...t)))}catch(e){throw Yn(e,"startAt()","Query.startAt()")}}startAfter(...t){try{return new i(this.firestore,ko(this._delegate,gA(...t)))}catch(e){throw Yn(e,"startAfter()","Query.startAfter()")}}endBefore(...t){try{return new i(this.firestore,ko(this._delegate,_A(...t)))}catch(e){throw Yn(e,"endBefore()","Query.endBefore()")}}endAt(...t){try{return new i(this.firestore,ko(this._delegate,bA(...t)))}catch(e){throw Yn(e,"endAt()","Query.endAt()")}}isEqual(t){return Ox(this._delegate,t._delegate)}get(t){let e;return t?.source==="cache"?e=CA(this._delegate):t?.source==="server"?e=SA(this._delegate):e=wA(this._delegate),e.then(n=>new Hg(this.firestore,new js(this.firestore._delegate,this._userDataWriter,this._delegate,n._snapshot)))}onSnapshot(...t){let e=j6(t),n=U6(t,r=>new Hg(this.firestore,new js(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)));return Vx(this._delegate,e,n)}withConverter(t){return new i(this.firestore,t?this._delegate.withConverter(um.getInstance(this.firestore,t)):this._delegate.withConverter(null))}},LA=class{constructor(t,e){this._firestore=t,this._delegate=e}get type(){return this._delegate.type}get doc(){return new Fd(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}},Hg=class{constructor(t,e){this._firestore=t,this._delegate=e}get query(){return new Nd(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(t=>new Fd(this._firestore,t))}docChanges(t){return this._delegate.docChanges(t).map(e=>new LA(this._firestore,e))}forEach(t,e){this._delegate.forEach(n=>{t.call(e,new Fd(this._firestore,n))})}isEqual(t){return Nx(this._delegate,t._delegate)}},hm=class i extends Nd{constructor(t,e){super(t,e),this.firestore=t,this._delegate=e}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){let t=this._delegate.parent;return t?new Eo(this.firestore,t):null}doc(t){try{return t===void 0?new Eo(this.firestore,lm(this._delegate)):new Eo(this.firestore,lm(this._delegate,t))}catch(e){throw Yn(e,"doc()","CollectionReference.doc()")}}add(t){return EA(this._delegate,t).then(e=>new Eo(this.firestore,e))}isEqual(t){return Ax(this._delegate,t._delegate)}withConverter(t){return new i(this.firestore,t?this._delegate.withConverter(um.getInstance(this.firestore,t)):this._delegate.withConverter(null))}};function Pd(i){return Et(i,Xt)}var BA=class i{constructor(...t){this._delegate=new zs(...t)}static documentId(){return new i(Vi.keyField().canonicalString())}isEqual(t){return t=ft(t),t instanceof zs?this._delegate._internalPath.isEqual(t._internalPath):!1}};var VA=class i{constructor(t){this._delegate=t}static serverTimestamp(){let t=AA();return t._methodName="FieldValue.serverTimestamp",new i(t)}static delete(){let t=MA();return t._methodName="FieldValue.delete",new i(t)}static arrayUnion(...t){let e=OA(...t);return e._methodName="FieldValue.arrayUnion",new i(e)}static arrayRemove(...t){let e=PA(...t);return e._methodName="FieldValue.arrayRemove",new i(e)}static increment(t){let e=RA(t);return e._methodName="FieldValue.increment",new i(e)}isEqual(t){return this._delegate.isEqual(t._delegate)}};var jme={Firestore:jx,GeoPoint:Ed,Timestamp:wi,Blob:zx,Transaction:Ux,WriteBatch:Hx,DocumentReference:Eo,DocumentSnapshot:Rd,Query:Nd,QueryDocumentSnapshot:Fd,QuerySnapshot:Hg,CollectionReference:hm,FieldPath:BA,FieldValue:VA,setLogLevel:zme,CACHE_SIZE_UNLIMITED:T6};function Ume(i,t){i.INTERNAL.registerComponent(new Sr("firestore-compat",e=>{let n=e.getProvider("app-compat").getImmediate(),r=e.getProvider("firestore").getImmediate();return t(n,r)},"PUBLIC").setServiceProps(Object.assign({},jme)))}function Hme(i){Ume(i,(t,e)=>new jx(t,e,new NA)),i.registerVersion(Lme,Bme,"node")}Hme(Ei);function qme(i,t=Cu){return new vn(e=>{let n;return t!=null?t.schedule(()=>{n=i.onSnapshot({includeMetadataChanges:!0},e)}):n=i.onSnapshot({includeMetadataChanges:!0},e),()=>{n?.()}})}function H6(i,t){return qme(i,t)}function Wme(i,t){return H6(i,t).pipe(Pi(void 0),$f(),Ue(e=>{let[n,r]=e;return r.exists?n?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}}))}function HA(i,t){return H6(i,t).pipe(Ue(e=>({payload:e,type:"query"})))}var qx=class{ref;afs;constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){let n=this.ref.collection(t),{ref:r,query:s}=K6(n,e);return new Gx(r,s,this.afs)}snapshotChanges(){return Wme(this.ref,this.afs.schedulers.outsideAngular).pipe(Fi)}valueChanges(t={}){return this.snapshotChanges().pipe(Ue(({payload:e})=>t.idField?Tt(ve({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Wr(this.ref.get(t)).pipe(Fi)}};function Wx(i,t){return HA(i,t).pipe(Pi(void 0),$f(),Ue(e=>{let[n,r]=e,s=r.payload.docChanges(),o=s.map(a=>({type:a.type,payload:a}));return n&&JSON.stringify(n.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((a,l)=>{let c=s.find(u=>u.doc.ref.isEqual(a.ref)),d=n?.payload.docs.find(u=>u.ref.isEqual(a.ref));c&&JSON.stringify(c.doc.metadata)===JSON.stringify(a.metadata)||!c&&d&&JSON.stringify(d.metadata)===JSON.stringify(a.metadata)||o.push({type:"modified",payload:{oldIndex:l,newIndex:l,type:"modified",doc:a}})}),o}))}function q6(i,t,e){return Wx(i,e).pipe(zc((n,r)=>Gme(n,r.map(s=>s.payload),t),[]),Ss(),Ue(n=>n.map(r=>({type:r.type,payload:r}))))}function Gme(i,t,e){return t.forEach(n=>{e.indexOf(n.type)>-1&&(i=$me(i,n))}),i}function jA(i,t,e,...n){let r=i.slice();return r.splice(t,e,...n),r}function $me(i,t){switch(t.type){case"added":if(!(i[t.newIndex]&&i[t.newIndex].doc.ref.isEqual(t.doc.ref)))return jA(i,t.newIndex,0,t);break;case"modified":if(i[t.oldIndex]==null||i[t.oldIndex].doc.ref.isEqual(t.doc.ref))if(t.oldIndex!==t.newIndex){let e=i.slice();return e.splice(t.oldIndex,1),e.splice(t.newIndex,0,t),e}else return jA(i,t.newIndex,1,t);break;case"removed":if(i[t.oldIndex]&&i[t.oldIndex].doc.ref.isEqual(t.doc.ref))return jA(i,t.oldIndex,1);break}return i}function W6(i){return(!i||i.length===0)&&(i=["added","removed","modified"]),i}var Gx=class{ref;query;afs;constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=Wx(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Ue(n=>n.filter(r=>t.indexOf(r.type)>-1)))),e.pipe(Pi(void 0),$f(),Ot(([n,r])=>r.length>0||!n),Ue(([,n])=>n),Fi)}auditTrail(t){return this.stateChanges(t).pipe(zc((e,n)=>[...e,...n],[]))}snapshotChanges(t){let e=W6(t);return q6(this.query,e,this.afs.schedulers.outsideAngular).pipe(Fi)}valueChanges(t={}){return HA(this.query,this.afs.schedulers.outsideAngular).pipe(Ue(e=>e.payload.docs.map(n=>t.idField?Tt(ve({},n.data()),{[t.idField]:n.id}):n.data())),Fi)}get(t){return Wr(this.query.get(t)).pipe(Fi)}add(t){return this.ref.add(t)}doc(t){return new qx(this.ref.doc(t),this.afs)}},UA=class{query;afs;constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return!t||t.length===0?Wx(this.query,this.afs.schedulers.outsideAngular).pipe(Fi):Wx(this.query,this.afs.schedulers.outsideAngular).pipe(Ue(e=>e.filter(n=>t.indexOf(n.type)>-1)),Ot(e=>e.length>0),Fi)}auditTrail(t){return this.stateChanges(t).pipe(zc((e,n)=>[...e,...n],[]))}snapshotChanges(t){let e=W6(t);return q6(this.query,e,this.afs.schedulers.outsideAngular).pipe(Fi)}valueChanges(t={}){return HA(this.query,this.afs.schedulers.outsideAngular).pipe(Ue(n=>n.payload.docs.map(r=>t.idField?ve({[t.idField]:r.id},r.data()):r.data())),Fi)}get(t){return Wr(this.query.get(t)).pipe(Fi)}},G6=new te("angularfire2.enableFirestorePersistence"),$6=new te("angularfire2.firestore.persistenceSettings"),Kme=new te("angularfire2.firestore.settings"),Yme=new te("angularfire2.firestore.use-emulator");function K6(i,t=e=>e){return{query:t(i),ref:i}}var tn=(()=>{class i{schedulers;firestore;persistenceEnabled$;constructor(e,n,r,s,o,a,l,c,d,u,h,m,_,b,v,I,A){this.schedulers=l;let F=Gc(e,a,n),M=d;u&&dp(F,a,h,_,b,v,m,I),[this.firestore,this.persistenceEnabled$]=Pu(`${F.name}.firestore`,"AngularFirestore",F.name,()=>{let L=a.runOutsideAngular(()=>F.firestore());if(s&&L.settings(s),M&&L.useEmulator(...M),r&&!r0(o)){let U=()=>{try{return Wr(L.enablePersistence(c||void 0).then(()=>!0,()=>!1))}catch(T){return typeof console<"u"&&console.warn(T),We(!1)}};return[L,a.runOutsideAngular(U)]}else return[L,We(!1)]},[s,M,r])}collection(e,n){let r;typeof e=="string"?r=this.firestore.collection(e):r=e;let{ref:s,query:o}=K6(r,n),a=this.schedulers.ngZone.run(()=>s);return new Gx(a,o,this)}collectionGroup(e,n){let r=n||(o=>o),s=this.firestore.collectionGroup(e);return new UA(r(s),this)}doc(e){let n;typeof e=="string"?n=this.firestore.doc(e):n=e;let r=this.schedulers.ngZone.run(()=>n);return new qx(r,this)}createId(){return this.firestore.collection("_").doc().id}static \u0275fac=function(n){return new(n||i)(V(Wa),V(Ga,8),V(G6,8),V(Kme,8),V(Gr),V(_e),V(ks),V($6,8),V(Yme,8),V(Yt,8),V(rp,8),V(sp,8),V(op,8),V(ap,8),V(lp,8),V(cp,8),V(Qr,8))};static \u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})(),Y6=(()=>{class i{constructor(){Ei.registerVersion("angularfire",kr.full,"fst-compat")}static enablePersistence(e){return{ngModule:i,providers:[{provide:G6,useValue:!0},{provide:$6,useValue:e}]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=de({type:i});static \u0275inj=ce({providers:[tn]})}return i})();var cH=Ub(MU(),1);var dw="5",dH="v",uH="s",hH="r",mH="f",fH=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,pH="ls",gH="p",MO="ac",_H="websocket",bH="long_polling";var AO=class{constructor(t){this.domStorage_=t,this.prefix_="firebase:"}set(t,e){e==null?this.domStorage_.removeItem(this.prefixedName_(t)):this.domStorage_.setItem(this.prefixedName_(t),Hi(e))}get(t){let e=this.domStorage_.getItem(this.prefixedName_(t));return e==null?null:d0(e)}remove(t){this.domStorage_.removeItem(this.prefixedName_(t))}prefixedName_(t){return this.prefix_+t}toString(){return this.domStorage_.toString()}};var OO=class{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(t,e){e==null?delete this.cache_[t]:this.cache_[t]=e}get(t){return Kr(this.cache_,t)?this.cache_[t]:null}remove(t){delete this.cache_[t]}};var vH=function(i){try{if(typeof window<"u"&&typeof window[i]<"u"){let t=window[i];return t.setItem("firebase:sentinel","cache"),t.removeItem("firebase:sentinel"),new AO(t)}}catch{}return new OO},Gd=vH("localStorage"),PO=vH("sessionStorage");var ym=new Ha("@firebase/database"),yH=function(){let i=1;return function(){return i++}}(),xH=function(i){let t=TL(i),e=new EL;e.update(t);let n=e.digest();return a0.encodeByteArray(n)},S_=function(...i){let t="";for(let e=0;e<i.length;e++){let n=i[e];Array.isArray(n)||n&&typeof n=="object"&&typeof n.length=="number"?t+=S_.apply(null,n):typeof n=="object"?t+=Hi(n):t+=n,t+=" "}return t},$d=null,AU=!0,wH=function(i,t){he(!t||i===!0||i===!1,"Can't turn on custom loggers persistently."),i===!0?(ym.logLevel=Yr.VERBOSE,$d=ym.log.bind(ym),t&&PO.set("logging_enabled",!0)):typeof i=="function"?$d=i:($d=null,PO.remove("logging_enabled"))},fn=function(...i){if(AU===!0&&(AU=!1,$d===null&&PO.get("logging_enabled")===!0&&wH(!0)),$d){let t=S_.apply(null,i);$d(t)}},k_=function(i){return function(...t){fn(i,...t)}},RO=function(...i){let t="FIREBASE INTERNAL ERROR: "+S_(...i);ym.error(t)},Ao=function(...i){let t=`FIREBASE FATAL ERROR: ${S_(...i)}`;throw ym.error(t),new Error(t)},Ln=function(...i){let t="FIREBASE WARNING: "+S_(...i);ym.warn(t)},ipe=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Ln("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},Fw=function(i){return typeof i=="number"&&(i!==i||i===Number.POSITIVE_INFINITY||i===Number.NEGATIVE_INFINITY)},npe=function(i){if(eo()||document.readyState==="complete")i();else{let t=!1,e=function(){if(!document.body){setTimeout(e,Math.floor(10));return}t||(t=!0,i())};document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&e()}),window.attachEvent("onload",e))}},Yl="[MIN_NAME]",va="[MAX_NAME]",Yd=function(i,t){if(i===t)return 0;if(i===Yl||t===va)return-1;if(t===Yl||i===va)return 1;{let e=OU(i),n=OU(t);return e!==null?n!==null?e-n===0?i.length-t.length:e-n:-1:n!==null?1:i<t?-1:1}},rpe=function(i,t){return i===t?0:i<t?-1:1},e_=function(i,t){if(t&&i in t)return t[i];throw new Error("Missing required key ("+i+") in object: "+Hi(t))},RP=function(i){if(typeof i!="object"||i===null)return Hi(i);let t=[];for(let n in i)t.push(n);t.sort();let e="{";for(let n=0;n<t.length;n++)n!==0&&(e+=","),e+=Hi(t[n]),e+=":",e+=RP(i[t[n]]);return e+="}",e},CH=function(i,t){let e=i.length;if(e<=t)return[i];let n=[];for(let r=0;r<e;r+=t)r+t>e?n.push(i.substring(r,e)):n.push(i.substring(r,r+t));return n};function pn(i,t){for(let e in i)i.hasOwnProperty(e)&&t(e,i[e])}var SH=function(i){he(!Fw(i),"Invalid JSON number");let t=11,e=52,n=(1<<t-1)-1,r,s,o,a,l;i===0?(s=0,o=0,r=1/i===-1/0?1:0):(r=i<0,i=Math.abs(i),i>=Math.pow(2,1-n)?(a=Math.min(Math.floor(Math.log(i)/Math.LN2),n),s=a+n,o=Math.round(i*Math.pow(2,e-a)-Math.pow(2,e))):(s=0,o=Math.round(i/Math.pow(2,1-n-e))));let c=[];for(l=e;l;l-=1)c.push(o%2?1:0),o=Math.floor(o/2);for(l=t;l;l-=1)c.push(s%2?1:0),s=Math.floor(s/2);c.push(r?1:0),c.reverse();let d=c.join(""),u="";for(l=0;l<64;l+=8){let h=parseInt(d.substr(l,8),2).toString(16);h.length===1&&(h="0"+h),u=u+h}return u.toLowerCase()},spe=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},ope=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function ape(i,t){let e="Unknown Error";i==="too_big"?e="The data requested exceeds the maximum size that can be accessed with a single request.":i==="permission_denied"?e="Client doesn't have permission to access the desired data.":i==="unavailable"&&(e="The service is unavailable");let n=new Error(i+" at "+t._path.toString()+": "+e);return n.code=i.toUpperCase(),n}var lpe=new RegExp("^-?(0*)\\d{1,10}$"),cpe=-2147483648,dpe=2147483647,OU=function(i){if(lpe.test(i)){let t=Number(i);if(t>=cpe&&t<=dpe)return t}return null},Dm=function(i){try{i()}catch(t){setTimeout(()=>{let e=t.stack||"";throw Ln("Exception was thrown by user callback.",e),t},Math.floor(0))}},upe=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},r_=function(i,t){let e=setTimeout(i,t);return typeof e=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(e):typeof e=="object"&&e.unref&&e.unref(),e};var uw=class{constructor(t,e,n,r,s=!1,o="",a=!1,l=!1){this.secure=e,this.namespace=n,this.webSocketOnly=r,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=a,this.isUsingEmulator=l,this._host=t.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Gd.get("host:"+t)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(t){t!==this.internalHost&&(this.internalHost=t,this.isCacheableHost()&&Gd.set("host:"+this._host,this.internalHost))}toString(){let t=this.toURLString();return this.persistenceKey&&(t+="<"+this.persistenceKey+">"),t}toURLString(){let t=this.secure?"https://":"http://",e=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${t}${this.host}/${e}`}};function hpe(i){return i.host!==i.internalHost||i.isCustomHost()||i.includeNamespaceInQueryParams}function kH(i,t,e){he(typeof t=="string","typeof type must == string"),he(typeof e=="object","typeof params must == object");let n;if(t===_H)n=(i.secure?"wss://":"ws://")+i.internalHost+"/.ws?";else if(t===bH)n=(i.secure?"https://":"http://")+i.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+t);hpe(i)&&(e.ns=i.namespace);let r=[];return pn(e,(s,o)=>{r.push(s+"="+o)}),n+r.join("&")}var FO=class{constructor(){this.counters_={}}incrementCounter(t,e=1){Kr(this.counters_,t)||(this.counters_[t]=0),this.counters_[t]+=e}get(){return vL(this.counters_)}};var CO={},SO={};function FP(i){let t=i.toString();return CO[t]||(CO[t]=new FO),CO[t]}function mpe(i,t){let e=i.toString();return SO[e]||(SO[e]=t()),SO[e]}var NP="";function LP(i){NP=i}var fpe=16384,ppe=45e3,c_=null;typeof MozWebSocket<"u"?c_=MozWebSocket:typeof WebSocket<"u"&&(c_=WebSocket);function gpe(i){c_=i}var bm=(()=>{class i{constructor(e,n,r,s,o,a,l){this.connId=e,this.applicationId=r,this.appCheckToken=s,this.authToken=o,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=k_(this.connId),this.stats_=FP(n),this.connURL=i.connectionURL_(n,a,l,s,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,s,o){let a={};return a[dH]=dw,!eo()&&typeof location<"u"&&location.hostname&&fH.test(location.hostname)&&(a[hH]=mH),n&&(a[uH]=n),r&&(a[pH]=r),s&&(a[MO]=s),o&&(a[gH]=o),kH(e,_H,a)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Gd.set("previous_websocket_failure",!0);try{let r;if(eo()){let s=this.nodeAdmin?"AdminNode":"Node";r={headers:{"User-Agent":`Firebase/${dw}/${NP}/${process.platform}/${s}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(r.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(r.headers["X-Firebase-AppCheck"]=this.appCheckToken);let o=process.env,a=this.connURL.indexOf("wss://")===0?o.HTTPS_PROXY||o.https_proxy:o.HTTP_PROXY||o.http_proxy;a&&(r.proxy={origin:a})}this.mySock=new c_(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");let s=r.message||r.data;s&&this.log_(s),this.onClosed_()}}start(){}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){let n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&c_!==null&&!i.forceDisallow_}static previouslyFailed(){return Gd.isInMemoryStorage||Gd.get("previous_websocket_failure")===!0}markConnectionHealthy(){Gd.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){let n=this.frames.join("");this.frames=null;let r=d0(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(he(this.frames===null,"We already have a frame buffer"),e.length<=6){let n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;let n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{let r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();let n=Hi(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);let r=CH(n,fpe);r.length>1&&this.sendString_(String(r.length));for(let s=0;s<r.length;s++)this.sendString_(r[s])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(ppe))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return i.responsesRequiredToBeHealthy=2,i.healthyTimeout=3e4,i})(),PU="@firebase/database",RU="1.0.8";var NO=class{constructor(t,e){this.appName_=t,this.appCheckProvider=e,this.appCheck=e?.getImmediate({optional:!0}),this.appCheck||e?.get().then(n=>this.appCheck=n)}getToken(t){return this.appCheck?this.appCheck.getToken(t):new Promise((e,n)=>{setTimeout(()=>{this.appCheck?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){var e;(e=this.appCheckProvider)===null||e===void 0||e.get().then(n=>n.addTokenListener(t))}notifyForInvalidToken(){Ln(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}};var LO=class{constructor(t,e,n){this.appName_=t,this.firebaseOptions_=e,this.authProvider_=n,this.auth_=null,this.auth_=n.getImmediate({optional:!0}),this.auth_||n.onInit(r=>this.auth_=r)}getToken(t){return this.auth_?this.auth_.getToken(t).catch(e=>e&&e.code==="auth/token-not-initialized"?(fn("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(e)):new Promise((e,n)=>{setTimeout(()=>{this.auth_?this.getToken(t).then(e,n):e(null)},0)})}addTokenChangeListener(t){this.auth_?this.auth_.addAuthTokenListener(t):this.authProvider_.get().then(e=>e.addAuthTokenListener(t))}removeTokenChangeListener(t){this.authProvider_.get().then(e=>e.removeAuthTokenListener(t))}notifyForInvalidToken(){let t='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?t+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?t+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':t+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Ln(t)}},s_=(()=>{class i{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}i.OWNER="owner";return i})(),BO=class{constructor(t){this.onMessage_=t,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(t,e){this.closeAfterResponse=t,this.onClose=e,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(t,e){for(this.pendingResponses[t]=e;this.pendingResponses[this.currentResponseNum];){let n=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let r=0;r<n.length;++r)n[r]&&Dm(()=>{this.onMessage_(n[r])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}};var FU="start",_pe="close",bpe="pLPCommand",vpe="pRTLPCB",EH="id",TH="pw",IH="ser",ype="cb",xpe="seg",wpe="ts",Cpe="d",Spe="dframe",DH=1870,MH=30,kpe=DH-MH,Epe=25e3,Tpe=3e4,d_=class i{constructor(t,e,n,r,s,o,a){this.connId=t,this.repoInfo=e,this.applicationId=n,this.appCheckToken=r,this.authToken=s,this.transportSessionId=o,this.lastSessionId=a,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=k_(t),this.stats_=FP(e),this.urlFn=l=>(this.appCheckToken&&(l[MO]=this.appCheckToken),kH(e,bH,l))}open(t,e){this.curSegmentNum=0,this.onDisconnect_=e,this.myPacketOrderer=new BO(t),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(Tpe)),npe(()=>{if(this.isClosed_)return;this.scriptTagHolder=new VO((...s)=>{let[o,a,l,c,d]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===FU)this.id=a,this.password=l;else if(o===_pe)a?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(a,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{let[o,a]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,a)},()=>{this.onClosed_()},this.urlFn);let n={};n[FU]="t",n[IH]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(n[ype]=this.scriptTagHolder.uniqueCallbackIdentifier),n[dH]=dw,this.transportSessionId&&(n[uH]=this.transportSessionId),this.lastSessionId&&(n[pH]=this.lastSessionId),this.applicationId&&(n[gH]=this.applicationId),this.appCheckToken&&(n[MO]=this.appCheckToken),typeof location<"u"&&location.hostname&&fH.test(location.hostname)&&(n[hH]=mH);let r=this.urlFn(n);this.log_("Connecting via long-poll to "+r),this.scriptTagHolder.addTag(r,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){i.forceAllow_=!0}static forceDisallow(){i.forceDisallow_=!0}static isAvailable(){return eo()?!1:i.forceAllow_?!0:!i.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!spe()&&!ope()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(t){let e=Hi(t);this.bytesSent+=e.length,this.stats_.incrementCounter("bytes_sent",e.length);let n=bL(e),r=CH(n,kpe);for(let s=0;s<r.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,r.length,r[s]),this.curSegmentNum++}addDisconnectPingFrame(t,e){if(eo())return;this.myDisconnFrame=document.createElement("iframe");let n={};n[Spe]="t",n[EH]=t,n[TH]=e,this.myDisconnFrame.src=this.urlFn(n),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(t){let e=Hi(t).length;this.bytesReceived+=e,this.stats_.incrementCounter("bytes_received",e)}},VO=class i{constructor(t,e,n,r){if(this.onDisconnect=n,this.urlFn=r,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0,eo())this.commandCB=t,this.onMessageCB=e;else{this.uniqueCallbackIdentifier=yH(),window[bpe+this.uniqueCallbackIdentifier]=t,window[vpe+this.uniqueCallbackIdentifier]=e,this.myIFrame=i.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";</script>');let o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(a){fn("frame writing exception"),a.stack&&fn(a.stack),fn(a)}}}static createIFrame_(){let t=document.createElement("iframe");if(t.style.display="none",document.body){document.body.appendChild(t);try{t.contentWindow.document||fn("No IE domain setting required")}catch{let n=document.domain;t.src="javascript:void((function(){document.open();document.domain='"+n+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return t.contentDocument?t.doc=t.contentDocument:t.contentWindow?t.doc=t.contentWindow.document:t.document&&(t.doc=t.document),t}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));let t=this.onDisconnect;t&&(this.onDisconnect=null,t())}startLongPoll(t,e){for(this.myID=t,this.myPW=e,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;let t={};t[EH]=this.myID,t[TH]=this.myPW,t[IH]=this.currentSerial;let e=this.urlFn(t),n="",r=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+MH+n.length<=DH;){let o=this.pendingSegs.shift();n=n+"&"+xpe+r+"="+o.seg+"&"+wpe+r+"="+o.ts+"&"+Cpe+r+"="+o.d,r++}return e=e+n,this.addLongPollTag_(e,this.currentSerial),!0}else return!1}enqueueSegment(t,e,n){this.pendingSegs.push({seg:t,ts:e,d:n}),this.alive&&this.newRequest_()}addLongPollTag_(t,e){this.outstandingRequests.add(e);let n=()=>{this.outstandingRequests.delete(e),this.newRequest_()},r=setTimeout(n,Math.floor(Epe)),s=()=>{clearTimeout(r),n()};this.addTag(t,s)}addTag(t,e){eo()?this.doNodeLongPoll(t,e):setTimeout(()=>{try{if(!this.sendNewPolls)return;let n=this.myIFrame.doc.createElement("script");n.type="text/javascript",n.async=!0,n.src=t,n.onload=n.onreadystatechange=function(){let r=n.readyState;(!r||r==="loaded"||r==="complete")&&(n.onload=n.onreadystatechange=null,n.parentNode&&n.parentNode.removeChild(n),e())},n.onerror=()=>{fn("Long-poll script failed to load: "+t),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(n)}catch{}},Math.floor(1))}};var AH=(()=>{class i{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[d_,bm]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){let n=bm&&bm.isAvailable(),r=n&&!bm.previouslyFailed();if(e.webSocketOnly&&(n||Ln("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[bm];else{let s=this.transports_=[];for(let o of i.ALL_TRANSPORTS)o&&o.isAvailable()&&s.push(o);i.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}i.globalTransportInitialized_=!1;return i})(),Ipe=6e4,Dpe=5e3,Mpe=10*1024,Ape=100*1024,kO="t",NU="d",Ope="s",LU="r",Ppe="e",BU="o",VU="a",zU="n",jU="p",Rpe="h",zO=class{constructor(t,e,n,r,s,o,a,l,c,d){this.id=t,this.repoInfo_=e,this.applicationId_=n,this.appCheckToken_=r,this.authToken_=s,this.onMessage_=o,this.onReady_=a,this.onDisconnect_=l,this.onKill_=c,this.lastSessionId=d,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=k_("c:"+this.id+":"),this.transportManager_=new AH(e),this.log_("Connection created"),this.start_()}start_(){let t=this.transportManager_.initialTransport();this.conn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.conn_),n=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(e,n)},Math.floor(0));let r=t.healthyTimeout||0;r>0&&(this.healthyTimeout_=r_(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>Ape?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>Mpe?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(r)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(t){return e=>{t===this.conn_?this.onConnectionLost_(e):t===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(t){return e=>{this.state_!==2&&(t===this.rx_?this.onPrimaryMessageReceived_(e):t===this.secondaryConn_?this.onSecondaryMessageReceived_(e):this.log_("message on old connection"))}}sendRequest(t){let e={t:"d",d:t};this.sendData_(e)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(t){if(kO in t){let e=t[kO];e===VU?this.upgradeIfSecondaryHealthy_():e===LU?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):e===BU&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(t){let e=e_("t",t),n=e_("d",t);if(e==="c")this.onSecondaryControl_(n);else if(e==="d")this.pendingDataMessages.push(n);else throw new Error("Unknown protocol layer: "+e)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:jU,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:VU,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:zU,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(t){let e=e_("t",t),n=e_("d",t);e==="c"?this.onControl_(n):e==="d"&&this.onDataMessage_(n)}onDataMessage_(t){this.onPrimaryResponse_(),this.onMessage_(t)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(t){let e=e_(kO,t);if(NU in t){let n=t[NU];if(e===Rpe){let r=Object.assign({},n);this.repoInfo_.isUsingEmulator&&(r.h=this.repoInfo_.host),this.onHandshake_(r)}else if(e===zU){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let r=0;r<this.pendingDataMessages.length;++r)this.onDataMessage_(this.pendingDataMessages[r]);this.pendingDataMessages=[],this.tryCleanupConnection()}else e===Ope?this.onConnectionShutdown_(n):e===LU?this.onReset_(n):e===Ppe?RO("Server Error: "+n):e===BU?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):RO("Unknown control packet command: "+e)}}onHandshake_(t){let e=t.ts,n=t.v,r=t.h;this.sessionId=t.s,this.repoInfo_.host=r,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,e),dw!==n&&Ln("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){let t=this.transportManager_.upgradeTransport();t&&this.startUpgrade_(t)}startUpgrade_(t){this.secondaryConn_=new t(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=t.responsesRequiredToBeHealthy||0;let e=this.connReceiver_(this.secondaryConn_),n=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(e,n),r_(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(Ipe))}onReset_(t){this.log_("Reset packet received.  New host: "+t),this.repoInfo_.host=t,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(t,e){this.log_("Realtime connection established."),this.conn_=t,this.state_=1,this.onReady_&&(this.onReady_(e,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):r_(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(Dpe))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:jU,d:{}}}))}onSecondaryConnectionLost_(){let t=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===t||this.rx_===t)&&this.close()}onConnectionLost_(t){this.conn_=null,!t&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Gd.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(t){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(t),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(t){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(t)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}};var hw=class{put(t,e,n,r){}merge(t,e,n,r){}refreshAuthToken(t){}refreshAppCheckToken(t){}onDisconnectPut(t,e,n){}onDisconnectMerge(t,e,n){}onDisconnectCancel(t,e){}reportStats(t){}};var mw=class{constructor(t){this.allowedEvents_=t,this.listeners_={},he(Array.isArray(t)&&t.length>0,"Requires a non-empty array")}trigger(t,...e){if(Array.isArray(this.listeners_[t])){let n=[...this.listeners_[t]];for(let r=0;r<n.length;r++)n[r].callback.apply(n[r].context,e)}}on(t,e,n){this.validateEventType_(t),this.listeners_[t]=this.listeners_[t]||[],this.listeners_[t].push({callback:e,context:n});let r=this.getInitialEvent(t);r&&e.apply(n,r)}off(t,e,n){this.validateEventType_(t);let r=this.listeners_[t]||[];for(let s=0;s<r.length;s++)if(r[s].callback===e&&(!n||n===r[s].context)){r.splice(s,1);return}}validateEventType_(t){he(this.allowedEvents_.find(e=>e===t),"Unknown event: "+t)}};var fw=class i extends mw{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!pS()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new i}getInitialEvent(t){return he(t==="online","Unknown event type: "+t),[this.online_]}currentlyOnline(){return this.online_}};var UU=32,HU=768,Dt=class{constructor(t,e){if(e===void 0){this.pieces_=t.split("/");let n=0;for(let r=0;r<this.pieces_.length;r++)this.pieces_[r].length>0&&(this.pieces_[n]=this.pieces_[r],n++);this.pieces_.length=n,this.pieceNum_=0}else this.pieces_=t,this.pieceNum_=e}toString(){let t="";for(let e=this.pieceNum_;e<this.pieces_.length;e++)this.pieces_[e]!==""&&(t+="/"+this.pieces_[e]);return t||"/"}};function It(){return new Dt("")}function rt(i){return i.pieceNum_>=i.pieces_.length?null:i.pieces_[i.pieceNum_]}function Ql(i){return i.pieces_.length-i.pieceNum_}function Wt(i){let t=i.pieceNum_;return t<i.pieces_.length&&t++,new Dt(i.pieces_,t)}function BP(i){return i.pieceNum_<i.pieces_.length?i.pieces_[i.pieces_.length-1]:null}function Fpe(i){let t="";for(let e=i.pieceNum_;e<i.pieces_.length;e++)i.pieces_[e]!==""&&(t+="/"+encodeURIComponent(String(i.pieces_[e])));return t||"/"}function u_(i,t=0){return i.pieces_.slice(i.pieceNum_+t)}function OH(i){if(i.pieceNum_>=i.pieces_.length)return null;let t=[];for(let e=i.pieceNum_;e<i.pieces_.length-1;e++)t.push(i.pieces_[e]);return new Dt(t,0)}function mi(i,t){let e=[];for(let n=i.pieceNum_;n<i.pieces_.length;n++)e.push(i.pieces_[n]);if(t instanceof Dt)for(let n=t.pieceNum_;n<t.pieces_.length;n++)e.push(t.pieces_[n]);else{let n=t.split("/");for(let r=0;r<n.length;r++)n[r].length>0&&e.push(n[r])}return new Dt(e,0)}function st(i){return i.pieceNum_>=i.pieces_.length}function Zn(i,t){let e=rt(i),n=rt(t);if(e===null)return t;if(e===n)return Zn(Wt(i),Wt(t));throw new Error("INTERNAL ERROR: innerPath ("+t+") is not within outerPath ("+i+")")}function Npe(i,t){let e=u_(i,0),n=u_(t,0);for(let r=0;r<e.length&&r<n.length;r++){let s=Yd(e[r],n[r]);if(s!==0)return s}return e.length===n.length?0:e.length<n.length?-1:1}function VP(i,t){if(Ql(i)!==Ql(t))return!1;for(let e=i.pieceNum_,n=t.pieceNum_;e<=i.pieces_.length;e++,n++)if(i.pieces_[e]!==t.pieces_[n])return!1;return!0}function cs(i,t){let e=i.pieceNum_,n=t.pieceNum_;if(Ql(i)>Ql(t))return!1;for(;e<i.pieces_.length;){if(i.pieces_[e]!==t.pieces_[n])return!1;++e,++n}return!0}var jO=class{constructor(t,e){this.errorPrefix_=e,this.parts_=u_(t,0),this.byteLength_=Math.max(1,this.parts_.length);for(let n=0;n<this.parts_.length;n++)this.byteLength_+=Jf(this.parts_[n]);PH(this)}};function Lpe(i,t){i.parts_.length>0&&(i.byteLength_+=1),i.parts_.push(t),i.byteLength_+=Jf(t),PH(i)}function Bpe(i){let t=i.parts_.pop();i.byteLength_-=Jf(t),i.parts_.length>0&&(i.byteLength_-=1)}function PH(i){if(i.byteLength_>HU)throw new Error(i.errorPrefix_+"has a key path longer than "+HU+" bytes ("+i.byteLength_+").");if(i.parts_.length>UU)throw new Error(i.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+UU+") or object contains a cycle "+Wd(i))}function Wd(i){return i.parts_.length===0?"":"in property '"+i.parts_.join(".")+"'"}var UO=class i extends mw{constructor(){super(["visible"]);let t,e;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(e="visibilitychange",t="hidden"):typeof document.mozHidden<"u"?(e="mozvisibilitychange",t="mozHidden"):typeof document.msHidden<"u"?(e="msvisibilitychange",t="msHidden"):typeof document.webkitHidden<"u"&&(e="webkitvisibilitychange",t="webkitHidden")),this.visible_=!0,e&&document.addEventListener(e,()=>{let n=!document[t];n!==this.visible_&&(this.visible_=n,this.trigger("visible",n))},!1)}static getInstance(){return new i}getInitialEvent(t){return he(t==="visible","Unknown event type: "+t),[this.visible_]}};var t_=1e3,Vpe=60*5*1e3,qU=30*1e3,zpe=1.3,jpe=3e4,Upe="server_kill",WU=3,zP=(()=>{class i extends hw{constructor(e,n,r,s,o,a,l,c){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=s,this.onServerInfoUpdate_=o,this.authTokenProvider_=a,this.appCheckTokenProvider_=l,this.authOverride_=c,this.id=i.nextPersistentConnectionId_++,this.log_=k_("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=t_,this.maxReconnectDelay_=Vpe,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,c&&!eo())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");UO.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&fw.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){let s=++this.requestNumber_,o={r:s,a:e,b:n};this.log_(Hi(o)),he(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(o),r&&(this.requestCBHash_[s]=r)}get(e){this.initConnection_();let n=new an,s={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:a=>{let l=a.d;a.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(s),this.outstandingGetCount_++;let o=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(o),n.promise}listen(e,n,r,s){this.initConnection_();let o=e._queryIdentifier,a=e._path.toString();this.log_("Listen called for "+a+" "+o),this.listens.has(a)||this.listens.set(a,new Map),he(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),he(!this.listens.get(a).has(o),"listen() called twice for same path/queryId.");let l={onComplete:s,hashFn:n,query:e,tag:r};this.listens.get(a).set(o,l),this.connected_&&this.sendListen_(l)}sendGet_(e){let n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){let n=e.query,r=n._path.toString(),s=n._queryIdentifier;this.log_("Listen on "+r+" for "+s);let o={p:r},a="q";e.tag&&(o.q=n._queryObject,o.t=e.tag),o.h=e.hashFn(),this.sendRequest(a,o,l=>{let c=l.d,d=l.s;i.warnOnListenWarnings_(c,n),(this.listens.get(r)&&this.listens.get(r).get(s))===e&&(this.log_("listen response",l),d!=="ok"&&this.removeListen_(r,s),e.onComplete&&e.onComplete(d,c))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&Kr(e,"w")){let r=Ua(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){let s='".indexOn": "'+n._queryParams.getIndex().toString()+'"',o=n._path.toString();Ln(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${s} at ${o} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||SL(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=qU)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){let e=this.authToken_,n=CL(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,s=>{let o=s.s,a=s.d||"error";this.authToken_===e&&(o==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(o,a))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{let n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){let r=e._path.toString(),s=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+s),he(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,s)&&this.connected_&&this.sendUnlisten_(r,s,e._queryObject,n)}sendUnlisten_(e,n,r,s){this.log_("Unlisten on "+e+" for "+n);let o={p:e},a="n";s&&(o.q=r,o.t=s),this.sendRequest(a,o)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,s){let o={p:n,d:r};this.log_("onDisconnect "+e,o),this.sendRequest(e,o,a=>{s&&setTimeout(()=>{s(a.s,a.d)},Math.floor(0))})}put(e,n,r,s){this.putInternal("p",e,n,r,s)}merge(e,n,r,s){this.putInternal("m",e,n,r,s)}putInternal(e,n,r,s,o){this.initConnection_();let a={p:n,d:r};o!==void 0&&(a.h=o),this.outstandingPuts_.push({action:e,request:a,onComplete:s}),this.outstandingPutCount_++;let l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){let n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,s=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,o=>{this.log_(n+" response",o),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),s&&s(o.s,o.d)})}reportStats(e){if(this.connected_){let n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){let o=r.d;this.log_("reportStats","Error sending stats: "+o)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+Hi(e));let n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):RO("Unrecognized action received from server: "+Hi(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){he(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=t_,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=t_,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>jpe&&(this.reconnectDelay_=t_),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());let e=new Date().getTime()-this.lastConnectionAttemptTime_,n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*zpe)}this.onConnectStatus_(!1)}establishConnection_(){return N(this,null,function*(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;let e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),s=this.id+":"+i.nextConnectionId_++,o=this.lastSessionId,a=!1,l=null,c=function(){l?l.close():(a=!0,r())},d=function(h){he(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(h)};this.realtime_={close:c,sendRequest:d};let u=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{let[h,m]=yield Promise.all([this.authTokenProvider_.getToken(u),this.appCheckTokenProvider_.getToken(u)]);a?fn("getToken() completed but was canceled"):(fn("getToken() completed. Creating connection."),this.authToken_=h&&h.accessToken,this.appCheckToken_=m&&m.token,l=new zO(s,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,_=>{Ln(_+" ("+this.repoInfo_.toString()+")"),this.interrupt(Upe)},o))}catch(h){this.log_("Failed to get token: "+h),a||(this.repoInfo_.nodeAdmin&&Ln(h),c())}}})}interrupt(e){fn("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){fn("Resuming connection for reason: "+e),delete this.interruptReasons_[e],u0(this.interruptReasons_)&&(this.reconnectDelay_=t_,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){let n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){let n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(o=>RP(o)).join("$"):r="default";let s=this.removeListen_(e,r);s&&s.onComplete&&s.onComplete("permission_denied")}removeListen_(e,n){let r=new Dt(e).toString(),s;if(this.listens.has(r)){let o=this.listens.get(r);s=o.get(n),o.delete(n),o.size===0&&this.listens.delete(r)}else s=void 0;return s}onAuthRevoked_(e,n){fn("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=WU&&(this.reconnectDelay_=qU,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){fn("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=WU&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(let e of this.listens.values())for(let n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){let e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){let e={},n="js";eo()&&(this.repoInfo_.nodeAdmin?n="admin_node":n="node"),e["sdk."+n+"."+NP.replace(/\./g,"-")]=1,pS()?e["framework.cordova"]=1:yL()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){let e=fw.getInstance().currentlyOnline();return u0(this.interruptReasons_)&&e}}i.nextPersistentConnectionId_=0,i.nextConnectionId_=0;return i})(),ct=class i{constructor(t,e){this.name=t,this.node=e}static Wrap(t,e){return new i(t,e)}};var xm=class{getCompare(){return this.compare.bind(this)}indexedValueChanged(t,e){let n=new ct(Yl,t),r=new ct(Yl,e);return this.compare(n,r)!==0}minPost(){return ct.MIN}};var cw,pw=class extends xm{static get __EMPTY_NODE(){return cw}static set __EMPTY_NODE(t){cw=t}compare(t,e){return Yd(t.name,e.name)}isDefinedOn(t){throw Au("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(t,e){return!1}minPost(){return ct.MIN}maxPost(){return new ct(va,cw)}makePost(t,e){return he(typeof t=="string","KeyIndex indexValue must always be a string."),new ct(t,cw)}toString(){return".key"}},Mo=new pw;var vm=class{constructor(t,e,n,r,s=null){this.isReverse_=r,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!t.isEmpty();)if(t=t,o=e?n(t.key,e):1,r&&(o*=-1),o<0)this.isReverse_?t=t.left:t=t.right;else if(o===0){this.nodeStack_.push(t);break}else this.nodeStack_.push(t),this.isReverse_?t=t.right:t=t.left}getNext(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_.pop(),e;if(this.resultGenerator_?e=this.resultGenerator_(t.key,t.value):e={key:t.key,value:t.value},this.isReverse_)for(t=t.left;!t.isEmpty();)this.nodeStack_.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack_.push(t),t=t.left;return e}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;let t=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(t.key,t.value):{key:t.key,value:t.value}}},Us=(()=>{class i{constructor(e,n,r,s,o){this.key=e,this.value=n,this.color=r??i.RED,this.left=s??ds.EMPTY_NODE,this.right=o??ds.EMPTY_NODE}copy(e,n,r,s,o){return new i(e??this.key,n??this.value,r??this.color,s??this.left,o??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let s=this,o=r(e,s.key);return o<0?s=s.copy(null,null,null,s.left.insert(e,n,r),null):o===0?s=s.copy(null,n,null,null,null):s=s.copy(null,null,null,null,s.right.insert(e,n,r)),s.fixUp_()}removeMin_(){if(this.left.isEmpty())return ds.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,s;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return ds.EMPTY_NODE;s=r.right.min_(),r=r.copy(s.key,s.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){let e=this.copy(null,null,i.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){let e=this.copy(null,null,i.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){let e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){let e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");let e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}return i.RED=!0,i.BLACK=!1,i})(),HO=class{copy(t,e,n,r,s){return this}insert(t,e,n){return new Us(t,e,null)}remove(t,e){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}},ds=class i{constructor(t,e=i.EMPTY_NODE){this.comparator_=t,this.root_=e}insert(t,e){return new i(this.comparator_,this.root_.insert(t,e,this.comparator_).copy(null,null,Us.BLACK,null,null))}remove(t){return new i(this.comparator_,this.root_.remove(t,this.comparator_).copy(null,null,Us.BLACK,null,null))}get(t){let e,n=this.root_;for(;!n.isEmpty();){if(e=this.comparator_(t,n.key),e===0)return n.value;e<0?n=n.left:e>0&&(n=n.right)}return null}getPredecessorKey(t){let e,n=this.root_,r=null;for(;!n.isEmpty();)if(e=this.comparator_(t,n.key),e===0){if(n.left.isEmpty())return r?r.key:null;for(n=n.left;!n.right.isEmpty();)n=n.right;return n.key}else e<0?n=n.left:e>0&&(r=n,n=n.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(t){return this.root_.inorderTraversal(t)}reverseTraversal(t){return this.root_.reverseTraversal(t)}getIterator(t){return new vm(this.root_,null,this.comparator_,!1,t)}getIteratorFrom(t,e){return new vm(this.root_,t,this.comparator_,!1,e)}getReverseIteratorFrom(t,e){return new vm(this.root_,t,this.comparator_,!0,e)}getReverseIterator(t){return new vm(this.root_,null,this.comparator_,!0,t)}};ds.EMPTY_NODE=new HO;function Hpe(i,t){return Yd(i.name,t.name)}function jP(i,t){return Yd(i,t)}var qO;function qpe(i){qO=i}var RH=function(i){return typeof i=="number"?"number:"+SH(i):"string:"+i},FH=function(i){if(i.isLeafNode()){let t=i.val();he(typeof t=="string"||typeof t=="number"||typeof t=="object"&&Kr(t,".sv"),"Priority must be a string or number.")}else he(i===qO||i.isEmpty(),"priority of unexpected type.");he(i===qO||i.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};var GU,wm=(()=>{class i{constructor(e,n=i.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,he(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),FH(this.priorityNode_)}static set __childrenNodeConstructor(e){GU=e}static get __childrenNodeConstructor(){return GU}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new i(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return st(e)?this:rt(e)===".priority"?this.priorityNode_:i.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:i.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){let r=rt(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(he(r!==".priority"||Ql(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,i.__childrenNodeConstructor.EMPTY_NODE.updateChild(Wt(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+RH(this.priorityNode_.val())+":");let n=typeof this.value_;e+=n+":",n==="number"?e+=SH(this.value_):e+=this.value_,this.lazyHash_=xH(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===i.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof i.__childrenNodeConstructor?-1:(he(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){let n=typeof e.value_,r=typeof this.value_,s=i.VALUE_TYPE_ORDER.indexOf(n),o=i.VALUE_TYPE_ORDER.indexOf(r);return he(s>=0,"Unknown leaf type: "+n),he(o>=0,"Unknown leaf type: "+r),s===o?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:o-s}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){let n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}i.VALUE_TYPE_ORDER=["object","boolean","number","string"];return i})(),NH,LH;function Wpe(i){NH=i}function Gpe(i){LH=i}var WO=class extends xm{compare(t,e){let n=t.node.getPriority(),r=e.node.getPriority(),s=n.compareTo(r);return s===0?Yd(t.name,e.name):s}isDefinedOn(t){return!t.getPriority().isEmpty()}indexedValueChanged(t,e){return!t.getPriority().equals(e.getPriority())}minPost(){return ct.MIN}maxPost(){return new ct(va,new wm("[PRIORITY-POST]",LH))}makePost(t,e){let n=NH(t);return new ct(e,new wm("[PRIORITY-POST]",n))}toString(){return".priority"}},Zt=new WO;var $pe=Math.log(2),GO=class{constructor(t){let e=s=>parseInt(Math.log(s)/$pe,10),n=s=>parseInt(Array(s+1).join("1"),2);this.count=e(t+1),this.current_=this.count-1;let r=n(this.count);this.bits_=t+1&r}nextBitIsOne(){let t=!(this.bits_&1<<this.current_);return this.current_--,t}},gw=function(i,t,e,n){i.sort(t);let r=function(l,c){let d=c-l,u,h;if(d===0)return null;if(d===1)return u=i[l],h=e?e(u):u,new Us(h,u.node,Us.BLACK,null,null);{let m=parseInt(d/2,10)+l,_=r(l,m),b=r(m+1,c);return u=i[m],h=e?e(u):u,new Us(h,u.node,Us.BLACK,_,b)}},s=function(l){let c=null,d=null,u=i.length,h=function(_,b){let v=u-_,I=u;u-=_;let A=r(v+1,I),F=i[v],M=e?e(F):F;m(new Us(M,F.node,b,null,A))},m=function(_){c?(c.left=_,c=_):(d=_,c=_)};for(let _=0;_<l.count;++_){let b=l.nextBitIsOne(),v=Math.pow(2,l.count-(_+1));b?h(v,Us.BLACK):(h(v,Us.BLACK),h(v,Us.RED))}return d},o=new GO(i.length),a=s(o);return new ds(n||t,a)};var EO,_m={},Cm=class i{constructor(t,e){this.indexes_=t,this.indexSet_=e}static get Default(){return he(_m&&Zt,"ChildrenNode.ts has not been loaded"),EO=EO||new i({".priority":_m},{".priority":Zt}),EO}get(t){let e=Ua(this.indexes_,t);if(!e)throw new Error("No index defined for "+t);return e instanceof ds?e:null}hasIndex(t){return Kr(this.indexSet_,t.toString())}addIndex(t,e){he(t!==Mo,"KeyIndex always exists and isn't meant to be added to the IndexMap.");let n=[],r=!1,s=e.getIterator(ct.Wrap),o=s.getNext();for(;o;)r=r||t.isDefinedOn(o.node),n.push(o),o=s.getNext();let a;r?a=gw(n,t.getCompare()):a=_m;let l=t.toString(),c=Object.assign({},this.indexSet_);c[l]=t;let d=Object.assign({},this.indexes_);return d[l]=a,new i(d,c)}addToIndexes(t,e){let n=Zf(this.indexes_,(r,s)=>{let o=Ua(this.indexSet_,s);if(he(o,"Missing index implementation for "+s),r===_m)if(o.isDefinedOn(t.node)){let a=[],l=e.getIterator(ct.Wrap),c=l.getNext();for(;c;)c.name!==t.name&&a.push(c),c=l.getNext();return a.push(t),gw(a,o.getCompare())}else return _m;else{let a=e.get(t.name),l=r;return a&&(l=l.remove(new ct(t.name,a))),l.insert(t,t.node)}});return new i(n,this.indexSet_)}removeFromIndexes(t,e){let n=Zf(this.indexes_,r=>{if(r===_m)return r;{let s=e.get(t.name);return s?r.remove(new ct(t.name,s)):r}});return new i(n,this.indexSet_)}};var i_,Qe=(()=>{class i{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&FH(this.priorityNode_),this.children_.isEmpty()&&he(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return i_||(i_=new i(new ds(jP),null,Cm.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||i_}updatePriority(e){return this.children_.isEmpty()?this:new i(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{let n=this.children_.get(e);return n===null?i_:n}}getChild(e){let n=rt(e);return n===null?this:this.getImmediateChild(n).getChild(Wt(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(he(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{let r=new ct(e,n),s,o;n.isEmpty()?(s=this.children_.remove(e),o=this.indexMap_.removeFromIndexes(r,this.children_)):(s=this.children_.insert(e,n),o=this.indexMap_.addToIndexes(r,this.children_));let a=s.isEmpty()?i_:this.priorityNode_;return new i(s,a,o)}}updateChild(e,n){let r=rt(e);if(r===null)return n;{he(rt(e)!==".priority"||Ql(e)===1,".priority must be the last token in a path");let s=this.getImmediateChild(r).updateChild(Wt(e),n);return this.updateImmediateChild(r,s)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;let n={},r=0,s=0,o=!0;if(this.forEachChild(Zt,(a,l)=>{n[a]=l.val(e),r++,o&&i.INTEGER_REGEXP_.test(a)?s=Math.max(s,Number(a)):o=!1}),!e&&o&&s<2*r){let a=[];for(let l in n)a[l]=n[l];return a}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+RH(this.getPriority().val())+":"),this.forEachChild(Zt,(n,r)=>{let s=r.hash();s!==""&&(e+=":"+n+":"+s)}),this.lazyHash_=e===""?"":xH(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){let s=this.resolveIndex_(r);if(s){let o=s.getPredecessorKey(new ct(e,n));return o?o.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){let n=this.resolveIndex_(e);if(n){let r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){let n=this.getFirstChildName(e);return n?new ct(n,this.children_.get(n)):null}getLastChildName(e){let n=this.resolveIndex_(e);if(n){let r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){let n=this.getLastChildName(e);return n?new ct(n,this.children_.get(n)):null}forEachChild(e,n){let r=this.resolveIndex_(e);return r?r.inorderTraversal(s=>n(s.name,s.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){let r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,s=>s);{let s=this.children_.getIteratorFrom(e.name,ct.Wrap),o=s.peek();for(;o!=null&&n.compare(o,e)<0;)s.getNext(),o=s.peek();return s}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){let r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,s=>s);{let s=this.children_.getReverseIteratorFrom(e.name,ct.Wrap),o=s.peek();for(;o!=null&&n.compare(o,e)>0;)s.getNext(),o=s.peek();return s}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===E_?-1:0}withIndex(e){if(e===Mo||this.indexMap_.hasIndex(e))return this;{let n=this.indexMap_.addIndex(e,this.children_);return new i(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===Mo||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{let n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){let r=this.getIterator(Zt),s=n.getIterator(Zt),o=r.getNext(),a=s.getNext();for(;o&&a;){if(o.name!==a.name||!o.node.equals(a.node))return!1;o=r.getNext(),a=s.getNext()}return o===null&&a===null}else return!1;else return!1}}resolveIndex_(e){return e===Mo?null:this.indexMap_.get(e.toString())}}return i.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,i})(),$O=class extends Qe{constructor(){super(new ds(jP),Qe.EMPTY_NODE,Cm.Default)}compareTo(t){return t===this?0:1}equals(t){return t===this}getPriority(){return this}getImmediateChild(t){return Qe.EMPTY_NODE}isEmpty(){return!1}},E_=new $O;Object.defineProperties(ct,{MIN:{value:new ct(Yl,Qe.EMPTY_NODE)},MAX:{value:new ct(va,E_)}});pw.__EMPTY_NODE=Qe.EMPTY_NODE;wm.__childrenNodeConstructor=Qe;qpe(E_);Gpe(E_);var Kpe=!0;function Si(i,t=null){if(i===null)return Qe.EMPTY_NODE;if(typeof i=="object"&&".priority"in i&&(t=i[".priority"]),he(t===null||typeof t=="string"||typeof t=="number"||typeof t=="object"&&".sv"in t,"Invalid priority type found: "+typeof t),typeof i=="object"&&".value"in i&&i[".value"]!==null&&(i=i[".value"]),typeof i!="object"||".sv"in i){let e=i;return new wm(e,Si(t))}if(!(i instanceof Array)&&Kpe){let e=[],n=!1;if(pn(i,(o,a)=>{if(o.substring(0,1)!=="."){let l=Si(a);l.isEmpty()||(n=n||!l.getPriority().isEmpty(),e.push(new ct(o,l)))}}),e.length===0)return Qe.EMPTY_NODE;let s=gw(e,Hpe,o=>o.name,jP);if(n){let o=gw(e,Zt.getCompare());return new Qe(s,Si(t),new Cm({".priority":o},{".priority":Zt}))}else return new Qe(s,Si(t),Cm.Default)}else{let e=Qe.EMPTY_NODE;return pn(i,(n,r)=>{if(Kr(i,n)&&n.substring(0,1)!=="."){let s=Si(r);(s.isLeafNode()||!s.isEmpty())&&(e=e.updateImmediateChild(n,s))}}),e.updatePriority(Si(t))}}Wpe(Si);var h_=class extends xm{constructor(t){super(),this.indexPath_=t,he(!st(t)&&rt(t)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(t){return t.getChild(this.indexPath_)}isDefinedOn(t){return!t.getChild(this.indexPath_).isEmpty()}compare(t,e){let n=this.extractChild(t.node),r=this.extractChild(e.node),s=n.compareTo(r);return s===0?Yd(t.name,e.name):s}makePost(t,e){let n=Si(t),r=Qe.EMPTY_NODE.updateChild(this.indexPath_,n);return new ct(e,r)}maxPost(){let t=Qe.EMPTY_NODE.updateChild(this.indexPath_,E_);return new ct(va,t)}toString(){return u_(this.indexPath_,0).join("/")}};var KO=class extends xm{compare(t,e){let n=t.node.compareTo(e.node);return n===0?Yd(t.name,e.name):n}isDefinedOn(t){return!0}indexedValueChanged(t,e){return!t.equals(e)}minPost(){return ct.MIN}maxPost(){return ct.MAX}makePost(t,e){let n=Si(t);return new ct(e,n)}toString(){return".value"}},UP=new KO;function BH(i){return{type:"value",snapshotNode:i}}function Sm(i,t){return{type:"child_added",snapshotNode:t,childName:i}}function m_(i,t){return{type:"child_removed",snapshotNode:t,childName:i}}function f_(i,t,e){return{type:"child_changed",snapshotNode:t,childName:i,oldSnap:e}}function Ype(i,t){return{type:"child_moved",snapshotNode:t,childName:i}}var p_=class{constructor(t){this.index_=t}updateChild(t,e,n,r,s,o){he(t.isIndexed(this.index_),"A node must be indexed if only a child is updated");let a=t.getImmediateChild(e);return a.getChild(r).equals(n.getChild(r))&&a.isEmpty()===n.isEmpty()||(o!=null&&(n.isEmpty()?t.hasChild(e)?o.trackChildChange(m_(e,a)):he(t.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):a.isEmpty()?o.trackChildChange(Sm(e,n)):o.trackChildChange(f_(e,n,a))),t.isLeafNode()&&n.isEmpty())?t:t.updateImmediateChild(e,n).withIndex(this.index_)}updateFullNode(t,e,n){return n!=null&&(t.isLeafNode()||t.forEachChild(Zt,(r,s)=>{e.hasChild(r)||n.trackChildChange(m_(r,s))}),e.isLeafNode()||e.forEachChild(Zt,(r,s)=>{if(t.hasChild(r)){let o=t.getImmediateChild(r);o.equals(s)||n.trackChildChange(f_(r,s,o))}else n.trackChildChange(Sm(r,s))})),e.withIndex(this.index_)}updatePriority(t,e){return t.isEmpty()?Qe.EMPTY_NODE:t.updatePriority(e)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}};var _w=class i{constructor(t){this.indexedFilter_=new p_(t.getIndex()),this.index_=t.getIndex(),this.startPost_=i.getStartPost_(t),this.endPost_=i.getEndPost_(t),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(t){let e=this.startIsInclusive_?this.index_.compare(this.getStartPost(),t)<=0:this.index_.compare(this.getStartPost(),t)<0,n=this.endIsInclusive_?this.index_.compare(t,this.getEndPost())<=0:this.index_.compare(t,this.getEndPost())<0;return e&&n}updateChild(t,e,n,r,s,o){return this.matches(new ct(e,n))||(n=Qe.EMPTY_NODE),this.indexedFilter_.updateChild(t,e,n,r,s,o)}updateFullNode(t,e,n){e.isLeafNode()&&(e=Qe.EMPTY_NODE);let r=e.withIndex(this.index_);r=r.updatePriority(Qe.EMPTY_NODE);let s=this;return e.forEachChild(Zt,(o,a)=>{s.matches(new ct(o,a))||(r=r.updateImmediateChild(o,Qe.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(t,r,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(t){if(t.hasStart()){let e=t.getIndexStartName();return t.getIndex().makePost(t.getIndexStartValue(),e)}else return t.getIndex().minPost()}static getEndPost_(t){if(t.hasEnd()){let e=t.getIndexEndName();return t.getIndex().makePost(t.getIndexEndValue(),e)}else return t.getIndex().maxPost()}};var YO=class{constructor(t){this.withinDirectionalStart=e=>this.reverse_?this.withinEndPost(e):this.withinStartPost(e),this.withinDirectionalEnd=e=>this.reverse_?this.withinStartPost(e):this.withinEndPost(e),this.withinStartPost=e=>{let n=this.index_.compare(this.rangedFilter_.getStartPost(),e);return this.startIsInclusive_?n<=0:n<0},this.withinEndPost=e=>{let n=this.index_.compare(e,this.rangedFilter_.getEndPost());return this.endIsInclusive_?n<=0:n<0},this.rangedFilter_=new _w(t),this.index_=t.getIndex(),this.limit_=t.getLimit(),this.reverse_=!t.isViewFromLeft(),this.startIsInclusive_=!t.startAfterSet_,this.endIsInclusive_=!t.endBeforeSet_}updateChild(t,e,n,r,s,o){return this.rangedFilter_.matches(new ct(e,n))||(n=Qe.EMPTY_NODE),t.getImmediateChild(e).equals(n)?t:t.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(t,e,n,r,s,o):this.fullLimitUpdateChild_(t,e,n,s,o)}updateFullNode(t,e,n){let r;if(e.isLeafNode()||e.isEmpty())r=Qe.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<e.numChildren()&&e.isIndexed(this.index_)){r=Qe.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=e.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=e.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){let a=s.getNext();if(this.withinDirectionalStart(a))if(this.withinDirectionalEnd(a))r=r.updateImmediateChild(a.name,a.node),o++;else break;else continue}}else{r=e.withIndex(this.index_),r=r.updatePriority(Qe.EMPTY_NODE);let s;this.reverse_?s=r.getReverseIterator(this.index_):s=r.getIterator(this.index_);let o=0;for(;s.hasNext();){let a=s.getNext();o<this.limit_&&this.withinDirectionalStart(a)&&this.withinDirectionalEnd(a)?o++:r=r.updateImmediateChild(a.name,Qe.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(t,r,n)}updatePriority(t,e){return t}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(t,e,n,r,s){let o;if(this.reverse_){let u=this.index_.getCompare();o=(h,m)=>u(m,h)}else o=this.index_.getCompare();let a=t;he(a.numChildren()===this.limit_,"");let l=new ct(e,n),c=this.reverse_?a.getFirstChild(this.index_):a.getLastChild(this.index_),d=this.rangedFilter_.matches(l);if(a.hasChild(e)){let u=a.getImmediateChild(e),h=r.getChildAfterChild(this.index_,c,this.reverse_);for(;h!=null&&(h.name===e||a.hasChild(h.name));)h=r.getChildAfterChild(this.index_,h,this.reverse_);let m=h==null?1:o(h,l);if(d&&!n.isEmpty()&&m>=0)return s?.trackChildChange(f_(e,n,u)),a.updateImmediateChild(e,n);{s?.trackChildChange(m_(e,u));let b=a.updateImmediateChild(e,Qe.EMPTY_NODE);return h!=null&&this.rangedFilter_.matches(h)?(s?.trackChildChange(Sm(h.name,h.node)),b.updateImmediateChild(h.name,h.node)):b}}else return n.isEmpty()?t:d&&o(c,l)>=0?(s!=null&&(s.trackChildChange(m_(c.name,c.node)),s.trackChildChange(Sm(e,n))),a.updateImmediateChild(e,n).updateImmediateChild(c.name,Qe.EMPTY_NODE)):t}};var g_=class i{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=Zt}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return he(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return he(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Yl}hasEnd(){return this.endSet_}getIndexEndValue(){return he(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return he(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:va}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return he(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===Zt}copy(){let t=new i;return t.limitSet_=this.limitSet_,t.limit_=this.limit_,t.startSet_=this.startSet_,t.startAfterSet_=this.startAfterSet_,t.indexStartValue_=this.indexStartValue_,t.startNameSet_=this.startNameSet_,t.indexStartName_=this.indexStartName_,t.endSet_=this.endSet_,t.endBeforeSet_=this.endBeforeSet_,t.indexEndValue_=this.indexEndValue_,t.endNameSet_=this.endNameSet_,t.indexEndName_=this.indexEndName_,t.index_=this.index_,t.viewFrom_=this.viewFrom_,t}};function Qpe(i){return i.loadsAllData()?new p_(i.getIndex()):i.hasLimit()?new YO(i):new _w(i)}function Xpe(i,t){let e=i.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="l",e}function Zpe(i,t){let e=i.copy();return e.limitSet_=!0,e.limit_=t,e.viewFrom_="r",e}function QO(i,t,e){let n=i.copy();return n.startSet_=!0,t===void 0&&(t=null),n.indexStartValue_=t,e!=null?(n.startNameSet_=!0,n.indexStartName_=e):(n.startNameSet_=!1,n.indexStartName_=""),n}function Jpe(i,t,e){let n;return i.index_===Mo||e?n=QO(i,t,e):n=QO(i,t,va),n.startAfterSet_=!0,n}function XO(i,t,e){let n=i.copy();return n.endSet_=!0,t===void 0&&(t=null),n.indexEndValue_=t,e!==void 0?(n.endNameSet_=!0,n.indexEndName_=e):(n.endNameSet_=!1,n.indexEndName_=""),n}function ege(i,t,e){let n;return i.index_===Mo||e?n=XO(i,t,e):n=XO(i,t,Yl),n.endBeforeSet_=!0,n}function Nw(i,t){let e=i.copy();return e.index_=t,e}function $U(i){let t={};if(i.isDefault())return t;let e;if(i.index_===Zt?e="$priority":i.index_===UP?e="$value":i.index_===Mo?e="$key":(he(i.index_ instanceof h_,"Unrecognized index type!"),e=i.index_.toString()),t.orderBy=Hi(e),i.startSet_){let n=i.startAfterSet_?"startAfter":"startAt";t[n]=Hi(i.indexStartValue_),i.startNameSet_&&(t[n]+=","+Hi(i.indexStartName_))}if(i.endSet_){let n=i.endBeforeSet_?"endBefore":"endAt";t[n]=Hi(i.indexEndValue_),i.endNameSet_&&(t[n]+=","+Hi(i.indexEndName_))}return i.limitSet_&&(i.isViewFromLeft()?t.limitToFirst=i.limit_:t.limitToLast=i.limit_),t}function KU(i){let t={};if(i.startSet_&&(t.sp=i.indexStartValue_,i.startNameSet_&&(t.sn=i.indexStartName_),t.sin=!i.startAfterSet_),i.endSet_&&(t.ep=i.indexEndValue_,i.endNameSet_&&(t.en=i.indexEndName_),t.ein=!i.endBeforeSet_),i.limitSet_){t.l=i.limit_;let e=i.viewFrom_;e===""&&(i.isViewFromLeft()?e="l":e="r"),t.vf=e}return i.index_!==Zt&&(t.i=i.index_.toString()),t}var ZO=class i extends hw{constructor(t,e,n,r){super(),this.repoInfo_=t,this.onDataUpdate_=e,this.authTokenProvider_=n,this.appCheckTokenProvider_=r,this.log_=k_("p:rest:"),this.listens_={}}reportStats(t){throw new Error("Method not implemented.")}static getListenId_(t,e){return e!==void 0?"tag$"+e:(he(t._queryParams.isDefault(),"should have a tag if it's not a default query."),t._path.toString())}listen(t,e,n,r){let s=t._path.toString();this.log_("Listen called for "+s+" "+t._queryIdentifier);let o=i.getListenId_(t,n),a={};this.listens_[o]=a;let l=$U(t._queryParams);this.restRequest_(s+".json",l,(c,d)=>{let u=d;if(c===404&&(u=null,c=null),c===null&&this.onDataUpdate_(s,u,!1,n),Ua(this.listens_,o)===a){let h;c?c===401?h="permission_denied":h="rest_error:"+c:h="ok",r(h,null)}})}unlisten(t,e){let n=i.getListenId_(t,e);delete this.listens_[n]}get(t){let e=$U(t._queryParams),n=t._path.toString(),r=new an;return this.restRequest_(n+".json",e,(s,o)=>{let a=o;s===404&&(a=null,s=null),s===null?(this.onDataUpdate_(n,a,!1,null),r.resolve(a)):r.reject(new Error(a))}),r.promise}refreshAuthToken(t){}restRequest_(t,e={},n){return e.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([r,s])=>{r&&r.accessToken&&(e.auth=r.accessToken),s&&s.token&&(e.ac=s.token);let o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+t+"?ns="+this.repoInfo_.namespace+kL(e);this.log_("Sending REST request for "+o);let a=new XMLHttpRequest;a.onreadystatechange=()=>{if(n&&a.readyState===4){this.log_("REST Response for "+o+" received. status:",a.status,"response:",a.responseText);let l=null;if(a.status>=200&&a.status<300){try{l=d0(a.responseText)}catch{Ln("Failed to parse JSON response for "+o+": "+a.responseText)}n(null,l)}else a.status!==401&&a.status!==404&&Ln("Got unsuccessful REST response for "+o+" Status: "+a.status),n(a.status);n=null}},a.open("GET",o,!0),a.send()})}};var JO=class{constructor(){this.rootNode_=Qe.EMPTY_NODE}getNode(t){return this.rootNode_.getChild(t)}updateSnapshot(t,e){this.rootNode_=this.rootNode_.updateChild(t,e)}};function bw(){return{value:null,children:new Map}}function Mm(i,t,e){if(st(t))i.value=e,i.children.clear();else if(i.value!==null)i.value=i.value.updateChild(t,e);else{let n=rt(t);i.children.has(n)||i.children.set(n,bw());let r=i.children.get(n);t=Wt(t),Mm(r,t,e)}}function eP(i,t){if(st(t))return i.value=null,i.children.clear(),!0;if(i.value!==null){if(i.value.isLeafNode())return!1;{let e=i.value;return i.value=null,e.forEachChild(Zt,(n,r)=>{Mm(i,new Dt(n),r)}),eP(i,t)}}else if(i.children.size>0){let e=rt(t);return t=Wt(t),i.children.has(e)&&eP(i.children.get(e),t)&&i.children.delete(e),i.children.size===0}else return!0}function tP(i,t,e){i.value!==null?e(t,i.value):tge(i,(n,r)=>{let s=new Dt(t.toString()+"/"+n);tP(r,s,e)})}function tge(i,t){i.children.forEach((e,n)=>{t(n,e)})}var iP=class{constructor(t){this.collection_=t,this.last_=null}get(){let t=this.collection_.get(),e=Object.assign({},t);return this.last_&&pn(this.last_,(n,r)=>{e[n]=e[n]-r}),this.last_=t,e}};var YU=10*1e3,ige=30*1e3,nge=5*60*1e3,nP=class{constructor(t,e){this.server_=e,this.statsToReport_={},this.statsListener_=new iP(t);let n=YU+(ige-YU)*Math.random();r_(this.reportStats_.bind(this),Math.floor(n))}reportStats_(){let t=this.statsListener_.get(),e={},n=!1;pn(t,(r,s)=>{s>0&&Kr(this.statsToReport_,r)&&(e[r]=s,n=!0)}),n&&this.server_.reportStats(e),r_(this.reportStats_.bind(this),Math.floor(Math.random()*2*nge))}};var Do=function(i){return i[i.OVERWRITE=0]="OVERWRITE",i[i.MERGE=1]="MERGE",i[i.ACK_USER_WRITE=2]="ACK_USER_WRITE",i[i.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",i}(Do||{});function HP(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function qP(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function WP(i){return{fromUser:!1,fromServer:!0,queryId:i,tagged:!0}}var rP=class i{constructor(t,e,n){this.path=t,this.affectedTree=e,this.revert=n,this.type=Do.ACK_USER_WRITE,this.source=HP()}operationForChild(t){if(st(this.path)){if(this.affectedTree.value!=null)return he(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{let e=this.affectedTree.subtree(new Dt(t));return new i(It(),e,this.revert)}}else return he(rt(this.path)===t,"operationForChild called for unrelated child."),new i(Wt(this.path),this.affectedTree,this.revert)}};var vw=class i{constructor(t,e){this.source=t,this.path=e,this.type=Do.LISTEN_COMPLETE}operationForChild(t){return st(this.path)?new i(this.source,It()):new i(this.source,Wt(this.path))}};var km=class i{constructor(t,e,n){this.source=t,this.path=e,this.snap=n,this.type=Do.OVERWRITE}operationForChild(t){return st(this.path)?new i(this.source,It(),this.snap.getImmediateChild(t)):new i(this.source,Wt(this.path),this.snap)}};var __=class i{constructor(t,e,n){this.source=t,this.path=e,this.children=n,this.type=Do.MERGE}operationForChild(t){if(st(this.path)){let e=this.children.subtree(new Dt(t));return e.isEmpty()?null:e.value?new km(this.source,It(),e.value):new i(this.source,It(),e)}else return he(rt(this.path)===t,"Can't get a merge for a child not on the path of the operation"),new i(this.source,Wt(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}};var Oo=class{constructor(t,e,n){this.node_=t,this.fullyInitialized_=e,this.filtered_=n}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(t){if(st(t))return this.isFullyInitialized()&&!this.filtered_;let e=rt(t);return this.isCompleteForChild(e)}isCompleteForChild(t){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(t)}getNode(){return this.node_}};var sP=class{constructor(t){this.query_=t,this.index_=this.query_._queryParams.getIndex()}};function rge(i,t,e,n){let r=[],s=[];return t.forEach(o=>{o.type==="child_changed"&&i.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(Ype(o.childName,o.snapshotNode))}),n_(i,r,"child_removed",t,n,e),n_(i,r,"child_added",t,n,e),n_(i,r,"child_moved",s,n,e),n_(i,r,"child_changed",t,n,e),n_(i,r,"value",t,n,e),r}function n_(i,t,e,n,r,s){let o=n.filter(a=>a.type===e);o.sort((a,l)=>oge(i,a,l)),o.forEach(a=>{let l=sge(i,a,s);r.forEach(c=>{c.respondsTo(a.type)&&t.push(c.createEvent(l,i.query_))})})}function sge(i,t,e){return t.type==="value"||t.type==="child_removed"||(t.prevName=e.getPredecessorChildName(t.childName,t.snapshotNode,i.index_)),t}function oge(i,t,e){if(t.childName==null||e.childName==null)throw Au("Should only compare child_ events.");let n=new ct(t.childName,t.snapshotNode),r=new ct(e.childName,e.snapshotNode);return i.index_.compare(n,r)}function Lw(i,t){return{eventCache:i,serverCache:t}}function o_(i,t,e,n){return Lw(new Oo(t,e,n),i.serverCache)}function VH(i,t,e,n){return Lw(i.eventCache,new Oo(t,e,n))}function yw(i){return i.eventCache.isFullyInitialized()?i.eventCache.getNode():null}function Kd(i){return i.serverCache.isFullyInitialized()?i.serverCache.getNode():null}var TO,age=()=>(TO||(TO=new ds(rpe)),TO),Jn=class i{constructor(t,e=age()){this.value=t,this.children=e}static fromObject(t){let e=new i(null);return pn(t,(n,r)=>{e=e.set(new Dt(n),r)}),e}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(t,e){if(this.value!=null&&e(this.value))return{path:It(),value:this.value};if(st(t))return null;{let n=rt(t),r=this.children.get(n);if(r!==null){let s=r.findRootMostMatchingPathAndValue(Wt(t),e);return s!=null?{path:mi(new Dt(n),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(t){return this.findRootMostMatchingPathAndValue(t,()=>!0)}subtree(t){if(st(t))return this;{let e=rt(t),n=this.children.get(e);return n!==null?n.subtree(Wt(t)):new i(null)}}set(t,e){if(st(t))return new i(e,this.children);{let n=rt(t),s=(this.children.get(n)||new i(null)).set(Wt(t),e),o=this.children.insert(n,s);return new i(this.value,o)}}remove(t){if(st(t))return this.children.isEmpty()?new i(null):new i(null,this.children);{let e=rt(t),n=this.children.get(e);if(n){let r=n.remove(Wt(t)),s;return r.isEmpty()?s=this.children.remove(e):s=this.children.insert(e,r),this.value===null&&s.isEmpty()?new i(null):new i(this.value,s)}else return this}}get(t){if(st(t))return this.value;{let e=rt(t),n=this.children.get(e);return n?n.get(Wt(t)):null}}setTree(t,e){if(st(t))return e;{let n=rt(t),s=(this.children.get(n)||new i(null)).setTree(Wt(t),e),o;return s.isEmpty()?o=this.children.remove(n):o=this.children.insert(n,s),new i(this.value,o)}}fold(t){return this.fold_(It(),t)}fold_(t,e){let n={};return this.children.inorderTraversal((r,s)=>{n[r]=s.fold_(mi(t,r),e)}),e(t,this.value,n)}findOnPath(t,e){return this.findOnPath_(t,It(),e)}findOnPath_(t,e,n){let r=this.value?n(e,this.value):!1;if(r)return r;if(st(t))return null;{let s=rt(t),o=this.children.get(s);return o?o.findOnPath_(Wt(t),mi(e,s),n):null}}foreachOnPath(t,e){return this.foreachOnPath_(t,It(),e)}foreachOnPath_(t,e,n){if(st(t))return this;{this.value&&n(e,this.value);let r=rt(t),s=this.children.get(r);return s?s.foreachOnPath_(Wt(t),mi(e,r),n):new i(null)}}foreach(t){this.foreach_(It(),t)}foreach_(t,e){this.children.inorderTraversal((n,r)=>{r.foreach_(mi(t,n),e)}),this.value&&e(t,this.value)}foreachChild(t){this.children.inorderTraversal((e,n)=>{n.value&&t(e,n.value)})}};var Hs=class i{constructor(t){this.writeTree_=t}static empty(){return new i(new Jn(null))}};function a_(i,t,e){if(st(t))return new Hs(new Jn(e));{let n=i.writeTree_.findRootMostValueAndPath(t);if(n!=null){let r=n.path,s=n.value,o=Zn(r,t);return s=s.updateChild(o,e),new Hs(i.writeTree_.set(r,s))}else{let r=new Jn(e),s=i.writeTree_.setTree(t,r);return new Hs(s)}}}function oP(i,t,e){let n=i;return pn(e,(r,s)=>{n=a_(n,mi(t,r),s)}),n}function QU(i,t){if(st(t))return Hs.empty();{let e=i.writeTree_.setTree(t,new Jn(null));return new Hs(e)}}function aP(i,t){return Qd(i,t)!=null}function Qd(i,t){let e=i.writeTree_.findRootMostValueAndPath(t);return e!=null?i.writeTree_.get(e.path).getChild(Zn(e.path,t)):null}function XU(i){let t=[],e=i.writeTree_.value;return e!=null?e.isLeafNode()||e.forEachChild(Zt,(n,r)=>{t.push(new ct(n,r))}):i.writeTree_.children.inorderTraversal((n,r)=>{r.value!=null&&t.push(new ct(n,r.value))}),t}function $l(i,t){if(st(t))return i;{let e=Qd(i,t);return e!=null?new Hs(new Jn(e)):new Hs(i.writeTree_.subtree(t))}}function lP(i){return i.writeTree_.isEmpty()}function Em(i,t){return zH(It(),i.writeTree_,t)}function zH(i,t,e){if(t.value!=null)return e.updateChild(i,t.value);{let n=null;return t.children.inorderTraversal((r,s)=>{r===".priority"?(he(s.value!==null,"Priority writes must always be leaf nodes"),n=s.value):e=zH(mi(i,r),s,e)}),!e.getChild(i).isEmpty()&&n!==null&&(e=e.updateChild(mi(i,".priority"),n)),e}}function Bw(i,t){return qH(t,i)}function lge(i,t,e,n,r){he(n>i.lastWriteId,"Stacking an older write on top of newer ones"),r===void 0&&(r=!0),i.allWrites.push({path:t,snap:e,writeId:n,visible:r}),r&&(i.visibleWrites=a_(i.visibleWrites,t,e)),i.lastWriteId=n}function cge(i,t,e,n){he(n>i.lastWriteId,"Stacking an older merge on top of newer ones"),i.allWrites.push({path:t,children:e,writeId:n,visible:!0}),i.visibleWrites=oP(i.visibleWrites,t,e),i.lastWriteId=n}function dge(i,t){for(let e=0;e<i.allWrites.length;e++){let n=i.allWrites[e];if(n.writeId===t)return n}return null}function uge(i,t){let e=i.allWrites.findIndex(a=>a.writeId===t);he(e>=0,"removeWrite called with nonexistent writeId.");let n=i.allWrites[e];i.allWrites.splice(e,1);let r=n.visible,s=!1,o=i.allWrites.length-1;for(;r&&o>=0;){let a=i.allWrites[o];a.visible&&(o>=e&&hge(a,n.path)?r=!1:cs(n.path,a.path)&&(s=!0)),o--}if(r){if(s)return mge(i),!0;if(n.snap)i.visibleWrites=QU(i.visibleWrites,n.path);else{let a=n.children;pn(a,l=>{i.visibleWrites=QU(i.visibleWrites,mi(n.path,l))})}return!0}else return!1}function hge(i,t){if(i.snap)return cs(i.path,t);for(let e in i.children)if(i.children.hasOwnProperty(e)&&cs(mi(i.path,e),t))return!0;return!1}function mge(i){i.visibleWrites=jH(i.allWrites,fge,It()),i.allWrites.length>0?i.lastWriteId=i.allWrites[i.allWrites.length-1].writeId:i.lastWriteId=-1}function fge(i){return i.visible}function jH(i,t,e){let n=Hs.empty();for(let r=0;r<i.length;++r){let s=i[r];if(t(s)){let o=s.path,a;if(s.snap)cs(e,o)?(a=Zn(e,o),n=a_(n,a,s.snap)):cs(o,e)&&(a=Zn(o,e),n=a_(n,It(),s.snap.getChild(a)));else if(s.children){if(cs(e,o))a=Zn(e,o),n=oP(n,a,s.children);else if(cs(o,e))if(a=Zn(o,e),st(a))n=oP(n,It(),s.children);else{let l=Ua(s.children,rt(a));if(l){let c=l.getChild(Wt(a));n=a_(n,It(),c)}}}else throw Au("WriteRecord should have .snap or .children")}}return n}function UH(i,t,e,n,r){if(!n&&!r){let s=Qd(i.visibleWrites,t);if(s!=null)return s;{let o=$l(i.visibleWrites,t);if(lP(o))return e;if(e==null&&!aP(o,It()))return null;{let a=e||Qe.EMPTY_NODE;return Em(o,a)}}}else{let s=$l(i.visibleWrites,t);if(!r&&lP(s))return e;if(!r&&e==null&&!aP(s,It()))return null;{let o=function(c){return(c.visible||r)&&(!n||!~n.indexOf(c.writeId))&&(cs(c.path,t)||cs(t,c.path))},a=jH(i.allWrites,o,t),l=e||Qe.EMPTY_NODE;return Em(a,l)}}}function pge(i,t,e){let n=Qe.EMPTY_NODE,r=Qd(i.visibleWrites,t);if(r)return r.isLeafNode()||r.forEachChild(Zt,(s,o)=>{n=n.updateImmediateChild(s,o)}),n;if(e){let s=$l(i.visibleWrites,t);return e.forEachChild(Zt,(o,a)=>{let l=Em($l(s,new Dt(o)),a);n=n.updateImmediateChild(o,l)}),XU(s).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}else{let s=$l(i.visibleWrites,t);return XU(s).forEach(o=>{n=n.updateImmediateChild(o.name,o.node)}),n}}function gge(i,t,e,n,r){he(n||r,"Either existingEventSnap or existingServerSnap must exist");let s=mi(t,e);if(aP(i.visibleWrites,s))return null;{let o=$l(i.visibleWrites,s);return lP(o)?r.getChild(e):Em(o,r.getChild(e))}}function _ge(i,t,e,n){let r=mi(t,e),s=Qd(i.visibleWrites,r);if(s!=null)return s;if(n.isCompleteForChild(e)){let o=$l(i.visibleWrites,r);return Em(o,n.getNode().getImmediateChild(e))}else return null}function bge(i,t){return Qd(i.visibleWrites,t)}function vge(i,t,e,n,r,s,o){let a,l=$l(i.visibleWrites,t),c=Qd(l,It());if(c!=null)a=c;else if(e!=null)a=Em(l,e);else return[];if(a=a.withIndex(o),!a.isEmpty()&&!a.isLeafNode()){let d=[],u=o.getCompare(),h=s?a.getReverseIteratorFrom(n,o):a.getIteratorFrom(n,o),m=h.getNext();for(;m&&d.length<r;)u(m,n)!==0&&d.push(m),m=h.getNext();return d}else return[]}function yge(){return{visibleWrites:Hs.empty(),allWrites:[],lastWriteId:-1}}function xw(i,t,e,n){return UH(i.writeTree,i.treePath,t,e,n)}function GP(i,t){return pge(i.writeTree,i.treePath,t)}function ZU(i,t,e,n){return gge(i.writeTree,i.treePath,t,e,n)}function ww(i,t){return bge(i.writeTree,mi(i.treePath,t))}function xge(i,t,e,n,r,s){return vge(i.writeTree,i.treePath,t,e,n,r,s)}function $P(i,t,e){return _ge(i.writeTree,i.treePath,t,e)}function HH(i,t){return qH(mi(i.treePath,t),i.writeTree)}function qH(i,t){return{treePath:i,writeTree:t}}var cP=class{constructor(){this.changeMap=new Map}trackChildChange(t){let e=t.type,n=t.childName;he(e==="child_added"||e==="child_changed"||e==="child_removed","Only child changes supported for tracking"),he(n!==".priority","Only non-priority child changes can be tracked.");let r=this.changeMap.get(n);if(r){let s=r.type;if(e==="child_added"&&s==="child_removed")this.changeMap.set(n,f_(n,t.snapshotNode,r.snapshotNode));else if(e==="child_removed"&&s==="child_added")this.changeMap.delete(n);else if(e==="child_removed"&&s==="child_changed")this.changeMap.set(n,m_(n,r.oldSnap));else if(e==="child_changed"&&s==="child_added")this.changeMap.set(n,Sm(n,t.snapshotNode));else if(e==="child_changed"&&s==="child_changed")this.changeMap.set(n,f_(n,t.snapshotNode,r.oldSnap));else throw Au("Illegal combination of changes: "+t+" occurred after "+r)}else this.changeMap.set(n,t)}getChanges(){return Array.from(this.changeMap.values())}};var dP=class{getCompleteChild(t){return null}getChildAfterChild(t,e,n){return null}},WH=new dP,b_=class{constructor(t,e,n=null){this.writes_=t,this.viewCache_=e,this.optCompleteServerCache_=n}getCompleteChild(t){let e=this.viewCache_.eventCache;if(e.isCompleteForChild(t))return e.getNode().getImmediateChild(t);{let n=this.optCompleteServerCache_!=null?new Oo(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return $P(this.writes_,t,n)}}getChildAfterChild(t,e,n){let r=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Kd(this.viewCache_),s=xge(this.writes_,r,e,1,n,t);return s.length===0?null:s[0]}};function wge(i){return{filter:i}}function Cge(i,t){he(t.eventCache.getNode().isIndexed(i.filter.getIndex()),"Event snap not indexed"),he(t.serverCache.getNode().isIndexed(i.filter.getIndex()),"Server snap not indexed")}function Sge(i,t,e,n,r){let s=new cP,o,a;if(e.type===Do.OVERWRITE){let c=e;c.source.fromUser?o=uP(i,t,c.path,c.snap,n,r,s):(he(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered()&&!st(c.path),o=Cw(i,t,c.path,c.snap,n,r,a,s))}else if(e.type===Do.MERGE){let c=e;c.source.fromUser?o=Ege(i,t,c.path,c.children,n,r,s):(he(c.source.fromServer,"Unknown source."),a=c.source.tagged||t.serverCache.isFiltered(),o=hP(i,t,c.path,c.children,n,r,a,s))}else if(e.type===Do.ACK_USER_WRITE){let c=e;c.revert?o=Dge(i,t,c.path,n,r,s):o=Tge(i,t,c.path,c.affectedTree,n,r,s)}else if(e.type===Do.LISTEN_COMPLETE)o=Ige(i,t,e.path,n,s);else throw Au("Unknown operation type: "+e.type);let l=s.getChanges();return kge(t,o,l),{viewCache:o,changes:l}}function kge(i,t,e){let n=t.eventCache;if(n.isFullyInitialized()){let r=n.getNode().isLeafNode()||n.getNode().isEmpty(),s=yw(i);(e.length>0||!i.eventCache.isFullyInitialized()||r&&!n.getNode().equals(s)||!n.getNode().getPriority().equals(s.getPriority()))&&e.push(BH(yw(t)))}}function GH(i,t,e,n,r,s){let o=t.eventCache;if(ww(n,e)!=null)return t;{let a,l;if(st(e))if(he(t.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),t.serverCache.isFiltered()){let c=Kd(t),d=c instanceof Qe?c:Qe.EMPTY_NODE,u=GP(n,d);a=i.filter.updateFullNode(t.eventCache.getNode(),u,s)}else{let c=xw(n,Kd(t));a=i.filter.updateFullNode(t.eventCache.getNode(),c,s)}else{let c=rt(e);if(c===".priority"){he(Ql(e)===1,"Can't have a priority with additional path components");let d=o.getNode();l=t.serverCache.getNode();let u=ZU(n,e,d,l);u!=null?a=i.filter.updatePriority(d,u):a=o.getNode()}else{let d=Wt(e),u;if(o.isCompleteForChild(c)){l=t.serverCache.getNode();let h=ZU(n,e,o.getNode(),l);h!=null?u=o.getNode().getImmediateChild(c).updateChild(d,h):u=o.getNode().getImmediateChild(c)}else u=$P(n,c,t.serverCache);u!=null?a=i.filter.updateChild(o.getNode(),c,u,d,r,s):a=o.getNode()}}return o_(t,a,o.isFullyInitialized()||st(e),i.filter.filtersNodes())}}function Cw(i,t,e,n,r,s,o,a){let l=t.serverCache,c,d=o?i.filter:i.filter.getIndexedFilter();if(st(e))c=d.updateFullNode(l.getNode(),n,null);else if(d.filtersNodes()&&!l.isFiltered()){let m=l.getNode().updateChild(e,n);c=d.updateFullNode(l.getNode(),m,null)}else{let m=rt(e);if(!l.isCompleteForPath(e)&&Ql(e)>1)return t;let _=Wt(e),v=l.getNode().getImmediateChild(m).updateChild(_,n);m===".priority"?c=d.updatePriority(l.getNode(),v):c=d.updateChild(l.getNode(),m,v,_,WH,null)}let u=VH(t,c,l.isFullyInitialized()||st(e),d.filtersNodes()),h=new b_(r,u,s);return GH(i,u,e,r,h,a)}function uP(i,t,e,n,r,s,o){let a=t.eventCache,l,c,d=new b_(r,t,s);if(st(e))c=i.filter.updateFullNode(t.eventCache.getNode(),n,o),l=o_(t,c,!0,i.filter.filtersNodes());else{let u=rt(e);if(u===".priority")c=i.filter.updatePriority(t.eventCache.getNode(),n),l=o_(t,c,a.isFullyInitialized(),a.isFiltered());else{let h=Wt(e),m=a.getNode().getImmediateChild(u),_;if(st(h))_=n;else{let b=d.getCompleteChild(u);b!=null?BP(h)===".priority"&&b.getChild(OH(h)).isEmpty()?_=b:_=b.updateChild(h,n):_=Qe.EMPTY_NODE}if(m.equals(_))l=t;else{let b=i.filter.updateChild(a.getNode(),u,_,h,d,o);l=o_(t,b,a.isFullyInitialized(),i.filter.filtersNodes())}}}return l}function JU(i,t){return i.eventCache.isCompleteForChild(t)}function Ege(i,t,e,n,r,s,o){let a=t;return n.foreach((l,c)=>{let d=mi(e,l);JU(t,rt(d))&&(a=uP(i,a,d,c,r,s,o))}),n.foreach((l,c)=>{let d=mi(e,l);JU(t,rt(d))||(a=uP(i,a,d,c,r,s,o))}),a}function eH(i,t,e){return e.foreach((n,r)=>{t=t.updateChild(n,r)}),t}function hP(i,t,e,n,r,s,o,a){if(t.serverCache.getNode().isEmpty()&&!t.serverCache.isFullyInitialized())return t;let l=t,c;st(e)?c=n:c=new Jn(null).setTree(e,n);let d=t.serverCache.getNode();return c.children.inorderTraversal((u,h)=>{if(d.hasChild(u)){let m=t.serverCache.getNode().getImmediateChild(u),_=eH(i,m,h);l=Cw(i,l,new Dt(u),_,r,s,o,a)}}),c.children.inorderTraversal((u,h)=>{let m=!t.serverCache.isCompleteForChild(u)&&h.value===null;if(!d.hasChild(u)&&!m){let _=t.serverCache.getNode().getImmediateChild(u),b=eH(i,_,h);l=Cw(i,l,new Dt(u),b,r,s,o,a)}}),l}function Tge(i,t,e,n,r,s,o){if(ww(r,e)!=null)return t;let a=t.serverCache.isFiltered(),l=t.serverCache;if(n.value!=null){if(st(e)&&l.isFullyInitialized()||l.isCompleteForPath(e))return Cw(i,t,e,l.getNode().getChild(e),r,s,a,o);if(st(e)){let c=new Jn(null);return l.getNode().forEachChild(Mo,(d,u)=>{c=c.set(new Dt(d),u)}),hP(i,t,e,c,r,s,a,o)}else return t}else{let c=new Jn(null);return n.foreach((d,u)=>{let h=mi(e,d);l.isCompleteForPath(h)&&(c=c.set(d,l.getNode().getChild(h)))}),hP(i,t,e,c,r,s,a,o)}}function Ige(i,t,e,n,r){let s=t.serverCache,o=VH(t,s.getNode(),s.isFullyInitialized()||st(e),s.isFiltered());return GH(i,o,e,n,WH,r)}function Dge(i,t,e,n,r,s){let o;if(ww(n,e)!=null)return t;{let a=new b_(n,t,r),l=t.eventCache.getNode(),c;if(st(e)||rt(e)===".priority"){let d;if(t.serverCache.isFullyInitialized())d=xw(n,Kd(t));else{let u=t.serverCache.getNode();he(u instanceof Qe,"serverChildren would be complete if leaf node"),d=GP(n,u)}d=d,c=i.filter.updateFullNode(l,d,s)}else{let d=rt(e),u=$P(n,d,t.serverCache);u==null&&t.serverCache.isCompleteForChild(d)&&(u=l.getImmediateChild(d)),u!=null?c=i.filter.updateChild(l,d,u,Wt(e),a,s):t.eventCache.getNode().hasChild(d)?c=i.filter.updateChild(l,d,Qe.EMPTY_NODE,Wt(e),a,s):c=l,c.isEmpty()&&t.serverCache.isFullyInitialized()&&(o=xw(n,Kd(t)),o.isLeafNode()&&(c=i.filter.updateFullNode(c,o,s)))}return o=t.serverCache.isFullyInitialized()||ww(n,It())!=null,o_(t,c,o,i.filter.filtersNodes())}}var mP=class{constructor(t,e){this.query_=t,this.eventRegistrations_=[];let n=this.query_._queryParams,r=new p_(n.getIndex()),s=Qpe(n);this.processor_=wge(s);let o=e.serverCache,a=e.eventCache,l=r.updateFullNode(Qe.EMPTY_NODE,o.getNode(),null),c=s.updateFullNode(Qe.EMPTY_NODE,a.getNode(),null),d=new Oo(l,o.isFullyInitialized(),r.filtersNodes()),u=new Oo(c,a.isFullyInitialized(),s.filtersNodes());this.viewCache_=Lw(u,d),this.eventGenerator_=new sP(this.query_)}get query(){return this.query_}};function Mge(i){return i.viewCache_.serverCache.getNode()}function Age(i){return yw(i.viewCache_)}function Oge(i,t){let e=Kd(i.viewCache_);return e&&(i.query._queryParams.loadsAllData()||!st(t)&&!e.getImmediateChild(rt(t)).isEmpty())?e.getChild(t):null}function tH(i){return i.eventRegistrations_.length===0}function Pge(i,t){i.eventRegistrations_.push(t)}function iH(i,t,e){let n=[];if(e){he(t==null,"A cancel should cancel all event registrations.");let r=i.query._path;i.eventRegistrations_.forEach(s=>{let o=s.createCancelEvent(e,r);o&&n.push(o)})}if(t){let r=[];for(let s=0;s<i.eventRegistrations_.length;++s){let o=i.eventRegistrations_[s];if(!o.matches(t))r.push(o);else if(t.hasAnyCallback()){r=r.concat(i.eventRegistrations_.slice(s+1));break}}i.eventRegistrations_=r}else i.eventRegistrations_=[];return n}function nH(i,t,e,n){t.type===Do.MERGE&&t.source.queryId!==null&&(he(Kd(i.viewCache_),"We should always have a full cache before handling merges"),he(yw(i.viewCache_),"Missing event cache, even though we have a server cache"));let r=i.viewCache_,s=Sge(i.processor_,r,t,e,n);return Cge(i.processor_,s.viewCache),he(s.viewCache.serverCache.isFullyInitialized()||!r.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),i.viewCache_=s.viewCache,$H(i,s.changes,s.viewCache.eventCache.getNode(),null)}function Rge(i,t){let e=i.viewCache_.eventCache,n=[];return e.getNode().isLeafNode()||e.getNode().forEachChild(Zt,(s,o)=>{n.push(Sm(s,o))}),e.isFullyInitialized()&&n.push(BH(e.getNode())),$H(i,n,e.getNode(),t)}function $H(i,t,e,n){let r=n?[n]:i.eventRegistrations_;return rge(i.eventGenerator_,t,e,r)}var Sw,kw=class{constructor(){this.views=new Map}};function Fge(i){he(!Sw,"__referenceConstructor has already been defined"),Sw=i}function Nge(){return he(Sw,"Reference.ts has not been loaded"),Sw}function Lge(i){return i.views.size===0}function KP(i,t,e,n){let r=t.source.queryId;if(r!==null){let s=i.views.get(r);return he(s!=null,"SyncTree gave us an op for an invalid query."),nH(s,t,e,n)}else{let s=[];for(let o of i.views.values())s=s.concat(nH(o,t,e,n));return s}}function KH(i,t,e,n,r){let s=t._queryIdentifier,o=i.views.get(s);if(!o){let a=xw(e,r?n:null),l=!1;a?l=!0:n instanceof Qe?(a=GP(e,n),l=!1):(a=Qe.EMPTY_NODE,l=!1);let c=Lw(new Oo(a,l,!1),new Oo(n,r,!1));return new mP(t,c)}return o}function Bge(i,t,e,n,r,s){let o=KH(i,t,n,r,s);return i.views.has(t._queryIdentifier)||i.views.set(t._queryIdentifier,o),Pge(o,e),Rge(o,e)}function Vge(i,t,e,n){let r=t._queryIdentifier,s=[],o=[],a=Xl(i);if(r==="default")for(let[l,c]of i.views.entries())o=o.concat(iH(c,e,n)),tH(c)&&(i.views.delete(l),c.query._queryParams.loadsAllData()||s.push(c.query));else{let l=i.views.get(r);l&&(o=o.concat(iH(l,e,n)),tH(l)&&(i.views.delete(r),l.query._queryParams.loadsAllData()||s.push(l.query)))}return a&&!Xl(i)&&s.push(new(Nge())(t._repo,t._path)),{removed:s,events:o}}function YH(i){let t=[];for(let e of i.views.values())e.query._queryParams.loadsAllData()||t.push(e);return t}function Kl(i,t){let e=null;for(let n of i.views.values())e=e||Oge(n,t);return e}function QH(i,t){if(t._queryParams.loadsAllData())return Vw(i);{let n=t._queryIdentifier;return i.views.get(n)}}function XH(i,t){return QH(i,t)!=null}function Xl(i){return Vw(i)!=null}function Vw(i){for(let t of i.views.values())if(t.query._queryParams.loadsAllData())return t;return null}var Ew;function zge(i){he(!Ew,"__referenceConstructor has already been defined"),Ew=i}function jge(){return he(Ew,"Reference.ts has not been loaded"),Ew}var Uge=1,Tw=class{constructor(t){this.listenProvider_=t,this.syncPointTree_=new Jn(null),this.pendingWriteTree_=yge(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}};function YP(i,t,e,n,r){return lge(i.pendingWriteTree_,t,e,n,r),r?Am(i,new km(HP(),t,e)):[]}function Hge(i,t,e,n){cge(i.pendingWriteTree_,t,e,n);let r=Jn.fromObject(e);return Am(i,new __(HP(),t,r))}function Gl(i,t,e=!1){let n=dge(i.pendingWriteTree_,t);if(uge(i.pendingWriteTree_,t)){let s=new Jn(null);return n.snap!=null?s=s.set(It(),!0):pn(n.children,o=>{s=s.set(new Dt(o),!0)}),Am(i,new rP(n.path,s,e))}else return[]}function T_(i,t,e){return Am(i,new km(qP(),t,e))}function qge(i,t,e){let n=Jn.fromObject(e);return Am(i,new __(qP(),t,n))}function Wge(i,t){return Am(i,new vw(qP(),t))}function Gge(i,t,e){let n=QP(i,e);if(n){let r=XP(n),s=r.path,o=r.queryId,a=Zn(s,t),l=new vw(WP(o),a);return ZP(i,s,l)}else return[]}function Iw(i,t,e,n,r=!1){let s=t._path,o=i.syncPointTree_.get(s),a=[];if(o&&(t._queryIdentifier==="default"||XH(o,t))){let l=Vge(o,t,e,n);Lge(o)&&(i.syncPointTree_=i.syncPointTree_.remove(s));let c=l.removed;if(a=l.events,!r){let d=c.findIndex(h=>h._queryParams.loadsAllData())!==-1,u=i.syncPointTree_.findOnPath(s,(h,m)=>Xl(m));if(d&&!u){let h=i.syncPointTree_.subtree(s);if(!h.isEmpty()){let m=Yge(h);for(let _=0;_<m.length;++_){let b=m[_],v=b.query,I=tq(i,b);i.listenProvider_.startListening(l_(v),v_(i,v),I.hashFn,I.onComplete)}}}!u&&c.length>0&&!n&&(d?i.listenProvider_.stopListening(l_(t),null):c.forEach(h=>{let m=i.queryToTagMap.get(jw(h));i.listenProvider_.stopListening(l_(h),m)}))}Qge(i,c)}return a}function ZH(i,t,e,n){let r=QP(i,n);if(r!=null){let s=XP(r),o=s.path,a=s.queryId,l=Zn(o,t),c=new km(WP(a),l,e);return ZP(i,o,c)}else return[]}function $ge(i,t,e,n){let r=QP(i,n);if(r){let s=XP(r),o=s.path,a=s.queryId,l=Zn(o,t),c=Jn.fromObject(e),d=new __(WP(a),l,c);return ZP(i,o,d)}else return[]}function fP(i,t,e,n=!1){let r=t._path,s=null,o=!1;i.syncPointTree_.foreachOnPath(r,(h,m)=>{let _=Zn(h,r);s=s||Kl(m,_),o=o||Xl(m)});let a=i.syncPointTree_.get(r);a?(o=o||Xl(a),s=s||Kl(a,It())):(a=new kw,i.syncPointTree_=i.syncPointTree_.set(r,a));let l;s!=null?l=!0:(l=!1,s=Qe.EMPTY_NODE,i.syncPointTree_.subtree(r).foreachChild((m,_)=>{let b=Kl(_,It());b&&(s=s.updateImmediateChild(m,b))}));let c=XH(a,t);if(!c&&!t._queryParams.loadsAllData()){let h=jw(t);he(!i.queryToTagMap.has(h),"View does not exist, but we have a tag");let m=Xge();i.queryToTagMap.set(h,m),i.tagToQueryMap.set(m,h)}let d=Bw(i.pendingWriteTree_,r),u=Bge(a,t,e,d,s,l);if(!c&&!o&&!n){let h=QH(a,t);u=u.concat(Zge(i,t,h))}return u}function zw(i,t,e){let r=i.pendingWriteTree_,s=i.syncPointTree_.findOnPath(t,(o,a)=>{let l=Zn(o,t),c=Kl(a,l);if(c)return c});return UH(r,t,s,e,!0)}function Kge(i,t){let e=t._path,n=null;i.syncPointTree_.foreachOnPath(e,(c,d)=>{let u=Zn(c,e);n=n||Kl(d,u)});let r=i.syncPointTree_.get(e);r?n=n||Kl(r,It()):(r=new kw,i.syncPointTree_=i.syncPointTree_.set(e,r));let s=n!=null,o=s?new Oo(n,!0,!1):null,a=Bw(i.pendingWriteTree_,t._path),l=KH(r,t,a,s?o.getNode():Qe.EMPTY_NODE,s);return Age(l)}function Am(i,t){return JH(t,i.syncPointTree_,null,Bw(i.pendingWriteTree_,It()))}function JH(i,t,e,n){if(st(i.path))return eq(i,t,e,n);{let r=t.get(It());e==null&&r!=null&&(e=Kl(r,It()));let s=[],o=rt(i.path),a=i.operationForChild(o),l=t.children.get(o);if(l&&a){let c=e?e.getImmediateChild(o):null,d=HH(n,o);s=s.concat(JH(a,l,c,d))}return r&&(s=s.concat(KP(r,i,n,e))),s}}function eq(i,t,e,n){let r=t.get(It());e==null&&r!=null&&(e=Kl(r,It()));let s=[];return t.children.inorderTraversal((o,a)=>{let l=e?e.getImmediateChild(o):null,c=HH(n,o),d=i.operationForChild(o);d&&(s=s.concat(eq(d,a,l,c)))}),r&&(s=s.concat(KP(r,i,n,e))),s}function tq(i,t){let e=t.query,n=v_(i,e);return{hashFn:()=>(Mge(t)||Qe.EMPTY_NODE).hash(),onComplete:r=>{if(r==="ok")return n?Gge(i,e._path,n):Wge(i,e._path);{let s=ape(r,e);return Iw(i,e,null,s)}}}}function v_(i,t){let e=jw(t);return i.queryToTagMap.get(e)}function jw(i){return i._path.toString()+"$"+i._queryIdentifier}function QP(i,t){return i.tagToQueryMap.get(t)}function XP(i){let t=i.indexOf("$");return he(t!==-1&&t<i.length-1,"Bad queryKey."),{queryId:i.substr(t+1),path:new Dt(i.substr(0,t))}}function ZP(i,t,e){let n=i.syncPointTree_.get(t);he(n,"Missing sync point for query tag that we're tracking");let r=Bw(i.pendingWriteTree_,t);return KP(n,e,r,null)}function Yge(i){return i.fold((t,e,n)=>{if(e&&Xl(e))return[Vw(e)];{let r=[];return e&&(r=YH(e)),pn(n,(s,o)=>{r=r.concat(o)}),r}})}function l_(i){return i._queryParams.loadsAllData()&&!i._queryParams.isDefault()?new(jge())(i._repo,i._path):i}function Qge(i,t){for(let e=0;e<t.length;++e){let n=t[e];if(!n._queryParams.loadsAllData()){let r=jw(n),s=i.queryToTagMap.get(r);i.queryToTagMap.delete(r),i.tagToQueryMap.delete(s)}}}function Xge(){return Uge++}function Zge(i,t,e){let n=t._path,r=v_(i,t),s=tq(i,e),o=i.listenProvider_.startListening(l_(t),r,s.hashFn,s.onComplete),a=i.syncPointTree_.subtree(n);if(r)he(!Xl(a.value),"If we're adding a query, it shouldn't be shadowed");else{let l=a.fold((c,d,u)=>{if(!st(c)&&d&&Xl(d))return[Vw(d).query];{let h=[];return d&&(h=h.concat(YH(d).map(m=>m.query))),pn(u,(m,_)=>{h=h.concat(_)}),h}});for(let c=0;c<l.length;++c){let d=l[c];i.listenProvider_.stopListening(l_(d),v_(i,d))}}return o}var pP=class i{constructor(t){this.node_=t}getImmediateChild(t){let e=this.node_.getImmediateChild(t);return new i(e)}node(){return this.node_}},gP=class i{constructor(t,e){this.syncTree_=t,this.path_=e}getImmediateChild(t){let e=mi(this.path_,t);return new i(this.syncTree_,e)}node(){return zw(this.syncTree_,this.path_)}},Jge=function(i){return i=i||{},i.timestamp=i.timestamp||new Date().getTime(),i},rH=function(i,t,e){if(!i||typeof i!="object")return i;if(he(".sv"in i,"Unexpected leaf node or priority contents"),typeof i[".sv"]=="string")return e_e(i[".sv"],t,e);if(typeof i[".sv"]=="object")return t_e(i[".sv"],t);he(!1,"Unexpected server value: "+JSON.stringify(i,null,2))},e_e=function(i,t,e){switch(i){case"timestamp":return e.timestamp;default:he(!1,"Unexpected server value: "+i)}},t_e=function(i,t,e){i.hasOwnProperty("increment")||he(!1,"Unexpected server value: "+JSON.stringify(i,null,2));let n=i.increment;typeof n!="number"&&he(!1,"Unexpected increment value: "+n);let r=t.node();if(he(r!==null&&typeof r<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!r.isLeafNode())return n;let o=r.getValue();return typeof o!="number"?n:o+n},iq=function(i,t,e,n){return eR(t,new gP(e,i),n)},JP=function(i,t,e){return eR(i,new pP(t),e)};function eR(i,t,e){let n=i.getPriority().val(),r=rH(n,t.getImmediateChild(".priority"),e),s;if(i.isLeafNode()){let o=i,a=rH(o.getValue(),t,e);return a!==o.getValue()||r!==o.getPriority().val()?new wm(a,Si(r)):i}else{let o=i;return s=o,r!==o.getPriority().val()&&(s=s.updatePriority(new wm(r))),o.forEachChild(Zt,(a,l)=>{let c=eR(l,t.getImmediateChild(a),e);c!==l&&(s=s.updateImmediateChild(a,c))}),s}}var y_=class{constructor(t="",e=null,n={children:{},childCount:0}){this.name=t,this.parent=e,this.node=n}};function Uw(i,t){let e=t instanceof Dt?t:new Dt(t),n=i,r=rt(e);for(;r!==null;){let s=Ua(n.node.children,r)||{children:{},childCount:0};n=new y_(r,n,s),e=Wt(e),r=rt(e)}return n}function Xd(i){return i.node.value}function tR(i,t){i.node.value=t,_P(i)}function nq(i){return i.node.childCount>0}function i_e(i){return Xd(i)===void 0&&!nq(i)}function Hw(i,t){pn(i.node.children,(e,n)=>{t(new y_(e,i,n))})}function rq(i,t,e,n){e&&!n&&t(i),Hw(i,r=>{rq(r,t,!0,n)}),e&&n&&t(i)}function n_e(i,t,e){let n=e?i:i.parent;for(;n!==null;){if(t(n))return!0;n=n.parent}return!1}function I_(i){return new Dt(i.parent===null?i.name:I_(i.parent)+"/"+i.name)}function _P(i){i.parent!==null&&r_e(i.parent,i.name,i)}function r_e(i,t,e){let n=i_e(e),r=Kr(i.node.children,t);n&&r?(delete i.node.children[t],i.node.childCount--,_P(i)):!n&&!r&&(i.node.children[t]=e.node,i.node.childCount++,_P(i))}var s_e=/[\[\].#$\/\u0000-\u001F\u007F]/,o_e=/[\[\].#$\u0000-\u001F\u007F]/,IO=10*1024*1024,qw=function(i){return typeof i=="string"&&i.length!==0&&!s_e.test(i)},sq=function(i){return typeof i=="string"&&i.length!==0&&!o_e.test(i)},a_e=function(i){return i&&(i=i.replace(/^\/*\.info(\/|$)/,"/")),sq(i)},x_=function(i){return i===null||typeof i=="string"||typeof i=="number"&&!Fw(i)||i&&typeof i=="object"&&Kr(i,".sv")},Po=function(i,t,e,n){n&&t===void 0||D_(ar(i,"value"),t,e)},D_=function(i,t,e){let n=e instanceof Dt?new jO(e,i):e;if(t===void 0)throw new Error(i+"contains undefined "+Wd(n));if(typeof t=="function")throw new Error(i+"contains a function "+Wd(n)+" with contents = "+t.toString());if(Fw(t))throw new Error(i+"contains "+t.toString()+" "+Wd(n));if(typeof t=="string"&&t.length>IO/3&&Jf(t)>IO)throw new Error(i+"contains a string greater than "+IO+" utf8 bytes "+Wd(n)+" ('"+t.substring(0,50)+"...')");if(t&&typeof t=="object"){let r=!1,s=!1;if(pn(t,(o,a)=>{if(o===".value")r=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!qw(o)))throw new Error(i+" contains an invalid key ("+o+") "+Wd(n)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);Lpe(n,o),D_(i,a,n),Bpe(n)}),r&&s)throw new Error(i+' contains ".value" child '+Wd(n)+" in addition to actual children.")}},l_e=function(i,t){let e,n;for(e=0;e<t.length;e++){n=t[e];let s=u_(n);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!qw(s[o]))throw new Error(i+"contains an invalid key ("+s[o]+") in path "+n.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}t.sort(Npe);let r=null;for(e=0;e<t.length;e++){if(n=t[e],r!==null&&cs(r,n))throw new Error(i+"contains a path "+r.toString()+" that is ancestor of another path "+n.toString());r=n}},oq=function(i,t,e,n){if(n&&t===void 0)return;let r=ar(i,"values");if(!(t&&typeof t=="object")||Array.isArray(t))throw new Error(r+" must be an object containing the children to replace.");let s=[];pn(t,(o,a)=>{let l=new Dt(o);if(D_(r,a,mi(e,l)),BP(l)===".priority"&&!x_(a))throw new Error(r+"contains an invalid value for '"+l.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(l)}),l_e(r,s)},iR=function(i,t,e){if(!(e&&t===void 0)){if(Fw(t))throw new Error(ar(i,"priority")+"is "+t.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!x_(t))throw new Error(ar(i,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},M_=function(i,t,e,n){if(!(n&&e===void 0)&&!qw(e))throw new Error(ar(i,t)+'was an invalid key = "'+e+`".  Firebase keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]").`)},Om=function(i,t,e,n){if(!(n&&e===void 0)&&!sq(e))throw new Error(ar(i,t)+'was an invalid path = "'+e+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},c_e=function(i,t,e,n){e&&(e=e.replace(/^\/*\.info(\/|$)/,"/")),Om(i,t,e,n)},Fr=function(i,t){if(rt(t)===".info")throw new Error(i+" failed = Can't modify data under /.info/")},aq=function(i,t){let e=t.path.toString();if(typeof t.repoInfo.host!="string"||t.repoInfo.host.length===0||!qw(t.repoInfo.namespace)&&t.repoInfo.host.split(":")[0]!=="localhost"||e.length!==0&&!a_e(e))throw new Error(ar(i,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};var bP=class{constructor(){this.eventLists_=[],this.recursionDepth_=0}};function Ww(i,t){let e=null;for(let n=0;n<t.length;n++){let r=t[n],s=r.getPath();e!==null&&!VP(s,e.path)&&(i.eventLists_.push(e),e=null),e===null&&(e={events:[],path:s}),e.events.push(r)}e&&i.eventLists_.push(e)}function lq(i,t,e){Ww(i,e),cq(i,n=>VP(n,t))}function Nr(i,t,e){Ww(i,e),cq(i,n=>cs(n,t)||cs(t,n))}function cq(i,t){i.recursionDepth_++;let e=!0;for(let n=0;n<i.eventLists_.length;n++){let r=i.eventLists_[n];if(r){let s=r.path;t(s)?(d_e(i.eventLists_[n]),i.eventLists_[n]=null):e=!1}}e&&(i.eventLists_=[]),i.recursionDepth_--}function d_e(i){for(let t=0;t<i.events.length;t++){let e=i.events[t];if(e!==null){i.events[t]=null;let n=e.getEventRunner();$d&&fn("event: "+e.toString()),Dm(n)}}}var dq="repo_interrupt",u_e=25,vP=class{constructor(t,e,n,r){this.repoInfo_=t,this.forceRestClient_=e,this.authTokenProvider_=n,this.appCheckProvider_=r,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new bP,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=bw(),this.transactionQueueTree_=new y_,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}};function h_e(i,t,e){if(i.stats_=FP(i.repoInfo_),i.forceRestClient_||upe())i.server_=new ZO(i.repoInfo_,(n,r,s,o)=>{sH(i,n,r,s,o)},i.authTokenProvider_,i.appCheckProvider_),setTimeout(()=>oH(i,!0),0);else{if(typeof e<"u"&&e!==null){if(typeof e!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{Hi(e)}catch(n){throw new Error("Invalid authOverride provided: "+n)}}i.persistentConnection_=new zP(i.repoInfo_,t,(n,r,s,o)=>{sH(i,n,r,s,o)},n=>{oH(i,n)},n=>{m_e(i,n)},i.authTokenProvider_,i.appCheckProvider_,e),i.server_=i.persistentConnection_}i.authTokenProvider_.addTokenChangeListener(n=>{i.server_.refreshAuthToken(n)}),i.appCheckProvider_.addTokenChangeListener(n=>{i.server_.refreshAppCheckToken(n.token)}),i.statsReporter_=mpe(i.repoInfo_,()=>new nP(i.stats_,i.server_)),i.infoData_=new JO,i.infoSyncTree_=new Tw({startListening:(n,r,s,o)=>{let a=[],l=i.infoData_.getNode(n._path);return l.isEmpty()||(a=T_(i.infoSyncTree_,n._path,l),setTimeout(()=>{o("ok")},0)),a},stopListening:()=>{}}),nR(i,"connected",!1),i.serverSyncTree_=new Tw({startListening:(n,r,s,o)=>(i.server_.listen(n,s,r,(a,l)=>{let c=o(a,l);Nr(i.eventQueue_,n._path,c)}),[]),stopListening:(n,r)=>{i.server_.unlisten(n,r)}})}function uq(i){let e=i.infoData_.getNode(new Dt(".info/serverTimeOffset")).val()||0;return new Date().getTime()+e}function A_(i){return Jge({timestamp:uq(i)})}function sH(i,t,e,n,r){i.dataUpdateCount++;let s=new Dt(t);e=i.interceptServerDataCallback_?i.interceptServerDataCallback_(t,e):e;let o=[];if(r)if(n){let l=Zf(e,c=>Si(c));o=$ge(i.serverSyncTree_,s,l,r)}else{let l=Si(e);o=ZH(i.serverSyncTree_,s,l,r)}else if(n){let l=Zf(e,c=>Si(c));o=qge(i.serverSyncTree_,s,l)}else{let l=Si(e);o=T_(i.serverSyncTree_,s,l)}let a=s;o.length>0&&(a=Tm(i,s)),Nr(i.eventQueue_,a,o)}function oH(i,t){nR(i,"connected",t),t===!1&&g_e(i)}function m_e(i,t){pn(t,(e,n)=>{nR(i,e,n)})}function nR(i,t,e){let n=new Dt("/.info/"+t),r=Si(e);i.infoData_.updateSnapshot(n,r);let s=T_(i.infoSyncTree_,n,r);Nr(i.eventQueue_,n,s)}function Gw(i){return i.nextWriteId_++}function f_e(i,t,e){let n=Kge(i.serverSyncTree_,t);return n!=null?Promise.resolve(n):i.server_.get(t).then(r=>{let s=Si(r).withIndex(t._queryParams.getIndex());fP(i.serverSyncTree_,t,e,!0);let o;if(t._queryParams.loadsAllData())o=T_(i.serverSyncTree_,t._path,s);else{let a=v_(i.serverSyncTree_,t);o=ZH(i.serverSyncTree_,t._path,s,a)}return Nr(i.eventQueue_,t._path,o),Iw(i.serverSyncTree_,t,e,null,!0),s},r=>(Pm(i,"get for query "+Hi(t)+" failed: "+r),Promise.reject(new Error(r))))}function rR(i,t,e,n,r){Pm(i,"set",{path:t.toString(),value:e,priority:n});let s=A_(i),o=Si(e,n),a=zw(i.serverSyncTree_,t),l=JP(o,a,s),c=Gw(i),d=YP(i.serverSyncTree_,t,l,c,!0);Ww(i.eventQueue_,d),i.server_.put(t.toString(),o.val(!0),(h,m)=>{let _=h==="ok";_||Ln("set at "+t+" failed: "+h);let b=Gl(i.serverSyncTree_,c,!_);Nr(i.eventQueue_,t,b),Zl(i,r,h,m)});let u=oR(i,t);Tm(i,u),Nr(i.eventQueue_,u,[])}function p_e(i,t,e,n){Pm(i,"update",{path:t.toString(),value:e});let r=!0,s=A_(i),o={};if(pn(e,(a,l)=>{r=!1,o[a]=iq(mi(t,a),Si(l),i.serverSyncTree_,s)}),r)fn("update() called with empty data.  Don't do anything."),Zl(i,n,"ok",void 0);else{let a=Gw(i),l=Hge(i.serverSyncTree_,t,o,a);Ww(i.eventQueue_,l),i.server_.merge(t.toString(),e,(c,d)=>{let u=c==="ok";u||Ln("update at "+t+" failed: "+c);let h=Gl(i.serverSyncTree_,a,!u),m=h.length>0?Tm(i,t):t;Nr(i.eventQueue_,m,h),Zl(i,n,c,d)}),pn(e,c=>{let d=oR(i,mi(t,c));Tm(i,d)}),Nr(i.eventQueue_,t,[])}}function g_e(i){Pm(i,"onDisconnectEvents");let t=A_(i),e=bw();tP(i.onDisconnect_,It(),(r,s)=>{let o=iq(r,s,i.serverSyncTree_,t);Mm(e,r,o)});let n=[];tP(e,It(),(r,s)=>{n=n.concat(T_(i.serverSyncTree_,r,s));let o=oR(i,r);Tm(i,o)}),i.onDisconnect_=bw(),Nr(i.eventQueue_,It(),n)}function __e(i,t,e){i.server_.onDisconnectCancel(t.toString(),(n,r)=>{n==="ok"&&eP(i.onDisconnect_,t),Zl(i,e,n,r)})}function aH(i,t,e,n){let r=Si(e);i.server_.onDisconnectPut(t.toString(),r.val(!0),(s,o)=>{s==="ok"&&Mm(i.onDisconnect_,t,r),Zl(i,n,s,o)})}function b_e(i,t,e,n,r){let s=Si(e,n);i.server_.onDisconnectPut(t.toString(),s.val(!0),(o,a)=>{o==="ok"&&Mm(i.onDisconnect_,t,s),Zl(i,r,o,a)})}function v_e(i,t,e,n){if(u0(e)){fn("onDisconnect().update() called with empty data.  Don't do anything."),Zl(i,n,"ok",void 0);return}i.server_.onDisconnectMerge(t.toString(),e,(r,s)=>{r==="ok"&&pn(e,(o,a)=>{let l=Si(a);Mm(i.onDisconnect_,mi(t,o),l)}),Zl(i,n,r,s)})}function y_e(i,t,e){let n;rt(t._path)===".info"?n=fP(i.infoSyncTree_,t,e):n=fP(i.serverSyncTree_,t,e),lq(i.eventQueue_,t._path,n)}function yP(i,t,e){let n;rt(t._path)===".info"?n=Iw(i.infoSyncTree_,t,e):n=Iw(i.serverSyncTree_,t,e),lq(i.eventQueue_,t._path,n)}function hq(i){i.persistentConnection_&&i.persistentConnection_.interrupt(dq)}function x_e(i){i.persistentConnection_&&i.persistentConnection_.resume(dq)}function Pm(i,...t){let e="";i.persistentConnection_&&(e=i.persistentConnection_.id+":"),fn(e,...t)}function Zl(i,t,e,n){t&&Dm(()=>{if(e==="ok")t(null);else{let r=(e||"error").toUpperCase(),s=r;n&&(s+=": "+n);let o=new Error(s);o.code=r,t(o)}})}function w_e(i,t,e,n,r,s){Pm(i,"transaction on "+t);let o={path:t,update:e,onComplete:n,status:null,order:yH(),applyLocally:s,retryCount:0,unwatcher:r,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},a=sR(i,t,void 0);o.currentInputSnapshot=a;let l=o.update(a.val());if(l===void 0)o.unwatcher(),o.currentOutputSnapshotRaw=null,o.currentOutputSnapshotResolved=null,o.onComplete&&o.onComplete(null,!1,o.currentInputSnapshot);else{D_("transaction failed: Data returned ",l,o.path),o.status=0;let c=Uw(i.transactionQueueTree_,t),d=Xd(c)||[];d.push(o),tR(c,d);let u;typeof l=="object"&&l!==null&&Kr(l,".priority")?(u=Ua(l,".priority"),he(x_(u),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):u=(zw(i.serverSyncTree_,t)||Qe.EMPTY_NODE).getPriority().val();let h=A_(i),m=Si(l,u),_=JP(m,a,h);o.currentOutputSnapshotRaw=m,o.currentOutputSnapshotResolved=_,o.currentWriteId=Gw(i);let b=YP(i.serverSyncTree_,t,_,o.currentWriteId,o.applyLocally);Nr(i.eventQueue_,t,b),$w(i,i.transactionQueueTree_)}}function sR(i,t,e){return zw(i.serverSyncTree_,t,e)||Qe.EMPTY_NODE}function $w(i,t=i.transactionQueueTree_){if(t||Kw(i,t),Xd(t)){let e=fq(i,t);he(e.length>0,"Sending zero length transaction queue"),e.every(r=>r.status===0)&&C_e(i,I_(t),e)}else nq(t)&&Hw(t,e=>{$w(i,e)})}function C_e(i,t,e){let n=e.map(c=>c.currentWriteId),r=sR(i,t,n),s=r,o=r.hash();for(let c=0;c<e.length;c++){let d=e[c];he(d.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),d.status=1,d.retryCount++;let u=Zn(t,d.path);s=s.updateChild(u,d.currentOutputSnapshotRaw)}let a=s.val(!0),l=t;i.server_.put(l.toString(),a,c=>{Pm(i,"transaction put response",{path:l.toString(),status:c});let d=[];if(c==="ok"){let u=[];for(let h=0;h<e.length;h++)e[h].status=2,d=d.concat(Gl(i.serverSyncTree_,e[h].currentWriteId)),e[h].onComplete&&u.push(()=>e[h].onComplete(null,!0,e[h].currentOutputSnapshotResolved)),e[h].unwatcher();Kw(i,Uw(i.transactionQueueTree_,t)),$w(i,i.transactionQueueTree_),Nr(i.eventQueue_,t,d);for(let h=0;h<u.length;h++)Dm(u[h])}else{if(c==="datastale")for(let u=0;u<e.length;u++)e[u].status===3?e[u].status=4:e[u].status=0;else{Ln("transaction at "+l.toString()+" failed: "+c);for(let u=0;u<e.length;u++)e[u].status=4,e[u].abortReason=c}Tm(i,t)}},o)}function Tm(i,t){let e=mq(i,t),n=I_(e),r=fq(i,e);return S_e(i,r,n),n}function S_e(i,t,e){if(t.length===0)return;let n=[],r=[],o=t.filter(a=>a.status===0).map(a=>a.currentWriteId);for(let a=0;a<t.length;a++){let l=t[a],c=Zn(e,l.path),d=!1,u;if(he(c!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),l.status===4)d=!0,u=l.abortReason,r=r.concat(Gl(i.serverSyncTree_,l.currentWriteId,!0));else if(l.status===0)if(l.retryCount>=u_e)d=!0,u="maxretry",r=r.concat(Gl(i.serverSyncTree_,l.currentWriteId,!0));else{let h=sR(i,l.path,o);l.currentInputSnapshot=h;let m=t[a].update(h.val());if(m!==void 0){D_("transaction failed: Data returned ",m,l.path);let _=Si(m);typeof m=="object"&&m!=null&&Kr(m,".priority")||(_=_.updatePriority(h.getPriority()));let v=l.currentWriteId,I=A_(i),A=JP(_,h,I);l.currentOutputSnapshotRaw=_,l.currentOutputSnapshotResolved=A,l.currentWriteId=Gw(i),o.splice(o.indexOf(v),1),r=r.concat(YP(i.serverSyncTree_,l.path,A,l.currentWriteId,l.applyLocally)),r=r.concat(Gl(i.serverSyncTree_,v,!0))}else d=!0,u="nodata",r=r.concat(Gl(i.serverSyncTree_,l.currentWriteId,!0))}Nr(i.eventQueue_,e,r),r=[],d&&(t[a].status=2,function(h){setTimeout(h,Math.floor(0))}(t[a].unwatcher),t[a].onComplete&&(u==="nodata"?n.push(()=>t[a].onComplete(null,!1,t[a].currentInputSnapshot)):n.push(()=>t[a].onComplete(new Error(u),!1,null))))}Kw(i,i.transactionQueueTree_);for(let a=0;a<n.length;a++)Dm(n[a]);$w(i,i.transactionQueueTree_)}function mq(i,t){let e,n=i.transactionQueueTree_;for(e=rt(t);e!==null&&Xd(n)===void 0;)n=Uw(n,e),t=Wt(t),e=rt(t);return n}function fq(i,t){let e=[];return pq(i,t,e),e.sort((n,r)=>n.order-r.order),e}function pq(i,t,e){let n=Xd(t);if(n)for(let r=0;r<n.length;r++)e.push(n[r]);Hw(t,r=>{pq(i,r,e)})}function Kw(i,t){let e=Xd(t);if(e){let n=0;for(let r=0;r<e.length;r++)e[r].status!==2&&(e[n]=e[r],n++);e.length=n,tR(t,e.length>0?e:void 0)}Hw(t,n=>{Kw(i,n)})}function oR(i,t){let e=I_(mq(i,t)),n=Uw(i.transactionQueueTree_,t);return n_e(n,r=>{DO(i,r)}),DO(i,n),rq(n,r=>{DO(i,r)}),e}function DO(i,t){let e=Xd(t);if(e){let n=[],r=[],s=-1;for(let o=0;o<e.length;o++)e[o].status===3||(e[o].status===1?(he(s===o-1,"All SENT items should be at beginning of queue."),s=o,e[o].status=3,e[o].abortReason="set"):(he(e[o].status===0,"Unexpected transaction status in abort"),e[o].unwatcher(),r=r.concat(Gl(i.serverSyncTree_,e[o].currentWriteId,!0)),e[o].onComplete&&n.push(e[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?tR(t,void 0):e.length=s+1,Nr(i.eventQueue_,I_(t),r);for(let o=0;o<n.length;o++)Dm(n[o])}}function k_e(i){let t="",e=i.split("/");for(let n=0;n<e.length;n++)if(e[n].length>0){let r=e[n];try{r=decodeURIComponent(r.replace(/\+/g," "))}catch{}t+="/"+r}return t}function E_e(i){let t={};i.charAt(0)==="?"&&(i=i.substring(1));for(let e of i.split("&")){if(e.length===0)continue;let n=e.split("=");n.length===2?t[decodeURIComponent(n[0])]=decodeURIComponent(n[1]):Ln(`Invalid query segment '${e}' in query '${i}'`)}return t}var xP=function(i,t){let e=T_e(i),n=e.namespace;e.domain==="firebase.com"&&Ao(e.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!n||n==="undefined")&&e.domain!=="localhost"&&Ao("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),e.secure||ipe();let r=e.scheme==="ws"||e.scheme==="wss";return{repoInfo:new uw(e.host,e.secure,n,r,t,"",n!==e.subdomain),path:new Dt(e.pathString)}},T_e=function(i){let t="",e="",n="",r="",s="",o=!0,a="https",l=443;if(typeof i=="string"){let c=i.indexOf("//");c>=0&&(a=i.substring(0,c-1),i=i.substring(c+2));let d=i.indexOf("/");d===-1&&(d=i.length);let u=i.indexOf("?");u===-1&&(u=i.length),t=i.substring(0,Math.min(d,u)),d<u&&(r=k_e(i.substring(d,u)));let h=E_e(i.substring(Math.min(i.length,u)));c=t.indexOf(":"),c>=0?(o=a==="https"||a==="wss",l=parseInt(t.substring(c+1),10)):c=t.length;let m=t.slice(0,c);if(m.toLowerCase()==="localhost")e="localhost";else if(m.split(".").length<=2)e=m;else{let _=t.indexOf(".");n=t.substring(0,_).toLowerCase(),e=t.substring(_+1),s=n}"ns"in h&&(s=h.ns)}return{host:t,port:l,domain:e,subdomain:n,secure:o,scheme:a,pathString:r,namespace:s}};var lH="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",I_e=function(){let i=0,t=[];return function(e){let n=e===i;i=e;let r,s=new Array(8);for(r=7;r>=0;r--)s[r]=lH.charAt(e%64),e=Math.floor(e/64);he(e===0,"Cannot push at time == 0");let o=s.join("");if(n){for(r=11;r>=0&&t[r]===63;r--)t[r]=0;t[r]++}else for(r=0;r<12;r++)t[r]=Math.floor(Math.random()*64);for(r=0;r<12;r++)o+=lH.charAt(t[r]);return he(o.length===20,"nextPushId: Length should be 20."),o}}();var Dw=class{constructor(t,e,n,r){this.eventType=t,this.eventRegistration=e,this.snapshot=n,this.prevName=r}getPath(){let t=this.snapshot.ref;return this.eventType==="value"?t._path:t.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+Hi(this.snapshot.exportVal())}},Mw=class{constructor(t,e,n){this.eventRegistration=t,this.error=e,this.path=n}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}};var w_=class{constructor(t,e){this.snapshotCallback=t,this.cancelCallback=e}onValue(t,e){this.snapshotCallback.call(null,t,e)}onCancel(t){return he(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,t)}get hasCancelCallback(){return!!this.cancelCallback}matches(t){return this.snapshotCallback===t.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===t.snapshotCallback.userCallback&&this.snapshotCallback.context===t.snapshotCallback.context}};var Aw=class{constructor(t,e){this._repo=t,this._path=e}cancel(){let t=new an;return __e(this._repo,this._path,t.wrapCallback(()=>{})),t.promise}remove(){Fr("OnDisconnect.remove",this._path);let t=new an;return aH(this._repo,this._path,null,t.wrapCallback(()=>{})),t.promise}set(t){Fr("OnDisconnect.set",this._path),Po("OnDisconnect.set",t,this._path,!1);let e=new an;return aH(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}setWithPriority(t,e){Fr("OnDisconnect.setWithPriority",this._path),Po("OnDisconnect.setWithPriority",t,this._path,!1),iR("OnDisconnect.setWithPriority",e,!1);let n=new an;return b_e(this._repo,this._path,t,e,n.wrapCallback(()=>{})),n.promise}update(t){Fr("OnDisconnect.update",this._path),oq("OnDisconnect.update",t,this._path,!1);let e=new an;return v_e(this._repo,this._path,t,e.wrapCallback(()=>{})),e.promise}};var er=class i{constructor(t,e,n,r){this._repo=t,this._path=e,this._queryParams=n,this._orderByCalled=r}get key(){return st(this._path)?null:BP(this._path)}get ref(){return new Lr(this._repo,this._path)}get _queryIdentifier(){let t=KU(this._queryParams),e=RP(t);return e==="{}"?"default":e}get _queryObject(){return KU(this._queryParams)}isEqual(t){if(t=ft(t),!(t instanceof i))return!1;let e=this._repo===t._repo,n=VP(this._path,t._path),r=this._queryIdentifier===t._queryIdentifier;return e&&n&&r}toJSON(){return this.toString()}toString(){return this._repo.toString()+Fpe(this._path)}};function Yw(i,t){if(i._orderByCalled===!0)throw new Error(t+": You can't combine multiple orderBy calls.")}function ec(i){let t=null,e=null;if(i.hasStart()&&(t=i.getIndexStartValue()),i.hasEnd()&&(e=i.getIndexEndValue()),i.getIndex()===Mo){let n="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",r="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(i.hasStart()){if(i.getIndexStartName()!==Yl)throw new Error(n);if(typeof t!="string")throw new Error(r)}if(i.hasEnd()){if(i.getIndexEndName()!==va)throw new Error(n);if(typeof e!="string")throw new Error(r)}}else if(i.getIndex()===Zt){if(t!=null&&!x_(t)||e!=null&&!x_(e))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if(he(i.getIndex()instanceof h_||i.getIndex()===UP,"unknown index type."),t!=null&&typeof t=="object"||e!=null&&typeof e=="object")throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Qw(i){if(i.hasStart()&&i.hasEnd()&&i.hasLimit()&&!i.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}var Lr=class i extends er{constructor(t,e){super(t,e,new g_,!1)}get parent(){let t=OH(this._path);return t===null?null:new i(this._repo,t)}get root(){let t=this;for(;t.parent!==null;)t=t.parent;return t}},Im=class i{constructor(t,e,n){this._node=t,this.ref=e,this._index=n}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(t){let e=new Dt(t),n=Jl(this.ref,t);return new i(this._node.getChild(e),n,Zt)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(t){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(n,r)=>t(new i(r,Jl(this.ref,n),Zt)))}hasChild(t){let e=new Dt(t);return!this._node.getChild(e).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}};function aR(i,t){return i=ft(i),i._checkNotDeleted("ref"),t!==void 0?Jl(i._root,t):i._root}function lR(i,t){i=ft(i),i._checkNotDeleted("refFromURL");let e=xP(t,i._repo.repoInfo_.nodeAdmin);aq("refFromURL",e);let n=e.repoInfo;return!i._repo.repoInfo_.isCustomHost()&&n.host!==i._repo.repoInfo_.host&&Ao("refFromURL: Host name does not match the current database: (found "+n.host+" but expected "+i._repo.repoInfo_.host+")"),aR(i,e.path.toString())}function Jl(i,t){return i=ft(i),rt(i._path)===null?c_e("child","path",t,!1):Om("child","path",t,!1),new Lr(i._repo,mi(i._path,t))}function gq(i,t){i=ft(i),Fr("push",i._path),Po("push",t,i._path,!0);let e=uq(i._repo),n=I_e(e),r=Jl(i,n),s=Jl(i,n),o;return t!=null?o=Xw(s,t).then(()=>s):o=Promise.resolve(s),r.then=o.then.bind(o),r.catch=o.then.bind(o,void 0),r}function _q(i){return Fr("remove",i._path),Xw(i,null)}function Xw(i,t){i=ft(i),Fr("set",i._path),Po("set",t,i._path,!1);let e=new an;return rR(i._repo,i._path,t,null,e.wrapCallback(()=>{})),e.promise}function bq(i,t){i=ft(i),Fr("setPriority",i._path),iR("setPriority",t,!1);let e=new an;return rR(i._repo,mi(i._path,".priority"),t,null,e.wrapCallback(()=>{})),e.promise}function vq(i,t,e){if(Fr("setWithPriority",i._path),Po("setWithPriority",t,i._path,!1),iR("setWithPriority",e,!1),i.key===".length"||i.key===".keys")throw"setWithPriority failed: "+i.key+" is a read-only object.";let n=new an;return rR(i._repo,i._path,t,e,n.wrapCallback(()=>{})),n.promise}function yq(i,t){oq("update",t,i._path,!1);let e=new an;return p_e(i._repo,i._path,t,e.wrapCallback(()=>{})),e.promise}function xq(i){i=ft(i);let t=new w_(()=>{}),e=new C_(t);return f_e(i._repo,i,e).then(n=>new Im(n,new Lr(i._repo,i._path),i._queryParams.getIndex()))}var C_=class i{constructor(t){this.callbackContext=t}respondsTo(t){return t==="value"}createEvent(t,e){let n=e._queryParams.getIndex();return new Dw("value",this,new Im(t.snapshotNode,new Lr(e._repo,e._path),n))}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,null)}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Mw(this,t,e):null}matches(t){return t instanceof i?!t.callbackContext||!this.callbackContext?!0:t.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}},Ow=class i{constructor(t,e){this.eventType=t,this.callbackContext=e}respondsTo(t){let e=t==="children_added"?"child_added":t;return e=e==="children_removed"?"child_removed":e,this.eventType===e}createCancelEvent(t,e){return this.callbackContext.hasCancelCallback?new Mw(this,t,e):null}createEvent(t,e){he(t.childName!=null,"Child events should have a childName.");let n=Jl(new Lr(e._repo,e._path),t.childName),r=e._queryParams.getIndex();return new Dw(t.type,this,new Im(t.snapshotNode,n,r),t.prevName)}getEventRunner(t){return t.getEventType()==="cancel"?()=>this.callbackContext.onCancel(t.error):()=>this.callbackContext.onValue(t.snapshot,t.prevName)}matches(t){return t instanceof i?this.eventType===t.eventType&&(!this.callbackContext||!t.callbackContext||this.callbackContext.matches(t.callbackContext)):!1}hasAnyCallback(){return!!this.callbackContext}};function O_(i,t,e,n,r){let s;if(typeof n=="object"&&(s=void 0,r=n),typeof n=="function"&&(s=n),r&&r.onlyOnce){let l=e,c=(d,u)=>{yP(i._repo,i,a),l(d,u)};c.userCallback=e.userCallback,c.context=e.context,e=c}let o=new w_(e,s||void 0),a=t==="value"?new C_(o):new Ow(t,o);return y_e(i._repo,i,a),()=>yP(i._repo,i,a)}function Zw(i,t,e,n){return O_(i,"value",t,e,n)}function cR(i,t,e,n){return O_(i,"child_added",t,e,n)}function dR(i,t,e,n){return O_(i,"child_changed",t,e,n)}function uR(i,t,e,n){return O_(i,"child_moved",t,e,n)}function hR(i,t,e,n){return O_(i,"child_removed",t,e,n)}function mR(i,t,e){let n=null,r=e?new w_(e):null;t==="value"?n=new C_(r):t&&(n=new Ow(t,r)),yP(i._repo,i,n)}var Br=class{},Pw=class extends Br{constructor(t,e){super(),this._value=t,this._key=e,this.type="endAt"}_apply(t){Po("endAt",this._value,t._path,!0);let e=XO(t._queryParams,this._value,this._key);if(Qw(e),ec(e),t._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new er(t._repo,t._path,e,t._orderByCalled)}};function wq(i,t){return M_("endAt","key",t,!0),new Pw(i,t)}var wP=class extends Br{constructor(t,e){super(),this._value=t,this._key=e,this.type="endBefore"}_apply(t){Po("endBefore",this._value,t._path,!1);let e=ege(t._queryParams,this._value,this._key);if(Qw(e),ec(e),t._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new er(t._repo,t._path,e,t._orderByCalled)}};function Cq(i,t){return M_("endBefore","key",t,!0),new wP(i,t)}var Rw=class extends Br{constructor(t,e){super(),this._value=t,this._key=e,this.type="startAt"}_apply(t){Po("startAt",this._value,t._path,!0);let e=QO(t._queryParams,this._value,this._key);if(Qw(e),ec(e),t._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new er(t._repo,t._path,e,t._orderByCalled)}};function Sq(i=null,t){return M_("startAt","key",t,!0),new Rw(i,t)}var CP=class extends Br{constructor(t,e){super(),this._value=t,this._key=e,this.type="startAfter"}_apply(t){Po("startAfter",this._value,t._path,!1);let e=Jpe(t._queryParams,this._value,this._key);if(Qw(e),ec(e),t._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new er(t._repo,t._path,e,t._orderByCalled)}};function kq(i,t){return M_("startAfter","key",t,!0),new CP(i,t)}var SP=class extends Br{constructor(t){super(),this._limit=t,this.type="limitToFirst"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new er(t._repo,t._path,Xpe(t._queryParams,this._limit),t._orderByCalled)}};function Eq(i){if(typeof i!="number"||Math.floor(i)!==i||i<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new SP(i)}var kP=class extends Br{constructor(t){super(),this._limit=t,this.type="limitToLast"}_apply(t){if(t._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new er(t._repo,t._path,Zpe(t._queryParams,this._limit),t._orderByCalled)}};function Tq(i){if(typeof i!="number"||Math.floor(i)!==i||i<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new kP(i)}var EP=class extends Br{constructor(t){super(),this._path=t,this.type="orderByChild"}_apply(t){Yw(t,"orderByChild");let e=new Dt(this._path);if(st(e))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");let n=new h_(e),r=Nw(t._queryParams,n);return ec(r),new er(t._repo,t._path,r,!0)}};function Iq(i){if(i==="$key")throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if(i==="$priority")throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if(i==="$value")throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Om("orderByChild","path",i,!1),new EP(i)}var TP=class extends Br{constructor(){super(...arguments),this.type="orderByKey"}_apply(t){Yw(t,"orderByKey");let e=Nw(t._queryParams,Mo);return ec(e),new er(t._repo,t._path,e,!0)}};function Dq(){return new TP}var IP=class extends Br{constructor(){super(...arguments),this.type="orderByPriority"}_apply(t){Yw(t,"orderByPriority");let e=Nw(t._queryParams,Zt);return ec(e),new er(t._repo,t._path,e,!0)}};function Mq(){return new IP}var DP=class extends Br{constructor(){super(...arguments),this.type="orderByValue"}_apply(t){Yw(t,"orderByValue");let e=Nw(t._queryParams,UP);return ec(e),new er(t._repo,t._path,e,!0)}};function Aq(){return new DP}var MP=class extends Br{constructor(t,e){super(),this._value=t,this._key=e,this.type="equalTo"}_apply(t){if(Po("equalTo",this._value,t._path,!1),t._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(t._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new Pw(this._value,this._key)._apply(new Rw(this._value,this._key)._apply(t))}};function Oq(i,t){return M_("equalTo","key",t,!0),new MP(i,t)}function us(i,...t){let e=ft(i);for(let n of t)e=n._apply(e);return e}Fge(Lr);zge(Lr);var D_e="FIREBASE_DATABASE_EMULATOR_HOST",AP={},M_e=!1;function A_e(i,t,e,n){i.repoInfo_=new uw(`${t}:${e}`,!1,i.repoInfo_.namespace,i.repoInfo_.webSocketOnly,i.repoInfo_.nodeAdmin,i.repoInfo_.persistenceKey,i.repoInfo_.includeNamespaceInQueryParams,!0),n&&(i.authTokenProvider_=n)}function fR(i,t,e,n,r){let s=n||i.options.databaseURL;s===void 0&&(i.options.projectId||Ao("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),fn("Using default host for project ",i.options.projectId),s=`${i.options.projectId}-default-rtdb.firebaseio.com`);let o=xP(s,r),a=o.repoInfo,l,c;typeof process<"u"&&process.env&&(c=process.env[D_e]),c?(l=!0,s=`http://${c}?ns=${a.namespace}`,o=xP(s,r),a=o.repoInfo):l=!o.repoInfo.secure;let d=r&&l?new s_(s_.OWNER):new LO(i.name,i.options,t);aq("Invalid Firebase Database URL",o),st(o.path)||Ao("Database URL must point to the root of a Firebase Database (not including a child path).");let u=P_e(a,i,d,new NO(i.name,e));return new OP(u,i)}function O_e(i,t){let e=AP[t];(!e||e[i.key]!==i)&&Ao(`Database ${t}(${i.repoInfo_}) has already been deleted.`),hq(i),delete e[i.key]}function P_e(i,t,e,n){let r=AP[t.name];r||(r={},AP[t.name]=r);let s=r[i.toURLString()];return s&&Ao("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new vP(i,M_e,e,n),r[i.toURLString()]=s,s}var OP=class{constructor(t,e){this._repoInternal=t,this.app=e,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(h_e(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Lr(this._repo,It())),this._rootInternal}_delete(){return this._rootInternal!==null&&(O_e(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(t){this._rootInternal===null&&Ao("Cannot call "+t+" on a deleted database.")}};function Pq(){AH.IS_TRANSPORT_INITIALIZED&&Ln("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function Rq(){Pq(),d_.forceDisallow()}function Fq(){Pq(),bm.forceDisallow(),d_.forceAllow()}function Nq(i,t,e,n={}){i=ft(i),i._checkNotDeleted("useEmulator"),i._instanceStarted&&Ao("Cannot call useEmulator() after instance has already been initialized.");let r=i._repoInternal,s;if(r.repoInfo_.nodeAdmin)n.mockUserToken&&Ao('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new s_(s_.OWNER);else if(n.mockUserToken){let o=typeof n.mockUserToken=="string"?n.mockUserToken:l0(n.mockUserToken,i.app.options.projectId);s=new s_(o)}A_e(r,t,e,s)}function Lq(i){i=ft(i),i._checkNotDeleted("goOffline"),hq(i._repo)}function Bq(i){i=ft(i),i._checkNotDeleted("goOnline"),x_e(i._repo)}function Vq(i,t){wH(i,t)}function R_e(i){LP(f0),qc(new Sr("database",(t,{instanceIdentifier:e})=>{let n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),s=t.getProvider("app-check-internal");return fR(n,r,s,e)},"PUBLIC").setMultipleInstances(!0)),ln(PU,RU,i),ln(PU,RU,"esm2017")}var F_e={".sv":"timestamp"};function zq(){return F_e}function jq(i){return{".sv":{increment:i}}}var PP=class{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}};function Uq(i,t,e){var n;if(i=ft(i),Fr("Reference.transaction",i._path),i.key===".length"||i.key===".keys")throw"Reference.transaction failed: "+i.key+" is a read-only object.";let r=(n=e?.applyLocally)!==null&&n!==void 0?n:!0,s=new an,o=(l,c,d)=>{let u=null;l?s.reject(l):(u=new Im(d,new Lr(i._repo,i._path),Zt),s.resolve(new PP(c,u)))},a=Zw(i,()=>{});return w_e(i._repo,i._path,t,o,a,r),s.promise}zP.prototype.simpleListen=function(i,t){this.sendRequest("q",{p:i},t)};zP.prototype.echo=function(i,t){this.sendRequest("echo",{d:i},t)};gpe(cH.default.Client);R_e("node");var N_e="@firebase/database-compat",L_e="1.0.8";var B_e=new Ha("@firebase/database-compat"),Hq=function(i){let t="FIREBASE WARNING: "+i;B_e.warn(t)};var V_e=function(i,t,e,n){if(!(n&&e===void 0)&&typeof e!="boolean")throw new Error(ar(i,t)+"must be a boolean.")},z_e=function(i,t,e){if(!(e&&t===void 0))switch(t){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error(ar(i,"eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}};var pR=class{constructor(t){this._delegate=t}cancel(t){qe("OnDisconnect.cancel",0,1,arguments.length),Zi("OnDisconnect.cancel","onComplete",t,!0);let e=this._delegate.cancel();return t&&e.then(()=>t(null),n=>t(n)),e}remove(t){qe("OnDisconnect.remove",0,1,arguments.length),Zi("OnDisconnect.remove","onComplete",t,!0);let e=this._delegate.remove();return t&&e.then(()=>t(null),n=>t(n)),e}set(t,e){qe("OnDisconnect.set",1,2,arguments.length),Zi("OnDisconnect.set","onComplete",e,!0);let n=this._delegate.set(t);return e&&n.then(()=>e(null),r=>e(r)),n}setWithPriority(t,e,n){qe("OnDisconnect.setWithPriority",2,3,arguments.length),Zi("OnDisconnect.setWithPriority","onComplete",n,!0);let r=this._delegate.setWithPriority(t,e);return n&&r.then(()=>n(null),s=>n(s)),r}update(t,e){if(qe("OnDisconnect.update",1,2,arguments.length),Array.isArray(t)){let r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,Hq("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Zi("OnDisconnect.update","onComplete",e,!0);let n=this._delegate.update(t);return e&&n.then(()=>e(null),r=>e(r)),n}};var gR=class{constructor(t,e){this.committed=t,this.snapshot=e}toJSON(){return qe("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}};var Zd=class i{constructor(t,e){this._database=t,this._delegate=e}val(){return qe("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return qe("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return qe("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return qe("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(t){return qe("DataSnapshot.child",0,1,arguments.length),t=String(t),Om("DataSnapshot.child","path",t,!1),new i(this._database,this._delegate.child(t))}hasChild(t){return qe("DataSnapshot.hasChild",1,1,arguments.length),Om("DataSnapshot.hasChild","path",t,!1),this._delegate.hasChild(t)}getPriority(){return qe("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(t){return qe("DataSnapshot.forEach",1,1,arguments.length),Zi("DataSnapshot.forEach","action",t,!1),this._delegate.forEach(e=>t(new i(this._database,e)))}hasChildren(){return qe("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return qe("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return qe("DataSnapshot.ref",0,0,arguments.length),new ya(this._database,this._delegate.ref)}get ref(){return this.getRef()}},Jw=class i{constructor(t,e){this.database=t,this._delegate=e}on(t,e,n,r){var s;qe("Query.on",2,4,arguments.length),Zi("Query.on","callback",e,!1);let o=i.getCancelAndContextArgs_("Query.on",n,r),a=(c,d)=>{e.call(o.context,new Zd(this.database,c),d)};a.userCallback=e,a.context=o.context;let l=(s=o.cancel)===null||s===void 0?void 0:s.bind(o.context);switch(t){case"value":return Zw(this._delegate,a,l),e;case"child_added":return cR(this._delegate,a,l),e;case"child_removed":return hR(this._delegate,a,l),e;case"child_changed":return dR(this._delegate,a,l),e;case"child_moved":return uR(this._delegate,a,l),e;default:throw new Error(ar("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(t,e,n){if(qe("Query.off",0,3,arguments.length),z_e("Query.off",t,!0),Zi("Query.off","callback",e,!0),bS("Query.off","context",n,!0),e){let r=()=>{};r.userCallback=e,r.context=n,mR(this._delegate,t,r)}else mR(this._delegate,t)}get(){return xq(this._delegate).then(t=>new Zd(this.database,t))}once(t,e,n,r){qe("Query.once",1,4,arguments.length),Zi("Query.once","callback",e,!0);let s=i.getCancelAndContextArgs_("Query.once",n,r),o=new an,a=(c,d)=>{let u=new Zd(this.database,c);e&&e.call(s.context,u,d),o.resolve(u)};a.userCallback=e,a.context=s.context;let l=c=>{s.cancel&&s.cancel.call(s.context,c),o.reject(c)};switch(t){case"value":Zw(this._delegate,a,l,{onlyOnce:!0});break;case"child_added":cR(this._delegate,a,l,{onlyOnce:!0});break;case"child_removed":hR(this._delegate,a,l,{onlyOnce:!0});break;case"child_changed":dR(this._delegate,a,l,{onlyOnce:!0});break;case"child_moved":uR(this._delegate,a,l,{onlyOnce:!0});break;default:throw new Error(ar("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return o.promise}limitToFirst(t){return qe("Query.limitToFirst",1,1,arguments.length),new i(this.database,us(this._delegate,Eq(t)))}limitToLast(t){return qe("Query.limitToLast",1,1,arguments.length),new i(this.database,us(this._delegate,Tq(t)))}orderByChild(t){return qe("Query.orderByChild",1,1,arguments.length),new i(this.database,us(this._delegate,Iq(t)))}orderByKey(){return qe("Query.orderByKey",0,0,arguments.length),new i(this.database,us(this._delegate,Dq()))}orderByPriority(){return qe("Query.orderByPriority",0,0,arguments.length),new i(this.database,us(this._delegate,Mq()))}orderByValue(){return qe("Query.orderByValue",0,0,arguments.length),new i(this.database,us(this._delegate,Aq()))}startAt(t=null,e){return qe("Query.startAt",0,2,arguments.length),new i(this.database,us(this._delegate,Sq(t,e)))}startAfter(t=null,e){return qe("Query.startAfter",0,2,arguments.length),new i(this.database,us(this._delegate,kq(t,e)))}endAt(t=null,e){return qe("Query.endAt",0,2,arguments.length),new i(this.database,us(this._delegate,wq(t,e)))}endBefore(t=null,e){return qe("Query.endBefore",0,2,arguments.length),new i(this.database,us(this._delegate,Cq(t,e)))}equalTo(t,e){return qe("Query.equalTo",1,2,arguments.length),new i(this.database,us(this._delegate,Oq(t,e)))}toString(){return qe("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return qe("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(t){if(qe("Query.isEqual",1,1,arguments.length),!(t instanceof i)){let e="Query.isEqual failed: First argument must be an instance of firebase.database.Query.";throw new Error(e)}return this._delegate.isEqual(t._delegate)}static getCancelAndContextArgs_(t,e,n){let r={cancel:void 0,context:void 0};if(e&&n)r.cancel=e,Zi(t,"cancel",r.cancel,!0),r.context=n,bS(t,"context",r.context,!0);else if(e)if(typeof e=="object"&&e!==null)r.context=e;else if(typeof e=="function")r.cancel=e;else throw new Error(ar(t,"cancelOrContext")+" must either be a cancel callback or a context object.");return r}get ref(){return new ya(this.database,new Lr(this._delegate._repo,this._delegate._path))}},ya=class i extends Jw{constructor(t,e){super(t,new er(e._repo,e._path,new g_,!1)),this.database=t,this._delegate=e}getKey(){return qe("Reference.key",0,0,arguments.length),this._delegate.key}child(t){return qe("Reference.child",1,1,arguments.length),typeof t=="number"&&(t=String(t)),new i(this.database,Jl(this._delegate,t))}getParent(){qe("Reference.parent",0,0,arguments.length);let t=this._delegate.parent;return t?new i(this.database,t):null}getRoot(){return qe("Reference.root",0,0,arguments.length),new i(this.database,this._delegate.root)}set(t,e){qe("Reference.set",1,2,arguments.length),Zi("Reference.set","onComplete",e,!0);let n=Xw(this._delegate,t);return e&&n.then(()=>e(null),r=>e(r)),n}update(t,e){if(qe("Reference.update",1,2,arguments.length),Array.isArray(t)){let r={};for(let s=0;s<t.length;++s)r[""+s]=t[s];t=r,Hq("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Fr("Reference.update",this._delegate._path),Zi("Reference.update","onComplete",e,!0);let n=yq(this._delegate,t);return e&&n.then(()=>e(null),r=>e(r)),n}setWithPriority(t,e,n){qe("Reference.setWithPriority",2,3,arguments.length),Zi("Reference.setWithPriority","onComplete",n,!0);let r=vq(this._delegate,t,e);return n&&r.then(()=>n(null),s=>n(s)),r}remove(t){qe("Reference.remove",0,1,arguments.length),Zi("Reference.remove","onComplete",t,!0);let e=_q(this._delegate);return t&&e.then(()=>t(null),n=>t(n)),e}transaction(t,e,n){qe("Reference.transaction",1,3,arguments.length),Zi("Reference.transaction","transactionUpdate",t,!1),Zi("Reference.transaction","onComplete",e,!0),V_e("Reference.transaction","applyLocally",n,!0);let r=Uq(this._delegate,t,{applyLocally:n}).then(s=>new gR(s.committed,new Zd(this.database,s.snapshot)));return e&&r.then(s=>e(null,s.committed,s.snapshot),s=>e(s,!1,null)),r}setPriority(t,e){qe("Reference.setPriority",1,2,arguments.length),Zi("Reference.setPriority","onComplete",e,!0);let n=bq(this._delegate,t);return e&&n.then(()=>e(null),r=>e(r)),n}push(t,e){qe("Reference.push",0,2,arguments.length),Zi("Reference.push","onComplete",e,!0);let n=gq(this._delegate,t),r=n.then(o=>new i(this.database,o));e&&r.then(()=>e(null),o=>e(o));let s=new i(this.database,n);return s.then=r.then.bind(r),s.catch=r.catch.bind(r,void 0),s}onDisconnect(){return Fr("Reference.onDisconnect",this._delegate._path),new pR(new Aw(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}};var Jd=class{constructor(t,e){this._delegate=t,this.app=e,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:Rq,forceLongPolling:Fq}}useEmulator(t,e,n={}){Nq(this._delegate,t,e,n)}ref(t){if(qe("database.ref",0,1,arguments.length),t instanceof ya){let e=lR(this._delegate,t.toString());return new ya(this,e)}else{let e=aR(this._delegate,t);return new ya(this,e)}}refFromURL(t){qe("database.refFromURL",1,1,arguments.length);let n=lR(this._delegate,t);return new ya(this,n)}goOffline(){return qe("database.goOffline",0,0,arguments.length),Lq(this._delegate)}goOnline(){return qe("database.goOnline",0,0,arguments.length),Bq(this._delegate)}};Jd.ServerValue={TIMESTAMP:zq(),increment:i=>jq(i)};function j_e({app:i,url:t,version:e,customAuthImpl:n,customAppCheckImpl:r,namespace:s,nodeAdmin:o=!1}){LP(e);let a=new vS("database-standalone"),l=new h0("auth-internal",a);l.setComponent(new Sr("auth-internal",()=>n,"PRIVATE"));let c;return r&&(c=new h0("app-check-internal",a),c.setComponent(new Sr("app-check-internal",()=>r,"PRIVATE"))),{instance:new Jd(fR(i,l,c,t,o),i),namespace:s}}var U_e=Object.freeze({__proto__:null,initStandalone:j_e});var H_e=Jd.ServerValue;function q_e(i){i.INTERNAL.registerComponent(new Sr("database-compat",(t,{instanceIdentifier:e})=>{let n=t.getProvider("app-compat").getImmediate(),r=t.getProvider("database").getImmediate({identifier:e});return new Jd(r,n)},"PUBLIC").setServiceProps({Reference:ya,Query:Jw,Database:Jd,DataSnapshot:Zd,enableLogging:Vq,INTERNAL:U_e,ServerValue:H_e}).setMultipleInstances(!0)),i.registerVersion(N_e,L_e,"node")}q_e(Ei);function P_(i,t,e="on",n=Cu){return new vn(r=>{let s=null;return s=i[e](t,(o,a)=>{n.schedule(()=>{r.next({snapshot:o,prevKey:a})}),e==="once"&&n.schedule(()=>r.complete())},o=>{n.schedule(()=>r.error(o))}),e==="on"?{unsubscribe(){s!=null&&i.off(t,s)}}:{unsubscribe(){}}}).pipe(Ue(r=>{let{snapshot:s,prevKey:o}=r,a=null;return s.exists()&&(a=s.key),{type:t,payload:s,prevKey:o,key:a}}),Wb())}function W_e(i){return typeof i=="string"}function G_e(i){return typeof i.exportVal=="function"}function Kq(i){return i==null}function Yq(i){return typeof i.set=="function"}function qq(i,t){return Yq(t)?t:i.ref(t)}function Qq(i,t){if(W_e(i))return t.stringCase();if(Yq(i))return t.firebaseCase();if(G_e(i))return t.snapshotCase();throw new Error(`Expects a string, snapshot, or reference. Got: ${typeof i}`)}function Xq(i){return(Kq(i)||i.length===0)&&(i=["child_added","child_removed","child_changed","child_moved"]),i}function Zq(i,t,e){t=Xq(t);let n=t.map(r=>P_(i,r,"on",e));return _i(...n)}function $_e(i,t,e){let n=Zq(i,t).pipe(zc((r,s)=>[...r,s],[]));return Y_e(i,n,e)}function K_e(i,t){return P_(i,"value","on",t).pipe(Ue(e=>{let n;return e.payload.forEach(r=>(n=r.key,!1)),{data:e,lastKeyToLoad:n}}))}function Y_e(i,t,e){return K_e(i,e).pipe(qN(t),Ue(([r,s])=>{let o=r.lastKeyToLoad,a=s.map(l=>l.key);return{actions:s,lastKeyToLoad:o,loadedKeys:a}}),UN(r=>r.loadedKeys.indexOf(r.lastKeyToLoad)===-1),Ue(r=>r.actions))}function Wq(i,t){return function(n,r){return Qq(n,{stringCase:()=>i.child(n)[t](r),firebaseCase:()=>n[t](r),snapshotCase:()=>n.ref[t](r)})}}function Q_e(i){return function(e){return e?Qq(e,{stringCase:()=>i.child(e).remove(),firebaseCase:()=>e.remove(),snapshotCase:()=>e.ref.remove()}):i.remove()}}function X_e(i,t,e){return P_(i,"value","once",e).pipe(bi(n=>{let r=[We(n)];return t.forEach(s=>r.push(P_(i,s,"on",e))),_i(...r).pipe(zc(J_e,[]))}),Ss())}function Jq(i,t){let e=i.length;for(let n=0;n<e;n++)if(i[n].payload.key===t)return n;return-1}function Z_e(i,t){if(Kq(t))return 0;{let e=Jq(i,t);return e===-1?i.length:e+1}}function J_e(i,t){let{payload:e,prevKey:n,key:r}=t,s=Jq(i,r),o=Z_e(i,n);switch(t.type){case"value":if(t.payload?.exists()){let a=null;t.payload.forEach(l=>{let c={payload:l,type:"value",prevKey:a,key:l.key};return a=l.key,i=[...i,c],!1})}return i;case"child_added":if(s>-1)(i[s-1]?.key||null)!==n&&(i=i.filter(l=>l.payload.key!==e.key),i.splice(o,0,t));else{if(n==null)return[t,...i];i=i.slice(),i.splice(o,0,t)}return i;case"child_removed":return i.filter(a=>a.payload.key!==e.key);case"child_changed":return i.map(a=>a.payload.key===r?t:a);case"child_moved":if(s>-1){let a=i.splice(s,1)[0];return i=i.slice(),i.splice(o,0,a),i}return i;default:return i}}function Gq(i,t,e){return t=Xq(t),X_e(i,t,e)}function ebe(i,t){let e=t.schedulers.outsideAngular,n=t.schedulers.ngZone.run(()=>i.ref);return{query:i,update:Wq(n,"update"),set:Wq(n,"set"),push:r=>n.push(r),remove:Q_e(n),snapshotChanges(r){return Gq(i,r,e).pipe(Fi)},stateChanges(r){return Zq(i,r,e).pipe(Fi)},auditTrail(r){return $_e(i,r,e).pipe(Fi)},valueChanges(r,s){return Gq(i,r,e).pipe(Ue(a=>a.map(l=>s&&s.idField?Tt(ve({},l.payload.val()),{[s.idField]:l.key}):l.payload.val())),Fi)}}}function $q(i,t){return function(){return P_(i,"value","on",t)}}function tbe(i,t){return{query:i,snapshotChanges(){return $q(i,t.schedulers.outsideAngular)().pipe(Fi)},update(e){return i.ref.update(e)},set(e){return i.ref.set(e)},remove(){return i.ref.remove()},valueChanges(){return $q(i,t.schedulers.outsideAngular)().pipe(Fi,Ue(n=>n.payload.exists()?n.payload.val():null))}}}var ibe=new te("angularfire2.realtimeDatabaseURL"),nbe=new te("angularfire2.database.use-emulator"),e9=(()=>{class i{schedulers;database;constructor(e,n,r,s,o,a,l,c,d,u,h,m,_,b,v){this.schedulers=a;let I=l,A=Gc(e,o,n);c&&dp(A,o,d,h,m,_,u,b),this.database=Pu(`${A.name}.database.${r}`,"AngularFireDatabase",A.name,()=>{let F=o.runOutsideAngular(()=>A.database(r||void 0));return I&&F.useEmulator(...I),F},[I])}list(e,n){let r=this.schedulers.ngZone.runOutsideAngular(()=>qq(this.database,e)),s=r;return n&&(s=n(r)),ebe(s,this)}object(e){let n=this.schedulers.ngZone.runOutsideAngular(()=>qq(this.database,e));return tbe(n,this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}static \u0275fac=function(n){return new(n||i)(V(Wa),V(Ga,8),V(ibe,8),V(Gr),V(_e),V(ks),V(nbe,8),V(Yt,8),V(rp,8),V(sp,8),V(op,8),V(ap,8),V(lp,8),V(cp,8),V(Qr,8))};static \u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"any"})}return i})();var tc=(()=>{class i{constructor(e,n,r,s){this.firebaseAuth=e,this.firestore=n,this.realtimeDb=r,this.router=s,this.isLoggedIn=!1,this.userUID=null,this.firebaseAuth.authState.subscribe(o=>{o?(this.userUID=o.uid,this.setupPresence(o.uid)):this.userUID=null})}signin(e,n){return N(this,null,function*(){try{let r=yield this.firebaseAuth.signInWithEmailAndPassword(e,n);this.isLoggedIn=!0,this.userUID=r.user?.uid||null,localStorage.setItem("user",JSON.stringify(r.user)),yield this.setUserOnlineStatus(!0),this.router.navigate(["/sheintable"])}catch(r){throw console.error("Signin error:",r),new Error("Signin failed. Please check your credentials.")}})}setupPresence(e){let n=this.realtimeDb.object(`status/${e}`),r={online:!1,lastChanged:Ei.database.ServerValue.TIMESTAMP},s={online:!0,lastChanged:Ei.database.ServerValue.TIMESTAMP};this.realtimeDb.object(".info/connected").valueChanges().subscribe(a=>{a&&n.query.ref.onDisconnect().set(r).then(()=>{n.update(s)})})}signup(e,n,r,s){return N(this,null,function*(){try{let o=yield this.firebaseAuth.createUserWithEmailAndPassword(e,n);this.isLoggedIn=!0,this.userUID=o.user?.uid||null,localStorage.setItem("user",JSON.stringify(o.user));let a={fullName:r,birthDate:s,data:[]};yield this.saveUserData(a),this.router.navigate(["/sheintable"])}catch(o){throw console.error("Signup error:",o),new Error("Signup failed. Please try again later.")}})}logout(){this.firebaseAuth.signOut().catch(e=>{console.error("Logout error:",e)}),localStorage.removeItem("user"),this.userUID=null,this.setUserOnlineStatus(!1)}getUserUID(){return this.userUID||JSON.parse(localStorage.getItem("user")||"{}")?.uid||null}saveUserData(e){return N(this,null,function*(){let n=this.getUserUID();if(n)try{console.log("Saving data for user:",n,e),yield this.firestore.collection("users").doc(n).set(e),console.log("User data saved successfully!")}catch(r){throw console.error("Error saving user data:",r),new Error("Failed to save user data.")}else throw console.error("User not authenticated"),new Error("User not authenticated")})}getUserData(){return this.firebaseAuth.authState.pipe(bi(e=>e?this.firestore.collection("users").doc(e.uid).valueChanges():We(null)))}addSheinRecord(e){let n=this.getUserUID();if(!n)throw new Error("User not logged in.");return this.firestore.collection(`sheinTables/${n}/records`).add(e).then(()=>console.log("Shein record added")).catch(r=>{throw console.error("Error adding record:",r),r})}getSheinRecords(){let e=this.getUserUID();if(!e)throw new Error("User not logged in.");return this.firestore.collection(`sheinTables/${e}/records`).valueChanges({idField:"id"})}updateSheinRecord(e,n){let r=this.getUserUID();if(!r)throw new Error("User not logged in.");return this.firestore.collection(`sheinTables/${r}/records`).doc(e).update(n)}deleteSheinRecord(e){let n=this.getUserUID();if(!n)throw new Error("User not logged in.");return this.firestore.collection(`sheinTables/${n}/records`).doc(e).delete()}getTotalUserCount(){return this.firestore.collection("users").get().toPromise().then(e=>e?.size||0).catch(e=>(console.error("Failed to fetch user count:",e),0))}setUserOnlineStatus(e){let n=this.getUserUID();n&&this.firestore.collection("users").doc(n).update({online:e,lastSeen:new Date}).catch(r=>console.error("Error updating online status:",r))}getOnlineUserCount(){return this.firestore.collection("users",e=>e.where("online","==",!0)).get().toPromise().then(e=>e?.size||0).catch(e=>(console.error("Failed to fetch online user count:",e),0))}static{this.\u0275fac=function(n){return new(n||i)(V(Yt),V(tn),V(e9),V(on))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var d9=(()=>{class i{constructor(e,n){this._renderer=e,this._elementRef=n,this.onChange=r=>{},this.onTouched=()=>{}}setProperty(e,n){this._renderer.setProperty(this._elementRef.nativeElement,e,n)}registerOnTouched(e){this.onTouched=e}registerOnChange(e){this.onChange=e}setDisabledState(e){this.setProperty("disabled",e)}static{this.\u0275fac=function(n){return new(n||i)(x(Uc),x(fe))}}static{this.\u0275dir=J({type:i})}}return i})(),cC=(()=>{class i extends d9{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,features:[Ve]})}}return i})(),mr=new te("");var sbe={provide:mr,useExisting:Ri(()=>ms),multi:!0};function obe(){let i=uS()?uS().getUserAgent():"";return/android (\d+)/.test(i.toLowerCase())}var abe=new te(""),ms=(()=>{class i extends d9{constructor(e,n,r){super(e,n),this._compositionMode=r,this._composing=!1,this._compositionMode==null&&(this._compositionMode=!obe())}writeValue(e){let n=e??"";this.setProperty("value",n)}_handleInput(e){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(e)}_compositionStart(){this._composing=!0}_compositionEnd(e){this._composing=!1,this._compositionMode&&this.onChange(e)}static{this.\u0275fac=function(n){return new(n||i)(x(Uc),x(fe),x(abe,8))}}static{this.\u0275dir=J({type:i,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(n,r){n&1&&$("input",function(o){return r._handleInput(o.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(o){return r._compositionEnd(o.target.value)})},features:[je([sbe]),Ve]})}}return i})();function ic(i){return i==null||(typeof i=="string"||Array.isArray(i))&&i.length===0}function u9(i){return i!=null&&typeof i.length=="number"}var qs=new te(""),dC=new te(""),lbe=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,Jt=class{static min(t){return cbe(t)}static max(t){return dbe(t)}static required(t){return h9(t)}static requiredTrue(t){return ube(t)}static email(t){return hbe(t)}static minLength(t){return mbe(t)}static maxLength(t){return fbe(t)}static pattern(t){return pbe(t)}static nullValidator(t){return iC(t)}static compose(t){return b9(t)}static composeAsync(t){return v9(t)}};function cbe(i){return t=>{if(ic(t.value)||ic(i))return null;let e=parseFloat(t.value);return!isNaN(e)&&e<i?{min:{min:i,actual:t.value}}:null}}function dbe(i){return t=>{if(ic(t.value)||ic(i))return null;let e=parseFloat(t.value);return!isNaN(e)&&e>i?{max:{max:i,actual:t.value}}:null}}function h9(i){return ic(i.value)?{required:!0}:null}function ube(i){return i.value===!0?null:{required:!0}}function hbe(i){return ic(i.value)||lbe.test(i.value)?null:{email:!0}}function mbe(i){return t=>ic(t.value)||!u9(t.value)?null:t.value.length<i?{minlength:{requiredLength:i,actualLength:t.value.length}}:null}function fbe(i){return t=>u9(t.value)&&t.value.length>i?{maxlength:{requiredLength:i,actualLength:t.value.length}}:null}function pbe(i){if(!i)return iC;let t,e;return typeof i=="string"?(e="",i.charAt(0)!=="^"&&(e+="^"),e+=i,i.charAt(i.length-1)!=="$"&&(e+="$"),t=new RegExp(e)):(e=i.toString(),t=i),n=>{if(ic(n.value))return null;let r=n.value;return t.test(r)?null:{pattern:{requiredPattern:e,actualValue:r}}}}function iC(i){return null}function m9(i){return i!=null}function f9(i){return JN(i)?Wr(i):i}function p9(i){let t={};return i.forEach(e=>{t=e!=null?ve(ve({},t),e):t}),Object.keys(t).length===0?null:t}function g9(i,t){return t.map(e=>e(i))}function gbe(i){return!i.validate}function _9(i){return i.map(t=>gbe(t)?t:e=>t.validate(e))}function b9(i){if(!i)return null;let t=i.filter(m9);return t.length==0?null:function(e){return p9(g9(e,t))}}function yR(i){return i!=null?b9(_9(i)):null}function v9(i){if(!i)return null;let t=i.filter(m9);return t.length==0?null:function(e){let n=g9(e,t).map(f9);return Ba(n).pipe(Ue(p9))}}function xR(i){return i!=null?v9(_9(i)):null}function t9(i,t){return i===null?[t]:Array.isArray(i)?[...i,t]:[i,t]}function y9(i){return i._rawValidators}function x9(i){return i._rawAsyncValidators}function _R(i){return i?Array.isArray(i)?i:[i]:[]}function nC(i,t){return Array.isArray(i)?i.includes(t):i===t}function i9(i,t){let e=_R(t);return _R(i).forEach(r=>{nC(e,r)||e.push(r)}),e}function n9(i,t){return _R(t).filter(e=>!nC(i,e))}var rC=class{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(t){this._rawValidators=t||[],this._composedValidatorFn=yR(this._rawValidators)}_setAsyncValidators(t){this._rawAsyncValidators=t||[],this._composedAsyncValidatorFn=xR(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(t){this._onDestroyCallbacks.push(t)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(t=>t()),this._onDestroyCallbacks=[]}reset(t=void 0){this.control&&this.control.reset(t)}hasError(t,e){return this.control?this.control.hasError(t,e):!1}getError(t,e){return this.control?this.control.getError(t,e):null}},xa=class extends rC{get formDirective(){return null}get path(){return null}},hs=class extends rC{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}},sC=class{constructor(t){this._cd=t}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}},_be={"[class.ng-untouched]":"isUntouched","[class.ng-touched]":"isTouched","[class.ng-pristine]":"isPristine","[class.ng-dirty]":"isDirty","[class.ng-valid]":"isValid","[class.ng-invalid]":"isInvalid","[class.ng-pending]":"isPending"},CLe=Tt(ve({},_be),{"[class.ng-submitted]":"isSubmitted"}),fr=(()=>{class i extends sC{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(x(hs,2))}}static{this.\u0275dir=J({type:i,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(n,r){n&2&&le("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[Ve]})}}return i})(),nc=(()=>{class i extends sC{constructor(e){super(e)}static{this.\u0275fac=function(n){return new(n||i)(x(xa,10))}}static{this.\u0275dir=J({type:i,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(n,r){n&2&&le("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)("ng-submitted",r.isSubmitted)},features:[Ve]})}}return i})();var R_="VALID",tC="INVALID",Rm="PENDING",F_="DISABLED";function wR(i){return(uC(i)?i.validators:i)||null}function bbe(i){return Array.isArray(i)?yR(i):i||null}function CR(i,t){return(uC(t)?t.asyncValidators:i)||null}function vbe(i){return Array.isArray(i)?xR(i):i||null}function uC(i){return i!=null&&!Array.isArray(i)&&typeof i=="object"}function w9(i,t,e){let n=i.controls;if(!(t?Object.keys(n):n).length)throw new Eu(1e3,"");if(!n[e])throw new Eu(1001,"")}function C9(i,t,e){i._forEachChild((n,r)=>{if(e[r]===void 0)throw new Eu(1002,"")})}var Fm=class{constructor(t,e){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(t),this._assignAsyncValidators(e)}get validator(){return this._composedValidatorFn}set validator(t){this._rawValidators=this._composedValidatorFn=t}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(t){this._rawAsyncValidators=this._composedAsyncValidatorFn=t}get parent(){return this._parent}get valid(){return this.status===R_}get invalid(){return this.status===tC}get pending(){return this.status==Rm}get disabled(){return this.status===F_}get enabled(){return this.status!==F_}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(t){this._assignValidators(t)}setAsyncValidators(t){this._assignAsyncValidators(t)}addValidators(t){this.setValidators(i9(t,this._rawValidators))}addAsyncValidators(t){this.setAsyncValidators(i9(t,this._rawAsyncValidators))}removeValidators(t){this.setValidators(n9(t,this._rawValidators))}removeAsyncValidators(t){this.setAsyncValidators(n9(t,this._rawAsyncValidators))}hasValidator(t){return nC(this._rawValidators,t)}hasAsyncValidator(t){return nC(this._rawAsyncValidators,t)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(t={}){this.touched=!0,this._parent&&!t.onlySelf&&this._parent.markAsTouched(t)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(t=>t.markAllAsTouched())}markAsUntouched(t={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(e=>{e.markAsUntouched({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}markAsDirty(t={}){this.pristine=!1,this._parent&&!t.onlySelf&&this._parent.markAsDirty(t)}markAsPristine(t={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(e=>{e.markAsPristine({onlySelf:!0})}),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}markAsPending(t={}){this.status=Rm,t.emitEvent!==!1&&this.statusChanges.emit(this.status),this._parent&&!t.onlySelf&&this._parent.markAsPending(t)}disable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=F_,this.errors=null,this._forEachChild(n=>{n.disable(Tt(ve({},t),{onlySelf:!0}))}),this._updateValue(),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Tt(ve({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!0))}enable(t={}){let e=this._parentMarkedDirty(t.onlySelf);this.status=R_,this._forEachChild(n=>{n.enable(Tt(ve({},t),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent}),this._updateAncestors(Tt(ve({},t),{skipPristineCheck:e})),this._onDisabledChange.forEach(n=>n(!1))}_updateAncestors(t){this._parent&&!t.onlySelf&&(this._parent.updateValueAndValidity(t),t.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(t){this._parent=t}getRawValue(){return this.value}updateValueAndValidity(t={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===R_||this.status===Rm)&&this._runAsyncValidator(t.emitEvent)),t.emitEvent!==!1&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!t.onlySelf&&this._parent.updateValueAndValidity(t)}_updateTreeValidity(t={emitEvent:!0}){this._forEachChild(e=>e._updateTreeValidity(t)),this.updateValueAndValidity({onlySelf:!0,emitEvent:t.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?F_:R_}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(t){if(this.asyncValidator){this.status=Rm,this._hasOwnPendingAsyncValidator=!0;let e=f9(this.asyncValidator(this));this._asyncValidationSubscription=e.subscribe(n=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(n,{emitEvent:t})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(t,e={}){this.errors=t,this._updateControlsErrors(e.emitEvent!==!1)}get(t){let e=t;return e==null||(Array.isArray(e)||(e=e.split(".")),e.length===0)?null:e.reduce((n,r)=>n&&n._find(r),this)}getError(t,e){let n=e?this.get(e):this;return n&&n.errors?n.errors[t]:null}hasError(t,e){return!!this.getError(t,e)}get root(){let t=this;for(;t._parent;)t=t._parent;return t}_updateControlsErrors(t){this.status=this._calculateStatus(),t&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(t)}_initObservables(){this.valueChanges=new ue,this.statusChanges=new ue}_calculateStatus(){return this._allControlsDisabled()?F_:this.errors?tC:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Rm)?Rm:this._anyControlsHaveStatus(tC)?tC:R_}_anyControlsHaveStatus(t){return this._anyControls(e=>e.status===t)}_anyControlsDirty(){return this._anyControls(t=>t.dirty)}_anyControlsTouched(){return this._anyControls(t=>t.touched)}_updatePristine(t={}){this.pristine=!this._anyControlsDirty(),this._parent&&!t.onlySelf&&this._parent._updatePristine(t)}_updateTouched(t={}){this.touched=this._anyControlsTouched(),this._parent&&!t.onlySelf&&this._parent._updateTouched(t)}_registerOnCollectionChange(t){this._onCollectionChange=t}_setUpdateStrategy(t){uC(t)&&t.updateOn!=null&&(this._updateOn=t.updateOn)}_parentMarkedDirty(t){let e=this._parent&&this._parent.dirty;return!t&&!!e&&!this._parent._anyControlsDirty()}_find(t){return null}_assignValidators(t){this._rawValidators=Array.isArray(t)?t.slice():t,this._composedValidatorFn=bbe(this._rawValidators)}_assignAsyncValidators(t){this._rawAsyncValidators=Array.isArray(t)?t.slice():t,this._composedAsyncValidatorFn=vbe(this._rawAsyncValidators)}},Nm=class extends Fm{constructor(t,e,n){super(wR(e),CR(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(t,e){return this.controls[t]?this.controls[t]:(this.controls[t]=e,e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange),e)}addControl(t,e,n={}){this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}removeControl(t,e={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}setControl(t,e,n={}){this.controls[t]&&this.controls[t]._registerOnCollectionChange(()=>{}),delete this.controls[t],e&&this.registerControl(t,e),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}contains(t){return this.controls.hasOwnProperty(t)&&this.controls[t].enabled}setValue(t,e={}){C9(this,!0,t),Object.keys(t).forEach(n=>{w9(this,!0,n),this.controls[n].setValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(Object.keys(t).forEach(n=>{let r=this.controls[n];r&&r.patchValue(t[n],{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t={},e={}){this._forEachChild((n,r)=>{n.reset(t?t[r]:null,{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this._reduceChildren({},(t,e,n)=>(t[n]=e.getRawValue(),t))}_syncPendingControls(){let t=this._reduceChildren(!1,(e,n)=>n._syncPendingControls()?!0:e);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){Object.keys(this.controls).forEach(e=>{let n=this.controls[e];n&&t(n,e)})}_setUpControls(){this._forEachChild(t=>{t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(t){for(let[e,n]of Object.entries(this.controls))if(this.contains(e)&&t(n))return!0;return!1}_reduceValue(){let t={};return this._reduceChildren(t,(e,n,r)=>((n.enabled||this.disabled)&&(e[r]=n.value),e))}_reduceChildren(t,e){let n=t;return this._forEachChild((r,s)=>{n=e(n,r,s)}),n}_allControlsDisabled(){for(let t of Object.keys(this.controls))if(this.controls[t].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(t){return this.controls.hasOwnProperty(t)?this.controls[t]:null}};var bR=class extends Nm{};var B_=new te("CallSetDisabledState",{providedIn:"root",factory:()=>hC}),hC="always";function S9(i,t){return[...t.path,i]}function oC(i,t,e=hC){SR(i,t),t.valueAccessor.writeValue(i.value),(i.disabled||e==="always")&&t.valueAccessor.setDisabledState?.(i.disabled),xbe(i,t),Cbe(i,t),wbe(i,t),ybe(i,t)}function r9(i,t,e=!0){let n=()=>{};t.valueAccessor&&(t.valueAccessor.registerOnChange(n),t.valueAccessor.registerOnTouched(n)),lC(i,t),i&&(t._invokeOnDestroyCallbacks(),i._registerOnCollectionChange(()=>{}))}function aC(i,t){i.forEach(e=>{e.registerOnValidatorChange&&e.registerOnValidatorChange(t)})}function ybe(i,t){if(t.valueAccessor.setDisabledState){let e=n=>{t.valueAccessor.setDisabledState(n)};i.registerOnDisabledChange(e),t._registerOnDestroy(()=>{i._unregisterOnDisabledChange(e)})}}function SR(i,t){let e=y9(i);t.validator!==null?i.setValidators(t9(e,t.validator)):typeof e=="function"&&i.setValidators([e]);let n=x9(i);t.asyncValidator!==null?i.setAsyncValidators(t9(n,t.asyncValidator)):typeof n=="function"&&i.setAsyncValidators([n]);let r=()=>i.updateValueAndValidity();aC(t._rawValidators,r),aC(t._rawAsyncValidators,r)}function lC(i,t){let e=!1;if(i!==null){if(t.validator!==null){let r=y9(i);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==t.validator);s.length!==r.length&&(e=!0,i.setValidators(s))}}if(t.asyncValidator!==null){let r=x9(i);if(Array.isArray(r)&&r.length>0){let s=r.filter(o=>o!==t.asyncValidator);s.length!==r.length&&(e=!0,i.setAsyncValidators(s))}}}let n=()=>{};return aC(t._rawValidators,n),aC(t._rawAsyncValidators,n),e}function xbe(i,t){t.valueAccessor.registerOnChange(e=>{i._pendingValue=e,i._pendingChange=!0,i._pendingDirty=!0,i.updateOn==="change"&&k9(i,t)})}function wbe(i,t){t.valueAccessor.registerOnTouched(()=>{i._pendingTouched=!0,i.updateOn==="blur"&&i._pendingChange&&k9(i,t),i.updateOn!=="submit"&&i.markAsTouched()})}function k9(i,t){i._pendingDirty&&i.markAsDirty(),i.setValue(i._pendingValue,{emitModelToViewChange:!1}),t.viewToModelUpdate(i._pendingValue),i._pendingChange=!1}function Cbe(i,t){let e=(n,r)=>{t.valueAccessor.writeValue(n),r&&t.viewToModelUpdate(n)};i.registerOnChange(e),t._registerOnDestroy(()=>{i._unregisterOnChange(e)})}function E9(i,t){i==null,SR(i,t)}function Sbe(i,t){return lC(i,t)}function T9(i,t){if(!i.hasOwnProperty("model"))return!1;let e=i.model;return e.isFirstChange()?!0:!Object.is(t,e.currentValue)}function kbe(i){return Object.getPrototypeOf(i.constructor)===cC}function I9(i,t){i._syncPendingControls(),t.forEach(e=>{let n=e.control;n.updateOn==="submit"&&n._pendingChange&&(e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1)})}function D9(i,t){if(!t)return null;Array.isArray(t);let e,n,r;return t.forEach(s=>{s.constructor===ms?e=s:kbe(s)?n=s:r=s}),r||n||e||null}function Ebe(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}var Tbe={provide:xa,useExisting:Ri(()=>wa)},N_=Promise.resolve(),wa=(()=>{class i extends xa{constructor(e,n,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._directives=new Set,this.ngSubmit=new ue,this.form=new Nm({},yR(e),xR(n))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(e){N_.then(()=>{let n=this._findContainer(e.path);e.control=n.registerControl(e.name,e.control),oC(e.control,e,this.callSetDisabledState),e.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(e)})}getControl(e){return this.form.get(e.path)}removeControl(e){N_.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name),this._directives.delete(e)})}addFormGroup(e){N_.then(()=>{let n=this._findContainer(e.path),r=new Nm({});E9(r,e),n.registerControl(e.name,r),r.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(e){N_.then(()=>{let n=this._findContainer(e.path);n&&n.removeControl(e.name)})}getFormGroup(e){return this.form.get(e.path)}updateModel(e,n){N_.then(()=>{this.form.get(e.path).setValue(n)})}setValue(e){this.control.setValue(e)}onSubmit(e){return this.submitted=!0,I9(this.form,this._directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.form._updateOn=this.options.updateOn)}_findContainer(e){return e.pop(),e.length?this.form.get(e):this.form}static{this.\u0275fac=function(n){return new(n||i)(x(qs,10),x(dC,10),x(B_,8))}}static{this.\u0275dir=J({type:i,selectors:[["form",3,"ngNoForm","",3,"formGroup",""],["ng-form"],["","ngForm",""]],hostBindings:function(n,r){n&1&&$("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{options:[H.None,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[je([Tbe]),Ve]})}}return i})();function s9(i,t){let e=i.indexOf(t);e>-1&&i.splice(e,1)}function o9(i){return typeof i=="object"&&i!==null&&Object.keys(i).length===2&&"value"in i&&"disabled"in i}var L_=class extends Fm{constructor(t=null,e,n){super(wR(e),CR(n,e)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(t),this._setUpdateStrategy(e),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),uC(e)&&(e.nonNullable||e.initialValueIsDefault)&&(o9(t)?this.defaultValue=t.value:this.defaultValue=t)}setValue(t,e={}){this.value=this._pendingValue=t,this._onChange.length&&e.emitModelToViewChange!==!1&&this._onChange.forEach(n=>n(this.value,e.emitViewToModelChange!==!1)),this.updateValueAndValidity(e)}patchValue(t,e={}){this.setValue(t,e)}reset(t=this.defaultValue,e={}){this._applyFormState(t),this.markAsPristine(e),this.markAsUntouched(e),this.setValue(this.value,e),this._pendingChange=!1}_updateValue(){}_anyControls(t){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(t){this._onChange.push(t)}_unregisterOnChange(t){s9(this._onChange,t)}registerOnDisabledChange(t){this._onDisabledChange.push(t)}_unregisterOnDisabledChange(t){s9(this._onDisabledChange,t)}_forEachChild(t){}_syncPendingControls(){return this.updateOn==="submit"&&(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),this._pendingChange)?(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),!0):!1}_applyFormState(t){o9(t)?(this.value=this._pendingValue=t.value,t.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=t}};var Ibe=i=>i instanceof L_;var Dbe={provide:hs,useExisting:Ri(()=>tr)},a9=Promise.resolve(),tr=(()=>{class i extends hs{constructor(e,n,r,s,o,a){super(),this._changeDetectorRef=o,this.callSetDisabledState=a,this.control=new L_,this._registered=!1,this.name="",this.update=new ue,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=D9(this,s)}ngOnChanges(e){if(this._checkForErrors(),!this._registered||"name"in e){if(this._registered&&(this._checkName(),this.formDirective)){let n=e.name.previousValue;this.formDirective.removeControl({name:n,path:this._getPath(n)})}this._setUpControl()}"isDisabled"in e&&this._updateDisabled(e),T9(e,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&this.options.updateOn!=null&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!!(this.options&&this.options.standalone)}_setUpStandalone(){oC(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),!this._isStandalone()&&this.name}_updateValue(e){a9.then(()=>{this.control.setValue(e,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(e){let n=e.isDisabled.currentValue,r=n!==0&&be(n);a9.then(()=>{r&&!this.control.disabled?this.control.disable():!r&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(e){return this._parent?S9(e,this._parent):[e]}static{this.\u0275fac=function(n){return new(n||i)(x(xa,9),x(qs,10),x(dC,10),x(mr,10),x(mt,8),x(B_,8))}}static{this.\u0275dir=J({type:i,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[H.None,"disabled","isDisabled"],model:[H.None,"ngModel","model"],options:[H.None,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[je([Dbe]),Ve,ht]})}}return i})(),rc=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]})}}return i})(),Mbe={provide:mr,useExisting:Ri(()=>kR),multi:!0},kR=(()=>{class i extends cC{writeValue(e){let n=e??"";this.setProperty("value",n)}registerOnChange(e){this.onChange=n=>{e(n==""?null:parseFloat(n))}}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["input","type","number","formControlName",""],["input","type","number","formControl",""],["input","type","number","ngModel",""]],hostBindings:function(n,r){n&1&&$("input",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},features:[je([Mbe]),Ve]})}}return i})();var M9=new te("");var Abe={provide:xa,useExisting:Ri(()=>Ca)},Ca=(()=>{class i extends xa{constructor(e,n,r){super(),this.callSetDisabledState=r,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new ue,this._setValidators(e),this._setAsyncValidators(n)}ngOnChanges(e){this._checkFormPresent(),e.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(lC(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(e){let n=this.form.get(e.path);return oC(n,e,this.callSetDisabledState),n.updateValueAndValidity({emitEvent:!1}),this.directives.push(e),n}getControl(e){return this.form.get(e.path)}removeControl(e){r9(e.control||null,e,!1),Ebe(this.directives,e)}addFormGroup(e){this._setUpFormContainer(e)}removeFormGroup(e){this._cleanUpFormContainer(e)}getFormGroup(e){return this.form.get(e.path)}addFormArray(e){this._setUpFormContainer(e)}removeFormArray(e){this._cleanUpFormContainer(e)}getFormArray(e){return this.form.get(e.path)}updateModel(e,n){this.form.get(e.path).setValue(n)}onSubmit(e){return this.submitted=!0,I9(this.form,this.directives),this.ngSubmit.emit(e),e?.target?.method==="dialog"}onReset(){this.resetForm()}resetForm(e=void 0){this.form.reset(e),this.submitted=!1}_updateDomValue(){this.directives.forEach(e=>{let n=e.control,r=this.form.get(e.path);n!==r&&(r9(n||null,e),Ibe(r)&&(oC(r,e,this.callSetDisabledState),e.control=r))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(e){let n=this.form.get(e.path);E9(n,e),n.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(e){if(this.form){let n=this.form.get(e.path);n&&Sbe(n,e)&&n.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){SR(this.form,this),this._oldForm&&lC(this._oldForm,this)}_checkFormPresent(){this.form}static{this.\u0275fac=function(n){return new(n||i)(x(qs,10),x(dC,10),x(B_,8))}}static{this.\u0275dir=J({type:i,selectors:[["","formGroup",""]],hostBindings:function(n,r){n&1&&$("submit",function(o){return r.onSubmit(o)})("reset",function(){return r.onReset()})},inputs:{form:[H.None,"formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[je([Abe]),Ve,ht]})}}return i})();var Obe={provide:hs,useExisting:Ri(()=>V_)},V_=(()=>{class i extends hs{set isDisabled(e){}static{this._ngModelWarningSentOnce=!1}constructor(e,n,r,s,o){super(),this._ngModelWarningConfig=o,this._added=!1,this.name=null,this.update=new ue,this._ngModelWarningSent=!1,this._parent=e,this._setValidators(n),this._setAsyncValidators(r),this.valueAccessor=D9(this,s)}ngOnChanges(e){this._added||this._setUpControl(),T9(e,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(e){this.viewModel=e,this.update.emit(e)}get path(){return S9(this.name==null?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this._added=!0}static{this.\u0275fac=function(n){return new(n||i)(x(xa,13),x(qs,10),x(dC,10),x(mr,10),x(M9,8))}}static{this.\u0275dir=J({type:i,selectors:[["","formControlName",""]],inputs:{name:[H.None,"formControlName","name"],isDisabled:[H.None,"disabled","isDisabled"],model:[H.None,"ngModel","model"]},outputs:{update:"ngModelChange"},features:[je([Obe]),Ve,ht]})}}return i})(),Pbe={provide:mr,useExisting:Ri(()=>O9),multi:!0};function A9(i,t){return i==null?`${t}`:(t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function Rbe(i){return i.split(":")[0]}var O9=(()=>{class i extends cC{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let n=this._getOptionId(e),r=A9(n,e);this.setProperty("value",r)}registerOnChange(e){this.onChange=n=>{this.value=this._getOptionValue(n),e(this.value)}}_registerOption(){return(this._idCounter++).toString()}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n),e))return n;return null}_getOptionValue(e){let n=Rbe(e);return this._optionMap.has(n)?this._optionMap.get(n):e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["select","formControlName","",3,"multiple",""],["select","formControl","",3,"multiple",""],["select","ngModel","",3,"multiple",""]],hostBindings:function(n,r){n&1&&$("change",function(o){return r.onChange(o.target.value)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[je([Pbe]),Ve]})}}return i})(),P9=(()=>{class i{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption())}set ngValue(e){this._select!=null&&(this._select._optionMap.set(this.id,e),this._setElementValue(A9(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._setElementValue(e),this._select&&this._select.writeValue(this._select.value)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(Uc),x(O9,9))}}static{this.\u0275dir=J({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})(),Fbe={provide:mr,useExisting:Ri(()=>R9),multi:!0};function l9(i,t){return i==null?`${t}`:(typeof t=="string"&&(t=`'${t}'`),t&&typeof t=="object"&&(t="Object"),`${i}: ${t}`.slice(0,50))}function Nbe(i){return i.split(":")[0]}var R9=(()=>{class i extends cC{constructor(){super(...arguments),this._optionMap=new Map,this._idCounter=0,this._compareWith=Object.is}set compareWith(e){this._compareWith=e}writeValue(e){this.value=e;let n;if(Array.isArray(e)){let r=e.map(s=>this._getOptionId(s));n=(s,o)=>{s._setSelected(r.indexOf(o.toString())>-1)}}else n=(r,s)=>{r._setSelected(!1)};this._optionMap.forEach(n)}registerOnChange(e){this.onChange=n=>{let r=[],s=n.selectedOptions;if(s!==void 0){let o=s;for(let a=0;a<o.length;a++){let l=o[a],c=this._getOptionValue(l.value);r.push(c)}}else{let o=n.options;for(let a=0;a<o.length;a++){let l=o[a];if(l.selected){let c=this._getOptionValue(l.value);r.push(c)}}}this.value=r,e(r)}}_registerOption(e){let n=(this._idCounter++).toString();return this._optionMap.set(n,e),n}_getOptionId(e){for(let n of this._optionMap.keys())if(this._compareWith(this._optionMap.get(n)._value,e))return n;return null}_getOptionValue(e){let n=Nbe(e);return this._optionMap.has(n)?this._optionMap.get(n)._value:e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["select","multiple","","formControlName",""],["select","multiple","","formControl",""],["select","multiple","","ngModel",""]],hostBindings:function(n,r){n&1&&$("change",function(o){return r.onChange(o.target)})("blur",function(){return r.onTouched()})},inputs:{compareWith:"compareWith"},features:[je([Fbe]),Ve]})}}return i})(),F9=(()=>{class i{constructor(e,n,r){this._element=e,this._renderer=n,this._select=r,this._select&&(this.id=this._select._registerOption(this))}set ngValue(e){this._select!=null&&(this._value=e,this._setElementValue(l9(this.id,e)),this._select.writeValue(this._select.value))}set value(e){this._select?(this._value=e,this._setElementValue(l9(this.id,e)),this._select.writeValue(this._select.value)):this._setElementValue(e)}_setElementValue(e){this._renderer.setProperty(this._element.nativeElement,"value",e)}_setSelected(e){this._renderer.setProperty(this._element.nativeElement,"selected",e)}ngOnDestroy(){this._select&&(this._select._optionMap.delete(this.id),this._select.writeValue(this._select.value))}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(Uc),x(R9,9))}}static{this.\u0275dir=J({type:i,selectors:[["option"]],inputs:{ngValue:"ngValue",value:"value"}})}}return i})();var Lbe=(()=>{class i{constructor(){this._validator=iC}ngOnChanges(e){if(this.inputName in e){let n=this.normalizeInput(e[this.inputName].currentValue);this._enabled=this.enabled(n),this._validator=this._enabled?this.createValidator(n):iC,this._onChange&&this._onChange()}}validate(e){return this._validator(e)}registerOnValidatorChange(e){this._onChange=e}enabled(e){return e!=null}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,features:[ht]})}}return i})();var Bbe={provide:qs,useExisting:Ri(()=>eu),multi:!0};var eu=(()=>{class i extends Lbe{constructor(){super(...arguments),this.inputName="required",this.normalizeInput=be,this.createValidator=e=>h9}enabled(e){return e}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(n,r){n&2&&Se("required",r._enabled?"":null)},inputs:{required:"required"},features:[je([Bbe]),Ve]})}}return i})();var N9=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({})}}return i})(),vR=class extends Fm{constructor(t,e,n){super(wR(e),CR(n,e)),this.controls=t,this._initObservables(),this._setUpdateStrategy(e),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(t){return this.controls[this._adjustIndex(t)]}push(t,e={}){this.controls.push(t),this._registerControl(t),this.updateValueAndValidity({emitEvent:e.emitEvent}),this._onCollectionChange()}insert(t,e,n={}){this.controls.splice(t,0,e),this._registerControl(e),this.updateValueAndValidity({emitEvent:n.emitEvent})}removeAt(t,e={}){let n=this._adjustIndex(t);n<0&&(n=0),this.controls[n]&&this.controls[n]._registerOnCollectionChange(()=>{}),this.controls.splice(n,1),this.updateValueAndValidity({emitEvent:e.emitEvent})}setControl(t,e,n={}){let r=this._adjustIndex(t);r<0&&(r=0),this.controls[r]&&this.controls[r]._registerOnCollectionChange(()=>{}),this.controls.splice(r,1),e&&(this.controls.splice(r,0,e),this._registerControl(e)),this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(t,e={}){C9(this,!1,t),t.forEach((n,r)=>{w9(this,!1,r),this.at(r).setValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e)}patchValue(t,e={}){t!=null&&(t.forEach((n,r)=>{this.at(r)&&this.at(r).patchValue(n,{onlySelf:!0,emitEvent:e.emitEvent})}),this.updateValueAndValidity(e))}reset(t=[],e={}){this._forEachChild((n,r)=>{n.reset(t[r],{onlySelf:!0,emitEvent:e.emitEvent})}),this._updatePristine(e),this._updateTouched(e),this.updateValueAndValidity(e)}getRawValue(){return this.controls.map(t=>t.getRawValue())}clear(t={}){this.controls.length<1||(this._forEachChild(e=>e._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:t.emitEvent}))}_adjustIndex(t){return t<0?t+this.length:t}_syncPendingControls(){let t=this.controls.reduce((e,n)=>n._syncPendingControls()?!0:e,!1);return t&&this.updateValueAndValidity({onlySelf:!0}),t}_forEachChild(t){this.controls.forEach((e,n)=>{t(e,n)})}_updateValue(){this.value=this.controls.filter(t=>t.enabled||this.disabled).map(t=>t.value)}_anyControls(t){return this.controls.some(e=>e.enabled&&t(e))}_setUpControls(){this._forEachChild(t=>this._registerControl(t))}_allControlsDisabled(){for(let t of this.controls)if(t.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(t){t.setParent(this),t._registerOnCollectionChange(this._onCollectionChange)}_find(t){return this.at(t)??null}};function c9(i){return!!i&&(i.asyncValidators!==void 0||i.validators!==void 0||i.updateOn!==void 0)}var mC=(()=>{class i{constructor(){this.useNonNullable=!1}get nonNullable(){let e=new i;return e.useNonNullable=!0,e}group(e,n=null){let r=this._reduceControls(e),s={};return c9(n)?s=n:n!==null&&(s.validators=n.validator,s.asyncValidators=n.asyncValidator),new Nm(r,s)}record(e,n=null){let r=this._reduceControls(e);return new bR(r,n)}control(e,n,r){let s={};return this.useNonNullable?(c9(n)?s=n:(s.validators=n,s.asyncValidators=r),new L_(e,Tt(ve({},s),{nonNullable:!0}))):new L_(e,n,r)}array(e,n,r){let s=e.map(o=>this._createControl(o));return new vR(s,n,r)}_reduceControls(e){let n={};return Object.keys(e).forEach(r=>{n[r]=this._createControl(e[r])}),n}_createControl(e){if(e instanceof L_)return e;if(e instanceof Fm)return e;if(Array.isArray(e)){let n=e[0],r=e.length>1?e[1]:null,s=e.length>2?e[2]:null;return this.control(n,r,s)}else return this.control(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var L9=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:B_,useValue:e.callSetDisabledState??hC}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[N9]})}}return i})(),B9=(()=>{class i{static withConfig(e){return{ngModule:i,providers:[{provide:M9,useValue:e.warnOnNgModelWithFormControl??"always"},{provide:B_,useValue:e.callSetDisabledState??hC}]}}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[N9]})}}return i})();var TR;try{TR=typeof Intl<"u"&&Intl.v8BreakIterator}catch{TR=!1}var dt=(()=>{class i{constructor(e){this._platformId=e,this.isBrowser=this._platformId?sL(this._platformId):typeof document=="object"&&!!document,this.EDGE=this.isBrowser&&/(edge)/i.test(navigator.userAgent),this.TRIDENT=this.isBrowser&&/(msie|trident)/i.test(navigator.userAgent),this.BLINK=this.isBrowser&&!!(window.chrome||TR)&&typeof CSS<"u"&&!this.EDGE&&!this.TRIDENT,this.WEBKIT=this.isBrowser&&/AppleWebKit/i.test(navigator.userAgent)&&!this.BLINK&&!this.EDGE&&!this.TRIDENT,this.IOS=this.isBrowser&&/iPad|iPhone|iPod/.test(navigator.userAgent)&&!("MSStream"in window),this.FIREFOX=this.isBrowser&&/(firefox|minefield)/i.test(navigator.userAgent),this.ANDROID=this.isBrowser&&/android/i.test(navigator.userAgent)&&!this.TRIDENT,this.SAFARI=this.isBrowser&&/safari/i.test(navigator.userAgent)&&this.WEBKIT}static{this.\u0275fac=function(n){return new(n||i)(V(Gr))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Lm,V9=["color","button","checkbox","date","datetime-local","email","file","hidden","image","month","number","password","radio","range","reset","search","submit","tel","text","time","url","week"];function IR(){if(Lm)return Lm;if(typeof document!="object"||!document)return Lm=new Set(V9),Lm;let i=document.createElement("input");return Lm=new Set(V9.filter(t=>(i.setAttribute("type",t),i.type===t))),Lm}var z_;function Vbe(){if(z_==null&&typeof window<"u")try{window.addEventListener("test",null,Object.defineProperty({},"passive",{get:()=>z_=!0}))}finally{z_=z_||!1}return z_}function fs(i){return Vbe()?i:!!i.capture}var tu;function z9(){if(tu==null){if(typeof document!="object"||!document||typeof Element!="function"||!Element)return tu=!1,tu;if("scrollBehavior"in document.documentElement.style)tu=!0;else{let i=Element.prototype.scrollTo;i?tu=!/\{\s*\[native code\]\s*\}/.test(i.toString()):tu=!1}}return tu}var ER;function zbe(){if(ER==null){let i=typeof document<"u"?document.head:null;ER=!!(i&&(i.createShadowRoot||i.attachShadow))}return ER}function j9(i){if(zbe()){let t=i.getRootNode?i.getRootNode():null;if(typeof ShadowRoot<"u"&&ShadowRoot&&t instanceof ShadowRoot)return t}return null}function sc(){let i=typeof document<"u"&&document?document.activeElement:null;for(;i&&i.shadowRoot;){let t=i.shadowRoot.activeElement;if(t===i)break;i=t}return i}function ps(i){return i.composedPath?i.composedPath()[0]:i.target}function j_(){return typeof __karma__<"u"&&!!__karma__||typeof jasmine<"u"&&!!jasmine||typeof jest<"u"&&!!jest||typeof Mocha<"u"&&!!Mocha}function Di(i,...t){return t.length?t.some(e=>i[e]):i.altKey||i.shiftKey||i.ctrlKey||i.metaKey}function Vr(i){return i!=null&&`${i}`!="false"}function pr(i,t=0){return jbe(i)?Number(i):t}function jbe(i){return!isNaN(parseFloat(i))&&!isNaN(Number(i))}function Bm(i){return Array.isArray(i)?i:[i]}function ji(i){return i==null?"":typeof i=="string"?i:`${i}px`}function gr(i){return i instanceof fe?i.nativeElement:i}function U9(i,t=/\s+/){let e=[];if(i!=null){let n=Array.isArray(i)?i:`${i}`.split(t);for(let r of n){let s=`${r}`.trim();s&&e.push(s)}}return e}function Ube(i){if(i.type==="characterData"&&i.target instanceof Comment)return!0;if(i.type==="childList"){for(let t=0;t<i.addedNodes.length;t++)if(!(i.addedNodes[t]instanceof Comment))return!1;for(let t=0;t<i.removedNodes.length;t++)if(!(i.removedNodes[t]instanceof Comment))return!1;return!0}return!1}var H9=(()=>{class i{create(e){return typeof MutationObserver>"u"?null:new MutationObserver(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Hbe=(()=>{class i{constructor(e){this._mutationObserverFactory=e,this._observedElements=new Map}ngOnDestroy(){this._observedElements.forEach((e,n)=>this._cleanupObserver(n))}observe(e){let n=gr(e);return new vn(r=>{let o=this._observeElement(n).pipe(Ue(a=>a.filter(l=>!Ube(l))),Ot(a=>!!a.length)).subscribe(r);return()=>{o.unsubscribe(),this._unobserveElement(n)}})}_observeElement(e){if(this._observedElements.has(e))this._observedElements.get(e).count++;else{let n=new ke,r=this._mutationObserverFactory.create(s=>n.next(s));r&&r.observe(e,{characterData:!0,childList:!0,subtree:!0}),this._observedElements.set(e,{observer:r,stream:n,count:1})}return this._observedElements.get(e).stream}_unobserveElement(e){this._observedElements.has(e)&&(this._observedElements.get(e).count--,this._observedElements.get(e).count||this._cleanupObserver(e))}_cleanupObserver(e){if(this._observedElements.has(e)){let{observer:n,stream:r}=this._observedElements.get(e);n&&n.disconnect(),r.complete(),this._observedElements.delete(e)}}static{this.\u0275fac=function(n){return new(n||i)(V(H9))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),q9=(()=>{class i{get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._disabled?this._unsubscribe():this._subscribe()}get debounce(){return this._debounce}set debounce(e){this._debounce=pr(e),this._subscribe()}constructor(e,n,r){this._contentObserver=e,this._elementRef=n,this._ngZone=r,this.event=new ue,this._disabled=!1,this._currentSubscription=null}ngAfterContentInit(){!this._currentSubscription&&!this.disabled&&this._subscribe()}ngOnDestroy(){this._unsubscribe()}_subscribe(){this._unsubscribe();let e=this._contentObserver.observe(this._elementRef);this._ngZone.runOutsideAngular(()=>{this._currentSubscription=(this.debounce?e.pipe(ku(this.debounce)):e).subscribe(this.event)})}_unsubscribe(){this._currentSubscription?.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)(x(Hbe),x(fe),x(_e))}}static{this.\u0275dir=J({type:i,selectors:[["","cdkObserveContent",""]],inputs:{disabled:[H.HasDecoratorInputTransform,"cdkObserveContentDisabled","disabled",be],debounce:"debounce"},outputs:{event:"cdkObserveContent"},exportAs:["cdkObserveContent"],standalone:!0,features:[Ge]})}}return i})(),Vm=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({providers:[H9]})}}return i})();var W9=new Set,iu,qbe=(()=>{class i{constructor(e,n){this._platform=e,this._nonce=n,this._matchMedia=this._platform.isBrowser&&window.matchMedia?window.matchMedia.bind(window):Gbe}matchMedia(e){return(this._platform.WEBKIT||this._platform.BLINK)&&Wbe(e,this._nonce),this._matchMedia(e)}static{this.\u0275fac=function(n){return new(n||i)(V(dt),V(GN,8))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function Wbe(i,t){if(!W9.has(i))try{iu||(iu=document.createElement("style"),t&&iu.setAttribute("nonce",t),iu.setAttribute("type","text/css"),document.head.appendChild(iu)),iu.sheet&&(iu.sheet.insertRule(`@media ${i} {body{ }}`,0),W9.add(i))}catch(e){console.error(e)}}function Gbe(i){return{matches:i==="all"||i==="",media:i,addListener:()=>{},removeListener:()=>{}}}var $9=(()=>{class i{constructor(e,n){this._mediaMatcher=e,this._zone=n,this._queries=new Map,this._destroySubject=new ke}ngOnDestroy(){this._destroySubject.next(),this._destroySubject.complete()}isMatched(e){return G9(Bm(e)).some(r=>this._registerQuery(r).mql.matches)}observe(e){let r=G9(Bm(e)).map(o=>this._registerQuery(o).observable),s=qb(r);return s=Gf(s.pipe(Pt(1)),s.pipe(Gb(1),ku(0))),s.pipe(Ue(o=>{let a={matches:!1,breakpoints:{}};return o.forEach(({matches:l,query:c})=>{a.matches=a.matches||l,a.breakpoints[c]=l}),a}))}_registerQuery(e){if(this._queries.has(e))return this._queries.get(e);let n=this._mediaMatcher.matchMedia(e),s={observable:new vn(o=>{let a=l=>this._zone.run(()=>o.next(l));return n.addListener(a),()=>{n.removeListener(a)}}).pipe(Pi(n),Ue(({matches:o})=>({query:e,matches:o})),Kt(this._destroySubject)),mql:n};return this._queries.set(e,s),s}static{this.\u0275fac=function(n){return new(n||i)(V(qbe),V(_e))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function G9(i){return i.map(t=>t.split(",")).reduce((t,e)=>t.concat(e)).map(t=>t.trim())}var X9=" ";function Z9(i,t,e){let n=J9(i,t);e=e.trim(),!n.some(r=>r.trim()===e)&&(n.push(e),i.setAttribute(t,n.join(X9)))}function OR(i,t,e){let n=J9(i,t);e=e.trim();let r=n.filter(s=>s!==e);r.length?i.setAttribute(t,r.join(X9)):i.removeAttribute(t)}function J9(i,t){return i.getAttribute(t)?.match(/\S+/g)??[]}var gC=class{constructor(t,e){this._items=t,this._activeItemIndex=-1,this._activeItem=null,this._wrap=!1,this._letterKeyStream=new ke,this._typeaheadSubscription=At.EMPTY,this._vertical=!0,this._allowedModifierKeys=[],this._homeAndEnd=!1,this._pageUpAndDown={enabled:!1,delta:10},this._skipPredicateFn=n=>n.disabled,this._pressedLetters=[],this.tabOut=new ke,this.change=new ke,t instanceof Kf?this._itemChangesSubscription=t.changes.subscribe(n=>this._itemsChanged(n.toArray())):cS(t)&&(this._effectRef=iL(()=>this._itemsChanged(t()),{injector:e}))}skipPredicate(t){return this._skipPredicateFn=t,this}withWrap(t=!0){return this._wrap=t,this}withVerticalOrientation(t=!0){return this._vertical=t,this}withHorizontalOrientation(t){return this._horizontal=t,this}withAllowedModifierKeys(t){return this._allowedModifierKeys=t,this}withTypeAhead(t=200){return this._typeaheadSubscription.unsubscribe(),this._typeaheadSubscription=this._letterKeyStream.pipe(Va(e=>this._pressedLetters.push(e)),ku(t),Ot(()=>this._pressedLetters.length>0),Ue(()=>this._pressedLetters.join(""))).subscribe(e=>{let n=this._getItemsArray();for(let r=1;r<n.length+1;r++){let s=(this._activeItemIndex+r)%n.length,o=n[s];if(!this._skipPredicateFn(o)&&o.getLabel().toUpperCase().trim().indexOf(e)===0){this.setActiveItem(s);break}}this._pressedLetters=[]}),this}cancelTypeahead(){return this._pressedLetters=[],this}withHomeAndEnd(t=!0){return this._homeAndEnd=t,this}withPageUpDown(t=!0,e=10){return this._pageUpAndDown={enabled:t,delta:e},this}setActiveItem(t){let e=this._activeItem;this.updateActiveItem(t),this._activeItem!==e&&this.change.next(this._activeItemIndex)}onKeydown(t){let e=t.keyCode,r=["altKey","ctrlKey","metaKey","shiftKey"].every(s=>!t[s]||this._allowedModifierKeys.indexOf(s)>-1);switch(e){case 9:this.tabOut.next();return;case 40:if(this._vertical&&r){this.setNextItemActive();break}else return;case 38:if(this._vertical&&r){this.setPreviousItemActive();break}else return;case 39:if(this._horizontal&&r){this._horizontal==="rtl"?this.setPreviousItemActive():this.setNextItemActive();break}else return;case 37:if(this._horizontal&&r){this._horizontal==="rtl"?this.setNextItemActive():this.setPreviousItemActive();break}else return;case 36:if(this._homeAndEnd&&r){this.setFirstItemActive();break}else return;case 35:if(this._homeAndEnd&&r){this.setLastItemActive();break}else return;case 33:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex-this._pageUpAndDown.delta;this._setActiveItemByIndex(s>0?s:0,1);break}else return;case 34:if(this._pageUpAndDown.enabled&&r){let s=this._activeItemIndex+this._pageUpAndDown.delta,o=this._getItemsArray().length;this._setActiveItemByIndex(s<o?s:o-1,-1);break}else return;default:(r||Di(t,"shiftKey"))&&(t.key&&t.key.length===1?this._letterKeyStream.next(t.key.toLocaleUpperCase()):(e>=65&&e<=90||e>=48&&e<=57)&&this._letterKeyStream.next(String.fromCharCode(e)));return}this._pressedLetters=[],t.preventDefault()}get activeItemIndex(){return this._activeItemIndex}get activeItem(){return this._activeItem}isTyping(){return this._pressedLetters.length>0}setFirstItemActive(){this._setActiveItemByIndex(0,1)}setLastItemActive(){this._setActiveItemByIndex(this._getItemsArray().length-1,-1)}setNextItemActive(){this._activeItemIndex<0?this.setFirstItemActive():this._setActiveItemByDelta(1)}setPreviousItemActive(){this._activeItemIndex<0&&this._wrap?this.setLastItemActive():this._setActiveItemByDelta(-1)}updateActiveItem(t){let e=this._getItemsArray(),n=typeof t=="number"?t:e.indexOf(t),r=e[n];this._activeItem=r??null,this._activeItemIndex=n}destroy(){this._typeaheadSubscription.unsubscribe(),this._itemChangesSubscription?.unsubscribe(),this._effectRef?.destroy(),this._letterKeyStream.complete(),this.tabOut.complete(),this.change.complete(),this._pressedLetters=[]}_setActiveItemByDelta(t){this._wrap?this._setActiveInWrapMode(t):this._setActiveInDefaultMode(t)}_setActiveInWrapMode(t){let e=this._getItemsArray();for(let n=1;n<=e.length;n++){let r=(this._activeItemIndex+t*n+e.length)%e.length,s=e[r];if(!this._skipPredicateFn(s)){this.setActiveItem(r);return}}}_setActiveInDefaultMode(t){this._setActiveItemByIndex(this._activeItemIndex+t,t)}_setActiveItemByIndex(t,e){let n=this._getItemsArray();if(n[t]){for(;this._skipPredicateFn(n[t]);)if(t+=e,!n[t])return;this.setActiveItem(t)}}_getItemsArray(){return cS(this._items)?this._items():this._items instanceof Kf?this._items.toArray():this._items}_itemsChanged(t){if(this._activeItem){let e=t.indexOf(this._activeItem);e>-1&&e!==this._activeItemIndex&&(this._activeItemIndex=e)}}},_C=class extends gC{setActiveItem(t){this.activeItem&&this.activeItem.setInactiveStyles(),super.setActiveItem(t),this.activeItem&&this.activeItem.setActiveStyles()}},bC=class extends gC{constructor(){super(...arguments),this._origin="program"}setFocusOrigin(t){return this._origin=t,this}setActiveItem(t){super.setActiveItem(t),this.activeItem&&this.activeItem.focus(this._origin)}};var q_=(()=>{class i{constructor(e){this._platform=e}isDisabled(e){return e.hasAttribute("disabled")}isVisible(e){return n0e(e)&&getComputedStyle(e).visibility==="visible"}isTabbable(e){if(!this._platform.isBrowser)return!1;let n=i0e(u0e(e));if(n&&(K9(n)===-1||!this.isVisible(n)))return!1;let r=e.nodeName.toLowerCase(),s=K9(e);return e.hasAttribute("contenteditable")?s!==-1:r==="iframe"||r==="object"||this._platform.WEBKIT&&this._platform.IOS&&!c0e(e)?!1:r==="audio"?e.hasAttribute("controls")?s!==-1:!1:r==="video"?s===-1?!1:s!==null?!0:this._platform.FIREFOX||e.hasAttribute("controls"):e.tabIndex>=0}isFocusable(e,n){return d0e(e)&&!this.isDisabled(e)&&(n?.ignoreVisibility||this.isVisible(e))}static{this.\u0275fac=function(n){return new(n||i)(V(dt))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function i0e(i){try{return i.frameElement}catch{return null}}function n0e(i){return!!(i.offsetWidth||i.offsetHeight||typeof i.getClientRects=="function"&&i.getClientRects().length)}function r0e(i){let t=i.nodeName.toLowerCase();return t==="input"||t==="select"||t==="button"||t==="textarea"}function s0e(i){return a0e(i)&&i.type=="hidden"}function o0e(i){return l0e(i)&&i.hasAttribute("href")}function a0e(i){return i.nodeName.toLowerCase()=="input"}function l0e(i){return i.nodeName.toLowerCase()=="a"}function e7(i){if(!i.hasAttribute("tabindex")||i.tabIndex===void 0)return!1;let t=i.getAttribute("tabindex");return!!(t&&!isNaN(parseInt(t,10)))}function K9(i){if(!e7(i))return null;let t=parseInt(i.getAttribute("tabindex")||"",10);return isNaN(t)?-1:t}function c0e(i){let t=i.nodeName.toLowerCase(),e=t==="input"&&i.type;return e==="text"||e==="password"||t==="select"||t==="textarea"}function d0e(i){return s0e(i)?!1:r0e(i)||o0e(i)||i.hasAttribute("contenteditable")||e7(i)}function u0e(i){return i.ownerDocument&&i.ownerDocument.defaultView||window}var MR=class{get enabled(){return this._enabled}set enabled(t){this._enabled=t,this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}constructor(t,e,n,r,s=!1){this._element=t,this._checker=e,this._ngZone=n,this._document=r,this._hasAttached=!1,this.startAnchorListener=()=>this.focusLastTabbableElement(),this.endAnchorListener=()=>this.focusFirstTabbableElement(),this._enabled=!0,s||this.attachAnchors()}destroy(){let t=this._startAnchor,e=this._endAnchor;t&&(t.removeEventListener("focus",this.startAnchorListener),t.remove()),e&&(e.removeEventListener("focus",this.endAnchorListener),e.remove()),this._startAnchor=this._endAnchor=null,this._hasAttached=!1}attachAnchors(){return this._hasAttached?!0:(this._ngZone.runOutsideAngular(()=>{this._startAnchor||(this._startAnchor=this._createAnchor(),this._startAnchor.addEventListener("focus",this.startAnchorListener)),this._endAnchor||(this._endAnchor=this._createAnchor(),this._endAnchor.addEventListener("focus",this.endAnchorListener))}),this._element.parentNode&&(this._element.parentNode.insertBefore(this._startAnchor,this._element),this._element.parentNode.insertBefore(this._endAnchor,this._element.nextSibling),this._hasAttached=!0),this._hasAttached)}focusInitialElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusInitialElement(t)))})}focusFirstTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusFirstTabbableElement(t)))})}focusLastTabbableElementWhenReady(t){return new Promise(e=>{this._executeOnStable(()=>e(this.focusLastTabbableElement(t)))})}_getRegionBoundary(t){let e=this._element.querySelectorAll(`[cdk-focus-region-${t}], [cdkFocusRegion${t}], [cdk-focus-${t}]`);return t=="start"?e.length?e[0]:this._getFirstTabbableElement(this._element):e.length?e[e.length-1]:this._getLastTabbableElement(this._element)}focusInitialElement(t){let e=this._element.querySelector("[cdk-focus-initial], [cdkFocusInitial]");if(e){if(!this._checker.isFocusable(e)){let n=this._getFirstTabbableElement(e);return n?.focus(t),!!n}return e.focus(t),!0}return this.focusFirstTabbableElement(t)}focusFirstTabbableElement(t){let e=this._getRegionBoundary("start");return e&&e.focus(t),!!e}focusLastTabbableElement(t){let e=this._getRegionBoundary("end");return e&&e.focus(t),!!e}hasAttached(){return this._hasAttached}_getFirstTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let n=0;n<e.length;n++){let r=e[n].nodeType===this._document.ELEMENT_NODE?this._getFirstTabbableElement(e[n]):null;if(r)return r}return null}_getLastTabbableElement(t){if(this._checker.isFocusable(t)&&this._checker.isTabbable(t))return t;let e=t.children;for(let n=e.length-1;n>=0;n--){let r=e[n].nodeType===this._document.ELEMENT_NODE?this._getLastTabbableElement(e[n]):null;if(r)return r}return null}_createAnchor(){let t=this._document.createElement("div");return this._toggleAnchorTabIndex(this._enabled,t),t.classList.add("cdk-visually-hidden"),t.classList.add("cdk-focus-trap-anchor"),t.setAttribute("aria-hidden","true"),t}_toggleAnchorTabIndex(t,e){t?e.setAttribute("tabindex","0"):e.removeAttribute("tabindex")}toggleAnchors(t){this._startAnchor&&this._endAnchor&&(this._toggleAnchorTabIndex(t,this._startAnchor),this._toggleAnchorTabIndex(t,this._endAnchor))}_executeOnStable(t){this._ngZone.isStable?t():this._ngZone.onStable.pipe(Pt(1)).subscribe(t)}},W_=(()=>{class i{constructor(e,n,r){this._checker=e,this._ngZone=n,this._document=r}create(e,n=!1){return new MR(e,this._checker,this._ngZone,this._document,n)}static{this.\u0275fac=function(n){return new(n||i)(V(q_),V(_e),V(Ze))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),t7=(()=>{class i{get enabled(){return this.focusTrap?.enabled||!1}set enabled(e){this.focusTrap&&(this.focusTrap.enabled=e)}constructor(e,n,r){this._elementRef=e,this._focusTrapFactory=n,this._previouslyFocusedElement=null,He(dt).isBrowser&&(this.focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement,!0))}ngOnDestroy(){this.focusTrap?.destroy(),this._previouslyFocusedElement&&(this._previouslyFocusedElement.focus(),this._previouslyFocusedElement=null)}ngAfterContentInit(){this.focusTrap?.attachAnchors(),this.autoCapture&&this._captureFocus()}ngDoCheck(){this.focusTrap&&!this.focusTrap.hasAttached()&&this.focusTrap.attachAnchors()}ngOnChanges(e){let n=e.autoCapture;n&&!n.firstChange&&this.autoCapture&&this.focusTrap?.hasAttached()&&this._captureFocus()}_captureFocus(){this._previouslyFocusedElement=sc(),this.focusTrap?.focusInitialElementWhenReady()}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(W_),x(Ze))}}static{this.\u0275dir=J({type:i,selectors:[["","cdkTrapFocus",""]],inputs:{enabled:[H.HasDecoratorInputTransform,"cdkTrapFocus","enabled",be],autoCapture:[H.HasDecoratorInputTransform,"cdkTrapFocusAutoCapture","autoCapture",be]},exportAs:["cdkTrapFocus"],standalone:!0,features:[Ge,ht]})}}return i})();function PR(i){return i.buttons===0||i.detail===0}function RR(i){let t=i.touches&&i.touches[0]||i.changedTouches&&i.changedTouches[0];return!!t&&t.identifier===-1&&(t.radiusX==null||t.radiusX===1)&&(t.radiusY==null||t.radiusY===1)}var h0e=new te("cdk-input-modality-detector-options"),m0e={ignoreKeys:[18,17,224,91,16]},i7=650,zm=fs({passive:!0,capture:!0}),f0e=(()=>{class i{get mostRecentModality(){return this._modality.value}constructor(e,n,r,s){this._platform=e,this._mostRecentTarget=null,this._modality=new Xo(null),this._lastTouchMs=0,this._onKeydown=o=>{this._options?.ignoreKeys?.some(a=>a===o.keyCode)||(this._modality.next("keyboard"),this._mostRecentTarget=ps(o))},this._onMousedown=o=>{Date.now()-this._lastTouchMs<i7||(this._modality.next(PR(o)?"keyboard":"mouse"),this._mostRecentTarget=ps(o))},this._onTouchstart=o=>{if(RR(o)){this._modality.next("keyboard");return}this._lastTouchMs=Date.now(),this._modality.next("touch"),this._mostRecentTarget=ps(o)},this._options=ve(ve({},m0e),s),this.modalityDetected=this._modality.pipe(Gb(1)),this.modalityChanged=this.modalityDetected.pipe(Ss()),e.isBrowser&&n.runOutsideAngular(()=>{r.addEventListener("keydown",this._onKeydown,zm),r.addEventListener("mousedown",this._onMousedown,zm),r.addEventListener("touchstart",this._onTouchstart,zm)})}ngOnDestroy(){this._modality.complete(),this._platform.isBrowser&&(document.removeEventListener("keydown",this._onKeydown,zm),document.removeEventListener("mousedown",this._onMousedown,zm),document.removeEventListener("touchstart",this._onTouchstart,zm))}static{this.\u0275fac=function(n){return new(n||i)(V(dt),V(_e),V(Ze),V(h0e,8))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),p0e=new te("liveAnnouncerElement",{providedIn:"root",factory:g0e});function g0e(){return null}var _0e=new te("LIVE_ANNOUNCER_DEFAULT_OPTIONS"),b0e=0,n7=(()=>{class i{constructor(e,n,r,s){this._ngZone=n,this._defaultOptions=s,this._document=r,this._liveElement=e||this._createLiveElement()}announce(e,...n){let r=this._defaultOptions,s,o;return n.length===1&&typeof n[0]=="number"?o=n[0]:[s,o]=n,this.clear(),clearTimeout(this._previousTimeout),s||(s=r&&r.politeness?r.politeness:"polite"),o==null&&r&&(o=r.duration),this._liveElement.setAttribute("aria-live",s),this._liveElement.id&&this._exposeAnnouncerToModals(this._liveElement.id),this._ngZone.runOutsideAngular(()=>(this._currentPromise||(this._currentPromise=new Promise(a=>this._currentResolve=a)),clearTimeout(this._previousTimeout),this._previousTimeout=setTimeout(()=>{this._liveElement.textContent=e,typeof o=="number"&&(this._previousTimeout=setTimeout(()=>this.clear(),o)),this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0},100),this._currentPromise))}clear(){this._liveElement&&(this._liveElement.textContent="")}ngOnDestroy(){clearTimeout(this._previousTimeout),this._liveElement?.remove(),this._liveElement=null,this._currentResolve?.(),this._currentPromise=this._currentResolve=void 0}_createLiveElement(){let e="cdk-live-announcer-element",n=this._document.getElementsByClassName(e),r=this._document.createElement("div");for(let s=0;s<n.length;s++)n[s].remove();return r.classList.add(e),r.classList.add("cdk-visually-hidden"),r.setAttribute("aria-atomic","true"),r.setAttribute("aria-live","polite"),r.id=`cdk-live-announcer-${b0e++}`,this._document.body.appendChild(r),r}_exposeAnnouncerToModals(e){let n=this._document.querySelectorAll('body > .cdk-overlay-container [aria-modal="true"]');for(let r=0;r<n.length;r++){let s=n[r],o=s.getAttribute("aria-owns");o?o.indexOf(e)===-1&&s.setAttribute("aria-owns",o+" "+e):s.setAttribute("aria-owns",e)}}static{this.\u0275fac=function(n){return new(n||i)(V(p0e,8),V(_e),V(Ze),V(_0e,8))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var pC=function(i){return i[i.IMMEDIATE=0]="IMMEDIATE",i[i.EVENTUAL=1]="EVENTUAL",i}(pC||{}),v0e=new te("cdk-focus-monitor-default-options"),fC=fs({passive:!0,capture:!0}),zr=(()=>{class i{constructor(e,n,r,s,o){this._ngZone=e,this._platform=n,this._inputModalityDetector=r,this._origin=null,this._windowFocused=!1,this._originFromTouchInteraction=!1,this._elementInfo=new Map,this._monitoredElementCount=0,this._rootNodeFocusListenerCount=new Map,this._windowFocusListener=()=>{this._windowFocused=!0,this._windowFocusTimeoutId=window.setTimeout(()=>this._windowFocused=!1)},this._stopInputModalityDetector=new ke,this._rootNodeFocusAndBlurListener=a=>{let l=ps(a);for(let c=l;c;c=c.parentElement)a.type==="focus"?this._onFocus(a,c):this._onBlur(a,c)},this._document=s,this._detectionMode=o?.detectionMode||pC.IMMEDIATE}monitor(e,n=!1){let r=gr(e);if(!this._platform.isBrowser||r.nodeType!==1)return We();let s=j9(r)||this._getDocument(),o=this._elementInfo.get(r);if(o)return n&&(o.checkChildren=!0),o.subject;let a={checkChildren:n,subject:new ke,rootNode:s};return this._elementInfo.set(r,a),this._registerGlobalListeners(a),a.subject}stopMonitoring(e){let n=gr(e),r=this._elementInfo.get(n);r&&(r.subject.complete(),this._setClasses(n),this._elementInfo.delete(n),this._removeGlobalListeners(r))}focusVia(e,n,r){let s=gr(e),o=this._getDocument().activeElement;s===o?this._getClosestElementsInfo(s).forEach(([a,l])=>this._originChanged(a,n,l)):(this._setOrigin(n),typeof s.focus=="function"&&s.focus(r))}ngOnDestroy(){this._elementInfo.forEach((e,n)=>this.stopMonitoring(n))}_getDocument(){return this._document||document}_getWindow(){return this._getDocument().defaultView||window}_getFocusOrigin(e){return this._origin?this._originFromTouchInteraction?this._shouldBeAttributedToTouch(e)?"touch":"program":this._origin:this._windowFocused&&this._lastFocusOrigin?this._lastFocusOrigin:e&&this._isLastInteractionFromInputLabel(e)?"mouse":"program"}_shouldBeAttributedToTouch(e){return this._detectionMode===pC.EVENTUAL||!!e?.contains(this._inputModalityDetector._mostRecentTarget)}_setClasses(e,n){e.classList.toggle("cdk-focused",!!n),e.classList.toggle("cdk-touch-focused",n==="touch"),e.classList.toggle("cdk-keyboard-focused",n==="keyboard"),e.classList.toggle("cdk-mouse-focused",n==="mouse"),e.classList.toggle("cdk-program-focused",n==="program")}_setOrigin(e,n=!1){this._ngZone.runOutsideAngular(()=>{if(this._origin=e,this._originFromTouchInteraction=e==="touch"&&n,this._detectionMode===pC.IMMEDIATE){clearTimeout(this._originTimeoutId);let r=this._originFromTouchInteraction?i7:1;this._originTimeoutId=setTimeout(()=>this._origin=null,r)}})}_onFocus(e,n){let r=this._elementInfo.get(n),s=ps(e);!r||!r.checkChildren&&n!==s||this._originChanged(n,this._getFocusOrigin(s),r)}_onBlur(e,n){let r=this._elementInfo.get(n);!r||r.checkChildren&&e.relatedTarget instanceof Node&&n.contains(e.relatedTarget)||(this._setClasses(n),this._emitOrigin(r,null))}_emitOrigin(e,n){e.subject.observers.length&&this._ngZone.run(()=>e.subject.next(n))}_registerGlobalListeners(e){if(!this._platform.isBrowser)return;let n=e.rootNode,r=this._rootNodeFocusListenerCount.get(n)||0;r||this._ngZone.runOutsideAngular(()=>{n.addEventListener("focus",this._rootNodeFocusAndBlurListener,fC),n.addEventListener("blur",this._rootNodeFocusAndBlurListener,fC)}),this._rootNodeFocusListenerCount.set(n,r+1),++this._monitoredElementCount===1&&(this._ngZone.runOutsideAngular(()=>{this._getWindow().addEventListener("focus",this._windowFocusListener)}),this._inputModalityDetector.modalityDetected.pipe(Kt(this._stopInputModalityDetector)).subscribe(s=>{this._setOrigin(s,!0)}))}_removeGlobalListeners(e){let n=e.rootNode;if(this._rootNodeFocusListenerCount.has(n)){let r=this._rootNodeFocusListenerCount.get(n);r>1?this._rootNodeFocusListenerCount.set(n,r-1):(n.removeEventListener("focus",this._rootNodeFocusAndBlurListener,fC),n.removeEventListener("blur",this._rootNodeFocusAndBlurListener,fC),this._rootNodeFocusListenerCount.delete(n))}--this._monitoredElementCount||(this._getWindow().removeEventListener("focus",this._windowFocusListener),this._stopInputModalityDetector.next(),clearTimeout(this._windowFocusTimeoutId),clearTimeout(this._originTimeoutId))}_originChanged(e,n,r){this._setClasses(e,n),this._emitOrigin(r,n),this._lastFocusOrigin=n}_getClosestElementsInfo(e){let n=[];return this._elementInfo.forEach((r,s)=>{(s===e||r.checkChildren&&s.contains(e))&&n.push([s,r])}),n}_isLastInteractionFromInputLabel(e){let{_mostRecentTarget:n,mostRecentModality:r}=this._inputModalityDetector;if(r!=="mouse"||!n||n===e||e.nodeName!=="INPUT"&&e.nodeName!=="TEXTAREA"||e.disabled)return!1;let s=e.labels;if(s){for(let o=0;o<s.length;o++)if(s[o].contains(n))return!0}return!1}static{this.\u0275fac=function(n){return new(n||i)(V(_e),V(dt),V(f0e),V(Ze,8),V(v0e,8))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),r7=(()=>{class i{constructor(e,n){this._elementRef=e,this._focusMonitor=n,this._focusOrigin=null,this.cdkFocusChange=new ue}get focusOrigin(){return this._focusOrigin}ngAfterViewInit(){let e=this._elementRef.nativeElement;this._monitorSubscription=this._focusMonitor.monitor(e,e.nodeType===1&&e.hasAttribute("cdkMonitorSubtreeFocus")).subscribe(n=>{this._focusOrigin=n,this.cdkFocusChange.emit(n)})}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._monitorSubscription&&this._monitorSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(zr))}}static{this.\u0275dir=J({type:i,selectors:[["","cdkMonitorElementFocus",""],["","cdkMonitorSubtreeFocus",""]],outputs:{cdkFocusChange:"cdkFocusChange"},exportAs:["cdkMonitorFocus"],standalone:!0})}}return i})(),nu=function(i){return i[i.NONE=0]="NONE",i[i.BLACK_ON_WHITE=1]="BLACK_ON_WHITE",i[i.WHITE_ON_BLACK=2]="WHITE_ON_BLACK",i}(nu||{}),Y9="cdk-high-contrast-black-on-white",Q9="cdk-high-contrast-white-on-black",DR="cdk-high-contrast-active",FR=(()=>{class i{constructor(e,n){this._platform=e,this._document=n,this._breakpointSubscription=He($9).observe("(forced-colors: active)").subscribe(()=>{this._hasCheckedHighContrastMode&&(this._hasCheckedHighContrastMode=!1,this._applyBodyHighContrastModeCssClasses())})}getHighContrastMode(){if(!this._platform.isBrowser)return nu.NONE;let e=this._document.createElement("div");e.style.backgroundColor="rgb(1,2,3)",e.style.position="absolute",this._document.body.appendChild(e);let n=this._document.defaultView||window,r=n&&n.getComputedStyle?n.getComputedStyle(e):null,s=(r&&r.backgroundColor||"").replace(/ /g,"");switch(e.remove(),s){case"rgb(0,0,0)":case"rgb(45,50,54)":case"rgb(32,32,32)":return nu.WHITE_ON_BLACK;case"rgb(255,255,255)":case"rgb(255,250,239)":return nu.BLACK_ON_WHITE}return nu.NONE}ngOnDestroy(){this._breakpointSubscription.unsubscribe()}_applyBodyHighContrastModeCssClasses(){if(!this._hasCheckedHighContrastMode&&this._platform.isBrowser&&this._document.body){let e=this._document.body.classList;e.remove(DR,Y9,Q9),this._hasCheckedHighContrastMode=!0;let n=this.getHighContrastMode();n===nu.BLACK_ON_WHITE?e.add(DR,Y9):n===nu.WHITE_ON_BLACK&&e.add(DR,Q9)}}static{this.\u0275fac=function(n){return new(n||i)(V(dt),V(Ze))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),vC=(()=>{class i{constructor(e){e._applyBodyHighContrastModeCssClasses()}static{this.\u0275fac=function(n){return new(n||i)(V(FR))}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[Vm]})}}return i})();var y0e=new te("cdk-dir-doc",{providedIn:"root",factory:x0e});function x0e(){return He(Ze)}var w0e=/^(ar|ckb|dv|he|iw|fa|nqo|ps|sd|ug|ur|yi|.*[-_](Adlm|Arab|Hebr|Nkoo|Rohg|Thaa))(?!.*[-_](Latn|Cyrl)($|-|_))($|-|_)/i;function C0e(i){let t=i?.toLowerCase()||"";return t==="auto"&&typeof navigator<"u"&&navigator?.language?w0e.test(navigator.language)?"rtl":"ltr":t==="rtl"?"rtl":"ltr"}var Mi=(()=>{class i{constructor(e){if(this.value="ltr",this.change=new ue,e){let n=e.body?e.body.dir:null,r=e.documentElement?e.documentElement.dir:null;this.value=C0e(n||r||"ltr")}}ngOnDestroy(){this.change.complete()}static{this.\u0275fac=function(n){return new(n||i)(V(y0e,8))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var lc=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({})}}return i})();var S0e=["text"],k0e=[[["mat-icon"]],"*"],E0e=["mat-icon","*"];function T0e(i,t){if(i&1&&j(0,"mat-pseudo-checkbox",1),i&2){let e=W();z("disabled",e.disabled)("state",e.selected?"checked":"unchecked")}}function I0e(i,t){if(i&1&&j(0,"mat-pseudo-checkbox",3),i&2){let e=W();z("disabled",e.disabled)}}function D0e(i,t){if(i&1&&(f(0,"span",4),y(1),p()),i&2){let e=W();g(),Q("(",e.group.label,")")}}var M0e=["mat-internal-form-field",""],A0e=["*"];function O0e(){return!0}var P0e=new te("mat-sanity-checks",{providedIn:"root",factory:O0e}),ze=(()=>{class i{constructor(e,n,r){this._sanityChecks=n,this._document=r,this._hasDoneGlobalChecks=!1,e._applyBodyHighContrastModeCssClasses(),this._hasDoneGlobalChecks||(this._hasDoneGlobalChecks=!0)}_checkIsEnabled(e){return j_()?!1:typeof this._sanityChecks=="boolean"?this._sanityChecks:!!this._sanityChecks[e]}static{this.\u0275fac=function(n){return new(n||i)(V(FR),V(P0e,8),V(Ze))}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[lc,lc]})}}return i})();var su=class{constructor(t,e,n,r,s){this._defaultMatcher=t,this.ngControl=e,this._parentFormGroup=n,this._parentForm=r,this._stateChanges=s,this.errorState=!1}updateErrorState(){let t=this.errorState,e=this._parentFormGroup||this._parentForm,n=this.matcher||this._defaultMatcher,r=this.ngControl?this.ngControl.control:null,s=n?.isErrorState(r,e)??!1;s!==t&&(this.errorState=s,this._stateChanges.next())}};var s7=new te("MAT_DATE_LOCALE",{providedIn:"root",factory:R0e});function R0e(){return He(tL)}var En=class{constructor(){this._localeChanges=new ke,this.localeChanges=this._localeChanges}getValidDateOrNull(t){return this.isDateInstance(t)&&this.isValid(t)?t:null}deserialize(t){return t==null||this.isDateInstance(t)&&this.isValid(t)?t:this.invalid()}setLocale(t){this.locale=t,this._localeChanges.next()}compareDate(t,e){return this.getYear(t)-this.getYear(e)||this.getMonth(t)-this.getMonth(e)||this.getDate(t)-this.getDate(e)}sameDate(t,e){if(t&&e){let n=this.isValid(t),r=this.isValid(e);return n&&r?!this.compareDate(t,e):n==r}return t==e}clampDate(t,e,n){return e&&this.compareDate(t,e)<0?e:n&&this.compareDate(t,n)>0?n:t}},cc=new te("mat-date-formats"),F0e=/^\d{4}-\d{2}-\d{2}(?:T\d{2}:\d{2}:\d{2}(?:\.\d+)?(?:Z|(?:(?:\+|-)\d{2}:\d{2}))?)?$/;function NR(i,t){let e=Array(i);for(let n=0;n<i;n++)e[n]=t(n);return e}var N0e=(()=>{class i extends En{constructor(e){super(),this.useUtcForDisplay=!1,this._matDateLocale=He(s7,{optional:!0}),e!==void 0&&(this._matDateLocale=e),super.setLocale(this._matDateLocale)}getYear(e){return e.getFullYear()}getMonth(e){return e.getMonth()}getDate(e){return e.getDate()}getDayOfWeek(e){return e.getDay()}getMonthNames(e){let n=new Intl.DateTimeFormat(this.locale,{month:e,timeZone:"utc"});return NR(12,r=>this._format(n,new Date(2017,r,1)))}getDateNames(){let e=new Intl.DateTimeFormat(this.locale,{day:"numeric",timeZone:"utc"});return NR(31,n=>this._format(e,new Date(2017,0,n+1)))}getDayOfWeekNames(e){let n=new Intl.DateTimeFormat(this.locale,{weekday:e,timeZone:"utc"});return NR(7,r=>this._format(n,new Date(2017,0,r+1)))}getYearName(e){let n=new Intl.DateTimeFormat(this.locale,{year:"numeric",timeZone:"utc"});return this._format(n,e)}getFirstDayOfWeek(){return 0}getNumDaysInMonth(e){return this.getDate(this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+1,0))}clone(e){return new Date(e.getTime())}createDate(e,n,r){let s=this._createDateWithOverflow(e,n,r);return s.getMonth()!=n,s}today(){return new Date}parse(e,n){return typeof e=="number"?new Date(e):e?new Date(Date.parse(e)):null}format(e,n){if(!this.isValid(e))throw Error("NativeDateAdapter: Cannot format invalid date.");let r=new Intl.DateTimeFormat(this.locale,Tt(ve({},n),{timeZone:"utc"}));return this._format(r,e)}addCalendarYears(e,n){return this.addCalendarMonths(e,n*12)}addCalendarMonths(e,n){let r=this._createDateWithOverflow(this.getYear(e),this.getMonth(e)+n,this.getDate(e));return this.getMonth(r)!=((this.getMonth(e)+n)%12+12)%12&&(r=this._createDateWithOverflow(this.getYear(r),this.getMonth(r),0)),r}addCalendarDays(e,n){return this._createDateWithOverflow(this.getYear(e),this.getMonth(e),this.getDate(e)+n)}toIso8601(e){return[e.getUTCFullYear(),this._2digit(e.getUTCMonth()+1),this._2digit(e.getUTCDate())].join("-")}deserialize(e){if(typeof e=="string"){if(!e)return null;if(F0e.test(e)){let n=new Date(e);if(this.isValid(n))return n}}return super.deserialize(e)}isDateInstance(e){return e instanceof Date}isValid(e){return!isNaN(e.getTime())}invalid(){return new Date(NaN)}_createDateWithOverflow(e,n,r){let s=new Date;return s.setFullYear(e,n,r),s.setHours(0,0,0,0),s}_2digit(e){return("00"+e).slice(-2)}_format(e,n){let r=new Date;return r.setUTCFullYear(n.getFullYear(),n.getMonth(),n.getDate()),r.setUTCHours(n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()),e.format(r)}static{this.\u0275fac=function(n){return new(n||i)(V(s7,8))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac})}}return i})(),L0e={parse:{dateInput:null},display:{dateInput:{year:"numeric",month:"numeric",day:"numeric"},monthYearLabel:{year:"numeric",month:"short"},dateA11yLabel:{year:"numeric",month:"long",day:"numeric"},monthYearA11yLabel:{year:"numeric",month:"long"}}};var f7=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({providers:[B0e()]})}}return i})();function B0e(i=L0e){return[{provide:En,useClass:N0e},{provide:cc,useValue:i}]}var $_=(()=>{class i{isErrorState(e,n){return!!(e&&e.invalid&&(e.touched||n&&n.submitted))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var UR=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[ze,ze]})}}return i})(),gs=function(i){return i[i.FADING_IN=0]="FADING_IN",i[i.VISIBLE=1]="VISIBLE",i[i.FADING_OUT=2]="FADING_OUT",i[i.HIDDEN=3]="HIDDEN",i}(gs||{}),VR=class{constructor(t,e,n,r=!1){this._renderer=t,this.element=e,this.config=n,this._animationForciblyDisabledThroughCss=r,this.state=gs.HIDDEN}fadeOut(){this._renderer.fadeOutRipple(this)}},o7=fs({passive:!0,capture:!0}),zR=class{constructor(){this._events=new Map,this._delegateEventHandler=t=>{let e=ps(t);e&&this._events.get(t.type)?.forEach((n,r)=>{(r===e||r.contains(e))&&n.forEach(s=>s.handleEvent(t))})}}addHandler(t,e,n,r){let s=this._events.get(e);if(s){let o=s.get(n);o?o.add(r):s.set(n,new Set([r]))}else this._events.set(e,new Map([[n,new Set([r])]])),t.runOutsideAngular(()=>{document.addEventListener(e,this._delegateEventHandler,o7)})}removeHandler(t,e,n){let r=this._events.get(t);if(!r)return;let s=r.get(e);s&&(s.delete(n),s.size===0&&r.delete(e),r.size===0&&(this._events.delete(t),document.removeEventListener(t,this._delegateEventHandler,o7)))}},a7={enterDuration:225,exitDuration:150},V0e=800,l7=fs({passive:!0,capture:!0}),c7=["mousedown","touchstart"],d7=["mouseup","mouseleave","touchend","touchcancel"],G_=class i{static{this._eventManager=new zR}constructor(t,e,n,r){this._target=t,this._ngZone=e,this._platform=r,this._isPointerDown=!1,this._activeRipples=new Map,this._pointerUpEventsRegistered=!1,r.isBrowser&&(this._containerElement=gr(n))}fadeInRipple(t,e,n={}){let r=this._containerRect=this._containerRect||this._containerElement.getBoundingClientRect(),s=ve(ve({},a7),n.animation);n.centered&&(t=r.left+r.width/2,e=r.top+r.height/2);let o=n.radius||z0e(t,e,r),a=t-r.left,l=e-r.top,c=s.enterDuration,d=document.createElement("div");d.classList.add("mat-ripple-element"),d.style.left=`${a-o}px`,d.style.top=`${l-o}px`,d.style.height=`${o*2}px`,d.style.width=`${o*2}px`,n.color!=null&&(d.style.backgroundColor=n.color),d.style.transitionDuration=`${c}ms`,this._containerElement.appendChild(d);let u=window.getComputedStyle(d),h=u.transitionProperty,m=u.transitionDuration,_=h==="none"||m==="0s"||m==="0s, 0s"||r.width===0&&r.height===0,b=new VR(this,d,n,_);d.style.transform="scale3d(1, 1, 1)",b.state=gs.FADING_IN,n.persistent||(this._mostRecentTransientRipple=b);let v=null;return!_&&(c||s.exitDuration)&&this._ngZone.runOutsideAngular(()=>{let I=()=>this._finishRippleTransition(b),A=()=>this._destroyRipple(b);d.addEventListener("transitionend",I),d.addEventListener("transitioncancel",A),v={onTransitionEnd:I,onTransitionCancel:A}}),this._activeRipples.set(b,v),(_||!c)&&this._finishRippleTransition(b),b}fadeOutRipple(t){if(t.state===gs.FADING_OUT||t.state===gs.HIDDEN)return;let e=t.element,n=ve(ve({},a7),t.config.animation);e.style.transitionDuration=`${n.exitDuration}ms`,e.style.opacity="0",t.state=gs.FADING_OUT,(t._animationForciblyDisabledThroughCss||!n.exitDuration)&&this._finishRippleTransition(t)}fadeOutAll(){this._getActiveRipples().forEach(t=>t.fadeOut())}fadeOutAllNonPersistent(){this._getActiveRipples().forEach(t=>{t.config.persistent||t.fadeOut()})}setupTriggerEvents(t){let e=gr(t);!this._platform.isBrowser||!e||e===this._triggerElement||(this._removeTriggerEvents(),this._triggerElement=e,c7.forEach(n=>{i._eventManager.addHandler(this._ngZone,n,e,this)}))}handleEvent(t){t.type==="mousedown"?this._onMousedown(t):t.type==="touchstart"?this._onTouchStart(t):this._onPointerUp(),this._pointerUpEventsRegistered||(this._ngZone.runOutsideAngular(()=>{d7.forEach(e=>{this._triggerElement.addEventListener(e,this,l7)})}),this._pointerUpEventsRegistered=!0)}_finishRippleTransition(t){t.state===gs.FADING_IN?this._startFadeOutTransition(t):t.state===gs.FADING_OUT&&this._destroyRipple(t)}_startFadeOutTransition(t){let e=t===this._mostRecentTransientRipple,{persistent:n}=t.config;t.state=gs.VISIBLE,!n&&(!e||!this._isPointerDown)&&t.fadeOut()}_destroyRipple(t){let e=this._activeRipples.get(t)??null;this._activeRipples.delete(t),this._activeRipples.size||(this._containerRect=null),t===this._mostRecentTransientRipple&&(this._mostRecentTransientRipple=null),t.state=gs.HIDDEN,e!==null&&(t.element.removeEventListener("transitionend",e.onTransitionEnd),t.element.removeEventListener("transitioncancel",e.onTransitionCancel)),t.element.remove()}_onMousedown(t){let e=PR(t),n=this._lastTouchStartEvent&&Date.now()<this._lastTouchStartEvent+V0e;!this._target.rippleDisabled&&!e&&!n&&(this._isPointerDown=!0,this.fadeInRipple(t.clientX,t.clientY,this._target.rippleConfig))}_onTouchStart(t){if(!this._target.rippleDisabled&&!RR(t)){this._lastTouchStartEvent=Date.now(),this._isPointerDown=!0;let e=t.changedTouches;if(e)for(let n=0;n<e.length;n++)this.fadeInRipple(e[n].clientX,e[n].clientY,this._target.rippleConfig)}}_onPointerUp(){this._isPointerDown&&(this._isPointerDown=!1,this._getActiveRipples().forEach(t=>{let e=t.state===gs.VISIBLE||t.config.terminateOnPointerUp&&t.state===gs.FADING_IN;!t.config.persistent&&e&&t.fadeOut()}))}_getActiveRipples(){return Array.from(this._activeRipples.keys())}_removeTriggerEvents(){let t=this._triggerElement;t&&(c7.forEach(e=>i._eventManager.removeHandler(e,t,this)),this._pointerUpEventsRegistered&&(d7.forEach(e=>t.removeEventListener(e,this,l7)),this._pointerUpEventsRegistered=!1))}};function z0e(i,t,e){let n=Math.max(Math.abs(i-e.left),Math.abs(i-e.right)),r=Math.max(Math.abs(t-e.top),Math.abs(t-e.bottom));return Math.sqrt(n*n+r*r)}var K_=new te("mat-ripple-global-options"),Sa=(()=>{class i{get disabled(){return this._disabled}set disabled(e){e&&this.fadeOutAllNonPersistent(),this._disabled=e,this._setupTriggerEventsIfEnabled()}get trigger(){return this._trigger||this._elementRef.nativeElement}set trigger(e){this._trigger=e,this._setupTriggerEventsIfEnabled()}constructor(e,n,r,s,o){this._elementRef=e,this._animationMode=o,this.radius=0,this._disabled=!1,this._isInitialized=!1,this._globalOptions=s||{},this._rippleRenderer=new G_(this,n,e,r)}ngOnInit(){this._isInitialized=!0,this._setupTriggerEventsIfEnabled()}ngOnDestroy(){this._rippleRenderer._removeTriggerEvents()}fadeOutAll(){this._rippleRenderer.fadeOutAll()}fadeOutAllNonPersistent(){this._rippleRenderer.fadeOutAllNonPersistent()}get rippleConfig(){return{centered:this.centered,radius:this.radius,color:this.color,animation:ve(ve(ve({},this._globalOptions.animation),this._animationMode==="NoopAnimations"?{enterDuration:0,exitDuration:0}:{}),this.animation),terminateOnPointerUp:this._globalOptions.terminateOnPointerUp}}get rippleDisabled(){return this.disabled||!!this._globalOptions.disabled}_setupTriggerEventsIfEnabled(){!this.disabled&&this._isInitialized&&this._rippleRenderer.setupTriggerEvents(this.trigger)}launch(e,n=0,r){return typeof e=="number"?this._rippleRenderer.fadeInRipple(e,n,ve(ve({},this.rippleConfig),r)):this._rippleRenderer.fadeInRipple(0,0,ve(ve({},this.rippleConfig),e))}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(_e),x(dt),x(K_,8),x(Ut,8))}}static{this.\u0275dir=J({type:i,selectors:[["","mat-ripple",""],["","matRipple",""]],hostAttrs:[1,"mat-ripple"],hostVars:2,hostBindings:function(n,r){n&2&&le("mat-ripple-unbounded",r.unbounded)},inputs:{color:[H.None,"matRippleColor","color"],unbounded:[H.None,"matRippleUnbounded","unbounded"],centered:[H.None,"matRippleCentered","centered"],radius:[H.None,"matRippleRadius","radius"],animation:[H.None,"matRippleAnimation","animation"],disabled:[H.None,"matRippleDisabled","disabled"],trigger:[H.None,"matRippleTrigger","trigger"]},exportAs:["matRipple"],standalone:!0})}}return i})(),ou=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[ze,ze]})}}return i})(),HR=(()=>{class i{constructor(e){this._animationMode=e,this.state="unchecked",this.disabled=!1,this.appearance="full"}static{this.\u0275fac=function(n){return new(n||i)(x(Ut,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-pseudo-checkbox"]],hostAttrs:[1,"mat-pseudo-checkbox"],hostVars:12,hostBindings:function(n,r){n&2&&le("mat-pseudo-checkbox-indeterminate",r.state==="indeterminate")("mat-pseudo-checkbox-checked",r.state==="checked")("mat-pseudo-checkbox-disabled",r.disabled)("mat-pseudo-checkbox-minimal",r.appearance==="minimal")("mat-pseudo-checkbox-full",r.appearance==="full")("_mat-animation-noopable",r._animationMode==="NoopAnimations")},inputs:{state:"state",disabled:"disabled",appearance:"appearance"},standalone:!0,features:[Re],decls:0,vars:0,template:function(n,r){},styles:['.mat-pseudo-checkbox{border-radius:2px;cursor:pointer;display:inline-block;vertical-align:middle;box-sizing:border-box;position:relative;flex-shrink:0;transition:border-color 90ms cubic-bezier(0, 0, 0.2, 0.1),background-color 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox::after{position:absolute;opacity:0;content:"";border-bottom:2px solid currentColor;transition:opacity 90ms cubic-bezier(0, 0, 0.2, 0.1)}.mat-pseudo-checkbox._mat-animation-noopable{transition:none !important;animation:none !important}.mat-pseudo-checkbox._mat-animation-noopable::after{transition:none}.mat-pseudo-checkbox-disabled{cursor:default}.mat-pseudo-checkbox-indeterminate::after{left:1px;opacity:1;border-radius:2px}.mat-pseudo-checkbox-checked::after{left:1px;border-left:2px solid currentColor;transform:rotate(-45deg);opacity:1;box-sizing:content-box}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-minimal-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox-full{border-color:var(--mat-full-pseudo-checkbox-unselected-icon-color);border-width:2px;border-style:solid}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-disabled{border-color:var(--mat-full-pseudo-checkbox-disabled-unselected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate{background-color:var(--mat-full-pseudo-checkbox-selected-icon-color);border-color:rgba(0,0,0,0)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{color:var(--mat-full-pseudo-checkbox-selected-checkmark-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled{background-color:var(--mat-full-pseudo-checkbox-disabled-selected-icon-color)}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked.mat-pseudo-checkbox-disabled::after,.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate.mat-pseudo-checkbox-disabled::after{color:var(--mat-full-pseudo-checkbox-disabled-selected-checkmark-color)}.mat-pseudo-checkbox{width:18px;height:18px}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-checked::after{width:14px;height:6px;transform-origin:center;top:-4.2426406871px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-minimal.mat-pseudo-checkbox-indeterminate::after{top:8px;width:16px}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-checked::after{width:10px;height:4px;transform-origin:center;top:-2.8284271247px;left:0;bottom:0;right:0;margin:auto}.mat-pseudo-checkbox-full.mat-pseudo-checkbox-indeterminate::after{top:6px;width:12px}'],encapsulation:2,changeDetection:0})}}return i})(),qR=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[ze]})}}return i})(),WR=new te("MAT_OPTION_PARENT_COMPONENT");var GR=new te("MatOptgroup");var j0e=0,jR=class{constructor(t,e=!1){this.source=t,this.isUserInput=e}},xC=(()=>{class i{get multiple(){return this._parent&&this._parent.multiple}get selected(){return this._selected}get disabled(){return this.group&&this.group.disabled||this._disabled}set disabled(e){this._disabled=e}get disableRipple(){return!!(this._parent&&this._parent.disableRipple)}get hideSingleSelectionIndicator(){return!!(this._parent&&this._parent.hideSingleSelectionIndicator)}constructor(e,n,r,s){this._element=e,this._changeDetectorRef=n,this._parent=r,this.group=s,this._selected=!1,this._active=!1,this._disabled=!1,this._mostRecentViewValue="",this.id=`mat-option-${j0e++}`,this.onSelectionChange=new ue,this._stateChanges=new ke}get active(){return this._active}get viewValue(){return(this._text?.nativeElement.textContent||"").trim()}select(e=!0){this._selected||(this._selected=!0,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}deselect(e=!0){this._selected&&(this._selected=!1,this._changeDetectorRef.markForCheck(),e&&this._emitSelectionChangeEvent())}focus(e,n){let r=this._getHostElement();typeof r.focus=="function"&&r.focus(n)}setActiveStyles(){this._active||(this._active=!0,this._changeDetectorRef.markForCheck())}setInactiveStyles(){this._active&&(this._active=!1,this._changeDetectorRef.markForCheck())}getLabel(){return this.viewValue}_handleKeydown(e){(e.keyCode===13||e.keyCode===32)&&!Di(e)&&(this._selectViaInteraction(),e.preventDefault())}_selectViaInteraction(){this.disabled||(this._selected=this.multiple?!this._selected:!0,this._changeDetectorRef.markForCheck(),this._emitSelectionChangeEvent(!0))}_getTabIndex(){return this.disabled?"-1":"0"}_getHostElement(){return this._element.nativeElement}ngAfterViewChecked(){if(this._selected){let e=this.viewValue;e!==this._mostRecentViewValue&&(this._mostRecentViewValue&&this._stateChanges.next(),this._mostRecentViewValue=e)}}ngOnDestroy(){this._stateChanges.complete()}_emitSelectionChangeEvent(e=!1){this.onSelectionChange.emit(new jR(this,e))}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(mt),x(WR,8),x(GR,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-option"]],viewQuery:function(n,r){if(n&1&&$e(S0e,7),n&2){let s;ye(s=xe())&&(r._text=s.first)}},hostAttrs:["role","option",1,"mat-mdc-option","mdc-list-item"],hostVars:11,hostBindings:function(n,r){n&1&&$("click",function(){return r._selectViaInteraction()})("keydown",function(o){return r._handleKeydown(o)}),n&2&&(nr("id",r.id),Se("aria-selected",r.selected)("aria-disabled",r.disabled.toString()),le("mdc-list-item--selected",r.selected)("mat-mdc-option-multiple",r.multiple)("mat-mdc-option-active",r.active)("mdc-list-item--disabled",r.disabled))},inputs:{value:"value",id:"id",disabled:[H.HasDecoratorInputTransform,"disabled","disabled",be]},outputs:{onSelectionChange:"onSelectionChange"},exportAs:["matOption"],standalone:!0,features:[Ge,Re],ngContentSelectors:E0e,decls:8,vars:5,consts:[["text",""],["aria-hidden","true",1,"mat-mdc-option-pseudo-checkbox",3,"disabled","state"],[1,"mdc-list-item__primary-text"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"cdk-visually-hidden"],["aria-hidden","true","mat-ripple","",1,"mat-mdc-option-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled"]],template:function(n,r){n&1&&(nt(k0e),Y(0,T0e,1,2,"mat-pseudo-checkbox",1),Ee(1),f(2,"span",2,0),Ee(4,1),p(),Y(5,I0e,1,1,"mat-pseudo-checkbox",3)(6,D0e,2,1,"span",4),j(7,"div",5)),n&2&&(et(0,r.multiple?0:-1),g(5),et(5,!r.multiple&&r.selected&&!r.hideSingleSelectionIndicator?5:-1),g(),et(6,r.group&&r.group._inert?6:-1),g(),z("matRippleTrigger",r._getHostElement())("matRippleDisabled",r.disabled||r.disableRipple))},dependencies:[HR,Sa],styles:['.mat-mdc-option{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;padding-left:16px;padding-right:16px;-webkit-user-select:none;user-select:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;cursor:pointer;-webkit-tap-highlight-color:rgba(0,0,0,0);color:var(--mat-option-label-text-color);font-family:var(--mat-option-label-text-font);line-height:var(--mat-option-label-text-line-height);font-size:var(--mat-option-label-text-size);letter-spacing:var(--mat-option-label-text-tracking);font-weight:var(--mat-option-label-text-weight);min-height:48px}.mat-mdc-option:focus{outline:none}[dir=rtl] .mat-mdc-option,.mat-mdc-option[dir=rtl]{padding-left:16px;padding-right:16px}.mat-mdc-option:hover:not(.mdc-list-item--disabled){background-color:var(--mat-option-hover-state-layer-color)}.mat-mdc-option:focus.mdc-list-item,.mat-mdc-option.mat-mdc-option-active.mdc-list-item{background-color:var(--mat-option-focus-state-layer-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled) .mdc-list-item__primary-text{color:var(--mat-option-selected-state-label-text-color)}.mat-mdc-option.mdc-list-item--selected:not(.mdc-list-item--disabled):not(.mat-mdc-option-multiple){background-color:var(--mat-option-selected-state-layer-color)}.mat-mdc-option.mdc-list-item{align-items:center;background:rgba(0,0,0,0)}.mat-mdc-option.mdc-list-item--disabled{cursor:default;pointer-events:none}.mat-mdc-option.mdc-list-item--disabled .mat-mdc-option-pseudo-checkbox,.mat-mdc-option.mdc-list-item--disabled .mdc-list-item__primary-text,.mat-mdc-option.mdc-list-item--disabled>mat-icon{opacity:.38}.mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:32px}[dir=rtl] .mat-mdc-optgroup .mat-mdc-option:not(.mat-mdc-option-multiple){padding-left:16px;padding-right:32px}.mat-mdc-option .mat-icon,.mat-mdc-option .mat-pseudo-checkbox-full{margin-right:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-icon,[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-full{margin-right:0;margin-left:16px}.mat-mdc-option .mat-pseudo-checkbox-minimal{margin-left:16px;flex-shrink:0}[dir=rtl] .mat-mdc-option .mat-pseudo-checkbox-minimal{margin-right:16px;margin-left:0}.mat-mdc-option .mat-mdc-option-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-option .mdc-list-item__primary-text{white-space:normal;font-size:inherit;font-weight:inherit;letter-spacing:inherit;line-height:inherit;font-family:inherit;text-decoration:inherit;text-transform:inherit;margin-right:auto}[dir=rtl] .mat-mdc-option .mdc-list-item__primary-text{margin-right:0;margin-left:auto}.cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}[dir=rtl] .cdk-high-contrast-active .mat-mdc-option.mdc-list-item--selected:not(.mat-mdc-option-multiple)::after{right:auto;left:16px}.mat-mdc-option-multiple{--mdc-list-list-item-selected-container-color:var(--mdc-list-list-item-container-color, transparent)}.mat-mdc-option-active .mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return i})();function p7(i,t,e){if(e.length){let n=t.toArray(),r=e.toArray(),s=0;for(let o=0;o<i+1;o++)n[o].group&&n[o].group===r[s]&&s++;return s}return 0}function g7(i,t,e,n){return i<e?i:i+t>e+n?Math.max(0,i-n+t):e}var $R=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[ou,ze,qR]})}}return i})(),u7={capture:!0},h7=["focus","click","mouseenter","touchstart"],LR="mat-ripple-loader-uninitialized",BR="mat-ripple-loader-class-name",m7="mat-ripple-loader-centered",yC="mat-ripple-loader-disabled",_7=(()=>{class i{constructor(){this._document=He(Ze,{optional:!0}),this._animationMode=He(Ut,{optional:!0}),this._globalRippleOptions=He(K_,{optional:!0}),this._platform=He(dt),this._ngZone=He(_e),this._hosts=new Map,this._onInteraction=e=>{if(!(e.target instanceof HTMLElement))return;let r=e.target.closest(`[${LR}]`);r&&this._createRipple(r)},this._ngZone.runOutsideAngular(()=>{for(let e of h7)this._document?.addEventListener(e,this._onInteraction,u7)})}ngOnDestroy(){let e=this._hosts.keys();for(let n of e)this.destroyRipple(n);for(let n of h7)this._document?.removeEventListener(n,this._onInteraction,u7)}configureRipple(e,n){e.setAttribute(LR,""),(n.className||!e.hasAttribute(BR))&&e.setAttribute(BR,n.className||""),n.centered&&e.setAttribute(m7,""),n.disabled&&e.setAttribute(yC,"")}getRipple(e){return this._hosts.get(e)||this._createRipple(e)}setDisabled(e,n){let r=this._hosts.get(e);if(r){r.disabled=n;return}n?e.setAttribute(yC,""):e.removeAttribute(yC)}_createRipple(e){if(!this._document)return;let n=this._hosts.get(e);if(n)return n;e.querySelector(".mat-ripple")?.remove();let r=this._document.createElement("span");r.classList.add("mat-ripple",e.getAttribute(BR)),e.append(r);let s=new Sa(new fe(r),this._ngZone,this._platform,this._globalRippleOptions?this._globalRippleOptions:void 0,this._animationMode?this._animationMode:void 0);return s._isInitialized=!0,s.trigger=e,s.centered=e.hasAttribute(m7),s.disabled=e.hasAttribute(yC),this.attachRipple(e,s),s}attachRipple(e,n){e.removeAttribute(LR),this._hosts.set(e,n)}destroyRipple(e){let n=this._hosts.get(e);n&&(n.ngOnDestroy(),this._hosts.delete(e))}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),wC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=ae({type:i,selectors:[["div","mat-internal-form-field",""]],hostAttrs:[1,"mdc-form-field","mat-internal-form-field"],hostVars:2,hostBindings:function(n,r){n&2&&le("mdc-form-field--align-end",r.labelPosition==="before")},inputs:{labelPosition:"labelPosition"},standalone:!0,features:[Re],attrs:M0e,ngContentSelectors:A0e,decls:1,vars:0,template:function(n,r){n&1&&(nt(),Ee(0))},styles:[".mdc-form-field{display:inline-flex;align-items:center;vertical-align:middle}.mdc-form-field[hidden]{display:none}.mdc-form-field>label{margin-left:0;margin-right:auto;padding-left:4px;padding-right:0;order:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{margin-left:auto;margin-right:0}[dir=rtl] .mdc-form-field>label,.mdc-form-field>label[dir=rtl]{padding-left:0;padding-right:4px}.mdc-form-field--nowrap>label{text-overflow:ellipsis;overflow:hidden;white-space:nowrap}.mdc-form-field--align-end>label{margin-left:auto;margin-right:0;padding-left:0;padding-right:4px;order:-1}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{margin-left:0;margin-right:auto}[dir=rtl] .mdc-form-field--align-end>label,.mdc-form-field--align-end>label[dir=rtl]{padding-left:4px;padding-right:0}.mdc-form-field--space-between{justify-content:space-between}.mdc-form-field--space-between>label{margin:0}[dir=rtl] .mdc-form-field--space-between>label,.mdc-form-field--space-between>label[dir=rtl]{margin:0}.mdc-form-field{font-family:var(--mdc-form-field-label-text-font);line-height:var(--mdc-form-field-label-text-line-height);font-size:var(--mdc-form-field-label-text-size);font-weight:var(--mdc-form-field-label-text-weight);letter-spacing:var(--mdc-form-field-label-text-tracking);color:var(--mdc-form-field-label-text-color)}.mat-internal-form-field{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased}"],encapsulation:2,changeDetection:0})}}return i})();var U0e=["*"],SC;function H0e(){if(SC===void 0&&(SC=null,typeof window<"u")){let i=window;i.trustedTypes!==void 0&&(SC=i.trustedTypes.createPolicy("angular#components",{createHTML:t=>t}))}return SC}function Y_(i){return H0e()?.createHTML(i)||i}function b7(i){return Error(`Unable to find icon with the name "${i}"`)}function q0e(){return Error("Could not find HttpClient provider for use with Angular Material icons. Please include the HttpClientModule from @angular/common/http in your app imports.")}function v7(i){return Error(`The URL provided to MatIconRegistry was not trusted as a resource URL via Angular's DomSanitizer. Attempted URL was "${i}".`)}function y7(i){return Error(`The literal provided to MatIconRegistry was not trusted as safe HTML by Angular's DomSanitizer. Attempted literal was "${i}".`)}var ka=class{constructor(t,e,n){this.url=t,this.svgText=e,this.options=n}},W0e=(()=>{class i{constructor(e,n,r,s){this._httpClient=e,this._sanitizer=n,this._errorHandler=s,this._svgIconConfigs=new Map,this._iconSetConfigs=new Map,this._cachedIconsByUrl=new Map,this._inProgressUrlFetches=new Map,this._fontCssClassesByAlias=new Map,this._resolvers=[],this._defaultFontSetClass=["material-icons","mat-ligature-font"],this._document=r}addSvgIcon(e,n,r){return this.addSvgIconInNamespace("",e,n,r)}addSvgIconLiteral(e,n,r){return this.addSvgIconLiteralInNamespace("",e,n,r)}addSvgIconInNamespace(e,n,r,s){return this._addSvgIconConfig(e,n,new ka(r,null,s))}addSvgIconResolver(e){return this._resolvers.push(e),this}addSvgIconLiteralInNamespace(e,n,r,s){let o=this._sanitizer.sanitize(Tu.HTML,r);if(!o)throw y7(r);let a=Y_(o);return this._addSvgIconConfig(e,n,new ka("",a,s))}addSvgIconSet(e,n){return this.addSvgIconSetInNamespace("",e,n)}addSvgIconSetLiteral(e,n){return this.addSvgIconSetLiteralInNamespace("",e,n)}addSvgIconSetInNamespace(e,n,r){return this._addSvgIconSetConfig(e,new ka(n,null,r))}addSvgIconSetLiteralInNamespace(e,n,r){let s=this._sanitizer.sanitize(Tu.HTML,n);if(!s)throw y7(n);let o=Y_(s);return this._addSvgIconSetConfig(e,new ka("",o,r))}registerFontClassAlias(e,n=e){return this._fontCssClassesByAlias.set(e,n),this}classNameForFontAlias(e){return this._fontCssClassesByAlias.get(e)||e}setDefaultFontSetClass(...e){return this._defaultFontSetClass=e,this}getDefaultFontSetClass(){return this._defaultFontSetClass}getSvgIconFromUrl(e){let n=this._sanitizer.sanitize(Tu.RESOURCE_URL,e);if(!n)throw v7(e);let r=this._cachedIconsByUrl.get(n);return r?We(kC(r)):this._loadSvgIconFromConfig(new ka(e,null)).pipe(Va(s=>this._cachedIconsByUrl.set(n,s)),Ue(s=>kC(s)))}getNamedSvgIcon(e,n=""){let r=x7(n,e),s=this._svgIconConfigs.get(r);if(s)return this._getSvgFromConfig(s);if(s=this._getIconConfigFromResolvers(n,e),s)return this._svgIconConfigs.set(r,s),this._getSvgFromConfig(s);let o=this._iconSetConfigs.get(n);return o?this._getSvgFromIconSetConfigs(e,o):BN(b7(r))}ngOnDestroy(){this._resolvers=[],this._svgIconConfigs.clear(),this._iconSetConfigs.clear(),this._cachedIconsByUrl.clear()}_getSvgFromConfig(e){return e.svgText?We(kC(this._svgElementFromConfig(e))):this._loadSvgIconFromConfig(e).pipe(Ue(n=>kC(n)))}_getSvgFromIconSetConfigs(e,n){let r=this._extractIconWithNameFromAnySet(e,n);if(r)return We(r);let s=n.filter(o=>!o.svgText).map(o=>this._loadSvgIconSetFromConfig(o).pipe(Vc(a=>{let c=`Loading icon set URL: ${this._sanitizer.sanitize(Tu.RESOURCE_URL,o.url)} failed: ${a.message}`;return this._errorHandler.handleError(new Error(c)),We(null)})));return Ba(s).pipe(Ue(()=>{let o=this._extractIconWithNameFromAnySet(e,n);if(!o)throw b7(e);return o}))}_extractIconWithNameFromAnySet(e,n){for(let r=n.length-1;r>=0;r--){let s=n[r];if(s.svgText&&s.svgText.toString().indexOf(e)>-1){let o=this._svgElementFromConfig(s),a=this._extractSvgIconFromSet(o,e,s.options);if(a)return a}}return null}_loadSvgIconFromConfig(e){return this._fetchIcon(e).pipe(Va(n=>e.svgText=n),Ue(()=>this._svgElementFromConfig(e)))}_loadSvgIconSetFromConfig(e){return e.svgText?We(null):this._fetchIcon(e).pipe(Va(n=>e.svgText=n))}_extractSvgIconFromSet(e,n,r){let s=e.querySelector(`[id="${n}"]`);if(!s)return null;let o=s.cloneNode(!0);if(o.removeAttribute("id"),o.nodeName.toLowerCase()==="svg")return this._setSvgAttributes(o,r);if(o.nodeName.toLowerCase()==="symbol")return this._setSvgAttributes(this._toSvgElement(o),r);let a=this._svgElementFromString(Y_("<svg></svg>"));return a.appendChild(o),this._setSvgAttributes(a,r)}_svgElementFromString(e){let n=this._document.createElement("DIV");n.innerHTML=e;let r=n.querySelector("svg");if(!r)throw Error("<svg> tag not found");return r}_toSvgElement(e){let n=this._svgElementFromString(Y_("<svg></svg>")),r=e.attributes;for(let s=0;s<r.length;s++){let{name:o,value:a}=r[s];o!=="id"&&n.setAttribute(o,a)}for(let s=0;s<e.childNodes.length;s++)e.childNodes[s].nodeType===this._document.ELEMENT_NODE&&n.appendChild(e.childNodes[s].cloneNode(!0));return n}_setSvgAttributes(e,n){return e.setAttribute("fit",""),e.setAttribute("height","100%"),e.setAttribute("width","100%"),e.setAttribute("preserveAspectRatio","xMidYMid meet"),e.setAttribute("focusable","false"),n&&n.viewBox&&e.setAttribute("viewBox",n.viewBox),e}_fetchIcon(e){let{url:n,options:r}=e,s=r?.withCredentials??!1;if(!this._httpClient)throw q0e();if(n==null)throw Error(`Cannot fetch icon from URL "${n}".`);let o=this._sanitizer.sanitize(Tu.RESOURCE_URL,n);if(!o)throw v7(n);let a=this._inProgressUrlFetches.get(o);if(a)return a;let l=this._httpClient.get(o,{responseType:"text",withCredentials:s}).pipe(Ue(c=>Y_(c)),zN(()=>this._inProgressUrlFetches.delete(o)),Wb());return this._inProgressUrlFetches.set(o,l),l}_addSvgIconConfig(e,n,r){return this._svgIconConfigs.set(x7(e,n),r),this}_addSvgIconSetConfig(e,n){let r=this._iconSetConfigs.get(e);return r?r.push(n):this._iconSetConfigs.set(e,[n]),this}_svgElementFromConfig(e){if(!e.svgElement){let n=this._svgElementFromString(e.svgText);this._setSvgAttributes(n,e.options),e.svgElement=n}return e.svgElement}_getIconConfigFromResolvers(e,n){for(let r=0;r<this._resolvers.length;r++){let s=this._resolvers[r](n,e);if(s)return G0e(s)?new ka(s.url,null,s.options):new ka(s,null)}}static{this.\u0275fac=function(n){return new(n||i)(V(ja,8),V(hL),V(Ze,8),V($b))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function kC(i){return i.cloneNode(!0)}function x7(i,t){return i+":"+t}function G0e(i){return!!(i.url&&i.options)}var $0e=new te("MAT_ICON_DEFAULT_OPTIONS"),K0e=new te("mat-icon-location",{providedIn:"root",factory:Y0e});function Y0e(){let i=He(Ze),t=i?i.location:null;return{getPathname:()=>t?t.pathname+t.search:""}}var C7=["clip-path","color-profile","src","cursor","fill","filter","marker","marker-start","marker-mid","marker-end","mask","stroke"],Q0e=C7.map(i=>`[${i}]`).join(", "),X0e=/^url\(['"]?#(.*?)['"]?\)$/,Yi=(()=>{class i{get color(){return this._color||this._defaultColor}set color(e){this._color=e}get svgIcon(){return this._svgIcon}set svgIcon(e){e!==this._svgIcon&&(e?this._updateSvgIcon(e):this._svgIcon&&this._clearSvgElement(),this._svgIcon=e)}get fontSet(){return this._fontSet}set fontSet(e){let n=this._cleanupFontValue(e);n!==this._fontSet&&(this._fontSet=n,this._updateFontIconClasses())}get fontIcon(){return this._fontIcon}set fontIcon(e){let n=this._cleanupFontValue(e);n!==this._fontIcon&&(this._fontIcon=n,this._updateFontIconClasses())}constructor(e,n,r,s,o,a){this._elementRef=e,this._iconRegistry=n,this._location=s,this._errorHandler=o,this.inline=!1,this._previousFontSetClass=[],this._currentIconFetch=At.EMPTY,a&&(a.color&&(this.color=this._defaultColor=a.color),a.fontSet&&(this.fontSet=a.fontSet)),r||e.nativeElement.setAttribute("aria-hidden","true")}_splitIconName(e){if(!e)return["",""];let n=e.split(":");switch(n.length){case 1:return["",n[0]];case 2:return n;default:throw Error(`Invalid icon name: "${e}"`)}}ngOnInit(){this._updateFontIconClasses()}ngAfterViewChecked(){let e=this._elementsWithExternalReferences;if(e&&e.size){let n=this._location.getPathname();n!==this._previousPath&&(this._previousPath=n,this._prependPathToReferences(n))}}ngOnDestroy(){this._currentIconFetch.unsubscribe(),this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear()}_usingFontIcon(){return!this.svgIcon}_setSvgElement(e){this._clearSvgElement();let n=this._location.getPathname();this._previousPath=n,this._cacheChildrenWithExternalReferences(e),this._prependPathToReferences(n),this._elementRef.nativeElement.appendChild(e)}_clearSvgElement(){let e=this._elementRef.nativeElement,n=e.childNodes.length;for(this._elementsWithExternalReferences&&this._elementsWithExternalReferences.clear();n--;){let r=e.childNodes[n];(r.nodeType!==1||r.nodeName.toLowerCase()==="svg")&&r.remove()}}_updateFontIconClasses(){if(!this._usingFontIcon())return;let e=this._elementRef.nativeElement,n=(this.fontSet?this._iconRegistry.classNameForFontAlias(this.fontSet).split(/ +/):this._iconRegistry.getDefaultFontSetClass()).filter(r=>r.length>0);this._previousFontSetClass.forEach(r=>e.classList.remove(r)),n.forEach(r=>e.classList.add(r)),this._previousFontSetClass=n,this.fontIcon!==this._previousFontIconClass&&!n.includes("mat-ligature-font")&&(this._previousFontIconClass&&e.classList.remove(this._previousFontIconClass),this.fontIcon&&e.classList.add(this.fontIcon),this._previousFontIconClass=this.fontIcon)}_cleanupFontValue(e){return typeof e=="string"?e.trim().split(" ")[0]:e}_prependPathToReferences(e){let n=this._elementsWithExternalReferences;n&&n.forEach((r,s)=>{r.forEach(o=>{s.setAttribute(o.name,`url('${e}#${o.value}')`)})})}_cacheChildrenWithExternalReferences(e){let n=e.querySelectorAll(Q0e),r=this._elementsWithExternalReferences=this._elementsWithExternalReferences||new Map;for(let s=0;s<n.length;s++)C7.forEach(o=>{let a=n[s],l=a.getAttribute(o),c=l?l.match(X0e):null;if(c){let d=r.get(a);d||(d=[],r.set(a,d)),d.push({name:o,value:c[1]})}})}_updateSvgIcon(e){if(this._svgNamespace=null,this._svgName=null,this._currentIconFetch.unsubscribe(),e){let[n,r]=this._splitIconName(e);n&&(this._svgNamespace=n),r&&(this._svgName=r),this._currentIconFetch=this._iconRegistry.getNamedSvgIcon(r,n).pipe(Pt(1)).subscribe(s=>this._setSvgElement(s),s=>{let o=`Error retrieving icon ${n}:${r}! ${s.message}`;this._errorHandler.handleError(new Error(o))})}}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(W0e),yn("aria-hidden"),x(K0e),x($b),x($0e,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-icon"]],hostAttrs:["role","img",1,"mat-icon","notranslate"],hostVars:10,hostBindings:function(n,r){n&2&&(Se("data-mat-icon-type",r._usingFontIcon()?"font":"svg")("data-mat-icon-name",r._svgName||r.fontIcon)("data-mat-icon-namespace",r._svgNamespace||r.fontSet)("fontIcon",r._usingFontIcon()?r.fontIcon:null),Hn(r.color?"mat-"+r.color:""),le("mat-icon-inline",r.inline)("mat-icon-no-color",r.color!=="primary"&&r.color!=="accent"&&r.color!=="warn"))},inputs:{color:"color",inline:[H.HasDecoratorInputTransform,"inline","inline",be],svgIcon:"svgIcon",fontSet:"fontSet",fontIcon:"fontIcon"},exportAs:["matIcon"],standalone:!0,features:[Ge,Re],ngContentSelectors:U0e,decls:1,vars:0,template:function(n,r){n&1&&(nt(),Ee(0))},styles:["mat-icon,mat-icon.mat-primary,mat-icon.mat-accent,mat-icon.mat-warn{color:var(--mat-icon-color)}.mat-icon{-webkit-user-select:none;user-select:none;background-repeat:no-repeat;display:inline-block;fill:currentColor;height:24px;width:24px;overflow:hidden}.mat-icon.mat-icon-inline{font-size:inherit;height:inherit;line-height:inherit;width:inherit}.mat-icon.mat-ligature-font[fontIcon]::before{content:attr(fontIcon)}[dir=rtl] .mat-icon-rtl-mirror{transform:scale(-1, 1)}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon{display:block}.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-prefix .mat-icon-button .mat-icon,.mat-form-field:not(.mat-form-field-appearance-legacy) .mat-form-field-suffix .mat-icon-button .mat-icon{margin:auto}"],encapsulation:2,changeDetection:0})}}return i})(),KR=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[ze,ze]})}}return i})();function EC(i){return i&&typeof i.connect=="function"&&!(i instanceof NN)}var qm=function(i){return i[i.REPLACED=0]="REPLACED",i[i.INSERTED=1]="INSERTED",i[i.MOVED=2]="MOVED",i[i.REMOVED=3]="REMOVED",i}(qm||{}),Q_=new te("_ViewRepeater"),Wm=class{applyChanges(t,e,n,r,s){t.forEachOperation((o,a,l)=>{let c,d;if(o.previousIndex==null){let u=n(o,a,l);c=e.createEmbeddedView(u.templateRef,u.context,u.index),d=qm.INSERTED}else l==null?(e.remove(a),d=qm.REMOVED):(c=e.get(a),e.move(c,l),d=qm.MOVED);s&&s({context:c?.context,operation:d,record:o})})}detach(){}};var Gm=class{get selected(){return this._selected||(this._selected=Array.from(this._selection.values())),this._selected}constructor(t=!1,e,n=!0,r){this._multiple=t,this._emitChanges=n,this.compareWith=r,this._selection=new Set,this._deselectedToEmit=[],this._selectedToEmit=[],this.changed=new ke,e&&e.length&&(t?e.forEach(s=>this._markSelected(s)):this._markSelected(e[0]),this._selectedToEmit.length=0)}select(...t){this._verifyValueAssignment(t),t.forEach(n=>this._markSelected(n));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}deselect(...t){this._verifyValueAssignment(t),t.forEach(n=>this._unmarkSelected(n));let e=this._hasQueuedChanges();return this._emitChangeEvent(),e}setSelection(...t){this._verifyValueAssignment(t);let e=this.selected,n=new Set(t);t.forEach(s=>this._markSelected(s)),e.filter(s=>!n.has(this._getConcreteValue(s,n))).forEach(s=>this._unmarkSelected(s));let r=this._hasQueuedChanges();return this._emitChangeEvent(),r}toggle(t){return this.isSelected(t)?this.deselect(t):this.select(t)}clear(t=!0){this._unmarkAll();let e=this._hasQueuedChanges();return t&&this._emitChangeEvent(),e}isSelected(t){return this._selection.has(this._getConcreteValue(t))}isEmpty(){return this._selection.size===0}hasValue(){return!this.isEmpty()}sort(t){this._multiple&&this.selected&&this._selected.sort(t)}isMultipleSelection(){return this._multiple}_emitChangeEvent(){this._selected=null,(this._selectedToEmit.length||this._deselectedToEmit.length)&&(this.changed.next({source:this,added:this._selectedToEmit,removed:this._deselectedToEmit}),this._deselectedToEmit=[],this._selectedToEmit=[])}_markSelected(t){t=this._getConcreteValue(t),this.isSelected(t)||(this._multiple||this._unmarkAll(),this.isSelected(t)||this._selection.add(t),this._emitChanges&&this._selectedToEmit.push(t))}_unmarkSelected(t){t=this._getConcreteValue(t),this.isSelected(t)&&(this._selection.delete(t),this._emitChanges&&this._deselectedToEmit.push(t))}_unmarkAll(){this.isEmpty()||this._selection.forEach(t=>this._unmarkSelected(t))}_verifyValueAssignment(t){t.length>1&&this._multiple}_hasQueuedChanges(){return!!(this._deselectedToEmit.length||this._selectedToEmit.length)}_getConcreteValue(t,e){if(this.compareWith){e=e??this._selection;for(let n of e)if(this.compareWith(t,n))return n;return t}else return t}};var TC=(()=>{class i{constructor(){this._listeners=[]}notify(e,n){for(let r of this._listeners)r(e,n)}listen(e){return this._listeners.push(e),()=>{this._listeners=this._listeners.filter(n=>e!==n)}}ngOnDestroy(){this._listeners=[]}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Z0e=20,k7=(()=>{class i{constructor(e,n,r){this._ngZone=e,this._platform=n,this._scrolled=new ke,this._globalSubscription=null,this._scrolledCount=0,this.scrollContainers=new Map,this._document=r}register(e){this.scrollContainers.has(e)||this.scrollContainers.set(e,e.elementScrolled().subscribe(()=>this._scrolled.next(e)))}deregister(e){let n=this.scrollContainers.get(e);n&&(n.unsubscribe(),this.scrollContainers.delete(e))}scrolled(e=Z0e){return this._platform.isBrowser?new vn(n=>{this._globalSubscription||this._addGlobalListener();let r=e>0?this._scrolled.pipe(oS(e)).subscribe(n):this._scrolled.subscribe(n);return this._scrolledCount++,()=>{r.unsubscribe(),this._scrolledCount--,this._scrolledCount||this._removeGlobalListener()}}):We()}ngOnDestroy(){this._removeGlobalListener(),this.scrollContainers.forEach((e,n)=>this.deregister(n)),this._scrolled.complete()}ancestorScrolled(e,n){let r=this.getAncestorScrollContainers(e);return this.scrolled(n).pipe(Ot(s=>!s||r.indexOf(s)>-1))}getAncestorScrollContainers(e){let n=[];return this.scrollContainers.forEach((r,s)=>{this._scrollableContainsElement(s,e)&&n.push(s)}),n}_getWindow(){return this._document.defaultView||window}_scrollableContainsElement(e,n){let r=gr(n),s=e.getElementRef().nativeElement;do if(r==s)return!0;while(r=r.parentElement);return!1}_addGlobalListener(){this._globalSubscription=this._ngZone.runOutsideAngular(()=>{let e=this._getWindow();return sS(e.document,"scroll").subscribe(()=>this._scrolled.next())})}_removeGlobalListener(){this._globalSubscription&&(this._globalSubscription.unsubscribe(),this._globalSubscription=null)}static{this.\u0275fac=function(n){return new(n||i)(V(_e),V(dt),V(Ze,8))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var J0e=20,au=(()=>{class i{constructor(e,n,r){this._platform=e,this._change=new ke,this._changeListener=s=>{this._change.next(s)},this._document=r,n.runOutsideAngular(()=>{if(e.isBrowser){let s=this._getWindow();s.addEventListener("resize",this._changeListener),s.addEventListener("orientationchange",this._changeListener)}this.change().subscribe(()=>this._viewportSize=null)})}ngOnDestroy(){if(this._platform.isBrowser){let e=this._getWindow();e.removeEventListener("resize",this._changeListener),e.removeEventListener("orientationchange",this._changeListener)}this._change.complete()}getViewportSize(){this._viewportSize||this._updateViewportSize();let e={width:this._viewportSize.width,height:this._viewportSize.height};return this._platform.isBrowser||(this._viewportSize=null),e}getViewportRect(){let e=this.getViewportScrollPosition(),{width:n,height:r}=this.getViewportSize();return{top:e.top,left:e.left,bottom:e.top+r,right:e.left+n,height:r,width:n}}getViewportScrollPosition(){if(!this._platform.isBrowser)return{top:0,left:0};let e=this._document,n=this._getWindow(),r=e.documentElement,s=r.getBoundingClientRect(),o=-s.top||e.body.scrollTop||n.scrollY||r.scrollTop||0,a=-s.left||e.body.scrollLeft||n.scrollX||r.scrollLeft||0;return{top:o,left:a}}change(e=J0e){return e>0?this._change.pipe(oS(e)):this._change}_getWindow(){return this._document.defaultView||window}_updateViewportSize(){let e=this._getWindow();this._viewportSize=this._platform.isBrowser?{width:e.innerWidth,height:e.innerHeight}:{width:0,height:0}}static{this.\u0275fac=function(n){return new(n||i)(V(dt),V(_e),V(Ze,8))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var $m=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({})}}return i})(),X_=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[lc,$m,lc,$m]})}}return i})();var Z_=class{attach(t){return this._attachedHost=t,t.attach(this)}detach(){let t=this._attachedHost;t!=null&&(this._attachedHost=null,t.detach())}get isAttached(){return this._attachedHost!=null}setAttachedHost(t){this._attachedHost=t}},Ea=class extends Z_{constructor(t,e,n,r,s){super(),this.component=t,this.viewContainerRef=e,this.injector=n,this.componentFactoryResolver=r,this.projectableNodes=s}},Vo=class extends Z_{constructor(t,e,n,r){super(),this.templateRef=t,this.viewContainerRef=e,this.context=n,this.injector=r}get origin(){return this.templateRef.elementRef}attach(t,e=this.context){return this.context=e,super.attach(t)}detach(){return this.context=void 0,super.detach()}},QR=class extends Z_{constructor(t){super(),this.element=t instanceof fe?t.nativeElement:t}},Km=class{constructor(){this._isDisposed=!1,this.attachDomPortal=null}hasAttached(){return!!this._attachedPortal}attach(t){if(t instanceof Ea)return this._attachedPortal=t,this.attachComponentPortal(t);if(t instanceof Vo)return this._attachedPortal=t,this.attachTemplatePortal(t);if(this.attachDomPortal&&t instanceof QR)return this._attachedPortal=t,this.attachDomPortal(t)}detach(){this._attachedPortal&&(this._attachedPortal.setAttachedHost(null),this._attachedPortal=null),this._invokeDisposeFn()}dispose(){this.hasAttached()&&this.detach(),this._invokeDisposeFn(),this._isDisposed=!0}setDisposeFn(t){this._disposeFn=t}_invokeDisposeFn(){this._disposeFn&&(this._disposeFn(),this._disposeFn=null)}};var IC=class extends Km{constructor(t,e,n,r,s){super(),this.outletElement=t,this._componentFactoryResolver=e,this._appRef=n,this._defaultInjector=r,this.attachDomPortal=o=>{this._document;let a=o.element;a.parentNode;let l=this._document.createComment("dom-portal");a.parentNode.insertBefore(l,a),this.outletElement.appendChild(a),this._attachedPortal=o,super.setDisposeFn(()=>{l.parentNode&&l.parentNode.replaceChild(a,l)})},this._document=s}attachComponentPortal(t){let n=(t.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(t.component),r;return t.viewContainerRef?(r=t.viewContainerRef.createComponent(n,t.viewContainerRef.length,t.injector||t.viewContainerRef.injector,t.projectableNodes||void 0),this.setDisposeFn(()=>r.destroy())):(r=n.create(t.injector||this._defaultInjector||xn.NULL),this._appRef.attachView(r.hostView),this.setDisposeFn(()=>{this._appRef.viewCount>0&&this._appRef.detachView(r.hostView),r.destroy()})),this.outletElement.appendChild(this._getComponentRootNode(r)),this._attachedPortal=t,r}attachTemplatePortal(t){let e=t.viewContainerRef,n=e.createEmbeddedView(t.templateRef,t.context,{injector:t.injector});return n.rootNodes.forEach(r=>this.outletElement.appendChild(r)),n.detectChanges(),this.setDisposeFn(()=>{let r=e.indexOf(n);r!==-1&&e.remove(r)}),this._attachedPortal=t,n}dispose(){super.dispose(),this.outletElement.remove()}_getComponentRootNode(t){return t.hostView.rootNodes[0]}};var zo=(()=>{class i extends Km{constructor(e,n,r){super(),this._componentFactoryResolver=e,this._viewContainerRef=n,this._isInitialized=!1,this.attached=new ue,this.attachDomPortal=s=>{this._document;let o=s.element;o.parentNode;let a=this._document.createComment("dom-portal");s.setAttachedHost(this),o.parentNode.insertBefore(a,o),this._getRootNode().appendChild(o),this._attachedPortal=s,super.setDisposeFn(()=>{a.parentNode&&a.parentNode.replaceChild(o,a)})},this._document=r}get portal(){return this._attachedPortal}set portal(e){this.hasAttached()&&!e&&!this._isInitialized||(this.hasAttached()&&super.detach(),e&&super.attach(e),this._attachedPortal=e||null)}get attachedRef(){return this._attachedRef}ngOnInit(){this._isInitialized=!0}ngOnDestroy(){super.dispose(),this._attachedRef=this._attachedPortal=null}attachComponentPortal(e){e.setAttachedHost(this);let n=e.viewContainerRef!=null?e.viewContainerRef:this._viewContainerRef,s=(e.componentFactoryResolver||this._componentFactoryResolver).resolveComponentFactory(e.component),o=n.createComponent(s,n.length,e.injector||n.injector,e.projectableNodes||void 0);return n!==this._viewContainerRef&&this._getRootNode().appendChild(o.hostView.rootNodes[0]),super.setDisposeFn(()=>o.destroy()),this._attachedPortal=e,this._attachedRef=o,this.attached.emit(o),o}attachTemplatePortal(e){e.setAttachedHost(this);let n=this._viewContainerRef.createEmbeddedView(e.templateRef,e.context,{injector:e.injector});return super.setDisposeFn(()=>this._viewContainerRef.clear()),this._attachedPortal=e,this._attachedRef=n,this.attached.emit(n),n}_getRootNode(){let e=this._viewContainerRef.element.nativeElement;return e.nodeType===e.ELEMENT_NODE?e:e.parentNode}static{this.\u0275fac=function(n){return new(n||i)(x(Kb),x(Un),x(Ze))}}static{this.\u0275dir=J({type:i,selectors:[["","cdkPortalOutlet",""]],inputs:{portal:[H.None,"cdkPortalOutlet","portal"]},outputs:{attached:"attached"},exportAs:["cdkPortalOutlet"],standalone:!0,features:[Ve]})}}return i})();var Gs=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({})}}return i})();var E7=z9(),XR=class{constructor(t,e){this._viewportRuler=t,this._previousHTMLStyles={top:"",left:""},this._isEnabled=!1,this._document=e}attach(){}enable(){if(this._canBeEnabled()){let t=this._document.documentElement;this._previousScrollPosition=this._viewportRuler.getViewportScrollPosition(),this._previousHTMLStyles.left=t.style.left||"",this._previousHTMLStyles.top=t.style.top||"",t.style.left=ji(-this._previousScrollPosition.left),t.style.top=ji(-this._previousScrollPosition.top),t.classList.add("cdk-global-scrollblock"),this._isEnabled=!0}}disable(){if(this._isEnabled){let t=this._document.documentElement,e=this._document.body,n=t.style,r=e.style,s=n.scrollBehavior||"",o=r.scrollBehavior||"";this._isEnabled=!1,n.left=this._previousHTMLStyles.left,n.top=this._previousHTMLStyles.top,t.classList.remove("cdk-global-scrollblock"),E7&&(n.scrollBehavior=r.scrollBehavior="auto"),window.scroll(this._previousScrollPosition.left,this._previousScrollPosition.top),E7&&(n.scrollBehavior=s,r.scrollBehavior=o)}}_canBeEnabled(){if(this._document.documentElement.classList.contains("cdk-global-scrollblock")||this._isEnabled)return!1;let e=this._document.body,n=this._viewportRuler.getViewportSize();return e.scrollHeight>n.height||e.scrollWidth>n.width}};var ZR=class{constructor(t,e,n,r){this._scrollDispatcher=t,this._ngZone=e,this._viewportRuler=n,this._config=r,this._scrollSubscription=null,this._detach=()=>{this.disable(),this._overlayRef.hasAttached()&&this._ngZone.run(()=>this._overlayRef.detach())}}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(this._scrollSubscription)return;let t=this._scrollDispatcher.scrolled(0).pipe(Ot(e=>!e||!this._overlayRef.overlayElement.contains(e.getElementRef().nativeElement)));this._config&&this._config.threshold&&this._config.threshold>1?(this._initialScrollPosition=this._viewportRuler.getViewportScrollPosition().top,this._scrollSubscription=t.subscribe(()=>{let e=this._viewportRuler.getViewportScrollPosition().top;Math.abs(e-this._initialScrollPosition)>this._config.threshold?this._detach():this._overlayRef.updatePosition()})):this._scrollSubscription=t.subscribe(this._detach)}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},DC=class{enable(){}disable(){}attach(){}};function JR(i,t){return t.some(e=>{let n=i.bottom<e.top,r=i.top>e.bottom,s=i.right<e.left,o=i.left>e.right;return n||r||s||o})}function T7(i,t){return t.some(e=>{let n=i.top<e.top,r=i.bottom>e.bottom,s=i.left<e.left,o=i.right>e.right;return n||r||s||o})}var e2=class{constructor(t,e,n,r){this._scrollDispatcher=t,this._viewportRuler=e,this._ngZone=n,this._config=r,this._scrollSubscription=null}attach(t){this._overlayRef,this._overlayRef=t}enable(){if(!this._scrollSubscription){let t=this._config?this._config.scrollThrottle:0;this._scrollSubscription=this._scrollDispatcher.scrolled(t).subscribe(()=>{if(this._overlayRef.updatePosition(),this._config&&this._config.autoClose){let e=this._overlayRef.overlayElement.getBoundingClientRect(),{width:n,height:r}=this._viewportRuler.getViewportSize();JR(e,[{width:n,height:r,bottom:r,right:n,top:0,left:0}])&&(this.disable(),this._ngZone.run(()=>this._overlayRef.detach()))}})}}disable(){this._scrollSubscription&&(this._scrollSubscription.unsubscribe(),this._scrollSubscription=null)}detach(){this.disable(),this._overlayRef=null}},eve=(()=>{class i{constructor(e,n,r,s){this._scrollDispatcher=e,this._viewportRuler=n,this._ngZone=r,this.noop=()=>new DC,this.close=o=>new ZR(this._scrollDispatcher,this._ngZone,this._viewportRuler,o),this.block=()=>new XR(this._viewportRuler,this._document),this.reposition=o=>new e2(this._scrollDispatcher,this._viewportRuler,this._ngZone,o),this._document=s}static{this.\u0275fac=function(n){return new(n||i)(V(k7),V(au),V(_e),V(Ze))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),dc=class{constructor(t){if(this.scrollStrategy=new DC,this.panelClass="",this.hasBackdrop=!1,this.backdropClass="cdk-overlay-dark-backdrop",this.disposeOnNavigation=!1,t){let e=Object.keys(t);for(let n of e)t[n]!==void 0&&(this[n]=t[n])}}};var t2=class{constructor(t,e){this.connectionPair=t,this.scrollableViewProperties=e}};var O7=(()=>{class i{constructor(e){this._attachedOverlays=[],this._document=e}ngOnDestroy(){this.detach()}add(e){this.remove(e),this._attachedOverlays.push(e)}remove(e){let n=this._attachedOverlays.indexOf(e);n>-1&&this._attachedOverlays.splice(n,1),this._attachedOverlays.length===0&&this.detach()}static{this.\u0275fac=function(n){return new(n||i)(V(Ze))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),tve=(()=>{class i extends O7{constructor(e,n){super(e),this._ngZone=n,this._keydownListener=r=>{let s=this._attachedOverlays;for(let o=s.length-1;o>-1;o--)if(s[o]._keydownEvents.observers.length>0){let a=s[o]._keydownEvents;this._ngZone?this._ngZone.run(()=>a.next(r)):a.next(r);break}}}add(e){super.add(e),this._isAttached||(this._ngZone?this._ngZone.runOutsideAngular(()=>this._document.body.addEventListener("keydown",this._keydownListener)):this._document.body.addEventListener("keydown",this._keydownListener),this._isAttached=!0)}detach(){this._isAttached&&(this._document.body.removeEventListener("keydown",this._keydownListener),this._isAttached=!1)}static{this.\u0275fac=function(n){return new(n||i)(V(Ze),V(_e,8))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ive=(()=>{class i extends O7{constructor(e,n,r){super(e),this._platform=n,this._ngZone=r,this._cursorStyleIsSet=!1,this._pointerDownListener=s=>{this._pointerDownEventTarget=ps(s)},this._clickListener=s=>{let o=ps(s),a=s.type==="click"&&this._pointerDownEventTarget?this._pointerDownEventTarget:o;this._pointerDownEventTarget=null;let l=this._attachedOverlays.slice();for(let c=l.length-1;c>-1;c--){let d=l[c];if(d._outsidePointerEvents.observers.length<1||!d.hasAttached())continue;if(d.overlayElement.contains(o)||d.overlayElement.contains(a))break;let u=d._outsidePointerEvents;this._ngZone?this._ngZone.run(()=>u.next(s)):u.next(s)}}}add(e){if(super.add(e),!this._isAttached){let n=this._document.body;this._ngZone?this._ngZone.runOutsideAngular(()=>this._addEventListeners(n)):this._addEventListeners(n),this._platform.IOS&&!this._cursorStyleIsSet&&(this._cursorOriginalValue=n.style.cursor,n.style.cursor="pointer",this._cursorStyleIsSet=!0),this._isAttached=!0}}detach(){if(this._isAttached){let e=this._document.body;e.removeEventListener("pointerdown",this._pointerDownListener,!0),e.removeEventListener("click",this._clickListener,!0),e.removeEventListener("auxclick",this._clickListener,!0),e.removeEventListener("contextmenu",this._clickListener,!0),this._platform.IOS&&this._cursorStyleIsSet&&(e.style.cursor=this._cursorOriginalValue,this._cursorStyleIsSet=!1),this._isAttached=!1}}_addEventListeners(e){e.addEventListener("pointerdown",this._pointerDownListener,!0),e.addEventListener("click",this._clickListener,!0),e.addEventListener("auxclick",this._clickListener,!0),e.addEventListener("contextmenu",this._clickListener,!0)}static{this.\u0275fac=function(n){return new(n||i)(V(Ze),V(dt),V(_e,8))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Ym=(()=>{class i{constructor(e,n){this._platform=n,this._document=e}ngOnDestroy(){this._containerElement?.remove()}getContainerElement(){return this._containerElement||this._createContainer(),this._containerElement}_createContainer(){let e="cdk-overlay-container";if(this._platform.isBrowser||j_()){let r=this._document.querySelectorAll(`.${e}[platform="server"], .${e}[platform="test"]`);for(let s=0;s<r.length;s++)r[s].remove()}let n=this._document.createElement("div");n.classList.add(e),j_()?n.setAttribute("platform","test"):this._platform.isBrowser||n.setAttribute("platform","server"),this._document.body.appendChild(n),this._containerElement=n}static{this.\u0275fac=function(n){return new(n||i)(V(Ze),V(dt))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Ta=class{constructor(t,e,n,r,s,o,a,l,c,d=!1){this._portalOutlet=t,this._host=e,this._pane=n,this._config=r,this._ngZone=s,this._keyboardDispatcher=o,this._document=a,this._location=l,this._outsideClickDispatcher=c,this._animationsDisabled=d,this._backdropElement=null,this._backdropClick=new ke,this._attachments=new ke,this._detachments=new ke,this._locationChanges=At.EMPTY,this._backdropClickHandler=u=>this._backdropClick.next(u),this._backdropTransitionendHandler=u=>{this._disposeBackdrop(u.target)},this._keydownEvents=new ke,this._outsidePointerEvents=new ke,r.scrollStrategy&&(this._scrollStrategy=r.scrollStrategy,this._scrollStrategy.attach(this)),this._positionStrategy=r.positionStrategy}get overlayElement(){return this._pane}get backdropElement(){return this._backdropElement}get hostElement(){return this._host}attach(t){!this._host.parentElement&&this._previousHostParent&&this._previousHostParent.appendChild(this._host);let e=this._portalOutlet.attach(t);return this._positionStrategy&&this._positionStrategy.attach(this),this._updateStackingOrder(),this._updateElementSize(),this._updateElementDirection(),this._scrollStrategy&&this._scrollStrategy.enable(),this._ngZone.onStable.pipe(Pt(1)).subscribe(()=>{this.hasAttached()&&this.updatePosition()}),this._togglePointerEvents(!0),this._config.hasBackdrop&&this._attachBackdrop(),this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!0),this._attachments.next(),this._keyboardDispatcher.add(this),this._config.disposeOnNavigation&&(this._locationChanges=this._location.subscribe(()=>this.dispose())),this._outsideClickDispatcher.add(this),typeof e?.onDestroy=="function"&&e.onDestroy(()=>{this.hasAttached()&&this._ngZone.runOutsideAngular(()=>Promise.resolve().then(()=>this.detach()))}),e}detach(){if(!this.hasAttached())return;this.detachBackdrop(),this._togglePointerEvents(!1),this._positionStrategy&&this._positionStrategy.detach&&this._positionStrategy.detach(),this._scrollStrategy&&this._scrollStrategy.disable();let t=this._portalOutlet.detach();return this._detachments.next(),this._keyboardDispatcher.remove(this),this._detachContentWhenStable(),this._locationChanges.unsubscribe(),this._outsideClickDispatcher.remove(this),t}dispose(){let t=this.hasAttached();this._positionStrategy&&this._positionStrategy.dispose(),this._disposeScrollStrategy(),this._disposeBackdrop(this._backdropElement),this._locationChanges.unsubscribe(),this._keyboardDispatcher.remove(this),this._portalOutlet.dispose(),this._attachments.complete(),this._backdropClick.complete(),this._keydownEvents.complete(),this._outsidePointerEvents.complete(),this._outsideClickDispatcher.remove(this),this._host?.remove(),this._previousHostParent=this._pane=this._host=null,t&&this._detachments.next(),this._detachments.complete()}hasAttached(){return this._portalOutlet.hasAttached()}backdropClick(){return this._backdropClick}attachments(){return this._attachments}detachments(){return this._detachments}keydownEvents(){return this._keydownEvents}outsidePointerEvents(){return this._outsidePointerEvents}getConfig(){return this._config}updatePosition(){this._positionStrategy&&this._positionStrategy.apply()}updatePositionStrategy(t){t!==this._positionStrategy&&(this._positionStrategy&&this._positionStrategy.dispose(),this._positionStrategy=t,this.hasAttached()&&(t.attach(this),this.updatePosition()))}updateSize(t){this._config=ve(ve({},this._config),t),this._updateElementSize()}setDirection(t){this._config=Tt(ve({},this._config),{direction:t}),this._updateElementDirection()}addPanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!0)}removePanelClass(t){this._pane&&this._toggleClasses(this._pane,t,!1)}getDirection(){let t=this._config.direction;return t?typeof t=="string"?t:t.value:"ltr"}updateScrollStrategy(t){t!==this._scrollStrategy&&(this._disposeScrollStrategy(),this._scrollStrategy=t,this.hasAttached()&&(t.attach(this),t.enable()))}_updateElementDirection(){this._host.setAttribute("dir",this.getDirection())}_updateElementSize(){if(!this._pane)return;let t=this._pane.style;t.width=ji(this._config.width),t.height=ji(this._config.height),t.minWidth=ji(this._config.minWidth),t.minHeight=ji(this._config.minHeight),t.maxWidth=ji(this._config.maxWidth),t.maxHeight=ji(this._config.maxHeight)}_togglePointerEvents(t){this._pane.style.pointerEvents=t?"":"none"}_attachBackdrop(){let t="cdk-overlay-backdrop-showing";this._backdropElement=this._document.createElement("div"),this._backdropElement.classList.add("cdk-overlay-backdrop"),this._animationsDisabled&&this._backdropElement.classList.add("cdk-overlay-backdrop-noop-animation"),this._config.backdropClass&&this._toggleClasses(this._backdropElement,this._config.backdropClass,!0),this._host.parentElement.insertBefore(this._backdropElement,this._host),this._backdropElement.addEventListener("click",this._backdropClickHandler),!this._animationsDisabled&&typeof requestAnimationFrame<"u"?this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>{this._backdropElement&&this._backdropElement.classList.add(t)})}):this._backdropElement.classList.add(t)}_updateStackingOrder(){this._host.nextSibling&&this._host.parentNode.appendChild(this._host)}detachBackdrop(){let t=this._backdropElement;if(t){if(this._animationsDisabled){this._disposeBackdrop(t);return}t.classList.remove("cdk-overlay-backdrop-showing"),this._ngZone.runOutsideAngular(()=>{t.addEventListener("transitionend",this._backdropTransitionendHandler)}),t.style.pointerEvents="none",this._backdropTimeout=this._ngZone.runOutsideAngular(()=>setTimeout(()=>{this._disposeBackdrop(t)},500))}}_toggleClasses(t,e,n){let r=Bm(e||[]).filter(s=>!!s);r.length&&(n?t.classList.add(...r):t.classList.remove(...r))}_detachContentWhenStable(){this._ngZone.runOutsideAngular(()=>{let t=this._ngZone.onStable.pipe(Kt(_i(this._attachments,this._detachments))).subscribe(()=>{(!this._pane||!this._host||this._pane.children.length===0)&&(this._pane&&this._config.panelClass&&this._toggleClasses(this._pane,this._config.panelClass,!1),this._host&&this._host.parentElement&&(this._previousHostParent=this._host.parentElement,this._host.remove()),t.unsubscribe())})})}_disposeScrollStrategy(){let t=this._scrollStrategy;t&&(t.disable(),t.detach&&t.detach())}_disposeBackdrop(t){t&&(t.removeEventListener("click",this._backdropClickHandler),t.removeEventListener("transitionend",this._backdropTransitionendHandler),t.remove(),this._backdropElement===t&&(this._backdropElement=null)),this._backdropTimeout&&(clearTimeout(this._backdropTimeout),this._backdropTimeout=void 0)}},I7="cdk-overlay-connected-position-bounding-box",nve=/([A-Za-z%]+)$/,J_=class{get positions(){return this._preferredPositions}constructor(t,e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s,this._lastBoundingBoxSize={width:0,height:0},this._isPushed=!1,this._canPush=!0,this._growAfterOpen=!1,this._hasFlexibleDimensions=!0,this._positionLocked=!1,this._viewportMargin=0,this._scrollables=[],this._preferredPositions=[],this._positionChanges=new ke,this._resizeSubscription=At.EMPTY,this._offsetX=0,this._offsetY=0,this._appliedPanelClasses=[],this.positionChanges=this._positionChanges,this.setOrigin(t)}attach(t){this._overlayRef&&this._overlayRef,this._validatePositions(),t.hostElement.classList.add(I7),this._overlayRef=t,this._boundingBox=t.hostElement,this._pane=t.overlayElement,this._isDisposed=!1,this._isInitialRender=!0,this._lastPosition=null,this._resizeSubscription.unsubscribe(),this._resizeSubscription=this._viewportRuler.change().subscribe(()=>{this._isInitialRender=!0,this.apply()})}apply(){if(this._isDisposed||!this._platform.isBrowser)return;if(!this._isInitialRender&&this._positionLocked&&this._lastPosition){this.reapplyLastPosition();return}this._clearPanelClasses(),this._resetOverlayElementStyles(),this._resetBoundingBoxStyles(),this._viewportRect=this._getNarrowedViewportRect(),this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let t=this._originRect,e=this._overlayRect,n=this._viewportRect,r=this._containerRect,s=[],o;for(let a of this._preferredPositions){let l=this._getOriginPoint(t,r,a),c=this._getOverlayPoint(l,e,a),d=this._getOverlayFit(c,e,n,a);if(d.isCompletelyWithinViewport){this._isPushed=!1,this._applyPosition(a,l);return}if(this._canFitWithFlexibleDimensions(d,c,n)){s.push({position:a,origin:l,overlayRect:e,boundingBoxRect:this._calculateBoundingBoxRect(l,a)});continue}(!o||o.overlayFit.visibleArea<d.visibleArea)&&(o={overlayFit:d,overlayPoint:c,originPoint:l,position:a,overlayRect:e})}if(s.length){let a=null,l=-1;for(let c of s){let d=c.boundingBoxRect.width*c.boundingBoxRect.height*(c.position.weight||1);d>l&&(l=d,a=c)}this._isPushed=!1,this._applyPosition(a.position,a.origin);return}if(this._canPush){this._isPushed=!0,this._applyPosition(o.position,o.originPoint);return}this._applyPosition(o.position,o.originPoint)}detach(){this._clearPanelClasses(),this._lastPosition=null,this._previousPushAmount=null,this._resizeSubscription.unsubscribe()}dispose(){this._isDisposed||(this._boundingBox&&lu(this._boundingBox.style,{top:"",left:"",right:"",bottom:"",height:"",width:"",alignItems:"",justifyContent:""}),this._pane&&this._resetOverlayElementStyles(),this._overlayRef&&this._overlayRef.hostElement.classList.remove(I7),this.detach(),this._positionChanges.complete(),this._overlayRef=this._boundingBox=null,this._isDisposed=!0)}reapplyLastPosition(){if(this._isDisposed||!this._platform.isBrowser)return;let t=this._lastPosition;if(t){this._originRect=this._getOriginRect(),this._overlayRect=this._pane.getBoundingClientRect(),this._viewportRect=this._getNarrowedViewportRect(),this._containerRect=this._overlayContainer.getContainerElement().getBoundingClientRect();let e=this._getOriginPoint(this._originRect,this._containerRect,t);this._applyPosition(t,e)}else this.apply()}withScrollableContainers(t){return this._scrollables=t,this}withPositions(t){return this._preferredPositions=t,t.indexOf(this._lastPosition)===-1&&(this._lastPosition=null),this._validatePositions(),this}withViewportMargin(t){return this._viewportMargin=t,this}withFlexibleDimensions(t=!0){return this._hasFlexibleDimensions=t,this}withGrowAfterOpen(t=!0){return this._growAfterOpen=t,this}withPush(t=!0){return this._canPush=t,this}withLockedPosition(t=!0){return this._positionLocked=t,this}setOrigin(t){return this._origin=t,this}withDefaultOffsetX(t){return this._offsetX=t,this}withDefaultOffsetY(t){return this._offsetY=t,this}withTransformOriginOn(t){return this._transformOriginSelector=t,this}_getOriginPoint(t,e,n){let r;if(n.originX=="center")r=t.left+t.width/2;else{let o=this._isRtl()?t.right:t.left,a=this._isRtl()?t.left:t.right;r=n.originX=="start"?o:a}e.left<0&&(r-=e.left);let s;return n.originY=="center"?s=t.top+t.height/2:s=n.originY=="top"?t.top:t.bottom,e.top<0&&(s-=e.top),{x:r,y:s}}_getOverlayPoint(t,e,n){let r;n.overlayX=="center"?r=-e.width/2:n.overlayX==="start"?r=this._isRtl()?-e.width:0:r=this._isRtl()?0:-e.width;let s;return n.overlayY=="center"?s=-e.height/2:s=n.overlayY=="top"?0:-e.height,{x:t.x+r,y:t.y+s}}_getOverlayFit(t,e,n,r){let s=M7(e),{x:o,y:a}=t,l=this._getOffset(r,"x"),c=this._getOffset(r,"y");l&&(o+=l),c&&(a+=c);let d=0-o,u=o+s.width-n.width,h=0-a,m=a+s.height-n.height,_=this._subtractOverflows(s.width,d,u),b=this._subtractOverflows(s.height,h,m),v=_*b;return{visibleArea:v,isCompletelyWithinViewport:s.width*s.height===v,fitsInViewportVertically:b===s.height,fitsInViewportHorizontally:_==s.width}}_canFitWithFlexibleDimensions(t,e,n){if(this._hasFlexibleDimensions){let r=n.bottom-e.y,s=n.right-e.x,o=D7(this._overlayRef.getConfig().minHeight),a=D7(this._overlayRef.getConfig().minWidth),l=t.fitsInViewportVertically||o!=null&&o<=r,c=t.fitsInViewportHorizontally||a!=null&&a<=s;return l&&c}return!1}_pushOverlayOnScreen(t,e,n){if(this._previousPushAmount&&this._positionLocked)return{x:t.x+this._previousPushAmount.x,y:t.y+this._previousPushAmount.y};let r=M7(e),s=this._viewportRect,o=Math.max(t.x+r.width-s.width,0),a=Math.max(t.y+r.height-s.height,0),l=Math.max(s.top-n.top-t.y,0),c=Math.max(s.left-n.left-t.x,0),d=0,u=0;return r.width<=s.width?d=c||-o:d=t.x<this._viewportMargin?s.left-n.left-t.x:0,r.height<=s.height?u=l||-a:u=t.y<this._viewportMargin?s.top-n.top-t.y:0,this._previousPushAmount={x:d,y:u},{x:t.x+d,y:t.y+u}}_applyPosition(t,e){if(this._setTransformOrigin(t),this._setOverlayElementStyles(e,t),this._setBoundingBoxStyles(e,t),t.panelClass&&this._addPanelClasses(t.panelClass),this._positionChanges.observers.length){let n=this._getScrollVisibility();if(t!==this._lastPosition||!this._lastScrollVisibility||!rve(this._lastScrollVisibility,n)){let r=new t2(t,n);this._positionChanges.next(r)}this._lastScrollVisibility=n}this._lastPosition=t,this._isInitialRender=!1}_setTransformOrigin(t){if(!this._transformOriginSelector)return;let e=this._boundingBox.querySelectorAll(this._transformOriginSelector),n,r=t.overlayY;t.overlayX==="center"?n="center":this._isRtl()?n=t.overlayX==="start"?"right":"left":n=t.overlayX==="start"?"left":"right";for(let s=0;s<e.length;s++)e[s].style.transformOrigin=`${n} ${r}`}_calculateBoundingBoxRect(t,e){let n=this._viewportRect,r=this._isRtl(),s,o,a;if(e.overlayY==="top")o=t.y,s=n.height-o+this._viewportMargin;else if(e.overlayY==="bottom")a=n.height-t.y+this._viewportMargin*2,s=n.height-a+this._viewportMargin;else{let m=Math.min(n.bottom-t.y+n.top,t.y),_=this._lastBoundingBoxSize.height;s=m*2,o=t.y-m,s>_&&!this._isInitialRender&&!this._growAfterOpen&&(o=t.y-_/2)}let l=e.overlayX==="start"&&!r||e.overlayX==="end"&&r,c=e.overlayX==="end"&&!r||e.overlayX==="start"&&r,d,u,h;if(c)h=n.width-t.x+this._viewportMargin*2,d=t.x-this._viewportMargin;else if(l)u=t.x,d=n.right-t.x;else{let m=Math.min(n.right-t.x+n.left,t.x),_=this._lastBoundingBoxSize.width;d=m*2,u=t.x-m,d>_&&!this._isInitialRender&&!this._growAfterOpen&&(u=t.x-_/2)}return{top:o,left:u,bottom:a,right:h,width:d,height:s}}_setBoundingBoxStyles(t,e){let n=this._calculateBoundingBoxRect(t,e);!this._isInitialRender&&!this._growAfterOpen&&(n.height=Math.min(n.height,this._lastBoundingBoxSize.height),n.width=Math.min(n.width,this._lastBoundingBoxSize.width));let r={};if(this._hasExactPosition())r.top=r.left="0",r.bottom=r.right=r.maxHeight=r.maxWidth="",r.width=r.height="100%";else{let s=this._overlayRef.getConfig().maxHeight,o=this._overlayRef.getConfig().maxWidth;r.height=ji(n.height),r.top=ji(n.top),r.bottom=ji(n.bottom),r.width=ji(n.width),r.left=ji(n.left),r.right=ji(n.right),e.overlayX==="center"?r.alignItems="center":r.alignItems=e.overlayX==="end"?"flex-end":"flex-start",e.overlayY==="center"?r.justifyContent="center":r.justifyContent=e.overlayY==="bottom"?"flex-end":"flex-start",s&&(r.maxHeight=ji(s)),o&&(r.maxWidth=ji(o))}this._lastBoundingBoxSize=n,lu(this._boundingBox.style,r)}_resetBoundingBoxStyles(){lu(this._boundingBox.style,{top:"0",left:"0",right:"0",bottom:"0",height:"",width:"",alignItems:"",justifyContent:""})}_resetOverlayElementStyles(){lu(this._pane.style,{top:"",left:"",bottom:"",right:"",position:"",transform:""})}_setOverlayElementStyles(t,e){let n={},r=this._hasExactPosition(),s=this._hasFlexibleDimensions,o=this._overlayRef.getConfig();if(r){let d=this._viewportRuler.getViewportScrollPosition();lu(n,this._getExactOverlayY(e,t,d)),lu(n,this._getExactOverlayX(e,t,d))}else n.position="static";let a="",l=this._getOffset(e,"x"),c=this._getOffset(e,"y");l&&(a+=`translateX(${l}px) `),c&&(a+=`translateY(${c}px)`),n.transform=a.trim(),o.maxHeight&&(r?n.maxHeight=ji(o.maxHeight):s&&(n.maxHeight="")),o.maxWidth&&(r?n.maxWidth=ji(o.maxWidth):s&&(n.maxWidth="")),lu(this._pane.style,n)}_getExactOverlayY(t,e,n){let r={top:"",bottom:""},s=this._getOverlayPoint(e,this._overlayRect,t);if(this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n)),t.overlayY==="bottom"){let o=this._document.documentElement.clientHeight;r.bottom=`${o-(s.y+this._overlayRect.height)}px`}else r.top=ji(s.y);return r}_getExactOverlayX(t,e,n){let r={left:"",right:""},s=this._getOverlayPoint(e,this._overlayRect,t);this._isPushed&&(s=this._pushOverlayOnScreen(s,this._overlayRect,n));let o;if(this._isRtl()?o=t.overlayX==="end"?"left":"right":o=t.overlayX==="end"?"right":"left",o==="right"){let a=this._document.documentElement.clientWidth;r.right=`${a-(s.x+this._overlayRect.width)}px`}else r.left=ji(s.x);return r}_getScrollVisibility(){let t=this._getOriginRect(),e=this._pane.getBoundingClientRect(),n=this._scrollables.map(r=>r.getElementRef().nativeElement.getBoundingClientRect());return{isOriginClipped:T7(t,n),isOriginOutsideView:JR(t,n),isOverlayClipped:T7(e,n),isOverlayOutsideView:JR(e,n)}}_subtractOverflows(t,...e){return e.reduce((n,r)=>n-Math.max(r,0),t)}_getNarrowedViewportRect(){let t=this._document.documentElement.clientWidth,e=this._document.documentElement.clientHeight,n=this._viewportRuler.getViewportScrollPosition();return{top:n.top+this._viewportMargin,left:n.left+this._viewportMargin,right:n.left+t-this._viewportMargin,bottom:n.top+e-this._viewportMargin,width:t-2*this._viewportMargin,height:e-2*this._viewportMargin}}_isRtl(){return this._overlayRef.getDirection()==="rtl"}_hasExactPosition(){return!this._hasFlexibleDimensions||this._isPushed}_getOffset(t,e){return e==="x"?t.offsetX==null?this._offsetX:t.offsetX:t.offsetY==null?this._offsetY:t.offsetY}_validatePositions(){}_addPanelClasses(t){this._pane&&Bm(t).forEach(e=>{e!==""&&this._appliedPanelClasses.indexOf(e)===-1&&(this._appliedPanelClasses.push(e),this._pane.classList.add(e))})}_clearPanelClasses(){this._pane&&(this._appliedPanelClasses.forEach(t=>{this._pane.classList.remove(t)}),this._appliedPanelClasses=[])}_getOriginRect(){let t=this._origin;if(t instanceof fe)return t.nativeElement.getBoundingClientRect();if(t instanceof Element)return t.getBoundingClientRect();let e=t.width||0,n=t.height||0;return{top:t.y,bottom:t.y+n,left:t.x,right:t.x+e,height:n,width:e}}};function lu(i,t){for(let e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return i}function D7(i){if(typeof i!="number"&&i!=null){let[t,e]=i.split(nve);return!e||e==="px"?parseFloat(t):null}return i||null}function M7(i){return{top:Math.floor(i.top),right:Math.floor(i.right),bottom:Math.floor(i.bottom),left:Math.floor(i.left),width:Math.floor(i.width),height:Math.floor(i.height)}}function rve(i,t){return i===t?!0:i.isOriginClipped===t.isOriginClipped&&i.isOriginOutsideView===t.isOriginOutsideView&&i.isOverlayClipped===t.isOverlayClipped&&i.isOverlayOutsideView===t.isOverlayOutsideView}var A7="cdk-global-overlay-wrapper",i2=class{constructor(){this._cssPosition="static",this._topOffset="",this._bottomOffset="",this._alignItems="",this._xPosition="",this._xOffset="",this._width="",this._height="",this._isDisposed=!1}attach(t){let e=t.getConfig();this._overlayRef=t,this._width&&!e.width&&t.updateSize({width:this._width}),this._height&&!e.height&&t.updateSize({height:this._height}),t.hostElement.classList.add(A7),this._isDisposed=!1}top(t=""){return this._bottomOffset="",this._topOffset=t,this._alignItems="flex-start",this}left(t=""){return this._xOffset=t,this._xPosition="left",this}bottom(t=""){return this._topOffset="",this._bottomOffset=t,this._alignItems="flex-end",this}right(t=""){return this._xOffset=t,this._xPosition="right",this}start(t=""){return this._xOffset=t,this._xPosition="start",this}end(t=""){return this._xOffset=t,this._xPosition="end",this}width(t=""){return this._overlayRef?this._overlayRef.updateSize({width:t}):this._width=t,this}height(t=""){return this._overlayRef?this._overlayRef.updateSize({height:t}):this._height=t,this}centerHorizontally(t=""){return this.left(t),this._xPosition="center",this}centerVertically(t=""){return this.top(t),this._alignItems="center",this}apply(){if(!this._overlayRef||!this._overlayRef.hasAttached())return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement.style,n=this._overlayRef.getConfig(),{width:r,height:s,maxWidth:o,maxHeight:a}=n,l=(r==="100%"||r==="100vw")&&(!o||o==="100%"||o==="100vw"),c=(s==="100%"||s==="100vh")&&(!a||a==="100%"||a==="100vh"),d=this._xPosition,u=this._xOffset,h=this._overlayRef.getConfig().direction==="rtl",m="",_="",b="";l?b="flex-start":d==="center"?(b="center",h?_=u:m=u):h?d==="left"||d==="end"?(b="flex-end",m=u):(d==="right"||d==="start")&&(b="flex-start",_=u):d==="left"||d==="start"?(b="flex-start",m=u):(d==="right"||d==="end")&&(b="flex-end",_=u),t.position=this._cssPosition,t.marginLeft=l?"0":m,t.marginTop=c?"0":this._topOffset,t.marginBottom=this._bottomOffset,t.marginRight=l?"0":_,e.justifyContent=b,e.alignItems=c?"flex-start":this._alignItems}dispose(){if(this._isDisposed||!this._overlayRef)return;let t=this._overlayRef.overlayElement.style,e=this._overlayRef.hostElement,n=e.style;e.classList.remove(A7),n.justifyContent=n.alignItems=t.marginTop=t.marginBottom=t.marginLeft=t.marginRight=t.position="",this._overlayRef=null,this._isDisposed=!0}},sve=(()=>{class i{constructor(e,n,r,s){this._viewportRuler=e,this._document=n,this._platform=r,this._overlayContainer=s}global(){return new i2}flexibleConnectedTo(e){return new J_(e,this._viewportRuler,this._document,this._platform,this._overlayContainer)}static{this.\u0275fac=function(n){return new(n||i)(V(au),V(Ze),V(dt),V(Ym))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ove=0,Qi=(()=>{class i{constructor(e,n,r,s,o,a,l,c,d,u,h,m){this.scrollStrategies=e,this._overlayContainer=n,this._componentFactoryResolver=r,this._positionBuilder=s,this._keyboardDispatcher=o,this._injector=a,this._ngZone=l,this._document=c,this._directionality=d,this._location=u,this._outsideClickDispatcher=h,this._animationsModuleType=m}create(e){let n=this._createHostElement(),r=this._createPaneElement(n),s=this._createPortalOutlet(r),o=new dc(e);return o.direction=o.direction||this._directionality.value,new Ta(s,n,r,o,this._ngZone,this._keyboardDispatcher,this._document,this._location,this._outsideClickDispatcher,this._animationsModuleType==="NoopAnimations")}position(){return this._positionBuilder}_createPaneElement(e){let n=this._document.createElement("div");return n.id=`cdk-overlay-${ove++}`,n.classList.add("cdk-overlay-pane"),e.appendChild(n),n}_createHostElement(){let e=this._document.createElement("div");return this._overlayContainer.getContainerElement().appendChild(e),e}_createPortalOutlet(e){return this._appRef||(this._appRef=this._injector.get(eL)),new IC(e,this._componentFactoryResolver,this._appRef,this._injector,this._document)}static{this.\u0275fac=function(n){return new(n||i)(V(eve),V(Ym),V(Kb),V(sve),V(tve),V(xn),V(_e),V(Ze),V(Mi),V(e0),V(ive),V(Ut,8))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),ave=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"}],P7=new te("cdk-connected-overlay-scroll-strategy",{providedIn:"root",factory:()=>{let i=He(Qi);return()=>i.scrollStrategies.reposition()}}),eb=(()=>{class i{constructor(e){this.elementRef=e}static{this.\u0275fac=function(n){return new(n||i)(x(fe))}}static{this.\u0275dir=J({type:i,selectors:[["","cdk-overlay-origin",""],["","overlay-origin",""],["","cdkOverlayOrigin",""]],exportAs:["cdkOverlayOrigin"],standalone:!0})}}return i})(),n2=(()=>{class i{get offsetX(){return this._offsetX}set offsetX(e){this._offsetX=e,this._position&&this._updatePositionStrategy(this._position)}get offsetY(){return this._offsetY}set offsetY(e){this._offsetY=e,this._position&&this._updatePositionStrategy(this._position)}get disposeOnNavigation(){return this._disposeOnNavigation}set disposeOnNavigation(e){this._disposeOnNavigation=e}constructor(e,n,r,s,o){this._overlay=e,this._dir=o,this._backdropSubscription=At.EMPTY,this._attachSubscription=At.EMPTY,this._detachSubscription=At.EMPTY,this._positionSubscription=At.EMPTY,this._disposeOnNavigation=!1,this._ngZone=He(_e),this.viewportMargin=0,this.open=!1,this.disableClose=!1,this.hasBackdrop=!1,this.lockPosition=!1,this.flexibleDimensions=!1,this.growAfterOpen=!1,this.push=!1,this.backdropClick=new ue,this.positionChange=new ue,this.attach=new ue,this.detach=new ue,this.overlayKeydown=new ue,this.overlayOutsideClick=new ue,this._templatePortal=new Vo(n,r),this._scrollStrategyFactory=s,this.scrollStrategy=this._scrollStrategyFactory()}get overlayRef(){return this._overlayRef}get dir(){return this._dir?this._dir.value:"ltr"}ngOnDestroy(){this._attachSubscription.unsubscribe(),this._detachSubscription.unsubscribe(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this._overlayRef&&this._overlayRef.dispose()}ngOnChanges(e){this._position&&(this._updatePositionStrategy(this._position),this._overlayRef.updateSize({width:this.width,minWidth:this.minWidth,height:this.height,minHeight:this.minHeight}),e.origin&&this.open&&this._position.apply()),e.open&&(this.open?this._attachOverlay():this._detachOverlay())}_createOverlay(){(!this.positions||!this.positions.length)&&(this.positions=ave);let e=this._overlayRef=this._overlay.create(this._buildConfig());this._attachSubscription=e.attachments().subscribe(()=>this.attach.emit()),this._detachSubscription=e.detachments().subscribe(()=>this.detach.emit()),e.keydownEvents().subscribe(n=>{this.overlayKeydown.next(n),n.keyCode===27&&!this.disableClose&&!Di(n)&&(n.preventDefault(),this._detachOverlay())}),this._overlayRef.outsidePointerEvents().subscribe(n=>{let r=this._getOriginElement(),s=ps(n);(!r||r!==s&&!r.contains(s))&&this.overlayOutsideClick.next(n)})}_buildConfig(){let e=this._position=this.positionStrategy||this._createPositionStrategy(),n=new dc({direction:this._dir,positionStrategy:e,scrollStrategy:this.scrollStrategy,hasBackdrop:this.hasBackdrop,disposeOnNavigation:this.disposeOnNavigation});return(this.width||this.width===0)&&(n.width=this.width),(this.height||this.height===0)&&(n.height=this.height),(this.minWidth||this.minWidth===0)&&(n.minWidth=this.minWidth),(this.minHeight||this.minHeight===0)&&(n.minHeight=this.minHeight),this.backdropClass&&(n.backdropClass=this.backdropClass),this.panelClass&&(n.panelClass=this.panelClass),n}_updatePositionStrategy(e){let n=this.positions.map(r=>({originX:r.originX,originY:r.originY,overlayX:r.overlayX,overlayY:r.overlayY,offsetX:r.offsetX||this.offsetX,offsetY:r.offsetY||this.offsetY,panelClass:r.panelClass||void 0}));return e.setOrigin(this._getOrigin()).withPositions(n).withFlexibleDimensions(this.flexibleDimensions).withPush(this.push).withGrowAfterOpen(this.growAfterOpen).withViewportMargin(this.viewportMargin).withLockedPosition(this.lockPosition).withTransformOriginOn(this.transformOriginSelector)}_createPositionStrategy(){let e=this._overlay.position().flexibleConnectedTo(this._getOrigin());return this._updatePositionStrategy(e),e}_getOrigin(){return this.origin instanceof eb?this.origin.elementRef:this.origin}_getOriginElement(){return this.origin instanceof eb?this.origin.elementRef.nativeElement:this.origin instanceof fe?this.origin.nativeElement:typeof Element<"u"&&this.origin instanceof Element?this.origin:null}_attachOverlay(){this._overlayRef?this._overlayRef.getConfig().hasBackdrop=this.hasBackdrop:this._createOverlay(),this._overlayRef.hasAttached()||this._overlayRef.attach(this._templatePortal),this.hasBackdrop?this._backdropSubscription=this._overlayRef.backdropClick().subscribe(e=>{this.backdropClick.emit(e)}):this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe(),this.positionChange.observers.length>0&&(this._positionSubscription=this._position.positionChanges.pipe(HN(()=>this.positionChange.observers.length>0)).subscribe(e=>{this._ngZone.run(()=>this.positionChange.emit(e)),this.positionChange.observers.length===0&&this._positionSubscription.unsubscribe()}))}_detachOverlay(){this._overlayRef&&this._overlayRef.detach(),this._backdropSubscription.unsubscribe(),this._positionSubscription.unsubscribe()}static{this.\u0275fac=function(n){return new(n||i)(x(Qi),x(rn),x(Un),x(P7),x(Mi,8))}}static{this.\u0275dir=J({type:i,selectors:[["","cdk-connected-overlay",""],["","connected-overlay",""],["","cdkConnectedOverlay",""]],inputs:{origin:[H.None,"cdkConnectedOverlayOrigin","origin"],positions:[H.None,"cdkConnectedOverlayPositions","positions"],positionStrategy:[H.None,"cdkConnectedOverlayPositionStrategy","positionStrategy"],offsetX:[H.None,"cdkConnectedOverlayOffsetX","offsetX"],offsetY:[H.None,"cdkConnectedOverlayOffsetY","offsetY"],width:[H.None,"cdkConnectedOverlayWidth","width"],height:[H.None,"cdkConnectedOverlayHeight","height"],minWidth:[H.None,"cdkConnectedOverlayMinWidth","minWidth"],minHeight:[H.None,"cdkConnectedOverlayMinHeight","minHeight"],backdropClass:[H.None,"cdkConnectedOverlayBackdropClass","backdropClass"],panelClass:[H.None,"cdkConnectedOverlayPanelClass","panelClass"],viewportMargin:[H.None,"cdkConnectedOverlayViewportMargin","viewportMargin"],scrollStrategy:[H.None,"cdkConnectedOverlayScrollStrategy","scrollStrategy"],open:[H.None,"cdkConnectedOverlayOpen","open"],disableClose:[H.None,"cdkConnectedOverlayDisableClose","disableClose"],transformOriginSelector:[H.None,"cdkConnectedOverlayTransformOriginOn","transformOriginSelector"],hasBackdrop:[H.HasDecoratorInputTransform,"cdkConnectedOverlayHasBackdrop","hasBackdrop",be],lockPosition:[H.HasDecoratorInputTransform,"cdkConnectedOverlayLockPosition","lockPosition",be],flexibleDimensions:[H.HasDecoratorInputTransform,"cdkConnectedOverlayFlexibleDimensions","flexibleDimensions",be],growAfterOpen:[H.HasDecoratorInputTransform,"cdkConnectedOverlayGrowAfterOpen","growAfterOpen",be],push:[H.HasDecoratorInputTransform,"cdkConnectedOverlayPush","push",be],disposeOnNavigation:[H.HasDecoratorInputTransform,"cdkConnectedOverlayDisposeOnNavigation","disposeOnNavigation",be]},outputs:{backdropClick:"backdropClick",positionChange:"positionChange",attach:"attach",detach:"detach",overlayKeydown:"overlayKeydown",overlayOutsideClick:"overlayOutsideClick"},exportAs:["cdkConnectedOverlay"],standalone:!0,features:[Ge,ht]})}}return i})();function lve(i){return()=>i.scrollStrategies.reposition()}var cve={provide:P7,deps:[Qi],useFactory:lve},hc=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({providers:[Qi,cve],imports:[lc,Gs,X_,X_]})}}return i})();function dve(i,t){}var cu=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.closeOnNavigation=!0,this.closeOnDestroy=!0,this.closeOnOverlayDetachments=!0}};var o2=(()=>{class i extends Km{constructor(e,n,r,s,o,a,l,c){super(),this._elementRef=e,this._focusTrapFactory=n,this._config=s,this._interactivityChecker=o,this._ngZone=a,this._overlayRef=l,this._focusMonitor=c,this._platform=He(dt),this._focusTrap=null,this._elementFocusedBeforeDialogWasOpened=null,this._closeInteractionType=null,this._ariaLabelledByQueue=[],this._changeDetectorRef=He(mt),this.attachDomPortal=d=>{this._portalOutlet.hasAttached();let u=this._portalOutlet.attachDomPortal(d);return this._contentAttached(),u},this._document=r,this._config.ariaLabelledBy&&this._ariaLabelledByQueue.push(this._config.ariaLabelledBy)}_addAriaLabelledBy(e){this._ariaLabelledByQueue.push(e),this._changeDetectorRef.markForCheck()}_removeAriaLabelledBy(e){let n=this._ariaLabelledByQueue.indexOf(e);n>-1&&(this._ariaLabelledByQueue.splice(n,1),this._changeDetectorRef.markForCheck())}_contentAttached(){this._initializeFocusTrap(),this._handleBackdropClicks(),this._captureInitialFocus()}_captureInitialFocus(){this._trapFocus()}ngOnDestroy(){this._restoreFocus()}attachComponentPortal(e){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachComponentPortal(e);return this._contentAttached(),n}attachTemplatePortal(e){this._portalOutlet.hasAttached();let n=this._portalOutlet.attachTemplatePortal(e);return this._contentAttached(),n}_recaptureFocus(){this._containsFocus()||this._trapFocus()}_forceFocus(e,n){this._interactivityChecker.isFocusable(e)||(e.tabIndex=-1,this._ngZone.runOutsideAngular(()=>{let r=()=>{e.removeEventListener("blur",r),e.removeEventListener("mousedown",r),e.removeAttribute("tabindex")};e.addEventListener("blur",r),e.addEventListener("mousedown",r)})),e.focus(n)}_focusByCssSelector(e,n){let r=this._elementRef.nativeElement.querySelector(e);r&&this._forceFocus(r,n)}_trapFocus(){let e=this._elementRef.nativeElement;switch(this._config.autoFocus){case!1:case"dialog":this._containsFocus()||e.focus();break;case!0:case"first-tabbable":this._focusTrap?.focusInitialElementWhenReady().then(n=>{n||this._focusDialogContainer()});break;case"first-heading":this._focusByCssSelector('h1, h2, h3, h4, h5, h6, [role="heading"]');break;default:this._focusByCssSelector(this._config.autoFocus);break}}_restoreFocus(){let e=this._config.restoreFocus,n=null;if(typeof e=="string"?n=this._document.querySelector(e):typeof e=="boolean"?n=e?this._elementFocusedBeforeDialogWasOpened:null:e&&(n=e),this._config.restoreFocus&&n&&typeof n.focus=="function"){let r=sc(),s=this._elementRef.nativeElement;(!r||r===this._document.body||r===s||s.contains(r))&&(this._focusMonitor?(this._focusMonitor.focusVia(n,this._closeInteractionType),this._closeInteractionType=null):n.focus())}this._focusTrap&&this._focusTrap.destroy()}_focusDialogContainer(){this._elementRef.nativeElement.focus&&this._elementRef.nativeElement.focus()}_containsFocus(){let e=this._elementRef.nativeElement,n=sc();return e===n||e.contains(n)}_initializeFocusTrap(){this._platform.isBrowser&&(this._focusTrap=this._focusTrapFactory.create(this._elementRef.nativeElement),this._document&&(this._elementFocusedBeforeDialogWasOpened=sc()))}_handleBackdropClicks(){this._overlayRef.backdropClick().subscribe(()=>{this._config.disableClose&&this._recaptureFocus()})}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(W_),x(Ze,8),x(cu),x(q_),x(_e),x(Ta),x(zr))}}static{this.\u0275cmp=ae({type:i,selectors:[["cdk-dialog-container"]],viewQuery:function(n,r){if(n&1&&$e(zo,7),n&2){let s;ye(s=xe())&&(r._portalOutlet=s.first)}},hostAttrs:["tabindex","-1",1,"cdk-dialog-container"],hostVars:6,hostBindings:function(n,r){n&2&&Se("id",r._config.id||null)("role",r._config.role)("aria-modal",r._config.ariaModal)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null)},standalone:!0,features:[Ve,Re],decls:1,vars:0,consts:[["cdkPortalOutlet",""]],template:function(n,r){n&1&&Y(0,dve,0,0,"ng-template",0)},dependencies:[zo],styles:[".cdk-dialog-container{display:block;width:100%;height:100%;min-height:inherit;max-height:inherit}"],encapsulation:2})}}return i})(),tb=class{constructor(t,e){this.overlayRef=t,this.config=e,this.closed=new ke,this.disableClose=e.disableClose,this.backdropClick=t.backdropClick(),this.keydownEvents=t.keydownEvents(),this.outsidePointerEvents=t.outsidePointerEvents(),this.id=e.id,this.keydownEvents.subscribe(n=>{n.keyCode===27&&!this.disableClose&&!Di(n)&&(n.preventDefault(),this.close(void 0,{focusOrigin:"keyboard"}))}),this.backdropClick.subscribe(()=>{this.disableClose||this.close(void 0,{focusOrigin:"mouse"})}),this._detachSubscription=t.detachments().subscribe(()=>{e.closeOnOverlayDetachments!==!1&&this.close()})}close(t,e){if(this.containerInstance){let n=this.closed;this.containerInstance._closeInteractionType=e?.focusOrigin||"program",this._detachSubscription.unsubscribe(),this.overlayRef.dispose(),n.next(t),n.complete(),this.componentInstance=this.containerInstance=null}}updatePosition(){return this.overlayRef.updatePosition(),this}updateSize(t="",e=""){return this.overlayRef.updateSize({width:t,height:e}),this}addPanelClass(t){return this.overlayRef.addPanelClass(t),this}removePanelClass(t){return this.overlayRef.removePanelClass(t),this}},uve=new te("DialogScrollStrategy",{providedIn:"root",factory:()=>{let i=He(Qi);return()=>i.scrollStrategies.block()}}),hve=new te("DialogData"),mve=new te("DefaultDialogConfig");var fve=0,a2=(()=>{class i{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}constructor(e,n,r,s,o,a){this._overlay=e,this._injector=n,this._defaultOptions=r,this._parentDialog=s,this._overlayContainer=o,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ke,this._afterOpenedAtThisLevel=new ke,this._ariaHiddenElements=new Map,this.afterAllClosed=Zo(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Pi(void 0))),this._scrollStrategy=a}open(e,n){let r=this._defaultOptions||new cu;n=ve(ve({},r),n),n.id=n.id||`cdk-dialog-${fve++}`,n.id&&this.getDialogById(n.id);let s=this._getOverlayConfig(n),o=this._overlay.create(s),a=new tb(o,n),l=this._attachContainer(o,a,n);return a.containerInstance=l,this._attachDialogContent(e,a,l,n),this.openDialogs.length||this._hideNonDialogContentFromAssistiveTechnology(),this.openDialogs.push(a),a.closed.subscribe(()=>this._removeOpenDialog(a,!0)),this.afterOpened.next(a),a}closeAll(){s2(this.openDialogs,e=>e.close())}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){s2(this._openDialogsAtThisLevel,e=>{e.config.closeOnDestroy===!1&&this._removeOpenDialog(e,!1)}),s2(this._openDialogsAtThisLevel,e=>e.close()),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete(),this._openDialogsAtThisLevel=[]}_getOverlayConfig(e){let n=new dc({positionStrategy:e.positionStrategy||this._overlay.position().global().centerHorizontally().centerVertically(),scrollStrategy:e.scrollStrategy||this._scrollStrategy(),panelClass:e.panelClass,hasBackdrop:e.hasBackdrop,direction:e.direction,minWidth:e.minWidth,minHeight:e.minHeight,maxWidth:e.maxWidth,maxHeight:e.maxHeight,width:e.width,height:e.height,disposeOnNavigation:e.closeOnNavigation});return e.backdropClass&&(n.backdropClass=e.backdropClass),n}_attachContainer(e,n,r){let s=r.injector||r.viewContainerRef?.injector,o=[{provide:cu,useValue:r},{provide:tb,useValue:n},{provide:Ta,useValue:e}],a;r.container?typeof r.container=="function"?a=r.container:(a=r.container.type,o.push(...r.container.providers(r))):a=o2;let l=new Ea(a,r.viewContainerRef,xn.create({parent:s||this._injector,providers:o}),r.componentFactoryResolver);return e.attach(l).instance}_attachDialogContent(e,n,r,s){if(e instanceof rn){let o=this._createInjector(s,n,r,void 0),a={$implicit:s.data,dialogRef:n};s.templateContext&&(a=ve(ve({},a),typeof s.templateContext=="function"?s.templateContext():s.templateContext)),r.attachTemplatePortal(new Vo(e,null,a,o))}else{let o=this._createInjector(s,n,r,this._injector),a=r.attachComponentPortal(new Ea(e,s.viewContainerRef,o,s.componentFactoryResolver));n.componentRef=a,n.componentInstance=a.instance}}_createInjector(e,n,r,s){let o=e.injector||e.viewContainerRef?.injector,a=[{provide:hve,useValue:e.data},{provide:tb,useValue:n}];return e.providers&&(typeof e.providers=="function"?a.push(...e.providers(n,e,r)):a.push(...e.providers)),e.direction&&(!o||!o.get(Mi,null,{optional:!0}))&&a.push({provide:Mi,useValue:{value:e.direction,change:We()}}),xn.create({parent:o||s,providers:a})}_removeOpenDialog(e,n){let r=this.openDialogs.indexOf(e);r>-1&&(this.openDialogs.splice(r,1),this.openDialogs.length||(this._ariaHiddenElements.forEach((s,o)=>{s?o.setAttribute("aria-hidden",s):o.removeAttribute("aria-hidden")}),this._ariaHiddenElements.clear(),n&&this._getAfterAllClosed().next()))}_hideNonDialogContentFromAssistiveTechnology(){let e=this._overlayContainer.getContainerElement();if(e.parentElement){let n=e.parentElement.children;for(let r=n.length-1;r>-1;r--){let s=n[r];s!==e&&s.nodeName!=="SCRIPT"&&s.nodeName!=="STYLE"&&!s.hasAttribute("aria-live")&&(this._ariaHiddenElements.set(s,s.getAttribute("aria-hidden")),s.setAttribute("aria-hidden","true"))}}}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}static{this.\u0275fac=function(n){return new(n||i)(V(Qi),V(xn),V(mve,8),V(i,12),V(Ym),V(uve))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function s2(i,t){let e=i.length;for(;e--;)t(i[e])}var R7=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({providers:[a2],imports:[hc,Gs,vC,Gs]})}}return i})();function pve(i,t){}var ib=class{constructor(){this.role="dialog",this.panelClass="",this.hasBackdrop=!0,this.backdropClass="",this.disableClose=!1,this.width="",this.height="",this.data=null,this.ariaDescribedBy=null,this.ariaLabelledBy=null,this.ariaLabel=null,this.ariaModal=!0,this.autoFocus="first-tabbable",this.restoreFocus=!0,this.delayFocusTrap=!0,this.closeOnNavigation=!0}},l2="mdc-dialog--open",F7="mdc-dialog--opening",N7="mdc-dialog--closing",gve=150,_ve=75,bve=(()=>{class i extends o2{constructor(e,n,r,s,o,a,l,c,d){super(e,n,r,s,o,a,l,d),this._animationMode=c,this._animationStateChanged=new ue,this._animationsEnabled=this._animationMode!=="NoopAnimations",this._actionSectionCount=0,this._hostElement=this._elementRef.nativeElement,this._enterAnimationDuration=this._animationsEnabled?B7(this._config.enterAnimationDuration)??gve:0,this._exitAnimationDuration=this._animationsEnabled?B7(this._config.exitAnimationDuration)??_ve:0,this._animationTimer=null,this._finishDialogOpen=()=>{this._clearAnimationClasses(),this._openAnimationDone(this._enterAnimationDuration)},this._finishDialogClose=()=>{this._clearAnimationClasses(),this._animationStateChanged.emit({state:"closed",totalTime:this._exitAnimationDuration})}}_contentAttached(){super._contentAttached(),this._startOpenAnimation()}_startOpenAnimation(){this._animationStateChanged.emit({state:"opening",totalTime:this._enterAnimationDuration}),this._animationsEnabled?(this._hostElement.style.setProperty(L7,`${this._enterAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(F7,l2)),this._waitForAnimationToComplete(this._enterAnimationDuration,this._finishDialogOpen)):(this._hostElement.classList.add(l2),Promise.resolve().then(()=>this._finishDialogOpen()))}_startExitAnimation(){this._animationStateChanged.emit({state:"closing",totalTime:this._exitAnimationDuration}),this._hostElement.classList.remove(l2),this._animationsEnabled?(this._hostElement.style.setProperty(L7,`${this._exitAnimationDuration}ms`),this._requestAnimationFrame(()=>this._hostElement.classList.add(N7)),this._waitForAnimationToComplete(this._exitAnimationDuration,this._finishDialogClose)):Promise.resolve().then(()=>this._finishDialogClose())}_updateActionSectionCount(e){this._actionSectionCount+=e,this._changeDetectorRef.markForCheck()}_clearAnimationClasses(){this._hostElement.classList.remove(F7,N7)}_waitForAnimationToComplete(e,n){this._animationTimer!==null&&clearTimeout(this._animationTimer),this._animationTimer=setTimeout(n,e)}_requestAnimationFrame(e){this._ngZone.runOutsideAngular(()=>{typeof requestAnimationFrame=="function"?requestAnimationFrame(e):e()})}_captureInitialFocus(){this._config.delayFocusTrap||this._trapFocus()}_openAnimationDone(e){this._config.delayFocusTrap&&this._trapFocus(),this._animationStateChanged.next({state:"opened",totalTime:e})}ngOnDestroy(){super.ngOnDestroy(),this._animationTimer!==null&&clearTimeout(this._animationTimer)}attachComponentPortal(e){let n=super.attachComponentPortal(e);return n.location.nativeElement.classList.add("mat-mdc-dialog-component-host"),n}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(W_),x(Ze,8),x(ib),x(q_),x(_e),x(Ta),x(Ut,8),x(zr))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-dialog-container"]],hostAttrs:["tabindex","-1",1,"mat-mdc-dialog-container","mdc-dialog"],hostVars:10,hostBindings:function(n,r){n&2&&(nr("id",r._config.id),Se("aria-modal",r._config.ariaModal)("role",r._config.role)("aria-labelledby",r._config.ariaLabel?null:r._ariaLabelledByQueue[0])("aria-label",r._config.ariaLabel)("aria-describedby",r._config.ariaDescribedBy||null),le("_mat-animation-noopable",!r._animationsEnabled)("mat-mdc-dialog-container-with-actions",r._actionSectionCount>0))},standalone:!0,features:[Ve,Re],decls:3,vars:0,consts:[[1,"mdc-dialog__container"],[1,"mat-mdc-dialog-surface","mdc-dialog__surface"],["cdkPortalOutlet",""]],template:function(n,r){n&1&&(f(0,"div",0)(1,"div",1),Y(2,pve,0,0,"ng-template",2),p()())},dependencies:[zo],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-dialog,.mdc-dialog__scrim{position:fixed;top:0;left:0;align-items:center;justify-content:center;box-sizing:border-box;width:100%;height:100%}.mdc-dialog{display:none;z-index:var(--mdc-dialog-z-index, 7)}.mdc-dialog .mdc-dialog__content{padding:20px 24px 20px 24px}.mdc-dialog .mdc-dialog__surface{min-width:280px}@media(max-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:calc(100vw - 32px)}}@media(min-width: 592px){.mdc-dialog .mdc-dialog__surface{max-width:560px}}.mdc-dialog .mdc-dialog__surface{max-height:calc(100% - 32px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-width:none}@media(max-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px;width:560px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 112px)}}@media(max-width: 720px)and (min-width: 672px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:560px}}@media(max-width: 720px)and (max-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:calc(100vh - 160px)}}@media(max-width: 720px)and (min-height: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{max-height:560px}}@media(max-width: 720px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}@media(max-width: 720px)and (max-height: 400px),(max-width: 600px),(min-width: 720px)and (max-height: 400px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{height:100%;max-height:100vh;max-width:100vw;width:100vw;border-radius:0}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{order:-1;left:-12px}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__header{padding:0 16px 9px;justify-content:flex-start}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__title{margin-left:calc(16px - 2 * 12px)}}@media(min-width: 960px){.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface{width:calc(100vw - 400px)}.mdc-dialog.mdc-dialog--fullscreen .mdc-dialog__surface .mdc-dialog__close{right:-12px}}.mdc-dialog.mdc-dialog__scrim--hidden .mdc-dialog__scrim{opacity:0}.mdc-dialog__scrim{opacity:0;z-index:-1}.mdc-dialog__container{display:flex;flex-direction:row;align-items:center;justify-content:space-around;box-sizing:border-box;height:100%;opacity:0;pointer-events:none}.mdc-dialog__surface{position:relative;display:flex;flex-direction:column;flex-grow:0;flex-shrink:0;box-sizing:border-box;max-width:100%;max-height:100%;pointer-events:auto;overflow-y:auto;outline:0;transform:scale(0.8)}.mdc-dialog__surface .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}[dir=rtl] .mdc-dialog__surface,.mdc-dialog__surface[dir=rtl]{text-align:right}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-dialog__surface{outline:2px solid windowText}}.mdc-dialog__surface::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:2px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-dialog__surface::before{border-color:CanvasText}}@media screen and (-ms-high-contrast: active),screen and (-ms-high-contrast: none){.mdc-dialog__surface::before{content:none}}.mdc-dialog__title{display:block;margin-top:0;position:relative;flex-shrink:0;box-sizing:border-box;margin:0 0 1px;padding:0 24px 9px}.mdc-dialog__title::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}[dir=rtl] .mdc-dialog__title,.mdc-dialog__title[dir=rtl]{text-align:right}.mdc-dialog--scrollable .mdc-dialog__title{margin-bottom:1px;padding-bottom:15px}.mdc-dialog--fullscreen .mdc-dialog__header{align-items:baseline;border-bottom:1px solid rgba(0,0,0,0);display:inline-flex;justify-content:space-between;padding:0 24px 9px;z-index:1}@media screen and (forced-colors: active){.mdc-dialog--fullscreen .mdc-dialog__header{border-bottom-color:CanvasText}}.mdc-dialog--fullscreen .mdc-dialog__header .mdc-dialog__close{right:-12px}.mdc-dialog--fullscreen .mdc-dialog__title{margin-bottom:0;padding:0;border-bottom:0}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__title{border-bottom:0;margin-bottom:0}.mdc-dialog--fullscreen .mdc-dialog__close{top:5px}.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog--fullscreen.mdc-dialog--scrollable .mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--fullscreen--titleless .mdc-dialog__close{margin-top:4px}.mdc-dialog--fullscreen--titleless.mdc-dialog--scrollable .mdc-dialog__close{margin-top:0}.mdc-dialog__content{flex-grow:1;box-sizing:border-box;margin:0;overflow:auto}.mdc-dialog__content>:first-child{margin-top:0}.mdc-dialog__content>:last-child{margin-bottom:0}.mdc-dialog__title+.mdc-dialog__content,.mdc-dialog__header+.mdc-dialog__content{padding-top:0}.mdc-dialog--scrollable .mdc-dialog__title+.mdc-dialog__content{padding-top:8px;padding-bottom:8px}.mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:6px 0 0}.mdc-dialog--scrollable .mdc-dialog__content .mdc-deprecated-list:first-child:last-child{padding:0}.mdc-dialog__actions{display:flex;position:relative;flex-shrink:0;flex-wrap:wrap;align-items:center;justify-content:flex-end;box-sizing:border-box;min-height:52px;margin:0;padding:8px;border-top:1px solid rgba(0,0,0,0)}@media screen and (forced-colors: active){.mdc-dialog__actions{border-top-color:CanvasText}}.mdc-dialog--stacked .mdc-dialog__actions{flex-direction:column;align-items:flex-end}.mdc-dialog__button{margin-left:8px;margin-right:0;max-width:100%;text-align:right}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{margin-left:0;margin-right:8px}.mdc-dialog__button:first-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button:first-child,.mdc-dialog__button:first-child[dir=rtl]{margin-left:0;margin-right:0}[dir=rtl] .mdc-dialog__button,.mdc-dialog__button[dir=rtl]{text-align:left}.mdc-dialog--stacked .mdc-dialog__button:not(:first-child){margin-top:12px}.mdc-dialog--open,.mdc-dialog--opening,.mdc-dialog--closing{display:flex}.mdc-dialog--opening .mdc-dialog__scrim{transition:opacity 150ms linear}.mdc-dialog--opening .mdc-dialog__container{transition:opacity 75ms linear,transform 150ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-dialog--closing .mdc-dialog__scrim,.mdc-dialog--closing .mdc-dialog__container{transition:opacity 75ms linear}.mdc-dialog--closing .mdc-dialog__container{transform:none}.mdc-dialog--closing .mdc-dialog__surface{transform:none}.mdc-dialog--open .mdc-dialog__scrim{opacity:1}.mdc-dialog--open .mdc-dialog__container{opacity:1}.mdc-dialog--open .mdc-dialog__surface{transform:none}.mdc-dialog--open.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim{opacity:1}.mdc-dialog--open.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{transition:opacity 75ms linear}.mdc-dialog--open.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim{transition:opacity 150ms linear}.mdc-dialog__surface-scrim{display:none;opacity:0;position:absolute;width:100%;height:100%;z-index:1}.mdc-dialog__surface-scrim--shown .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--showing .mdc-dialog__surface-scrim,.mdc-dialog__surface-scrim--hiding .mdc-dialog__surface-scrim{display:block}.mdc-dialog-scroll-lock{overflow:hidden}.mdc-dialog--no-content-padding .mdc-dialog__content{padding:0}.mdc-dialog--sheet .mdc-dialog__container .mdc-dialog__close{right:12px;top:9px;position:absolute;z-index:1}.mdc-dialog__scrim--removed{pointer-events:none}.mdc-dialog__scrim--removed .mdc-dialog__scrim,.mdc-dialog__scrim--removed .mdc-dialog__surface-scrim{display:none}.mat-mdc-dialog-content{max-height:65vh}.mat-mdc-dialog-container{position:static;display:block}.mat-mdc-dialog-container,.mat-mdc-dialog-container .mdc-dialog__container,.mat-mdc-dialog-container .mdc-dialog__surface{max-height:inherit;min-height:inherit;min-width:inherit;max-width:inherit}.mat-mdc-dialog-container .mdc-dialog__surface{width:100%;height:100%}.mat-mdc-dialog-component-host{display:contents}.mat-mdc-dialog-container{--mdc-dialog-container-elevation: var(--mdc-dialog-container-elevation-shadow);outline:0}.mat-mdc-dialog-container .mdc-dialog__surface{background-color:var(--mdc-dialog-container-color, white)}.mat-mdc-dialog-container .mdc-dialog__surface{box-shadow:var(--mdc-dialog-container-elevation, 0px 11px 15px -7px rgba(0, 0, 0, 0.2), 0px 24px 38px 3px rgba(0, 0, 0, 0.14), 0px 9px 46px 8px rgba(0, 0, 0, 0.12))}.mat-mdc-dialog-container .mdc-dialog__surface{border-radius:var(--mdc-dialog-container-shape, 4px)}.mat-mdc-dialog-container .mdc-dialog__title{font-family:var(--mdc-dialog-subhead-font, Roboto, sans-serif);line-height:var(--mdc-dialog-subhead-line-height, 1.5rem);font-size:var(--mdc-dialog-subhead-size, 1rem);font-weight:var(--mdc-dialog-subhead-weight, 400);letter-spacing:var(--mdc-dialog-subhead-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__title{color:var(--mdc-dialog-subhead-color, rgba(0, 0, 0, 0.87))}.mat-mdc-dialog-container .mdc-dialog__content{font-family:var(--mdc-dialog-supporting-text-font, Roboto, sans-serif);line-height:var(--mdc-dialog-supporting-text-line-height, 1.5rem);font-size:var(--mdc-dialog-supporting-text-size, 1rem);font-weight:var(--mdc-dialog-supporting-text-weight, 400);letter-spacing:var(--mdc-dialog-supporting-text-tracking, 0.03125em)}.mat-mdc-dialog-container .mdc-dialog__content{color:var(--mdc-dialog-supporting-text-color, rgba(0, 0, 0, 0.6))}.mat-mdc-dialog-container .mdc-dialog__container{transition:opacity linear var(--mat-dialog-transition-duration, 0ms)}.mat-mdc-dialog-container .mdc-dialog__surface{transition:transform var(--mat-dialog-transition-duration, 0ms) 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__container,.mat-mdc-dialog-container._mat-animation-noopable .mdc-dialog__surface{transition:none}.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-max-width, 80vw);min-width:var(--mat-dialog-container-min-width, 0)}@media(max-width: 599px){.cdk-overlay-pane.mat-mdc-dialog-panel{max-width:var(--mat-dialog-container-small-max-width, 80vw)}}.mat-mdc-dialog-title{padding:var(--mat-dialog-headline-padding, 0 24px 9px)}.mat-mdc-dialog-content{display:block}.mat-mdc-dialog-container .mat-mdc-dialog-content{padding:var(--mat-dialog-content-padding, 20px 24px)}.mat-mdc-dialog-container-with-actions .mat-mdc-dialog-content{padding:var(--mat-dialog-with-actions-content-padding, 20px 24px)}.mat-mdc-dialog-container .mat-mdc-dialog-title+.mat-mdc-dialog-content{padding-top:0}.mat-mdc-dialog-actions{padding:var(--mat-dialog-actions-padding, 8px);justify-content:var(--mat-dialog-actions-alignment, start)}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-start,.mat-mdc-dialog-actions[align=start]{justify-content:start}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-center,.mat-mdc-dialog-actions[align=center]{justify-content:center}.mat-mdc-dialog-actions.mat-mdc-dialog-actions-align-end,.mat-mdc-dialog-actions[align=end]{justify-content:flex-end}.mat-mdc-dialog-actions .mat-button-base+.mat-button-base,.mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-mdc-dialog-actions .mat-button-base+.mat-button-base,[dir=rtl] .mat-mdc-dialog-actions .mat-mdc-button-base+.mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2})}}return i})(),L7="--mat-dialog-transition-duration";function B7(i){return i==null?null:typeof i=="number"?i:i.endsWith("ms")?pr(i.substring(0,i.length-2)):i.endsWith("s")?pr(i.substring(0,i.length-1))*1e3:i==="0"?0:null}var MC=function(i){return i[i.OPEN=0]="OPEN",i[i.CLOSING=1]="CLOSING",i[i.CLOSED=2]="CLOSED",i}(MC||{}),Qm=class{constructor(t,e,n){this._ref=t,this._containerInstance=n,this._afterOpened=new ke,this._beforeClosed=new ke,this._state=MC.OPEN,this.disableClose=e.disableClose,this.id=t.id,t.addPanelClass("mat-mdc-dialog-panel"),n._animationStateChanged.pipe(Ot(r=>r.state==="opened"),Pt(1)).subscribe(()=>{this._afterOpened.next(),this._afterOpened.complete()}),n._animationStateChanged.pipe(Ot(r=>r.state==="closed"),Pt(1)).subscribe(()=>{clearTimeout(this._closeFallbackTimeout),this._finishDialogClose()}),t.overlayRef.detachments().subscribe(()=>{this._beforeClosed.next(this._result),this._beforeClosed.complete(),this._finishDialogClose()}),_i(this.backdropClick(),this.keydownEvents().pipe(Ot(r=>r.keyCode===27&&!this.disableClose&&!Di(r)))).subscribe(r=>{this.disableClose||(r.preventDefault(),vve(this,r.type==="keydown"?"keyboard":"mouse"))})}close(t){this._result=t,this._containerInstance._animationStateChanged.pipe(Ot(e=>e.state==="closing"),Pt(1)).subscribe(e=>{this._beforeClosed.next(t),this._beforeClosed.complete(),this._ref.overlayRef.detachBackdrop(),this._closeFallbackTimeout=setTimeout(()=>this._finishDialogClose(),e.totalTime+100)}),this._state=MC.CLOSING,this._containerInstance._startExitAnimation()}afterOpened(){return this._afterOpened}afterClosed(){return this._ref.closed}beforeClosed(){return this._beforeClosed}backdropClick(){return this._ref.backdropClick}keydownEvents(){return this._ref.keydownEvents}updatePosition(t){let e=this._ref.config.positionStrategy;return t&&(t.left||t.right)?t.left?e.left(t.left):e.right(t.right):e.centerHorizontally(),t&&(t.top||t.bottom)?t.top?e.top(t.top):e.bottom(t.bottom):e.centerVertically(),this._ref.updatePosition(),this}updateSize(t="",e=""){return this._ref.updateSize(t,e),this}addPanelClass(t){return this._ref.addPanelClass(t),this}removePanelClass(t){return this._ref.removePanelClass(t),this}getState(){return this._state}_finishDialogClose(){this._state=MC.CLOSED,this._ref.close(this._result,{focusOrigin:this._closeInteractionType}),this.componentInstance=null}};function vve(i,t,e){return i._closeInteractionType=t,i.close(e)}var c2=new te("MatMdcDialogData"),yve=new te("mat-mdc-dialog-default-options"),xve=new te("mat-mdc-dialog-scroll-strategy",{providedIn:"root",factory:()=>{let i=He(Qi);return()=>i.scrollStrategies.block()}});var wve=0,_s=(()=>{class i{get openDialogs(){return this._parentDialog?this._parentDialog.openDialogs:this._openDialogsAtThisLevel}get afterOpened(){return this._parentDialog?this._parentDialog.afterOpened:this._afterOpenedAtThisLevel}_getAfterAllClosed(){let e=this._parentDialog;return e?e._getAfterAllClosed():this._afterAllClosedAtThisLevel}constructor(e,n,r,s,o,a,l,c){this._overlay=e,this._defaultOptions=s,this._scrollStrategy=o,this._parentDialog=a,this._openDialogsAtThisLevel=[],this._afterAllClosedAtThisLevel=new ke,this._afterOpenedAtThisLevel=new ke,this.dialogConfigClass=ib,this.afterAllClosed=Zo(()=>this.openDialogs.length?this._getAfterAllClosed():this._getAfterAllClosed().pipe(Pi(void 0))),this._dialog=n.get(a2),this._dialogRefConstructor=Qm,this._dialogContainerType=bve,this._dialogDataToken=c2}open(e,n){let r;n=ve(ve({},this._defaultOptions||new ib),n),n.id=n.id||`mat-mdc-dialog-${wve++}`,n.scrollStrategy=n.scrollStrategy||this._scrollStrategy();let s=this._dialog.open(e,Tt(ve({},n),{positionStrategy:this._overlay.position().global().centerHorizontally().centerVertically(),disableClose:!0,closeOnDestroy:!1,closeOnOverlayDetachments:!1,container:{type:this._dialogContainerType,providers:()=>[{provide:this.dialogConfigClass,useValue:n},{provide:cu,useValue:n}]},templateContext:()=>({dialogRef:r}),providers:(o,a,l)=>(r=new this._dialogRefConstructor(o,n,l),r.updatePosition(n?.position),[{provide:this._dialogContainerType,useValue:l},{provide:this._dialogDataToken,useValue:a.data},{provide:this._dialogRefConstructor,useValue:r}])}));return r.componentRef=s.componentRef,r.componentInstance=s.componentInstance,this.openDialogs.push(r),this.afterOpened.next(r),r.afterClosed().subscribe(()=>{let o=this.openDialogs.indexOf(r);o>-1&&(this.openDialogs.splice(o,1),this.openDialogs.length||this._getAfterAllClosed().next())}),r}closeAll(){this._closeDialogs(this.openDialogs)}getDialogById(e){return this.openDialogs.find(n=>n.id===e)}ngOnDestroy(){this._closeDialogs(this._openDialogsAtThisLevel),this._afterAllClosedAtThisLevel.complete(),this._afterOpenedAtThisLevel.complete()}_closeDialogs(e){let n=e.length;for(;n--;)e[n].close()}static{this.\u0275fac=function(n){return new(n||i)(V(Qi),V(xn),V(e0,8),V(yve,8),V(xve),V(i,12),V(Ym),V(Ut,8))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Cve=(()=>{class i{constructor(e,n,r){this._dialogRef=e,this._elementRef=n,this._dialog=r}ngOnInit(){this._dialogRef||(this._dialogRef=Sve(this._elementRef,this._dialog.openDialogs)),this._dialogRef&&Promise.resolve().then(()=>{this._onAdd()})}ngOnDestroy(){this._dialogRef?._containerInstance&&Promise.resolve().then(()=>{this._onRemove()})}static{this.\u0275fac=function(n){return new(n||i)(x(Qm,8),x(fe),x(_s))}}static{this.\u0275dir=J({type:i,standalone:!0})}}return i})();var V7=(()=>{class i extends Cve{_onAdd(){this._dialogRef._containerInstance?._updateActionSectionCount?.(1)}_onRemove(){this._dialogRef._containerInstance?._updateActionSectionCount?.(-1)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["","mat-dialog-actions",""],["mat-dialog-actions"],["","matDialogActions",""]],hostAttrs:[1,"mat-mdc-dialog-actions","mdc-dialog__actions"],hostVars:6,hostBindings:function(n,r){n&2&&le("mat-mdc-dialog-actions-align-start",r.align==="start")("mat-mdc-dialog-actions-align-center",r.align==="center")("mat-mdc-dialog-actions-align-end",r.align==="end")},inputs:{align:"align"},standalone:!0,features:[Ve]})}}return i})();function Sve(i,t){let e=i.nativeElement.parentElement;for(;e&&!e.classList.contains("mat-mdc-dialog-container");)e=e.parentElement;return e?t.find(n=>n.id===e.id):null}var z7=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({providers:[_s],imports:[R7,hc,Gs,ze,ze]})}}return i})();var kve=["mat-button",""],Eve=[[["",8,"material-icons",3,"iconPositionEnd",""],["mat-icon",3,"iconPositionEnd",""],["","matButtonIcon","",3,"iconPositionEnd",""]],"*",[["","iconPositionEnd","",8,"material-icons"],["mat-icon","iconPositionEnd",""],["","matButtonIcon","","iconPositionEnd",""]]],Tve=[".material-icons:not([iconPositionEnd]), mat-icon:not([iconPositionEnd]), [matButtonIcon]:not([iconPositionEnd])","*",".material-icons[iconPositionEnd], mat-icon[iconPositionEnd], [matButtonIcon][iconPositionEnd]"];var Ive=".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}";var Dve=["mat-icon-button",""],Mve=["*"];var Ave=new te("MAT_BUTTON_CONFIG");var Ove=[{attribute:"mat-button",mdcClasses:["mdc-button","mat-mdc-button"]},{attribute:"mat-flat-button",mdcClasses:["mdc-button","mdc-button--unelevated","mat-mdc-unelevated-button"]},{attribute:"mat-raised-button",mdcClasses:["mdc-button","mdc-button--raised","mat-mdc-raised-button"]},{attribute:"mat-stroked-button",mdcClasses:["mdc-button","mdc-button--outlined","mat-mdc-outlined-button"]},{attribute:"mat-fab",mdcClasses:["mdc-fab","mat-mdc-fab"]},{attribute:"mat-mini-fab",mdcClasses:["mdc-fab","mdc-fab--mini","mat-mdc-mini-fab"]},{attribute:"mat-icon-button",mdcClasses:["mdc-icon-button","mat-mdc-icon-button"]}],j7=(()=>{class i{get ripple(){return this._rippleLoader?.getRipple(this._elementRef.nativeElement)}set ripple(e){this._rippleLoader?.attachRipple(this._elementRef.nativeElement,e)}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=e,this._updateRippleDisabled()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._updateRippleDisabled()}constructor(e,n,r,s){this._elementRef=e,this._platform=n,this._ngZone=r,this._animationMode=s,this._focusMonitor=He(zr),this._rippleLoader=He(_7),this._isFab=!1,this._disableRipple=!1,this._disabled=!1;let o=He(Ave,{optional:!0}),a=e.nativeElement,l=a.classList;this.disabledInteractive=o?.disabledInteractive??!1,this._rippleLoader?.configureRipple(a,{className:"mat-mdc-button-ripple"});for(let{attribute:c,mdcClasses:d}of Ove)a.hasAttribute(c)&&l.add(...d)}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef),this._rippleLoader?.destroyRipple(this._elementRef.nativeElement)}focus(e="program",n){e?this._focusMonitor.focusVia(this._elementRef.nativeElement,e,n):this._elementRef.nativeElement.focus(n)}_getAriaDisabled(){return this.ariaDisabled!=null?this.ariaDisabled:this.disabled&&this.disabledInteractive?!0:null}_getDisabledAttribute(){return this.disabledInteractive||!this.disabled?null:!0}_updateRippleDisabled(){this._rippleLoader?.setDisabled(this._elementRef.nativeElement,this.disableRipple||this.disabled)}static{this.\u0275fac=function(n){Du()}}static{this.\u0275dir=J({type:i,inputs:{color:"color",disableRipple:[H.HasDecoratorInputTransform,"disableRipple","disableRipple",be],disabled:[H.HasDecoratorInputTransform,"disabled","disabled",be],ariaDisabled:[H.HasDecoratorInputTransform,"aria-disabled","ariaDisabled",be],disabledInteractive:[H.HasDecoratorInputTransform,"disabledInteractive","disabledInteractive",be]},features:[Ge]})}}return i})();var ir=(()=>{class i extends j7{constructor(e,n,r,s){super(e,n,r,s)}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(dt),x(_e),x(Ut,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["button","mat-button",""],["button","mat-raised-button",""],["button","mat-flat-button",""],["button","mat-stroked-button",""]],hostVars:14,hostBindings:function(n,r){n&2&&(Se("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Hn(r.color?"mat-"+r.color:""),le("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Ve,Re],attrs:kve,ngContentSelectors:Tve,decls:7,vars:4,consts:[[1,"mat-mdc-button-persistent-ripple"],[1,"mdc-button__label"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,r){n&1&&(nt(Eve),j(0,"span",0),Ee(1),f(2,"span",1),Ee(3,1),p(),Ee(4,2),j(5,"span",2)(6,"span",3)),n&2&&le("mdc-button__ripple",!r._isFab)("mdc-fab__ripple",r._isFab)},styles:['.mdc-touch-target-wrapper{display:inline}.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity, 0);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button{position:relative;display:inline-flex;align-items:center;justify-content:center;box-sizing:border-box;min-width:64px;border:none;outline:none;line-height:inherit;user-select:none;-webkit-appearance:none;overflow:visible;vertical-align:middle;background:rgba(0,0,0,0)}.mdc-button .mdc-elevation-overlay{width:100%;height:100%;top:0;left:0}.mdc-button::-moz-focus-inner{padding:0;border:0}.mdc-button:active{outline:none}.mdc-button:hover{cursor:pointer}.mdc-button:disabled{cursor:default;pointer-events:none}.mdc-button[hidden]{display:none}.mdc-button .mdc-button__icon{margin-left:0;margin-right:8px;display:inline-block;position:relative;vertical-align:top}[dir=rtl] .mdc-button .mdc-button__icon,.mdc-button .mdc-button__icon[dir=rtl]{margin-left:8px;margin-right:0}.mdc-button .mdc-button__progress-indicator{font-size:0;position:absolute;transform:translate(-50%, -50%);top:50%;left:50%;line-height:initial}.mdc-button .mdc-button__label{position:relative}.mdc-button .mdc-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px);display:none}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring{border-color:CanvasText}}.mdc-button .mdc-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-button .mdc-button__focus-ring::after{border-color:CanvasText}}@media screen and (forced-colors: active){.mdc-button.mdc-ripple-upgraded--background-focused .mdc-button__focus-ring,.mdc-button:not(.mdc-ripple-upgraded):focus .mdc-button__focus-ring{display:block}}.mdc-button .mdc-button__touch{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%)}.mdc-button__label+.mdc-button__icon{margin-left:8px;margin-right:0}[dir=rtl] .mdc-button__label+.mdc-button__icon,.mdc-button__label+.mdc-button__icon[dir=rtl]{margin-left:0;margin-right:8px}svg.mdc-button__icon{fill:currentColor}.mdc-button--touch{margin-top:6px;margin-bottom:6px}.mdc-button{padding:0 8px 0 8px}.mdc-button--unelevated{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--unelevated.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--unelevated.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--raised{transition:box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);padding:0 16px 0 16px}.mdc-button--raised.mdc-button--icon-trailing{padding:0 12px 0 16px}.mdc-button--raised.mdc-button--icon-leading{padding:0 16px 0 12px}.mdc-button--outlined{border-style:solid;transition:border 280ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-button--outlined .mdc-button__ripple{border-style:solid;border-color:rgba(0,0,0,0)}.mat-mdc-button{font-family:var(--mdc-text-button-label-text-font);font-size:var(--mdc-text-button-label-text-size);letter-spacing:var(--mdc-text-button-label-text-tracking);font-weight:var(--mdc-text-button-label-text-weight);text-transform:var(--mdc-text-button-label-text-transform);height:var(--mdc-text-button-container-height);border-radius:var(--mdc-text-button-container-shape);padding:0 var(--mat-text-button-horizontal-padding, 8px)}.mat-mdc-button:not(:disabled){color:var(--mdc-text-button-label-text-color)}.mat-mdc-button:disabled{color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button .mdc-button__ripple{border-radius:var(--mdc-text-button-container-shape)}.mat-mdc-button:has(.material-icons,mat-icon,[matButtonIcon]){padding:0 var(--mat-text-button-with-icon-horizontal-padding, 8px)}.mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}[dir=rtl] .mat-mdc-button>.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}.mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-offset, 0);margin-left:var(--mat-text-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-button .mdc-button__label+.mat-icon{margin-right:var(--mat-text-button-icon-spacing, 8px);margin-left:var(--mat-text-button-icon-offset, 0)}.mat-mdc-button .mat-ripple-element{background-color:var(--mat-text-button-ripple-color)}.mat-mdc-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-state-layer-color)}.mat-mdc-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-text-button-disabled-state-layer-color)}.mat-mdc-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-hover-state-layer-opacity)}.mat-mdc-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-focus-state-layer-opacity)}.mat-mdc-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-text-button-pressed-state-layer-opacity)}.mat-mdc-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-text-button-touch-target-display)}.mat-mdc-button[disabled],.mat-mdc-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-text-button-disabled-label-text-color)}.mat-mdc-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-unelevated-button{font-family:var(--mdc-filled-button-label-text-font);font-size:var(--mdc-filled-button-label-text-size);letter-spacing:var(--mdc-filled-button-label-text-tracking);font-weight:var(--mdc-filled-button-label-text-weight);text-transform:var(--mdc-filled-button-label-text-transform);height:var(--mdc-filled-button-container-height);border-radius:var(--mdc-filled-button-container-shape);padding:0 var(--mat-filled-button-horizontal-padding, 16px)}.mat-mdc-unelevated-button:not(:disabled){background-color:var(--mdc-filled-button-container-color)}.mat-mdc-unelevated-button:disabled{background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button:not(:disabled){color:var(--mdc-filled-button-label-text-color)}.mat-mdc-unelevated-button:disabled{color:var(--mdc-filled-button-disabled-label-text-color)}.mat-mdc-unelevated-button .mdc-button__ripple{border-radius:var(--mdc-filled-button-container-shape)}.mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-unelevated-button>.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}.mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-offset, -4px);margin-left:var(--mat-filled-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-unelevated-button .mdc-button__label+.mat-icon{margin-right:var(--mat-filled-button-icon-spacing, 8px);margin-left:var(--mat-filled-button-icon-offset, -4px)}.mat-mdc-unelevated-button .mat-ripple-element{background-color:var(--mat-filled-button-ripple-color)}.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-state-layer-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-filled-button-disabled-state-layer-color)}.mat-mdc-unelevated-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-hover-state-layer-opacity)}.mat-mdc-unelevated-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-focus-state-layer-opacity)}.mat-mdc-unelevated-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-filled-button-pressed-state-layer-opacity)}.mat-mdc-unelevated-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-filled-button-touch-target-display)}.mat-mdc-unelevated-button[disabled],.mat-mdc-unelevated-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-filled-button-disabled-label-text-color);background-color:var(--mdc-filled-button-disabled-container-color)}.mat-mdc-unelevated-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-raised-button{font-family:var(--mdc-protected-button-label-text-font);font-size:var(--mdc-protected-button-label-text-size);letter-spacing:var(--mdc-protected-button-label-text-tracking);font-weight:var(--mdc-protected-button-label-text-weight);text-transform:var(--mdc-protected-button-label-text-transform);height:var(--mdc-protected-button-container-height);border-radius:var(--mdc-protected-button-container-shape);padding:0 var(--mat-protected-button-horizontal-padding, 16px);box-shadow:var(--mdc-protected-button-container-elevation-shadow)}.mat-mdc-raised-button:not(:disabled){background-color:var(--mdc-protected-button-container-color)}.mat-mdc-raised-button:disabled{background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button:not(:disabled){color:var(--mdc-protected-button-label-text-color)}.mat-mdc-raised-button:disabled{color:var(--mdc-protected-button-disabled-label-text-color)}.mat-mdc-raised-button .mdc-button__ripple{border-radius:var(--mdc-protected-button-container-shape)}.mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-raised-button>.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}.mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-offset, -4px);margin-left:var(--mat-protected-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-raised-button .mdc-button__label+.mat-icon{margin-right:var(--mat-protected-button-icon-spacing, 8px);margin-left:var(--mat-protected-button-icon-offset, -4px)}.mat-mdc-raised-button .mat-ripple-element{background-color:var(--mat-protected-button-ripple-color)}.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-state-layer-color)}.mat-mdc-raised-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-protected-button-disabled-state-layer-color)}.mat-mdc-raised-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-hover-state-layer-opacity)}.mat-mdc-raised-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-focus-state-layer-opacity)}.mat-mdc-raised-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-protected-button-pressed-state-layer-opacity)}.mat-mdc-raised-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-protected-button-touch-target-display)}.mat-mdc-raised-button:hover{box-shadow:var(--mdc-protected-button-hover-container-elevation-shadow)}.mat-mdc-raised-button:focus{box-shadow:var(--mdc-protected-button-focus-container-elevation-shadow)}.mat-mdc-raised-button:active,.mat-mdc-raised-button:focus:active{box-shadow:var(--mdc-protected-button-pressed-container-elevation-shadow)}.mat-mdc-raised-button[disabled],.mat-mdc-raised-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-protected-button-disabled-label-text-color);background-color:var(--mdc-protected-button-disabled-container-color)}.mat-mdc-raised-button[disabled].mat-mdc-button-disabled,.mat-mdc-raised-button.mat-mdc-button-disabled.mat-mdc-button-disabled{box-shadow:var(--mdc-protected-button-disabled-container-elevation-shadow)}.mat-mdc-raised-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-outlined-button{font-family:var(--mdc-outlined-button-label-text-font);font-size:var(--mdc-outlined-button-label-text-size);letter-spacing:var(--mdc-outlined-button-label-text-tracking);font-weight:var(--mdc-outlined-button-label-text-weight);text-transform:var(--mdc-outlined-button-label-text-transform);height:var(--mdc-outlined-button-container-height);border-radius:var(--mdc-outlined-button-container-shape);padding:0 15px 0 15px;border-width:var(--mdc-outlined-button-outline-width);padding:0 var(--mat-outlined-button-horizontal-padding, 15px)}.mat-mdc-outlined-button:not(:disabled){color:var(--mdc-outlined-button-label-text-color)}.mat-mdc-outlined-button:disabled{color:var(--mdc-outlined-button-disabled-label-text-color)}.mat-mdc-outlined-button .mdc-button__ripple{border-radius:var(--mdc-outlined-button-container-shape)}.mat-mdc-outlined-button:not(:disabled){border-color:var(--mdc-outlined-button-outline-color)}.mat-mdc-outlined-button:disabled{border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mdc-button--icon-trailing{padding:0 11px 0 15px}.mat-mdc-outlined-button.mdc-button--icon-leading{padding:0 15px 0 11px}.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:var(--mdc-outlined-button-outline-width)}.mat-mdc-outlined-button .mdc-button__touch{left:calc(-1 * var(--mdc-outlined-button-outline-width));width:calc(100% + 2 * var(--mdc-outlined-button-outline-width))}.mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}[dir=rtl] .mat-mdc-outlined-button>.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}.mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-offset, -4px);margin-left:var(--mat-outlined-button-icon-spacing, 8px)}[dir=rtl] .mat-mdc-outlined-button .mdc-button__label+.mat-icon{margin-right:var(--mat-outlined-button-icon-spacing, 8px);margin-left:var(--mat-outlined-button-icon-offset, -4px)}.mat-mdc-outlined-button .mat-ripple-element{background-color:var(--mat-outlined-button-ripple-color)}.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-state-layer-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-outlined-button-disabled-state-layer-color)}.mat-mdc-outlined-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-hover-state-layer-opacity)}.mat-mdc-outlined-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-focus-state-layer-opacity)}.mat-mdc-outlined-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-outlined-button-pressed-state-layer-opacity)}.mat-mdc-outlined-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:0;right:0;transform:translateY(-50%);display:var(--mat-outlined-button-touch-target-display)}.mat-mdc-outlined-button[disabled],.mat-mdc-outlined-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-outlined-button-disabled-label-text-color);border-color:var(--mdc-outlined-button-disabled-outline-color)}.mat-mdc-outlined-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-button-base{text-decoration:none}.mat-mdc-button,.mat-mdc-unelevated-button,.mat-mdc-raised-button,.mat-mdc-outlined-button{-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple,.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-button .mat-mdc-button-ripple,.mat-mdc-unelevated-button .mat-mdc-button-ripple,.mat-mdc-raised-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-unelevated-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-raised-button .mat-mdc-button-persistent-ripple::before,.mat-mdc-outlined-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-button .mdc-button__label,.mat-mdc-unelevated-button .mdc-button__label,.mat-mdc-raised-button .mdc-button__label,.mat-mdc-outlined-button .mdc-button__label{z-index:1}.mat-mdc-button .mat-mdc-focus-indicator,.mat-mdc-unelevated-button .mat-mdc-focus-indicator,.mat-mdc-raised-button .mat-mdc-focus-indicator,.mat-mdc-outlined-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-unelevated-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-raised-button:focus .mat-mdc-focus-indicator::before,.mat-mdc-outlined-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-button._mat-animation-noopable,.mat-mdc-unelevated-button._mat-animation-noopable,.mat-mdc-raised-button._mat-animation-noopable,.mat-mdc-outlined-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-button>.mat-icon,.mat-mdc-unelevated-button>.mat-icon,.mat-mdc-raised-button>.mat-icon,.mat-mdc-outlined-button>.mat-icon{display:inline-block;position:relative;vertical-align:top;font-size:1.125rem;height:1.125rem;width:1.125rem}.mat-mdc-outlined-button .mat-mdc-button-ripple,.mat-mdc-outlined-button .mdc-button__ripple{top:-1px;left:-1px;bottom:-1px;right:-1px;border-width:-1px}.mat-mdc-unelevated-button .mat-mdc-focus-indicator::before,.mat-mdc-raised-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 2px)*-1)}.mat-mdc-outlined-button .mat-mdc-focus-indicator::before{margin:calc(calc(var(--mat-mdc-focus-indicator-border-width, 3px) + 3px)*-1)}',".cdk-high-contrast-active .mat-mdc-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-unelevated-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-raised-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-outlined-button:not(.mdc-button--outlined),.cdk-high-contrast-active .mat-mdc-icon-button{outline:solid 1px}"],encapsulation:2,changeDetection:0})}}return i})();var Hr=(()=>{class i extends j7{constructor(e,n,r,s){super(e,n,r,s),this._rippleLoader.configureRipple(this._elementRef.nativeElement,{centered:!0})}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(dt),x(_e),x(Ut,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["button","mat-icon-button",""]],hostVars:14,hostBindings:function(n,r){n&2&&(Se("disabled",r._getDisabledAttribute())("aria-disabled",r._getAriaDisabled()),Hn(r.color?"mat-"+r.color:""),le("mat-mdc-button-disabled",r.disabled)("mat-mdc-button-disabled-interactive",r.disabledInteractive)("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mat-unthemed",!r.color)("mat-mdc-button-base",!0))},exportAs:["matButton"],standalone:!0,features:[Ve,Re],attrs:Dve,ngContentSelectors:Mve,decls:4,vars:0,consts:[[1,"mat-mdc-button-persistent-ripple","mdc-icon-button__ripple"],[1,"mat-mdc-focus-indicator"],[1,"mat-mdc-button-touch-target"]],template:function(n,r){n&1&&(nt(),j(0,"span",0),Ee(1),j(2,"span",1)(3,"span",2))},styles:['.mdc-icon-button{display:inline-block;position:relative;box-sizing:border-box;border:none;outline:none;background-color:rgba(0,0,0,0);fill:currentColor;color:inherit;text-decoration:none;cursor:pointer;user-select:none;z-index:0;overflow:visible}.mdc-icon-button .mdc-icon-button__touch{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%)}@media screen and (forced-colors: active){.mdc-icon-button.mdc-ripple-upgraded--background-focused .mdc-icon-button__focus-ring,.mdc-icon-button:not(.mdc-ripple-upgraded):focus .mdc-icon-button__focus-ring{display:block}}.mdc-icon-button:disabled{cursor:default;pointer-events:none}.mdc-icon-button[hidden]{display:none}.mdc-icon-button--display-flex{align-items:center;display:inline-flex;justify-content:center}.mdc-icon-button__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%;display:none}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring{border-color:CanvasText}}.mdc-icon-button__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-icon-button__focus-ring::after{border-color:CanvasText}}.mdc-icon-button__icon{display:inline-block}.mdc-icon-button__icon.mdc-icon-button__icon--on{display:none}.mdc-icon-button--on .mdc-icon-button__icon{display:none}.mdc-icon-button--on .mdc-icon-button__icon.mdc-icon-button__icon--on{display:inline-block}.mdc-icon-button__link{height:100%;left:0;outline:none;position:absolute;top:0;width:100%}.mat-mdc-icon-button{color:var(--mdc-icon-button-icon-color)}.mat-mdc-icon-button .mdc-button__icon{font-size:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button svg,.mat-mdc-icon-button img{width:var(--mdc-icon-button-icon-size);height:var(--mdc-icon-button-icon-size)}.mat-mdc-icon-button:disabled{color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button{border-radius:50%;flex-shrink:0;text-align:center;width:var(--mdc-icon-button-state-layer-size, 48px);height:var(--mdc-icon-button-state-layer-size, 48px);padding:calc(calc(var(--mdc-icon-button-state-layer-size, 48px) - var(--mdc-icon-button-icon-size, 24px)) / 2);font-size:var(--mdc-icon-button-icon-size);-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-icon-button svg{vertical-align:baseline}.mat-mdc-icon-button[disabled],.mat-mdc-icon-button.mat-mdc-button-disabled{cursor:default;pointer-events:none;color:var(--mdc-icon-button-disabled-icon-color)}.mat-mdc-icon-button.mat-mdc-button-disabled-interactive{pointer-events:auto}.mat-mdc-icon-button .mat-mdc-button-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple,.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none;border-radius:inherit}.mat-mdc-icon-button .mat-mdc-button-ripple{overflow:hidden}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{content:"";opacity:0}.mat-mdc-icon-button .mdc-button__label{z-index:1}.mat-mdc-icon-button .mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute}.mat-mdc-icon-button:focus .mat-mdc-focus-indicator::before{content:""}.mat-mdc-icon-button .mat-ripple-element{background-color:var(--mat-icon-button-ripple-color)}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-state-layer-color)}.mat-mdc-icon-button.mat-mdc-button-disabled .mat-mdc-button-persistent-ripple::before{background-color:var(--mat-icon-button-disabled-state-layer-color)}.mat-mdc-icon-button:hover .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-hover-state-layer-opacity)}.mat-mdc-icon-button.cdk-program-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.cdk-keyboard-focused .mat-mdc-button-persistent-ripple::before,.mat-mdc-icon-button.mat-mdc-button-disabled-interactive:focus .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-focus-state-layer-opacity)}.mat-mdc-icon-button:active .mat-mdc-button-persistent-ripple::before{opacity:var(--mat-icon-button-pressed-state-layer-opacity)}.mat-mdc-icon-button .mat-mdc-button-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-icon-button-touch-target-display)}.mat-mdc-icon-button._mat-animation-noopable{transition:none !important;animation:none !important}.mat-mdc-icon-button .mat-mdc-button-persistent-ripple{border-radius:50%}.mat-mdc-icon-button.mat-unthemed:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-primary:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-accent:not(.mdc-ripple-upgraded):focus::before,.mat-mdc-icon-button.mat-warn:not(.mdc-ripple-upgraded):focus::before{background:rgba(0,0,0,0);opacity:1}',Ive],encapsulation:2,changeDetection:0})}}return i})();var Zm=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[ze,ou,ze]})}}return i})();var $s=(()=>{class i{constructor(e,n){this.dialogRef=e,this.data=n}onConfirm(){this.dialogRef.close(!0)}onCancel(){this.dialogRef.close(!1)}static{this.\u0275fac=function(n){return new(n||i)(x(Qm),x(c2))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-confirmation-dialog"]],decls:13,vars:2,consts:[[1,"dialog-container"],[1,"dialog-icon"],[1,"dialog-title"],[1,"dialog-message"],["mat-stroked-button","",1,"btn","cancel",3,"click"],["mat-flat-button","",1,"btn","delete",3,"click"]],template:function(n,r){n&1&&(f(0,"div",0)(1,"div",1)(2,"mat-icon"),y(3,"delete"),p()(),f(4,"h2",2),y(5),p(),f(6,"p",3),y(7),p(),f(8,"mat-dialog-actions")(9,"button",4),$("click",function(){return r.onCancel()}),y(10,"Cancel"),p(),f(11,"button",5),$("click",function(){return r.onConfirm()}),y(12,"Delete"),p()()()),n&2&&(g(5),B(r.data.title),g(2),B(r.data.message))},dependencies:[ir,Yi,V7],styles:["[_nghost-%COMP%]{display:block;font-family:Roboto,sans-serif}.dialog-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:2rem;max-width:360px;background:#fff;border-radius:20px;box-shadow:0 10px 30px #0000001a;text-align:center}.dialog-icon[_ngcontent-%COMP%]{font-size:3rem;margin-bottom:1rem;animation:_ngcontent-%COMP%_bounce 1s ease infinite alternate;color:#1a73e8}.dialog-icon[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{width:54px;height:54px;filter:invert(30%) sepia(100%) saturate(1000%) hue-rotate(180deg) brightness(90%) contrast(100%)}.dialog-title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;margin-bottom:.5rem;color:#202124}.dialog-message[_ngcontent-%COMP%]{font-size:1rem;color:#5f6368;margin-bottom:1.5rem}  mat-dialog-content{display:flex;justify-content:center;width:100%}  mat-dialog-actions{display:flex;justify-content:center;gap:1rem;margin-top:1rem}.btn[_ngcontent-%COMP%]{min-width:100px;padding:.5rem 1rem;border-radius:8px;font-weight:500;text-transform:uppercase;font-size:.9rem}.cancel[_ngcontent-%COMP%]{color:#5f6368}.delete[_ngcontent-%COMP%]{background-color:#d93025;color:#fff}.delete[_ngcontent-%COMP%]:hover{background-color:#b1271b}@keyframes _ngcontent-%COMP%_bounce{0%{transform:translateY(0)}to{transform:translateY(-8px)}}"]})}}return i})();var U7=(()=>{class i{constructor(e){this.firestore=e}saveToHistory(e,n,r){console.log("Saving to history:",n);let s=Tt(ve({},n),{type:r,deletedAt:new Date});return this.firestore.collection(`history/${e}/records`).add(s).then(()=>{console.log("Deleted data saved to history successfully")}).catch(o=>{throw console.error("Failed to save history entry:",o),o})}static{this.\u0275fac=function(n){return new(n||i)(V(tn))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var H7=fs({passive:!0}),q7=(()=>{class i{constructor(e,n){this._platform=e,this._ngZone=n,this._monitoredElements=new Map}monitor(e){if(!this._platform.isBrowser)return Hb;let n=gr(e),r=this._monitoredElements.get(n);if(r)return r.subject;let s=new ke,o="cdk-text-field-autofilled",a=l=>{l.animationName==="cdk-text-field-autofill-start"&&!n.classList.contains(o)?(n.classList.add(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!0}))):l.animationName==="cdk-text-field-autofill-end"&&n.classList.contains(o)&&(n.classList.remove(o),this._ngZone.run(()=>s.next({target:l.target,isAutofilled:!1})))};return this._ngZone.runOutsideAngular(()=>{n.addEventListener("animationstart",a,H7),n.classList.add("cdk-text-field-autofill-monitored")}),this._monitoredElements.set(n,{subject:s,unlisten:()=>{n.removeEventListener("animationstart",a,H7)}}),s}stopMonitoring(e){let n=gr(e),r=this._monitoredElements.get(n);r&&(r.unlisten(),r.subject.complete(),n.classList.remove("cdk-text-field-autofill-monitored"),n.classList.remove("cdk-text-field-autofilled"),this._monitoredElements.delete(n))}ngOnDestroy(){this._monitoredElements.forEach((e,n)=>this.stopMonitoring(n))}static{this.\u0275fac=function(n){return new(n||i)(V(dt),V(_e))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var W7=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({})}}return i})();var d2=class{constructor(t){this._box=t,this._destroyed=new ke,this._resizeSubject=new ke,this._elementObservables=new Map,typeof ResizeObserver<"u"&&(this._resizeObserver=new ResizeObserver(e=>this._resizeSubject.next(e)))}observe(t){return this._elementObservables.has(t)||this._elementObservables.set(t,new vn(e=>{let n=this._resizeSubject.subscribe(e);return this._resizeObserver?.observe(t,{box:this._box}),()=>{this._resizeObserver?.unobserve(t),n.unsubscribe(),this._elementObservables.delete(t)}}).pipe(Ot(e=>e.some(n=>n.target===t)),Jo({bufferSize:1,refCount:!0}),Kt(this._destroyed))),this._elementObservables.get(t)}destroy(){this._destroyed.next(),this._destroyed.complete(),this._resizeSubject.complete(),this._elementObservables.clear()}},G7=(()=>{class i{constructor(){this._observers=new Map,this._ngZone=He(_e),typeof ResizeObserver<"u"}ngOnDestroy(){for(let[,e]of this._observers)e.destroy();this._observers.clear(),typeof ResizeObserver<"u"}observe(e,n){let r=n?.box||"content-box";return this._observers.has(r)||this._observers.set(r,new d2(r)),this._observers.get(r).observe(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var Fve=["notch"],Nve=["matFormFieldNotchedOutline",""],Lve=["*"],Bve=["textField"],Vve=["iconPrefixContainer"],zve=["textPrefixContainer"],jve=["*",[["mat-label"]],[["","matPrefix",""],["","matIconPrefix",""]],[["","matTextPrefix",""]],[["","matTextSuffix",""]],[["","matSuffix",""],["","matIconSuffix",""]],[["mat-error"],["","matError",""]],[["mat-hint",3,"align","end"]],[["mat-hint","align","end"]]],Uve=["*","mat-label","[matPrefix], [matIconPrefix]","[matTextPrefix]","[matTextSuffix]","[matSuffix], [matIconSuffix]","mat-error, [matError]","mat-hint:not([align='end'])","mat-hint[align='end']"];function Hve(i,t){i&1&&j(0,"span",17)}function qve(i,t){if(i&1&&(f(0,"label",16),Ee(1,1),Y(2,Hve,1,0,"span",17),p()),i&2){let e=W(2);z("floating",e._shouldLabelFloat())("monitorResize",e._hasOutline())("id",e._labelId),Se("for",e._control.disableAutomaticLabeling?null:e._control.id),g(2),et(2,!e.hideRequiredMarker&&e._control.required?2:-1)}}function Wve(i,t){if(i&1&&Y(0,qve,3,5,"label",16),i&2){let e=W();et(0,e._hasFloatingLabel()?0:-1)}}function Gve(i,t){i&1&&j(0,"div",5)}function $ve(i,t){}function Kve(i,t){if(i&1&&Y(0,$ve,0,0,"ng-template",11),i&2){W(2);let e=yi(1);z("ngTemplateOutlet",e)}}function Yve(i,t){if(i&1&&(f(0,"div",7),Y(1,Kve,1,1,null,11),p()),i&2){let e=W();z("matFormFieldNotchedOutlineOpen",e._shouldLabelFloat()),g(),et(1,e._forceDisplayInfixLabel()?-1:1)}}function Qve(i,t){i&1&&(f(0,"div",8,2),Ee(2,2),p())}function Xve(i,t){i&1&&(f(0,"div",9,3),Ee(2,3),p())}function Zve(i,t){}function Jve(i,t){if(i&1&&Y(0,Zve,0,0,"ng-template",11),i&2){W();let e=yi(1);z("ngTemplateOutlet",e)}}function eye(i,t){i&1&&(f(0,"div",12),Ee(1,4),p())}function tye(i,t){i&1&&(f(0,"div",13),Ee(1,5),p())}function iye(i,t){i&1&&j(0,"div",14)}function nye(i,t){if(i&1&&(f(0,"div",18),Ee(1,6),p()),i&2){let e=W();z("@transitionMessages",e._subscriptAnimationState)}}function rye(i,t){if(i&1&&(f(0,"mat-hint",20),y(1),p()),i&2){let e=W(2);z("id",e._hintLabelId),g(),B(e.hintLabel)}}function sye(i,t){if(i&1&&(f(0,"div",19),Y(1,rye,2,2,"mat-hint",20),Ee(2,7),j(3,"div",21),Ee(4,8),p()),i&2){let e=W();z("@transitionMessages",e._subscriptAnimationState),g(),et(1,e.hintLabel?1:-1)}}var jo=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["mat-label"]],standalone:!0})}}return i})();var oye=new te("MatError");var aye=0,$7=(()=>{class i{constructor(){this.align="start",this.id=`mat-mdc-hint-${aye++}`}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["mat-hint"]],hostAttrs:[1,"mat-mdc-form-field-hint","mat-mdc-form-field-bottom-align"],hostVars:4,hostBindings:function(n,r){n&2&&(nr("id",r.id),Se("align",null),le("mat-mdc-form-field-hint-end",r.align==="end"))},inputs:{align:"align",id:"id"},standalone:!0})}}return i})(),tW=new te("MatPrefix"),Jm=(()=>{class i{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["","matPrefix",""],["","matIconPrefix",""],["","matTextPrefix",""]],inputs:{_isTextSelector:[H.None,"matTextPrefix","_isTextSelector"]},standalone:!0,features:[je([{provide:tW,useExisting:i}])]})}}return i})(),iW=new te("MatSuffix"),fc=(()=>{class i{constructor(){this._isText=!1}set _isTextSelector(e){this._isText=!0}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["","matSuffix",""],["","matIconSuffix",""],["","matTextSuffix",""]],inputs:{_isTextSelector:[H.None,"matTextSuffix","_isTextSelector"]},standalone:!0,features:[je([{provide:iW,useExisting:i}])]})}}return i})(),nW=new te("FloatingLabelParent"),K7=(()=>{class i{get floating(){return this._floating}set floating(e){this._floating=e,this.monitorResize&&this._handleResize()}get monitorResize(){return this._monitorResize}set monitorResize(e){this._monitorResize=e,this._monitorResize?this._subscribeToResize():this._resizeSubscription.unsubscribe()}constructor(e){this._elementRef=e,this._floating=!1,this._monitorResize=!1,this._resizeObserver=He(G7),this._ngZone=He(_e),this._parent=He(nW),this._resizeSubscription=new At}ngOnDestroy(){this._resizeSubscription.unsubscribe()}getWidth(){return lye(this._elementRef.nativeElement)}get element(){return this._elementRef.nativeElement}_handleResize(){setTimeout(()=>this._parent._handleLabelResized())}_subscribeToResize(){this._resizeSubscription.unsubscribe(),this._ngZone.runOutsideAngular(()=>{this._resizeSubscription=this._resizeObserver.observe(this._elementRef.nativeElement,{box:"border-box"}).subscribe(()=>this._handleResize())})}static{this.\u0275fac=function(n){return new(n||i)(x(fe))}}static{this.\u0275dir=J({type:i,selectors:[["label","matFormFieldFloatingLabel",""]],hostAttrs:[1,"mdc-floating-label","mat-mdc-floating-label"],hostVars:2,hostBindings:function(n,r){n&2&&le("mdc-floating-label--float-above",r.floating)},inputs:{floating:"floating",monitorResize:"monitorResize"},standalone:!0})}}return i})();function lye(i){let t=i;if(t.offsetParent!==null)return t.scrollWidth;let e=t.cloneNode(!0);e.style.setProperty("position","absolute"),e.style.setProperty("transform","translate(-9999px, -9999px)"),document.documentElement.appendChild(e);let n=e.scrollWidth;return e.remove(),n}var Y7="mdc-line-ripple--active",AC="mdc-line-ripple--deactivating",Q7=(()=>{class i{constructor(e,n){this._elementRef=e,this._handleTransitionEnd=r=>{let s=this._elementRef.nativeElement.classList,o=s.contains(AC);r.propertyName==="opacity"&&o&&s.remove(Y7,AC)},n.runOutsideAngular(()=>{e.nativeElement.addEventListener("transitionend",this._handleTransitionEnd)})}activate(){let e=this._elementRef.nativeElement.classList;e.remove(AC),e.add(Y7)}deactivate(){this._elementRef.nativeElement.classList.add(AC)}ngOnDestroy(){this._elementRef.nativeElement.removeEventListener("transitionend",this._handleTransitionEnd)}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(_e))}}static{this.\u0275dir=J({type:i,selectors:[["div","matFormFieldLineRipple",""]],hostAttrs:[1,"mdc-line-ripple"],standalone:!0})}}return i})(),X7=(()=>{class i{constructor(e,n){this._elementRef=e,this._ngZone=n,this.open=!1}ngAfterViewInit(){let e=this._elementRef.nativeElement.querySelector(".mdc-floating-label");e?(this._elementRef.nativeElement.classList.add("mdc-notched-outline--upgraded"),typeof requestAnimationFrame=="function"&&(e.style.transitionDuration="0s",this._ngZone.runOutsideAngular(()=>{requestAnimationFrame(()=>e.style.transitionDuration="")}))):this._elementRef.nativeElement.classList.add("mdc-notched-outline--no-label")}_setNotchWidth(e){!this.open||!e?this._notch.nativeElement.style.width="":this._notch.nativeElement.style.width=`calc(${e}px * var(--mat-mdc-form-field-floating-label-scale, 0.75) + 9px)`}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(_e))}}static{this.\u0275cmp=ae({type:i,selectors:[["div","matFormFieldNotchedOutline",""]],viewQuery:function(n,r){if(n&1&&$e(Fve,5),n&2){let s;ye(s=xe())&&(r._notch=s.first)}},hostAttrs:[1,"mdc-notched-outline"],hostVars:2,hostBindings:function(n,r){n&2&&le("mdc-notched-outline--notched",r.open)},inputs:{open:[H.None,"matFormFieldNotchedOutlineOpen","open"]},standalone:!0,features:[Re],attrs:Nve,ngContentSelectors:Lve,decls:5,vars:0,consts:[["notch",""],[1,"mdc-notched-outline__leading"],[1,"mdc-notched-outline__notch"],[1,"mdc-notched-outline__trailing"]],template:function(n,r){n&1&&(nt(),j(0,"div",1),f(1,"div",2,0),Ee(3),p(),j(4,"div",3))},encapsulation:2,changeDetection:0})}}return i})(),cye={transitionMessages:Cr("transitionMessages",[or("enter",ci({opacity:1,transform:"translateY(0%)"})),wn("void => enter",[ci({opacity:0,transform:"translateY(-5px)"}),An("300ms cubic-bezier(0.55, 0, 0.55, 0.2)")])])},ef=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i})}}return i})();var du=new te("MatFormField"),dye=new te("MAT_FORM_FIELD_DEFAULT_OPTIONS"),Z7=0,J7="fill",uye="auto",eW="fixed",hye="translateY(-50%)",pc=(()=>{class i{get hideRequiredMarker(){return this._hideRequiredMarker}set hideRequiredMarker(e){this._hideRequiredMarker=Vr(e)}get floatLabel(){return this._floatLabel||this._defaults?.floatLabel||uye}set floatLabel(e){e!==this._floatLabel&&(this._floatLabel=e,this._changeDetectorRef.markForCheck())}get appearance(){return this._appearance}set appearance(e){let n=this._appearance,r=e||this._defaults?.appearance||J7;this._appearance=r,this._appearance==="outline"&&this._appearance!==n&&(this._needsOutlineLabelOffsetUpdateOnStable=!0)}get subscriptSizing(){return this._subscriptSizing||this._defaults?.subscriptSizing||eW}set subscriptSizing(e){this._subscriptSizing=e||this._defaults?.subscriptSizing||eW}get hintLabel(){return this._hintLabel}set hintLabel(e){this._hintLabel=e,this._processHints()}get _control(){return this._explicitFormFieldControl||this._formFieldControl}set _control(e){this._explicitFormFieldControl=e}constructor(e,n,r,s,o,a,l,c){this._elementRef=e,this._changeDetectorRef=n,this._ngZone=r,this._dir=s,this._platform=o,this._defaults=a,this._animationMode=l,this._hideRequiredMarker=!1,this.color="primary",this._appearance=J7,this._subscriptSizing=null,this._hintLabel="",this._hasIconPrefix=!1,this._hasTextPrefix=!1,this._hasIconSuffix=!1,this._hasTextSuffix=!1,this._labelId=`mat-mdc-form-field-label-${Z7++}`,this._hintLabelId=`mat-mdc-hint-${Z7++}`,this._subscriptAnimationState="",this._destroyed=new ke,this._isFocused=null,this._needsOutlineLabelOffsetUpdateOnStable=!1,a&&(a.appearance&&(this.appearance=a.appearance),this._hideRequiredMarker=!!a?.hideRequiredMarker,a.color&&(this.color=a.color))}ngAfterViewInit(){this._updateFocusState(),this._subscriptAnimationState="enter",this._changeDetectorRef.detectChanges()}ngAfterContentInit(){this._assertFormFieldControl(),this._initializeControl(),this._initializeSubscript(),this._initializePrefixAndSuffix(),this._initializeOutlineLabelOffsetSubscriptions()}ngAfterContentChecked(){this._assertFormFieldControl()}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}getLabelId(){return this._hasFloatingLabel()?this._labelId:null}getConnectedOverlayOrigin(){return this._textField||this._elementRef}_animateAndLockLabel(){this._hasFloatingLabel()&&(this.floatLabel="always")}_initializeControl(){let e=this._control;e.controlType&&this._elementRef.nativeElement.classList.add(`mat-mdc-form-field-type-${e.controlType}`),e.stateChanges.subscribe(()=>{this._updateFocusState(),this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),e.ngControl&&e.ngControl.valueChanges&&e.ngControl.valueChanges.pipe(Kt(this._destroyed)).subscribe(()=>this._changeDetectorRef.markForCheck())}_checkPrefixAndSuffixTypes(){this._hasIconPrefix=!!this._prefixChildren.find(e=>!e._isText),this._hasTextPrefix=!!this._prefixChildren.find(e=>e._isText),this._hasIconSuffix=!!this._suffixChildren.find(e=>!e._isText),this._hasTextSuffix=!!this._suffixChildren.find(e=>e._isText)}_initializePrefixAndSuffix(){this._checkPrefixAndSuffixTypes(),_i(this._prefixChildren.changes,this._suffixChildren.changes).subscribe(()=>{this._checkPrefixAndSuffixTypes(),this._changeDetectorRef.markForCheck()})}_initializeSubscript(){this._hintChildren.changes.subscribe(()=>{this._processHints(),this._changeDetectorRef.markForCheck()}),this._errorChildren.changes.subscribe(()=>{this._syncDescribedByIds(),this._changeDetectorRef.markForCheck()}),this._validateHints(),this._syncDescribedByIds()}_assertFormFieldControl(){this._control}_updateFocusState(){this._control.focused&&!this._isFocused?(this._isFocused=!0,this._lineRipple?.activate()):!this._control.focused&&(this._isFocused||this._isFocused===null)&&(this._isFocused=!1,this._lineRipple?.deactivate()),this._textField?.nativeElement.classList.toggle("mdc-text-field--focused",this._control.focused)}_initializeOutlineLabelOffsetSubscriptions(){this._prefixChildren.changes.subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Kt(this._destroyed)).subscribe(()=>{this._needsOutlineLabelOffsetUpdateOnStable&&(this._needsOutlineLabelOffsetUpdateOnStable=!1,this._updateOutlineLabelOffset())})}),this._dir.change.pipe(Kt(this._destroyed)).subscribe(()=>this._needsOutlineLabelOffsetUpdateOnStable=!0)}_shouldAlwaysFloat(){return this.floatLabel==="always"}_hasOutline(){return this.appearance==="outline"}_forceDisplayInfixLabel(){return!this._platform.isBrowser&&this._prefixChildren.length&&!this._shouldLabelFloat()}_hasFloatingLabel(){return!!this._labelChildNonStatic||!!this._labelChildStatic}_shouldLabelFloat(){return this._control.shouldLabelFloat||this._shouldAlwaysFloat()}_shouldForward(e){let n=this._control?this._control.ngControl:null;return n&&n[e]}_getDisplayedMessages(){return this._errorChildren&&this._errorChildren.length>0&&this._control.errorState?"error":"hint"}_handleLabelResized(){this._refreshOutlineNotchWidth()}_refreshOutlineNotchWidth(){!this._hasOutline()||!this._floatingLabel||!this._shouldLabelFloat()?this._notchedOutline?._setNotchWidth(0):this._notchedOutline?._setNotchWidth(this._floatingLabel.getWidth())}_processHints(){this._validateHints(),this._syncDescribedByIds()}_validateHints(){this._hintChildren}_syncDescribedByIds(){if(this._control){let e=[];if(this._control.userAriaDescribedBy&&typeof this._control.userAriaDescribedBy=="string"&&e.push(...this._control.userAriaDescribedBy.split(" ")),this._getDisplayedMessages()==="hint"){let n=this._hintChildren?this._hintChildren.find(s=>s.align==="start"):null,r=this._hintChildren?this._hintChildren.find(s=>s.align==="end"):null;n?e.push(n.id):this._hintLabel&&e.push(this._hintLabelId),r&&e.push(r.id)}else this._errorChildren&&e.push(...this._errorChildren.map(n=>n.id));this._control.setDescribedByIds(e)}}_updateOutlineLabelOffset(){if(!this._platform.isBrowser||!this._hasOutline()||!this._floatingLabel)return;let e=this._floatingLabel.element;if(!(this._iconPrefixContainer||this._textPrefixContainer)){e.style.transform="";return}if(!this._isAttachedToDom()){this._needsOutlineLabelOffsetUpdateOnStable=!0;return}let n=this._iconPrefixContainer?.nativeElement,r=this._textPrefixContainer?.nativeElement,s=n?.getBoundingClientRect().width??0,o=r?.getBoundingClientRect().width??0,a=this._dir.value==="rtl"?"-1":"1",l=`${s+o}px`,d=`calc(${a} * (${l} + var(--mat-mdc-form-field-label-offset-x, 0px)))`;e.style.transform=`var(
        --mat-mdc-form-field-label-transform,
        ${hye} translateX(${d})
    )`}_isAttachedToDom(){let e=this._elementRef.nativeElement;if(e.getRootNode){let n=e.getRootNode();return n&&n!==e}return document.documentElement.contains(e)}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(mt),x(_e),x(Mi),x(dt),x(dye,8),x(Ut,8),x(Ze))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-form-field"]],contentQueries:function(n,r,s){if(n&1&&(gt(s,jo,5),gt(s,jo,7),gt(s,ef,5),gt(s,tW,5),gt(s,iW,5),gt(s,oye,5),gt(s,$7,5)),n&2){let o;ye(o=xe())&&(r._labelChildNonStatic=o.first),ye(o=xe())&&(r._labelChildStatic=o.first),ye(o=xe())&&(r._formFieldControl=o.first),ye(o=xe())&&(r._prefixChildren=o),ye(o=xe())&&(r._suffixChildren=o),ye(o=xe())&&(r._errorChildren=o),ye(o=xe())&&(r._hintChildren=o)}},viewQuery:function(n,r){if(n&1&&($e(Bve,5),$e(Vve,5),$e(zve,5),$e(K7,5),$e(X7,5),$e(Q7,5)),n&2){let s;ye(s=xe())&&(r._textField=s.first),ye(s=xe())&&(r._iconPrefixContainer=s.first),ye(s=xe())&&(r._textPrefixContainer=s.first),ye(s=xe())&&(r._floatingLabel=s.first),ye(s=xe())&&(r._notchedOutline=s.first),ye(s=xe())&&(r._lineRipple=s.first)}},hostAttrs:[1,"mat-mdc-form-field"],hostVars:42,hostBindings:function(n,r){n&2&&le("mat-mdc-form-field-label-always-float",r._shouldAlwaysFloat())("mat-mdc-form-field-has-icon-prefix",r._hasIconPrefix)("mat-mdc-form-field-has-icon-suffix",r._hasIconSuffix)("mat-form-field-invalid",r._control.errorState)("mat-form-field-disabled",r._control.disabled)("mat-form-field-autofilled",r._control.autofilled)("mat-form-field-no-animations",r._animationMode==="NoopAnimations")("mat-form-field-appearance-fill",r.appearance=="fill")("mat-form-field-appearance-outline",r.appearance=="outline")("mat-form-field-hide-placeholder",r._hasFloatingLabel()&&!r._shouldLabelFloat())("mat-focused",r._control.focused)("mat-primary",r.color!=="accent"&&r.color!=="warn")("mat-accent",r.color==="accent")("mat-warn",r.color==="warn")("ng-untouched",r._shouldForward("untouched"))("ng-touched",r._shouldForward("touched"))("ng-pristine",r._shouldForward("pristine"))("ng-dirty",r._shouldForward("dirty"))("ng-valid",r._shouldForward("valid"))("ng-invalid",r._shouldForward("invalid"))("ng-pending",r._shouldForward("pending"))},inputs:{hideRequiredMarker:"hideRequiredMarker",color:"color",floatLabel:"floatLabel",appearance:"appearance",subscriptSizing:"subscriptSizing",hintLabel:"hintLabel"},exportAs:["matFormField"],standalone:!0,features:[je([{provide:du,useExisting:i},{provide:nW,useExisting:i}]),Re],ngContentSelectors:Uve,decls:18,vars:21,consts:[["labelTemplate",""],["textField",""],["iconPrefixContainer",""],["textPrefixContainer",""],[1,"mat-mdc-text-field-wrapper","mdc-text-field",3,"click"],[1,"mat-mdc-form-field-focus-overlay"],[1,"mat-mdc-form-field-flex"],["matFormFieldNotchedOutline","",3,"matFormFieldNotchedOutlineOpen"],[1,"mat-mdc-form-field-icon-prefix"],[1,"mat-mdc-form-field-text-prefix"],[1,"mat-mdc-form-field-infix"],[3,"ngTemplateOutlet"],[1,"mat-mdc-form-field-text-suffix"],[1,"mat-mdc-form-field-icon-suffix"],["matFormFieldLineRipple",""],[1,"mat-mdc-form-field-subscript-wrapper","mat-mdc-form-field-bottom-align"],["matFormFieldFloatingLabel","",3,"floating","monitorResize","id"],["aria-hidden","true",1,"mat-mdc-form-field-required-marker","mdc-floating-label--required"],[1,"mat-mdc-form-field-error-wrapper"],[1,"mat-mdc-form-field-hint-wrapper"],[3,"id"],[1,"mat-mdc-form-field-hint-spacer"]],template:function(n,r){if(n&1){let s=Me();nt(jve),Y(0,Wve,1,1,"ng-template",null,0,rr),f(2,"div",4,1),$("click",function(a){return ne(s),re(r._control.onContainerClick(a))}),Y(4,Gve,1,0,"div",5),f(5,"div",6),Y(6,Yve,2,2,"div",7)(7,Qve,3,0,"div",8)(8,Xve,3,0,"div",9),f(9,"div",10),Y(10,Jve,1,1,null,11),Ee(11),p(),Y(12,eye,2,0,"div",12)(13,tye,2,0,"div",13),p(),Y(14,iye,1,0,"div",14),p(),f(15,"div",15),Y(16,nye,2,1)(17,sye,5,2),p()}if(n&2){let s;g(2),le("mdc-text-field--filled",!r._hasOutline())("mdc-text-field--outlined",r._hasOutline())("mdc-text-field--no-label",!r._hasFloatingLabel())("mdc-text-field--disabled",r._control.disabled)("mdc-text-field--invalid",r._control.errorState),g(2),et(4,!r._hasOutline()&&!r._control.disabled?4:-1),g(2),et(6,r._hasOutline()?6:-1),g(),et(7,r._hasIconPrefix?7:-1),g(),et(8,r._hasTextPrefix?8:-1),g(2),et(10,!r._hasOutline()||r._forceDisplayInfixLabel()?10:-1),g(2),et(12,r._hasTextSuffix?12:-1),g(),et(13,r._hasIconSuffix?13:-1),g(),et(14,r._hasOutline()?-1:14),g(),le("mat-mdc-form-field-subscript-dynamic-size",r.subscriptSizing==="dynamic"),g(),et(16,(s=r._getDisplayedMessages())==="error"?16:s==="hint"?17:-1)}},dependencies:[K7,X7,Qf,Q7,$7],styles:['.mdc-text-field{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:0;border-bottom-left-radius:0;display:inline-flex;align-items:baseline;padding:0 16px;position:relative;box-sizing:border-box;overflow:hidden;will-change:opacity,transform,color}.mdc-text-field .mdc-floating-label{top:50%;transform:translateY(-50%);pointer-events:none}.mdc-text-field__input{height:28px;width:100%;min-width:0;border:none;border-radius:0;background:none;appearance:none;padding:0}.mdc-text-field__input::-ms-clear{display:none}.mdc-text-field__input::-webkit-calendar-picker-indicator{display:none}.mdc-text-field__input:focus{outline:none}.mdc-text-field__input:invalid{box-shadow:none}@media all{.mdc-text-field__input::placeholder{opacity:0}}@media all{.mdc-text-field__input:-ms-input-placeholder{opacity:0}}@media all{.mdc-text-field--no-label .mdc-text-field__input::placeholder,.mdc-text-field--focused .mdc-text-field__input::placeholder{opacity:1}}@media all{.mdc-text-field--no-label .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mdc-text-field__input:-ms-input-placeholder{opacity:1}}.mdc-text-field__affix{height:28px;opacity:0;white-space:nowrap}.mdc-text-field--label-floating .mdc-text-field__affix,.mdc-text-field--no-label .mdc-text-field__affix{opacity:1}@supports(-webkit-hyphens: none){.mdc-text-field--outlined .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field__affix--prefix,.mdc-text-field__affix--prefix[dir=rtl]{padding-left:2px;padding-right:0}.mdc-text-field--end-aligned .mdc-text-field__affix--prefix{padding-left:0;padding-right:12px}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--end-aligned .mdc-text-field__affix--prefix[dir=rtl]{padding-left:12px;padding-right:0}.mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field__affix--suffix,.mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:12px}.mdc-text-field--end-aligned .mdc-text-field__affix--suffix{padding-left:2px;padding-right:0}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--end-aligned .mdc-text-field__affix--suffix[dir=rtl]{padding-left:0;padding-right:2px}.mdc-text-field--filled{height:56px}.mdc-text-field--filled::before{display:inline-block;width:0;height:40px;content:"";vertical-align:0}.mdc-text-field--filled .mdc-floating-label{left:16px;right:initial}[dir=rtl] .mdc-text-field--filled .mdc-floating-label,.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:16px}.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{height:100%}.mdc-text-field--filled.mdc-text-field--no-label .mdc-floating-label{display:none}.mdc-text-field--filled.mdc-text-field--no-label::before{display:none}@supports(-webkit-hyphens: none){.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__affix{align-items:center;align-self:center;display:inline-flex;height:100%}}.mdc-text-field--outlined{height:56px;overflow:visible}.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) scale(1)}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) scale(0.75)}.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--outlined .mdc-text-field__input{height:100%}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-shape-small, 4px))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:4px;border-top-right-radius:var(--mdc-shape-small, 4px);border-bottom-right-radius:4px;border-bottom-right-radius:var(--mdc-shape-small, 4px);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:4px;border-top-left-radius:var(--mdc-shape-small, 4px);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:4px;border-bottom-left-radius:var(--mdc-shape-small, 4px)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-shape-small, 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-shape-small, 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-shape-small, 4px))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-shape-small, 4px) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:1px}.mdc-text-field--outlined .mdc-floating-label{left:4px;right:initial}[dir=rtl] .mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:4px}.mdc-text-field--outlined .mdc-text-field__input{display:flex;border:none !important;background-color:rgba(0,0,0,0)}.mdc-text-field--outlined .mdc-notched-outline{z-index:1}.mdc-text-field--textarea{flex-direction:column;align-items:center;width:auto;height:auto;padding:0}.mdc-text-field--textarea .mdc-floating-label{top:19px}.mdc-text-field--textarea .mdc-floating-label:not(.mdc-floating-label--float-above){transform:none}.mdc-text-field--textarea .mdc-text-field__input{flex-grow:1;height:auto;min-height:1.5rem;overflow-x:hidden;overflow-y:auto;box-sizing:border-box;resize:none;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--filled::before{display:none}.mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--float-above{transform:translateY(-10.25px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--filled .mdc-text-field__input{margin-top:23px;margin-bottom:9px}.mdc-text-field--textarea.mdc-text-field--filled.mdc-text-field--no-label .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-27.25px) scale(1)}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-24.75px) scale(0.75)}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-text-field__input{margin-top:16px;margin-bottom:16px}.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label{top:18px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field__input{margin-bottom:2px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter{align-self:flex-end;padding:0 16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::after{display:inline-block;width:0;height:16px;content:"";vertical-align:-16px}.mdc-text-field--textarea.mdc-text-field--with-internal-counter .mdc-text-field-character-counter::before{display:none}.mdc-text-field__resizer{align-self:stretch;display:inline-flex;flex-direction:column;flex-grow:1;max-height:100%;max-width:100%;min-height:56px;min-width:fit-content;min-width:-moz-available;min-width:-webkit-fill-available;overflow:hidden;resize:both}.mdc-text-field--filled .mdc-text-field__resizer{transform:translateY(-1px)}.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--filled .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateY(1px)}.mdc-text-field--outlined .mdc-text-field__resizer{transform:translateX(-1px) translateY(-1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer,.mdc-text-field--outlined .mdc-text-field__resizer[dir=rtl]{transform:translateX(1px) translateY(-1px)}.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter{transform:translateX(1px) translateY(1px)}[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input,[dir=rtl] .mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter,.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field__input[dir=rtl],.mdc-text-field--outlined .mdc-text-field__resizer .mdc-text-field-character-counter[dir=rtl]{transform:translateX(-1px) translateY(1px)}.mdc-text-field--with-leading-icon{padding-left:0;padding-right:16px}[dir=rtl] .mdc-text-field--with-leading-icon,.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:16px;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 48px);left:48px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label[dir=rtl]{left:initial;right:48px}.mdc-text-field--with-leading-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label{left:36px;right:initial}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label[dir=rtl]{left:initial;right:36px}.mdc-text-field--with-leading-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{transform:translateY(-37.25px) translateX(-32px) scale(1)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-37.25px) translateX(32px) scale(1)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{transform:translateY(-34.75px) translateX(-32px) scale(0.75)}[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,[dir=rtl] .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl],.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above[dir=rtl]{transform:translateY(-34.75px) translateX(32px) scale(0.75)}.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:.75rem}.mdc-text-field--with-leading-icon.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:1rem}.mdc-text-field--with-trailing-icon{padding-left:16px;padding-right:0}[dir=rtl] .mdc-text-field--with-trailing-icon,.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0;padding-right:16px}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 64px)}.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 64px/0.75)}.mdc-text-field--with-trailing-icon.mdc-text-field--outlined :not(.mdc-notched-outline--notched) .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label{max-width:calc(100% - 96px)}.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon.mdc-text-field--filled .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 96px/0.75)}.mdc-text-field-helper-line{display:flex;justify-content:space-between;box-sizing:border-box}.mdc-text-field+.mdc-text-field-helper-line{padding-right:16px;padding-left:16px}.mdc-form-field>.mdc-text-field+label{align-self:flex-start}.mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--focused .mdc-notched-outline__trailing{border-width:2px}.mdc-text-field--focused+.mdc-text-field-helper-line .mdc-text-field-helper-text:not(.mdc-text-field-helper-text--validation-msg){opacity:1}.mdc-text-field--focused.mdc-text-field--outlined .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:2px}.mdc-text-field--focused.mdc-text-field--outlined.mdc-text-field--textarea .mdc-notched-outline--notched .mdc-notched-outline__notch{padding-top:0}.mdc-text-field--invalid+.mdc-text-field-helper-line .mdc-text-field-helper-text--validation-msg{opacity:1}.mdc-text-field--disabled{pointer-events:none}@media screen and (forced-colors: active){.mdc-text-field--disabled .mdc-text-field__input{background-color:Window}.mdc-text-field--disabled .mdc-floating-label{z-index:1}}.mdc-text-field--disabled .mdc-floating-label{cursor:default}.mdc-text-field--disabled.mdc-text-field--filled .mdc-text-field__ripple{display:none}.mdc-text-field--disabled .mdc-text-field__input{pointer-events:auto}.mdc-text-field--end-aligned .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--end-aligned .mdc-text-field__input[dir=rtl]{text-align:left}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix{direction:ltr}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{padding-left:0;padding-right:2px}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{padding-left:12px;padding-right:0}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--leading,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--leading{order:1}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--suffix{order:2}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__input,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__input{order:3}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__affix--prefix{order:4}[dir=rtl] .mdc-text-field--ltr-text .mdc-text-field__icon--trailing,.mdc-text-field--ltr-text[dir=rtl] .mdc-text-field__icon--trailing{order:5}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__input,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__input{text-align:right}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--prefix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--prefix{padding-right:12px}[dir=rtl] .mdc-text-field--ltr-text.mdc-text-field--end-aligned .mdc-text-field__affix--suffix,.mdc-text-field--ltr-text.mdc-text-field--end-aligned[dir=rtl] .mdc-text-field__affix--suffix{padding-left:2px}.mdc-floating-label{position:absolute;left:0;-webkit-transform-origin:left top;transform-origin:left top;line-height:1.15rem;text-align:left;text-overflow:ellipsis;white-space:nowrap;cursor:text;overflow:hidden;will-change:transform}[dir=rtl] .mdc-floating-label,.mdc-floating-label[dir=rtl]{right:0;left:auto;-webkit-transform-origin:right top;transform-origin:right top;text-align:right}.mdc-floating-label--float-above{cursor:auto}.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after{margin-left:1px;margin-right:0px;content:"*"}[dir=rtl] .mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)::after,.mdc-floating-label--required:not(.mdc-floating-label--hide-required-marker)[dir=rtl]::after{margin-left:0;margin-right:1px}.mdc-notched-outline{display:flex;position:absolute;top:0;right:0;left:0;box-sizing:border-box;width:100%;max-width:100%;height:100%;text-align:left;pointer-events:none}[dir=rtl] .mdc-notched-outline,.mdc-notched-outline[dir=rtl]{text-align:right}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{box-sizing:border-box;height:100%;pointer-events:none}.mdc-notched-outline__trailing{flex-grow:1}.mdc-notched-outline__notch{flex:0 0 auto;width:auto}.mdc-notched-outline .mdc-floating-label{display:inline-block;position:relative;max-width:100%}.mdc-notched-outline .mdc-floating-label--float-above{text-overflow:clip}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:133.3333333333%}.mdc-notched-outline--notched .mdc-notched-outline__notch{padding-left:0;padding-right:8px;border-top:none}[dir=rtl] .mdc-notched-outline--notched .mdc-notched-outline__notch,.mdc-notched-outline--notched .mdc-notched-outline__notch[dir=rtl]{padding-left:8px;padding-right:0}.mdc-notched-outline--no-label .mdc-notched-outline__notch{display:none}.mdc-line-ripple::before,.mdc-line-ripple::after{position:absolute;bottom:0;left:0;width:100%;border-bottom-style:solid;content:""}.mdc-line-ripple::before{z-index:1}.mdc-line-ripple::after{transform:scaleX(0);opacity:0;z-index:2}.mdc-line-ripple--active::after{transform:scaleX(1);opacity:1}.mdc-line-ripple--deactivating::after{opacity:0}.mdc-floating-label--float-above{transform:translateY(-106%) scale(0.75)}.mdc-notched-outline__leading,.mdc-notched-outline__notch,.mdc-notched-outline__trailing{border-top:1px solid;border-bottom:1px solid}.mdc-notched-outline__leading{border-left:1px solid;border-right:none;width:12px}[dir=rtl] .mdc-notched-outline__leading,.mdc-notched-outline__leading[dir=rtl]{border-left:none;border-right:1px solid}.mdc-notched-outline__trailing{border-left:none;border-right:1px solid}[dir=rtl] .mdc-notched-outline__trailing,.mdc-notched-outline__trailing[dir=rtl]{border-left:1px solid;border-right:none}.mdc-notched-outline__notch{max-width:calc(100% - 12px*2)}.mdc-line-ripple::before{border-bottom-width:1px}.mdc-line-ripple::after{border-bottom-width:2px}.mdc-text-field--filled{border-top-left-radius:var(--mdc-filled-text-field-container-shape);border-top-right-radius:var(--mdc-filled-text-field-container-shape);border-bottom-right-radius:0;border-bottom-left-radius:0}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-caret-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-filled-text-field-error-caret-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-filled-text-field-input-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-filled-text-field-disabled-input-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-focus-label-text-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-hover-label-text-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-disabled-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-focus-label-text-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-filled-text-field-error-hover-label-text-color)}.mdc-text-field--filled .mdc-floating-label{font-family:var(--mdc-filled-text-field-label-text-font);font-size:var(--mdc-filled-text-field-label-text-size);font-weight:var(--mdc-filled-text-field-label-text-weight);letter-spacing:var(--mdc-filled-text-field-label-text-tracking)}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-filled-text-field-input-text-placeholder-color)}}.mdc-text-field--filled:not(.mdc-text-field--disabled){background-color:var(--mdc-filled-text-field-container-color)}.mdc-text-field--filled.mdc-text-field--disabled{background-color:var(--mdc-filled-text-field-disabled-container-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-hover-active-indicator-color)}.mdc-text-field--filled:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-focus-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--disabled .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-disabled-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-line-ripple::before{border-bottom-color:var(--mdc-filled-text-field-error-hover-active-indicator-color)}.mdc-text-field--filled.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-line-ripple::after{border-bottom-color:var(--mdc-filled-text-field-error-focus-active-indicator-color)}.mdc-text-field--filled .mdc-line-ripple::before{border-bottom-width:var(--mdc-filled-text-field-active-indicator-height)}.mdc-text-field--filled .mdc-line-ripple::after{border-bottom-width:var(--mdc-filled-text-field-focus-active-indicator-height)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-caret-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-text-field__input{caret-color:var(--mdc-outlined-text-field-error-caret-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input{color:var(--mdc-outlined-text-field-input-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-text-field__input{color:var(--mdc-outlined-text-field-disabled-input-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-focus-label-text-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-hover-label-text-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-disabled-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-focus-label-text-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-floating-label--float-above{color:var(--mdc-outlined-text-field-error-hover-label-text-color)}.mdc-text-field--outlined .mdc-floating-label{font-family:var(--mdc-outlined-text-field-label-text-font);font-size:var(--mdc-outlined-text-field-label-text-size);font-weight:var(--mdc-outlined-text-field-label-text-weight);letter-spacing:var(--mdc-outlined-text-field-label-text-tracking)}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input::placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}@media all{.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-text-field__input:-ms-input-placeholder{color:var(--mdc-outlined-text-field-input-text-placeholder-color)}}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(.75*var(--mdc-outlined-text-field-label-text-size))}.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined.mdc-notched-outline--upgraded .mdc-floating-label--float-above,.mdc-text-field--outlined.mdc-text-field--textarea.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mdc-outlined-text-field-label-text-size)}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading[dir=rtl]{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__leading{width:max(12px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__notch{max-width:calc(100% - max(12px,var(--mdc-outlined-text-field-container-shape))*2)}}.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing{border-top-left-radius:0;border-top-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-right-radius:var(--mdc-outlined-text-field-container-shape);border-bottom-left-radius:0}[dir=rtl] .mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing,.mdc-text-field--outlined .mdc-notched-outline .mdc-notched-outline__trailing[dir=rtl]{border-top-left-radius:var(--mdc-outlined-text-field-container-shape);border-top-right-radius:0;border-bottom-right-radius:0;border-bottom-left-radius:var(--mdc-outlined-text-field-container-shape)}@supports(top: max(0%)){.mdc-text-field--outlined{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}@supports(top: max(0%)){.mdc-text-field--outlined+.mdc-text-field-helper-line{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-left:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-leading-icon{padding-right:max(16px,var(--mdc-outlined-text-field-container-shape))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-right:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-leading-icon,.mdc-text-field--outlined.mdc-text-field--with-leading-icon[dir=rtl]{padding-left:max(16px,var(--mdc-outlined-text-field-container-shape))}}.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-right:0}@supports(top: max(0%)){.mdc-text-field--outlined.mdc-text-field--with-trailing-icon{padding-left:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-left:0}@supports(top: max(0%)){[dir=rtl] .mdc-text-field--outlined.mdc-text-field--with-trailing-icon,.mdc-text-field--outlined.mdc-text-field--with-trailing-icon[dir=rtl]{padding-right:max(16px,calc(var(--mdc-outlined-text-field-container-shape) + 4px))}}.mdc-text-field--outlined.mdc-text-field--with-leading-icon.mdc-text-field--with-trailing-icon{padding-left:0;padding-right:0}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-hover-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-focus-outline-color)}.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--disabled .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-disabled-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled) .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled):not(.mdc-text-field--focused):hover .mdc-notched-outline .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-hover-outline-color)}.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__leading,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__notch,.mdc-text-field--outlined.mdc-text-field--invalid:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline__trailing{border-color:var(--mdc-outlined-text-field-error-focus-outline-color)}.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled) .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-outline-width)}.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__leading,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__notch,.mdc-text-field--outlined:not(.mdc-text-field--disabled).mdc-text-field--focused .mdc-notched-outline .mdc-notched-outline__trailing{border-width:var(--mdc-outlined-text-field-focus-outline-width)}.mat-mdc-form-field-textarea-control{vertical-align:middle;resize:vertical;box-sizing:border-box;height:auto;margin:0;padding:0;border:none;overflow:auto}.mat-mdc-form-field-input-control.mat-mdc-form-field-input-control{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font:inherit;letter-spacing:inherit;text-decoration:inherit;text-transform:inherit;border:none}.mat-mdc-form-field .mat-mdc-floating-label.mdc-floating-label{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;line-height:normal;pointer-events:all;will-change:auto}.mat-mdc-form-field:not(.mat-form-field-disabled) .mat-mdc-floating-label.mdc-floating-label{cursor:inherit}.mdc-text-field--no-label:not(.mdc-text-field--textarea) .mat-mdc-form-field-input-control.mdc-text-field__input,.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control{height:auto}.mat-mdc-text-field-wrapper .mat-mdc-form-field-input-control.mdc-text-field__input[type=color]{height:23px}.mat-mdc-text-field-wrapper{height:auto;flex:auto;will-change:auto}.mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-left:0;--mat-mdc-form-field-label-offset-x: -16px}.mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-right:0}[dir=rtl] .mat-mdc-text-field-wrapper{padding-left:16px;padding-right:16px}[dir=rtl] .mat-mdc-form-field-has-icon-suffix .mat-mdc-text-field-wrapper{padding-left:0}[dir=rtl] .mat-mdc-form-field-has-icon-prefix .mat-mdc-text-field-wrapper{padding-right:0}.mat-form-field-disabled .mdc-text-field__input::placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-moz-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input::-webkit-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-form-field-disabled .mdc-text-field__input:-ms-input-placeholder{color:var(--mat-form-field-disabled-input-text-placeholder-color)}.mat-mdc-form-field-label-always-float .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms;opacity:1}.mat-mdc-text-field-wrapper .mat-mdc-form-field-infix .mat-mdc-floating-label{left:auto;right:auto}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-text-field__input{display:inline-block}.mat-mdc-form-field .mat-mdc-text-field-wrapper.mdc-text-field .mdc-notched-outline__notch{padding-top:0}.mat-mdc-text-field-wrapper::before{content:none}.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:1px solid rgba(0,0,0,0)}[dir=rtl] .mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field.mat-mdc-form-field .mdc-notched-outline__notch{border-left:none;border-right:1px solid rgba(0,0,0,0)}.mat-mdc-form-field-infix{min-height:var(--mat-form-field-container-height);padding-top:var(--mat-form-field-filled-with-label-container-padding-top);padding-bottom:var(--mat-form-field-filled-with-label-container-padding-bottom)}.mdc-text-field--outlined .mat-mdc-form-field-infix,.mdc-text-field--no-label .mat-mdc-form-field-infix{padding-top:var(--mat-form-field-container-vertical-padding);padding-bottom:var(--mat-form-field-container-vertical-padding)}.mat-mdc-text-field-wrapper .mat-mdc-form-field-flex .mat-mdc-floating-label{top:calc(var(--mat-form-field-container-height)/2)}.mdc-text-field--filled .mat-mdc-floating-label{display:var(--mat-form-field-filled-label-display, block)}.mat-mdc-text-field-wrapper.mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{--mat-mdc-form-field-label-transform: translateY(calc(calc(6.75px + var(--mat-form-field-container-height) / 2) * -1)) scale(var(--mat-mdc-form-field-floating-label-scale, 0.75));transform:var(--mat-mdc-form-field-label-transform)}.mat-mdc-form-field-subscript-wrapper{box-sizing:border-box;width:100%;position:relative}.mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-error-wrapper{position:absolute;top:0;left:0;right:0;padding:0 16px}.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-hint-wrapper,.mat-mdc-form-field-subscript-dynamic-size .mat-mdc-form-field-error-wrapper{position:static}.mat-mdc-form-field-bottom-align::before{content:"";display:inline-block;height:16px}.mat-mdc-form-field-bottom-align.mat-mdc-form-field-subscript-dynamic-size::before{content:unset}.mat-mdc-form-field-hint-end{order:1}.mat-mdc-form-field-hint-wrapper{display:flex}.mat-mdc-form-field-hint-spacer{flex:1 0 1em}.mat-mdc-form-field-error{display:block;color:var(--mat-form-field-error-text-color)}.mat-mdc-form-field-subscript-wrapper,.mat-mdc-form-field-bottom-align::before{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-subscript-text-font);line-height:var(--mat-form-field-subscript-text-line-height);font-size:var(--mat-form-field-subscript-text-size);letter-spacing:var(--mat-form-field-subscript-text-tracking);font-weight:var(--mat-form-field-subscript-text-weight)}.mat-mdc-form-field-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;opacity:0;pointer-events:none;background-color:var(--mat-form-field-state-layer-color)}.mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-hover-state-layer-opacity)}.mat-mdc-form-field.mat-focused .mat-mdc-form-field-focus-overlay{opacity:var(--mat-form-field-focus-state-layer-opacity)}select.mat-mdc-form-field-input-control{-moz-appearance:none;-webkit-appearance:none;background-color:rgba(0,0,0,0);display:inline-flex;box-sizing:border-box}select.mat-mdc-form-field-input-control:not(:disabled){cursor:pointer}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option{color:var(--mat-form-field-select-option-text-color)}select.mat-mdc-form-field-input-control:not(.mat-mdc-native-select-inline) option:disabled{color:var(--mat-form-field-select-disabled-option-text-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{content:"";width:0;height:0;border-left:5px solid rgba(0,0,0,0);border-right:5px solid rgba(0,0,0,0);border-top:5px solid;position:absolute;right:0;top:50%;margin-top:-2.5px;pointer-events:none;color:var(--mat-form-field-enabled-select-arrow-color)}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-infix::after{right:auto;left:0}.mat-mdc-form-field-type-mat-native-select.mat-focused .mat-mdc-form-field-infix::after{color:var(--mat-form-field-focus-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select.mat-form-field-disabled .mat-mdc-form-field-infix::after{color:var(--mat-form-field-disabled-select-arrow-color)}.mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:15px}[dir=rtl] .mat-mdc-form-field-type-mat-native-select .mat-mdc-form-field-input-control{padding-right:0;padding-left:15px}.cdk-high-contrast-active .mat-form-field-appearance-fill .mat-mdc-text-field-wrapper{outline:solid 1px}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-form-field-disabled .mat-mdc-text-field-wrapper{outline-color:GrayText}.cdk-high-contrast-active .mat-form-field-appearance-fill.mat-focused .mat-mdc-text-field-wrapper{outline:dashed 3px}.cdk-high-contrast-active .mat-mdc-form-field.mat-focused .mdc-notched-outline{border:dashed 3px}.mat-mdc-form-field-input-control[type=date],.mat-mdc-form-field-input-control[type=datetime],.mat-mdc-form-field-input-control[type=datetime-local],.mat-mdc-form-field-input-control[type=month],.mat-mdc-form-field-input-control[type=week],.mat-mdc-form-field-input-control[type=time]{line-height:1}.mat-mdc-form-field-input-control::-webkit-datetime-edit{line-height:1;padding:0;margin-bottom:-2px}.mat-mdc-form-field{--mat-mdc-form-field-floating-label-scale: 0.75;display:inline-flex;flex-direction:column;min-width:0;text-align:left;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-form-field-container-text-font);line-height:var(--mat-form-field-container-text-line-height);font-size:var(--mat-form-field-container-text-size);letter-spacing:var(--mat-form-field-container-text-tracking);font-weight:var(--mat-form-field-container-text-weight)}[dir=rtl] .mat-mdc-form-field{text-align:right}.mat-mdc-form-field .mdc-text-field--outlined .mdc-floating-label--float-above{font-size:calc(var(--mat-form-field-outlined-label-text-populated-size)*var(--mat-mdc-form-field-floating-label-scale))}.mat-mdc-form-field .mdc-text-field--outlined .mdc-notched-outline--upgraded .mdc-floating-label--float-above{font-size:var(--mat-form-field-outlined-label-text-populated-size)}.mat-mdc-form-field-flex{display:inline-flex;align-items:baseline;box-sizing:border-box;width:100%}.mat-mdc-text-field-wrapper{width:100%;z-index:0}.mat-mdc-form-field-icon-prefix,.mat-mdc-form-field-icon-suffix{align-self:center;line-height:0;pointer-events:auto;position:relative;z-index:1}.mat-mdc-form-field-icon-prefix>.mat-icon,.mat-mdc-form-field-icon-suffix>.mat-icon{padding:0 12px;box-sizing:content-box}.mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-leading-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-prefix{color:var(--mat-form-field-disabled-leading-icon-color)}.mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-trailing-icon-color)}.mat-form-field-disabled .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-disabled-trailing-icon-color)}.mat-form-field-invalid .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-trailing-icon-color)}.mat-form-field-invalid:not(.mat-focused):not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper:hover .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-hover-trailing-icon-color)}.mat-form-field-invalid.mat-focused .mat-mdc-text-field-wrapper .mat-mdc-form-field-icon-suffix{color:var(--mat-form-field-error-focus-trailing-icon-color)}.mat-mdc-form-field-icon-prefix,[dir=rtl] .mat-mdc-form-field-icon-suffix{padding:0 4px 0 0}.mat-mdc-form-field-icon-suffix,[dir=rtl] .mat-mdc-form-field-icon-prefix{padding:0 0 0 4px}.mat-mdc-form-field-subscript-wrapper .mat-icon,.mat-mdc-form-field label .mat-icon{width:1em;height:1em;font-size:inherit}.mat-mdc-form-field-infix{flex:auto;min-width:0;width:180px;position:relative;box-sizing:border-box}.mat-mdc-form-field .mdc-notched-outline__notch{margin-left:-1px;-webkit-clip-path:inset(-9em -999em -9em 1px);clip-path:inset(-9em -999em -9em 1px)}[dir=rtl] .mat-mdc-form-field .mdc-notched-outline__notch{margin-left:0;margin-right:-1px;-webkit-clip-path:inset(-9em 1px -9em -999em);clip-path:inset(-9em 1px -9em -999em)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition:opacity 67ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input::placeholder{transition-delay:40ms;transition-duration:110ms}}@media all{.mdc-text-field--no-label .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder,.mdc-text-field--focused .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__input:-ms-input-placeholder{transition-delay:40ms;transition-duration:110ms}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field__affix{transition:opacity 150ms 0ms cubic-bezier(0.4, 0, 0.2, 1)}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled.mdc-ripple-upgraded--background-focused .mdc-text-field__ripple::before,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--filled:not(.mdc-ripple-upgraded):focus .mdc-text-field__ripple::before{transition-duration:75ms}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea{transition:none}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--filled .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-filled 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-filled{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 10.25px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--textarea.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-textarea-outlined 250ms 1}@keyframes mdc-floating-label-shake-float-above-textarea-outlined{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 24.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon{0%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - 32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}[dir=rtl] .mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined .mdc-floating-label--shake,.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-text-field--with-leading-icon.mdc-text-field--outlined[dir=rtl] .mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-text-field-outlined-leading-icon 250ms 1}@keyframes mdc-floating-label-shake-float-above-text-field-outlined-leading-icon-rtl{0%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}100%{transform:translateX(calc(0% - -32px)) translateY(calc(0% - 34.75px)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-floating-label{transition:transform 150ms cubic-bezier(0.4, 0, 0.2, 1),color 150ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-floating-label--shake{animation:mdc-floating-label-shake-float-above-standard 250ms 1}@keyframes mdc-floating-label-shake-float-above-standard{0%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}33%{animation-timing-function:cubic-bezier(0.5, 0, 0.701732, 0.495819);transform:translateX(calc(4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}66%{animation-timing-function:cubic-bezier(0.302435, 0.381352, 0.55, 0.956352);transform:translateX(calc(-4% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}100%{transform:translateX(calc(0% - 0%)) translateY(calc(0% - 106%)) scale(0.75)}}.mat-mdc-form-field:not(.mat-form-field-no-animations) .mdc-line-ripple::after{transition:transform 180ms cubic-bezier(0.4, 0, 0.2, 1),opacity 180ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-notched-outline .mdc-floating-label{max-width:calc(100% + 1px)}.mdc-notched-outline--upgraded .mdc-floating-label--float-above{max-width:calc(133.3333333333% + 1px)}'],encapsulation:2,data:{animation:[cye.transitionMessages]},changeDetection:0})}}return i})(),gc=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[ze,$r,Vm,ze]})}}return i})();var u2=new te("MAT_INPUT_VALUE_ACCESSOR"),mye=["button","checkbox","file","hidden","image","radio","range","reset","submit"],fye=0,_c=(()=>{class i{get disabled(){return this._disabled}set disabled(e){this._disabled=Vr(e),this.focused&&(this.focused=!1,this.stateChanges.next())}get id(){return this._id}set id(e){this._id=e||this._uid}get required(){return this._required??this.ngControl?.control?.hasValidator(Jt.required)??!1}set required(e){this._required=Vr(e)}get type(){return this._type}set type(e){this._type=e||"text",this._validateType(),!this._isTextarea&&IR().has(this._type)&&(this._elementRef.nativeElement.type=this._type)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get value(){return this._inputValueAccessor.value}set value(e){e!==this.value&&(this._inputValueAccessor.value=e,this.stateChanges.next())}get readonly(){return this._readonly}set readonly(e){this._readonly=Vr(e)}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,n,r,s,o,a,l,c,d,u){this._elementRef=e,this._platform=n,this.ngControl=r,this._autofillMonitor=c,this._formField=u,this._uid=`mat-input-${fye++}`,this.focused=!1,this.stateChanges=new ke,this.controlType="mat-input",this.autofilled=!1,this._disabled=!1,this._type="text",this._readonly=!1,this._neverEmptyInputTypes=["date","datetime","datetime-local","month","time","week"].filter(_=>IR().has(_)),this._iOSKeyupListener=_=>{let b=_.target;!b.value&&b.selectionStart===0&&b.selectionEnd===0&&(b.setSelectionRange(1,1),b.setSelectionRange(0,0))};let h=this._elementRef.nativeElement,m=h.nodeName.toLowerCase();this._inputValueAccessor=l||h,this._previousNativeValue=this.value,this.id=this.id,n.IOS&&d.runOutsideAngular(()=>{e.nativeElement.addEventListener("keyup",this._iOSKeyupListener)}),this._errorStateTracker=new su(a,r,o,s,this.stateChanges),this._isServer=!this._platform.isBrowser,this._isNativeSelect=m==="select",this._isTextarea=m==="textarea",this._isInFormField=!!u,this._isNativeSelect&&(this.controlType=h.multiple?"mat-native-select-multiple":"mat-native-select")}ngAfterViewInit(){this._platform.isBrowser&&this._autofillMonitor.monitor(this._elementRef.nativeElement).subscribe(e=>{this.autofilled=e.isAutofilled,this.stateChanges.next()})}ngOnChanges(){this.stateChanges.next()}ngOnDestroy(){this.stateChanges.complete(),this._platform.isBrowser&&this._autofillMonitor.stopMonitoring(this._elementRef.nativeElement),this._platform.IOS&&this._elementRef.nativeElement.removeEventListener("keyup",this._iOSKeyupListener)}ngDoCheck(){this.ngControl&&(this.updateErrorState(),this.ngControl.disabled!==null&&this.ngControl.disabled!==this.disabled&&(this.disabled=this.ngControl.disabled,this.stateChanges.next())),this._dirtyCheckNativeValue(),this._dirtyCheckPlaceholder()}focus(e){this._elementRef.nativeElement.focus(e)}updateErrorState(){this._errorStateTracker.updateErrorState()}_focusChanged(e){e!==this.focused&&(this.focused=e,this.stateChanges.next())}_onInput(){}_dirtyCheckNativeValue(){let e=this._elementRef.nativeElement.value;this._previousNativeValue!==e&&(this._previousNativeValue=e,this.stateChanges.next())}_dirtyCheckPlaceholder(){let e=this._getPlaceholder();if(e!==this._previousPlaceholder){let n=this._elementRef.nativeElement;this._previousPlaceholder=e,e?n.setAttribute("placeholder",e):n.removeAttribute("placeholder")}}_getPlaceholder(){return this.placeholder||null}_validateType(){mye.indexOf(this._type)>-1}_isNeverEmpty(){return this._neverEmptyInputTypes.indexOf(this._type)>-1}_isBadInput(){let e=this._elementRef.nativeElement.validity;return e&&e.badInput}get empty(){return!this._isNeverEmpty()&&!this._elementRef.nativeElement.value&&!this._isBadInput()&&!this.autofilled}get shouldLabelFloat(){if(this._isNativeSelect){let e=this._elementRef.nativeElement,n=e.options[0];return this.focused||e.multiple||!this.empty||!!(e.selectedIndex>-1&&n&&n.label)}else return this.focused||!this.empty}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focused||this.focus()}_isInlineSelect(){let e=this._elementRef.nativeElement;return this._isNativeSelect&&(e.multiple||e.size>1)}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(dt),x(hs,10),x(wa,8),x(Ca,8),x($_),x(u2,10),x(q7),x(_e),x(du,8))}}static{this.\u0275dir=J({type:i,selectors:[["input","matInput",""],["textarea","matInput",""],["select","matNativeControl",""],["input","matNativeControl",""],["textarea","matNativeControl",""]],hostAttrs:[1,"mat-mdc-input-element"],hostVars:18,hostBindings:function(n,r){n&1&&$("focus",function(){return r._focusChanged(!0)})("blur",function(){return r._focusChanged(!1)})("input",function(){return r._onInput()}),n&2&&(nr("id",r.id)("disabled",r.disabled)("required",r.required),Se("name",r.name||null)("readonly",r.readonly&&!r._isNativeSelect||null)("aria-invalid",r.empty&&r.required?null:r.errorState)("aria-required",r.required)("id",r.id),le("mat-input-server",r._isServer)("mat-mdc-form-field-textarea-control",r._isInFormField&&r._isTextarea)("mat-mdc-form-field-input-control",r._isInFormField)("mdc-text-field__input",r._isInFormField)("mat-mdc-native-select-inline",r._isInlineSelect()))},inputs:{disabled:"disabled",id:"id",placeholder:"placeholder",name:"name",required:"required",type:"type",errorStateMatcher:"errorStateMatcher",userAriaDescribedBy:[H.None,"aria-describedby","userAriaDescribedBy"],value:"value",readonly:"readonly"},exportAs:["matInput"],standalone:!0,features:[je([{provide:ef,useExisting:i}]),ht]})}}return i})(),h2=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[ze,gc,gc,W7,ze]})}}return i})();var pye=["trigger"],gye=["panel"],_ye=[[["mat-select-trigger"]],"*"],bye=["mat-select-trigger","*"];function vye(i,t){if(i&1&&(f(0,"span",4),y(1),p()),i&2){let e=W();g(),B(e.placeholder)}}function yye(i,t){i&1&&Ee(0)}function xye(i,t){if(i&1&&(f(0,"span",11),y(1),p()),i&2){let e=W(2);g(),B(e.triggerValue)}}function wye(i,t){if(i&1&&(f(0,"span",10),Y(1,yye,1,0)(2,xye,2,1),p()),i&2){let e=W();g(),et(1,e.customTrigger?1:2)}}function Cye(i,t){if(i&1){let e=Me();f(0,"div",12,1),$("@transformPanel.done",function(r){ne(e);let s=W();return re(s._panelDoneAnimatingStream.next(r.toState))})("keydown",function(r){ne(e);let s=W();return re(s._handleKeydown(r))}),Ee(2,1),p()}if(i&2){let e=W();QN("mat-mdc-select-panel mdc-menu-surface mdc-menu-surface--open ",e._getPanelTheme(),""),z("ngClass",e.panelClass)("@transformPanel","showing"),Se("id",e.id+"-panel")("aria-multiselectable",e.multiple)("aria-label",e.ariaLabel||null)("aria-labelledby",e._getPanelAriaLabelledby())}}var Sye={transformPanelWrap:Cr("transformPanelWrap",[wn("* => void",pL("@transformPanel",[fL()],{optional:!0}))]),transformPanel:Cr("transformPanel",[or("void",ci({opacity:0,transform:"scale(1, 0.8)"})),wn("void => showing",An("120ms cubic-bezier(0, 0, 0.2, 1)",ci({opacity:1,transform:"scale(1, 1)"}))),wn("* => void",An("100ms linear",ci({opacity:0})))])};var rW=0,sW=new te("mat-select-scroll-strategy",{providedIn:"root",factory:()=>{let i=He(Qi);return()=>i.scrollStrategies.reposition()}});function kye(i){return()=>i.scrollStrategies.reposition()}var Eye=new te("MAT_SELECT_CONFIG"),Tye={provide:sW,deps:[Qi],useFactory:kye},Iye=new te("MatSelectTrigger"),m2=class{constructor(t,e){this.source=t,this.value=e}},oW=(()=>{class i{_scrollOptionIntoView(e){let n=this.options.toArray()[e];if(n){let r=this.panel.nativeElement,s=p7(e,this.options,this.optionGroups),o=n._getHostElement();e===0&&s===1?r.scrollTop=0:r.scrollTop=g7(o.offsetTop,o.offsetHeight,r.scrollTop,r.offsetHeight)}}_positioningSettled(){this._scrollOptionIntoView(this._keyManager.activeItemIndex||0)}_getChangeEvent(e){return new m2(this,e)}get focused(){return this._focused||this._panelOpen}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._syncParentProperties()}get placeholder(){return this._placeholder}set placeholder(e){this._placeholder=e,this.stateChanges.next()}get required(){return this._required??this.ngControl?.control?.hasValidator(Jt.required)??!1}set required(e){this._required=e,this.stateChanges.next()}get multiple(){return this._multiple}set multiple(e){this._selectionModel,this._multiple=e}get compareWith(){return this._compareWith}set compareWith(e){this._compareWith=e,this._selectionModel&&this._initializeSelection()}get value(){return this._value}set value(e){this._assignValue(e)&&this._onChange(e)}get errorStateMatcher(){return this._errorStateTracker.matcher}set errorStateMatcher(e){this._errorStateTracker.matcher=e}get id(){return this._id}set id(e){this._id=e||this._uid,this.stateChanges.next()}get errorState(){return this._errorStateTracker.errorState}set errorState(e){this._errorStateTracker.errorState=e}constructor(e,n,r,s,o,a,l,c,d,u,h,m,_,b){this._viewportRuler=e,this._changeDetectorRef=n,this._elementRef=o,this._dir=a,this._parentFormField=d,this.ngControl=u,this._liveAnnouncer=_,this._defaultOptions=b,this._positions=[{originX:"start",originY:"bottom",overlayX:"start",overlayY:"top"},{originX:"end",originY:"bottom",overlayX:"end",overlayY:"top"},{originX:"start",originY:"top",overlayX:"start",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"},{originX:"end",originY:"top",overlayX:"end",overlayY:"bottom",panelClass:"mat-mdc-select-panel-above"}],this._panelOpen=!1,this._compareWith=(v,I)=>v===I,this._uid=`mat-select-${rW++}`,this._triggerAriaLabelledBy=null,this._destroy=new ke,this.stateChanges=new ke,this.disableAutomaticLabeling=!0,this._onChange=()=>{},this._onTouched=()=>{},this._valueId=`mat-select-value-${rW++}`,this._panelDoneAnimatingStream=new ke,this._overlayPanelClass=this._defaultOptions?.overlayPanelClass||"",this._focused=!1,this.controlType="mat-select",this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this._hideSingleSelectionIndicator=this._defaultOptions?.hideSingleSelectionIndicator??!1,this._multiple=!1,this.disableOptionCentering=this._defaultOptions?.disableOptionCentering??!1,this.ariaLabel="",this.panelWidth=this._defaultOptions&&typeof this._defaultOptions.panelWidth<"u"?this._defaultOptions.panelWidth:"auto",this._initialized=new ke,this.optionSelectionChanges=Zo(()=>{let v=this.options;return v?v.changes.pipe(Pi(v),bi(()=>_i(...v.map(I=>I.onSelectionChange)))):this._initialized.pipe(bi(()=>this.optionSelectionChanges))}),this.openedChange=new ue,this._openedStream=this.openedChange.pipe(Ot(v=>v),Ue(()=>{})),this._closedStream=this.openedChange.pipe(Ot(v=>!v),Ue(()=>{})),this.selectionChange=new ue,this.valueChange=new ue,this._trackedModal=null,this._skipPredicate=v=>this.panelOpen?!1:v.disabled,this.ngControl&&(this.ngControl.valueAccessor=this),b?.typeaheadDebounceInterval!=null&&(this.typeaheadDebounceInterval=b.typeaheadDebounceInterval),this._errorStateTracker=new su(s,u,c,l,this.stateChanges),this._scrollStrategyFactory=m,this._scrollStrategy=this._scrollStrategyFactory(),this.tabIndex=parseInt(h)||0,this.id=this.id}ngOnInit(){this._selectionModel=new Gm(this.multiple),this.stateChanges.next(),this._panelDoneAnimatingStream.pipe(Ss(),Kt(this._destroy)).subscribe(()=>this._panelDoneAnimating(this.panelOpen)),this._viewportRuler.change().pipe(Kt(this._destroy)).subscribe(()=>{this.panelOpen&&(this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._changeDetectorRef.detectChanges())})}ngAfterContentInit(){this._initialized.next(),this._initialized.complete(),this._initKeyManager(),this._selectionModel.changed.pipe(Kt(this._destroy)).subscribe(e=>{e.added.forEach(n=>n.select()),e.removed.forEach(n=>n.deselect())}),this.options.changes.pipe(Pi(null),Kt(this._destroy)).subscribe(()=>{this._resetOptions(),this._initializeSelection()})}ngDoCheck(){let e=this._getTriggerAriaLabelledby(),n=this.ngControl;if(e!==this._triggerAriaLabelledBy){let r=this._elementRef.nativeElement;this._triggerAriaLabelledBy=e,e?r.setAttribute("aria-labelledby",e):r.removeAttribute("aria-labelledby")}n&&(this._previousControl!==n.control&&(this._previousControl!==void 0&&n.disabled!==null&&n.disabled!==this.disabled&&(this.disabled=n.disabled),this._previousControl=n.control),this.updateErrorState())}ngOnChanges(e){(e.disabled||e.userAriaDescribedBy)&&this.stateChanges.next(),e.typeaheadDebounceInterval&&this._keyManager&&this._keyManager.withTypeAhead(this.typeaheadDebounceInterval)}ngOnDestroy(){this._keyManager?.destroy(),this._destroy.next(),this._destroy.complete(),this.stateChanges.complete(),this._clearFromModal()}toggle(){this.panelOpen?this.close():this.open()}open(){this._canOpen()&&(this._parentFormField&&(this._preferredOverlayOrigin=this._parentFormField.getConnectedOverlayOrigin()),this._overlayWidth=this._getOverlayWidth(this._preferredOverlayOrigin),this._applyModalPanelOwnership(),this._panelOpen=!0,this._keyManager.withHorizontalOrientation(null),this._highlightCorrectOption(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_applyModalPanelOwnership(){let e=this._elementRef.nativeElement.closest('body > .cdk-overlay-container [aria-modal="true"]');if(!e)return;let n=`${this.id}-panel`;this._trackedModal&&OR(this._trackedModal,"aria-owns",n),Z9(e,"aria-owns",n),this._trackedModal=e}_clearFromModal(){if(!this._trackedModal)return;let e=`${this.id}-panel`;OR(this._trackedModal,"aria-owns",e),this._trackedModal=null}close(){this._panelOpen&&(this._panelOpen=!1,this._keyManager.withHorizontalOrientation(this._isRtl()?"rtl":"ltr"),this._changeDetectorRef.markForCheck(),this._onTouched(),this.stateChanges.next())}writeValue(e){this._assignValue(e)}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck(),this.stateChanges.next()}get panelOpen(){return this._panelOpen}get selected(){return this.multiple?this._selectionModel?.selected||[]:this._selectionModel?.selected[0]}get triggerValue(){if(this.empty)return"";if(this._multiple){let e=this._selectionModel.selected.map(n=>n.viewValue);return this._isRtl()&&e.reverse(),e.join(", ")}return this._selectionModel.selected[0].viewValue}updateErrorState(){this._errorStateTracker.updateErrorState()}_isRtl(){return this._dir?this._dir.value==="rtl":!1}_handleKeydown(e){this.disabled||(this.panelOpen?this._handleOpenKeydown(e):this._handleClosedKeydown(e))}_handleClosedKeydown(e){let n=e.keyCode,r=n===40||n===38||n===37||n===39,s=n===13||n===32,o=this._keyManager;if(!o.isTyping()&&s&&!Di(e)||(this.multiple||e.altKey)&&r)e.preventDefault(),this.open();else if(!this.multiple){let a=this.selected;o.onKeydown(e);let l=this.selected;l&&a!==l&&this._liveAnnouncer.announce(l.viewValue,1e4)}}_handleOpenKeydown(e){let n=this._keyManager,r=e.keyCode,s=r===40||r===38,o=n.isTyping();if(s&&e.altKey)e.preventDefault(),this.close();else if(!o&&(r===13||r===32)&&n.activeItem&&!Di(e))e.preventDefault(),n.activeItem._selectViaInteraction();else if(!o&&this._multiple&&r===65&&e.ctrlKey){e.preventDefault();let a=this.options.some(l=>!l.disabled&&!l.selected);this.options.forEach(l=>{l.disabled||(a?l.select():l.deselect())})}else{let a=n.activeItemIndex;n.onKeydown(e),this._multiple&&s&&e.shiftKey&&n.activeItem&&n.activeItemIndex!==a&&n.activeItem._selectViaInteraction()}}_onFocus(){this.disabled||(this._focused=!0,this.stateChanges.next())}_onBlur(){this._focused=!1,this._keyManager?.cancelTypeahead(),!this.disabled&&!this.panelOpen&&(this._onTouched(),this._changeDetectorRef.markForCheck(),this.stateChanges.next())}_onAttached(){this._overlayDir.positionChange.pipe(Pt(1)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this._positioningSettled()})}_getPanelTheme(){return this._parentFormField?`mat-${this._parentFormField.color}`:""}get empty(){return!this._selectionModel||this._selectionModel.isEmpty()}_initializeSelection(){Promise.resolve().then(()=>{this.ngControl&&(this._value=this.ngControl.value),this._setSelectionByValue(this._value),this.stateChanges.next()})}_setSelectionByValue(e){if(this.options.forEach(n=>n.setInactiveStyles()),this._selectionModel.clear(),this.multiple&&e)Array.isArray(e),e.forEach(n=>this._selectOptionByValue(n)),this._sortValues();else{let n=this._selectOptionByValue(e);n?this._keyManager.updateActiveItem(n):this.panelOpen||this._keyManager.updateActiveItem(-1)}this._changeDetectorRef.markForCheck()}_selectOptionByValue(e){let n=this.options.find(r=>{if(this._selectionModel.isSelected(r))return!1;try{return r.value!=null&&this._compareWith(r.value,e)}catch{return!1}});return n&&this._selectionModel.select(n),n}_assignValue(e){return e!==this._value||this._multiple&&Array.isArray(e)?(this.options&&this._setSelectionByValue(e),this._value=e,!0):!1}_getOverlayWidth(e){return this.panelWidth==="auto"?(e instanceof eb?e.elementRef:e||this._elementRef).nativeElement.getBoundingClientRect().width:this.panelWidth===null?"":this.panelWidth}_syncParentProperties(){if(this.options)for(let e of this.options)e._changeDetectorRef.markForCheck()}_initKeyManager(){this._keyManager=new _C(this.options).withTypeAhead(this.typeaheadDebounceInterval).withVerticalOrientation().withHorizontalOrientation(this._isRtl()?"rtl":"ltr").withHomeAndEnd().withPageUpDown().withAllowedModifierKeys(["shiftKey"]).skipPredicate(this._skipPredicate),this._keyManager.tabOut.subscribe(()=>{this.panelOpen&&(!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction(),this.focus(),this.close())}),this._keyManager.change.subscribe(()=>{this._panelOpen&&this.panel?this._scrollOptionIntoView(this._keyManager.activeItemIndex||0):!this._panelOpen&&!this.multiple&&this._keyManager.activeItem&&this._keyManager.activeItem._selectViaInteraction()})}_resetOptions(){let e=_i(this.options.changes,this._destroy);this.optionSelectionChanges.pipe(Kt(e)).subscribe(n=>{this._onSelect(n.source,n.isUserInput),n.isUserInput&&!this.multiple&&this._panelOpen&&(this.close(),this.focus())}),_i(...this.options.map(n=>n._stateChanges)).pipe(Kt(e)).subscribe(()=>{this._changeDetectorRef.detectChanges(),this.stateChanges.next()})}_onSelect(e,n){let r=this._selectionModel.isSelected(e);e.value==null&&!this._multiple?(e.deselect(),this._selectionModel.clear(),this.value!=null&&this._propagateChanges(e.value)):(r!==e.selected&&(e.selected?this._selectionModel.select(e):this._selectionModel.deselect(e)),n&&this._keyManager.setActiveItem(e),this.multiple&&(this._sortValues(),n&&this.focus())),r!==this._selectionModel.isSelected(e)&&this._propagateChanges(),this.stateChanges.next()}_sortValues(){if(this.multiple){let e=this.options.toArray();this._selectionModel.sort((n,r)=>this.sortComparator?this.sortComparator(n,r,e):e.indexOf(n)-e.indexOf(r)),this.stateChanges.next()}}_propagateChanges(e){let n;this.multiple?n=this.selected.map(r=>r.value):n=this.selected?this.selected.value:e,this._value=n,this.valueChange.emit(n),this._onChange(n),this.selectionChange.emit(this._getChangeEvent(n)),this._changeDetectorRef.markForCheck()}_highlightCorrectOption(){if(this._keyManager)if(this.empty){let e=-1;for(let n=0;n<this.options.length;n++)if(!this.options.get(n).disabled){e=n;break}this._keyManager.setActiveItem(e)}else this._keyManager.setActiveItem(this._selectionModel.selected[0])}_canOpen(){return!this._panelOpen&&!this.disabled&&this.options?.length>0}focus(e){this._elementRef.nativeElement.focus(e)}_getPanelAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),n=e?e+" ":"";return this.ariaLabelledby?n+this.ariaLabelledby:e}_getAriaActiveDescendant(){return this.panelOpen&&this._keyManager&&this._keyManager.activeItem?this._keyManager.activeItem.id:null}_getTriggerAriaLabelledby(){if(this.ariaLabel)return null;let e=this._parentFormField?.getLabelId(),n=(e?e+" ":"")+this._valueId;return this.ariaLabelledby&&(n+=" "+this.ariaLabelledby),n}_panelDoneAnimating(e){this.openedChange.emit(e)}setDescribedByIds(e){e.length?this._elementRef.nativeElement.setAttribute("aria-describedby",e.join(" ")):this._elementRef.nativeElement.removeAttribute("aria-describedby")}onContainerClick(){this.focus(),this.open()}get shouldLabelFloat(){return this.panelOpen||!this.empty||this.focused&&!!this.placeholder}static{this.\u0275fac=function(n){return new(n||i)(x(au),x(mt),x(_e),x($_),x(fe),x(Mi,8),x(wa,8),x(Ca,8),x(du,8),x(hs,10),yn("tabindex"),x(sW),x(n7),x(Eye,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-select"]],contentQueries:function(n,r,s){if(n&1&&(gt(s,Iye,5),gt(s,xC,5),gt(s,GR,5)),n&2){let o;ye(o=xe())&&(r.customTrigger=o.first),ye(o=xe())&&(r.options=o),ye(o=xe())&&(r.optionGroups=o)}},viewQuery:function(n,r){if(n&1&&($e(pye,5),$e(gye,5),$e(n2,5)),n&2){let s;ye(s=xe())&&(r.trigger=s.first),ye(s=xe())&&(r.panel=s.first),ye(s=xe())&&(r._overlayDir=s.first)}},hostAttrs:["role","combobox","aria-autocomplete","none","aria-haspopup","listbox",1,"mat-mdc-select"],hostVars:19,hostBindings:function(n,r){n&1&&$("keydown",function(o){return r._handleKeydown(o)})("focus",function(){return r._onFocus()})("blur",function(){return r._onBlur()}),n&2&&(Se("id",r.id)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r.panelOpen?r.id+"-panel":null)("aria-expanded",r.panelOpen)("aria-label",r.ariaLabel||null)("aria-required",r.required.toString())("aria-disabled",r.disabled.toString())("aria-invalid",r.errorState)("aria-activedescendant",r._getAriaActiveDescendant()),le("mat-mdc-select-disabled",r.disabled)("mat-mdc-select-invalid",r.errorState)("mat-mdc-select-required",r.required)("mat-mdc-select-empty",r.empty)("mat-mdc-select-multiple",r.multiple))},inputs:{userAriaDescribedBy:[H.None,"aria-describedby","userAriaDescribedBy"],panelClass:"panelClass",disabled:[H.HasDecoratorInputTransform,"disabled","disabled",be],disableRipple:[H.HasDecoratorInputTransform,"disableRipple","disableRipple",be],tabIndex:[H.HasDecoratorInputTransform,"tabIndex","tabIndex",e=>e==null?0:sr(e)],hideSingleSelectionIndicator:[H.HasDecoratorInputTransform,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",be],placeholder:"placeholder",required:[H.HasDecoratorInputTransform,"required","required",be],multiple:[H.HasDecoratorInputTransform,"multiple","multiple",be],disableOptionCentering:[H.HasDecoratorInputTransform,"disableOptionCentering","disableOptionCentering",be],compareWith:"compareWith",value:"value",ariaLabel:[H.None,"aria-label","ariaLabel"],ariaLabelledby:[H.None,"aria-labelledby","ariaLabelledby"],errorStateMatcher:"errorStateMatcher",typeaheadDebounceInterval:[H.HasDecoratorInputTransform,"typeaheadDebounceInterval","typeaheadDebounceInterval",sr],sortComparator:"sortComparator",id:"id",panelWidth:"panelWidth"},outputs:{openedChange:"openedChange",_openedStream:"opened",_closedStream:"closed",selectionChange:"selectionChange",valueChange:"valueChange"},exportAs:["matSelect"],standalone:!0,features:[je([{provide:ef,useExisting:i},{provide:WR,useExisting:i}]),Ge,ht,Re],ngContentSelectors:bye,decls:11,vars:8,consts:[["fallbackOverlayOrigin","cdkOverlayOrigin","trigger",""],["panel",""],["cdk-overlay-origin","",1,"mat-mdc-select-trigger",3,"click"],[1,"mat-mdc-select-value"],[1,"mat-mdc-select-placeholder","mat-mdc-select-min-line"],[1,"mat-mdc-select-arrow-wrapper"],[1,"mat-mdc-select-arrow"],["viewBox","0 0 24 24","width","24px","height","24px","focusable","false","aria-hidden","true"],["d","M7 10l5 5 5-5z"],["cdk-connected-overlay","","cdkConnectedOverlayLockPosition","","cdkConnectedOverlayHasBackdrop","","cdkConnectedOverlayBackdropClass","cdk-overlay-transparent-backdrop",3,"backdropClick","attach","detach","cdkConnectedOverlayPanelClass","cdkConnectedOverlayScrollStrategy","cdkConnectedOverlayOrigin","cdkConnectedOverlayOpen","cdkConnectedOverlayPositions","cdkConnectedOverlayWidth"],[1,"mat-mdc-select-value-text"],[1,"mat-mdc-select-min-line"],["role","listbox","tabindex","-1",3,"keydown","ngClass"]],template:function(n,r){if(n&1){let s=Me();nt(_ye),f(0,"div",2,0),$("click",function(){return ne(s),re(r.open())}),f(3,"div",3),Y(4,vye,2,1,"span",4)(5,wye,3,1),p(),f(6,"div",5)(7,"div",6),bt(),f(8,"svg",7),j(9,"path",8),p()()()(),Y(10,Cye,3,9,"ng-template",9),$("backdropClick",function(){return ne(s),re(r.close())})("attach",function(){return ne(s),re(r._onAttached())})("detach",function(){return ne(s),re(r.close())})}if(n&2){let s=yi(1);g(3),Se("id",r._valueId),g(),et(4,r.empty?4:5),g(6),z("cdkConnectedOverlayPanelClass",r._overlayPanelClass)("cdkConnectedOverlayScrollStrategy",r._scrollStrategy)("cdkConnectedOverlayOrigin",r._preferredOverlayOrigin||s)("cdkConnectedOverlayOpen",r.panelOpen)("cdkConnectedOverlayPositions",r._positions)("cdkConnectedOverlayWidth",r._overlayWidth)}},dependencies:[eb,n2,t0],styles:['.mat-mdc-select{display:inline-block;width:100%;outline:none;-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;color:var(--mat-select-enabled-trigger-text-color);font-family:var(--mat-select-trigger-text-font);line-height:var(--mat-select-trigger-text-line-height);font-size:var(--mat-select-trigger-text-size);font-weight:var(--mat-select-trigger-text-weight);letter-spacing:var(--mat-select-trigger-text-tracking)}div.mat-mdc-select-panel{box-shadow:var(--mat-select-container-elevation-shadow)}.mat-mdc-select-disabled{color:var(--mat-select-disabled-trigger-text-color)}.mat-mdc-select-trigger{display:inline-flex;align-items:center;cursor:pointer;position:relative;box-sizing:border-box;width:100%}.mat-mdc-select-disabled .mat-mdc-select-trigger{-webkit-user-select:none;user-select:none;cursor:default}.mat-mdc-select-value{width:100%;overflow:hidden;text-overflow:ellipsis;white-space:nowrap}.mat-mdc-select-value-text{white-space:nowrap;overflow:hidden;text-overflow:ellipsis}.mat-mdc-select-arrow-wrapper{height:24px;flex-shrink:0;display:inline-flex;align-items:center}.mat-form-field-appearance-fill .mdc-text-field--no-label .mat-mdc-select-arrow-wrapper{transform:none}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-invalid .mat-mdc-select-arrow,.mat-form-field-invalid:not(.mat-form-field-disabled) .mat-mdc-form-field-infix::after{color:var(--mat-select-invalid-arrow-color)}.mat-mdc-select-arrow{width:10px;height:5px;position:relative;color:var(--mat-select-enabled-arrow-color)}.mat-mdc-form-field.mat-focused .mat-mdc-select-arrow{color:var(--mat-select-focused-arrow-color)}.mat-mdc-form-field .mat-mdc-select.mat-mdc-select-disabled .mat-mdc-select-arrow{color:var(--mat-select-disabled-arrow-color)}.mat-mdc-select-arrow svg{fill:currentColor;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%)}.cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:CanvasText}.mat-mdc-select-disabled .cdk-high-contrast-active .mat-mdc-select-arrow svg{fill:GrayText}div.mat-mdc-select-panel{width:100%;max-height:275px;outline:0;overflow:auto;padding:8px 0;border-radius:4px;box-sizing:border-box;position:static;background-color:var(--mat-select-panel-background-color)}.cdk-high-contrast-active div.mat-mdc-select-panel{outline:solid 1px}.cdk-overlay-pane:not(.mat-mdc-select-panel-above) div.mat-mdc-select-panel{border-top-left-radius:0;border-top-right-radius:0;transform-origin:top center}.mat-mdc-select-panel-above div.mat-mdc-select-panel{border-bottom-left-radius:0;border-bottom-right-radius:0;transform-origin:bottom center}div.mat-mdc-select-panel .mat-mdc-option{--mdc-list-list-item-container-color: var(--mat-select-panel-background-color)}.mat-mdc-select-placeholder{transition:color 400ms 133.3333333333ms cubic-bezier(0.25, 0.8, 0.25, 1);color:var(--mat-select-placeholder-text-color)}._mat-animation-noopable .mat-mdc-select-placeholder{transition:none}.mat-form-field-hide-placeholder .mat-mdc-select-placeholder{color:rgba(0,0,0,0);-webkit-text-fill-color:rgba(0,0,0,0);transition:none;display:block}.mat-mdc-form-field-type-mat-select:not(.mat-form-field-disabled) .mat-mdc-text-field-wrapper{cursor:pointer}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mat-mdc-floating-label{max-width:calc(100% - 18px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-fill .mdc-floating-label--float-above{max-width:calc(100%/0.75 - 24px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-notched-outline__notch{max-width:calc(100% - 60px)}.mat-mdc-form-field-type-mat-select.mat-form-field-appearance-outline .mdc-text-field--label-floating .mdc-notched-outline__notch{max-width:calc(100% - 24px)}.mat-mdc-select-min-line:empty::before{content:" ";white-space:pre;width:1px;display:inline-block;visibility:hidden}.mat-form-field-appearance-fill .mat-mdc-select-arrow-wrapper{transform:var(--mat-select-arrow-transform)}'],encapsulation:2,data:{animation:[Sye.transformPanel]},changeDetection:0})}}return i})();var aW=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({providers:[Tye],imports:[$r,hc,$R,ze,$m,gc,$R,ze]})}}return i})();var Aye=[[["caption"]],[["colgroup"],["col"]],"*"],Oye=["caption","colgroup, col","*"];function Pye(i,t){i&1&&Ee(0,2)}function Rye(i,t){i&1&&(f(0,"thead",0),sn(1,1),p(),f(2,"tbody",0),sn(3,2)(4,3),p(),f(5,"tfoot",0),sn(6,4),p())}function Fye(i,t){i&1&&sn(0,1)(1,2)(2,3)(3,4)}var Ks=new te("CDK_TABLE");var VC=(()=>{class i{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||i)(x(rn))}}static{this.\u0275dir=J({type:i,selectors:[["","cdkCellDef",""]],standalone:!0})}}return i})(),zC=(()=>{class i{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||i)(x(rn))}}static{this.\u0275dir=J({type:i,selectors:[["","cdkHeaderCellDef",""]],standalone:!0})}}return i})(),dW=(()=>{class i{constructor(e){this.template=e}static{this.\u0275fac=function(n){return new(n||i)(x(rn))}}static{this.\u0275dir=J({type:i,selectors:[["","cdkFooterCellDef",""]],standalone:!0})}}return i})(),tf=(()=>{class i{get name(){return this._name}set name(e){this._setNameInput(e)}get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}get stickyEnd(){return this._stickyEnd}set stickyEnd(e){e!==this._stickyEnd&&(this._stickyEnd=e,this._hasStickyChanged=!0)}constructor(e){this._table=e,this._hasStickyChanged=!1,this._sticky=!1,this._stickyEnd=!1}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}_updateColumnCssClassName(){this._columnCssClassName=[`cdk-column-${this.cssClassFriendlyName}`]}_setNameInput(e){e&&(this._name=e,this.cssClassFriendlyName=e.replace(/[^a-z0-9_-]/gi,"-"),this._updateColumnCssClassName())}static{this.\u0275fac=function(n){return new(n||i)(x(Ks,8))}}static{this.\u0275dir=J({type:i,selectors:[["","cdkColumnDef",""]],contentQueries:function(n,r,s){if(n&1&&(gt(s,VC,5),gt(s,zC,5),gt(s,dW,5)),n&2){let o;ye(o=xe())&&(r.cell=o.first),ye(o=xe())&&(r.headerCell=o.first),ye(o=xe())&&(r.footerCell=o.first)}},inputs:{name:[H.None,"cdkColumnDef","name"],sticky:[H.HasDecoratorInputTransform,"sticky","sticky",be],stickyEnd:[H.HasDecoratorInputTransform,"stickyEnd","stickyEnd",be]},standalone:!0,features:[je([{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:i}]),Ge]})}}return i})(),FC=class{constructor(t,e){e.nativeElement.classList.add(...t._columnCssClassName)}},uW=(()=>{class i extends FC{constructor(e,n){super(e,n)}static{this.\u0275fac=function(n){return new(n||i)(x(tf),x(fe))}}static{this.\u0275dir=J({type:i,selectors:[["cdk-header-cell"],["th","cdk-header-cell",""]],hostAttrs:["role","columnheader",1,"cdk-header-cell"],standalone:!0,features:[Ve]})}}return i})();var hW=(()=>{class i extends FC{constructor(e,n){super(e,n);let r=e._table?._getCellRole();r&&n.nativeElement.setAttribute("role",r)}static{this.\u0275fac=function(n){return new(n||i)(x(tf),x(fe))}}static{this.\u0275dir=J({type:i,selectors:[["cdk-cell"],["td","cdk-cell",""]],hostAttrs:[1,"cdk-cell"],standalone:!0,features:[Ve]})}}return i})(),NC=class{constructor(){this.tasks=[],this.endTasks=[]}},LC=new te("_COALESCED_STYLE_SCHEDULER"),p2=(()=>{class i{constructor(e){this._ngZone=e,this._currentSchedule=null,this._destroyed=new ke}schedule(e){this._createScheduleIfNeeded(),this._currentSchedule.tasks.push(e)}scheduleEnd(e){this._createScheduleIfNeeded(),this._currentSchedule.endTasks.push(e)}ngOnDestroy(){this._destroyed.next(),this._destroyed.complete()}_createScheduleIfNeeded(){this._currentSchedule||(this._currentSchedule=new NC,this._getScheduleObservable().pipe(Kt(this._destroyed)).subscribe(()=>{for(;this._currentSchedule.tasks.length||this._currentSchedule.endTasks.length;){let e=this._currentSchedule;this._currentSchedule=new NC;for(let n of e.tasks)n();for(let n of e.endTasks)n()}this._currentSchedule=null}))}_getScheduleObservable(){return this._ngZone.isStable?Wr(Promise.resolve(void 0)):this._ngZone.onStable.pipe(Pt(1))}static{this.\u0275fac=function(n){return new(n||i)(V(_e))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac})}}return i})();var g2=(()=>{class i{constructor(e,n){this.template=e,this._differs=n}ngOnChanges(e){if(!this._columnsDiffer){let n=e.columns&&e.columns.currentValue||[];this._columnsDiffer=this._differs.find(n).create(),this._columnsDiffer.diff(n)}}getColumnsDiff(){return this._columnsDiffer.diff(this.columns)}extractCellTemplate(e){return this instanceof nb?e.headerCell.template:this instanceof _2?e.footerCell.template:e.cell.template}static{this.\u0275fac=function(n){return new(n||i)(x(rn),x(Hc))}}static{this.\u0275dir=J({type:i,features:[ht]})}}return i})(),nb=(()=>{class i extends g2{get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}constructor(e,n,r){super(e,n),this._table=r,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static{this.\u0275fac=function(n){return new(n||i)(x(rn),x(Hc),x(Ks,8))}}static{this.\u0275dir=J({type:i,selectors:[["","cdkHeaderRowDef",""]],inputs:{columns:[H.None,"cdkHeaderRowDef","columns"],sticky:[H.HasDecoratorInputTransform,"cdkHeaderRowDefSticky","sticky",be]},standalone:!0,features:[Ge,Ve,ht]})}}return i})(),_2=(()=>{class i extends g2{get sticky(){return this._sticky}set sticky(e){e!==this._sticky&&(this._sticky=e,this._hasStickyChanged=!0)}constructor(e,n,r){super(e,n),this._table=r,this._hasStickyChanged=!1,this._sticky=!1}ngOnChanges(e){super.ngOnChanges(e)}hasStickyChanged(){let e=this._hasStickyChanged;return this.resetStickyChanged(),e}resetStickyChanged(){this._hasStickyChanged=!1}static{this.\u0275fac=function(n){return new(n||i)(x(rn),x(Hc),x(Ks,8))}}static{this.\u0275dir=J({type:i,selectors:[["","cdkFooterRowDef",""]],inputs:{columns:[H.None,"cdkFooterRowDef","columns"],sticky:[H.HasDecoratorInputTransform,"cdkFooterRowDefSticky","sticky",be]},standalone:!0,features:[Ge,Ve,ht]})}}return i})(),jC=(()=>{class i extends g2{constructor(e,n,r){super(e,n),this._table=r}static{this.\u0275fac=function(n){return new(n||i)(x(rn),x(Hc),x(Ks,8))}}static{this.\u0275dir=J({type:i,selectors:[["","cdkRowDef",""]],inputs:{columns:[H.None,"cdkRowDefColumns","columns"],when:[H.None,"cdkRowDefWhen","when"]},standalone:!0,features:[Ve]})}}return i})(),uu=(()=>{class i{static{this.mostRecentCellOutlet=null}constructor(e){this._viewContainer=e,i.mostRecentCellOutlet=this}ngOnDestroy(){i.mostRecentCellOutlet===this&&(i.mostRecentCellOutlet=null)}static{this.\u0275fac=function(n){return new(n||i)(x(Un))}}static{this.\u0275dir=J({type:i,selectors:[["","cdkCellOutlet",""]],standalone:!0})}}return i})(),b2=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=ae({type:i,selectors:[["cdk-header-row"],["tr","cdk-header-row",""]],hostAttrs:["role","row",1,"cdk-header-row"],standalone:!0,features:[Re],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,r){n&1&&sn(0,0)},dependencies:[uu],encapsulation:2})}}return i})();var v2=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=ae({type:i,selectors:[["cdk-row"],["tr","cdk-row",""]],hostAttrs:["role","row",1,"cdk-row"],standalone:!0,features:[Re],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,r){n&1&&sn(0,0)},dependencies:[uu],encapsulation:2})}}return i})(),mW=(()=>{class i{constructor(e){this.templateRef=e,this._contentClassName="cdk-no-data-row"}static{this.\u0275fac=function(n){return new(n||i)(x(rn))}}static{this.\u0275dir=J({type:i,selectors:[["ng-template","cdkNoDataRow",""]],standalone:!0})}}return i})(),lW=["top","bottom","left","right"],f2=class{constructor(t,e,n,r,s=!0,o=!0,a){this._isNativeHtmlTable=t,this._stickCellCss=e,this.direction=n,this._coalescedStyleScheduler=r,this._isBrowser=s,this._needsPositionStickyOnElement=o,this._positionListener=a,this._cachedCellWidths=[],this._borderCellCss={top:`${e}-border-elem-top`,bottom:`${e}-border-elem-bottom`,left:`${e}-border-elem-left`,right:`${e}-border-elem-right`}}clearStickyPositioning(t,e){let n=[];for(let r of t)if(r.nodeType===r.ELEMENT_NODE){n.push(r);for(let s=0;s<r.children.length;s++)n.push(r.children[s])}this._coalescedStyleScheduler.schedule(()=>{for(let r of n)this._removeStickyStyle(r,e)})}updateStickyColumns(t,e,n,r=!0){if(!t.length||!this._isBrowser||!(e.some(s=>s)||n.some(s=>s))){this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:[]}),this._positionListener.stickyEndColumnsUpdated({sizes:[]}));return}this._coalescedStyleScheduler.schedule(()=>{let s=t[0],o=s.children.length,a=this._getCellWidths(s,r),l=this._getStickyStartColumnPositions(a,e),c=this._getStickyEndColumnPositions(a,n),d=e.lastIndexOf(!0),u=n.indexOf(!0),h=this.direction==="rtl",m=h?"right":"left",_=h?"left":"right";for(let b of t)for(let v=0;v<o;v++){let I=b.children[v];e[v]&&this._addStickyStyle(I,m,l[v],v===d),n[v]&&this._addStickyStyle(I,_,c[v],v===u)}this._positionListener&&(this._positionListener.stickyColumnsUpdated({sizes:d===-1?[]:a.slice(0,d+1).map((b,v)=>e[v]?b:null)}),this._positionListener.stickyEndColumnsUpdated({sizes:u===-1?[]:a.slice(u).map((b,v)=>n[v+u]?b:null).reverse()}))})}stickRows(t,e,n){this._isBrowser&&this._coalescedStyleScheduler.schedule(()=>{let r=n==="bottom"?t.slice().reverse():t,s=n==="bottom"?e.slice().reverse():e,o=[],a=[],l=[];for(let d=0,u=0;d<r.length;d++){if(!s[d])continue;o[d]=u;let h=r[d];l[d]=this._isNativeHtmlTable?Array.from(h.children):[h];let m=h.getBoundingClientRect().height;u+=m,a[d]=m}let c=s.lastIndexOf(!0);for(let d=0;d<r.length;d++){if(!s[d])continue;let u=o[d],h=d===c;for(let m of l[d])this._addStickyStyle(m,n,u,h)}n==="top"?this._positionListener?.stickyHeaderRowsUpdated({sizes:a,offsets:o,elements:l}):this._positionListener?.stickyFooterRowsUpdated({sizes:a,offsets:o,elements:l})})}updateStickyFooterContainer(t,e){this._isNativeHtmlTable&&this._coalescedStyleScheduler.schedule(()=>{let n=t.querySelector("tfoot");n&&(e.some(r=>!r)?this._removeStickyStyle(n,["bottom"]):this._addStickyStyle(n,"bottom",0,!1))})}_removeStickyStyle(t,e){for(let r of e)t.style[r]="",t.classList.remove(this._borderCellCss[r]);lW.some(r=>e.indexOf(r)===-1&&t.style[r])?t.style.zIndex=this._getCalculatedZIndex(t):(t.style.zIndex="",this._needsPositionStickyOnElement&&(t.style.position=""),t.classList.remove(this._stickCellCss))}_addStickyStyle(t,e,n,r){t.classList.add(this._stickCellCss),r&&t.classList.add(this._borderCellCss[e]),t.style[e]=`${n}px`,t.style.zIndex=this._getCalculatedZIndex(t),this._needsPositionStickyOnElement&&(t.style.cssText+="position: -webkit-sticky; position: sticky; ")}_getCalculatedZIndex(t){let e={top:100,bottom:10,left:1,right:1},n=0;for(let r of lW)t.style[r]&&(n+=e[r]);return n?`${n}`:""}_getCellWidths(t,e=!0){if(!e&&this._cachedCellWidths.length)return this._cachedCellWidths;let n=[],r=t.children;for(let s=0;s<r.length;s++){let o=r[s];n.push(o.getBoundingClientRect().width)}return this._cachedCellWidths=n,n}_getStickyStartColumnPositions(t,e){let n=[],r=0;for(let s=0;s<t.length;s++)e[s]&&(n[s]=r,r+=t[s]);return n}_getStickyEndColumnPositions(t,e){let n=[],r=0;for(let s=t.length;s>0;s--)e[s]&&(n[s]=r,r+=t[s]);return n}};var BC=new te("CDK_SPL");var y2=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n;let r=He(Ks);r._rowOutlet=this,r._outletAssigned()}static{this.\u0275fac=function(n){return new(n||i)(x(Un),x(fe))}}static{this.\u0275dir=J({type:i,selectors:[["","rowOutlet",""]],standalone:!0})}}return i})(),x2=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n;let r=He(Ks);r._headerRowOutlet=this,r._outletAssigned()}static{this.\u0275fac=function(n){return new(n||i)(x(Un),x(fe))}}static{this.\u0275dir=J({type:i,selectors:[["","headerRowOutlet",""]],standalone:!0})}}return i})(),w2=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n;let r=He(Ks);r._footerRowOutlet=this,r._outletAssigned()}static{this.\u0275fac=function(n){return new(n||i)(x(Un),x(fe))}}static{this.\u0275dir=J({type:i,selectors:[["","footerRowOutlet",""]],standalone:!0})}}return i})(),C2=(()=>{class i{constructor(e,n){this.viewContainer=e,this.elementRef=n;let r=He(Ks);r._noDataRowOutlet=this,r._outletAssigned()}static{this.\u0275fac=function(n){return new(n||i)(x(Un),x(fe))}}static{this.\u0275dir=J({type:i,selectors:[["","noDataRowOutlet",""]],standalone:!0})}}return i})();var S2=(()=>{class i{_getCellRole(){if(this._cellRoleInternal===void 0){let e=this._elementRef.nativeElement.getAttribute("role"),n=e==="grid"||e==="treegrid"?"gridcell":"cell";this._cellRoleInternal=this._isNativeHtmlTable&&n==="cell"?null:n}return this._cellRoleInternal}get trackBy(){return this._trackByFn}set trackBy(e){this._trackByFn=e}get dataSource(){return this._dataSource}set dataSource(e){this._dataSource!==e&&this._switchDataSource(e)}get multiTemplateDataRows(){return this._multiTemplateDataRows}set multiTemplateDataRows(e){this._multiTemplateDataRows=e,this._rowOutlet&&this._rowOutlet.viewContainer.length&&(this._forceRenderDataRows(),this.updateStickyColumnStyles())}get fixedLayout(){return this._fixedLayout}set fixedLayout(e){this._fixedLayout=e,this._forceRecalculateCellWidths=!0,this._stickyColumnStylesNeedReset=!0}constructor(e,n,r,s,o,a,l,c,d,u,h,m){this._differs=e,this._changeDetectorRef=n,this._elementRef=r,this._dir=o,this._platform=l,this._viewRepeater=c,this._coalescedStyleScheduler=d,this._viewportRuler=u,this._stickyPositioningListener=h,this._ngZone=m,this._onDestroy=new ke,this._columnDefsByName=new Map,this._customColumnDefs=new Set,this._customRowDefs=new Set,this._customHeaderRowDefs=new Set,this._customFooterRowDefs=new Set,this._headerRowDefChanged=!0,this._footerRowDefChanged=!0,this._stickyColumnStylesNeedReset=!0,this._forceRecalculateCellWidths=!0,this._cachedRenderRowsMap=new Map,this.stickyCssClass="cdk-table-sticky",this.needsPositionStickyOnElement=!0,this._isShowingNoDataRow=!1,this._hasAllOutlets=!1,this._hasInitialized=!1,this._cellRoleInternal=void 0,this._multiTemplateDataRows=!1,this._fixedLayout=!1,this.contentChanged=new ue,this.viewChange=new Xo({start:0,end:Number.MAX_VALUE}),s||r.nativeElement.setAttribute("role","table"),this._document=a,this._isServer=!l.isBrowser,this._isNativeHtmlTable=r.nativeElement.nodeName==="TABLE"}ngOnInit(){this._setupStickyStyler(),this._dataDiffer=this._differs.find([]).create((e,n)=>this.trackBy?this.trackBy(n.dataIndex,n.data):n),this._viewportRuler.change().pipe(Kt(this._onDestroy)).subscribe(()=>{this._forceRecalculateCellWidths=!0})}ngAfterContentInit(){this._hasInitialized=!0}ngAfterContentChecked(){this._canRender()&&this._render()}ngOnDestroy(){[this._rowOutlet?.viewContainer,this._headerRowOutlet?.viewContainer,this._footerRowOutlet?.viewContainer,this._cachedRenderRowsMap,this._customColumnDefs,this._customRowDefs,this._customHeaderRowDefs,this._customFooterRowDefs,this._columnDefsByName].forEach(e=>{e?.clear()}),this._headerRowDefs=[],this._footerRowDefs=[],this._defaultRowDef=null,this._onDestroy.next(),this._onDestroy.complete(),EC(this.dataSource)&&this.dataSource.disconnect(this)}renderRows(){this._renderRows=this._getAllRenderRows();let e=this._dataDiffer.diff(this._renderRows);if(!e){this._updateNoDataRow(),this.contentChanged.next();return}let n=this._rowOutlet.viewContainer;this._viewRepeater.applyChanges(e,n,(r,s,o)=>this._getEmbeddedViewArgs(r.item,o),r=>r.item.data,r=>{r.operation===qm.INSERTED&&r.context&&this._renderCellTemplateForItem(r.record.item.rowDef,r.context)}),this._updateRowIndexContext(),e.forEachIdentityChange(r=>{let s=n.get(r.currentIndex);s.context.$implicit=r.item.data}),this._updateNoDataRow(),this._ngZone&&_e.isInAngularZone()?this._ngZone.onStable.pipe(Pt(1),Kt(this._onDestroy)).subscribe(()=>{this.updateStickyColumnStyles()}):this.updateStickyColumnStyles(),this.contentChanged.next()}addColumnDef(e){this._customColumnDefs.add(e)}removeColumnDef(e){this._customColumnDefs.delete(e)}addRowDef(e){this._customRowDefs.add(e)}removeRowDef(e){this._customRowDefs.delete(e)}addHeaderRowDef(e){this._customHeaderRowDefs.add(e),this._headerRowDefChanged=!0}removeHeaderRowDef(e){this._customHeaderRowDefs.delete(e),this._headerRowDefChanged=!0}addFooterRowDef(e){this._customFooterRowDefs.add(e),this._footerRowDefChanged=!0}removeFooterRowDef(e){this._customFooterRowDefs.delete(e),this._footerRowDefChanged=!0}setNoDataRow(e){this._customNoDataRow=e}updateStickyHeaderRowStyles(){let e=this._getRenderedRows(this._headerRowOutlet);if(this._isNativeHtmlTable){let r=cW(this._headerRowOutlet,"thead");r&&(r.style.display=e.length?"":"none")}let n=this._headerRowDefs.map(r=>r.sticky);this._stickyStyler.clearStickyPositioning(e,["top"]),this._stickyStyler.stickRows(e,n,"top"),this._headerRowDefs.forEach(r=>r.resetStickyChanged())}updateStickyFooterRowStyles(){let e=this._getRenderedRows(this._footerRowOutlet);if(this._isNativeHtmlTable){let r=cW(this._footerRowOutlet,"tfoot");r&&(r.style.display=e.length?"":"none")}let n=this._footerRowDefs.map(r=>r.sticky);this._stickyStyler.clearStickyPositioning(e,["bottom"]),this._stickyStyler.stickRows(e,n,"bottom"),this._stickyStyler.updateStickyFooterContainer(this._elementRef.nativeElement,n),this._footerRowDefs.forEach(r=>r.resetStickyChanged())}updateStickyColumnStyles(){let e=this._getRenderedRows(this._headerRowOutlet),n=this._getRenderedRows(this._rowOutlet),r=this._getRenderedRows(this._footerRowOutlet);(this._isNativeHtmlTable&&!this._fixedLayout||this._stickyColumnStylesNeedReset)&&(this._stickyStyler.clearStickyPositioning([...e,...n,...r],["left","right"]),this._stickyColumnStylesNeedReset=!1),e.forEach((s,o)=>{this._addStickyColumnStyles([s],this._headerRowDefs[o])}),this._rowDefs.forEach(s=>{let o=[];for(let a=0;a<n.length;a++)this._renderRows[a].rowDef===s&&o.push(n[a]);this._addStickyColumnStyles(o,s)}),r.forEach((s,o)=>{this._addStickyColumnStyles([s],this._footerRowDefs[o])}),Array.from(this._columnDefsByName.values()).forEach(s=>s.resetStickyChanged())}_outletAssigned(){!this._hasAllOutlets&&this._rowOutlet&&this._headerRowOutlet&&this._footerRowOutlet&&this._noDataRowOutlet&&(this._hasAllOutlets=!0,this._canRender()&&this._render())}_canRender(){return this._hasAllOutlets&&this._hasInitialized}_render(){this._cacheRowDefs(),this._cacheColumnDefs(),!this._headerRowDefs.length&&!this._footerRowDefs.length&&this._rowDefs.length;let n=this._renderUpdatedColumns()||this._headerRowDefChanged||this._footerRowDefChanged;this._stickyColumnStylesNeedReset=this._stickyColumnStylesNeedReset||n,this._forceRecalculateCellWidths=n,this._headerRowDefChanged&&(this._forceRenderHeaderRows(),this._headerRowDefChanged=!1),this._footerRowDefChanged&&(this._forceRenderFooterRows(),this._footerRowDefChanged=!1),this.dataSource&&this._rowDefs.length>0&&!this._renderChangeSubscription?this._observeRenderChanges():this._stickyColumnStylesNeedReset&&this.updateStickyColumnStyles(),this._checkStickyStates()}_getAllRenderRows(){let e=[],n=this._cachedRenderRowsMap;this._cachedRenderRowsMap=new Map;for(let r=0;r<this._data.length;r++){let s=this._data[r],o=this._getRenderRowsForData(s,r,n.get(s));this._cachedRenderRowsMap.has(s)||this._cachedRenderRowsMap.set(s,new WeakMap);for(let a=0;a<o.length;a++){let l=o[a],c=this._cachedRenderRowsMap.get(l.data);c.has(l.rowDef)?c.get(l.rowDef).push(l):c.set(l.rowDef,[l]),e.push(l)}}return e}_getRenderRowsForData(e,n,r){return this._getRowDefs(e,n).map(o=>{let a=r&&r.has(o)?r.get(o):[];if(a.length){let l=a.shift();return l.dataIndex=n,l}else return{data:e,rowDef:o,dataIndex:n}})}_cacheColumnDefs(){this._columnDefsByName.clear(),RC(this._getOwnDefs(this._contentColumnDefs),this._customColumnDefs).forEach(n=>{this._columnDefsByName.has(n.name),this._columnDefsByName.set(n.name,n)})}_cacheRowDefs(){this._headerRowDefs=RC(this._getOwnDefs(this._contentHeaderRowDefs),this._customHeaderRowDefs),this._footerRowDefs=RC(this._getOwnDefs(this._contentFooterRowDefs),this._customFooterRowDefs),this._rowDefs=RC(this._getOwnDefs(this._contentRowDefs),this._customRowDefs);let e=this._rowDefs.filter(n=>!n.when);!this.multiTemplateDataRows&&e.length>1,this._defaultRowDef=e[0]}_renderUpdatedColumns(){let e=(o,a)=>o||!!a.getColumnsDiff(),n=this._rowDefs.reduce(e,!1);n&&this._forceRenderDataRows();let r=this._headerRowDefs.reduce(e,!1);r&&this._forceRenderHeaderRows();let s=this._footerRowDefs.reduce(e,!1);return s&&this._forceRenderFooterRows(),n||r||s}_switchDataSource(e){this._data=[],EC(this.dataSource)&&this.dataSource.disconnect(this),this._renderChangeSubscription&&(this._renderChangeSubscription.unsubscribe(),this._renderChangeSubscription=null),e||(this._dataDiffer&&this._dataDiffer.diff([]),this._rowOutlet&&this._rowOutlet.viewContainer.clear()),this._dataSource=e}_observeRenderChanges(){if(!this.dataSource)return;let e;EC(this.dataSource)?e=this.dataSource.connect(this):Xs(this.dataSource)?e=this.dataSource:Array.isArray(this.dataSource)&&(e=We(this.dataSource)),this._renderChangeSubscription=e.pipe(Kt(this._onDestroy)).subscribe(n=>{this._data=n||[],this.renderRows()})}_forceRenderHeaderRows(){this._headerRowOutlet.viewContainer.length>0&&this._headerRowOutlet.viewContainer.clear(),this._headerRowDefs.forEach((e,n)=>this._renderRow(this._headerRowOutlet,e,n)),this.updateStickyHeaderRowStyles()}_forceRenderFooterRows(){this._footerRowOutlet.viewContainer.length>0&&this._footerRowOutlet.viewContainer.clear(),this._footerRowDefs.forEach((e,n)=>this._renderRow(this._footerRowOutlet,e,n)),this.updateStickyFooterRowStyles()}_addStickyColumnStyles(e,n){let r=Array.from(n.columns||[]).map(a=>{let l=this._columnDefsByName.get(a);return l}),s=r.map(a=>a.sticky),o=r.map(a=>a.stickyEnd);this._stickyStyler.updateStickyColumns(e,s,o,!this._fixedLayout||this._forceRecalculateCellWidths)}_getRenderedRows(e){let n=[];for(let r=0;r<e.viewContainer.length;r++){let s=e.viewContainer.get(r);n.push(s.rootNodes[0])}return n}_getRowDefs(e,n){if(this._rowDefs.length==1)return[this._rowDefs[0]];let r=[];if(this.multiTemplateDataRows)r=this._rowDefs.filter(s=>!s.when||s.when(n,e));else{let s=this._rowDefs.find(o=>o.when&&o.when(n,e))||this._defaultRowDef;s&&r.push(s)}return r.length,r}_getEmbeddedViewArgs(e,n){let r=e.rowDef,s={$implicit:e.data};return{templateRef:r.template,context:s,index:n}}_renderRow(e,n,r,s={}){let o=e.viewContainer.createEmbeddedView(n.template,s,r);return this._renderCellTemplateForItem(n,s),o}_renderCellTemplateForItem(e,n){for(let r of this._getCellTemplates(e))uu.mostRecentCellOutlet&&uu.mostRecentCellOutlet._viewContainer.createEmbeddedView(r,n);this._changeDetectorRef.markForCheck()}_updateRowIndexContext(){let e=this._rowOutlet.viewContainer;for(let n=0,r=e.length;n<r;n++){let o=e.get(n).context;o.count=r,o.first=n===0,o.last=n===r-1,o.even=n%2===0,o.odd=!o.even,this.multiTemplateDataRows?(o.dataIndex=this._renderRows[n].dataIndex,o.renderIndex=n):o.index=this._renderRows[n].dataIndex}}_getCellTemplates(e){return!e||!e.columns?[]:Array.from(e.columns,n=>{let r=this._columnDefsByName.get(n);return e.extractCellTemplate(r)})}_forceRenderDataRows(){this._dataDiffer.diff([]),this._rowOutlet.viewContainer.clear(),this.renderRows()}_checkStickyStates(){let e=(n,r)=>n||r.hasStickyChanged();this._headerRowDefs.reduce(e,!1)&&this.updateStickyHeaderRowStyles(),this._footerRowDefs.reduce(e,!1)&&this.updateStickyFooterRowStyles(),Array.from(this._columnDefsByName.values()).reduce(e,!1)&&(this._stickyColumnStylesNeedReset=!0,this.updateStickyColumnStyles())}_setupStickyStyler(){let e=this._dir?this._dir.value:"ltr";this._stickyStyler=new f2(this._isNativeHtmlTable,this.stickyCssClass,e,this._coalescedStyleScheduler,this._platform.isBrowser,this.needsPositionStickyOnElement,this._stickyPositioningListener),(this._dir?this._dir.change:We()).pipe(Kt(this._onDestroy)).subscribe(n=>{this._stickyStyler.direction=n,this.updateStickyColumnStyles()})}_getOwnDefs(e){return e.filter(n=>!n._table||n._table===this)}_updateNoDataRow(){let e=this._customNoDataRow||this._noDataRow;if(!e)return;let n=this._rowOutlet.viewContainer.length===0;if(n===this._isShowingNoDataRow)return;let r=this._noDataRowOutlet.viewContainer;if(n){let s=r.createEmbeddedView(e.templateRef),o=s.rootNodes[0];s.rootNodes.length===1&&o?.nodeType===this._document.ELEMENT_NODE&&(o.setAttribute("role","row"),o.classList.add(e._contentClassName))}else r.clear();this._isShowingNoDataRow=n,this._changeDetectorRef.markForCheck()}static{this.\u0275fac=function(n){return new(n||i)(x(Hc),x(mt),x(fe),yn("role"),x(Mi,8),x(Ze),x(dt),x(Q_),x(LC),x(au),x(BC,12),x(_e,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["cdk-table"],["table","cdk-table",""]],contentQueries:function(n,r,s){if(n&1&&(gt(s,mW,5),gt(s,tf,5),gt(s,jC,5),gt(s,nb,5),gt(s,_2,5)),n&2){let o;ye(o=xe())&&(r._noDataRow=o.first),ye(o=xe())&&(r._contentColumnDefs=o),ye(o=xe())&&(r._contentRowDefs=o),ye(o=xe())&&(r._contentHeaderRowDefs=o),ye(o=xe())&&(r._contentFooterRowDefs=o)}},hostAttrs:[1,"cdk-table"],hostVars:2,hostBindings:function(n,r){n&2&&le("cdk-table-fixed-layout",r.fixedLayout)},inputs:{trackBy:"trackBy",dataSource:"dataSource",multiTemplateDataRows:[H.HasDecoratorInputTransform,"multiTemplateDataRows","multiTemplateDataRows",be],fixedLayout:[H.HasDecoratorInputTransform,"fixedLayout","fixedLayout",be]},outputs:{contentChanged:"contentChanged"},exportAs:["cdkTable"],standalone:!0,features:[je([{provide:Ks,useExisting:i},{provide:Q_,useClass:Wm},{provide:LC,useClass:p2},{provide:BC,useValue:null}]),Ge,Re],ngContentSelectors:Oye,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(n,r){n&1&&(nt(Aye),Ee(0),Ee(1,1),Y(2,Pye,1,0)(3,Rye,7,0)(4,Fye,4,0)),n&2&&(g(2),et(2,r._isServer?2:-1),g(),et(3,r._isNativeHtmlTable?3:4))},dependencies:[x2,y2,C2,w2],styles:[".cdk-table-fixed-layout{table-layout:fixed}"],encapsulation:2})}}return i})();function RC(i,t){return i.concat(Array.from(t))}function cW(i,t){let e=t.toUpperCase(),n=i.viewContainer.element.nativeElement;for(;n;){let r=n.nodeType===1?n.nodeName:null;if(r===e)return n;if(r==="TABLE")break;n=n.parentNode}return null}var fW=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[X_]})}}return i})();var Nye=[[["caption"]],[["colgroup"],["col"]],"*"],Lye=["caption","colgroup, col","*"];function Bye(i,t){i&1&&Ee(0,2)}function Vye(i,t){i&1&&(f(0,"thead",0),sn(1,1),p(),f(2,"tbody",2),sn(3,3)(4,4),p(),f(5,"tfoot",0),sn(6,5),p())}function zye(i,t){i&1&&sn(0,1)(1,3)(2,4)(3,5)}var nf=(()=>{class i extends S2{constructor(){super(...arguments),this.stickyCssClass="mat-mdc-table-sticky",this.needsPositionStickyOnElement=!1}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275cmp=ae({type:i,selectors:[["mat-table"],["table","mat-table",""]],hostAttrs:[1,"mat-mdc-table","mdc-data-table__table"],hostVars:2,hostBindings:function(n,r){n&2&&le("mdc-table-fixed-layout",r.fixedLayout)},exportAs:["matTable"],standalone:!0,features:[je([{provide:S2,useExisting:i},{provide:Ks,useExisting:i},{provide:LC,useClass:p2},{provide:Q_,useClass:Wm},{provide:BC,useValue:null}]),Ve,Re],ngContentSelectors:Lye,decls:5,vars:2,consts:[["role","rowgroup"],["headerRowOutlet",""],["role","rowgroup",1,"mdc-data-table__content"],["rowOutlet",""],["noDataRowOutlet",""],["footerRowOutlet",""]],template:function(n,r){n&1&&(nt(Nye),Ee(0),Ee(1,1),Y(2,Bye,1,0)(3,Vye,7,0)(4,zye,4,0)),n&2&&(g(2),et(2,r._isServer?2:-1),g(),et(3,r._isNativeHtmlTable?3:4))},dependencies:[x2,y2,C2,w2],styles:[".mat-mdc-table-sticky{position:sticky !important}.mdc-data-table{-webkit-overflow-scrolling:touch;display:inline-flex;flex-direction:column;box-sizing:border-box;position:relative}.mdc-data-table__table-container{-webkit-overflow-scrolling:touch;overflow-x:auto;width:100%}.mdc-data-table__table{min-width:100%;border:0;white-space:nowrap;border-spacing:0;table-layout:fixed}.mdc-data-table__cell{box-sizing:border-box;overflow:hidden;text-align:left;text-overflow:ellipsis}[dir=rtl] .mdc-data-table__cell,.mdc-data-table__cell[dir=rtl]{text-align:right}.mdc-data-table__cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__cell--numeric,.mdc-data-table__cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell{box-sizing:border-box;text-overflow:ellipsis;overflow:hidden;outline:none;text-align:left}[dir=rtl] .mdc-data-table__header-cell,.mdc-data-table__header-cell[dir=rtl]{text-align:right}.mdc-data-table__header-cell--numeric{text-align:right}[dir=rtl] .mdc-data-table__header-cell--numeric,.mdc-data-table__header-cell--numeric[dir=rtl]{text-align:left}.mdc-data-table__header-cell-wrapper{align-items:center;display:inline-flex;vertical-align:middle}.mdc-data-table__cell,.mdc-data-table__header-cell{padding:0 16px 0 16px}.mdc-data-table__header-cell--checkbox,.mdc-data-table__cell--checkbox{padding-left:4px;padding-right:0}[dir=rtl] .mdc-data-table__header-cell--checkbox,[dir=rtl] .mdc-data-table__cell--checkbox,.mdc-data-table__header-cell--checkbox[dir=rtl],.mdc-data-table__cell--checkbox[dir=rtl]{padding-left:0;padding-right:4px}mat-table{display:block}mat-header-row{min-height:56px}mat-row,mat-footer-row{min-height:48px}mat-row,mat-header-row,mat-footer-row{display:flex;border-width:0;border-bottom-width:1px;border-style:solid;align-items:center;box-sizing:border-box}mat-cell:first-of-type,mat-header-cell:first-of-type,mat-footer-cell:first-of-type{padding-left:24px}[dir=rtl] mat-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:first-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:first-of-type:not(:only-of-type){padding-left:0;padding-right:24px}mat-cell:last-of-type,mat-header-cell:last-of-type,mat-footer-cell:last-of-type{padding-right:24px}[dir=rtl] mat-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-header-cell:last-of-type:not(:only-of-type),[dir=rtl] mat-footer-cell:last-of-type:not(:only-of-type){padding-right:0;padding-left:24px}mat-cell,mat-header-cell,mat-footer-cell{flex:1;display:flex;align-items:center;overflow:hidden;word-wrap:break-word;min-height:inherit}.mat-mdc-table{table-layout:auto;white-space:normal;background-color:var(--mat-table-background-color)}.mat-mdc-header-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-header-container-height, 56px);color:var(--mat-table-header-headline-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-header-headline-font, Roboto, sans-serif);line-height:var(--mat-table-header-headline-line-height);font-size:var(--mat-table-header-headline-size, 14px);font-weight:var(--mat-table-header-headline-weight, 500)}.mat-mdc-row{height:var(--mat-table-row-item-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87))}.mat-mdc-row,.mdc-data-table__content{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mat-table-row-item-label-text-font, Roboto, sans-serif);line-height:var(--mat-table-row-item-label-text-line-height);font-size:var(--mat-table-row-item-label-text-size, 14px);font-weight:var(--mat-table-row-item-label-text-weight)}.mat-mdc-footer-row{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;height:var(--mat-table-footer-container-height, 52px);color:var(--mat-table-row-item-label-text-color, rgba(0, 0, 0, 0.87));font-family:var(--mat-table-footer-supporting-text-font, Roboto, sans-serif);line-height:var(--mat-table-footer-supporting-text-line-height);font-size:var(--mat-table-footer-supporting-text-size, 14px);font-weight:var(--mat-table-footer-supporting-text-weight);letter-spacing:var(--mat-table-footer-supporting-text-tracking)}.mat-mdc-header-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-header-headline-tracking);font-weight:inherit;line-height:inherit}.mat-mdc-cell{border-bottom-color:var(--mat-table-row-item-outline-color, rgba(0, 0, 0, 0.12));border-bottom-width:var(--mat-table-row-item-outline-width, 1px);border-bottom-style:solid;letter-spacing:var(--mat-table-row-item-label-text-tracking);line-height:inherit}.mdc-data-table__row:last-child .mat-mdc-cell{border-bottom:none}.mat-mdc-footer-cell{letter-spacing:var(--mat-table-row-item-label-text-tracking)}mat-row.mat-mdc-row,mat-header-row.mat-mdc-header-row,mat-footer-row.mat-mdc-footer-row{border-bottom:none}.mat-mdc-table tbody,.mat-mdc-table tfoot,.mat-mdc-table thead,.mat-mdc-cell,.mat-mdc-footer-cell,.mat-mdc-header-row,.mat-mdc-row,.mat-mdc-footer-row,.mat-mdc-table .mat-mdc-header-cell{background:inherit}.mat-mdc-table mat-header-row.mat-mdc-header-row,.mat-mdc-table mat-row.mat-mdc-row,.mat-mdc-table mat-footer-row.mat-mdc-footer-cell{height:unset}mat-header-cell.mat-mdc-header-cell,mat-cell.mat-mdc-cell,mat-footer-cell.mat-mdc-footer-cell{align-self:stretch}"],encapsulation:2})}}return i})(),rf=(()=>{class i extends VC{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["","matCellDef",""]],standalone:!0,features:[je([{provide:VC,useExisting:i}]),Ve]})}}return i})(),sf=(()=>{class i extends zC{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["","matHeaderCellDef",""]],standalone:!0,features:[je([{provide:zC,useExisting:i}]),Ve]})}}return i})();var of=(()=>{class i extends tf{get name(){return this._name}set name(e){this._setNameInput(e)}_updateColumnCssClassName(){super._updateColumnCssClassName(),this._columnCssClassName.push(`mat-column-${this.cssClassFriendlyName}`)}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["","matColumnDef",""]],inputs:{name:[H.None,"matColumnDef","name"]},standalone:!0,features:[je([{provide:tf,useExisting:i},{provide:"MAT_SORT_HEADER_COLUMN_DEF",useExisting:i}]),Ve]})}}return i})(),af=(()=>{class i extends uW{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["mat-header-cell"],["th","mat-header-cell",""]],hostAttrs:["role","columnheader",1,"mat-mdc-header-cell","mdc-data-table__header-cell"],standalone:!0,features:[Ve]})}}return i})();var lf=(()=>{class i extends hW{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["mat-cell"],["td","mat-cell",""]],hostAttrs:[1,"mat-mdc-cell","mdc-data-table__cell"],standalone:!0,features:[Ve]})}}return i})();var cf=(()=>{class i extends nb{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["","matHeaderRowDef",""]],inputs:{columns:[H.None,"matHeaderRowDef","columns"],sticky:[H.HasDecoratorInputTransform,"matHeaderRowDefSticky","sticky",be]},standalone:!0,features:[je([{provide:nb,useExisting:i}]),Ge,Ve]})}}return i})();var df=(()=>{class i extends jC{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["","matRowDef",""]],inputs:{columns:[H.None,"matRowDefColumns","columns"],when:[H.None,"matRowDefWhen","when"]},standalone:!0,features:[je([{provide:jC,useExisting:i}]),Ve]})}}return i})(),uf=(()=>{class i extends b2{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275cmp=ae({type:i,selectors:[["mat-header-row"],["tr","mat-header-row",""]],hostAttrs:["role","row",1,"mat-mdc-header-row","mdc-data-table__header-row"],exportAs:["matHeaderRow"],standalone:!0,features:[je([{provide:b2,useExisting:i}]),Ve,Re],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,r){n&1&&sn(0,0)},dependencies:[uu],encapsulation:2})}}return i})();var hf=(()=>{class i extends v2{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275cmp=ae({type:i,selectors:[["mat-row"],["tr","mat-row",""]],hostAttrs:["role","row",1,"mat-mdc-row","mdc-data-table__row"],exportAs:["matRow"],standalone:!0,features:[je([{provide:v2,useExisting:i}]),Ve,Re],decls:1,vars:0,consts:[["cdkCellOutlet",""]],template:function(n,r){n&1&&sn(0,0)},dependencies:[uu],encapsulation:2})}}return i})();var pW=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[ze,fW,ze]})}}return i})();var jye=["*"];var Uye=[[["","mat-card-avatar",""],["","matCardAvatar",""]],[["mat-card-title"],["mat-card-subtitle"],["","mat-card-title",""],["","mat-card-subtitle",""],["","matCardTitle",""],["","matCardSubtitle",""]],"*"],Hye=["[mat-card-avatar], [matCardAvatar]",`mat-card-title, mat-card-subtitle,
      [mat-card-title], [mat-card-subtitle],
      [matCardTitle], [matCardSubtitle]`,"*"],qye=new te("MAT_CARD_CONFIG"),bs=(()=>{class i{constructor(e){this.appearance=e?.appearance||"raised"}static{this.\u0275fac=function(n){return new(n||i)(x(qye,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-card"]],hostAttrs:[1,"mat-mdc-card","mdc-card"],hostVars:4,hostBindings:function(n,r){n&2&&le("mat-mdc-card-outlined",r.appearance==="outlined")("mdc-card--outlined",r.appearance==="outlined")},inputs:{appearance:"appearance"},exportAs:["matCard"],standalone:!0,features:[Re],ngContentSelectors:jye,decls:1,vars:0,template:function(n,r){n&1&&(nt(),Ee(0))},styles:['.mdc-card{display:flex;flex-direction:column;box-sizing:border-box}.mdc-card::after{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none;pointer-events:none}@media screen and (forced-colors: active){.mdc-card::after{border-color:CanvasText}}.mdc-card--outlined::after{border:none}.mdc-card__content{border-radius:inherit;height:100%}.mdc-card__media{position:relative;box-sizing:border-box;background-repeat:no-repeat;background-position:center;background-size:cover}.mdc-card__media::before{display:block;content:""}.mdc-card__media:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__media:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__media--square::before{margin-top:100%}.mdc-card__media--16-9::before{margin-top:56.25%}.mdc-card__media-content{position:absolute;top:0;right:0;bottom:0;left:0;box-sizing:border-box}.mdc-card__primary-action{display:flex;flex-direction:column;box-sizing:border-box;position:relative;outline:none;color:inherit;text-decoration:none;cursor:pointer;overflow:hidden}.mdc-card__primary-action:first-child{border-top-left-radius:inherit;border-top-right-radius:inherit}.mdc-card__primary-action:last-child{border-bottom-left-radius:inherit;border-bottom-right-radius:inherit}.mdc-card__actions{display:flex;flex-direction:row;align-items:center;box-sizing:border-box;min-height:52px;padding:8px}.mdc-card__actions--full-bleed{padding:0}.mdc-card__action-buttons,.mdc-card__action-icons{display:flex;flex-direction:row;align-items:center;box-sizing:border-box}.mdc-card__action-icons{color:rgba(0, 0, 0, 0.6);flex-grow:1;justify-content:flex-end}.mdc-card__action-buttons+.mdc-card__action-icons{margin-left:16px;margin-right:0}[dir=rtl] .mdc-card__action-buttons+.mdc-card__action-icons,.mdc-card__action-buttons+.mdc-card__action-icons[dir=rtl]{margin-left:0;margin-right:16px}.mdc-card__action{display:inline-flex;flex-direction:row;align-items:center;box-sizing:border-box;justify-content:center;cursor:pointer;user-select:none}.mdc-card__action:focus{outline:none}.mdc-card__action--button{margin-left:0;margin-right:8px;padding:0 8px}[dir=rtl] .mdc-card__action--button,.mdc-card__action--button[dir=rtl]{margin-left:8px;margin-right:0}.mdc-card__action--button:last-child{margin-left:0;margin-right:0}[dir=rtl] .mdc-card__action--button:last-child,.mdc-card__action--button:last-child[dir=rtl]{margin-left:0;margin-right:0}.mdc-card__actions--full-bleed .mdc-card__action--button{justify-content:space-between;width:100%;height:auto;max-height:none;margin:0;padding:8px 16px;text-align:left}[dir=rtl] .mdc-card__actions--full-bleed .mdc-card__action--button,.mdc-card__actions--full-bleed .mdc-card__action--button[dir=rtl]{text-align:right}.mdc-card__action--icon{margin:-6px 0;padding:12px}.mdc-card__action--icon:not(:disabled){color:rgba(0, 0, 0, 0.6)}.mat-mdc-card{border-radius:var(--mdc-elevated-card-container-shape);background-color:var(--mdc-elevated-card-container-color);border-width:0;border-style:solid;border-color:var(--mdc-elevated-card-container-color);box-shadow:var(--mdc-elevated-card-container-elevation)}.mat-mdc-card .mdc-card::after{border-radius:var(--mdc-elevated-card-container-shape)}.mat-mdc-card-outlined{border-width:var(--mdc-outlined-card-outline-width);border-style:solid;border-color:var(--mdc-outlined-card-outline-color);border-radius:var(--mdc-outlined-card-container-shape);background-color:var(--mdc-outlined-card-container-color);box-shadow:var(--mdc-outlined-card-container-elevation)}.mat-mdc-card-outlined .mdc-card::after{border-radius:var(--mdc-outlined-card-container-shape)}.mat-mdc-card-title{font-family:var(--mat-card-title-text-font);line-height:var(--mat-card-title-text-line-height);font-size:var(--mat-card-title-text-size);letter-spacing:var(--mat-card-title-text-tracking);font-weight:var(--mat-card-title-text-weight)}.mat-mdc-card-subtitle{color:var(--mat-card-subtitle-text-color);font-family:var(--mat-card-subtitle-text-font);line-height:var(--mat-card-subtitle-text-line-height);font-size:var(--mat-card-subtitle-text-size);letter-spacing:var(--mat-card-subtitle-text-tracking);font-weight:var(--mat-card-subtitle-text-weight)}.mat-mdc-card{position:relative}.mat-mdc-card-title,.mat-mdc-card-subtitle{display:block;margin:0}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle{padding:16px 16px 0}.mat-mdc-card-header{display:flex;padding:16px 16px 0}.mat-mdc-card-content{display:block;padding:0 16px}.mat-mdc-card-content:first-child{padding-top:16px}.mat-mdc-card-content:last-child{padding-bottom:16px}.mat-mdc-card-title-group{display:flex;justify-content:space-between;width:100%}.mat-mdc-card-avatar{height:40px;width:40px;border-radius:50%;flex-shrink:0;margin-bottom:16px;object-fit:cover}.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-avatar~.mat-mdc-card-header-text .mat-mdc-card-title{line-height:normal}.mat-mdc-card-sm-image{width:80px;height:80px}.mat-mdc-card-md-image{width:112px;height:112px}.mat-mdc-card-lg-image{width:152px;height:152px}.mat-mdc-card-xl-image{width:240px;height:240px}.mat-mdc-card-subtitle~.mat-mdc-card-title,.mat-mdc-card-title~.mat-mdc-card-subtitle,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-title,.mat-mdc-card-header .mat-mdc-card-header-text .mat-mdc-card-subtitle,.mat-mdc-card-title-group .mat-mdc-card-title,.mat-mdc-card-title-group .mat-mdc-card-subtitle{padding-top:0}.mat-mdc-card-content>:last-child:not(.mat-mdc-card-footer){margin-bottom:0}.mat-mdc-card-actions-align-end{justify-content:flex-end}'],encapsulation:2,changeDetection:0})}}return i})(),mf=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["mat-card-title"],["","mat-card-title",""],["","matCardTitle",""]],hostAttrs:[1,"mat-mdc-card-title"],standalone:!0})}}return i})();var ff=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["mat-card-content"]],hostAttrs:[1,"mat-mdc-card-content"],standalone:!0})}}return i})(),gW=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["mat-card-subtitle"],["","mat-card-subtitle",""],["","matCardSubtitle",""]],hostAttrs:[1,"mat-mdc-card-subtitle"],standalone:!0})}}return i})(),_W=(()=>{class i{constructor(){this.align="start"}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["mat-card-actions"]],hostAttrs:[1,"mat-mdc-card-actions","mdc-card__actions"],hostVars:2,hostBindings:function(n,r){n&2&&le("mat-mdc-card-actions-align-end",r.align==="end")},inputs:{align:"align"},exportAs:["matCardActions"],standalone:!0})}}return i})(),bW=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-card-header"]],hostAttrs:[1,"mat-mdc-card-header"],standalone:!0,features:[Re],ngContentSelectors:Hye,decls:4,vars:0,consts:[[1,"mat-mdc-card-header-text"]],template:function(n,r){n&1&&(nt(Uye),Ee(0),f(1,"div",0),Ee(2,1),p(),Ee(3,2))},encapsulation:2,changeDetection:0})}}return i})();var vW=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["","mat-card-image",""],["","matCardImage",""]],hostAttrs:[1,"mat-mdc-card-image","mdc-card__media"],standalone:!0})}}return i})();var yW=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[ze,$r,ze]})}}return i})();var Gye=["switch"],$ye=["*"];function Kye(i,t){i&1&&(f(0,"div",10),bt(),f(1,"svg",12),j(2,"path",13),p(),f(3,"svg",14),j(4,"path",15),p()())}var Yye=new te("mat-slide-toggle-default-options",{providedIn:"root",factory:()=>({disableToggleValue:!1,hideIcon:!1})}),Qye={provide:mr,useExisting:Ri(()=>HC),multi:!0},UC=class{constructor(t,e){this.source=t,this.checked=e}},Xye=0,HC=(()=>{class i{_createChangeEvent(e){return new UC(this,e)}get buttonId(){return`${this.id||this._uniqueId}-button`}focus(){this._switchElement.nativeElement.focus()}get checked(){return this._checked}set checked(e){this._checked=e,this._changeDetectorRef.markForCheck()}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,n,r,s,o,a){this._elementRef=e,this._focusMonitor=n,this._changeDetectorRef=r,this.defaults=o,this._onChange=l=>{},this._onTouched=()=>{},this._validatorOnChange=()=>{},this._checked=!1,this.name=null,this.labelPosition="after",this.ariaLabel=null,this.ariaLabelledby=null,this.disabled=!1,this.disableRipple=!1,this.tabIndex=0,this.change=new ue,this.toggleChange=new ue,this.tabIndex=parseInt(s)||0,this.color=o.color||"accent",this._noopAnimations=a==="NoopAnimations",this.id=this._uniqueId=`mat-mdc-slide-toggle-${++Xye}`,this.hideIcon=o.hideIcon??!1,this._labelId=this._uniqueId+"-label"}ngAfterContentInit(){this._focusMonitor.monitor(this._elementRef,!0).subscribe(e=>{e==="keyboard"||e==="program"?(this._focused=!0,this._changeDetectorRef.markForCheck()):e||Promise.resolve().then(()=>{this._focused=!1,this._onTouched(),this._changeDetectorRef.markForCheck()})})}ngOnChanges(e){e.required&&this._validatorOnChange()}ngOnDestroy(){this._focusMonitor.stopMonitoring(this._elementRef)}writeValue(e){this.checked=!!e}registerOnChange(e){this._onChange=e}registerOnTouched(e){this._onTouched=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorOnChange=e}setDisabledState(e){this.disabled=e,this._changeDetectorRef.markForCheck()}toggle(){this.checked=!this.checked,this._onChange(this.checked)}_emitChangeEvent(){this._onChange(this.checked),this.change.emit(this._createChangeEvent(this.checked))}_handleClick(){this.toggleChange.emit(),this.defaults.disableToggleValue||(this.checked=!this.checked,this._onChange(this.checked),this.change.emit(new UC(this,this.checked)))}_getAriaLabelledBy(){return this.ariaLabelledby?this.ariaLabelledby:this.ariaLabel?null:this._labelId}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(zr),x(mt),yn("tabindex"),x(Yye),x(Ut,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-slide-toggle"]],viewQuery:function(n,r){if(n&1&&$e(Gye,5),n&2){let s;ye(s=xe())&&(r._switchElement=s.first)}},hostAttrs:[1,"mat-mdc-slide-toggle"],hostVars:13,hostBindings:function(n,r){n&2&&(nr("id",r.id),Se("tabindex",null)("aria-label",null)("name",null)("aria-labelledby",null),Hn(r.color?"mat-"+r.color:""),le("mat-mdc-slide-toggle-focused",r._focused)("mat-mdc-slide-toggle-checked",r.checked)("_mat-animation-noopable",r._noopAnimations))},inputs:{name:"name",id:"id",labelPosition:"labelPosition",ariaLabel:[H.None,"aria-label","ariaLabel"],ariaLabelledby:[H.None,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[H.None,"aria-describedby","ariaDescribedby"],required:[H.HasDecoratorInputTransform,"required","required",be],color:"color",disabled:[H.HasDecoratorInputTransform,"disabled","disabled",be],disableRipple:[H.HasDecoratorInputTransform,"disableRipple","disableRipple",be],tabIndex:[H.HasDecoratorInputTransform,"tabIndex","tabIndex",e=>e==null?0:sr(e)],checked:[H.HasDecoratorInputTransform,"checked","checked",be],hideIcon:[H.HasDecoratorInputTransform,"hideIcon","hideIcon",be]},outputs:{change:"change",toggleChange:"toggleChange"},exportAs:["matSlideToggle"],standalone:!0,features:[je([Qye,{provide:qs,useExisting:i,multi:!0}]),Ge,ht,Re],ngContentSelectors:$ye,decls:13,vars:24,consts:[["switch",""],["mat-internal-form-field","",3,"labelPosition"],["role","switch","type","button",1,"mdc-switch",3,"click","tabIndex","disabled"],[1,"mdc-switch__track"],[1,"mdc-switch__handle-track"],[1,"mdc-switch__handle"],[1,"mdc-switch__shadow"],[1,"mdc-elevation-overlay"],[1,"mdc-switch__ripple"],["mat-ripple","",1,"mat-mdc-slide-toggle-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-switch__icons"],[1,"mdc-label",3,"click","for"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--on"],["d","M19.69,5.23L8.96,15.96l-4.23-4.23L2.96,13.5l6,6L21.46,7L19.69,5.23z"],["viewBox","0 0 24 24","aria-hidden","true",1,"mdc-switch__icon","mdc-switch__icon--off"],["d","M20 13H4v-2h16v2z"]],template:function(n,r){if(n&1){let s=Me();nt(),f(0,"div",1)(1,"button",2,0),$("click",function(){return ne(s),re(r._handleClick())}),j(3,"div",3),f(4,"div",4)(5,"div",5)(6,"div",6),j(7,"div",7),p(),f(8,"div",8),j(9,"div",9),p(),Y(10,Kye,5,0,"div",10),p()()(),f(11,"label",11),$("click",function(a){return ne(s),re(a.stopPropagation())}),Ee(12),p()()}if(n&2){let s=yi(2);z("labelPosition",r.labelPosition),g(),le("mdc-switch--selected",r.checked)("mdc-switch--unselected",!r.checked)("mdc-switch--checked",r.checked)("mdc-switch--disabled",r.disabled),z("tabIndex",r.disabled?-1:r.tabIndex)("disabled",r.disabled),Se("id",r.buttonId)("name",r.name)("aria-label",r.ariaLabel)("aria-labelledby",r._getAriaLabelledBy())("aria-describedby",r.ariaDescribedby)("aria-required",r.required||null)("aria-checked",r.checked),g(8),z("matRippleTrigger",s)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),g(),et(10,r.hideIcon?-1:10),g(),z("for",r.buttonId),Se("id",r._labelId)}},dependencies:[Sa,wC],styles:['.mdc-elevation-overlay{position:absolute;border-radius:inherit;pointer-events:none;opacity:var(--mdc-elevation-overlay-opacity);transition:opacity 280ms cubic-bezier(0.4, 0, 0.2, 1);background-color:var(--mdc-elevation-overlay-color)}.mdc-switch{align-items:center;background:none;border:none;cursor:pointer;display:inline-flex;flex-shrink:0;margin:0;outline:none;overflow:visible;padding:0;position:relative}.mdc-switch[hidden]{display:none}.mdc-switch:disabled{cursor:default;pointer-events:none}.mdc-switch__track{overflow:hidden;position:relative;width:100%}.mdc-switch__track::before,.mdc-switch__track::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";height:100%;left:0;position:absolute;width:100%}@media screen and (forced-colors: active){.mdc-switch__track::before,.mdc-switch__track::after{border-color:currentColor}}.mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(-100%)}[dir=rtl] .mdc-switch__track::after,.mdc-switch__track[dir=rtl]::after{transform:translateX(100%)}.mdc-switch--selected .mdc-switch__track::before{transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.6, 1);transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__track::before,.mdc-switch--selected .mdc-switch__track[dir=rtl]::before{transform:translateX(-100%)}.mdc-switch--selected .mdc-switch__track::after{transition:transform 75ms 0ms cubic-bezier(0, 0, 0.2, 1);transform:translateX(0)}.mdc-switch__handle-track{height:100%;pointer-events:none;position:absolute;top:0;transition:transform 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);left:0;right:auto;transform:translateX(0)}[dir=rtl] .mdc-switch__handle-track,.mdc-switch__handle-track[dir=rtl]{left:auto;right:0}.mdc-switch--selected .mdc-switch__handle-track{transform:translateX(100%)}[dir=rtl] .mdc-switch--selected .mdc-switch__handle-track,.mdc-switch--selected .mdc-switch__handle-track[dir=rtl]{transform:translateX(-100%)}.mdc-switch__handle{display:flex;pointer-events:auto;position:absolute;top:50%;transform:translateY(-50%);left:0;right:auto}[dir=rtl] .mdc-switch__handle,.mdc-switch__handle[dir=rtl]{left:auto;right:0}.mdc-switch__handle::before,.mdc-switch__handle::after{border:1px solid rgba(0,0,0,0);border-radius:inherit;box-sizing:border-box;content:"";width:100%;height:100%;left:0;position:absolute;top:0;transition:background-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1),border-color 75ms 0ms cubic-bezier(0.4, 0, 0.2, 1);z-index:-1}@media screen and (forced-colors: active){.mdc-switch__handle::before,.mdc-switch__handle::after{border-color:currentColor}}.mdc-switch__shadow{border-radius:inherit;bottom:0;left:0;position:absolute;right:0;top:0}.mdc-elevation-overlay{bottom:0;left:0;right:0;top:0}.mdc-switch__ripple{left:50%;position:absolute;top:50%;transform:translate(-50%, -50%);z-index:-1}.mdc-switch:disabled .mdc-switch__ripple{display:none}.mdc-switch__icons{height:100%;position:relative;width:100%;z-index:1}.mdc-switch__icon{bottom:0;left:0;margin:auto;position:absolute;right:0;top:0;opacity:0;transition:opacity 30ms 0ms cubic-bezier(0.4, 0, 1, 1)}.mdc-switch--selected .mdc-switch__icon--on,.mdc-switch--unselected .mdc-switch__icon--off{opacity:1;transition:opacity 45ms 30ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle .mdc-switch--disabled+label{color:var(--mdc-switch-disabled-label-text-color)}.mdc-switch{width:var(--mdc-switch-track-width)}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-selected-handle-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-hover-handle-color)}.mdc-switch.mdc-switch--selected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-selected-focus-handle-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-selected-pressed-handle-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-selected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__handle::after{background:var(--mdc-switch-unselected-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-hover-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:focus:not(:active) .mdc-switch__handle::after{background:var(--mdc-switch-unselected-focus-handle-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__handle::after{background:var(--mdc-switch-unselected-pressed-handle-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__handle::after{background:var(--mdc-switch-disabled-unselected-handle-color)}.mdc-switch .mdc-switch__handle::before{background:var(--mdc-switch-handle-surface-color)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation)}.mdc-switch .mdc-switch__focus-ring-wrapper,.mdc-switch .mdc-switch__handle{height:var(--mdc-switch-handle-height)}.mdc-switch .mdc-switch__handle{border-radius:var(--mdc-switch-handle-shape)}.mdc-switch .mdc-switch__handle{width:var(--mdc-switch-handle-width)}.mdc-switch .mdc-switch__handle-track{width:calc(100% - var(--mdc-switch-handle-width))}.mdc-switch.mdc-switch--selected:enabled .mdc-switch__icon{fill:var(--mdc-switch-selected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-selected-icon-color)}.mdc-switch.mdc-switch--unselected:enabled .mdc-switch__icon{fill:var(--mdc-switch-unselected-icon-color)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icon{fill:var(--mdc-switch-disabled-unselected-icon-color)}.mdc-switch.mdc-switch--selected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-selected-icon-opacity)}.mdc-switch.mdc-switch--unselected:disabled .mdc-switch__icons{opacity:var(--mdc-switch-disabled-unselected-icon-opacity)}.mdc-switch.mdc-switch--selected .mdc-switch__icon{width:var(--mdc-switch-selected-icon-size);height:var(--mdc-switch-selected-icon-size)}.mdc-switch.mdc-switch--unselected .mdc-switch__icon{width:var(--mdc-switch-unselected-icon-size);height:var(--mdc-switch-unselected-icon-size)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-hover-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-focus-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-selected-pressed-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus) .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-hover-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-focus-state-layer-color)}.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:active .mdc-switch__ripple::after{background-color:var(--mdc-switch-unselected-pressed-state-layer-color)}.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-selected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--selected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-selected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--selected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--selected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-selected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus):hover .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:hover:not(:focus).mdc-ripple-surface--hover .mdc-switch__ripple::before{opacity:var(--mdc-switch-unselected-hover-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:focus.mdc-ripple-upgraded--background-focused .mdc-switch__ripple::before,.mdc-switch.mdc-switch--unselected:enabled:focus:not(.mdc-ripple-upgraded):focus .mdc-switch__ripple::before{transition-duration:75ms;opacity:var(--mdc-switch-unselected-focus-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded) .mdc-switch__ripple::after{transition:opacity 150ms linear}.mdc-switch.mdc-switch--unselected:enabled:active:not(.mdc-ripple-upgraded):active .mdc-switch__ripple::after{transition-duration:75ms;opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch.mdc-switch--unselected:enabled:active.mdc-ripple-upgraded{--mdc-ripple-fg-opacity:var(--mdc-switch-unselected-pressed-state-layer-opacity)}.mdc-switch .mdc-switch__ripple{height:var(--mdc-switch-state-layer-size);width:var(--mdc-switch-state-layer-size)}.mdc-switch .mdc-switch__track{height:var(--mdc-switch-track-height)}.mdc-switch:disabled .mdc-switch__track{opacity:var(--mdc-switch-disabled-track-opacity)}.mdc-switch:enabled .mdc-switch__track::after{background:var(--mdc-switch-selected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::after{background:var(--mdc-switch-selected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::after{background:var(--mdc-switch-selected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::after{background:var(--mdc-switch-disabled-selected-track-color)}.mdc-switch:enabled .mdc-switch__track::before{background:var(--mdc-switch-unselected-track-color)}.mdc-switch:enabled:hover:not(:focus):not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-hover-track-color)}.mdc-switch:enabled:focus:not(:active) .mdc-switch__track::before{background:var(--mdc-switch-unselected-focus-track-color)}.mdc-switch:enabled:active .mdc-switch__track::before{background:var(--mdc-switch-unselected-pressed-track-color)}.mdc-switch:disabled .mdc-switch__track::before{background:var(--mdc-switch-disabled-unselected-track-color)}.mdc-switch .mdc-switch__track{border-radius:var(--mdc-switch-track-shape)}.mdc-switch:enabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-handle-elevation-shadow)}.mdc-switch:disabled .mdc-switch__shadow{box-shadow:var(--mdc-switch-disabled-handle-elevation-shadow)}.mat-mdc-slide-toggle{display:inline-block;-webkit-tap-highlight-color:rgba(0,0,0,0);outline:0}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple,.mat-mdc-slide-toggle .mdc-switch__ripple::after{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-slide-toggle .mat-mdc-slide-toggle-ripple:not(:empty),.mat-mdc-slide-toggle .mdc-switch__ripple::after:not(:empty){transform:translateZ(0)}.mat-mdc-slide-toggle .mdc-switch__ripple::after{content:"";opacity:0}.mat-mdc-slide-toggle .mdc-switch:hover .mdc-switch__ripple::after{opacity:.04;transition:opacity 75ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mdc-switch .mdc-switch__ripple::after{opacity:.12}.mat-mdc-slide-toggle.mat-mdc-slide-toggle-focused .mat-mdc-focus-indicator::before{content:""}.mat-mdc-slide-toggle .mat-ripple-element{opacity:.12}.mat-mdc-slide-toggle .mat-mdc-focus-indicator::before{border-radius:50%}.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle-track,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-elevation-overlay,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__icon,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__handle::after,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::before,.mat-mdc-slide-toggle._mat-animation-noopable .mdc-switch__track::after{transition:none}.mat-mdc-slide-toggle .mdc-switch:enabled+.mdc-label{cursor:pointer}.mdc-switch__handle{transition:width 75ms cubic-bezier(0.4, 0, 0.2, 1),height 75ms cubic-bezier(0.4, 0, 0.2, 1),margin 75ms cubic-bezier(0.4, 0, 0.2, 1)}.mdc-switch--selected .mdc-switch__track::before{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mdc-switch--selected .mdc-switch__track::after{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch--unselected .mdc-switch__track::before{opacity:var(--mat-switch-visible-track-opacity);transition:var(--mat-switch-visible-track-transition)}.mdc-switch--unselected .mdc-switch__track::after{opacity:var(--mat-switch-hidden-track-opacity);transition:var(--mat-switch-hidden-track-transition)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{width:var(--mat-switch-unselected-handle-size);height:var(--mat-switch-unselected-handle-size)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{width:var(--mat-switch-selected-handle-size);height:var(--mat-switch-selected-handle-size)}.mat-mdc-slide-toggle .mdc-switch__handle:has(.mdc-switch__icons){width:var(--mat-switch-with-icon-handle-size);height:var(--mat-switch-with-icon-handle-size)}.mat-mdc-slide-toggle:active .mdc-switch:not(.mdc-switch--disabled) .mdc-switch__handle{width:var(--mat-switch-pressed-handle-size);height:var(--mat-switch-pressed-handle-size)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle{margin:var(--mat-switch-selected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--selected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-selected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle{margin:var(--mat-switch-unselected-handle-horizontal-margin)}.mat-mdc-slide-toggle .mdc-switch--unselected .mdc-switch__handle:has(.mdc-switch__icons){margin:var(--mat-switch-unselected-with-icon-handle-horizontal-margin)}.mat-mdc-slide-toggle:active .mdc-switch--selected:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-selected-pressed-handle-horizontal-margin)}.mat-mdc-slide-toggle:active .mdc-switch--unselected:not(.mdc-switch--disabled) .mdc-switch__handle{margin:var(--mat-switch-unselected-pressed-handle-horizontal-margin)}.mdc-switch__track::after,.mdc-switch__track::before{border-width:var(--mat-switch-track-outline-width);border-color:var(--mat-switch-track-outline-color)}.mdc-switch--selected .mdc-switch__track::after,.mdc-switch--selected .mdc-switch__track::before{border-width:var(--mat-switch-selected-track-outline-width)}.mdc-switch--disabled .mdc-switch__track::after,.mdc-switch--disabled .mdc-switch__track::before{border-width:var(--mat-switch-disabled-unselected-track-outline-width);border-color:var(--mat-switch-disabled-unselected-track-outline-color)}.mdc-switch--disabled.mdc-switch--selected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-selected-handle-opacity)}.mdc-switch--disabled.mdc-switch--unselected .mdc-switch__handle::after{opacity:var(--mat-switch-disabled-unselected-handle-opacity)}'],encapsulation:2,changeDetection:0})}}return i})();var xW=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[HC,ze,ze]})}}return i})();var Jye=["determinateSpinner"];function exe(i,t){if(i&1&&(bt(),f(0,"svg",11),j(1,"circle",12),p()),i&2){let e=W();Se("viewBox",e._viewBox()),g(),vi("stroke-dasharray",e._strokeCircumference(),"px")("stroke-dashoffset",e._strokeCircumference()/2,"px")("stroke-width",e._circleStrokeWidth(),"%"),Se("r",e._circleRadius())}}var txe=new te("mat-progress-spinner-default-options",{providedIn:"root",factory:ixe});function ixe(){return{diameter:wW}}var wW=100,nxe=10,qC=(()=>{class i{get color(){return this._color||this._defaultColor}set color(e){this._color=e}constructor(e,n,r){this._elementRef=e,this._defaultColor="primary",this._value=0,this._diameter=wW,this._noopAnimations=n==="NoopAnimations"&&!!r&&!r._forceAnimations,this.mode=e.nativeElement.nodeName.toLowerCase()==="mat-spinner"?"indeterminate":"determinate",r&&(r.color&&(this.color=this._defaultColor=r.color),r.diameter&&(this.diameter=r.diameter),r.strokeWidth&&(this.strokeWidth=r.strokeWidth))}get value(){return this.mode==="determinate"?this._value:0}set value(e){this._value=Math.max(0,Math.min(100,e||0))}get diameter(){return this._diameter}set diameter(e){this._diameter=e||0}get strokeWidth(){return this._strokeWidth??this.diameter/10}set strokeWidth(e){this._strokeWidth=e||0}_circleRadius(){return(this.diameter-nxe)/2}_viewBox(){let e=this._circleRadius()*2+this.strokeWidth;return`0 0 ${e} ${e}`}_strokeCircumference(){return 2*Math.PI*this._circleRadius()}_strokeDashOffset(){return this.mode==="determinate"?this._strokeCircumference()*(100-this._value)/100:null}_circleStrokeWidth(){return this.strokeWidth/this.diameter*100}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(Ut,8),x(txe))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-progress-spinner"],["mat-spinner"]],viewQuery:function(n,r){if(n&1&&$e(Jye,5),n&2){let s;ye(s=xe())&&(r._determinateCircle=s.first)}},hostAttrs:["role","progressbar","tabindex","-1",1,"mat-mdc-progress-spinner","mdc-circular-progress"],hostVars:18,hostBindings:function(n,r){n&2&&(Se("aria-valuemin",0)("aria-valuemax",100)("aria-valuenow",r.mode==="determinate"?r.value:null)("mode",r.mode),Hn("mat-"+r.color),vi("width",r.diameter,"px")("height",r.diameter,"px")("--mdc-circular-progress-size",r.diameter+"px")("--mdc-circular-progress-active-indicator-width",r.diameter+"px"),le("_mat-animation-noopable",r._noopAnimations)("mdc-circular-progress--indeterminate",r.mode==="indeterminate"))},inputs:{color:"color",mode:"mode",value:[H.HasDecoratorInputTransform,"value","value",sr],diameter:[H.HasDecoratorInputTransform,"diameter","diameter",sr],strokeWidth:[H.HasDecoratorInputTransform,"strokeWidth","strokeWidth",sr]},exportAs:["matProgressSpinner"],standalone:!0,features:[Ge,Re],decls:14,vars:11,consts:[["circle",""],["determinateSpinner",""],["aria-hidden","true",1,"mdc-circular-progress__determinate-container"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__determinate-circle-graphic"],["cx","50%","cy","50%",1,"mdc-circular-progress__determinate-circle"],["aria-hidden","true",1,"mdc-circular-progress__indeterminate-container"],[1,"mdc-circular-progress__spinner-layer"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-left"],[3,"ngTemplateOutlet"],[1,"mdc-circular-progress__gap-patch"],[1,"mdc-circular-progress__circle-clipper","mdc-circular-progress__circle-right"],["xmlns","http://www.w3.org/2000/svg","focusable","false",1,"mdc-circular-progress__indeterminate-circle-graphic"],["cx","50%","cy","50%"]],template:function(n,r){if(n&1&&(Y(0,exe,2,8,"ng-template",null,0,rr),f(2,"div",2,1),bt(),f(4,"svg",3),j(5,"circle",4),p()(),li(),f(6,"div",5)(7,"div",6)(8,"div",7),sn(9,8),p(),f(10,"div",9),sn(11,8),p(),f(12,"div",10),sn(13,8),p()()()),n&2){let s=yi(1);g(4),Se("viewBox",r._viewBox()),g(),vi("stroke-dasharray",r._strokeCircumference(),"px")("stroke-dashoffset",r._strokeDashOffset(),"px")("stroke-width",r._circleStrokeWidth(),"%"),Se("r",r._circleRadius()),g(4),z("ngTemplateOutlet",s),g(2),z("ngTemplateOutlet",s),g(2),z("ngTemplateOutlet",s)}},dependencies:[Qf],styles:["@keyframes mdc-circular-progress-container-rotate{to{transform:rotate(360deg)}}@keyframes mdc-circular-progress-spinner-layer-rotate{12.5%{transform:rotate(135deg)}25%{transform:rotate(270deg)}37.5%{transform:rotate(405deg)}50%{transform:rotate(540deg)}62.5%{transform:rotate(675deg)}75%{transform:rotate(810deg)}87.5%{transform:rotate(945deg)}100%{transform:rotate(1080deg)}}@keyframes mdc-circular-progress-color-1-fade-in-out{from{opacity:.99}25%{opacity:.99}26%{opacity:0}89%{opacity:0}90%{opacity:.99}to{opacity:.99}}@keyframes mdc-circular-progress-color-2-fade-in-out{from{opacity:0}15%{opacity:0}25%{opacity:.99}50%{opacity:.99}51%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-3-fade-in-out{from{opacity:0}40%{opacity:0}50%{opacity:.99}75%{opacity:.99}76%{opacity:0}to{opacity:0}}@keyframes mdc-circular-progress-color-4-fade-in-out{from{opacity:0}65%{opacity:0}75%{opacity:.99}90%{opacity:.99}to{opacity:0}}@keyframes mdc-circular-progress-left-spin{from{transform:rotate(265deg)}50%{transform:rotate(130deg)}to{transform:rotate(265deg)}}@keyframes mdc-circular-progress-right-spin{from{transform:rotate(-265deg)}50%{transform:rotate(-130deg)}to{transform:rotate(-265deg)}}.mdc-circular-progress{display:inline-flex;position:relative;direction:ltr;line-height:0;transition:opacity 250ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-circular-progress__determinate-container,.mdc-circular-progress__indeterminate-circle-graphic,.mdc-circular-progress__indeterminate-container,.mdc-circular-progress__spinner-layer{position:absolute;width:100%;height:100%}.mdc-circular-progress__determinate-container{transform:rotate(-90deg)}.mdc-circular-progress__indeterminate-container{font-size:0;letter-spacing:0;white-space:nowrap;opacity:0}.mdc-circular-progress__determinate-circle-graphic,.mdc-circular-progress__indeterminate-circle-graphic{fill:rgba(0,0,0,0)}.mdc-circular-progress__determinate-circle{transition:stroke-dashoffset 500ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-circular-progress__gap-patch{position:absolute;top:0;left:47.5%;box-sizing:border-box;width:5%;height:100%;overflow:hidden}.mdc-circular-progress__gap-patch .mdc-circular-progress__indeterminate-circle-graphic{left:-900%;width:2000%;transform:rotate(180deg)}.mdc-circular-progress__circle-clipper{display:inline-flex;position:relative;width:50%;height:100%;overflow:hidden}.mdc-circular-progress__circle-clipper .mdc-circular-progress__indeterminate-circle-graphic{width:200%}.mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{left:-100%}.mdc-circular-progress--indeterminate .mdc-circular-progress__determinate-container{opacity:0}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{opacity:1}.mdc-circular-progress--indeterminate .mdc-circular-progress__indeterminate-container{animation:mdc-circular-progress-container-rotate 1568.2352941176ms linear infinite}.mdc-circular-progress--indeterminate .mdc-circular-progress__spinner-layer{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-1{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-1-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-2{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-2-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-3{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-3-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__color-4{animation:mdc-circular-progress-spinner-layer-rotate 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both,mdc-circular-progress-color-4-fade-in-out 5332ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-left .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-left-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--indeterminate .mdc-circular-progress__circle-right .mdc-circular-progress__indeterminate-circle-graphic{animation:mdc-circular-progress-right-spin 1333ms cubic-bezier(0.4, 0, 0.2, 1) infinite both}.mdc-circular-progress--closed{opacity:0}.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:var(--mdc-circular-progress-active-indicator-color)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle,.mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner circle{stroke-width:var(--mdc-circular-progress-active-indicator-width)}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-1 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-2 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-3 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mat-mdc-progress-spinner .mdc-circular-progress--four-color .mdc-circular-progress__color-4 .mdc-circular-progress__indeterminate-circle-graphic{stroke:CanvasText}}.mat-mdc-progress-spinner .mdc-circular-progress{width:var(--mdc-circular-progress-size) !important;height:var(--mdc-circular-progress-size) !important}.mat-mdc-progress-spinner{display:block;overflow:hidden;line-height:0}.mat-mdc-progress-spinner._mat-animation-noopable,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__determinate-circle{transition:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-circle-graphic,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__spinner-layer,.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container{animation:none}.mat-mdc-progress-spinner._mat-animation-noopable .mdc-circular-progress__indeterminate-container circle{stroke-dasharray:0 !important}.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__indeterminate-circle-graphic,.cdk-high-contrast-active .mat-mdc-progress-spinner .mdc-circular-progress__determinate-circle{stroke:currentColor;stroke:CanvasText}"],encapsulation:2,changeDetection:0})}}return i})();var CW=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[$r,ze]})}}return i})();function rxe(i,t){if(i&1&&(f(0,"div",1)(1,"div",2),j(2,"mat-progress-spinner",3),f(3,"p",4),y(4),p()()()),i&2){let e=W();g(4),B(e.message)}}var gf=(()=>{class i{constructor(){this.isLoading=!0,this.message="Loading..."}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=ae({type:i,selectors:[["app-loader"]],inputs:{isLoading:"isLoading",message:"message"},decls:1,vars:1,consts:[["class","backdrop",4,"ngIf"],[1,"backdrop"],[1,"spinner-container"],["color","primary","mode","indeterminate","diameter","60","strokeWidth","5"],[1,"loading-text"]],template:function(n,r){n&1&&Y(0,rxe,5,1,"div",0),n&2&&z("ngIf",r.isLoading)},dependencies:[Rt,qC],styles:[".backdrop[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background:#fffc;display:flex;justify-content:center;align-items:center;z-index:9999;-webkit-backdrop-filter:blur(2px);backdrop-filter:blur(2px)}.spinner-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;gap:1rem;animation:_ngcontent-%COMP%_fadeIn .3s ease-in-out}.loading-text[_ngcontent-%COMP%]{font-size:1.2rem;color:#1976d2;font-weight:500;font-family:Roboto,sans-serif}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:scale(.95)}to{opacity:1;transform:scale(1)}}"]})}}return i})();function sxe(i,t){i&1&&j(0,"span",5)}function oxe(i,t){if(i&1&&(f(0,"li"),y(1),p()),i&2){let e=t.$implicit;g(),B(e)}}function axe(i,t){if(i&1){let e=Me();f(0,"div",6)(1,"div",7)(2,"h3"),y(3,"Update Available"),p(),f(4,"div",8),y(5),p(),f(6,"ul",9),Y(7,oxe,2,1,"li",10),p(),f(8,"button",11),$("click",function(){ne(e);let r=W();return re(r.close())}),y(9,"Close"),p()()()}if(i&2){let e=W();g(5),Q("Version ",e.version,""),g(2),z("ngForOf",e.versionMessage)}}var WC=(()=>{class i{constructor(){this.showPopup=!1,this.dismissed=!1,this.version=i.appVersion,this.versionMessage=["\u{1F31F} Redesigned the dashboard with a fresh modern UI","\u{1F512} Improved authentication security","\u{1F310} Enhanced support for Arabic translations","\u2699\uFE0F Performance optimizations and bug fixes"]}static{this.appVersion="2.5.3"}ngOnInit(){if(typeof window<"u"&&window.localStorage){let e=localStorage.getItem("appVersion"),n=localStorage.getItem("versionDismissed");e!==i.appVersion?(this.dismissed=!1,localStorage.setItem("appVersion",i.appVersion),localStorage.removeItem("versionDismissed")):n===i.appVersion&&(this.dismissed=!0)}}togglePopup(){this.showPopup=!this.showPopup}close(){this.showPopup=!1,this.dismissed=!0,typeof window<"u"&&window.localStorage&&localStorage.setItem("versionDismissed",i.appVersion)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=ae({type:i,selectors:[["app-version-alert"]],decls:6,vars:4,consts:[[1,"version-alert-container"],[1,"ring-button",3,"click"],[1,"icon"],["class","ring",4,"ngIf"],["class","version-popup",4,"ngIf"],[1,"ring"],[1,"version-popup"],[1,"card"],[1,"version-label"],[1,"message-list"],[4,"ngFor","ngForOf"],[3,"click"]],template:function(n,r){n&1&&(f(0,"div",0)(1,"button",1),$("click",function(){return r.togglePopup()}),f(2,"span",2),y(3,"notifications"),p(),Y(4,sxe,1,0,"span",3),p(),Y(5,axe,10,2,"div",4),p()),n&2&&(g(),le("dismissed",r.dismissed),g(3),z("ngIf",!r.dismissed),g(),z("ngIf",r.showPopup))},dependencies:[Js,Rt],styles:[".version-alert-container[_ngcontent-%COMP%]{position:relative;z-index:1000;top:2px}.ring-button[_ngcontent-%COMP%]{position:relative;background:none;border:none;cursor:pointer;font-size:24px;color:#007bff;padding:8px}.ring-button.dismissed[_ngcontent-%COMP%]{color:gray}.ring-button[_ngcontent-%COMP%]   .icon[_ngcontent-%COMP%]{font-family:Material Icons;font-size:23px}.ring-button[_ngcontent-%COMP%]   .ring[_ngcontent-%COMP%]{position:absolute;top:5px;right:8px;width:7px;height:7px;background:red;border-radius:50%;animation:_ngcontent-%COMP%_pulse 2s infinite}@keyframes _ngcontent-%COMP%_pulse{0%{transform:scale(1);opacity:1}50%{transform:scale(1.5);opacity:.5}to{transform:scale(1);opacity:1}}.version-popup[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);background:#fff;padding:24px;border-radius:16px;box-shadow:0 8px 20px #00000040;width:90%;max-width:400px;z-index:1100;animation:_ngcontent-%COMP%_fadeIn .3s ease}.version-popup[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:12px;text-align:center}.version-popup[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{margin:0;color:#333}.version-popup[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{margin-top:10px;background:#007bff;color:#fff;padding:10px 20px;border:none;border-radius:8px;cursor:pointer;font-weight:700}.message-list[_ngcontent-%COMP%]{list-style:none;padding:0;margin:0;text-align:left}.message-list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:8px;color:#444;font-size:14px}@keyframes _ngcontent-%COMP%_fadeIn{0%{opacity:0;transform:translate(-50%,-60%)}to{opacity:1;transform:translate(-50%,-50%)}}.version-tag[_ngcontent-%COMP%]{position:fixed;bottom:12px;right:16px;font-size:12px;background:#f1f1f1;color:#666;padding:4px 8px;border-radius:6px}.version-label[_ngcontent-%COMP%]{font-size:14px;color:#888;margin-bottom:10px;font-weight:500}"]})}}return i})();var vc=class{},kW=(()=>{class i extends vc{getTranslation(e){return We({})}static \u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})();static \u0275prov=me({token:i,factory:i.\u0275fac})}return i})(),sb=class{},EW=(()=>{class i{handle(e){return e.key}static \u0275fac=function(n){return new(n||i)};static \u0275prov=me({token:i,factory:i.\u0275fac})}return i})();function $C(i,t){if(i===t)return!0;if(i===null||t===null)return!1;if(i!==i&&t!==t)return!0;let e=typeof i,n=typeof t,r,s,o;if(e==n&&e=="object")if(Array.isArray(i)){if(!Array.isArray(t))return!1;if((r=i.length)==t.length){for(s=0;s<r;s++)if(!$C(i[s],t[s]))return!1;return!0}}else{if(Array.isArray(t))return!1;o=Object.create(null);for(s in i){if(!$C(i[s],t[s]))return!1;o[s]=!0}for(s in t)if(!(s in o)&&typeof t[s]<"u")return!1;return!0}return!1}function bc(i){return typeof i<"u"&&i!==null}function ab(i){return GC(i)&&!P2(i)&&i!==null}function GC(i){return typeof i=="object"}function P2(i){return Array.isArray(i)}function R2(i){return typeof i=="string"}function cxe(i){return typeof i=="function"}function T2(i,t){let e=Object.assign({},i);return GC(i)?(GC(i)&&GC(t)&&Object.keys(t).forEach(n=>{ab(t[n])?n in i?e[n]=T2(i[n],t[n]):Object.assign(e,{[n]:t[n]}):Object.assign(e,{[n]:t[n]})}),e):T2({},t)}function I2(i,t){let e=t.split(".");t="";do t+=e.shift(),bc(i)&&bc(i[t])&&(ab(i[t])||P2(i[t])||!e.length)?(i=i[t],t=""):e.length?t+=".":i=void 0;while(e.length);return i}function dxe(i,t,e){let n=t.split("."),r=i;for(let s=0;s<n.length;s++){let o=n[s];s===n.length-1?r[o]=e:((!r[o]||!ab(r[o]))&&(r[o]={}),r=r[o])}}var _f=class{},TW=(()=>{class i extends _f{templateMatcher=/{{\s?([^{}\s]*)\s?}}/g;interpolate(e,n){if(R2(e))return this.interpolateString(e,n);if(cxe(e))return this.interpolateFunction(e,n)}interpolateFunction(e,n){return e(n)}interpolateString(e,n){return n?e.replace(this.templateMatcher,(r,s)=>{let o=I2(n,s);return bc(o)?o:r}):e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})();static \u0275prov=me({token:i,factory:i.\u0275fac})}return i})(),bf=class{},IW=(()=>{class i extends bf{compile(e,n){return e}compileTranslations(e,n){return e}static \u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})();static \u0275prov=me({token:i,factory:i.\u0275fac})}return i})(),ob=class{defaultLang;currentLang=this.defaultLang;translations={};langs=[];onTranslationChange=new ue;onLangChange=new ue;onDefaultLangChange=new ue},D2=new te("ISOLATE_TRANSLATE_SERVICE"),M2=new te("USE_DEFAULT_LANG"),A2=new te("DEFAULT_LANGUAGE"),O2=new te("USE_EXTEND"),rb=i=>Xs(i)?i:We(i),hu=(()=>{class i{store;currentLoader;compiler;parser;missingTranslationHandler;useDefaultLang;extend;loadingTranslations;pending=!1;_translationRequests={};lastUseLanguage=null;get onTranslationChange(){return this.store.onTranslationChange}get onLangChange(){return this.store.onLangChange}get onDefaultLangChange(){return this.store.onDefaultLangChange}get defaultLang(){return this.store.defaultLang}set defaultLang(e){this.store.defaultLang=e}get currentLang(){return this.store.currentLang}set currentLang(e){this.store.currentLang=e}get langs(){return this.store.langs}set langs(e){this.store.langs=e}get translations(){return this.store.translations}set translations(e){this.store.translations=e}constructor(e,n,r,s,o,a=!0,l=!1,c=!1,d){this.store=e,this.currentLoader=n,this.compiler=r,this.parser=s,this.missingTranslationHandler=o,this.useDefaultLang=a,this.extend=c,l&&(this.store=new ob),d&&this.setDefaultLang(d)}setDefaultLang(e){if(e===this.defaultLang)return;let n=this.retrieveTranslations(e);typeof n<"u"?(this.defaultLang==null&&(this.defaultLang=e),n.pipe(Pt(1)).subscribe(()=>{this.changeDefaultLang(e)})):this.changeDefaultLang(e)}getDefaultLang(){return this.defaultLang}use(e){if(this.lastUseLanguage=e,e===this.currentLang)return We(this.translations[e]);this.currentLang||(this.currentLang=e);let n=this.retrieveTranslations(e);return Xs(n)?(n.pipe(Pt(1)).subscribe(()=>{this.changeLang(e)}),n):(this.changeLang(e),We(this.translations[e]))}changeLang(e){e===this.lastUseLanguage&&(this.currentLang=e,this.onLangChange.emit({lang:e,translations:this.translations[e]}),this.defaultLang==null&&this.changeDefaultLang(e))}retrieveTranslations(e){if(typeof this.translations[e]>"u"||this.extend)return this._translationRequests[e]=this._translationRequests[e]||this.loadAndCompileTranslations(e),this._translationRequests[e]}getTranslation(e){return this.loadAndCompileTranslations(e)}loadAndCompileTranslations(e){this.pending=!0;let n=this.currentLoader.getTranslation(e).pipe(Jo(1),Pt(1));return this.loadingTranslations=n.pipe(Ue(r=>this.compiler.compileTranslations(r,e)),Jo(1),Pt(1)),this.loadingTranslations.subscribe({next:r=>{this.translations[e]=this.extend&&this.translations[e]?ve(ve({},r),this.translations[e]):r,this.updateLangs(),this.pending=!1},error:r=>{this.pending=!1}}),n}setTranslation(e,n,r=!1){let s=this.compiler.compileTranslations(n,e);(r||this.extend)&&this.translations[e]?this.translations[e]=T2(this.translations[e],s):this.translations[e]=s,this.updateLangs(),this.onTranslationChange.emit({lang:e,translations:this.translations[e]})}getLangs(){return this.langs}addLangs(e){let n=e.filter(r=>!this.langs.includes(r));n.length>0&&(this.langs=[...this.langs,...n])}updateLangs(){this.addLangs(Object.keys(this.translations))}getParsedResultForKey(e,n,r){let s;if(e&&(s=this.runInterpolation(I2(e,n),r)),s===void 0&&this.defaultLang!=null&&this.defaultLang!==this.currentLang&&this.useDefaultLang&&(s=this.runInterpolation(I2(this.translations[this.defaultLang],n),r)),s===void 0){let o={key:n,translateService:this};typeof r<"u"&&(o.interpolateParams=r),s=this.missingTranslationHandler.handle(o)}return s!==void 0?s:n}runInterpolation(e,n){if(P2(e))return e.map(r=>this.runInterpolation(r,n));if(ab(e)){let r={};for(let s in e){let o=this.runInterpolation(e[s],n);o!==void 0&&(r[s]=o)}return r}else return this.parser.interpolate(e,n)}getParsedResult(e,n,r){if(n instanceof Array){let s={},o=!1;for(let l of n)s[l]=this.getParsedResultForKey(e,l,r),o=o||Xs(s[l]);if(!o)return s;let a=n.map(l=>rb(s[l]));return Ba(a).pipe(Ue(l=>{let c={};return l.forEach((d,u)=>{c[n[u]]=d}),c}))}return this.getParsedResultForKey(e,n,r)}get(e,n){if(!bc(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return this.pending?this.loadingTranslations.pipe(VN(r=>rb(this.getParsedResult(r,e,n)))):rb(this.getParsedResult(this.translations[this.currentLang],e,n))}getStreamOnTranslationChange(e,n){if(!bc(e)||!e.length)throw new Error('Parameter "key" is required and cannot be empty');return Gf(Zo(()=>this.get(e,n)),this.onTranslationChange.pipe(bi(r=>{let s=this.getParsedResult(r.translations,e,n);return rb(s)})))}stream(e,n){if(!bc(e)||!e.length)throw new Error('Parameter "key" required');return Gf(Zo(()=>this.get(e,n)),this.onLangChange.pipe(bi(r=>{let s=this.getParsedResult(r.translations,e,n);return rb(s)})))}instant(e,n){if(!bc(e)||e.length===0)throw new Error('Parameter "key" is required and cannot be empty');let r=this.getParsedResult(this.translations[this.currentLang],e,n);return Xs(r)?Array.isArray(e)?e.reduce((s,o)=>(s[o]=o,s),{}):e:r}set(e,n,r=this.currentLang){dxe(this.translations[r],e,R2(n)?this.compiler.compile(n,r):this.compiler.compileTranslations(n,r)),this.updateLangs(),this.onTranslationChange.emit({lang:r,translations:this.translations[r]})}changeDefaultLang(e){this.defaultLang=e,this.onDefaultLangChange.emit({lang:e,translations:this.translations[e]})}reloadLang(e){return this.resetLang(e),this.loadAndCompileTranslations(e)}resetLang(e){delete this._translationRequests[e],delete this.translations[e]}getBrowserLang(){if(typeof window>"u"||!window.navigator)return;let e=this.getBrowserCultureLang();return e?e.split(/[-_]/)[0]:void 0}getBrowserCultureLang(){if(!(typeof window>"u"||typeof window.navigator>"u"))return window.navigator.languages?window.navigator.languages[0]:window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage}static \u0275fac=function(n){return new(n||i)(V(ob),V(vc),V(bf),V(_f),V(sb),V(M2),V(D2),V(O2),V(A2))};static \u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}return i})();var Ai=(()=>{class i{translate;_ref;value="";lastKey=null;lastParams=[];onTranslationChange;onLangChange;onDefaultLangChange;constructor(e,n){this.translate=e,this._ref=n}updateValue(e,n,r){let s=o=>{this.value=o!==void 0?o:e,this.lastKey=e,this._ref.markForCheck()};if(r){let o=this.translate.getParsedResult(r,e,n);Xs(o)?o.subscribe(s):s(o)}this.translate.get(e,n).subscribe(s)}transform(e,...n){if(!e||!e.length)return e;if($C(e,this.lastKey)&&$C(n,this.lastParams))return this.value;let r;if(bc(n[0])&&n.length)if(R2(n[0])&&n[0].length){let s=n[0].replace(/(')?([a-zA-Z0-9_]+)(')?(\s)?:/g,'"$2":').replace(/:(\s)?(')(.*?)(')/g,':"$3"');try{r=JSON.parse(s)}catch(o){throw new SyntaxError(`Wrong parameter in TranslatePipe. Expected a valid Object, received: ${n[0]}`)}}else ab(n[0])&&(r=n[0]);return this.lastKey=e,this.lastParams=n,this.updateValue(e,r),this._dispose(),this.onTranslationChange||(this.onTranslationChange=this.translate.onTranslationChange.subscribe(s=>{this.lastKey&&s.lang===this.translate.currentLang&&(this.lastKey=null,this.updateValue(e,r,s.translations))})),this.onLangChange||(this.onLangChange=this.translate.onLangChange.subscribe(s=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,r,s.translations))})),this.onDefaultLangChange||(this.onDefaultLangChange=this.translate.onDefaultLangChange.subscribe(()=>{this.lastKey&&(this.lastKey=null,this.updateValue(e,r))})),this.value}_dispose(){typeof this.onTranslationChange<"u"&&(this.onTranslationChange.unsubscribe(),this.onTranslationChange=void 0),typeof this.onLangChange<"u"&&(this.onLangChange.unsubscribe(),this.onLangChange=void 0),typeof this.onDefaultLangChange<"u"&&(this.onDefaultLangChange.unsubscribe(),this.onDefaultLangChange=void 0)}ngOnDestroy(){this._dispose()}static \u0275fac=function(n){return new(n||i)(x(hu,16),x(mt,16))};static \u0275pipe=WN({name:"translate",type:i,pure:!1,standalone:!0});static \u0275prov=me({token:i,factory:i.\u0275fac})}return i})();var DW=(()=>{class i{static forRoot(e={}){return{ngModule:i,providers:[e.loader||{provide:vc,useClass:kW},e.compiler||{provide:bf,useClass:IW},e.parser||{provide:_f,useClass:TW},e.missingTranslationHandler||{provide:sb,useClass:EW},ob,{provide:D2,useValue:e.isolate},{provide:M2,useValue:e.useDefaultLang},{provide:O2,useValue:e.extend},{provide:A2,useValue:e.defaultLanguage},hu]}}static forChild(e={}){return{ngModule:i,providers:[e.loader||{provide:vc,useClass:kW},e.compiler||{provide:bf,useClass:IW},e.parser||{provide:_f,useClass:TW},e.missingTranslationHandler||{provide:sb,useClass:EW},{provide:D2,useValue:e.isolate},{provide:M2,useValue:e.useDefaultLang},{provide:O2,useValue:e.extend},{provide:A2,useValue:e.defaultLanguage},hu]}}static \u0275fac=function(n){return new(n||i)};static \u0275mod=de({type:i});static \u0275inj=ce({})}return i})();function uxe(i,t){i&1&&j(0,"app-loader",14),i&2&&z("message","Logging out...")}var gn=(()=>{class i{constructor(e,n,r,s){this.renderer=e,this.el=n,this.firebaseServices=r,this.router=s,this.isLogout=new ue,this.currentSection="",this.isNavbarOpen=!1,this.isNavbarHidden=!1,this.lastScrollTop=0,this.isDropdownOpen=!1,this.isLoading=!1,this.isClientsDropdownOpen=!1}ngOnInit(){this.updateCurrentSectionFromUrl(this.router.url),this.routerSubscription=this.router.events.subscribe(e=>{e instanceof s0&&(this.updateCurrentSectionFromUrl(e.urlAfterRedirects),this.isNavbarOpen=!1,this.isDropdownOpen=!1)})}ngOnDestroy(){this.routerSubscription.unsubscribe()}updateCurrentSectionFromUrl(e){e.startsWith("/sheintable")?this.currentSection="home":e.startsWith("/client")?this.currentSection="client":e.startsWith("/analysic")?this.currentSection="analytics":e.startsWith("/aboutme")?this.currentSection="about":e.startsWith("/settings")?this.currentSection="settings":e.startsWith("/history")?this.currentSection="history":this.currentSection=""}navigateToHome(){this.router.navigate(["/sheintable"])}navigateToClient(){this.router.navigate(["/client"])}navigateToAnalytics(){this.router.navigate(["/analysic"])}navigateToAbout(){this.router.navigate(["/aboutme"])}navigateToSettings(){this.router.navigate(["/settings"])}navigateToHistory(){this.router.navigate(["/history"])}navigateToList(){this.router.navigate(["/clients"])}toggleDropdown(){this.isDropdownOpen=!this.isDropdownOpen}logout(){this.isLoading=!0,setTimeout(()=>{this.firebaseServices.logout(),this.isLogout.emit(),this.router.navigate(["/login"]),this.isLoading=!1},1e3)}toggleClientsDropdown(){this.isClientsDropdownOpen=!this.isClientsDropdownOpen,this.isClientsDropdownOpen&&(this.isDropdownOpen=!1)}toggleMenu(){this.isNavbarOpen=!this.isNavbarOpen}onWindowScroll(){let e=window.pageYOffset||document.documentElement.scrollTop;e>this.lastScrollTop&&e>100?this.isNavbarHidden=!0:this.isNavbarHidden=!1,this.lastScrollTop=e<=0?0:e,document.querySelectorAll("section[id]").forEach(r=>{let s=r.getBoundingClientRect().top,o=r.getAttribute("id");s<=150&&s>=-150&&o&&(this.currentSection=o)})}ngAfterViewInit(){}static{this.\u0275fac=function(n){return new(n||i)(x(Uc),x(fe),x(tc),x(on))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-navigation"]],hostBindings:function(n,r){n&1&&$("scroll",function(){return r.onWindowScroll()},!1,Iu)},outputs:{isLogout:"isLogout"},decls:50,vars:55,consts:[[1,"navbar"],[1,"navbar__brand",3,"click"],["aria-label","Toggle menu",1,"navbar__toggle",3,"click"],[1,"material-icons"],[1,"navbar__menu"],[3,"click"],[1,"dropdown-container"],[1,"dropdown-btn",3,"click"],[1,"material-icons","dropdown-icon"],[1,"dropdown-menu"],[1,"navbar__status-logout"],["aria-label","Log out",1,"navbar__logout",3,"click"],[3,"message",4,"ngIf"],[1,"main-content"],[3,"message"]],template:function(n,r){n&1&&(f(0,"header",0)(1,"div",1),$("click",function(){return r.navigateToHome()}),y(2,"SHEIN TRADERS"),p(),f(3,"button",2),$("click",function(){return r.toggleMenu()}),f(4,"i",3),y(5),p()(),f(6,"nav",4)(7,"a",5),$("click",function(){return r.navigateToHome()}),y(8),O(9,"translate"),p(),f(10,"div",6)(11,"button",7),$("click",function(){return r.toggleClientsDropdown()}),y(12),O(13,"translate"),f(14,"i",8),y(15,"expand_more"),p()(),f(16,"div",9)(17,"a",5),$("click",function(){return r.navigateToClient()}),y(18),O(19,"translate"),p(),f(20,"a",5),$("click",function(){return r.navigateToList()}),y(21),O(22,"translate"),p()()(),f(23,"a",5),$("click",function(){return r.navigateToAnalytics()}),y(24),O(25,"translate"),p(),f(26,"a",5),$("click",function(){return r.navigateToAbout()}),y(27),O(28,"translate"),p(),f(29,"div",6)(30,"button",7),$("click",function(){return r.toggleDropdown()}),y(31),O(32,"translate"),f(33,"i",8),y(34,"expand_more"),p()(),f(35,"div",9)(36,"a",5),$("click",function(){return r.navigateToSettings()}),y(37),O(38,"translate"),p(),f(39,"a",5),$("click",function(){return r.navigateToHistory()}),y(40),O(41,"translate"),p()()(),f(42,"div",10),j(43,"app-version-alert"),f(44,"button",11),$("click",function(){return r.logout()}),f(45,"i",3),y(46,"logout"),p()()()()(),Y(47,uxe,1,1,"app-loader",12),f(48,"main",13),j(49,"router-outlet"),p()),n&2&&(le("hidden",r.isNavbarHidden),g(5),B(r.isNavbarOpen?"close":"menu"),g(),le("open",r.isNavbarOpen),g(),le("active",r.currentSection==="home"),g(),B(P(9,37,"NAV.HOME")),g(4),Q(" ",P(13,39,"NAV.CLIENTS")," "),g(2),le("rotated",r.isClientsDropdownOpen),g(2),le("open",r.isClientsDropdownOpen),g(),le("active",r.currentSection==="client"),g(),B(P(19,41,"NAV.CLIENTS")),g(2),le("active",r.currentSection==="clientsList"),g(),Q(" ",P(22,43,"clientsList")," "),g(2),le("active",r.currentSection==="analytics"),g(),B(P(25,45,"NAV.ANALYTICS")),g(2),le("active",r.currentSection==="about"),g(),B(P(28,47,"NAV.ABOUT")),g(4),Q(" ",P(32,49,"NAV.SETTINGS")," "),g(2),le("rotated",r.isDropdownOpen),g(2),le("open",r.isDropdownOpen),g(),le("active",r.currentSection==="settings"),g(),B(P(38,51,"NAV.SETTINGS")),g(2),le("active",r.currentSection==="history"),g(),B(P(41,53,"NAV.HISTORY")),g(7),z("ngIf",r.isLoading))},dependencies:[Rt,o0,gf,WC,Ai],styles:[".navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;background-color:#fff;padding:1rem 2rem;border-radius:0 0 12px 12px;box-shadow:0 2px 8px #00000014;position:sticky;top:0;z-index:1000;transition:transform .3s ease;width:90%;margin:0 auto;flex-wrap:wrap}.navbar.hidden[_ngcontent-%COMP%]{transform:translateY(-100%)}.navbar__brand[_ngcontent-%COMP%]{font-family:Montserrat,sans-serif;font-weight:700;font-size:2.4rem;color:#1f1f1f;text-transform:uppercase;letter-spacing:.1em;transition:color .3s ease;cursor:pointer}.navbar__brand[_ngcontent-%COMP%]:hover{color:#1a73e8}.navbar__toggle[_ngcontent-%COMP%]{display:none;background:transparent;border:none;color:#1f1f1f;font-size:1.8rem;cursor:pointer;transition:color .3s ease;margin-left:auto}.navbar__toggle[_ngcontent-%COMP%]:hover{color:#1a73e8}.navbar__menu[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;transition:max-height .3s ease;position:relative}.navbar__menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;text-decoration:none;color:#1f1f1f;font-size:1.2rem;font-weight:500;padding:.5rem .75rem;border-radius:12px;transition:background .3s ease,color .3s ease}.navbar__menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .navbar__menu[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#1a73e81a;color:#1a73e8;cursor:pointer}.navbar__menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:none!important}.navbar__menu.open[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;background:#fff;width:100%;padding:1rem 2rem;position:absolute;top:64px;left:0;border-radius:0 0 12px 12px;box-shadow:0 2px 8px #00000014;z-index:999}.navbar__logout[_ngcontent-%COMP%]{background:none;border:none;color:#1f1f1f;font-size:1.2rem;cursor:pointer;transition:color .3s ease}.navbar__logout[_ngcontent-%COMP%]:hover{color:#1a73e8}.navbar__status-logout[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1.5rem;justify-content:space-between}.dropdown-container[_ngcontent-%COMP%]{position:relative;display:inline-block}.dropdown-btn[_ngcontent-%COMP%]{background:none;border:none;color:#1f1f1f;font-size:1.2rem;font-weight:500;padding:.5rem .75rem;border-radius:12px;cursor:pointer;transition:background .3s ease,color .3s ease;display:flex;align-items:center;gap:.25rem}.dropdown-btn[_ngcontent-%COMP%]:hover{background-color:#1a73e80d;color:#1a73e8}.dropdown-btn[_ngcontent-%COMP%]   .dropdown-icon[_ngcontent-%COMP%]{font-size:1.2rem;transition:transform .3s ease}.dropdown-btn[_ngcontent-%COMP%]   .dropdown-icon.rotated[_ngcontent-%COMP%]{transform:rotate(180deg)}.dropdown-menu[_ngcontent-%COMP%]{display:flex;flex-direction:column;background-color:#fff;box-shadow:0 2px 8px #00000014;border-radius:12px;padding:.5rem 0;margin-top:.5rem;position:absolute;top:100%;right:0;z-index:1000;min-width:160px;max-height:0;overflow:hidden;opacity:0;transform:translateY(-10px);transition:max-height .3s ease,opacity .3s ease,transform .3s ease;pointer-events:none}.dropdown-menu.open[_ngcontent-%COMP%]{max-height:500px;opacity:1;transform:translateY(0);pointer-events:auto}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{padding:.5rem 1rem;font-size:1.1rem;text-decoration:none;color:#1f1f1f;transition:background .3s ease,color .3s ease}.dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, .dropdown-menu[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{background-color:#1a73e81a;color:#1a73e8}@media (max-width: 768px){.navbar[_ngcontent-%COMP%]{display:flex;justify-content:space-between!important;flex-direction:row;padding:15px}.navbar__toggle[_ngcontent-%COMP%]{display:block}.navbar__menu[_ngcontent-%COMP%]{display:none;width:100%}.navbar__menu.open[_ngcontent-%COMP%]{display:flex}.navbar__menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.05rem;padding:.75rem 1rem}.navbar[_ngcontent-%COMP%]   .dropdown-container[_ngcontent-%COMP%]{width:100%}.navbar[_ngcontent-%COMP%]   .dropdown-btn[_ngcontent-%COMP%]{width:100%;justify-content:space-between;font-size:1.05rem}.navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]{position:relative;width:100%;top:0;right:0;box-shadow:none;margin:.25rem 0;padding:.25rem 0;max-height:0;overflow:hidden;transition:max-height .3s ease}.navbar[_ngcontent-%COMP%]   .dropdown-menu.open[_ngcontent-%COMP%]{max-height:500px}.navbar[_ngcontent-%COMP%]   .dropdown-menu[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.05rem;padding:.65rem 1rem}}"]})}}return i})();var hxe=i=>({year:i}),_n=(()=>{class i{constructor(e,n,r){this.router=e,this.translate=n,this.firebaseService=r,this.currentLang="en",this.currentSection="home",this.currentYear=new Date().getFullYear(),this.isScrolled=!1,this.userCount=0,this.version=WC.appVersion;let s=localStorage.getItem("selectedLanguage")||"en";this.translate.setDefaultLang(s),this.translate.use(s),this.currentLang=s,this.setDirection(s),this.langChangeSub=this.translate.onLangChange.subscribe(o=>{this.currentLang=o.lang,this.setDirection(this.currentLang)}),this.routerEventsSub=this.router.events.subscribe(o=>{if(o instanceof s0){let a=o.urlAfterRedirects;a.startsWith("/aboutme")?this.currentSection="aboutme":a.startsWith("/settings")?this.currentSection="settings":this.currentSection="home"}})}ngOnInit(){this.loadUserCounts()}ngOnDestroy(){this.langChangeSub?.unsubscribe(),this.routerEventsSub?.unsubscribe()}loadUserCounts(){return N(this,null,function*(){try{this.userCount=yield this.firebaseService.getTotalUserCount()}catch(e){console.error("Error loading user count:",e)}})}onLanguageChange(e){let n=e.target.value;this.translate.use(n),localStorage.setItem("selectedLanguage",n),this.setDirection(n)}setDirection(e){document.body.dir=e==="ar"?"rtl":"ltr"}navigate(e){this.router.navigate([e])}onWindowScroll(){this.isScrolled=window.pageYOffset>10}static{this.\u0275fac=function(n){return new(n||i)(x(on),x(hu),x(tc))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-footer"]],hostBindings:function(n,r){n&1&&$("scroll",function(){return r.onWindowScroll()},!1,Iu)},decls:52,vars:37,consts:[["aria-label","Site footer"],[1,"container"],[1,"footer-top"],[1,"logo",3,"click"],["src","assets/img/logo.png","alt","Site Logo"],["aria-label","Footer navigation",1,"footer-nav"],[3,"click"],[1,"footer-controls"],["id","language-select","aria-live","polite","aria-label","Language Selector",3,"change","value"],["value","en"],["value","ar"],[1,"footer-bottom"],[1,"copyright"],[1,"user-count"],[1,"version"],["aria-label","Social media links",1,"social-links"],["href","https://twitter.com","target","_blank","rel","noopener","aria-label","Twitter"],["svgIcon","twitter"],["href","https://facebook.com","target","_blank","rel","noopener","aria-label","Facebook"],["svgIcon","facebook"],["href","https://instagram.com","target","_blank","rel","noopener","aria-label","Instagram"],["svgIcon","instagram"]],template:function(n,r){n&1&&(f(0,"footer",0)(1,"div",1)(2,"div",2)(3,"div",3),$("click",function(){return r.navigate("/")}),j(4,"img",4),f(5,"span"),y(6,"SHEIN TRADERS"),p()(),f(7,"nav",5)(8,"ul")(9,"li")(10,"a",6),$("click",function(){return r.navigate("/")}),y(11),O(12,"translate"),p()(),f(13,"li")(14,"a",6),$("click",function(){return r.navigate("/aboutme")}),y(15),O(16,"translate"),p()(),f(17,"li")(18,"a",6),$("click",function(){return r.navigate("/settings")}),y(19),O(20,"translate"),p()(),f(21,"li")(22,"a",6),$("click",function(){return r.navigate("/terms")}),y(23),O(24,"translate"),p()()()(),f(25,"div",7)(26,"select",8),$("change",function(o){return r.onLanguageChange(o)}),f(27,"option",9),y(28,"English"),p(),f(29,"option",10),y(30,"\u0627\u0644\u0639\u0631\u0628\u064A\u0629"),p()()()(),f(31,"div",11)(32,"p",12),y(33),O(34,"translate"),p(),f(35,"p",13)(36,"mat-icon"),y(37,"group"),p(),y(38),O(39,"translate"),p(),f(40,"p",14)(41,"mat-icon"),y(42,"info"),p(),y(43),O(44,"translate"),p(),f(45,"div",15)(46,"a",16),j(47,"mat-icon",17),p(),f(48,"a",18),j(49,"mat-icon",19),p(),f(50,"a",20),j(51,"mat-icon",21),p()()()()()),n&2&&(le("scrolled",r.isScrolled),g(9),le("active",r.currentSection==="home"),g(2),B(P(12,20,"FOOTER.HOME")),g(2),le("active",r.currentSection==="aboutme"),g(2),B(P(16,22,"FOOTER.ABOUT")),g(2),le("active",r.currentSection==="settings"),g(2),B(P(20,24,"FOOTER.SETTINGS")),g(2),le("active",r.currentSection==="terms"),g(2),B(P(24,26,"FOOTER.TERMS")),g(3),z("value",r.currentLang),g(7),Q(" ",Mn(34,28,"FOOTER.COPYRIGHT",za(35,hxe,r.currentYear))," "),g(5),Zs(" ",P(39,31,"FOOTER.USERS"),": ",r.userCount," "),g(5),Zs(" ",P(44,33,"FOOTER.VERSION"),": ",r.version," "))},dependencies:[P9,F9,Yi,Ai],styles:['footer[_ngcontent-%COMP%]{color:#202124;font-family:Google Sans,Roboto,Arial,sans-serif;box-shadow:0 -2px 12px #2021241a;padding:2.5rem 1rem;width:90%;margin:0 auto;border-radius:30px;background:#fff;-webkit-user-select:none;user-select:none}footer.scrolled[_ngcontent-%COMP%]{box-shadow:0 -4px 20px #0000001a}footer[_ngcontent-%COMP%]   .container[_ngcontent-%COMP%]{max-width:80%;margin:0 auto;display:flex;flex-direction:column;gap:2rem}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:2rem}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;transition:transform .3s ease}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{height:48px;margin-right:.8rem;filter:drop-shadow(0 1px 1px rgba(0,0,0,.05))}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:700;color:#202124;letter-spacing:1.2px;text-transform:uppercase}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]:hover{transform:scale(1.05)}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:2rem;list-style:none;padding:0;margin:0}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-weight:600;font-size:1rem;color:#5f6368;text-decoration:none;position:relative;padding:.2rem 0;transition:color .3s ease}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:after{content:"";position:absolute;left:0;bottom:-4px;height:3px;width:0%;background-color:#1a73e8;border-radius:4px;transition:width .3s ease}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover, footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]{color:#1a73e8}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover:after, footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]   a.active[_ngcontent-%COMP%]:after{width:100%}footer[_ngcontent-%COMP%]   .footer-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{padding:.3rem .6rem;border-radius:6px;border:1.5px solid #e0e0e0;font-weight:600;font-size:1rem;color:#202124;background:transparent;cursor:pointer;min-width:130px;transition:border-color .3s ease,box-shadow .3s ease}footer[_ngcontent-%COMP%]   .footer-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]:focus{outline:none;border-color:#1a73e8;box-shadow:0 0 6px #1a73e880}footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;border-top:1px solid #e0e0e0;padding-top:1.2rem;font-size:.9rem;color:#5f6368;flex-wrap:wrap;gap:1rem}footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0}footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{display:flex;gap:1rem}footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#5f6368;font-size:1.4rem;transition:color .3s ease}footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#1a73e8}@media (max-width: 768px){footer[_ngcontent-%COMP%]{padding:2rem 1rem}footer[_ngcontent-%COMP%]   .footer-top[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1.5rem}footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{gap:1rem}footer[_ngcontent-%COMP%]   .footer-controls[_ngcontent-%COMP%]{width:100%}footer[_ngcontent-%COMP%]   .footer-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{width:100%}footer[_ngcontent-%COMP%]   .footer-bottom[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}}@media (max-width: 480px){footer[_ngcontent-%COMP%]{padding:1.5rem .75rem}footer[_ngcontent-%COMP%]   .logo[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:1.2rem}footer[_ngcontent-%COMP%]   .footer-nav[_ngcontent-%COMP%]   ul[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}footer[_ngcontent-%COMP%]   .footer-controls[_ngcontent-%COMP%]   select[_ngcontent-%COMP%]{font-size:.95rem}footer[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{font-size:1.2rem}}.footer-bottom[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;justify-content:space-between;align-items:center;padding:1rem 2rem;color:#eee;font-family:Roboto,sans-serif;font-weight:500;font-size:.95rem}.footer-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{display:flex;align-items:center;margin:.3rem 1rem .3rem 0}.footer-bottom[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.3rem;margin-right:.5rem;color:#42a5f5}.footer-bottom[_ngcontent-%COMP%]   .online-users[_ngcontent-%COMP%]{font-weight:600;color:#82b1ff}.footer-bottom[_ngcontent-%COMP%]   .version[_ngcontent-%COMP%]{font-style:italic;color:#9e9e9e}.footer-bottom[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]{display:flex;gap:1rem}.footer-bottom[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#eee;transition:color .3s ease;display:flex;align-items:center}.footer-bottom[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:1.5rem}.footer-bottom[_ngcontent-%COMP%]   .social-links[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{color:#42a5f5;cursor:pointer}']})}}return i})();function mxe(i,t){i&1&&(f(0,"mat-option",45),y(1),O(2,"translate"),p()),i&2&&(g(),B(P(2,1,"table.cancelled")))}function fxe(i,t){if(i&1){let e=Me();f(0,"button",46),$("click",function(){ne(e);let r=W();return re(r.onCancel())}),y(1),O(2,"translate"),p()}i&2&&(g(),Q(" ",P(2,1,"form.cancel")," "))}function pxe(i,t){if(i&1){let e=Me();f(0,"button",46),$("click",function(){ne(e);let r=W();return re(r.onClear())}),y(1),O(2,"translate"),p()}i&2&&(g(),Q(" ",P(2,1,"form.clear")," "))}function gxe(i,t){if(i&1){let e=Me();f(0,"button",47),$("click",function(){ne(e);let r=W();return re(r.clearSearch())}),f(1,"mat-icon"),y(2,"close"),p()()}}function _xe(i,t){i&1&&(f(0,"th",48),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.client")," "))}function bxe(i,t){if(i&1&&(f(0,"td",49),y(1),p()),i&2){let e=t.$implicit;g(),B(e.client)}}function vxe(i,t){i&1&&(f(0,"th",48),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.quantity")," "))}function yxe(i,t){if(i&1&&(f(0,"td",49),y(1),p()),i&2){let e=t.$implicit;g(),B(e.quantity)}}function xxe(i,t){i&1&&(f(0,"th",48),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.cost")," "))}function wxe(i,t){if(i&1&&(f(0,"td",49),y(1),p()),i&2){let e=t.$implicit;g(),B(e.cost)}}function Cxe(i,t){i&1&&(f(0,"th",48),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.discount")," "))}function Sxe(i,t){if(i&1&&(f(0,"td",49),y(1),p()),i&2){let e=t.$implicit;g(),B(e.discount)}}function kxe(i,t){i&1&&(f(0,"th",48),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.delivery")," "))}function Exe(i,t){if(i&1&&(f(0,"td",49),y(1),p()),i&2){let e=t.$implicit;g(),B(e.delivery)}}function Txe(i,t){i&1&&(f(0,"th",48),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.shippingCost")," "))}function Ixe(i,t){if(i&1&&(f(0,"td",49),y(1),p()),i&2){let e=t.$implicit;g(),Q(" ",e.shippingCost," ")}}function Dxe(i,t){i&1&&(f(0,"th",48),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.tax")," "))}function Mxe(i,t){if(i&1&&(f(0,"td",49),y(1),p()),i&2){let e=t.$implicit;g(),B(e.tax)}}function Axe(i,t){i&1&&(f(0,"th",48),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.choice")," "))}function Oxe(i,t){if(i&1&&(f(0,"td",49),y(1),p()),i&2){let e=t.$implicit;g(),B(e.choice)}}function Pxe(i,t){i&1&&(f(0,"th",48),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"table.profit")," "))}function Rxe(i,t){if(i&1&&(f(0,"td",49),y(1),p()),i&2){let e=t.$implicit,n=W();g(),Q(" ",n.calculateProfit(e)," ")}}function Fxe(i,t){i&1&&(f(0,"th",48),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"table.actions")," "))}function Nxe(i,t){if(i&1){let e=Me();wt(0),f(1,"button",51),$("click",function(){ne(e);let r=W().index,s=W();return re(s.onEdit(s.pageIndex*s.pageSize+r))}),f(2,"mat-icon"),y(3,"edit"),p()(),f(4,"button",52),$("click",function(){ne(e);let r=W().index,s=W();return re(s.onClean(s.pageIndex*s.pageSize+r))}),f(5,"mat-icon"),y(6,"delete"),p()(),Ct()}}function Lxe(i,t){if(i&1&&(f(0,"td",49),Y(1,Nxe,7,0,"ng-container",50),p()),i&2){let e=t.$implicit,n=W();g(),z("ngIf",n.editingRowId!==e.id)}}function Bxe(i,t){i&1&&j(0,"tr",53)}function Vxe(i,t){if(i&1&&j(0,"tr",54),i&2){let e=t.$implicit,n=W();le("matched",n.searchTerm&&e.client.toLowerCase().includes(n.searchTerm.toLowerCase()))("editing-row",e.id===n.editingRowId)("canceled-row",e.choice==="Cancelled")("done-row",e.choice==="Done")}}var KC=(()=>{class i{constructor(e,n,r,s,o){this.fb=e,this.firestore=n,this.afAuth=r,this.dialog=s,this.historyService=o,this.onselect=[],this.pagedData=[],this.switch=!1,this.showCancelButton=!1,this.editId=null,this.userId="",this.filteredData=[],this.searchTerm="",this.pageIndex=0,this.pageSize=5,this.displayedColumns=["client","quantity","cost","discount","delivery","shippingCost","tax","choice","profit","actions"],this.editingRowId=null,this.isLoading=!0,this.oldClientName="",this.userForm=this.fb.group({client:["",Jt.required],cost:[0,Jt.required],delivery:[0,Jt.required],discount:[0,Jt.required],shippingCost:[0,Jt.required],quantity:[1,Jt.required],tax:[0,Jt.required],choice:["Pending",Jt.required],includeQuantityInProfit:[!1]})}ngOnInit(){this.afAuth.authState.subscribe(e=>{e?(this.userId=e.uid,this.loadData()):this.isLoading=!1})}loadData(){this.firestore.collection(`sheinTables/${this.userId}/records`).snapshotChanges().subscribe(e=>{this.onselect=e.map(n=>{let r=n.payload.doc.data();return ve({id:n.payload.doc.id},r)}),this.isLoading=!1,this.applyFilter()},e=>{console.error("Error loading data:",e),this.isLoading=!1})}applyFilter(){let e=this.searchTerm.trim().toLowerCase();if(e){let n=this.onselect.filter(s=>s.client.toLowerCase().includes(e)),r=this.onselect.filter(s=>!s.client.toLowerCase().includes(e));this.filteredData=[...n,...r]}else this.filteredData=[...this.onselect];this.pageIndex=0,this.updatePagedData()}updatePagedData(){let e=this.pageIndex*this.pageSize;this.pagedData=this.filteredData.slice(e,e+this.pageSize)}clearSearch(){this.searchTerm="",this.applyFilter()}nextPage(){this.pageIndex<this.maxPageIndex()&&(this.pageIndex++,this.updatePagedData())}previousPage(){this.pageIndex>0&&(this.pageIndex--,this.updatePagedData())}maxPageIndex(){return Math.floor((this.filteredData.length-1)/this.pageSize)}isMatch(e){let n=this.searchTerm.trim().toLowerCase();return n?e.toLowerCase().includes(n):!1}saveClientNameIfNotExists(e){if(!e||!this.userId)return;this.firestore.collection(`clients/${this.userId}/records`,r=>r.where("fullName","==",e)).get().subscribe(r=>{if(!r.empty){console.log("Client already exists, no need to add");return}this.firestore.collection(`clients/${this.userId}/records`).add({fullName:e,OtherPhoneNumber:"",address:"",address2:"",phoneNumber:"",location:"",orderId:""}).then(()=>{console.log("Client placeholder added")}).catch(s=>{console.error("Error adding client placeholder:",s)})})}onClick(){if(this.userForm.invalid||!this.userId)return;let e=this.userForm.value,n=this.firestore.collection(`sheinTables/${this.userId}/records`);if(this.switch&&this.editId)if(e.choice==="Cancelled")this.firestore.doc(`sheinTables/${this.userId}/records/${this.editId}`).get().subscribe(r=>{if(r.exists){let s=r.data()||{},o=Tt(ve({},s),{id:this.editId});this.historyService.saveToHistory(this.userId,Tt(ve({},o),{profit:this.calculateProfit(o),cancelled:!0,choice:"Cancelled",deletedAt:new Date}),"sheinTable").then(()=>{n.doc(this.editId).delete().then(()=>{this.checkAndDeleteClient(this.oldClientName),this.resetForm()}).catch(console.error)}).catch(a=>{console.error("Failed to save to history before deleting:",a)})}},r=>{console.error("Error fetching document before cancel:",r)});else{let r=e.client.trim();r!==this.oldClientName&&(this.saveClientNameIfNotExists(r),this.firestore.collection(`sheinTables/${this.userId}/records`,s=>s.where("client","==",this.oldClientName)).get().subscribe(s=>{s.empty&&this.deleteClientByName(this.oldClientName)})),n.doc(this.editId).update(e).then(()=>{this.resetForm()}).catch(console.error)}else{let r=e.client.trim();this.saveClientNameIfNotExists(r),n.add(e).then(()=>{this.resetForm()}).catch(console.error)}}deleteClientByName(e){this.firestore.collection(`clients/${this.userId}/records`,n=>n.where("fullName","==",e)).get().subscribe(n=>{if(!n.empty){let r=n.docs[0].id;this.firestore.doc(`clients/${this.userId}/records/${r}`).delete().then(()=>{console.log(`Client ${e} deleted as orphan`)}).catch(s=>{console.error("Error deleting client:",s)})}})}onEdit(e){let n=this.onselect[e];n&&(this.userForm.patchValue(n),this.switch=!0,this.editId=n.id,this.editingRowId=n.id,this.showCancelButton=!0,this.oldClientName=n.client)}onCancel(){this.resetForm()}onClear(){this.resetForm()}onClean(e){return N(this,null,function*(){let n=this.onselect[e];if(!n)return;if((yield this.dialog.open($s,{width:"300px",data:{message:`Are you sure you want to delete the order for "${n.client}"?`}}).afterClosed().toPromise())===!0&&this.userId)try{yield this.historyService.saveToHistory(this.userId,{client:n.client,quantity:n.quantity,cost:n.cost,discount:n.discount,delivery:n.delivery,shippingCost:n.shippingCost,tax:n.tax,choice:n.choice,profit:this.calculateProfit(n),id:n.id},"sheinTable"),yield this.firestore.doc(`sheinTables/${this.userId}/records/${n.id}`).delete(),console.log("Deleted successfully"),this.checkAndDeleteClient(n.client)}catch(o){console.error("Error deleting item or saving history:",o)}})}checkAndDeleteClient(e){this.firestore.collection(`sheinTables/${this.userId}/records`,n=>n.where("client","==",e)).get().subscribe(n=>{n.empty&&this.firestore.collection(`clients/${this.userId}/records`,r=>r.where("fullName","==",e)).get().subscribe(r=>{if(!r.empty){let s=r.docs[0].id;this.firestore.doc(`clients/${this.userId}/records/${s}`).delete().then(()=>{console.log("Client deleted")}).catch(o=>{console.error("Client delete error:",o)})}})})}onQuantityProfitChange(){}calculateProfit(e){let s=e.cost*e.discount/100-(e.shippingCost||0)-(e.tax||0),o=e.includeQuantityInProfit&&e.quantity||0;return+(s+o).toFixed(2)}calculateOverallTotal(){return this.onselect.reduce((e,n)=>e+(n.cost+n.tax+n.shippingCost),0)}calculateOverallProfit(){return this.onselect.reduce((e,n)=>e+this.calculateProfit(n),0)}resetForm(){this.userForm.reset({client:"",cost:0,delivery:0,discount:0,shippingCost:0,quantity:1,tax:0,choice:"Pending",includeQuantityInProfit:!1}),this.switch=!1,this.editId=null,this.editingRowId=null,this.showCancelButton=!1}static{this.\u0275fac=function(n){return new(n||i)(x(mC),x(tn),x(Yt),x(_s),x(U7))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-sheintable"]],decls:155,vars:72,consts:[[1,"card-container"],[1,"form-card","mat-elevation-z4"],[3,"ngSubmit","formGroup"],[1,"form-grid"],["appearance","fill"],["matPrefix",""],["matInput","","formControlName","client","required",""],["matInput","","type","number","formControlName","cost","required",""],["matInput","","type","number","formControlName","delivery","required",""],["matInput","","type","number","formControlName","discount","required",""],["matInput","","type","number","formControlName","shippingCost","required",""],["matInput","","type","number","formControlName","quantity","required",""],["matInput","","type","number","formControlName","tax","required",""],["formControlName","choice","required",""],["value","Pending"],["value","Done"],["value","Cancelled",4,"ngIf"],[1,"slide-toggle-wrapper"],["formControlName","includeQuantityInProfit",3,"change"],[1,"explanation-text"],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit"],["mat-stroked-button","","type","button",3,"click",4,"ngIf"],["appearance","outline",1,"search-bar"],["matInput","","type","text",3,"ngModelChange","input","ngModel","placeholder"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"table-card","mat-elevation-z4"],["mat-table","",1,"mat-elevation-z2","full-width-table",3,"dataSource"],["matColumnDef","client"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","quantity"],["matColumnDef","cost"],["matColumnDef","discount"],["matColumnDef","delivery"],["matColumnDef","shippingCost"],["matColumnDef","tax"],["matColumnDef","choice"],["matColumnDef","profit"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"matched","editing-row","canceled-row","done-row",4,"matRowDef","matRowDefColumns"],[1,"summary-footer"],[1,"pagination-buttons"],["mat-icon-button","","color","primary",3,"click","disabled"],["value","Cancelled"],["mat-stroked-button","","type","button",3,"click"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-header-cell",""],["mat-cell",""],[4,"ngIf"],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,r){n&1&&(j(0,"app-navigation"),f(1,"section")(2,"div",0)(3,"mat-card",1)(4,"mat-card-title"),y(5),O(6,"translate"),p(),f(7,"mat-card-content")(8,"form",2),$("ngSubmit",function(){return r.onClick()}),f(9,"div",3)(10,"mat-form-field",4)(11,"mat-icon",5),y(12,"person"),p(),f(13,"mat-label"),y(14),O(15,"translate"),p(),j(16,"input",6),p(),f(17,"mat-form-field",4)(18,"mat-icon",5),y(19,"attach_money"),p(),f(20,"mat-label"),y(21),O(22,"translate"),p(),j(23,"input",7),p(),f(24,"mat-form-field",4)(25,"mat-icon",5),y(26,"local_shipping"),p(),f(27,"mat-label"),y(28),O(29,"translate"),p(),j(30,"input",8),p(),f(31,"mat-form-field",4)(32,"mat-icon",5),y(33,"percent"),p(),f(34,"mat-label"),y(35),O(36,"translate"),p(),j(37,"input",9),p(),f(38,"mat-form-field",4)(39,"mat-icon",5),y(40,"flight"),p(),f(41,"mat-label"),y(42),O(43,"translate"),p(),j(44,"input",10),p(),f(45,"mat-form-field",4)(46,"mat-icon",5),y(47,"grid_on"),p(),f(48,"mat-label"),y(49),O(50,"translate"),p(),j(51,"input",11),p(),f(52,"mat-form-field",4)(53,"mat-icon",5),y(54,"receipt_long"),p(),f(55,"mat-label"),y(56),O(57,"translate"),p(),j(58,"input",12),p(),f(59,"mat-form-field",4)(60,"mat-icon",5),y(61,"check_circle"),p(),f(62,"mat-label"),y(63),O(64,"translate"),p(),f(65,"mat-select",13)(66,"mat-option",14),y(67),O(68,"translate"),p(),f(69,"mat-option",15),y(70),O(71,"translate"),p(),Y(72,mxe,3,3,"mat-option",16),p()(),f(73,"div",17)(74,"mat-slide-toggle",18),$("change",function(){return r.onQuantityProfitChange()}),y(75),O(76,"translate"),p(),f(77,"p",19),y(78),O(79,"translate"),p()()(),f(80,"div",20)(81,"button",21),y(82),O(83,"translate"),O(84,"translate"),p(),Y(85,fxe,3,3,"button",22)(86,pxe,3,3,"button",22),p()()()(),j(87,"br")(88,"br"),f(89,"mat-form-field",23)(90,"mat-label"),y(91),O(92,"translate"),p(),f(93,"mat-icon",5),y(94,"search"),p(),f(95,"input",24),O(96,"translate"),Bt("ngModelChange",function(o){return Lt(r.searchTerm,o)||(r.searchTerm=o),o}),$("input",function(){return r.applyFilter()}),p(),Y(97,gxe,3,0,"button",25),p(),f(98,"mat-card",26)(99,"mat-card-title"),y(100),O(101,"translate"),p(),f(102,"mat-card-content")(103,"table",27),wt(104,28),Y(105,_xe,3,3,"th",29)(106,bxe,2,1,"td",30),Ct(),wt(107,31),Y(108,vxe,3,3,"th",29)(109,yxe,2,1,"td",30),Ct(),wt(110,32),Y(111,xxe,3,3,"th",29)(112,wxe,2,1,"td",30),Ct(),wt(113,33),Y(114,Cxe,3,3,"th",29)(115,Sxe,2,1,"td",30),Ct(),wt(116,34),Y(117,kxe,3,3,"th",29)(118,Exe,2,1,"td",30),Ct(),wt(119,35),Y(120,Txe,3,3,"th",29)(121,Ixe,2,1,"td",30),Ct(),wt(122,36),Y(123,Dxe,3,3,"th",29)(124,Mxe,2,1,"td",30),Ct(),wt(125,37),Y(126,Axe,3,3,"th",29)(127,Oxe,2,1,"td",30),Ct(),wt(128,38),Y(129,Pxe,3,3,"th",29)(130,Rxe,2,1,"td",30),Ct(),wt(131,39),Y(132,Fxe,3,3,"th",29)(133,Lxe,2,1,"td",30),Ct(),Y(134,Bxe,1,0,"tr",40)(135,Vxe,1,8,"tr",41),p(),f(136,"div",42)(137,"p")(138,"strong"),y(139),O(140,"translate"),p(),y(141),p(),f(142,"div",43)(143,"button",44),$("click",function(){return r.previousPage()}),f(144,"mat-icon"),y(145,"chevron_left"),p()(),f(146,"button",44),$("click",function(){return r.nextPage()}),f(147,"mat-icon"),y(148,"chevron_right"),p()()(),f(149,"p")(150,"strong"),y(151),O(152,"translate"),p(),y(153),p()()()()()(),j(154,"app-footer")),n&2&&(g(5),B(P(6,32,"form.title")),g(3),z("formGroup",r.userForm),g(6),B(P(15,34,"form.client")),g(7),B(P(22,36,"form.cost")),g(7),B(P(29,38,"form.delivery")),g(7),B(P(36,40,"form.discount")),g(7),B(P(43,42,"form.shippingCost")),g(7),B(P(50,44,"form.quantity")),g(7),B(P(57,46,"form.tax")),g(7),B(P(64,48,"form.choice")),g(4),B(P(68,50,"table.pending")),g(3),B(P(71,52,"table.done")),g(2),z("ngIf",r.switch),g(3),Q(" ",P(76,54,"form.includeProfit")," "),g(3),Q(" ",P(79,56,"form2.includeProfitExplanation")," "),g(4),Q(" ",r.switch?P(83,58,"form.update"):P(84,60,"form.add")," "),g(3),z("ngIf",r.showCancelButton),g(),z("ngIf",!r.switch),g(5),B(P(92,62,"form.search")),g(4),Nt("ngModel",r.searchTerm),z("placeholder",P(96,64,"form.searchPlaceholder")),g(2),z("ngIf",r.searchTerm),g(3),B(P(101,66,"table.title")),g(3),z("dataSource",r.pagedData),g(31),z("matHeaderRowDef",r.displayedColumns),g(),z("matRowDefColumns",r.displayedColumns),g(4),Q("",P(140,68,"table.revenue"),":"),g(2),Q(" ",r.calculateOverallTotal()," "),g(2),z("disabled",r.pageIndex===0),g(3),z("disabled",r.pageIndex>=r.maxPageIndex()),g(5),Q("",P(152,70,"table.profit"),":"),g(2),Q(" ",r.calculateOverallProfit()," "))},dependencies:[Rt,rc,ms,kR,fr,nc,eu,Ca,V_,tr,ir,Hr,Yi,_c,pc,jo,Jm,fc,oW,xC,nf,sf,cf,of,rf,df,af,lf,uf,hf,bs,ff,mf,HC,gn,_n,Ai],styles:[".card-container[_ngcontent-%COMP%]{width:90%;max-width:1200px;margin:0 auto;padding:2rem 1rem;min-height:100vh;display:flex;flex-direction:column;gap:2rem}mat-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:14px;padding:2rem;box-shadow:0 8px 16px #1a73e81a;transition:all .3s ease}mat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 24px #1a73e833}mat-form-field[_ngcontent-%COMP%]   input.mat-input-element[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem 3rem .5rem 1rem}mat-card-title[_ngcontent-%COMP%]{font-size:1.8rem;font-weight:600;margin-bottom:1rem;color:#1a73e8;border-bottom:2px solid #d3e4fb;padding-bottom:.5rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem}mat-form-field[_ngcontent-%COMP%]{width:100%;background:#f0f4f8;border-radius:8px;padding:.25rem .5rem;font-size:1.2rem}mat-form-field[_ngcontent-%COMP%]   .mat-form-field-wrapper[_ngcontent-%COMP%]{padding:0 .5rem}mat-form-field[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{color:#1a73e8}.slide-toggle-wrapper[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:flex-start;gap:.5rem;padding:1rem;border:1px solid #d3e4fb;border-radius:10px;background-color:#f7f9fb;box-shadow:0 2px 6px #1a73e80d}.slide-toggle-wrapper[_ngcontent-%COMP%]   mat-slide-toggle[_ngcontent-%COMP%]{color:#174ea6!important}.slide-toggle-wrapper[_ngcontent-%COMP%]   .explanation-text[_ngcontent-%COMP%]{text-align:center;max-width:500px;font-size:.95rem;color:#525252;font-weight:400}.form-actions[_ngcontent-%COMP%]{display:flex;justify-content:flex-end;gap:1rem;margin-top:2rem;flex-wrap:wrap}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{text-transform:capitalize;font-weight:600;padding:.5rem 1.5rem;border-radius:8px;cursor:pointer;transition:all .3s ease}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{filter:brightness(.9)}mat-raised-button[_ngcontent-%COMP%]{background-color:#1a73e8;color:#fff}mat-raised-button[_ngcontent-%COMP%]:hover{background-color:#135cbc}mat-stroked-button[_ngcontent-%COMP%]{color:#1a73e8;border-color:#1a73e8}mat-stroked-button[_ngcontent-%COMP%]:hover{background-color:#d3e4fb}mat-icon-button[color=warn][_ngcontent-%COMP%]{color:#d93025}mat-icon-button[color=warn][_ngcontent-%COMP%]:hover{color:#ad261e}mat-icon-button[color=accent][_ngcontent-%COMP%]{color:#4285f4}mat-icon-button[color=accent][_ngcontent-%COMP%]:hover{color:#1266f1}.search-bar[_ngcontent-%COMP%]{width:95%;margin:0 auto 1rem}.search-bar[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;background:transparent;border-radius:50px;box-shadow:none}.search-bar[_ngcontent-%COMP%]   mat-form-field.mat-form-field-appearance-outline[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{border-color:#dadce0;border-radius:50px;border-width:1px}.search-bar[_ngcontent-%COMP%]   mat-form-field.mat-form-field-appearance-outline[_ngcontent-%COMP%]:hover   .mat-form-field-outline[_ngcontent-%COMP%]{border-color:#c4c4c4}.search-bar[_ngcontent-%COMP%]   mat-form-field.mat-form-field-appearance-outline.mat-focused[_ngcontent-%COMP%]   .mat-form-field-outline[_ngcontent-%COMP%]{border-color:#1a73e8;border-width:2px}.search-bar[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   .mat-form-field-label[_ngcontent-%COMP%]{color:#5f6368;font-weight:500;font-size:1rem;padding-left:.25rem}.search-bar[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input.mat-input-element[_ngcontent-%COMP%]{padding:.75rem 3rem .75rem 1rem;font-size:1rem;border-radius:50px;color:#202124;background:#fff;box-shadow:0 1px 3px #3c40431a}.search-bar[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   input.mat-input-element[_ngcontent-%COMP%]::placeholder{color:#9e9e9e;font-style:italic;opacity:1}.search-bar[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   button.mat-icon-button[_ngcontent-%COMP%]{color:#5f6368;position:absolute;right:.5rem;top:.5rem}.search-bar[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   button.mat-icon-button[_ngcontent-%COMP%]:hover{color:#1a73e8}.search-bar[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]   button.mat-icon-button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:23px}mat-form-field[_ngcontent-%COMP%]{font-size:1.5rem!important}mat-form-field[_ngcontent-%COMP%]   .mat-label[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]   .mat-select-value-text[_ngcontent-%COMP%], mat-form-field[_ngcontent-%COMP%]   .mat-option-text[_ngcontent-%COMP%]{font-size:1rem!important}.full-width-table[_ngcontent-%COMP%]{width:100%;border-spacing:0;border-collapse:collapse;background:#fff;border-radius:14px;overflow-x:auto;display:block}.full-width-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .full-width-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #e0e0e0;min-width:120px}.full-width-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background:#e8f0fe;color:#174ea6;font-weight:600}.full-width-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#1f1f1f}.full-width-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f4faff}tr.matched[_ngcontent-%COMP%], td.matched[_ngcontent-%COMP%]{background-color:#d4edda!important;color:#155724!important}tr.matched[_ngcontent-%COMP%]:hover, td.matched[_ngcontent-%COMP%]:hover{background-color:#c3e6cb!important}.editing-row[_ngcontent-%COMP%]{background-color:#fff59d!important}.canceled-row[_ngcontent-%COMP%]{background-color:#ffebee;color:#b71c1c;font-weight:500}.done-row[_ngcontent-%COMP%]{background-color:#b3f0b8}.done-row[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .done-row[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{color:#6a6d6a66!important}.summary-footer[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-top:2rem;flex-wrap:wrap;gap:1rem}.summary-footer[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:500;color:#174ea6;margin:0}.summary-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#1266f1;color:#fff}.summary-footer[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover{background-color:#0b51c5}.pagination-buttons[_ngcontent-%COMP%]{display:flex;gap:1rem;justify-content:center;margin-top:1.5rem}.pagination-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff;border:none;padding:.5rem 1.2rem;border-radius:6px;font-weight:600;cursor:pointer;transition:all .3s ease}.pagination-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#fff;cursor:not-allowed;opacity:.6}.pagination-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#1266f1}@media (max-width: 768px){.form-actions[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.summary-footer[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start}.pagination-buttons[_ngcontent-%COMP%]{justify-content:space-between}.full-width-table[_ngcontent-%COMP%]{display:block;overflow-x:auto}}@media (max-width: 480px){mat-card[_ngcontent-%COMP%]{padding:1rem}mat-card-title[_ngcontent-%COMP%]{font-size:1.2rem}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr!important}.form-actions[_ngcontent-%COMP%]{flex-direction:column}.form-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})}}return i})();function jxe(i,t){if(i&1){let e=Me();f(0,"div",1)(1,"div",2),bt(),f(2,"svg",3),j(3,"path",4),p()(),li(),f(4,"div",5),y(5),p(),f(6,"div",6),$("click",function(){ne(e);let r=W();return re(r.close())}),bt(),f(7,"svg",7),j(8,"path",8),p()()()}if(i&2){let e=W();g(5),B(e.message)}}var MW=(()=>{class i{constructor(){this.message="",this.visible=!0}close(){this.visible=!1}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=ae({type:i,selectors:[["app-successful-alert"]],inputs:{message:"message"},decls:1,vars:1,consts:[["class","info success",4,"ngIf"],[1,"info","success"],[1,"info__icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["fill","#393a37","d","M12 1.5c-5.79844 0-10.5 4.70156-10.5 10.5 0 5.7984 4.70156 10.5 10.5 10.5 5.7984 0 10.5-4.7016 10.5-10.5 0-5.79844-4.7016-10.5-10.5-10.5zM12.75 17.0625c0 .1031-.0844.1875-.1875.1875h-1.125c-.1031 0-.1875-.0844-.1875-.1875v-6.375c0-.1031.0844-.1875.1875-.1875h1.125c.1031 0 .1875.0844.1875.1875zm-.75-8.0625c-.2944-.006-.5747-.12718-.7808-.3375-.206-.21032-.3215-.49305-.3215-.7875s.1155-.57718.3215-.7875c.2061-.21032.4864-.33149.7808-.3375.2944.006.5747.12718.7808.3375.206.21032.3215.49305.3215.7875s-.1155.57718-.3215.7875c-.2061.21032-.4864.33149-.7808.3375z"],[1,"info__title"],[1,"info__close",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 20 20","fill","none"],["fill","#393a37","d","M15.8333 5.34166l-1.175-1.175-4.6583 4.65834-4.65833-4.65834-1.175 1.175 4.65833 4.65834-4.65833 4.6583 1.175 1.175 4.65833-4.6583 4.6583 4.6583 1.175-1.175-4.6583-4.6583z"]],template:function(n,r){n&1&&Y(0,jxe,9,1,"div",0),n&2&&z("ngIf",r.visible)},dependencies:[Rt],styles:[".info[_ngcontent-%COMP%]{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;width:320px;padding:12px;display:flex;flex-direction:row;align-items:center;justify-content:start;background:#509af8;border-radius:8px;box-shadow:0 0 5px -3px #111}.info__icon[_ngcontent-%COMP%]{width:20px;height:20px;transform:translateY(-2px);margin-right:8px}.info__icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.info__title[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#fff}.info__close[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;margin-left:auto}.info__close[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}"]})}}return i})();function Hxe(i,t){if(i&1){let e=Me();f(0,"div",1)(1,"div",2),bt(),f(2,"svg",3),j(3,"path",4),p()(),li(),f(4,"div",5),y(5),p(),f(6,"div",6),$("click",function(){ne(e);let r=W();return re(r.close())}),bt(),f(7,"svg",7),j(8,"path",8),p()()()}if(i&2){let e=W();g(5),B(e.message)}}var AW=(()=>{class i{constructor(){this.message="",this.visible=!0}close(){this.visible=!1}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=ae({type:i,selectors:[["app-error-alert"]],inputs:{message:"message"},decls:1,vars:1,consts:[["class","info success",4,"ngIf"],[1,"info","success"],[1,"info__icon"],["xmlns","http://www.w3.org/2000/svg","width","24","height","24","viewBox","0 0 24 24","fill","none"],["fill","#393a37","d","M12 1.5c-5.79844 0-10.5 4.70156-10.5 10.5 0 5.7984 4.70156 10.5 10.5 10.5 5.7984 0 10.5-4.7016 10.5-10.5 0-5.79844-4.7016-10.5-10.5-10.5zM12.75 17.0625c0 .1031-.0844.1875-.1875.1875h-1.125c-.1031 0-.1875-.0844-.1875-.1875v-6.375c0-.1031.0844-.1875.1875-.1875h1.125c.1031 0 .1875.0844.1875.1875zm-.75-8.0625c-.2944-.006-.5747-.12718-.7808-.3375-.206-.21032-.3215-.49305-.3215-.7875s.1155-.57718.3215-.7875c.2061-.21032.4864-.33149.7808-.3375.2944.006.5747.12718.7808.3375.206.21032.3215.49305.3215.7875s-.1155.57718-.3215.7875c-.2061.21032-.4864.33149-.7808.3375z"],[1,"info__title"],[1,"info__close",3,"click"],["xmlns","http://www.w3.org/2000/svg","width","20","height","20","viewBox","0 0 20 20","fill","none"],["fill","#393a37","d","M15.8333 5.34166l-1.175-1.175-4.6583 4.65834-4.65833-4.65834-1.175 1.175 4.65833 4.65834-4.65833 4.6583 1.175 1.175 4.65833-4.6583 4.6583 4.6583 1.175-1.175-4.6583-4.6583z"]],template:function(n,r){n&1&&Y(0,Hxe,9,1,"div",0),n&2&&z("ngIf",r.visible)},dependencies:[Rt],styles:[".info[_ngcontent-%COMP%]{font-family:system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen,Ubuntu,Cantarell,Open Sans,Helvetica Neue,sans-serif;width:320px;padding:12px;display:flex;flex-direction:row;align-items:center;justify-content:start;background:#e40606;border-radius:8px;box-shadow:0 0 5px -3px #111}.info__icon[_ngcontent-%COMP%]{width:20px;height:20px;transform:translateY(-2px);margin-right:8px}.info__icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}.info__title[_ngcontent-%COMP%]{font-weight:500;font-size:14px;color:#fff}.info__close[_ngcontent-%COMP%]{width:20px;height:20px;cursor:pointer;margin-left:auto}.info__close[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:#fff}"]})}}return i})();function Wxe(i,t){if(i&1){let e=Me();f(0,"div",28)(1,"div",29)(2,"label",30),y(3,"Full Name"),p(),f(4,"input",31),Bt("ngModelChange",function(r){ne(e);let s=W(2);return Lt(s.fullName,r)||(s.fullName=r),re(r)}),p()(),f(5,"div",29)(6,"label",32),y(7,"Date of Birth"),p(),f(8,"input",33),Bt("ngModelChange",function(r){ne(e);let s=W(2);return Lt(s.birthDate,r)||(s.birthDate=r),re(r)}),p()()()}if(i&2){let e=W(2);g(4),Nt("ngModel",e.fullName),g(4),Nt("ngModel",e.birthDate)}}function Gxe(i,t){if(i&1){let e=Me();f(0,"div",14)(1,"label",34),y(2,"Confirm Password"),p(),f(3,"input",35),Bt("ngModelChange",function(r){ne(e);let s=W(2);return Lt(s.confirmPassword,r)||(s.confirmPassword=r),re(r)}),p()()}if(i&2){let e=W(2);g(3),z("type",e.passwordVisible?"text":"password"),Nt("ngModel",e.confirmPassword)}}function $xe(i,t){if(i&1){let e=Me();f(0,"a",41),$("click",function(){ne(e);let r=W(3);return re(r.onForgotPassword(r.email))}),y(1,"Forgot Password?"),p()}}function Kxe(i,t){if(i&1&&(f(0,"div",36)(1,"label",37),j(2,"input",38)(3,"span",39),y(4," Remember Me "),p(),Y(5,$xe,2,0,"a",40),p()),i&2){let e=W(2);g(5),z("ngIf",e.showForgotPasswordLink)}}function Yxe(i,t){i&1&&j(0,"div",42)}function Qxe(i,t){if(i&1){let e=Me();f(0,"div",6),j(1,"div",7),f(2,"div",8)(3,"div",9),j(4,"img",10),f(5,"h3"),y(6),p(),f(7,"p",11),y(8),p(),f(9,"form",12,0),$("ngSubmit",function(){ne(e);let r=W();return re(r.isSignup?r.onSignup(r.email,r.password,r.confirmPassword):r.onSignin(r.email,r.password))}),Y(11,Wxe,9,2,"div",13),f(12,"div",14)(13,"label",15),y(14,"Email"),p(),f(15,"input",16),Bt("ngModelChange",function(r){ne(e);let s=W();return Lt(s.email,r)||(s.email=r),re(r)}),p()(),f(16,"div",17)(17,"label",18),y(18,"Password"),p(),f(19,"div",19)(20,"input",20),Bt("ngModelChange",function(r){ne(e);let s=W();return Lt(s.password,r)||(s.password=r),re(r)}),p(),f(21,"button",21),$("click",function(){ne(e);let r=W();return re(r.togglePasswordVisibility())}),f(22,"mat-icon"),y(23),p()()()(),Y(24,Gxe,4,2,"div",22)(25,Kxe,6,1,"div",23),f(26,"button",24),y(27),p(),f(28,"p",25),y(29),f(30,"a",26),$("click",function(){ne(e);let r=W();return re(r.toggleSignup())}),y(31),p()()(),Y(32,Yxe,1,0,"div",27),p()()()}if(i&2){let e=W();g(6),B(e.isSignup?"Create an Account":"Welcome Back"),g(2),Q(" ",e.isSignup?"Sign up to get started":"Login to continue"," "),g(3),z("ngIf",e.isSignup),g(4),Nt("ngModel",e.email),g(5),z("type",e.passwordVisible?"text":"password"),Nt("ngModel",e.password),g(3),B(e.passwordVisible?"visibility_off":"visibility"),g(),z("ngIf",e.isSignup),g(),z("ngIf",!e.isSignup),g(),z("disabled",e.isLoading),g(),Q(" ",e.isSignup?"Sign up":"Login"," "),g(2),Q(" ",e.isSignup?"Already have an account?":"Not Registered Yet?"," "),g(2),B(e.isSignup?"Login":"Create an account"),g(),z("ngIf",e.isLoading)}}function Xxe(i,t){i&1&&j(0,"app-loader",43),i&2&&z("message","WELCOME")}function Zxe(i,t){i&1&&j(0,"div",44)}function Jxe(i,t){if(i&1&&j(0,"app-successful-alert",43),i&2){let e=W(2);z("message",e.successMessage)}}function ewe(i,t){if(i&1&&j(0,"app-error-alert",43),i&2){let e=W(2);z("message",e.errorMessage)}}function twe(i,t){if(i&1&&(f(0,"div",45),Y(1,Jxe,1,1,"app-successful-alert",2)(2,ewe,1,1,"app-error-alert",2),p()),i&2){let e=W();g(),z("ngIf",e.showSuccess),g(),z("ngIf",e.showError)}}function iwe(i,t){if(i&1){let e=Me();f(0,"app-sheintable",46),$("isLogout",function(){ne(e);let r=W();return re(r.handleLogout())}),p()}}var OW=(()=>{class i{constructor(e,n,r){this.firebaseServices=e,this.auth=n,this.router=r,this.isSignedIn=!1,this.isSignup=!1,this.isLoading=!1,this.passwordVisible=!1,this.showForgotPasswordLink=!0,this.showSuccess=!1,this.showError=!1,this.successMessage="",this.errorMessage="",this.email="",this.password="",this.confirmPassword="",this.fullName="",this.birthDate="",this.passwordResetIntervalId=null}ngOnInit(){this.auth.authState.subscribe(e=>{this.isSignedIn=!!e,this.isSignedIn&&this.router.navigate(["/sheintable"])})}onSignup(e,n,r){return N(this,null,function*(){if(this.resetAlerts(),!this.isValidEmail(e))return this.showErrorAlert("Please enter a valid email address.");if(n!==r)return this.showErrorAlert("Passwords do not match.");if(!this.fullName||!this.birthDate)return this.showErrorAlert("Please fill in all the fields.");try{this.isLoading=!0,yield this.firebaseServices.signup(e,n,this.fullName,this.birthDate),this.isLoading=!1,this.firebaseServices.isLoggedIn?(this.isSignedIn=!0,this.router.navigate(["/sheintable"]),this.showSuccessAlert("Account created successfully!")):this.showErrorAlert("Signup failed. Please try again.")}catch(s){this.isLoading=!1,s.code==="auth/email-already-in-use"?this.showErrorAlert("Email address is already in use."):this.showErrorAlert("Error during signup.")}})}onSignin(e,n){return N(this,null,function*(){if(this.resetAlerts(),!this.isValidEmail(e))return this.showErrorAlert("Please enter a valid email address.");try{this.isLoading=!0,yield this.firebaseServices.signin(e,n),this.isSignedIn=this.firebaseServices.isLoggedIn,this.isLoading=!1,this.isSignedIn?this.router.navigate(["/sheintable"]):this.showErrorAlert("Login failed. Please try again.")}catch{this.isLoading=!1,this.showErrorAlert("Please check your email or password.")}})}onForgotPassword(e){if(this.resetAlerts(),!e)return this.showErrorAlert("Please enter your email address first.");let n=+localStorage.getItem("passwordResetLastRequestTime"),r=Date.now();n&&r-n<6e4?this.startCountdown(n):this.auth.sendPasswordResetEmail(e).then(()=>{localStorage.setItem("passwordResetLastRequestTime",r.toString()),this.showSuccessAlert("Password reset email sent successfully"),this.startCountdown(r)}).catch(s=>{this.showErrorAlert(`Error sending reset email: ${s.message}`)})}startCountdown(e){this.passwordResetIntervalId&&clearInterval(this.passwordResetIntervalId),this.passwordResetIntervalId=setInterval(()=>{let n=Date.now(),r=Math.ceil((6e4-(n-e))/1e3);r>0?this.showErrorAlert(`Please wait ${r} seconds before retrying.`):(clearInterval(this.passwordResetIntervalId),this.passwordResetIntervalId=null,this.resetAlerts(),localStorage.removeItem("passwordResetLastRequestTime"))},1e3)}toggleSignup(){this.isSignup=!this.isSignup,this.resetAlerts(),this.passwordVisible=!1}togglePasswordVisibility(){this.passwordVisible=!this.passwordVisible}handleLogout(){this.firebaseServices.logout(),this.isSignedIn=!1}isValidEmail(e){return/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}showSuccessAlert(e){this.successMessage=e,this.showSuccess=!0,setTimeout(()=>this.showSuccess=!1,3e3)}showErrorAlert(e){this.errorMessage=e,this.showError=!0,setTimeout(()=>this.showError=!1,3e3)}resetAlerts(){this.successMessage="",this.errorMessage="",this.showSuccess=!1,this.showError=!1,this.passwordResetIntervalId&&(clearInterval(this.passwordResetIntervalId),this.passwordResetIntervalId=null)}static{this.\u0275fac=function(n){return new(n||i)(x(tc),x(Yt),x(on))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-login"]],decls:5,vars:5,consts:[["authForm","ngForm"],["class","login-container",4,"ngIf"],[3,"message",4,"ngIf"],["class","alert-overlay",4,"ngIf"],["class","alert-container",4,"ngIf"],[3,"isLogout",4,"ngIf"],[1,"login-container"],[1,"login-illustration"],[1,"login-form"],[1,"form-box"],["src","assets/img/logo.png","alt","Logo",1,"logo-icon"],[1,"sub-text"],["autocomplete","off",3,"ngSubmit"],["class","form-grid",4,"ngIf"],[1,"input-group","full-width"],["for","email"],["type","email","id","email","name","email","required","","autocomplete","email","placeholder","example@mail.com",3,"ngModelChange","ngModel"],[1,"input-group","full-width","password-group"],["for","password"],[1,"input-wrapper"],["id","password","name","password","required","","autocomplete","current-password","placeholder","Enter your password",3,"ngModelChange","type","ngModel"],["type","button","aria-label","Toggle Password Visibility",1,"toggle-password",3,"click"],["class","input-group full-width",4,"ngIf"],["class","options-row",4,"ngIf"],["type","submit",1,"login-btn",3,"disabled"],[1,"switch-auth"],[3,"click"],["class","loader",4,"ngIf"],[1,"form-grid"],[1,"input-group"],["for","fullName"],["type","text","id","fullName","name","fullName","placeholder","John Doe","required","",3,"ngModelChange","ngModel"],["for","birthDate"],["type","date","id","birthDate","name","birthDate","required","",3,"ngModelChange","ngModel"],["for","confirmPassword"],["id","confirmPassword","name","confirmPassword","required","","placeholder","Confirm your password",3,"ngModelChange","type","ngModel"],[1,"options-row"],[1,"checkbox-container"],["type","checkbox","name","rememberMe"],[1,"checkmark"],["class","forgot",3,"click",4,"ngIf"],[1,"forgot",3,"click"],[1,"loader"],[3,"message"],[1,"alert-overlay"],[1,"alert-container"],[3,"isLogout"]],template:function(n,r){n&1&&Y(0,Qxe,33,14,"div",1)(1,Xxe,1,1,"app-loader",2)(2,Zxe,1,0,"div",3)(3,twe,3,2,"div",4)(4,iwe,1,0,"app-sheintable",5),n&2&&(z("ngIf",!r.isSignedIn),g(),z("ngIf",r.isLoading),g(),z("ngIf",r.showSuccess||r.showError),g(),z("ngIf",r.showSuccess||r.showError),g(),z("ngIf",r.isSignedIn))},dependencies:[Rt,rc,ms,fr,nc,eu,tr,wa,Yi,KC,gf,MW,AW],styles:['.login-container[_ngcontent-%COMP%]{display:flex;height:100vh;background:#f9fafc;overflow:hidden;flex-direction:row;font-family:Roboto,sans-serif}.login-illustration[_ngcontent-%COMP%]{flex:1;background-image:url("./media/sheinbg-J43BTO4T.png");background-repeat:no-repeat;background-size:cover;background-position:center;background-color:#fff;padding:0;height:100vh;background-position:1% center}.login-form[_ngcontent-%COMP%]{flex:1;display:flex;align-items:center;justify-content:center;background:#fff;padding:2rem}.form-box[_ngcontent-%COMP%]{width:100%;max-width:360px;padding:2rem;border-radius:1rem;background:#fff;box-shadow:0 4px 12px #0003;transition:.3s ease}.form-box[_ngcontent-%COMP%]   .logo-icon[_ngcontent-%COMP%]{width:50px;display:block;margin:0 auto 1rem}.form-box[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-weight:600;font-size:1.5rem;color:#444;text-align:center;margin-bottom:.5rem}.form-box[_ngcontent-%COMP%]   .sub-text[_ngcontent-%COMP%]{text-align:center;font-size:.9rem;color:gray;margin-bottom:1.25rem;font-weight:400}.form-box[_ngcontent-%COMP%]   form[_ngcontent-%COMP%]{width:100%}.form-box[_ngcontent-%COMP%]   .form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(2,1fr);gap:1rem;margin-bottom:1rem}.form-box[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]{display:flex;flex-direction:column;margin-bottom:1rem}.form-box[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   label[_ngcontent-%COMP%]{font-size:.9rem;font-weight:500;margin-bottom:.3rem;color:#444}.form-box[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem .75rem;font-size:1rem;border:1.5px solid #ddd;border-radius:1rem;transition:border-color .3s ease;outline:none}.form-box[_ngcontent-%COMP%]   .input-group[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#3f51b5;box-shadow:0 0 5px #3f51b54d}.form-box[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{grid-column:1/-1}.form-box[_ngcontent-%COMP%]   .password-group[_ngcontent-%COMP%]{position:relative}.form-box[_ngcontent-%COMP%]   .password-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]{position:relative;display:flex;align-items:center}.form-box[_ngcontent-%COMP%]   .password-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{width:100%;padding-right:2.5rem;padding:.5rem .75rem;font-size:1rem;border:1.5px solid #ddd;border-radius:1rem;transition:border-color .3s ease;outline:none}.form-box[_ngcontent-%COMP%]   .password-group[_ngcontent-%COMP%]   .input-wrapper[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]:focus{border-color:#3f51b5;box-shadow:0 0 5px #3f51b54d}.form-box[_ngcontent-%COMP%]   .password-group[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]{position:absolute;top:50%;right:.75rem;transform:translateY(-50%);background:none;border:none;cursor:pointer;display:flex;align-items:center;justify-content:center;color:#ddd;font-size:1.5rem;transition:color .3s ease}.form-box[_ngcontent-%COMP%]   .password-group[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]:hover{color:#3f51b5}.form-box[_ngcontent-%COMP%]   .password-group[_ngcontent-%COMP%]   .toggle-password[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:2.5rem}.form-box[_ngcontent-%COMP%]   .options-row[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;font-size:.85rem;margin-bottom:1rem}.form-box[_ngcontent-%COMP%]   .options-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]{display:flex;align-items:center;cursor:pointer;position:relative;-webkit-user-select:none;user-select:none;font-weight:500;color:#444}.form-box[_ngcontent-%COMP%]   .options-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]{position:absolute;opacity:0;cursor:pointer;height:0;width:0}.form-box[_ngcontent-%COMP%]   .options-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]{height:18px;width:18px;background-color:#eee;border-radius:4px;border:1.5px solid #ddd;margin-right:.5rem;transition:background-color .3s ease,border-color .3s ease}.form-box[_ngcontent-%COMP%]   .options-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]{background-color:#3f51b5;border-color:#3f51b5}.form-box[_ngcontent-%COMP%]   .options-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   .checkmark[_ngcontent-%COMP%]:after{content:"";position:absolute;display:none}.form-box[_ngcontent-%COMP%]   .options-row[_ngcontent-%COMP%]   .checkbox-container[_ngcontent-%COMP%]   input[type=checkbox][_ngcontent-%COMP%]:checked + .checkmark[_ngcontent-%COMP%]:after{display:block;left:6px;top:2px;width:4px;height:9px;border:solid white;border-width:0 2px 2px 0;transform:rotate(45deg)}.form-box[_ngcontent-%COMP%]   .options-row[_ngcontent-%COMP%]   .forgot[_ngcontent-%COMP%]{color:#3f51b5;cursor:pointer;text-decoration:underline;font-weight:600}.form-box[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]{width:100%;background-color:#3f51b5;border:none;padding:.75rem 0;color:#fff;font-weight:600;font-size:1.1rem;border-radius:1rem;cursor:pointer;transition:background-color .3s ease}.form-box[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:disabled{background-color:#abb4e2;cursor:not-allowed}.form-box[_ngcontent-%COMP%]   .login-btn[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#32408f}.form-box[_ngcontent-%COMP%]   .switch-auth[_ngcontent-%COMP%]{margin-top:1rem;font-size:.9rem;text-align:center;color:#444}.form-box[_ngcontent-%COMP%]   .switch-auth[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{color:#3f51b5;cursor:pointer;font-weight:600;margin-left:.3rem}.loader[_ngcontent-%COMP%]{margin:1rem auto;border:4px solid #d1d6ef;border-top:4px solid #3f51b5;border-radius:50%;width:36px;height:36px;animation:_ngcontent-%COMP%_spin 1s linear infinite}@keyframes _ngcontent-%COMP%_spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}@media (max-width: 720px){.login-container[_ngcontent-%COMP%]{flex-direction:column;height:100vh;width:100vw;background-image:url("./media/sheinbg-J43BTO4T.png");background-repeat:no-repeat;background-size:cover;background-position:center;justify-content:center;align-items:center}.login-container[_ngcontent-%COMP%]   .login-illustration[_ngcontent-%COMP%]{display:none}.login-form[_ngcontent-%COMP%]{flex:none;padding:1rem;width:80%;max-width:400px;display:flex;justify-content:center;align-items:center;border-radius:10px}.form-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}}.alert-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#0003;z-index:1000}.alert-container[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%);z-index:1001;min-width:300px;max-width:90%;padding:1rem 2rem;border-radius:1rem;display:flex;flex-direction:column;align-items:center;justify-content:center}@keyframes _ngcontent-%COMP%_zoomInFade{0%{opacity:0;transform:translate(-50%,-50%) scale(.8)}to{opacity:1;transform:translate(-50%,-50%) scale(1)}}.alert-container[_ngcontent-%COMP%]{position:fixed;top:50%;left:50%;transform:translate(-50%,-50%) scale(1);z-index:1001;min-width:300px;max-width:90%;padding:1rem 2rem;border-radius:1rem;display:flex;flex-direction:column;align-items:center;justify-content:center;animation:_ngcontent-%COMP%_zoomInFade .3s ease forwards;will-change:transform,opacity}']})}}return i})();var PW=()=>["fullName","phoneNumber","OtherPhoneNumber","location","address","address2","actions"];function nwe(i,t){if(i&1){let e=Me();f(0,"mat-card",24)(1,"mat-card-title"),y(2),O(3,"translate"),O(4,"translate"),O(5,"translate"),p(),f(6,"mat-card-content")(7,"form",25),$("ngSubmit",function(){ne(e);let r=W();return re(r.onSubmit())}),f(8,"div",26)(9,"mat-form-field",27)(10,"mat-label"),y(11),O(12,"translate"),p(),f(13,"mat-icon",4),y(14,"person"),p(),j(15,"input",28),p(),f(16,"mat-form-field",27)(17,"mat-label"),y(18),O(19,"translate"),p(),f(20,"mat-icon",4),y(21,"call"),p(),j(22,"input",29),p(),f(23,"mat-form-field",27)(24,"mat-label"),y(25),O(26,"translate"),p(),f(27,"mat-icon",4),y(28,"phone_android"),p(),j(29,"input",30),p(),f(30,"mat-form-field",27)(31,"mat-label"),y(32),O(33,"translate"),p(),f(34,"mat-icon",4),y(35,"location_on"),p(),j(36,"input",31),p(),f(37,"mat-form-field",27)(38,"mat-label"),y(39),O(40,"translate"),p(),f(41,"mat-icon",4),y(42,"home"),p(),j(43,"input",32),p(),f(44,"mat-form-field",27)(45,"mat-label"),y(46),O(47,"translate"),p(),f(48,"mat-icon",4),y(49,"home_work"),p(),j(50,"input",33),p()(),f(51,"div",34)(52,"button",35),y(53),O(54,"translate"),O(55,"translate"),O(56,"translate"),p(),f(57,"button",36),$("click",function(){ne(e);let r=W();return re(r.cancelEdit())}),y(58,"Cancel"),p()()()()()}if(i&2){let e=W();g(2),Zs(" ",e.selectedClient?P(3,11,"form.update"):P(4,13,"form.add")," ",P(5,15,"form.title")," "),g(5),z("formGroup",e.userForm),g(4),B(P(12,17,"form.fullName")),g(7),B(P(19,19,"form.phoneNumber")),g(7),B(P(26,21,"form.otherPhoneNumber")),g(7),B(P(33,23,"form.location")),g(7),B(P(40,25,"form.address")),g(7),B(P(47,27,"form.address2")),g(7),Zs(" ",e.selectedClient?P(54,29,"form.update"):P(55,31,"form.add")," ",P(56,33,"form.client")," ")}}function rwe(i,t){if(i&1){let e=Me();f(0,"button",37),$("click",function(){ne(e);let r=W();return re(r.clearSearch())}),f(1,"mat-icon"),y(2,"close"),p()()}}function swe(i,t){i&1&&(f(0,"th",38),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.fullName")," "))}function owe(i,t){if(i&1){let e=Me();f(0,"td",39)(1,"a",40),$("click",function(r){let s=ne(e).$implicit;return W().openClientDetails(s.id),re(r.preventDefault())}),y(2),p()()}if(i&2){let e=t.$implicit;g(2),Q(" ",e.fullName," ")}}function awe(i,t){i&1&&(f(0,"th",38),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.phoneNumber")," "))}function lwe(i,t){if(i&1&&(f(0,"td",39),y(1),p()),i&2){let e=t.$implicit;g(),B(e.phoneNumber)}}function cwe(i,t){i&1&&(f(0,"th",38),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.otherPhoneNumber")," "))}function dwe(i,t){if(i&1&&(f(0,"td",39),y(1),p()),i&2){let e=t.$implicit;g(),Q(" ",e.OtherPhoneNumber," ")}}function uwe(i,t){i&1&&(f(0,"th",38),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.location")," "))}function hwe(i,t){if(i&1&&(f(0,"td",39),y(1),p()),i&2){let e=t.$implicit;g(),B(e.location)}}function mwe(i,t){i&1&&(f(0,"th",38),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.address")," "))}function fwe(i,t){if(i&1&&(f(0,"td",39),y(1),p()),i&2){let e=t.$implicit;g(),B(e.address)}}function pwe(i,t){i&1&&(f(0,"th",38),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.address2")," "))}function gwe(i,t){if(i&1&&(f(0,"td",39),y(1),p()),i&2){let e=t.$implicit;g(),B(e.address2)}}function _we(i,t){i&1&&(f(0,"th",38),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"table.actions")," "))}function bwe(i,t){if(i&1){let e=Me();f(0,"td",39)(1,"button",41),$("click",function(){let r=ne(e).$implicit,s=W();return re(s.onEdit(r))}),f(2,"mat-icon"),y(3,"edit"),p()(),f(4,"button",42),$("click",function(){let r=ne(e).$implicit,s=W();return re(s.onDelete(r.id))}),f(5,"mat-icon"),y(6,"delete"),p()()()}}function vwe(i,t){i&1&&j(0,"tr",43)}function ywe(i,t){i&1&&j(0,"tr",44)}var RW=(()=>{class i{constructor(e,n,r,s,o){this.fb=e,this.firestore=n,this.afAuth=r,this.dialog=s,this.router=o,this.paginatedClients=[],this.searchQuery="",this.pageSize=5,this.pageIndex=0,this.isShowed=!1,this.selectedClient=null,this.clients=[],this.filteredClients=[],this.userId="",this.userForm=this.fb.group({fullName:["",Jt.required],phoneNumber:["",[Jt.required,Jt.pattern("^[0-9]+$")]],OtherPhoneNumber:["",[Jt.required,Jt.pattern("^[0-9]+$")]],location:["",Jt.required],address:["",Jt.required],address2:["",Jt.required]})}ngOnInit(){this.afAuth.authState.subscribe(e=>{e&&(this.userId=e.uid,this.subscribeClients())})}subscribeClients(){this.firestore.collection(`clients/${this.userId}/records`).snapshotChanges().subscribe(e=>{this.clients=e.map(n=>{let r=n.payload.doc.data();return ve({id:n.payload.doc.id},r)}),this.filterClients()})}filterClients(){let e=this.searchQuery.trim().toLowerCase();this.filteredClients=this.clients.filter(n=>n.fullName.toLowerCase().includes(e)||n.phoneNumber.includes(e)||n.OtherPhoneNumber.includes(e)||n.location.toLowerCase().includes(e)||n.address.toLowerCase().includes(e)||n.address2.toLowerCase().includes(e)),this.pageIndex=0,this.updatePagination()}clearSearch(){this.searchQuery="",this.filterClients()}onEdit(e){this.selectedClient=e,this.userForm.patchValue({fullName:e.fullName,phoneNumber:e.phoneNumber,OtherPhoneNumber:e.OtherPhoneNumber,location:e.location,address:e.address,address2:e.address2}),this.isShowed=!0}onSubmit(){return N(this,null,function*(){if(this.userForm.invalid||!this.userId)return;let e=this.userForm.value,n=this.firestore.collection(`clients/${this.userId}/records`);try{this.selectedClient?(yield n.doc(this.selectedClient.id).update(e),console.log("Client updated successfully"),this.selectedClient=null):(yield n.add(e),console.log("Client added successfully")),this.userForm.reset(),this.isShowed=!1}catch(r){console.error("Error saving client:",r)}})}cancelEdit(){this.isShowed=!1,this.selectedClient=null,this.userForm.reset()}onDelete(e){return N(this,null,function*(){if((yield this.dialog.open($s,{width:"300px",data:{message:"Are you sure you want to delete this client?"}}).afterClosed().toPromise())&&this.userId)try{yield this.firestore.doc(`clients/${this.userId}/records/${e}`).delete(),console.log("Client deleted successfully")}catch(s){console.error("Error deleting client:",s)}})}updatePagination(){let e=this.pageIndex*this.pageSize,n=e+this.pageSize;this.paginatedClients=this.filteredClients.slice(e,n)}onNextPage(){let e=Math.ceil(this.filteredClients.length/this.pageSize);this.pageIndex<e-1&&(this.pageIndex++,this.updatePagination())}onPrevPage(){this.pageIndex>0&&(this.pageIndex--,this.updatePagination())}openClientDetails(e){console.log("Navigating to client details:",e),this.router.navigate(["/client-details",e])}get totalPages(){return Math.ceil(this.filteredClients.length/this.pageSize)}static{this.\u0275fac=function(n){return new(n||i)(x(mC),x(tn),x(Yt),x(_s),x(on))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-client"]],decls:52,vars:19,consts:[[1,"card-container"],["class","form-card mat-elevation-z4",4,"ngIf"],[1,"search-bar"],["appearance","outline"],["matPrefix",""],["matInput","",3,"ngModelChange","placeholder","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"table-card","mat-elevation-z4"],[1,"table-scroll-wrapper"],["mat-table","",1,"mat-elevation-z2","full-width-table",3,"dataSource"],["matColumnDef","fullName"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","phoneNumber"],["matColumnDef","OtherPhoneNumber"],["matColumnDef","location"],["matColumnDef","address"],["matColumnDef","address2"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[1,"pagination-buttons"],["mat-icon-button","","color","primary","aria-label","Previous page",3,"click","disabled"],["mat-icon-button","","color","primary","aria-label","Next page",3,"click","disabled"],[1,"form-card","mat-elevation-z4"],[3,"ngSubmit","formGroup"],[1,"form-grid"],["appearance","fill"],["matInput","","formControlName","fullName","required",""],["matInput","","formControlName","phoneNumber","required",""],["matInput","","formControlName","OtherPhoneNumber","required",""],["matInput","","formControlName","location","required",""],["matInput","","formControlName","address","required",""],["matInput","","formControlName","address2","required",""],[1,"form-actions"],["mat-raised-button","","color","primary","type","submit"],["type","button",3,"click"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],["mat-header-cell",""],["mat-cell",""],["href","#",1,"highlight-name",3,"click"],["mat-icon-button","","color","accent",3,"click"],["mat-icon-button","","color","warn",3,"click"],["mat-header-row",""],["mat-row",""]],template:function(n,r){n&1&&(j(0,"app-navigation"),f(1,"section")(2,"div",0),Y(3,nwe,59,35,"mat-card",1),f(4,"div",2)(5,"mat-form-field",3)(6,"mat-label"),y(7),O(8,"translate"),p(),f(9,"mat-icon",4),y(10,"search"),p(),f(11,"input",5),O(12,"translate"),Bt("ngModelChange",function(o){return Lt(r.searchQuery,o)||(r.searchQuery=o),o}),$("ngModelChange",function(){return r.filterClients()}),p(),Y(13,rwe,3,0,"button",6),p()(),f(14,"mat-card",7)(15,"mat-card-title"),y(16),O(17,"translate"),p(),f(18,"mat-card-content")(19,"div",8)(20,"table",9),wt(21,10),Y(22,swe,3,3,"th",11)(23,owe,3,1,"td",12),Ct(),wt(24,13),Y(25,awe,3,3,"th",11)(26,lwe,2,1,"td",12),Ct(),wt(27,14),Y(28,cwe,3,3,"th",11)(29,dwe,2,1,"td",12),Ct(),wt(30,15),Y(31,uwe,3,3,"th",11)(32,hwe,2,1,"td",12),Ct(),wt(33,16),Y(34,mwe,3,3,"th",11)(35,fwe,2,1,"td",12),Ct(),wt(36,17),Y(37,pwe,3,3,"th",11)(38,gwe,2,1,"td",12),Ct(),wt(39,18),Y(40,_we,3,3,"th",11)(41,bwe,7,0,"td",12),Ct(),Y(42,vwe,1,0,"tr",19)(43,ywe,1,0,"tr",20),p()()(),f(44,"div",21)(45,"button",22),$("click",function(){return r.onPrevPage()}),f(46,"mat-icon"),y(47,"chevron_left"),p()(),f(48,"button",23),$("click",function(){return r.onNextPage()}),f(49,"mat-icon"),y(50,"chevron_right"),p()()()()()(),j(51,"app-footer")),n&2&&(g(3),z("ngIf",r.isShowed),g(4),B(P(8,11,"form.search")),g(4),z("placeholder",P(12,13,"form.searchPlaceholder")),Nt("ngModel",r.searchQuery),g(2),z("ngIf",r.searchQuery),g(3),B(P(17,15,"table.title")),g(4),z("dataSource",r.paginatedClients),g(22),z("matHeaderRowDef",Mu(17,PW)),g(),z("matRowDefColumns",Mu(18,PW)),g(2),z("disabled",r.pageIndex===0),g(3),z("disabled",r.pageIndex>=r.totalPages-1))},dependencies:[Rt,rc,ms,fr,nc,eu,Ca,V_,tr,ir,Hr,Yi,_c,pc,jo,Jm,fc,nf,sf,cf,of,rf,df,af,lf,uf,hf,bs,ff,mf,gn,_n,Ai],styles:[".card-container[_ngcontent-%COMP%]{width:90%;max-width:1200px;margin:0 auto;padding:2rem 1rem;min-height:100vh;display:flex;flex-direction:column;gap:2rem}mat-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:14px;padding:2rem;box-shadow:0 8px 16px #1a73e81a;transition:all .3s ease}mat-card[_ngcontent-%COMP%]:hover{transform:translateY(-4px);box-shadow:0 12px 24px #1a73e833}mat-card-title[_ngcontent-%COMP%]{font-size:1.4rem;font-weight:600;margin-bottom:1rem;color:#1a73e8;border-bottom:2px solid #d3e4fb;padding-bottom:.5rem}.form-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.5rem}mat-form-field[_ngcontent-%COMP%]{width:100%}mat-form-field[_ngcontent-%COMP%]   mat-label[_ngcontent-%COMP%]{font-weight:600;color:#174ea6}mat-form-field[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{padding:.5rem .75rem}.form-actions[_ngcontent-%COMP%]{margin-top:1.5rem;display:flex;gap:1rem}.form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]{background-color:#1a73e8;color:#fff;font-weight:700;border-radius:8px;padding:.75rem 2rem;cursor:pointer;border:none;transition:all .3s ease}.form-actions[_ngcontent-%COMP%]   button[type=submit][_ngcontent-%COMP%]:hover{background-color:#174ea6}.form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]{background:none;border:none;color:#4285f4;font-weight:600;cursor:pointer;padding:.75rem 1.5rem;border-radius:8px}.form-actions[_ngcontent-%COMP%]   button[type=button][_ngcontent-%COMP%]:hover{background-color:#fff}.search-bar[_ngcontent-%COMP%]{margin-bottom:1rem}.search-bar[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.table-scroll-wrapper[_ngcontent-%COMP%]{width:100%;overflow-x:auto;-webkit-overflow-scrolling:touch;box-shadow:0 4px 12px #1a73e81a;border-radius:14px;background-color:#fff;padding:1rem 0}.full-width-table[_ngcontent-%COMP%]{min-width:900px;border-collapse:separate;border-spacing:0;width:100%;border-radius:14px;overflow:visible}.full-width-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .full-width-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem 1.25rem;min-width:120px;text-align:left;border-bottom:1px solid #e0e0e0;color:#1f1f1f}.full-width-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e8f0fe;color:#174ea6;font-weight:600}.full-width-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f4faff}.highlight-name[_ngcontent-%COMP%]{color:#1a73e8;font-weight:600;cursor:pointer;text-decoration:none;transition:all .3s ease}.highlight-name[_ngcontent-%COMP%]:hover{text-decoration:underline}.pagination-buttons[_ngcontent-%COMP%]{margin-top:1rem;display:flex;justify-content:flex-end;gap:.5rem}.pagination-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{cursor:pointer;border-radius:50%;padding:.5rem;transition:all .3s ease}.pagination-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{cursor:default;opacity:.5}@media (max-width: 768px){.table-scroll-wrapper[_ngcontent-%COMP%]{padding:.5rem 0}.pagination-buttons[_ngcontent-%COMP%]{justify-content:space-between;padding:0 1rem}}@media (max-width: 480px){.table-scroll-wrapper[_ngcontent-%COMP%]{padding:.25rem 0}}"]})}}return i})();var FW={production:!1,pexelsApiKey:"9l09pmeZClWaHHxwACT0DmlPXY5SspLRiUVLfrUPwZl4XJaHyoaqj1uX"};var F2=(()=>{class i{constructor(e){this.http=e,this.API_URL="https://api.pexels.com/videos/search?query=futuristic&per_page=10"}getFuturisticVideo(){let e=new oL({Authorization:FW.pexelsApiKey});return this.http.get(this.API_URL,{headers:e})}static{this.\u0275fac=function(n){return new(n||i)(V(ja))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var xwe=["bgVideo"];function wwe(i,t){if(i&1&&(f(0,"mat-card",15)(1,"mat-icon",16),y(2),p(),f(3,"h3"),y(4),O(5,"translate"),p(),f(6,"p"),y(7),O(8,"translate"),p()()),i&2){let e=t.$implicit;g(2),B(e.icon),g(2),B(P(5,3,e.titleKey)),g(3),B(P(8,5,e.descriptionKey))}}function Cwe(i,t){if(i&1&&(wt(0),j(1,"video",17,1),f(3,"div",18)(4,"h1"),y(5),O(6,"translate"),p(),f(7,"p"),y(8),O(9,"translate"),p()(),Ct()),i&2){let e=W();g(),z("src",e.videoUrl,Yf),g(4),B(P(6,3,"aboutUs.hero.title")),g(3),B(P(9,5,"aboutUs.hero.subtitle"))}}function Swe(i,t){i&1&&(f(0,"p"),y(1),O(2,"translate"),p()),i&2&&(g(),B(P(2,1,"aboutUs.video.loading")))}function kwe(i,t){if(i&1&&(f(0,"div",19),j(1,"img",20),f(2,"h4"),y(3),p(),f(4,"p"),y(5),p()()),i&2){let e=t.$implicit;g(),z("src",e.photo,Yf)("alt",e.name),g(2),B(e.name),g(2),B(e.role)}}var LW=(()=>{class i{constructor(e,n){this.router=e,this.videoService=n,this._videoUrl=null,this.stats=[{icon:"shopping_cart",titleKey:"aboutUs.stats.0.title",descriptionKey:"aboutUs.stats.0.description"},{icon:"speed",titleKey:"aboutUs.stats.1.title",descriptionKey:"aboutUs.stats.1.description"},{icon:"devices",titleKey:"aboutUs.stats.2.title",descriptionKey:"aboutUs.stats.2.description"},{icon:"support_agent",titleKey:"aboutUs.stats.3.title",descriptionKey:"aboutUs.stats.3.description"}],this.team=[{name:"Ali Amhaz",role:"Main Owner",photo:"assets/image/ali.jpeg"},{name:"Sara",role:"UI/UX Designer",photo:"assets/image/user-icon.png"},{name:"Ziad",role:"Full Stack Developer",photo:"assets/image/user-icon.png"},{name:"Layla",role:"Marketing Head",photo:"assets/image/user-icon.png"}],this.isVideoPlaying=!0}ngOnInit(){this.loadFuturisticVideo()}get videoUrl(){return this._videoUrl}loadFuturisticVideo(){this.videoService.getFuturisticVideo().subscribe({next:e=>{let n=e.videos||[];if(n.length===0){console.warn("No videos found"),this._videoUrl=null;return}let r=Math.floor(Math.random()*n.length),s=n[r],o=s.video_files.find(a=>a.file_type==="video/mp4"&&a.quality==="sd");this._videoUrl=o?.link||s.video_files[0]?.link||null},error:e=>{console.error("Error loading video",e),this._videoUrl=null}})}static{this.\u0275fac=function(n){return new(n||i)(x(on),x(F2))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-aboutme"]],viewQuery:function(n,r){if(n&1&&$e(xwe,5),n&2){let s;ye(s=xe())&&(r.bgVideo=s.first)}},decls:30,vars:19,consts:[["loading",""],["bgVideo",""],[1,"about-us-container"],[1,"hero-card","mat-elevation-z8"],[1,"hero-content"],[1,"title"],[1,"subtitle"],[1,"stats-grid"],["class","stat-card",4,"ngFor","ngForOf"],[1,"video-header"],[4,"ngIf","ngIfElse"],[1,"vision-card","mat-elevation-z4"],[1,"team-card","mat-elevation-z4"],[1,"team-grid"],["class","team-member",4,"ngFor","ngForOf"],[1,"stat-card"],[1,"stat-icon"],["autoplay","","muted","","loop","",1,"bg-video",3,"src"],[1,"overlay"],[1,"team-member"],[1,"team-photo",3,"src","alt"]],template:function(n,r){if(n&1&&(j(0,"app-navigation"),f(1,"section",2)(2,"mat-card",3)(3,"div",4)(4,"h1",5),y(5),O(6,"translate"),p(),f(7,"p",6),y(8),O(9,"translate"),p()()(),f(10,"div",7),Y(11,wwe,9,7,"mat-card",8),p(),f(12,"div",9),Y(13,Cwe,10,7,"ng-container",10)(14,Swe,3,3,"ng-template",null,0,rr),p(),f(16,"mat-card",11)(17,"h2"),y(18),O(19,"translate"),p(),f(20,"p"),y(21),O(22,"translate"),p()(),f(23,"mat-card",12)(24,"h2"),y(25),O(26,"translate"),p(),f(27,"div",13),Y(28,kwe,6,4,"div",14),p()()(),j(29,"app-footer")),n&2){let s=yi(15);g(5),B(P(6,9,"aboutUs.hero.title")),g(3),B(P(9,11,"aboutUs.hero.subtitle")),g(3),z("ngForOf",r.stats),g(2),z("ngIf",r.videoUrl)("ngIfElse",s),g(5),B(P(19,13,"aboutUs.vision.title")),g(3),B(P(22,15,"aboutUs.vision.description")),g(4),B(P(26,17,"aboutUs.team.title")),g(3),z("ngForOf",r.team)}},dependencies:[Js,Rt,Yi,bs,gn,_n,Ai],styles:[".about-us-container[_ngcontent-%COMP%]{font-family:Roboto,sans-serif;background-color:#f5f5f5;padding:40px 20px;display:flex;flex-direction:column;align-items:center;gap:40px;max-width:1300px;margin:0 auto}.about-us-container[_ngcontent-%COMP%]   .hero-card[_ngcontent-%COMP%]{background:#1a73e8;color:#fff;padding:40px 30px;border-radius:12px;box-shadow:0 6px 16px #0000001a;text-align:center;width:100%;max-width:1100px;margin-bottom:40px;transition:box-shadow .3s ease}.about-us-container[_ngcontent-%COMP%]   .hero-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 28px #1a73e880}.about-us-container[_ngcontent-%COMP%]   .hero-card[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(2rem,4vw,3rem);font-weight:700;letter-spacing:1.5px;margin-bottom:15px;line-height:1.2}.about-us-container[_ngcontent-%COMP%]   .hero-card[_ngcontent-%COMP%]   .hero-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,1.4rem);font-weight:400;line-height:1.5}.about-us-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:30px;width:100%;max-width:1100px}.about-us-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]{background-color:#fff;border-radius:12px;box-shadow:0 6px 16px #0000001a;padding:25px;display:flex;flex-direction:column;align-items:center;text-align:center;transition:transform .3s ease,box-shadow .3s ease;cursor:pointer;position:relative;-webkit-backdrop-filter:saturate(180%) blur(10px);backdrop-filter:saturate(180%) blur(10px)}.about-us-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]:hover{transform:translateY(-8px);box-shadow:0 12px 25px #1a73e859}.about-us-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   .stat-icon[_ngcontent-%COMP%]{margin-bottom:15px;color:#1a73e8;transition:color .3s ease}.about-us-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;color:#1f1f1f;margin-top:15px}.about-us-container[_ngcontent-%COMP%]   .stats-grid[_ngcontent-%COMP%]   .stat-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1.1rem;color:#666;line-height:1.4}.about-us-container[_ngcontent-%COMP%]   .video-header[_ngcontent-%COMP%]{position:relative;width:90%;height:0;padding-bottom:20%;overflow:hidden;border-radius:12px;box-shadow:0 10px 24px #00000040;cursor:pointer;-webkit-user-select:none;user-select:none;transition:box-shadow .3s ease}.about-us-container[_ngcontent-%COMP%]   .video-header[_ngcontent-%COMP%]:hover{box-shadow:0 14px 38px #1a73e866}.about-us-container[_ngcontent-%COMP%]   .video-header[_ngcontent-%COMP%]   .bg-video[_ngcontent-%COMP%]{position:absolute;top:0;left:0;width:100%;height:100%;object-fit:cover;border-radius:12px}.about-us-container[_ngcontent-%COMP%]   .video-header[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]{position:absolute;inset:0;background:#00000059;display:flex;flex-direction:column;justify-content:center;align-items:center;color:#fff;text-align:center;padding:1.5rem;border-radius:12px;pointer-events:none;-webkit-user-select:none;user-select:none}.about-us-container[_ngcontent-%COMP%]   .video-header[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:clamp(1.8rem,4vw,2.8rem);font-weight:700;margin-bottom:.5rem;text-shadow:0 2px 6px rgba(0,0,0,.7)}.about-us-container[_ngcontent-%COMP%]   .video-header[_ngcontent-%COMP%]   .overlay[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,1.3rem);font-weight:400;max-width:600px;text-shadow:0 1px 3px rgba(0,0,0,.6)}.about-us-container[_ngcontent-%COMP%]   .video-header[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]{position:absolute;bottom:20px;right:20px;width:50px;height:50px;background:#ffffffd9;border-radius:50%;display:flex;justify-content:center;align-items:center;cursor:pointer;transition:background-color .3s ease,box-shadow .3s ease;-webkit-user-select:none;user-select:none;box-shadow:0 4px 10px #00000040}.about-us-container[_ngcontent-%COMP%]   .video-header[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]:hover{background:#fff;box-shadow:0 6px 15px #00000059}.about-us-container[_ngcontent-%COMP%]   .video-header[_ngcontent-%COMP%]   .play-button[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{fill:#333;width:24px;height:24px}.about-us-container[_ngcontent-%COMP%]   .vision-card[_ngcontent-%COMP%]{background-color:#fff;padding:30px 25px;border-radius:12px;box-shadow:0 6px 16px #0000001a;width:90%;margin-bottom:40px;transition:box-shadow .3s ease}.about-us-container[_ngcontent-%COMP%]   .vision-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 28px #00000026}.about-us-container[_ngcontent-%COMP%]   .vision-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:clamp(1.6rem,3vw,2rem);font-weight:600;color:#1f1f1f;margin-bottom:15px}.about-us-container[_ngcontent-%COMP%]   .vision-card[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:clamp(1rem,2vw,1.3rem);color:#333;line-height:1.5}.about-us-container[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]{background-color:#fff;padding:30px 25px;border-radius:12px;box-shadow:0 6px 16px #0000001a;width:100%;max-width:1100px;transition:box-shadow .3s ease}.about-us-container[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 28px #00000026}.about-us-container[_ngcontent-%COMP%]   .team-card[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:clamp(1.6rem,3vw,2rem);font-weight:600;color:#1f1f1f;margin-bottom:30px}.about-us-container[_ngcontent-%COMP%]   .team-grid[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:30px}.about-us-container[_ngcontent-%COMP%]   .team-grid[_ngcontent-%COMP%]   .team-member[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;text-align:center;padding:20px;background-color:#fafafa;border-radius:10px;box-shadow:0 4px 12px #0000001a;transition:transform .3s ease,box-shadow .3s ease}.about-us-container[_ngcontent-%COMP%]   .team-grid[_ngcontent-%COMP%]   .team-member[_ngcontent-%COMP%]:hover{transform:translateY(-6px);box-shadow:0 6px 18px #00000026}.about-us-container[_ngcontent-%COMP%]   .team-grid[_ngcontent-%COMP%]   .team-member[_ngcontent-%COMP%]   .team-photo[_ngcontent-%COMP%]{width:90px;height:90px;object-fit:cover;border-radius:50%;margin-bottom:15px;transition:transform .3s ease}.about-us-container[_ngcontent-%COMP%]   .team-grid[_ngcontent-%COMP%]   .team-member[_ngcontent-%COMP%]   h4[_ngcontent-%COMP%]{font-size:1.25rem;font-weight:600;color:#1f1f1f;margin-bottom:5px}.about-us-container[_ngcontent-%COMP%]   .team-grid[_ngcontent-%COMP%]   .team-member[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;color:#777}@media (max-width: 768px){.about-us-container[_ngcontent-%COMP%]{padding:30px 15px;gap:30px}.hero-card[_ngcontent-%COMP%]{padding:30px 20px}.vision-card[_ngcontent-%COMP%], .team-card[_ngcontent-%COMP%]{padding:25px 20px}.team-grid[_ngcontent-%COMP%]{grid-template-columns:repeat(auto-fit,minmax(140px,1fr))}}@media (max-width: 480px){.about-us-container[_ngcontent-%COMP%]{padding:20px 10px;gap:20px}.hero-card[_ngcontent-%COMP%]{padding:25px 15px}.vision-card[_ngcontent-%COMP%], .team-card[_ngcontent-%COMP%]{padding:20px 15px}.hero-content[_ngcontent-%COMP%]   h1[_ngcontent-%COMP%]{font-size:1.8rem}.hero-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem}.stats-grid[_ngcontent-%COMP%], .team-grid[_ngcontent-%COMP%]{grid-template-columns:1fr}.video-header[_ngcontent-%COMP%]{padding-bottom:56.25%}}"],data:{animation:[Cr("fadeInOut",[or("in",ci({opacity:1})),wn("void => *",[ci({opacity:0}),An(300)]),wn("* => void",[An(300,ci({opacity:0}))])])]}})}}return i})();var Ewe=["button"],Twe=["*"];function Iwe(i,t){if(i&1&&j(0,"mat-pseudo-checkbox",3),i&2){let e=W();z("disabled",e.disabled)}}function Dwe(i,t){if(i&1&&j(0,"mat-pseudo-checkbox",3),i&2){let e=W();z("disabled",e.disabled)}}var BW=new te("MAT_BUTTON_TOGGLE_DEFAULT_OPTIONS",{providedIn:"root",factory:Mwe});function Mwe(){return{hideSingleSelectionIndicator:!1,hideMultipleSelectionIndicator:!1}}var VW=new te("MatButtonToggleGroup"),Awe={provide:mr,useExisting:Ri(()=>N2),multi:!0},zW=0,YC=class{constructor(t,e){this.source=t,this.value=e}},N2=(()=>{class i{get name(){return this._name}set name(e){this._name=e,this._markButtonsForCheck()}get value(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e.map(n=>n.value):e[0]?e[0].value:void 0}set value(e){this._setSelectionByValue(e),this.valueChange.emit(this.value)}get selected(){let e=this._selectionModel?this._selectionModel.selected:[];return this.multiple?e:e[0]||null}get multiple(){return this._multiple}set multiple(e){this._multiple=e,this._markButtonsForCheck()}get disabled(){return this._disabled}set disabled(e){this._disabled=e,this._markButtonsForCheck()}get hideSingleSelectionIndicator(){return this._hideSingleSelectionIndicator}set hideSingleSelectionIndicator(e){this._hideSingleSelectionIndicator=e,this._markButtonsForCheck()}get hideMultipleSelectionIndicator(){return this._hideMultipleSelectionIndicator}set hideMultipleSelectionIndicator(e){this._hideMultipleSelectionIndicator=e,this._markButtonsForCheck()}constructor(e,n){this._changeDetector=e,this._multiple=!1,this._disabled=!1,this._controlValueAccessorChangeFn=()=>{},this._onTouched=()=>{},this._name=`mat-button-toggle-group-${zW++}`,this.valueChange=new ue,this.change=new ue,this.appearance=n&&n.appearance?n.appearance:"standard",this.hideSingleSelectionIndicator=n?.hideSingleSelectionIndicator??!1,this.hideMultipleSelectionIndicator=n?.hideMultipleSelectionIndicator??!1}ngOnInit(){this._selectionModel=new Gm(this.multiple,void 0,!1)}ngAfterContentInit(){this._selectionModel.select(...this._buttonToggles.filter(e=>e.checked))}writeValue(e){this.value=e,this._changeDetector.markForCheck()}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_emitChangeEvent(e){let n=new YC(e,this.value);this._rawValue=n.value,this._controlValueAccessorChangeFn(n.value),this.change.emit(n)}_syncButtonToggle(e,n,r=!1,s=!1){!this.multiple&&this.selected&&!e.checked&&(this.selected.checked=!1),this._selectionModel?n?this._selectionModel.select(e):this._selectionModel.deselect(e):s=!0,s?Promise.resolve().then(()=>this._updateModelValue(e,r)):this._updateModelValue(e,r)}_isSelected(e){return this._selectionModel&&this._selectionModel.isSelected(e)}_isPrechecked(e){return typeof this._rawValue>"u"?!1:this.multiple&&Array.isArray(this._rawValue)?this._rawValue.some(n=>e.value!=null&&n===e.value):e.value===this._rawValue}_setSelectionByValue(e){this._rawValue=e,this._buttonToggles&&(this.multiple&&e?(Array.isArray(e),this._clearSelection(),e.forEach(n=>this._selectValue(n))):(this._clearSelection(),this._selectValue(e)))}_clearSelection(){this._selectionModel.clear(),this._buttonToggles.forEach(e=>e.checked=!1)}_selectValue(e){let n=this._buttonToggles.find(r=>r.value!=null&&r.value===e);n&&(n.checked=!0,this._selectionModel.select(n))}_updateModelValue(e,n){n&&this._emitChangeEvent(e),this.valueChange.emit(this.value)}_markButtonsForCheck(){this._buttonToggles?.forEach(e=>e._markForCheck())}static{this.\u0275fac=function(n){return new(n||i)(x(mt),x(BW,8))}}static{this.\u0275dir=J({type:i,selectors:[["mat-button-toggle-group"]],contentQueries:function(n,r,s){if(n&1&&gt(s,QC,5),n&2){let o;ye(o=xe())&&(r._buttonToggles=o)}},hostAttrs:["role","group",1,"mat-button-toggle-group"],hostVars:5,hostBindings:function(n,r){n&2&&(Se("aria-disabled",r.disabled),le("mat-button-toggle-vertical",r.vertical)("mat-button-toggle-group-appearance-standard",r.appearance==="standard"))},inputs:{appearance:"appearance",name:"name",vertical:[H.HasDecoratorInputTransform,"vertical","vertical",be],value:"value",multiple:[H.HasDecoratorInputTransform,"multiple","multiple",be],disabled:[H.HasDecoratorInputTransform,"disabled","disabled",be],hideSingleSelectionIndicator:[H.HasDecoratorInputTransform,"hideSingleSelectionIndicator","hideSingleSelectionIndicator",be],hideMultipleSelectionIndicator:[H.HasDecoratorInputTransform,"hideMultipleSelectionIndicator","hideMultipleSelectionIndicator",be]},outputs:{valueChange:"valueChange",change:"change"},exportAs:["matButtonToggleGroup"],standalone:!0,features:[je([Awe,{provide:VW,useExisting:i}]),Ge]})}}return i})(),QC=(()=>{class i{get buttonId(){return`${this.id}-button`}get appearance(){return this.buttonToggleGroup?this.buttonToggleGroup.appearance:this._appearance}set appearance(e){this._appearance=e}get checked(){return this.buttonToggleGroup?this.buttonToggleGroup._isSelected(this):this._checked}set checked(e){e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&this.buttonToggleGroup._syncButtonToggle(this,this._checked),this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled||this.buttonToggleGroup&&this.buttonToggleGroup.disabled}set disabled(e){this._disabled=e}constructor(e,n,r,s,o,a){this._changeDetectorRef=n,this._elementRef=r,this._focusMonitor=s,this._checked=!1,this.ariaLabelledby=null,this._disabled=!1,this.change=new ue;let l=Number(o);this.tabIndex=l||l===0?l:null,this.buttonToggleGroup=e,this.appearance=a&&a.appearance?a.appearance:"standard"}ngOnInit(){let e=this.buttonToggleGroup;this.id=this.id||`mat-button-toggle-${zW++}`,e&&(e._isPrechecked(this)?this.checked=!0:e._isSelected(this)!==this._checked&&e._syncButtonToggle(this,this._checked))}ngAfterViewInit(){this._focusMonitor.monitor(this._elementRef,!0)}ngOnDestroy(){let e=this.buttonToggleGroup;this._focusMonitor.stopMonitoring(this._elementRef),e&&e._isSelected(this)&&e._syncButtonToggle(this,!1,!1,!0)}focus(e){this._buttonElement.nativeElement.focus(e)}_onButtonClick(){let e=this._isSingleSelector()?!0:!this._checked;e!==this._checked&&(this._checked=e,this.buttonToggleGroup&&(this.buttonToggleGroup._syncButtonToggle(this,this._checked,!0),this.buttonToggleGroup._onTouched())),this.change.emit(new YC(this,this.value))}_markForCheck(){this._changeDetectorRef.markForCheck()}_getButtonName(){return this._isSingleSelector()?this.buttonToggleGroup.name:this.name||null}_isSingleSelector(){return this.buttonToggleGroup&&!this.buttonToggleGroup.multiple}static{this.\u0275fac=function(n){return new(n||i)(x(VW,8),x(mt),x(fe),x(zr),yn("tabindex"),x(BW,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-button-toggle"]],viewQuery:function(n,r){if(n&1&&$e(Ewe,5),n&2){let s;ye(s=xe())&&(r._buttonElement=s.first)}},hostAttrs:["role","presentation",1,"mat-button-toggle"],hostVars:12,hostBindings:function(n,r){n&1&&$("focus",function(){return r.focus()}),n&2&&(Se("aria-label",null)("aria-labelledby",null)("id",r.id)("name",null),le("mat-button-toggle-standalone",!r.buttonToggleGroup)("mat-button-toggle-checked",r.checked)("mat-button-toggle-disabled",r.disabled)("mat-button-toggle-appearance-standard",r.appearance==="standard"))},inputs:{ariaLabel:[H.None,"aria-label","ariaLabel"],ariaLabelledby:[H.None,"aria-labelledby","ariaLabelledby"],id:"id",name:"name",value:"value",tabIndex:"tabIndex",disableRipple:[H.HasDecoratorInputTransform,"disableRipple","disableRipple",be],appearance:"appearance",checked:[H.HasDecoratorInputTransform,"checked","checked",be],disabled:[H.HasDecoratorInputTransform,"disabled","disabled",be]},outputs:{change:"change"},exportAs:["matButtonToggle"],standalone:!0,features:[Ge,Re],ngContentSelectors:Twe,decls:8,vars:11,consts:[["button",""],["type","button",1,"mat-button-toggle-button","mat-focus-indicator",3,"click","id","disabled"],[1,"mat-button-toggle-label-content"],["state","checked","aria-hidden","true","appearance","minimal",1,"mat-mdc-option-pseudo-checkbox",3,"disabled"],[1,"mat-button-toggle-focus-overlay"],["matRipple","",1,"mat-button-toggle-ripple",3,"matRippleTrigger","matRippleDisabled"]],template:function(n,r){if(n&1){let s=Me();nt(),f(0,"button",1,0),$("click",function(){return ne(s),re(r._onButtonClick())}),f(2,"span",2),Y(3,Iwe,1,1,"mat-pseudo-checkbox",3)(4,Dwe,1,1,"mat-pseudo-checkbox",3),Ee(5),p()(),j(6,"span",4)(7,"span",5)}if(n&2){let s=yi(1);z("id",r.buttonId)("disabled",r.disabled||null),Se("tabindex",r.disabled?-1:r.tabIndex)("aria-pressed",r.checked)("name",r._getButtonName())("aria-label",r.ariaLabel)("aria-labelledby",r.ariaLabelledby),g(3),et(3,r.buttonToggleGroup&&r.checked&&!r.buttonToggleGroup.multiple&&!r.buttonToggleGroup.hideSingleSelectionIndicator?3:-1),g(),et(4,r.buttonToggleGroup&&r.checked&&r.buttonToggleGroup.multiple&&!r.buttonToggleGroup.hideMultipleSelectionIndicator?4:-1),g(3),z("matRippleTrigger",s)("matRippleDisabled",r.disableRipple||r.disabled)}},dependencies:[Sa,HR],styles:[".mat-button-toggle-standalone,.mat-button-toggle-group{position:relative;display:inline-flex;flex-direction:row;white-space:nowrap;overflow:hidden;-webkit-tap-highlight-color:rgba(0,0,0,0);transform:translateZ(0);border-radius:var(--mat-legacy-button-toggle-shape)}.mat-button-toggle-standalone:not([class*=mat-elevation-z]),.mat-button-toggle-group:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.cdk-high-contrast-active .mat-button-toggle-standalone,.cdk-high-contrast-active .mat-button-toggle-group{outline:solid 1px}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.mat-button-toggle-group-appearance-standard{border-radius:var(--mat-standard-button-toggle-shape);border:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard .mat-pseudo-checkbox,.mat-button-toggle-group-appearance-standard .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-selected-checkmark-color: var( --mat-standard-button-toggle-selected-state-text-color )}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard:not([class*=mat-elevation-z]),.mat-button-toggle-group-appearance-standard:not([class*=mat-elevation-z]){box-shadow:none}.cdk-high-contrast-active .mat-button-toggle-standalone.mat-button-toggle-appearance-standard,.cdk-high-contrast-active .mat-button-toggle-group-appearance-standard{outline:0}.mat-button-toggle-vertical{flex-direction:column}.mat-button-toggle-vertical .mat-button-toggle-label-content{display:block}.mat-button-toggle{white-space:nowrap;position:relative;color:var(--mat-legacy-button-toggle-text-color);font-family:var(--mat-legacy-button-toggle-label-text-font);font-size:var(--mat-legacy-button-toggle-label-text-size);line-height:var(--mat-legacy-button-toggle-label-text-line-height);font-weight:var(--mat-legacy-button-toggle-label-text-weight);letter-spacing:var(--mat-legacy-button-toggle-label-text-tracking);--mat-minimal-pseudo-checkbox-selected-checkmark-color: var( --mat-legacy-button-toggle-selected-state-text-color )}.mat-button-toggle.cdk-keyboard-focused .mat-button-toggle-focus-overlay{opacity:var(--mat-legacy-button-toggle-focus-state-layer-opacity)}.mat-button-toggle .mat-icon svg{vertical-align:top}.mat-button-toggle .mat-pseudo-checkbox{margin-right:12px}[dir=rtl] .mat-button-toggle .mat-pseudo-checkbox{margin-right:0;margin-left:12px}.mat-button-toggle-checked{color:var(--mat-legacy-button-toggle-selected-state-text-color);background-color:var(--mat-legacy-button-toggle-selected-state-background-color)}.mat-button-toggle-disabled{color:var(--mat-legacy-button-toggle-disabled-state-text-color);background-color:var(--mat-legacy-button-toggle-disabled-state-background-color);--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var( --mat-legacy-button-toggle-disabled-state-text-color )}.mat-button-toggle-disabled.mat-button-toggle-checked{background-color:var(--mat-legacy-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard{color:var(--mat-standard-button-toggle-text-color);background-color:var(--mat-standard-button-toggle-background-color);font-family:var(--mat-standard-button-toggle-label-text-font);font-size:var(--mat-standard-button-toggle-label-text-size);line-height:var(--mat-standard-button-toggle-label-text-line-height);font-weight:var(--mat-standard-button-toggle-label-text-weight);letter-spacing:var(--mat-standard-button-toggle-label-text-tracking)}.mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:solid 1px var(--mat-standard-button-toggle-divider-color)}[dir=rtl] .mat-button-toggle-group-appearance-standard .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-group-appearance-standard.mat-button-toggle-vertical .mat-button-toggle-appearance-standard+.mat-button-toggle-appearance-standard{border-left:none;border-right:none;border-top:solid 1px var(--mat-standard-button-toggle-divider-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-selected-state-text-color);background-color:var(--mat-standard-button-toggle-selected-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled{color:var(--mat-standard-button-toggle-disabled-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-state-background-color)}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled .mat-pseudo-checkbox{--mat-minimal-pseudo-checkbox-disabled-selected-checkmark-color: var( --mat-standard-button-toggle-disabled-selected-state-text-color )}.mat-button-toggle-appearance-standard.mat-button-toggle-disabled.mat-button-toggle-checked{color:var(--mat-standard-button-toggle-disabled-selected-state-text-color);background-color:var(--mat-standard-button-toggle-disabled-selected-state-background-color)}.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{background-color:var(--mat-standard-button-toggle-state-layer-color)}.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-hover-state-layer-opacity)}.mat-button-toggle-appearance-standard.cdk-keyboard-focused:not(.mat-button-toggle-disabled) .mat-button-toggle-focus-overlay{opacity:var(--mat-standard-button-toggle-focus-state-layer-opacity)}@media(hover: none){.mat-button-toggle-appearance-standard:not(.mat-button-toggle-disabled):hover .mat-button-toggle-focus-overlay{display:none}}.mat-button-toggle-label-content{-webkit-user-select:none;user-select:none;display:inline-block;padding:0 16px;line-height:var(--mat-legacy-button-toggle-height);position:relative}.mat-button-toggle-appearance-standard .mat-button-toggle-label-content{padding:0 12px;line-height:var(--mat-standard-button-toggle-height)}.mat-button-toggle-label-content>*{vertical-align:middle}.mat-button-toggle-focus-overlay{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:inherit;pointer-events:none;opacity:0;background-color:var(--mat-legacy-button-toggle-state-layer-color)}.cdk-high-contrast-active .mat-button-toggle-checked .mat-button-toggle-focus-overlay{border-bottom:solid 500px;opacity:.5;height:0}.cdk-high-contrast-active .mat-button-toggle-checked:hover .mat-button-toggle-focus-overlay{opacity:.6}.cdk-high-contrast-active .mat-button-toggle-checked.mat-button-toggle-appearance-standard .mat-button-toggle-focus-overlay{border-bottom:solid 500px}.mat-button-toggle .mat-button-toggle-ripple{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-button-toggle-button{border:0;background:none;color:inherit;padding:0;margin:0;font:inherit;outline:none;width:100%;cursor:pointer}.mat-button-toggle-disabled .mat-button-toggle-button{cursor:default}.mat-button-toggle-button::-moz-focus-inner{border:0}.mat-button-toggle-standalone.mat-button-toggle-appearance-standard{--mat-focus-indicator-border-radius:var(--mat-standard-button-toggle-shape)}.mat-button-toggle-group-appearance-standard .mat-button-toggle:last-of-type .mat-button-toggle-button::before{border-top-right-radius:var(--mat-standard-button-toggle-shape);border-bottom-right-radius:var(--mat-standard-button-toggle-shape)}.mat-button-toggle-group-appearance-standard .mat-button-toggle:first-of-type .mat-button-toggle-button::before{border-top-left-radius:var(--mat-standard-button-toggle-shape);border-bottom-left-radius:var(--mat-standard-button-toggle-shape)}"],encapsulation:2,changeDetection:0})}}return i})(),XC=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[ze,ou,QC,ze]})}}return i})();function db(i){return i+.5|0}var yc=(i,t,e)=>Math.max(Math.min(i,e),t);function lb(i){return yc(db(i*2.55),0,255)}function xc(i){return yc(db(i*255),0,255)}function Ma(i){return yc(db(i/2.55)/100,0,1)}function jW(i){return yc(db(i*100),0,100)}var ys={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},B2=[..."0123456789ABCDEF"],Pwe=i=>B2[i&15],Rwe=i=>B2[(i&240)>>4]+B2[i&15],ZC=i=>(i&240)>>4===(i&15),Fwe=i=>ZC(i.r)&&ZC(i.g)&&ZC(i.b)&&ZC(i.a);function Nwe(i){var t=i.length,e;return i[0]==="#"&&(t===4||t===5?e={r:255&ys[i[1]]*17,g:255&ys[i[2]]*17,b:255&ys[i[3]]*17,a:t===5?ys[i[4]]*17:255}:(t===7||t===9)&&(e={r:ys[i[1]]<<4|ys[i[2]],g:ys[i[3]]<<4|ys[i[4]],b:ys[i[5]]<<4|ys[i[6]],a:t===9?ys[i[7]]<<4|ys[i[8]]:255})),e}var Lwe=(i,t)=>i<255?t(i):"";function Bwe(i){var t=Fwe(i)?Pwe:Rwe;return i?"#"+t(i.r)+t(i.g)+t(i.b)+Lwe(i.a,t):void 0}var Vwe=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function WW(i,t,e){let n=t*Math.min(e,1-e),r=(s,o=(s+i/30)%12)=>e-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function zwe(i,t,e){let n=(r,s=(r+i/60)%6)=>e-e*t*Math.max(Math.min(s,4-s,1),0);return[n(5),n(3),n(1)]}function jwe(i,t,e){let n=WW(i,1,.5),r;for(t+e>1&&(r=1/(t+e),t*=r,e*=r),r=0;r<3;r++)n[r]*=1-t-e,n[r]+=t;return n}function Uwe(i,t,e,n,r){return i===r?(t-e)/n+(t<e?6:0):t===r?(e-i)/n+2:(i-t)/n+4}function V2(i){let e=i.r/255,n=i.g/255,r=i.b/255,s=Math.max(e,n,r),o=Math.min(e,n,r),a=(s+o)/2,l,c,d;return s!==o&&(d=s-o,c=a>.5?d/(2-s-o):d/(s+o),l=Uwe(e,n,r,d,s),l=l*60+.5),[l|0,c||0,a]}function z2(i,t,e,n){return(Array.isArray(t)?i(t[0],t[1],t[2]):i(t,e,n)).map(xc)}function j2(i,t,e){return z2(WW,i,t,e)}function Hwe(i,t,e){return z2(jwe,i,t,e)}function qwe(i,t,e){return z2(zwe,i,t,e)}function GW(i){return(i%360+360)%360}function Wwe(i){let t=Vwe.exec(i),e=255,n;if(!t)return;t[5]!==n&&(e=t[6]?lb(+t[5]):xc(+t[5]));let r=GW(+t[2]),s=+t[3]/100,o=+t[4]/100;return t[1]==="hwb"?n=Hwe(r,s,o):t[1]==="hsv"?n=qwe(r,s,o):n=j2(r,s,o),{r:n[0],g:n[1],b:n[2],a:e}}function Gwe(i,t){var e=V2(i);e[0]=GW(e[0]+t),e=j2(e),i.r=e[0],i.g=e[1],i.b=e[2]}function $we(i){if(!i)return;let t=V2(i),e=t[0],n=jW(t[1]),r=jW(t[2]);return i.a<255?`hsla(${e}, ${n}%, ${r}%, ${Ma(i.a)})`:`hsl(${e}, ${n}%, ${r}%)`}var UW={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},HW={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function Kwe(){let i={},t=Object.keys(HW),e=Object.keys(UW),n,r,s,o,a;for(n=0;n<t.length;n++){for(o=a=t[n],r=0;r<e.length;r++)s=e[r],a=a.replace(s,UW[s]);s=parseInt(HW[o],16),i[a]=[s>>16&255,s>>8&255,s&255]}return i}var JC;function Ywe(i){JC||(JC=Kwe(),JC.transparent=[0,0,0,0]);let t=JC[i.toLowerCase()];return t&&{r:t[0],g:t[1],b:t[2],a:t.length===4?t[3]:255}}var Qwe=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function Xwe(i){let t=Qwe.exec(i),e=255,n,r,s;if(t){if(t[7]!==n){let o=+t[7];e=t[8]?lb(o):yc(o*255,0,255)}return n=+t[1],r=+t[3],s=+t[5],n=255&(t[2]?lb(n):yc(n,0,255)),r=255&(t[4]?lb(r):yc(r,0,255)),s=255&(t[6]?lb(s):yc(s,0,255)),{r:n,g:r,b:s,a:e}}}function Zwe(i){return i&&(i.a<255?`rgba(${i.r}, ${i.g}, ${i.b}, ${Ma(i.a)})`:`rgb(${i.r}, ${i.g}, ${i.b})`)}var L2=i=>i<=.0031308?i*12.92:Math.pow(i,1/2.4)*1.055-.055,vf=i=>i<=.04045?i/12.92:Math.pow((i+.055)/1.055,2.4);function Jwe(i,t,e){let n=vf(Ma(i.r)),r=vf(Ma(i.g)),s=vf(Ma(i.b));return{r:xc(L2(n+e*(vf(Ma(t.r))-n))),g:xc(L2(r+e*(vf(Ma(t.g))-r))),b:xc(L2(s+e*(vf(Ma(t.b))-s))),a:i.a+e*(t.a-i.a)}}function e1(i,t,e){if(i){let n=V2(i);n[t]=Math.max(0,Math.min(n[t]+n[t]*e,t===0?360:1)),n=j2(n),i.r=n[0],i.g=n[1],i.b=n[2]}}function $W(i,t){return i&&Object.assign(t||{},i)}function qW(i){var t={r:0,g:0,b:0,a:255};return Array.isArray(i)?i.length>=3&&(t={r:i[0],g:i[1],b:i[2],a:255},i.length>3&&(t.a=xc(i[3]))):(t=$W(i,{r:0,g:0,b:0,a:1}),t.a=xc(t.a)),t}function eCe(i){return i.charAt(0)==="r"?Xwe(i):Wwe(i)}var cb=class i{constructor(t){if(t instanceof i)return t;let e=typeof t,n;e==="object"?n=qW(t):e==="string"&&(n=Nwe(t)||Ywe(t)||eCe(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=$W(this._rgb);return t&&(t.a=Ma(t.a)),t}set rgb(t){this._rgb=qW(t)}rgbString(){return this._valid?Zwe(this._rgb):void 0}hexString(){return this._valid?Bwe(this._rgb):void 0}hslString(){return this._valid?$we(this._rgb):void 0}mix(t,e){if(t){let n=this.rgb,r=t.rgb,s,o=e===s?.5:e,a=2*o-1,l=n.a-r.a,c=((a*l===-1?a:(a+l)/(1+a*l))+1)/2;s=1-c,n.r=255&c*n.r+s*r.r+.5,n.g=255&c*n.g+s*r.g+.5,n.b=255&c*n.b+s*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=Jwe(this._rgb,t._rgb,e)),this}clone(){return new i(this.rgb)}alpha(t){return this._rgb.a=xc(t),this}clearer(t){let e=this._rgb;return e.a*=1-t,this}greyscale(){let t=this._rgb,e=db(t.r*.3+t.g*.59+t.b*.11);return t.r=t.g=t.b=e,this}opaquer(t){let e=this._rgb;return e.a*=1+t,this}negate(){let t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return e1(this._rgb,2,t),this}darken(t){return e1(this._rgb,2,-t),this}saturate(t){return e1(this._rgb,1,t),this}desaturate(t){return e1(this._rgb,1,-t),this}rotate(t){return Gwe(this._rgb,t),this}};function qo(){}var rG=(()=>{let i=0;return()=>i++})();function ut(i){return i==null}function ei(i){if(Array.isArray&&Array.isArray(i))return!0;let t=Object.prototype.toString.call(i);return t.slice(0,7)==="[object"&&t.slice(-6)==="Array]"}function pt(i){return i!==null&&Object.prototype.toString.call(i)==="[object Object]"}function ki(i){return(typeof i=="number"||i instanceof Number)&&isFinite(+i)}function br(i,t){return ki(i)?i:t}function Xe(i,t){return typeof i>"u"?t:i}var sG=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100:+i/t,W2=(i,t)=>typeof i=="string"&&i.endsWith("%")?parseFloat(i)/100*t:+i;function Gt(i,t,e){if(i&&typeof i.call=="function")return i.apply(e,t)}function Ft(i,t,e,n){let r,s,o;if(ei(i))if(s=i.length,n)for(r=s-1;r>=0;r--)t.call(e,i[r],r);else for(r=0;r<s;r++)t.call(e,i[r],r);else if(pt(i))for(o=Object.keys(i),s=o.length,r=0;r<s;r++)t.call(e,i[o[r]],o[r])}function mb(i,t){let e,n,r,s;if(!i||!t||i.length!==t.length)return!1;for(e=0,n=i.length;e<n;++e)if(r=i[e],s=t[e],r.datasetIndex!==s.datasetIndex||r.index!==s.index)return!1;return!0}function s1(i){if(ei(i))return i.map(s1);if(pt(i)){let t=Object.create(null),e=Object.keys(i),n=e.length,r=0;for(;r<n;++r)t[e[r]]=s1(i[e[r]]);return t}return i}function oG(i){return["__proto__","prototype","constructor"].indexOf(i)===-1}function tCe(i,t,e,n){if(!oG(i))return;let r=t[i],s=e[i];pt(r)&&pt(s)?xf(r,s,n):t[i]=s1(s)}function xf(i,t,e){let n=ei(t)?t:[t],r=n.length;if(!pt(i))return i;e=e||{};let s=e.merger||tCe,o;for(let a=0;a<r;++a){if(o=n[a],!pt(o))continue;let l=Object.keys(o);for(let c=0,d=l.length;c<d;++c)s(l[c],i,o,e)}return i}function Cf(i,t){return xf(i,t,{merger:iCe})}function iCe(i,t,e){if(!oG(i))return;let n=t[i],r=e[i];pt(n)&&pt(r)?Cf(n,r):Object.prototype.hasOwnProperty.call(t,i)||(t[i]=s1(r))}var KW={"":i=>i,x:i=>i.x,y:i=>i.y};function nCe(i){let t=i.split("."),e=[],n="";for(let r of t)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(e.push(n),n="");return e}function rCe(i){let t=nCe(i);return e=>{for(let n of t){if(n==="")break;e=e&&e[n]}return e}}function Pa(i,t){return(KW[t]||(KW[t]=rCe(t)))(i)}function c1(i){return i.charAt(0).toUpperCase()+i.slice(1)}var Sf=i=>typeof i<"u",Aa=i=>typeof i=="function",G2=(i,t)=>{if(i.size!==t.size)return!1;for(let e of i)if(!t.has(e))return!1;return!0};function aG(i){return i.type==="mouseup"||i.type==="click"||i.type==="contextmenu"}var ti=Math.PI,ii=2*ti,sCe=ii+ti,o1=Number.POSITIVE_INFINITY,oCe=ti/180,Oi=ti/2,mu=ti/4,YW=ti*2/3,Oa=Math.log10,Ys=Math.sign;function kf(i,t,e){return Math.abs(i-t)<e}function $2(i){let t=Math.round(i);i=kf(i,t,i/1e3)?t:i;let e=Math.pow(10,Math.floor(Oa(i))),n=i/e;return(n<=1?1:n<=2?2:n<=5?5:10)*e}function lG(i){let t=[],e=Math.sqrt(i),n;for(n=1;n<e;n++)i%n===0&&(t.push(n),t.push(i/n));return e===(e|0)&&t.push(e),t.sort((r,s)=>r-s).pop(),t}function aCe(i){return typeof i=="symbol"||typeof i=="object"&&i!==null&&!(Symbol.toPrimitive in i||"toString"in i||"valueOf"in i)}function gu(i){return!aCe(i)&&!isNaN(parseFloat(i))&&isFinite(i)}function cG(i,t){let e=Math.round(i);return e-t<=i&&e+t>=i}function K2(i,t,e){let n,r,s;for(n=0,r=i.length;n<r;n++)s=i[n][e],isNaN(s)||(t.min=Math.min(t.min,s),t.max=Math.max(t.max,s))}function xs(i){return i*(ti/180)}function d1(i){return i*(180/ti)}function Y2(i){if(!ki(i))return;let t=1,e=0;for(;Math.round(i*t)/t!==i;)t*=10,e++;return e}function Q2(i,t){let e=t.x-i.x,n=t.y-i.y,r=Math.sqrt(e*e+n*n),s=Math.atan2(n,e);return s<-.5*ti&&(s+=ii),{angle:s,distance:r}}function a1(i,t){return Math.sqrt(Math.pow(t.x-i.x,2)+Math.pow(t.y-i.y,2))}function lCe(i,t){return(i-t+sCe)%ii-ti}function _r(i){return(i%ii+ii)%ii}function Ef(i,t,e,n){let r=_r(i),s=_r(t),o=_r(e),a=_r(s-r),l=_r(o-r),c=_r(r-s),d=_r(r-o);return r===s||r===o||n&&s===o||a>l&&c<d}function nn(i,t,e){return Math.max(t,Math.min(e,i))}function dG(i){return nn(i,-32768,32767)}function Wo(i,t,e,n=1e-6){return i>=Math.min(t,e)-n&&i<=Math.max(t,e)+n}function u1(i,t,e){e=e||(o=>i[o]<t);let n=i.length-1,r=0,s;for(;n-r>1;)s=r+n>>1,e(s)?r=s:n=s;return{lo:r,hi:n}}var Uo=(i,t,e,n)=>u1(i,e,n?r=>{let s=i[r][t];return s<e||s===e&&i[r+1][t]===e}:r=>i[r][t]<e),uG=(i,t,e)=>u1(i,e,n=>i[n][t]>=e);function hG(i,t,e){let n=0,r=i.length;for(;n<r&&i[n]<t;)n++;for(;r>n&&i[r-1]>e;)r--;return n>0||r<i.length?i.slice(n,r):i}var mG=["push","pop","shift","splice","unshift"];function fG(i,t){if(i._chartjs){i._chartjs.listeners.push(t);return}Object.defineProperty(i,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),mG.forEach(e=>{let n="_onData"+c1(e),r=i[e];Object.defineProperty(i,e,{configurable:!0,enumerable:!1,value(...s){let o=r.apply(this,s);return i._chartjs.listeners.forEach(a=>{typeof a[n]=="function"&&a[n](...s)}),o}})})}function X2(i,t){let e=i._chartjs;if(!e)return;let n=e.listeners,r=n.indexOf(t);r!==-1&&n.splice(r,1),!(n.length>0)&&(mG.forEach(s=>{delete i[s]}),delete i._chartjs)}function Z2(i){let t=new Set(i);return t.size===i.length?i:Array.from(t)}var J2=function(){return typeof window>"u"?function(i){return i()}:window.requestAnimationFrame}();function eF(i,t){let e=[],n=!1;return function(...r){e=r,n||(n=!0,J2.call(window,()=>{n=!1,i.apply(t,e)}))}}function pG(i,t){let e;return function(...n){return t?(clearTimeout(e),e=setTimeout(i,t,n)):i.apply(this,n),t}}var h1=i=>i==="start"?"left":i==="end"?"right":"center",Tn=(i,t,e)=>i==="start"?t:i==="end"?e:(t+e)/2,gG=(i,t,e,n)=>i===(n?"left":"right")?e:i==="center"?(t+e)/2:t;function tF(i,t,e){let n=t.length,r=0,s=n;if(i._sorted){let{iScale:o,vScale:a,_parsed:l}=i,c=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null,d=o.axis,{min:u,max:h,minDefined:m,maxDefined:_}=o.getUserBounds();if(m){if(r=Math.min(Uo(l,d,u).lo,e?n:Uo(t,d,o.getPixelForValue(u)).lo),c){let b=l.slice(0,r+1).reverse().findIndex(v=>!ut(v[a.axis]));r-=Math.max(0,b)}r=nn(r,0,n-1)}if(_){let b=Math.max(Uo(l,o.axis,h,!0).hi+1,e?0:Uo(t,d,o.getPixelForValue(h),!0).hi+1);if(c){let v=l.slice(b-1).findIndex(I=>!ut(I[a.axis]));b+=Math.max(0,v)}s=nn(b,r,n)-r}else s=n-r}return{start:r,count:s}}function iF(i){let{xScale:t,yScale:e,_scaleRanges:n}=i,r={xmin:t.min,xmax:t.max,ymin:e.min,ymax:e.max};if(!n)return i._scaleRanges=r,!0;let s=n.xmin!==t.min||n.xmax!==t.max||n.ymin!==e.min||n.ymax!==e.max;return Object.assign(n,r),s}var t1=i=>i===0||i===1,QW=(i,t,e)=>-(Math.pow(2,10*(i-=1))*Math.sin((i-t)*ii/e)),XW=(i,t,e)=>Math.pow(2,-10*i)*Math.sin((i-t)*ii/e)+1,yf={linear:i=>i,easeInQuad:i=>i*i,easeOutQuad:i=>-i*(i-2),easeInOutQuad:i=>(i/=.5)<1?.5*i*i:-.5*(--i*(i-2)-1),easeInCubic:i=>i*i*i,easeOutCubic:i=>(i-=1)*i*i+1,easeInOutCubic:i=>(i/=.5)<1?.5*i*i*i:.5*((i-=2)*i*i+2),easeInQuart:i=>i*i*i*i,easeOutQuart:i=>-((i-=1)*i*i*i-1),easeInOutQuart:i=>(i/=.5)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2),easeInQuint:i=>i*i*i*i*i,easeOutQuint:i=>(i-=1)*i*i*i*i+1,easeInOutQuint:i=>(i/=.5)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2),easeInSine:i=>-Math.cos(i*Oi)+1,easeOutSine:i=>Math.sin(i*Oi),easeInOutSine:i=>-.5*(Math.cos(ti*i)-1),easeInExpo:i=>i===0?0:Math.pow(2,10*(i-1)),easeOutExpo:i=>i===1?1:-Math.pow(2,-10*i)+1,easeInOutExpo:i=>t1(i)?i:i<.5?.5*Math.pow(2,10*(i*2-1)):.5*(-Math.pow(2,-10*(i*2-1))+2),easeInCirc:i=>i>=1?i:-(Math.sqrt(1-i*i)-1),easeOutCirc:i=>Math.sqrt(1-(i-=1)*i),easeInOutCirc:i=>(i/=.5)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1),easeInElastic:i=>t1(i)?i:QW(i,.075,.3),easeOutElastic:i=>t1(i)?i:XW(i,.075,.3),easeInOutElastic(i){return t1(i)?i:i<.5?.5*QW(i*2,.1125,.45):.5+.5*XW(i*2-1,.1125,.45)},easeInBack(i){return i*i*((1.70158+1)*i-1.70158)},easeOutBack(i){return(i-=1)*i*((1.70158+1)*i+1.70158)+1},easeInOutBack(i){let t=1.70158;return(i/=.5)<1?.5*(i*i*(((t*=1.525)+1)*i-t)):.5*((i-=2)*i*(((t*=1.525)+1)*i+t)+2)},easeInBounce:i=>1-yf.easeOutBounce(1-i),easeOutBounce(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},easeInOutBounce:i=>i<.5?yf.easeInBounce(i*2)*.5:yf.easeOutBounce(i*2-1)*.5+.5};function nF(i){if(i&&typeof i=="object"){let t=i.toString();return t==="[object CanvasPattern]"||t==="[object CanvasGradient]"}return!1}function rF(i){return nF(i)?i:new cb(i)}function U2(i){return nF(i)?i:new cb(i).saturate(.5).darken(.1).hexString()}var cCe=["x","y","borderWidth","radius","tension"],dCe=["color","borderColor","backgroundColor"];function uCe(i){i.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),i.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>t!=="onProgress"&&t!=="onComplete"&&t!=="fn"}),i.set("animations",{colors:{type:"color",properties:dCe},numbers:{type:"number",properties:cCe}}),i.describe("animations",{_fallback:"animation"}),i.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>t|0}}}})}function hCe(i){i.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}var ZW=new Map;function mCe(i,t){t=t||{};let e=i+JSON.stringify(t),n=ZW.get(e);return n||(n=new Intl.NumberFormat(i,t),ZW.set(e,n)),n}function Tf(i,t,e){return mCe(t,e).format(i)}var _G={values(i){return ei(i)?i:""+i},numeric(i,t,e){if(i===0)return"0";let n=this.chart.options.locale,r,s=i;if(e.length>1){let c=Math.max(Math.abs(e[0].value),Math.abs(e[e.length-1].value));(c<1e-4||c>1e15)&&(r="scientific"),s=fCe(i,e)}let o=Oa(Math.abs(s)),a=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),l={notation:r,minimumFractionDigits:a,maximumFractionDigits:a};return Object.assign(l,this.options.ticks.format),Tf(i,n,l)},logarithmic(i,t,e){if(i===0)return"0";let n=e[t].significand||i/Math.pow(10,Math.floor(Oa(i)));return[1,2,3,5,10,15].includes(n)||t>.8*e.length?_G.numeric.call(this,i,t,e):""}};function fCe(i,t){let e=t.length>3?t[2].value-t[1].value:t[1].value-t[0].value;return Math.abs(e)>=1&&i!==Math.floor(i)&&(e=i-Math.floor(i)),e}var fb={formatters:_G};function pCe(i){i.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:fb.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),i.route("scale.ticks","color","","color"),i.route("scale.grid","color","","borderColor"),i.route("scale.border","color","","borderColor"),i.route("scale.title","color","","color"),i.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&t!=="callback"&&t!=="parser",_indexable:t=>t!=="borderDash"&&t!=="tickBorderDash"&&t!=="dash"}),i.describe("scales",{_fallback:"scale"}),i.describe("scale.ticks",{_scriptable:t=>t!=="backdropPadding"&&t!=="callback",_indexable:t=>t!=="backdropPadding"})}var Cc=Object.create(null),m1=Object.create(null);function ub(i,t){if(!t)return i;let e=t.split(".");for(let n=0,r=e.length;n<r;++n){let s=e[n];i=i[s]||(i[s]=Object.create(null))}return i}function H2(i,t,e){return typeof t=="string"?xf(ub(i,t),e):xf(ub(i,""),t)}var q2=class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>U2(r.backgroundColor),this.hoverBorderColor=(n,r)=>U2(r.borderColor),this.hoverColor=(n,r)=>U2(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return H2(this,t,e)}get(t){return ub(this,t)}describe(t,e){return H2(m1,t,e)}override(t,e){return H2(Cc,t,e)}route(t,e,n,r){let s=ub(this,t),o=ub(this,n),a="_"+e;Object.defineProperties(s,{[a]:{value:s[e],writable:!0},[e]:{enumerable:!0,get(){let l=this[a],c=o[r];return pt(l)?Object.assign({},c,l):Xe(l,c)},set(l){this[a]=l}}})}apply(t){t.forEach(e=>e(this))}},$t=new q2({_scriptable:i=>!i.startsWith("on"),_indexable:i=>i!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[uCe,hCe,pCe]);function gCe(i){return!i||ut(i.size)||ut(i.family)?null:(i.style?i.style+" ":"")+(i.weight?i.weight+" ":"")+i.size+"px "+i.family}function hb(i,t,e,n,r){let s=t[r];return s||(s=t[r]=i.measureText(r).width,e.push(r)),s>n&&(n=s),n}function bG(i,t,e,n){n=n||{};let r=n.data=n.data||{},s=n.garbageCollect=n.garbageCollect||[];n.font!==t&&(r=n.data={},s=n.garbageCollect=[],n.font=t),i.save(),i.font=t;let o=0,a=e.length,l,c,d,u,h;for(l=0;l<a;l++)if(u=e[l],u!=null&&!ei(u))o=hb(i,r,s,o,u);else if(ei(u))for(c=0,d=u.length;c<d;c++)h=u[c],h!=null&&!ei(h)&&(o=hb(i,r,s,o,h));i.restore();let m=s.length/2;if(m>e.length){for(l=0;l<m;l++)delete r[s[l]];s.splice(0,m)}return o}function Sc(i,t,e){let n=i.currentDevicePixelRatio,r=e!==0?Math.max(e/2,.5):0;return Math.round((t-r)*n)/n+r}function sF(i,t){!t&&!i||(t=t||i.getContext("2d"),t.save(),t.resetTransform(),t.clearRect(0,0,i.width,i.height),t.restore())}function f1(i,t,e,n){oF(i,t,e,n,null)}function oF(i,t,e,n,r){let s,o,a,l,c,d,u,h,m=t.pointStyle,_=t.rotation,b=t.radius,v=(_||0)*oCe;if(m&&typeof m=="object"&&(s=m.toString(),s==="[object HTMLImageElement]"||s==="[object HTMLCanvasElement]")){i.save(),i.translate(e,n),i.rotate(v),i.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),i.restore();return}if(!(isNaN(b)||b<=0)){switch(i.beginPath(),m){default:r?i.ellipse(e,n,r/2,b,0,0,ii):i.arc(e,n,b,0,ii),i.closePath();break;case"triangle":d=r?r/2:b,i.moveTo(e+Math.sin(v)*d,n-Math.cos(v)*b),v+=YW,i.lineTo(e+Math.sin(v)*d,n-Math.cos(v)*b),v+=YW,i.lineTo(e+Math.sin(v)*d,n-Math.cos(v)*b),i.closePath();break;case"rectRounded":c=b*.516,l=b-c,o=Math.cos(v+mu)*l,u=Math.cos(v+mu)*(r?r/2-c:l),a=Math.sin(v+mu)*l,h=Math.sin(v+mu)*(r?r/2-c:l),i.arc(e-u,n-a,c,v-ti,v-Oi),i.arc(e+h,n-o,c,v-Oi,v),i.arc(e+u,n+a,c,v,v+Oi),i.arc(e-h,n+o,c,v+Oi,v+ti),i.closePath();break;case"rect":if(!_){l=Math.SQRT1_2*b,d=r?r/2:l,i.rect(e-d,n-l,2*d,2*l);break}v+=mu;case"rectRot":u=Math.cos(v)*(r?r/2:b),o=Math.cos(v)*b,a=Math.sin(v)*b,h=Math.sin(v)*(r?r/2:b),i.moveTo(e-u,n-a),i.lineTo(e+h,n-o),i.lineTo(e+u,n+a),i.lineTo(e-h,n+o),i.closePath();break;case"crossRot":v+=mu;case"cross":u=Math.cos(v)*(r?r/2:b),o=Math.cos(v)*b,a=Math.sin(v)*b,h=Math.sin(v)*(r?r/2:b),i.moveTo(e-u,n-a),i.lineTo(e+u,n+a),i.moveTo(e+h,n-o),i.lineTo(e-h,n+o);break;case"star":u=Math.cos(v)*(r?r/2:b),o=Math.cos(v)*b,a=Math.sin(v)*b,h=Math.sin(v)*(r?r/2:b),i.moveTo(e-u,n-a),i.lineTo(e+u,n+a),i.moveTo(e+h,n-o),i.lineTo(e-h,n+o),v+=mu,u=Math.cos(v)*(r?r/2:b),o=Math.cos(v)*b,a=Math.sin(v)*b,h=Math.sin(v)*(r?r/2:b),i.moveTo(e-u,n-a),i.lineTo(e+u,n+a),i.moveTo(e+h,n-o),i.lineTo(e-h,n+o);break;case"line":o=r?r/2:Math.cos(v)*b,a=Math.sin(v)*b,i.moveTo(e-o,n-a),i.lineTo(e+o,n+a);break;case"dash":i.moveTo(e,n),i.lineTo(e+Math.cos(v)*(r?r/2:b),n+Math.sin(v)*b);break;case!1:i.closePath();break}i.fill(),t.borderWidth>0&&i.stroke()}}function Ho(i,t,e){return e=e||.5,!t||i&&i.x>t.left-e&&i.x<t.right+e&&i.y>t.top-e&&i.y<t.bottom+e}function pb(i,t){i.save(),i.beginPath(),i.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),i.clip()}function gb(i){i.restore()}function vG(i,t,e,n,r){if(!t)return i.lineTo(e.x,e.y);if(r==="middle"){let s=(t.x+e.x)/2;i.lineTo(s,t.y),i.lineTo(s,e.y)}else r==="after"!=!!n?i.lineTo(t.x,e.y):i.lineTo(e.x,t.y);i.lineTo(e.x,e.y)}function yG(i,t,e,n){if(!t)return i.lineTo(e.x,e.y);i.bezierCurveTo(n?t.cp1x:t.cp2x,n?t.cp1y:t.cp2y,n?e.cp2x:e.cp1x,n?e.cp2y:e.cp1y,e.x,e.y)}function _Ce(i,t){t.translation&&i.translate(t.translation[0],t.translation[1]),ut(t.rotation)||i.rotate(t.rotation),t.color&&(i.fillStyle=t.color),t.textAlign&&(i.textAlign=t.textAlign),t.textBaseline&&(i.textBaseline=t.textBaseline)}function bCe(i,t,e,n,r){if(r.strikethrough||r.underline){let s=i.measureText(n),o=t-s.actualBoundingBoxLeft,a=t+s.actualBoundingBoxRight,l=e-s.actualBoundingBoxAscent,c=e+s.actualBoundingBoxDescent,d=r.strikethrough?(l+c)/2:c;i.strokeStyle=i.fillStyle,i.beginPath(),i.lineWidth=r.decorationWidth||2,i.moveTo(o,d),i.lineTo(a,d),i.stroke()}}function vCe(i,t){let e=i.fillStyle;i.fillStyle=t.color,i.fillRect(t.left,t.top,t.width,t.height),i.fillStyle=e}function kc(i,t,e,n,r,s={}){let o=ei(t)?t:[t],a=s.strokeWidth>0&&s.strokeColor!=="",l,c;for(i.save(),i.font=r.string,_Ce(i,s),l=0;l<o.length;++l)c=o[l],s.backdrop&&vCe(i,s.backdrop),a&&(s.strokeColor&&(i.strokeStyle=s.strokeColor),ut(s.strokeWidth)||(i.lineWidth=s.strokeWidth),i.strokeText(c,e,n,s.maxWidth)),i.fillText(c,e,n,s.maxWidth),bCe(i,e,n,c,s),n+=Number(r.lineHeight);i.restore()}function If(i,t){let{x:e,y:n,w:r,h:s,radius:o}=t;i.arc(e+o.topLeft,n+o.topLeft,o.topLeft,1.5*ti,ti,!0),i.lineTo(e,n+s-o.bottomLeft),i.arc(e+o.bottomLeft,n+s-o.bottomLeft,o.bottomLeft,ti,Oi,!0),i.lineTo(e+r-o.bottomRight,n+s),i.arc(e+r-o.bottomRight,n+s-o.bottomRight,o.bottomRight,Oi,0,!0),i.lineTo(e+r,n+o.topRight),i.arc(e+r-o.topRight,n+o.topRight,o.topRight,0,-Oi,!0),i.lineTo(e+o.topLeft,n)}var yCe=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,xCe=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function wCe(i,t){let e=(""+i).match(yCe);if(!e||e[1]==="normal")return t*1.2;switch(i=+e[2],e[3]){case"px":return i;case"%":i/=100;break}return t*i}var CCe=i=>+i||0;function p1(i,t){let e={},n=pt(t),r=n?Object.keys(t):t,s=pt(i)?n?o=>Xe(i[o],i[t[o]]):o=>i[o]:()=>i;for(let o of r)e[o]=CCe(s(o));return e}function aF(i){return p1(i,{top:"y",right:"x",bottom:"y",left:"x"})}function Ec(i){return p1(i,["topLeft","topRight","bottomLeft","bottomRight"])}function In(i){let t=aF(i);return t.width=t.left+t.right,t.height=t.top+t.bottom,t}function Xi(i,t){i=i||{},t=t||$t.font;let e=Xe(i.size,t.size);typeof e=="string"&&(e=parseInt(e,10));let n=Xe(i.style,t.style);n&&!(""+n).match(xCe)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);let r={family:Xe(i.family,t.family),lineHeight:wCe(Xe(i.lineHeight,t.lineHeight),e),size:e,style:n,weight:Xe(i.weight,t.weight),string:""};return r.string=gCe(r),r}function Df(i,t,e,n){let r=!0,s,o,a;for(s=0,o=i.length;s<o;++s)if(a=i[s],a!==void 0&&(t!==void 0&&typeof a=="function"&&(a=a(t),r=!1),e!==void 0&&ei(a)&&(a=a[e%a.length],r=!1),a!==void 0))return n&&!r&&(n.cacheable=!1),a}function xG(i,t,e){let{min:n,max:r}=i,s=W2(t,(r-n)/2),o=(a,l)=>e&&a===0?0:a+l;return{min:o(n,-Math.abs(s)),max:o(r,s)}}function Ra(i,t){return Object.assign(Object.create(i),t)}function g1(i,t=[""],e,n,r=()=>i[0]){let s=e||i;typeof n>"u"&&(n=SG("_fallback",i));let o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:i,_rootScopes:s,_fallback:n,_getTarget:r,override:a=>g1([a,...i],t,s,n)};return new Proxy(o,{deleteProperty(a,l){return delete a[l],delete a._keys,delete i[0][l],!0},get(a,l){return wG(a,l,()=>ACe(l,t,i,a))},getOwnPropertyDescriptor(a,l){return Reflect.getOwnPropertyDescriptor(a._scopes[0],l)},getPrototypeOf(){return Reflect.getPrototypeOf(i[0])},has(a,l){return eG(a).includes(l)},ownKeys(a){return eG(a)},set(a,l,c){let d=a._storage||(a._storage=r());return a[l]=d[l]=c,delete a._keys,!0}})}function pu(i,t,e,n){let r={_cacheable:!1,_proxy:i,_context:t,_subProxy:e,_stack:new Set,_descriptors:lF(i,n),setContext:s=>pu(i,s,e,n),override:s=>pu(i.override(s),t,e,n)};return new Proxy(r,{deleteProperty(s,o){return delete s[o],delete i[o],!0},get(s,o,a){return wG(s,o,()=>kCe(s,o,a))},getOwnPropertyDescriptor(s,o){return s._descriptors.allKeys?Reflect.has(i,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(i,o)},getPrototypeOf(){return Reflect.getPrototypeOf(i)},has(s,o){return Reflect.has(i,o)},ownKeys(){return Reflect.ownKeys(i)},set(s,o,a){return i[o]=a,delete s[o],!0}})}function lF(i,t={scriptable:!0,indexable:!0}){let{_scriptable:e=t.scriptable,_indexable:n=t.indexable,_allKeys:r=t.allKeys}=i;return{allKeys:r,scriptable:e,indexable:n,isScriptable:Aa(e)?e:()=>e,isIndexable:Aa(n)?n:()=>n}}var SCe=(i,t)=>i?i+c1(t):t,cF=(i,t)=>pt(t)&&i!=="adapters"&&(Object.getPrototypeOf(t)===null||t.constructor===Object);function wG(i,t,e){if(Object.prototype.hasOwnProperty.call(i,t)||t==="constructor")return i[t];let n=e();return i[t]=n,n}function kCe(i,t,e){let{_proxy:n,_context:r,_subProxy:s,_descriptors:o}=i,a=n[t];return Aa(a)&&o.isScriptable(t)&&(a=ECe(t,a,i,e)),ei(a)&&a.length&&(a=TCe(t,a,i,o.isIndexable)),cF(t,a)&&(a=pu(a,r,s&&s[t],o)),a}function ECe(i,t,e,n){let{_proxy:r,_context:s,_subProxy:o,_stack:a}=e;if(a.has(i))throw new Error("Recursion detected: "+Array.from(a).join("->")+"->"+i);a.add(i);let l=t(s,o||n);return a.delete(i),cF(i,l)&&(l=dF(r._scopes,r,i,l)),l}function TCe(i,t,e,n){let{_proxy:r,_context:s,_subProxy:o,_descriptors:a}=e;if(typeof s.index<"u"&&n(i))return t[s.index%t.length];if(pt(t[0])){let l=t,c=r._scopes.filter(d=>d!==l);t=[];for(let d of l){let u=dF(c,r,i,d);t.push(pu(u,s,o&&o[i],a))}}return t}function CG(i,t,e){return Aa(i)?i(t,e):i}var ICe=(i,t)=>i===!0?t:typeof i=="string"?Pa(t,i):void 0;function DCe(i,t,e,n,r){for(let s of t){let o=ICe(e,s);if(o){i.add(o);let a=CG(o._fallback,e,r);if(typeof a<"u"&&a!==e&&a!==n)return a}else if(o===!1&&typeof n<"u"&&e!==n)return null}return!1}function dF(i,t,e,n){let r=t._rootScopes,s=CG(t._fallback,e,n),o=[...i,...r],a=new Set;a.add(n);let l=JW(a,o,e,s||e,n);return l===null||typeof s<"u"&&s!==e&&(l=JW(a,o,s,l,n),l===null)?!1:g1(Array.from(a),[""],r,s,()=>MCe(t,e,n))}function JW(i,t,e,n,r){for(;e;)e=DCe(i,t,e,n,r);return e}function MCe(i,t,e){let n=i._getTarget();t in n||(n[t]={});let r=n[t];return ei(r)&&pt(e)?e:r||{}}function ACe(i,t,e,n){let r;for(let s of t)if(r=SG(SCe(s,i),e),typeof r<"u")return cF(i,r)?dF(e,n,i,r):r}function SG(i,t){for(let e of t){if(!e)continue;let n=e[i];if(typeof n<"u")return n}}function eG(i){let t=i._keys;return t||(t=i._keys=OCe(i._scopes)),t}function OCe(i){let t=new Set;for(let e of i)for(let n of Object.keys(e).filter(r=>!r.startsWith("_")))t.add(n);return Array.from(t)}function uF(i,t,e,n){let{iScale:r}=i,{key:s="r"}=this._parsing,o=new Array(n),a,l,c,d;for(a=0,l=n;a<l;++a)c=a+e,d=t[c],o[a]={r:r.parse(Pa(d,s),c)};return o}var PCe=Number.EPSILON||1e-14,wf=(i,t)=>t<i.length&&!i[t].skip&&i[t],kG=i=>i==="x"?"y":"x";function RCe(i,t,e,n){let r=i.skip?t:i,s=t,o=e.skip?t:e,a=a1(s,r),l=a1(o,s),c=a/(a+l),d=l/(a+l);c=isNaN(c)?0:c,d=isNaN(d)?0:d;let u=n*c,h=n*d;return{previous:{x:s.x-u*(o.x-r.x),y:s.y-u*(o.y-r.y)},next:{x:s.x+h*(o.x-r.x),y:s.y+h*(o.y-r.y)}}}function FCe(i,t,e){let n=i.length,r,s,o,a,l,c=wf(i,0);for(let d=0;d<n-1;++d)if(l=c,c=wf(i,d+1),!(!l||!c)){if(kf(t[d],0,PCe)){e[d]=e[d+1]=0;continue}r=e[d]/t[d],s=e[d+1]/t[d],a=Math.pow(r,2)+Math.pow(s,2),!(a<=9)&&(o=3/Math.sqrt(a),e[d]=r*o*t[d],e[d+1]=s*o*t[d])}}function NCe(i,t,e="x"){let n=kG(e),r=i.length,s,o,a,l=wf(i,0);for(let c=0;c<r;++c){if(o=a,a=l,l=wf(i,c+1),!a)continue;let d=a[e],u=a[n];o&&(s=(d-o[e])/3,a[`cp1${e}`]=d-s,a[`cp1${n}`]=u-s*t[c]),l&&(s=(l[e]-d)/3,a[`cp2${e}`]=d+s,a[`cp2${n}`]=u+s*t[c])}}function LCe(i,t="x"){let e=kG(t),n=i.length,r=Array(n).fill(0),s=Array(n),o,a,l,c=wf(i,0);for(o=0;o<n;++o)if(a=l,l=c,c=wf(i,o+1),!!l){if(c){let d=c[t]-l[t];r[o]=d!==0?(c[e]-l[e])/d:0}s[o]=a?c?Ys(r[o-1])!==Ys(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}FCe(i,r,s),NCe(i,s,t)}function i1(i,t,e){return Math.max(Math.min(i,e),t)}function BCe(i,t){let e,n,r,s,o,a=Ho(i[0],t);for(e=0,n=i.length;e<n;++e)o=s,s=a,a=e<n-1&&Ho(i[e+1],t),s&&(r=i[e],o&&(r.cp1x=i1(r.cp1x,t.left,t.right),r.cp1y=i1(r.cp1y,t.top,t.bottom)),a&&(r.cp2x=i1(r.cp2x,t.left,t.right),r.cp2y=i1(r.cp2y,t.top,t.bottom)))}function EG(i,t,e,n,r){let s,o,a,l;if(t.spanGaps&&(i=i.filter(c=>!c.skip)),t.cubicInterpolationMode==="monotone")LCe(i,r);else{let c=n?i[i.length-1]:i[0];for(s=0,o=i.length;s<o;++s)a=i[s],l=RCe(c,a,i[Math.min(s+1,o-(n?0:1))%o],t.tension),a.cp1x=l.previous.x,a.cp1y=l.previous.y,a.cp2x=l.next.x,a.cp2y=l.next.y,c=a}t.capBezierPoints&&BCe(i,e)}function _1(){return typeof window<"u"&&typeof document<"u"}function b1(i){let t=i.parentNode;return t&&t.toString()==="[object ShadowRoot]"&&(t=t.host),t}function l1(i,t,e){let n;return typeof i=="string"?(n=parseInt(i,10),i.indexOf("%")!==-1&&(n=n/100*t.parentNode[e])):n=i,n}var v1=i=>i.ownerDocument.defaultView.getComputedStyle(i,null);function VCe(i,t){return v1(i).getPropertyValue(t)}var zCe=["top","right","bottom","left"];function fu(i,t,e){let n={};e=e?"-"+e:"";for(let r=0;r<4;r++){let s=zCe[r];n[s]=parseFloat(i[t+"-"+s+e])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}var jCe=(i,t,e)=>(i>0||t>0)&&(!e||!e.shadowRoot);function UCe(i,t){let e=i.touches,n=e&&e.length?e[0]:i,{offsetX:r,offsetY:s}=n,o=!1,a,l;if(jCe(r,s,i.target))a=r,l=s;else{let c=t.getBoundingClientRect();a=n.clientX-c.left,l=n.clientY-c.top,o=!0}return{x:a,y:l,box:o}}function Tc(i,t){if("native"in i)return i;let{canvas:e,currentDevicePixelRatio:n}=t,r=v1(e),s=r.boxSizing==="border-box",o=fu(r,"padding"),a=fu(r,"border","width"),{x:l,y:c,box:d}=UCe(i,e),u=o.left+(d&&a.left),h=o.top+(d&&a.top),{width:m,height:_}=t;return s&&(m-=o.width+a.width,_-=o.height+a.height),{x:Math.round((l-u)/m*e.width/n),y:Math.round((c-h)/_*e.height/n)}}function HCe(i,t,e){let n,r;if(t===void 0||e===void 0){let s=i&&b1(i);if(!s)t=i.clientWidth,e=i.clientHeight;else{let o=s.getBoundingClientRect(),a=v1(s),l=fu(a,"border","width"),c=fu(a,"padding");t=o.width-c.width-l.width,e=o.height-c.height-l.height,n=l1(a.maxWidth,s,"clientWidth"),r=l1(a.maxHeight,s,"clientHeight")}}return{width:t,height:e,maxWidth:n||o1,maxHeight:r||o1}}var n1=i=>Math.round(i*10)/10;function TG(i,t,e,n){let r=v1(i),s=fu(r,"margin"),o=l1(r.maxWidth,i,"clientWidth")||o1,a=l1(r.maxHeight,i,"clientHeight")||o1,l=HCe(i,t,e),{width:c,height:d}=l;if(r.boxSizing==="content-box"){let h=fu(r,"border","width"),m=fu(r,"padding");c-=m.width+h.width,d-=m.height+h.height}return c=Math.max(0,c-s.width),d=Math.max(0,n?c/n:d-s.height),c=n1(Math.min(c,o,l.maxWidth)),d=n1(Math.min(d,a,l.maxHeight)),c&&!d&&(d=n1(c/2)),(t!==void 0||e!==void 0)&&n&&l.height&&d>l.height&&(d=l.height,c=n1(Math.floor(d*n))),{width:c,height:d}}function hF(i,t,e){let n=t||1,r=Math.floor(i.height*n),s=Math.floor(i.width*n);i.height=Math.floor(i.height),i.width=Math.floor(i.width);let o=i.canvas;return o.style&&(e||!o.style.height&&!o.style.width)&&(o.style.height=`${i.height}px`,o.style.width=`${i.width}px`),i.currentDevicePixelRatio!==n||o.height!==r||o.width!==s?(i.currentDevicePixelRatio=n,o.height=r,o.width=s,i.ctx.setTransform(n,0,0,n,0,0),!0):!1}var IG=function(){let i=!1;try{let t={get passive(){return i=!0,!1}};_1()&&(window.addEventListener("test",null,t),window.removeEventListener("test",null,t))}catch{}return i}();function mF(i,t){let e=VCe(i,t),n=e&&e.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function wc(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:i.y+e*(t.y-i.y)}}function DG(i,t,e,n){return{x:i.x+e*(t.x-i.x),y:n==="middle"?e<.5?i.y:t.y:n==="after"?e<1?i.y:t.y:e>0?t.y:i.y}}function MG(i,t,e,n){let r={x:i.cp2x,y:i.cp2y},s={x:t.cp1x,y:t.cp1y},o=wc(i,r,e),a=wc(r,s,e),l=wc(s,t,e),c=wc(o,a,e),d=wc(a,l,e);return wc(c,d,e)}var qCe=function(i,t){return{x(e){return i+i+t-e},setWidth(e){t=e},textAlign(e){return e==="center"?e:e==="right"?"left":"right"},xPlus(e,n){return e-n},leftForLtr(e,n){return e-n}}},WCe=function(){return{x(i){return i},setWidth(i){},textAlign(i){return i},xPlus(i,t){return i+t},leftForLtr(i,t){return i}}};function _u(i,t,e){return i?qCe(t,e):WCe()}function fF(i,t){let e,n;(t==="ltr"||t==="rtl")&&(e=i.canvas.style,n=[e.getPropertyValue("direction"),e.getPropertyPriority("direction")],e.setProperty("direction",t,"important"),i.prevTextDirection=n)}function pF(i,t){t!==void 0&&(delete i.prevTextDirection,i.canvas.style.setProperty("direction",t[0],t[1]))}function AG(i){return i==="angle"?{between:Ef,compare:lCe,normalize:_r}:{between:Wo,compare:(t,e)=>t-e,normalize:t=>t}}function tG({start:i,end:t,count:e,loop:n,style:r}){return{start:i%e,end:t%e,loop:n&&(t-i+1)%e===0,style:r}}function GCe(i,t,e){let{property:n,start:r,end:s}=e,{between:o,normalize:a}=AG(n),l=t.length,{start:c,end:d,loop:u}=i,h,m;if(u){for(c+=l,d+=l,h=0,m=l;h<m&&o(a(t[c%l][n]),r,s);++h)c--,d--;c%=l,d%=l}return d<c&&(d+=l),{start:c,end:d,loop:u,style:i.style}}function gF(i,t,e){if(!e)return[i];let{property:n,start:r,end:s}=e,o=t.length,{compare:a,between:l,normalize:c}=AG(n),{start:d,end:u,loop:h,style:m}=GCe(i,t,e),_=[],b=!1,v=null,I,A,F,M=()=>l(r,F,I)&&a(r,F)!==0,L=()=>a(s,I)===0||l(s,F,I),U=()=>b||M(),T=()=>!b||L();for(let C=d,E=d;C<=u;++C)A=t[C%o],!A.skip&&(I=c(A[n]),I!==F&&(b=l(I,r,s),v===null&&U()&&(v=a(I,r)===0?C:E),v!==null&&T()&&(_.push(tG({start:v,end:C,loop:h,count:o,style:m})),v=null),E=C,F=I));return v!==null&&_.push(tG({start:v,end:u,loop:h,count:o,style:m})),_}function _F(i,t){let e=[],n=i.segments;for(let r=0;r<n.length;r++){let s=gF(n[r],i.points,t);s.length&&e.push(...s)}return e}function $Ce(i,t,e,n){let r=0,s=t-1;if(e&&!n)for(;r<t&&!i[r].skip;)r++;for(;r<t&&i[r].skip;)r++;for(r%=t,e&&(s+=r);s>r&&i[s%t].skip;)s--;return s%=t,{start:r,end:s}}function KCe(i,t,e,n){let r=i.length,s=[],o=t,a=i[t],l;for(l=t+1;l<=e;++l){let c=i[l%r];c.skip||c.stop?a.skip||(n=!1,s.push({start:t%r,end:(l-1)%r,loop:n}),t=o=c.stop?l:null):(o=l,a.skip&&(t=l)),a=c}return o!==null&&s.push({start:t%r,end:o%r,loop:n}),s}function OG(i,t){let e=i.points,n=i.options.spanGaps,r=e.length;if(!r)return[];let s=!!i._loop,{start:o,end:a}=$Ce(e,r,s,n);if(n===!0)return iG(i,[{start:o,end:a,loop:s}],e,t);let l=a<o?a+r:a,c=!!i._fullLoop&&o===0&&a===r-1;return iG(i,KCe(e,o,l,c),e,t)}function iG(i,t,e,n){return!n||!n.setContext||!e?t:YCe(i,t,e,n)}function YCe(i,t,e,n){let r=i._chart.getContext(),s=nG(i.options),{_datasetIndex:o,options:{spanGaps:a}}=i,l=e.length,c=[],d=s,u=t[0].start,h=u;function m(_,b,v,I){let A=a?-1:1;if(_!==b){for(_+=l;e[_%l].skip;)_-=A;for(;e[b%l].skip;)b+=A;_%l!==b%l&&(c.push({start:_%l,end:b%l,loop:v,style:I}),d=I,u=b%l)}}for(let _ of t){u=a?u:_.start;let b=e[u%l],v;for(h=u+1;h<=_.end;h++){let I=e[h%l];v=nG(n.setContext(Ra(r,{type:"segment",p0:b,p1:I,p0DataIndex:(h-1)%l,p1DataIndex:h%l,datasetIndex:o}))),QCe(v,d)&&m(u,h-1,_.loop,d),b=I,d=v}u<h-1&&m(u,h-1,_.loop,d)}return c}function nG(i){return{backgroundColor:i.backgroundColor,borderCapStyle:i.borderCapStyle,borderDash:i.borderDash,borderDashOffset:i.borderDashOffset,borderJoinStyle:i.borderJoinStyle,borderWidth:i.borderWidth,borderColor:i.borderColor}}function QCe(i,t){if(!t)return!1;let e=[],n=function(r,s){return nF(s)?(e.includes(s)||e.push(s),e.indexOf(s)):s};return JSON.stringify(i,n)!==JSON.stringify(t,n)}function r1(i,t,e){return i.options.clip?i[e]:t[e]}function XCe(i,t){let{xScale:e,yScale:n}=i;return e&&n?{left:r1(e,t,"left"),right:r1(e,t,"right"),top:r1(n,t,"top"),bottom:r1(n,t,"bottom")}:t}function bF(i,t){let e=t._clip;if(e.disabled)return!1;let n=XCe(t,i.chartArea);return{left:e.left===!1?0:n.left-(e.left===!0?0:e.left),right:e.right===!1?i.width:n.right+(e.right===!0?0:e.right),top:e.top===!1?0:n.top-(e.top===!0?0:e.top),bottom:e.bottom===!1?i.height:n.bottom+(e.bottom===!0?0:e.bottom)}}var DF=class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,r){let s=e.listeners[r],o=e.duration;s.forEach(a=>a({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=J2.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(t=Date.now()){let e=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;let s=n.items,o=s.length-1,a=!1,l;for(;o>=0;--o)l=s[o],l._active?(l._total>n.duration&&(n.duration=l._total),l.tick(t),a=!0):(s[o]=s[s.length-1],s.pop());a&&(r.draw(),this._notify(r,n,t,"progress")),s.length||(n.running=!1,this._notify(r,n,t,"complete"),n.initial=!1),e+=s.length}),this._lastDate=t,e===0&&(this._running=!1)}_getAnims(t){let e=this._charts,n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){!e||!e.length||this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){let e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(t){if(!this._running)return!1;let e=this._charts.get(t);return!(!e||!e.running||!e.items.length)}stop(t){let e=this._charts.get(t);if(!e||!e.items.length)return;let n=e.items,r=n.length-1;for(;r>=0;--r)n[r].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}},Fa=new DF,PG="transparent",ZCe={boolean(i,t,e){return e>.5?t:i},color(i,t,e){let n=rF(i||PG),r=n.valid&&rF(t||PG);return r&&r.valid?r.mix(n,e).hexString():t},number(i,t,e){return i+(t-i)*e}},MF=class{constructor(t,e,n,r){let s=e[n];r=Df([t.to,r,s,t.from]);let o=Df([t.from,s,r]);this._active=!0,this._fn=t.fn||ZCe[t.type||typeof o],this._easing=yf[t.easing]||yf.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);let r=this._target[this._prop],s=n-this._start,o=this._duration-s;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=s,this._loop=!!t.loop,this._to=Df([t.to,e,r,t.from]),this._from=Df([t.from,r,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){let e=t-this._start,n=this._duration,r=this._prop,s=this._from,o=this._loop,a=this._to,l;if(this._active=s!==a&&(o||e<n),!this._active){this._target[r]=a,this._notify(!0);return}if(e<0){this._target[r]=s;return}l=e/n%2,l=o&&l>1?2-l:l,l=this._easing(Math.min(1,Math.max(0,l))),this._target[r]=this._fn(s,a,l)}wait(){let t=this._promises||(this._promises=[]);return new Promise((e,n)=>{t.push({res:e,rej:n})})}_notify(t){let e=t?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][e]()}},I1=class{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!pt(t))return;let e=Object.keys($t.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach(r=>{let s=t[r];if(!pt(s))return;let o={};for(let a of e)o[a]=s[a];(ei(s.properties)&&s.properties||[r]).forEach(a=>{(a===r||!n.has(a))&&n.set(a,o)})})}_animateOptions(t,e){let n=e.options,r=e1e(t,n);if(!r)return[];let s=this._createAnimations(r,n);return n.$shared&&JCe(t.options.$animations,n).then(()=>{t.options=n},()=>{}),s}_createAnimations(t,e){let n=this._properties,r=[],s=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now(),l;for(l=o.length-1;l>=0;--l){let c=o[l];if(c.charAt(0)==="$")continue;if(c==="options"){r.push(...this._animateOptions(t,e));continue}let d=e[c],u=s[c],h=n.get(c);if(u)if(h&&u.active()){u.update(h,d,a);continue}else u.cancel();if(!h||!h.duration){t[c]=d;continue}s[c]=u=new MF(h,t,c,d),r.push(u)}return r}update(t,e){if(this._properties.size===0){Object.assign(t,e);return}let n=this._createAnimations(t,e);if(n.length)return Fa.add(this._chart,n),!0}};function JCe(i,t){let e=[],n=Object.keys(t);for(let r=0;r<n.length;r++){let s=i[n[r]];s&&s.active()&&e.push(s.wait())}return Promise.all(e)}function e1e(i,t){if(!t)return;let e=i.options;if(!e){i.options=t;return}return e.$shared&&(i.options=e=Object.assign({},e,{$shared:!1,$animations:{}})),e}function RG(i,t){let e=i&&i.options||{},n=e.reverse,r=e.min===void 0?t:0,s=e.max===void 0?t:0;return{start:n?s:r,end:n?r:s}}function t1e(i,t,e){if(e===!1)return!1;let n=RG(i,e),r=RG(t,e);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function i1e(i){let t,e,n,r;return pt(i)?(t=i.top,e=i.right,n=i.bottom,r=i.left):t=e=n=r=i,{top:t,right:e,bottom:n,left:r,disabled:i===!1}}function P$(i,t){let e=[],n=i._getSortedDatasetMetas(t),r,s;for(r=0,s=n.length;r<s;++r)e.push(n[r].index);return e}function FG(i,t,e,n={}){let r=i.keys,s=n.mode==="single",o,a,l,c;if(t===null)return;let d=!1;for(o=0,a=r.length;o<a;++o){if(l=+r[o],l===e){if(d=!0,n.all)continue;break}c=i.values[l],ki(c)&&(s||t===0||Ys(t)===Ys(c))&&(t+=c)}return!d&&!n.all?0:t}function n1e(i,t){let{iScale:e,vScale:n}=t,r=e.axis==="x"?"x":"y",s=n.axis==="x"?"x":"y",o=Object.keys(i),a=new Array(o.length),l,c,d;for(l=0,c=o.length;l<c;++l)d=o[l],a[l]={[r]:d,[s]:i[d]};return a}function vF(i,t){let e=i&&i.options.stacked;return e||e===void 0&&t.stack!==void 0}function r1e(i,t,e){return`${i.id}.${t.id}.${e.stack||e.type}`}function s1e(i){let{min:t,max:e,minDefined:n,maxDefined:r}=i.getUserBounds();return{min:n?t:Number.NEGATIVE_INFINITY,max:r?e:Number.POSITIVE_INFINITY}}function o1e(i,t,e){let n=i[t]||(i[t]={});return n[e]||(n[e]={})}function NG(i,t,e,n){for(let r of t.getMatchingVisibleMetas(n).reverse()){let s=i[r.index];if(e&&s>0||!e&&s<0)return r.index}return null}function LG(i,t){let{chart:e,_cachedMeta:n}=i,r=e._stacks||(e._stacks={}),{iScale:s,vScale:o,index:a}=n,l=s.axis,c=o.axis,d=r1e(s,o,n),u=t.length,h;for(let m=0;m<u;++m){let _=t[m],{[l]:b,[c]:v}=_,I=_._stacks||(_._stacks={});h=I[c]=o1e(r,d,b),h[a]=v,h._top=NG(h,o,!0,n.type),h._bottom=NG(h,o,!1,n.type);let A=h._visualValues||(h._visualValues={});A[a]=v}}function yF(i,t){let e=i.scales;return Object.keys(e).filter(n=>e[n].axis===t).shift()}function a1e(i,t){return Ra(i,{active:!1,dataset:void 0,datasetIndex:t,index:t,mode:"default",type:"dataset"})}function l1e(i,t,e){return Ra(i,{active:!1,dataIndex:t,parsed:void 0,raw:void 0,element:e,index:t,mode:"default",type:"data"})}function _b(i,t){let e=i.controller.index,n=i.vScale&&i.vScale.axis;if(n){t=t||i._parsed;for(let r of t){let s=r._stacks;if(!s||s[n]===void 0||s[n][e]===void 0)return;delete s[n][e],s[n]._visualValues!==void 0&&s[n]._visualValues[e]!==void 0&&delete s[n]._visualValues[e]}}}var xF=i=>i==="reset"||i==="none",BG=(i,t)=>t?i:Object.assign({},i),c1e=(i,t,e)=>i&&!t.hidden&&t._stacked&&{keys:P$(e,!0),values:null},Dc=(()=>{class i{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(e,n){this.chart=e,this._ctx=e.ctx,this.index=n,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){let e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=vF(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&_b(this._cachedMeta),this.index=e}linkScales(){let e=this.chart,n=this._cachedMeta,r=this.getDataset(),s=(h,m,_,b)=>h==="x"?m:h==="r"?b:_,o=n.xAxisID=Xe(r.xAxisID,yF(e,"x")),a=n.yAxisID=Xe(r.yAxisID,yF(e,"y")),l=n.rAxisID=Xe(r.rAxisID,yF(e,"r")),c=n.indexAxis,d=n.iAxisID=s(c,o,a,l),u=n.vAxisID=s(c,a,o,l);n.xScale=this.getScaleForId(o),n.yScale=this.getScaleForId(a),n.rScale=this.getScaleForId(l),n.iScale=this.getScaleForId(d),n.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){let n=this._cachedMeta;return e===n.iScale?n.vScale:n.iScale}reset(){this._update("reset")}_destroy(){let e=this._cachedMeta;this._data&&X2(this._data,this),e._stacked&&_b(e)}_dataCheck(){let e=this.getDataset(),n=e.data||(e.data=[]),r=this._data;if(pt(n)){let s=this._cachedMeta;this._data=n1e(n,s)}else if(r!==n){if(r){X2(r,this);let s=this._cachedMeta;_b(s),s._parsed=[]}n&&Object.isExtensible(n)&&fG(n,this),this._syncList=[],this._data=n}}addElements(){let e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){let n=this._cachedMeta,r=this.getDataset(),s=!1;this._dataCheck();let o=n._stacked;n._stacked=vF(n.vScale,n),n.stack!==r.stack&&(s=!0,_b(n),n.stack=r.stack),this._resyncElements(e),(s||o!==n._stacked)&&(LG(this,n._parsed),n._stacked=vF(n.vScale,n))}configure(){let e=this.chart.config,n=e.datasetScopeKeys(this._type),r=e.getOptionScopes(this.getDataset(),n,!0);this.options=e.createResolver(r,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,n){let{_cachedMeta:r,_data:s}=this,{iScale:o,_stacked:a}=r,l=o.axis,c=e===0&&n===s.length?!0:r._sorted,d=e>0&&r._parsed[e-1],u,h,m;if(this._parsing===!1)r._parsed=s,r._sorted=!0,m=s;else{ei(s[e])?m=this.parseArrayData(r,s,e,n):pt(s[e])?m=this.parseObjectData(r,s,e,n):m=this.parsePrimitiveData(r,s,e,n);let _=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<n;++u)r._parsed[u+e]=h=m[u],c&&(_()&&(c=!1),d=h);r._sorted=c}a&&LG(this,m)}parsePrimitiveData(e,n,r,s){let{iScale:o,vScale:a}=e,l=o.axis,c=a.axis,d=o.getLabels(),u=o===a,h=new Array(s),m,_,b;for(m=0,_=s;m<_;++m)b=m+r,h[m]={[l]:u||o.parse(d[b],b),[c]:a.parse(n[b],b)};return h}parseArrayData(e,n,r,s){let{xScale:o,yScale:a}=e,l=new Array(s),c,d,u,h;for(c=0,d=s;c<d;++c)u=c+r,h=n[u],l[c]={x:o.parse(h[0],u),y:a.parse(h[1],u)};return l}parseObjectData(e,n,r,s){let{xScale:o,yScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(s),u,h,m,_;for(u=0,h=s;u<h;++u)m=u+r,_=n[m],d[u]={x:o.parse(Pa(_,l),m),y:a.parse(Pa(_,c),m)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,n,r){let s=this.chart,o=this._cachedMeta,a=n[e.axis],l={keys:P$(s,!0),values:n._stacks[e.axis]._visualValues};return FG(l,a,o.index,{mode:r})}updateRangeFromParsed(e,n,r,s){let o=r[n.axis],a=o===null?NaN:o,l=s&&r._stacks[n.axis];s&&l&&(s.values=l,a=FG(s,o,this._cachedMeta.index)),e.min=Math.min(e.min,a),e.max=Math.max(e.max,a)}getMinMax(e,n){let r=this._cachedMeta,s=r._parsed,o=r._sorted&&e===r.iScale,a=s.length,l=this._getOtherScale(e),c=c1e(n,r,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=s1e(l),m,_;function b(){_=s[m];let v=_[l.axis];return!ki(_[e.axis])||u>v||h<v}for(m=0;m<a&&!(!b()&&(this.updateRangeFromParsed(d,e,_,c),o));++m);if(o){for(m=a-1;m>=0;--m)if(!b()){this.updateRangeFromParsed(d,e,_,c);break}}return d}getAllParsedValues(e){let n=this._cachedMeta._parsed,r=[],s,o,a;for(s=0,o=n.length;s<o;++s)a=n[s][e.axis],ki(a)&&r.push(a);return r}getMaxOverflow(){return!1}getLabelAndValue(e){let n=this._cachedMeta,r=n.iScale,s=n.vScale,o=this.getParsed(e);return{label:r?""+r.getLabelForValue(o[r.axis]):"",value:s?""+s.getLabelForValue(o[s.axis]):""}}_update(e){let n=this._cachedMeta;this.update(e||"default"),n._clip=i1e(Xe(this.options.clip,t1e(n.xScale,n.yScale,this.getMaxOverflow())))}update(e){}draw(){let e=this._ctx,n=this.chart,r=this._cachedMeta,s=r.data||[],o=n.chartArea,a=[],l=this._drawStart||0,c=this._drawCount||s.length-l,d=this.options.drawActiveElementsOnTop,u;for(r.dataset&&r.dataset.draw(e,o,l,c),u=l;u<l+c;++u){let h=s[u];h.hidden||(h.active&&d?a.push(h):h.draw(e,o))}for(u=0;u<a.length;++u)a[u].draw(e,o)}getStyle(e,n){let r=n?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(r):this.resolveDataElementOptions(e||0,r)}getContext(e,n,r){let s=this.getDataset(),o;if(e>=0&&e<this._cachedMeta.data.length){let a=this._cachedMeta.data[e];o=a.$context||(a.$context=l1e(this.getContext(),e,a)),o.parsed=this.getParsed(e),o.raw=s.data[e],o.index=o.dataIndex=e}else o=this.$context||(this.$context=a1e(this.chart.getContext(),this.index)),o.dataset=s,o.index=o.datasetIndex=this.index;return o.active=!!n,o.mode=r,o}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,n){return this._resolveElementOptions(this.dataElementType.id,n,e)}_resolveElementOptions(e,n="default",r){let s=n==="active",o=this._cachedDataOpts,a=e+"-"+n,l=o[a],c=this.enableOptionSharing&&Sf(r);if(l)return BG(l,c);let d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=s?[`${e}Hover`,"hover",e,""]:[e,""],m=d.getOptionScopes(this.getDataset(),u),_=Object.keys($t.elements[e]),b=()=>this.getContext(r,s,n),v=d.resolveNamedOptions(m,_,b,h);return v.$shared&&(v.$shared=c,o[a]=Object.freeze(BG(v,c))),v}_resolveAnimations(e,n,r){let s=this.chart,o=this._cachedDataOpts,a=`animation-${n}`,l=o[a];if(l)return l;let c;if(s.options.animation!==!1){let u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,n),m=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(m,this.getContext(e,r,n))}let d=new I1(s,c&&c.animations);return c&&c._cacheable&&(o[a]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,n){return!n||xF(e)||this.chart._animationsDisabled}_getSharedOptions(e,n){let r=this.resolveDataElementOptions(e,n),s=this._sharedOptions,o=this.getSharedOptions(r),a=this.includeOptions(n,o)||o!==s;return this.updateSharedOptions(o,n,r),{sharedOptions:o,includeOptions:a}}updateElement(e,n,r,s){xF(s)?Object.assign(e,r):this._resolveAnimations(n,s).update(e,r)}updateSharedOptions(e,n,r){e&&!xF(n)&&this._resolveAnimations(void 0,n).update(e,r)}_setStyle(e,n,r,s){e.active=s;let o=this.getStyle(n,s);this._resolveAnimations(n,r,s).update(e,{options:!s&&this.getSharedOptions(o)||o})}removeHoverStyle(e,n,r){this._setStyle(e,r,"active",!1)}setHoverStyle(e,n,r){this._setStyle(e,r,"active",!0)}_removeDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){let e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){let n=this._data,r=this._cachedMeta.data;for(let[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];let s=r.length,o=n.length,a=Math.min(o,s);a&&this.parse(0,a),o>s?this._insertElements(s,o-s,e):o<s&&this._removeElements(o,s-o)}_insertElements(e,n,r=!0){let s=this._cachedMeta,o=s.data,a=e+n,l,c=d=>{for(d.length+=n,l=d.length-1;l>=a;l--)d[l]=d[l-n]};for(c(o),l=e;l<a;++l)o[l]=new this.dataElementType;this._parsing&&c(s._parsed),this.parse(e,n),r&&this.updateElements(o,e,n,"reset")}updateElements(e,n,r,s){}_removeElements(e,n){let r=this._cachedMeta;if(this._parsing){let s=r._parsed.splice(e,n);r._stacked&&_b(r,s)}r.data.splice(e,n)}_sync(e){if(this._parsing)this._syncList.push(e);else{let[n,r,s]=e;this[n](r,s)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){let e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,n){n&&this._sync(["_removeElements",e,n]);let r=arguments.length-2;r&&this._sync(["_insertElements",e,r])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}return i})();function d1e(i,t){if(!i._cache.$bar){let e=i.getMatchingVisibleMetas(t),n=[];for(let r=0,s=e.length;r<s;r++)n=n.concat(e[r].controller.getAllParsedValues(i));i._cache.$bar=Z2(n.sort((r,s)=>r-s))}return i._cache.$bar}function u1e(i){let t=i.iScale,e=d1e(t,i.type),n=t._length,r,s,o,a,l=()=>{o===32767||o===-32768||(Sf(a)&&(n=Math.min(n,Math.abs(o-a)||n)),a=o)};for(r=0,s=e.length;r<s;++r)o=t.getPixelForValue(e[r]),l();for(a=void 0,r=0,s=t.ticks.length;r<s;++r)o=t.getPixelForTick(r),l();return n}function h1e(i,t,e,n){let r=e.barThickness,s,o;return ut(r)?(s=t.min*e.categoryPercentage,o=e.barPercentage):(s=r*n,o=1),{chunk:s/n,ratio:o,start:t.pixels[i]-s/2}}function m1e(i,t,e,n){let r=t.pixels,s=r[i],o=i>0?r[i-1]:null,a=i<r.length-1?r[i+1]:null,l=e.categoryPercentage;o===null&&(o=s-(a===null?t.end-t.start:a-s)),a===null&&(a=s+s-o);let c=s-(s-Math.min(o,a))/2*l;return{chunk:Math.abs(a-o)/2*l/n,ratio:e.barPercentage,start:c}}function f1e(i,t,e,n){let r=e.parse(i[0],n),s=e.parse(i[1],n),o=Math.min(r,s),a=Math.max(r,s),l=o,c=a;Math.abs(o)>Math.abs(a)&&(l=a,c=o),t[e.axis]=c,t._custom={barStart:l,barEnd:c,start:r,end:s,min:o,max:a}}function R$(i,t,e,n){return ei(i)?f1e(i,t,e,n):t[e.axis]=e.parse(i,n),t}function VG(i,t,e,n){let r=i.iScale,s=i.vScale,o=r.getLabels(),a=r===s,l=[],c,d,u,h;for(c=e,d=e+n;c<d;++c)h=t[c],u={},u[r.axis]=a||r.parse(o[c],c),l.push(R$(h,u,s,c));return l}function wF(i){return i&&i.barStart!==void 0&&i.barEnd!==void 0}function p1e(i,t,e){return i!==0?Ys(i):(t.isHorizontal()?1:-1)*(t.min>=e?1:-1)}function g1e(i){let t,e,n,r,s;return i.horizontal?(t=i.base>i.x,e="left",n="right"):(t=i.base<i.y,e="bottom",n="top"),t?(r="end",s="start"):(r="start",s="end"),{start:e,end:n,reverse:t,top:r,bottom:s}}function _1e(i,t,e,n){let r=t.borderSkipped,s={};if(!r){i.borderSkipped=s;return}if(r===!0){i.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}let{start:o,end:a,reverse:l,top:c,bottom:d}=g1e(i);r==="middle"&&e&&(i.enableBorderRadius=!0,(e._top||0)===n?r=c:(e._bottom||0)===n?r=d:(s[zG(d,o,a,l)]=!0,r=c)),s[zG(r,o,a,l)]=!0,i.borderSkipped=s}function zG(i,t,e,n){return n?(i=b1e(i,t,e),i=jG(i,e,t)):i=jG(i,t,e),i}function b1e(i,t,e){return i===t?e:i===e?t:i}function jG(i,t,e){return i==="start"?t:i==="end"?e:i}function v1e(i,{inflateAmount:t},e){i.inflateAmount=t==="auto"?e===1?.33:0:t}var y1e=(()=>{class i extends Dc{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(e,n,r,s){return VG(e,n,r,s)}parseArrayData(e,n,r,s){return VG(e,n,r,s)}parseObjectData(e,n,r,s){let{iScale:o,vScale:a}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=o.axis==="x"?l:c,u=a.axis==="x"?l:c,h=[],m,_,b,v;for(m=r,_=r+s;m<_;++m)v=n[m],b={},b[o.axis]=o.parse(Pa(v,d),m),h.push(R$(Pa(v,u),b,a,m));return h}updateRangeFromParsed(e,n,r,s){super.updateRangeFromParsed(e,n,r,s);let o=r._custom;o&&n===this._cachedMeta.vScale&&(e.min=Math.min(e.min,o.min),e.max=Math.max(e.max,o.max))}getMaxOverflow(){return 0}getLabelAndValue(e){let n=this._cachedMeta,{iScale:r,vScale:s}=n,o=this.getParsed(e),a=o._custom,l=wF(a)?"["+a.start+", "+a.end+"]":""+s.getLabelForValue(o[s.axis]);return{label:""+r.getLabelForValue(o[r.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();let e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){let n=this._cachedMeta;this.updateElements(n.data,0,n.data.length,e)}updateElements(e,n,r,s){let o=s==="reset",{index:a,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:m}=this._getSharedOptions(n,s);for(let _=n;_<n+r;_++){let b=this.getParsed(_),v=o||ut(b[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(_),I=this._calculateBarIndexPixels(_,u),A=(b._stacks||{})[l.axis],F={horizontal:d,base:v.base,enableBorderRadius:!A||wF(b._custom)||a===A._top||a===A._bottom,x:d?v.head:I.center,y:d?I.center:v.head,height:d?I.size:Math.abs(v.size),width:d?Math.abs(v.size):I.size};m&&(F.options=h||this.resolveDataElementOptions(_,e[_].active?"active":s));let M=F.options||e[_].options;_1e(F,M,A,a),v1e(F,M,u.ratio),this.updateElement(e[_],_,F,s)}}_getStacks(e,n){let{iScale:r}=this._cachedMeta,s=r.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),o=r.options.stacked,a=[],l=this._cachedMeta.controller.getParsed(n),c=l&&l[r.axis],d=u=>{let h=u._parsed.find(_=>_[r.axis]===c),m=h&&h[u.vScale.axis];if(ut(m)||isNaN(m))return!0};for(let u of s)if(!(n!==void 0&&d(u))&&((o===!1||a.indexOf(u.stack)===-1||o===void 0&&u.stack===void 0)&&a.push(u.stack),u.index===e))break;return a.length||a.push(void 0),a}_getStackCount(e){return this._getStacks(void 0,e).length}_getStackIndex(e,n,r){let s=this._getStacks(e,r),o=n!==void 0?s.indexOf(n):-1;return o===-1?s.length-1:o}_getRuler(){let e=this.options,n=this._cachedMeta,r=n.iScale,s=[],o,a;for(o=0,a=n.data.length;o<a;++o)s.push(r.getPixelForValue(this.getParsed(o)[r.axis],o));let l=e.barThickness;return{min:l||u1e(n),pixels:s,start:r._startPixel,end:r._endPixel,stackCount:this._getStackCount(),scale:r,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){let{_cachedMeta:{vScale:n,_stacked:r,index:s},options:{base:o,minBarLength:a}}=this,l=o||0,c=this.getParsed(e),d=c._custom,u=wF(d),h=c[n.axis],m=0,_=r?this.applyStack(n,c,r):h,b,v;_!==h&&(m=_-h,_=h),u&&(h=d.barStart,_=d.barEnd-d.barStart,h!==0&&Ys(h)!==Ys(d.barEnd)&&(m=0),m+=h);let I=!ut(o)&&!u?o:m,A=n.getPixelForValue(I);if(this.chart.getDataVisibility(e)?b=n.getPixelForValue(m+_):b=A,v=b-A,Math.abs(v)<a){v=p1e(v,n,l)*a,h===l&&(A-=v/2);let F=n.getPixelForDecimal(0),M=n.getPixelForDecimal(1),L=Math.min(F,M),U=Math.max(F,M);A=Math.max(Math.min(A,U),L),b=A+v,r&&!u&&(c._stacks[n.axis]._visualValues[s]=n.getValueForPixel(b)-n.getValueForPixel(A))}if(A===n.getPixelForValue(l)){let F=Ys(v)*n.getLineWidthForValue(l)/2;A+=F,v-=F}return{size:v,base:A,head:b,center:b+v/2}}_calculateBarIndexPixels(e,n){let r=n.scale,s=this.options,o=s.skipNull,a=Xe(s.maxBarThickness,1/0),l,c;if(n.grouped){let d=o?this._getStackCount(e):n.stackCount,u=s.barThickness==="flex"?m1e(e,n,s,d):h1e(e,n,s,d),h=this._getStackIndex(this.index,this._cachedMeta.stack,o?e:void 0);l=u.start+u.chunk*h+u.chunk/2,c=Math.min(a,u.chunk*u.ratio)}else l=r.getPixelForValue(this.getParsed(e)[r.axis],e),c=Math.min(a,n.min*n.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){let e=this._cachedMeta,n=e.vScale,r=e.data,s=r.length,o=0;for(;o<s;++o)this.getParsed(o)[n.axis]!==null&&!r[o].hidden&&r[o].draw(this._ctx)}}return i})(),x1e=(()=>{class i extends Dc{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(e,n,r,s){let o=super.parsePrimitiveData(e,n,r,s);for(let a=0;a<o.length;a++)o[a]._custom=this.resolveDataElementOptions(a+r).radius;return o}parseArrayData(e,n,r,s){let o=super.parseArrayData(e,n,r,s);for(let a=0;a<o.length;a++){let l=n[r+a];o[a]._custom=Xe(l[2],this.resolveDataElementOptions(a+r).radius)}return o}parseObjectData(e,n,r,s){let o=super.parseObjectData(e,n,r,s);for(let a=0;a<o.length;a++){let l=n[r+a];o[a]._custom=Xe(l&&l.r&&+l.r,this.resolveDataElementOptions(a+r).radius)}return o}getMaxOverflow(){let e=this._cachedMeta.data,n=0;for(let r=e.length-1;r>=0;--r)n=Math.max(n,e[r].size(this.resolveDataElementOptions(r))/2);return n>0&&n}getLabelAndValue(e){let n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=n,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y),d=a._custom;return{label:r[e]||"",value:"("+l+", "+c+(d?", "+d:"")+")"}}update(e){let n=this._cachedMeta.data;this.updateElements(n,0,n.length,e)}updateElements(e,n,r,s){let o=s==="reset",{iScale:a,vScale:l}=this._cachedMeta,{sharedOptions:c,includeOptions:d}=this._getSharedOptions(n,s),u=a.axis,h=l.axis;for(let m=n;m<n+r;m++){let _=e[m],b=!o&&this.getParsed(m),v={},I=v[u]=o?a.getPixelForDecimal(.5):a.getPixelForValue(b[u]),A=v[h]=o?l.getBasePixel():l.getPixelForValue(b[h]);v.skip=isNaN(I)||isNaN(A),d&&(v.options=c||this.resolveDataElementOptions(m,_.active?"active":s),o&&(v.options.radius=0)),this.updateElement(_,m,v,s)}}resolveDataElementOptions(e,n){let r=this.getParsed(e),s=super.resolveDataElementOptions(e,n);s.$shared&&(s=Object.assign({},s,{$shared:!1}));let o=s.radius;return n!=="active"&&(s.radius=0),s.radius+=Xe(r&&r._custom,o),s}}return i})();function w1e(i,t,e){let n=1,r=1,s=0,o=0;if(t<ii){let a=i,l=a+t,c=Math.cos(a),d=Math.sin(a),u=Math.cos(l),h=Math.sin(l),m=(F,M,L)=>Ef(F,a,l,!0)?1:Math.max(M,M*e,L,L*e),_=(F,M,L)=>Ef(F,a,l,!0)?-1:Math.min(M,M*e,L,L*e),b=m(0,c,u),v=m(Oi,d,h),I=_(ti,c,u),A=_(ti+Oi,d,h);n=(b-I)/2,r=(v-A)/2,s=-(b+I)/2,o=-(v+A)/2}return{ratioX:n,ratioY:r,offsetX:s,offsetY:o}}var QF=(()=>{class i extends Dc{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:e=>e!=="spacing",_indexable:e=>e!=="spacing"&&!e.startsWith("borderDash")&&!e.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let n=e.data;if(n.labels.length&&n.datasets.length){let{labels:{pointStyle:r,color:s}}=e.legend.options;return n.labels.map((o,a)=>{let c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}}};constructor(e,n){super(e,n),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(e,n){let r=this.getDataset().data,s=this._cachedMeta;if(this._parsing===!1)s._parsed=r;else{let o=c=>+r[c];if(pt(r[e])){let{key:c="value"}=this._parsing;o=d=>+Pa(r[d],c)}let a,l;for(a=e,l=e+n;a<l;++a)s._parsed[a]=o(a)}}_getRotation(){return xs(this.options.rotation-90)}_getCircumference(){return xs(this.options.circumference)}_getRotationExtents(){let e=ii,n=-ii;for(let r=0;r<this.chart.data.datasets.length;++r)if(this.chart.isDatasetVisible(r)&&this.chart.getDatasetMeta(r).type===this._type){let s=this.chart.getDatasetMeta(r).controller,o=s._getRotation(),a=s._getCircumference();e=Math.min(e,o),n=Math.max(n,o+a)}return{rotation:e,circumference:n-e}}update(e){let n=this.chart,{chartArea:r}=n,s=this._cachedMeta,o=s.data,a=this.getMaxBorderWidth()+this.getMaxOffset(o)+this.options.spacing,l=Math.max((Math.min(r.width,r.height)-a)/2,0),c=Math.min(sG(this.options.cutout,l),1),d=this._getRingWeight(this.index),{circumference:u,rotation:h}=this._getRotationExtents(),{ratioX:m,ratioY:_,offsetX:b,offsetY:v}=w1e(h,u,c),I=(r.width-a)/m,A=(r.height-a)/_,F=Math.max(Math.min(I,A)/2,0),M=W2(this.options.radius,F),L=Math.max(M*c,0),U=(M-L)/this._getVisibleDatasetWeightTotal();this.offsetX=b*M,this.offsetY=v*M,s.total=this.calculateTotal(),this.outerRadius=M-U*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-U*d,0),this.updateElements(o,0,o.length,e)}_circumference(e,n){let r=this.options,s=this._cachedMeta,o=this._getCircumference();return n&&r.animation.animateRotate||!this.chart.getDataVisibility(e)||s._parsed[e]===null||s.data[e].hidden?0:this.calculateCircumference(s._parsed[e]*o/ii)}updateElements(e,n,r,s){let o=s==="reset",a=this.chart,l=a.chartArea,d=a.options.animation,u=(l.left+l.right)/2,h=(l.top+l.bottom)/2,m=o&&d.animateScale,_=m?0:this.innerRadius,b=m?0:this.outerRadius,{sharedOptions:v,includeOptions:I}=this._getSharedOptions(n,s),A=this._getRotation(),F;for(F=0;F<n;++F)A+=this._circumference(F,o);for(F=n;F<n+r;++F){let M=this._circumference(F,o),L=e[F],U={x:u+this.offsetX,y:h+this.offsetY,startAngle:A,endAngle:A+M,circumference:M,outerRadius:b,innerRadius:_};I&&(U.options=v||this.resolveDataElementOptions(F,L.active?"active":s)),A+=M,this.updateElement(L,F,U,s)}}calculateTotal(){let e=this._cachedMeta,n=e.data,r=0,s;for(s=0;s<n.length;s++){let o=e._parsed[s];o!==null&&!isNaN(o)&&this.chart.getDataVisibility(s)&&!n[s].hidden&&(r+=Math.abs(o))}return r}calculateCircumference(e){let n=this._cachedMeta.total;return n>0&&!isNaN(e)?ii*(Math.abs(e)/n):0}getLabelAndValue(e){let n=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=Tf(n._parsed[e],r.options.locale);return{label:s[e]||"",value:o}}getMaxBorderWidth(e){let n=0,r=this.chart,s,o,a,l,c;if(!e){for(s=0,o=r.data.datasets.length;s<o;++s)if(r.isDatasetVisible(s)){a=r.getDatasetMeta(s),e=a.data,l=a.controller;break}}if(!e)return 0;for(s=0,o=e.length;s<o;++s)c=l.resolveDataElementOptions(s),c.borderAlign!=="inner"&&(n=Math.max(n,c.borderWidth||0,c.hoverBorderWidth||0));return n}getMaxOffset(e){let n=0;for(let r=0,s=e.length;r<s;++r){let o=this.resolveDataElementOptions(r);n=Math.max(n,o.offset||0,o.hoverOffset||0)}return n}_getRingWeightOffset(e){let n=0;for(let r=0;r<e;++r)this.chart.isDatasetVisible(r)&&(n+=this._getRingWeight(r));return n}_getRingWeight(e){return Math.max(Xe(this.chart.data.datasets[e].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}return i})(),C1e=(()=>{class i extends Dc{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){let n=this._cachedMeta,{dataset:r,data:s=[],_dataset:o}=n,a=this.chart._animationsDisabled,{start:l,count:c}=tF(n,s,a);this._drawStart=l,this._drawCount=c,iF(n)&&(l=0,c=s.length),r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=s;let d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(r,void 0,{animated:!a,options:d},e),this.updateElements(s,l,c,e)}updateElements(e,n,r,s){let o=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(n,s),m=a.axis,_=l.axis,{spanGaps:b,segment:v}=this.options,I=gu(b)?b:Number.POSITIVE_INFINITY,A=this.chart._animationsDisabled||o||s==="none",F=n+r,M=e.length,L=n>0&&this.getParsed(n-1);for(let U=0;U<M;++U){let T=e[U],C=A?T:{};if(U<n||U>=F){C.skip=!0;continue}let E=this.getParsed(U),D=ut(E[_]),S=C[m]=a.getPixelForValue(E[m],U),R=C[_]=o||D?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,E,c):E[_],U);C.skip=isNaN(S)||isNaN(R)||D,C.stop=U>0&&Math.abs(E[m]-L[m])>I,v&&(C.parsed=E,C.raw=d.data[U]),h&&(C.options=u||this.resolveDataElementOptions(U,T.active?"active":s)),A||this.updateElement(T,U,C,s),L=E}}getMaxOverflow(){let e=this._cachedMeta,n=e.dataset,r=n.options&&n.options.borderWidth||0,s=e.data||[];if(!s.length)return r;let o=s[0].size(this.resolveDataElementOptions(0)),a=s[s.length-1].size(this.resolveDataElementOptions(s.length-1));return Math.max(r,o,a)/2}draw(){let e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}return i})(),F$=(()=>{class i extends Dc{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(e){let n=e.data;if(n.labels.length&&n.datasets.length){let{labels:{pointStyle:r,color:s}}=e.legend.options;return n.labels.map((o,a)=>{let c=e.getDatasetMeta(0).controller.getStyle(a);return{text:o,fillStyle:c.backgroundColor,strokeStyle:c.borderColor,fontColor:s,lineWidth:c.borderWidth,pointStyle:r,hidden:!e.getDataVisibility(a),index:a}})}return[]}},onClick(e,n,r){r.chart.toggleDataVisibility(n.index),r.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(e,n){super(e,n),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(e){let n=this._cachedMeta,r=this.chart,s=r.data.labels||[],o=Tf(n._parsed[e].r,r.options.locale);return{label:s[e]||"",value:o}}parseObjectData(e,n,r,s){return uF.bind(this)(e,n,r,s)}update(e){let n=this._cachedMeta.data;this._updateRadius(),this.updateElements(n,0,n.length,e)}getMinMax(){let e=this._cachedMeta,n={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return e.data.forEach((r,s)=>{let o=this.getParsed(s).r;!isNaN(o)&&this.chart.getDataVisibility(s)&&(o<n.min&&(n.min=o),o>n.max&&(n.max=o))}),n}_updateRadius(){let e=this.chart,n=e.chartArea,r=e.options,s=Math.min(n.right-n.left,n.bottom-n.top),o=Math.max(s/2,0),a=Math.max(r.cutoutPercentage?o/100*r.cutoutPercentage:1,0),l=(o-a)/e.getVisibleDatasetCount();this.outerRadius=o-l*this.index,this.innerRadius=this.outerRadius-l}updateElements(e,n,r,s){let o=s==="reset",a=this.chart,c=a.options.animation,d=this._cachedMeta.rScale,u=d.xCenter,h=d.yCenter,m=d.getIndexAngle(0)-.5*ti,_=m,b,v=360/this.countVisibleElements();for(b=0;b<n;++b)_+=this._computeAngle(b,s,v);for(b=n;b<n+r;b++){let I=e[b],A=_,F=_+this._computeAngle(b,s,v),M=a.getDataVisibility(b)?d.getDistanceFromCenterForValue(this.getParsed(b).r):0;_=F,o&&(c.animateScale&&(M=0),c.animateRotate&&(A=F=m));let L={x:u,y:h,innerRadius:0,outerRadius:M,startAngle:A,endAngle:F,options:this.resolveDataElementOptions(b,I.active?"active":s)};this.updateElement(I,b,L,s)}}countVisibleElements(){let e=this._cachedMeta,n=0;return e.data.forEach((r,s)=>{!isNaN(this.getParsed(s).r)&&this.chart.getDataVisibility(s)&&n++}),n}_computeAngle(e,n,r){return this.chart.getDataVisibility(e)?xs(this.resolveDataElementOptions(e,n).angle||r):0}}return i})(),S1e=(()=>{class i extends QF{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}}return i})(),k1e=(()=>{class i extends Dc{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(e){let n=this._cachedMeta.vScale,r=this.getParsed(e);return{label:n.getLabels()[e],value:""+n.getLabelForValue(r[n.axis])}}parseObjectData(e,n,r,s){return uF.bind(this)(e,n,r,s)}update(e){let n=this._cachedMeta,r=n.dataset,s=n.data||[],o=n.iScale.getLabels();if(r.points=s,e!=="resize"){let a=this.resolveDatasetElementOptions(e);this.options.showLine||(a.borderWidth=0);let l={_loop:!0,_fullLoop:o.length===s.length,options:a};this.updateElement(r,void 0,l,e)}this.updateElements(s,0,s.length,e)}updateElements(e,n,r,s){let o=this._cachedMeta.rScale,a=s==="reset";for(let l=n;l<n+r;l++){let c=e[l],d=this.resolveDataElementOptions(l,c.active?"active":s),u=o.getPointPositionForValue(l,this.getParsed(l).r),h=a?o.xCenter:u.x,m=a?o.yCenter:u.y,_={x:h,y:m,angle:u.angle,skip:isNaN(h)||isNaN(m),options:d};this.updateElement(c,l,_,s)}}}return i})(),E1e=(()=>{class i extends Dc{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(e){let n=this._cachedMeta,r=this.chart.data.labels||[],{xScale:s,yScale:o}=n,a=this.getParsed(e),l=s.getLabelForValue(a.x),c=o.getLabelForValue(a.y);return{label:r[e]||"",value:"("+l+", "+c+")"}}update(e){let n=this._cachedMeta,{data:r=[]}=n,s=this.chart._animationsDisabled,{start:o,count:a}=tF(n,r,s);if(this._drawStart=o,this._drawCount=a,iF(n)&&(o=0,a=r.length),this.options.showLine){this.datasetElementType||this.addElements();let{dataset:l,_dataset:c}=n;l._chart=this.chart,l._datasetIndex=this.index,l._decimated=!!c._decimated,l.points=r;let d=this.resolveDatasetElementOptions(e);d.segment=this.options.segment,this.updateElement(l,void 0,{animated:!s,options:d},e)}else this.datasetElementType&&(delete n.dataset,this.datasetElementType=!1);this.updateElements(r,o,a,e)}addElements(){let{showLine:e}=this.options;!this.datasetElementType&&e&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(e,n,r,s){let o=s==="reset",{iScale:a,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,u=this.resolveDataElementOptions(n,s),h=this.getSharedOptions(u),m=this.includeOptions(s,h),_=a.axis,b=l.axis,{spanGaps:v,segment:I}=this.options,A=gu(v)?v:Number.POSITIVE_INFINITY,F=this.chart._animationsDisabled||o||s==="none",M=n>0&&this.getParsed(n-1);for(let L=n;L<n+r;++L){let U=e[L],T=this.getParsed(L),C=F?U:{},E=ut(T[b]),D=C[_]=a.getPixelForValue(T[_],L),S=C[b]=o||E?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,T,c):T[b],L);C.skip=isNaN(D)||isNaN(S)||E,C.stop=L>0&&Math.abs(T[_]-M[_])>A,I&&(C.parsed=T,C.raw=d.data[L]),m&&(C.options=h||this.resolveDataElementOptions(L,U.active?"active":s)),F||this.updateElement(U,L,C,s),M=T}this.updateSharedOptions(h,s,u)}getMaxOverflow(){let e=this._cachedMeta,n=e.data||[];if(!this.options.showLine){let l=0;for(let c=n.length-1;c>=0;--c)l=Math.max(l,n[c].size(this.resolveDataElementOptions(c))/2);return l>0&&l}let r=e.dataset,s=r.options&&r.options.borderWidth||0;if(!n.length)return s;let o=n[0].size(this.resolveDataElementOptions(0)),a=n[n.length-1].size(this.resolveDataElementOptions(n.length-1));return Math.max(s,o,a)/2}}return i})(),T1e=Object.freeze({__proto__:null,BarController:y1e,BubbleController:x1e,DoughnutController:QF,LineController:C1e,PieController:S1e,PolarAreaController:F$,RadarController:k1e,ScatterController:E1e});function bu(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}var AF=class i{static override(t){Object.assign(i.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return bu()}parse(){return bu()}format(){return bu()}add(){return bu()}diff(){return bu()}startOf(){return bu()}endOf(){return bu()}},I1e={_date:AF};function D1e(i,t,e,n){let{controller:r,data:s,_sorted:o}=i,a=r._cachedMeta.iScale,l=i.dataset&&i.dataset.options?i.dataset.options.spanGaps:null;if(a&&t===a.axis&&t!=="r"&&o&&s.length){let c=a._reversePixels?uG:Uo;if(n){if(r._sharedOptions){let d=s[0],u=typeof d.getRange=="function"&&d.getRange(t);if(u){let h=c(s,t,e-u),m=c(s,t,e+u);return{lo:h.lo,hi:m.hi}}}}else{let d=c(s,t,e);if(l){let{vScale:u}=r._cachedMeta,{_parsed:h}=i,m=h.slice(0,d.lo+1).reverse().findIndex(b=>!ut(b[u.axis]));d.lo-=Math.max(0,m);let _=h.slice(d.hi).findIndex(b=>!ut(b[u.axis]));d.hi+=Math.max(0,_)}return d}}return{lo:0,hi:s.length-1}}function Tb(i,t,e,n,r){let s=i.getSortedVisibleDatasetMetas(),o=e[t];for(let a=0,l=s.length;a<l;++a){let{index:c,data:d}=s[a],{lo:u,hi:h}=D1e(s[a],t,o,r);for(let m=u;m<=h;++m){let _=d[m];_.skip||n(_,c,m)}}}function M1e(i){let t=i.indexOf("x")!==-1,e=i.indexOf("y")!==-1;return function(n,r){let s=t?Math.abs(n.x-r.x):0,o=e?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(s,2)+Math.pow(o,2))}}function CF(i,t,e,n,r){let s=[];return!r&&!i.isPointInArea(t)||Tb(i,e,t,function(a,l,c){!r&&!Ho(a,i.chartArea,0)||a.inRange(t.x,t.y,n)&&s.push({element:a,datasetIndex:l,index:c})},!0),s}function A1e(i,t,e,n){let r=[];function s(o,a,l){let{startAngle:c,endAngle:d}=o.getProps(["startAngle","endAngle"],n),{angle:u}=Q2(o,{x:t.x,y:t.y});Ef(u,c,d)&&r.push({element:o,datasetIndex:a,index:l})}return Tb(i,e,t,s),r}function O1e(i,t,e,n,r,s){let o=[],a=M1e(e),l=Number.POSITIVE_INFINITY;function c(d,u,h){let m=d.inRange(t.x,t.y,r);if(n&&!m)return;let _=d.getCenterPoint(r);if(!(!!s||i.isPointInArea(_))&&!m)return;let v=a(t,_);v<l?(o=[{element:d,datasetIndex:u,index:h}],l=v):v===l&&o.push({element:d,datasetIndex:u,index:h})}return Tb(i,e,t,c),o}function SF(i,t,e,n,r,s){return!s&&!i.isPointInArea(t)?[]:e==="r"&&!n?A1e(i,t,e,r):O1e(i,t,e,n,r,s)}function UG(i,t,e,n,r){let s=[],o=e==="x"?"inXRange":"inYRange",a=!1;return Tb(i,e,t,(l,c,d)=>{l[o]&&l[o](t[e],r)&&(s.push({element:l,datasetIndex:c,index:d}),a=a||l.inRange(t.x,t.y,r))}),n&&!a?[]:s}var P1e={evaluateInteractionItems:Tb,modes:{index(i,t,e,n){let r=Tc(t,i),s=e.axis||"x",o=e.includeInvisible||!1,a=e.intersect?CF(i,r,s,n,o):SF(i,r,s,!1,n,o),l=[];return a.length?(i.getSortedVisibleDatasetMetas().forEach(c=>{let d=a[0].index,u=c.data[d];u&&!u.skip&&l.push({element:u,datasetIndex:c.index,index:d})}),l):[]},dataset(i,t,e,n){let r=Tc(t,i),s=e.axis||"xy",o=e.includeInvisible||!1,a=e.intersect?CF(i,r,s,n,o):SF(i,r,s,!1,n,o);if(a.length>0){let l=a[0].datasetIndex,c=i.getDatasetMeta(l).data;a=[];for(let d=0;d<c.length;++d)a.push({element:c[d],datasetIndex:l,index:d})}return a},point(i,t,e,n){let r=Tc(t,i),s=e.axis||"xy",o=e.includeInvisible||!1;return CF(i,r,s,n,o)},nearest(i,t,e,n){let r=Tc(t,i),s=e.axis||"xy",o=e.includeInvisible||!1;return SF(i,r,s,e.intersect,n,o)},x(i,t,e,n){let r=Tc(t,i);return UG(i,r,"x",e.intersect,n)},y(i,t,e,n){let r=Tc(t,i);return UG(i,r,"y",e.intersect,n)}}},N$=["left","top","right","bottom"];function bb(i,t){return i.filter(e=>e.pos===t)}function HG(i,t){return i.filter(e=>N$.indexOf(e.pos)===-1&&e.box.axis===t)}function vb(i,t){return i.sort((e,n)=>{let r=t?n:e,s=t?e:n;return r.weight===s.weight?r.index-s.index:r.weight-s.weight})}function R1e(i){let t=[],e,n,r,s,o,a;for(e=0,n=(i||[]).length;e<n;++e)r=i[e],{position:s,options:{stack:o,stackWeight:a=1}}=r,t.push({index:e,box:r,pos:s,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&s+o,stackWeight:a});return t}function F1e(i){let t={};for(let e of i){let{stack:n,pos:r,stackWeight:s}=e;if(!n||!N$.includes(r))continue;let o=t[n]||(t[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=s}return t}function N1e(i,t){let e=F1e(i),{vBoxMaxWidth:n,hBoxMaxHeight:r}=t,s,o,a;for(s=0,o=i.length;s<o;++s){a=i[s];let{fullSize:l}=a.box,c=e[a.stack],d=c&&a.stackWeight/c.weight;a.horizontal?(a.width=d?d*n:l&&t.availableWidth,a.height=r):(a.width=n,a.height=d?d*r:l&&t.availableHeight)}return e}function L1e(i){let t=R1e(i),e=vb(t.filter(c=>c.box.fullSize),!0),n=vb(bb(t,"left"),!0),r=vb(bb(t,"right")),s=vb(bb(t,"top"),!0),o=vb(bb(t,"bottom")),a=HG(t,"x"),l=HG(t,"y");return{fullSize:e,leftAndTop:n.concat(s),rightAndBottom:r.concat(l).concat(o).concat(a),chartArea:bb(t,"chartArea"),vertical:n.concat(r).concat(l),horizontal:s.concat(o).concat(a)}}function qG(i,t,e,n){return Math.max(i[e],t[e])+Math.max(i[n],t[n])}function L$(i,t){i.top=Math.max(i.top,t.top),i.left=Math.max(i.left,t.left),i.bottom=Math.max(i.bottom,t.bottom),i.right=Math.max(i.right,t.right)}function B1e(i,t,e,n){let{pos:r,box:s}=e,o=i.maxPadding;if(!pt(r)){e.size&&(i[r]-=e.size);let u=n[e.stack]||{size:0,count:1};u.size=Math.max(u.size,e.horizontal?s.height:s.width),e.size=u.size/u.count,i[r]+=e.size}s.getPadding&&L$(o,s.getPadding());let a=Math.max(0,t.outerWidth-qG(o,i,"left","right")),l=Math.max(0,t.outerHeight-qG(o,i,"top","bottom")),c=a!==i.w,d=l!==i.h;return i.w=a,i.h=l,e.horizontal?{same:c,other:d}:{same:d,other:c}}function V1e(i){let t=i.maxPadding;function e(n){let r=Math.max(t[n]-i[n],0);return i[n]+=r,r}i.y+=e("top"),i.x+=e("left"),e("right"),e("bottom")}function z1e(i,t){let e=t.maxPadding;function n(r){let s={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{s[o]=Math.max(t[o],e[o])}),s}return n(i?["left","right"]:["top","bottom"])}function wb(i,t,e,n){let r=[],s,o,a,l,c,d;for(s=0,o=i.length,c=0;s<o;++s){a=i[s],l=a.box,l.update(a.width||t.w,a.height||t.h,z1e(a.horizontal,t));let{same:u,other:h}=B1e(t,e,a,n);c|=u&&r.length,d=d||h,l.fullSize||r.push(a)}return c&&wb(r,t,e,n)||d}function y1(i,t,e,n,r){i.top=e,i.left=t,i.right=t+n,i.bottom=e+r,i.width=n,i.height=r}function WG(i,t,e,n){let r=e.padding,{x:s,y:o}=t;for(let a of i){let l=a.box,c=n[a.stack]||{count:1,placed:0,weight:1},d=a.stackWeight/c.weight||1;if(a.horizontal){let u=t.w*d,h=c.size||l.height;Sf(c.start)&&(o=c.start),l.fullSize?y1(l,r.left,o,e.outerWidth-r.right-r.left,h):y1(l,t.left+c.placed,o,u,h),c.start=o,c.placed+=u,o=l.bottom}else{let u=t.h*d,h=c.size||l.width;Sf(c.start)&&(s=c.start),l.fullSize?y1(l,s,r.top,h,e.outerHeight-r.bottom-r.top):y1(l,s,t.top+c.placed,h,u),c.start=s,c.placed+=u,s=l.right}}t.x=s,t.y=o}var Vn={addBox(i,t){i.boxes||(i.boxes=[]),t.fullSize=t.fullSize||!1,t.position=t.position||"top",t.weight=t.weight||0,t._layers=t._layers||function(){return[{z:0,draw(e){t.draw(e)}}]},i.boxes.push(t)},removeBox(i,t){let e=i.boxes?i.boxes.indexOf(t):-1;e!==-1&&i.boxes.splice(e,1)},configure(i,t,e){t.fullSize=e.fullSize,t.position=e.position,t.weight=e.weight},update(i,t,e,n){if(!i)return;let r=In(i.options.layout.padding),s=Math.max(t-r.width,0),o=Math.max(e-r.height,0),a=L1e(i.boxes),l=a.vertical,c=a.horizontal;Ft(i.boxes,b=>{typeof b.beforeLayout=="function"&&b.beforeLayout()});let d=l.reduce((b,v)=>v.box.options&&v.box.options.display===!1?b:b+1,0)||1,u=Object.freeze({outerWidth:t,outerHeight:e,padding:r,availableWidth:s,availableHeight:o,vBoxMaxWidth:s/2/d,hBoxMaxHeight:o/2}),h=Object.assign({},r);L$(h,In(n));let m=Object.assign({maxPadding:h,w:s,h:o,x:r.left,y:r.top},r),_=N1e(l.concat(c),u);wb(a.fullSize,m,u,_),wb(l,m,u,_),wb(c,m,u,_)&&wb(l,m,u,_),V1e(m),WG(a.leftAndTop,m,u,_),m.x+=m.w,m.y+=m.h,WG(a.rightAndBottom,m,u,_),i.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ft(a.chartArea,b=>{let v=b.box;Object.assign(v,i.chartArea),v.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}},D1=class{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,r){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,r?Math.floor(e/r):n)}}isAttached(t){return!0}updateConfig(t){}},OF=class extends D1{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}},E1="$chartjs",j1e={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},GG=i=>i===null||i==="";function U1e(i,t){let e=i.style,n=i.getAttribute("height"),r=i.getAttribute("width");if(i[E1]={initial:{height:n,width:r,style:{display:e.display,height:e.height,width:e.width}}},e.display=e.display||"block",e.boxSizing=e.boxSizing||"border-box",GG(r)){let s=mF(i,"width");s!==void 0&&(i.width=s)}if(GG(n))if(i.style.height==="")i.height=i.width/(t||2);else{let s=mF(i,"height");s!==void 0&&(i.height=s)}return i}var B$=IG?{passive:!0}:!1;function H1e(i,t,e){i&&i.addEventListener(t,e,B$)}function q1e(i,t,e){i&&i.canvas&&i.canvas.removeEventListener(t,e,B$)}function W1e(i,t){let e=j1e[i.type]||i.type,{x:n,y:r}=Tc(i,t);return{type:e,chart:t,native:i,x:n!==void 0?n:null,y:r!==void 0?r:null}}function M1(i,t){for(let e of i)if(e===t||e.contains(t))return!0}function G1e(i,t,e){let n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||M1(a.addedNodes,n),o=o&&!M1(a.removedNodes,n);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}function $1e(i,t,e){let n=i.canvas,r=new MutationObserver(s=>{let o=!1;for(let a of s)o=o||M1(a.removedNodes,n),o=o&&!M1(a.addedNodes,n);o&&e()});return r.observe(document,{childList:!0,subtree:!0}),r}var Sb=new Map,$G=0;function V$(){let i=window.devicePixelRatio;i!==$G&&($G=i,Sb.forEach((t,e)=>{e.currentDevicePixelRatio!==i&&t()}))}function K1e(i,t){Sb.size||window.addEventListener("resize",V$),Sb.set(i,t)}function Y1e(i){Sb.delete(i),Sb.size||window.removeEventListener("resize",V$)}function Q1e(i,t,e){let n=i.canvas,r=n&&b1(n);if(!r)return;let s=eF((a,l)=>{let c=r.clientWidth;e(a,l),c<r.clientWidth&&e()},window),o=new ResizeObserver(a=>{let l=a[0],c=l.contentRect.width,d=l.contentRect.height;c===0&&d===0||s(c,d)});return o.observe(r),K1e(i,s),o}function kF(i,t,e){e&&e.disconnect(),t==="resize"&&Y1e(i)}function X1e(i,t,e){let n=i.canvas,r=eF(s=>{i.ctx!==null&&e(W1e(s,i))},i);return H1e(n,t,r),r}var PF=class extends D1{acquireContext(t,e){let n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(U1e(t,e),n):null}releaseContext(t){let e=t.canvas;if(!e[E1])return!1;let n=e[E1].initial;["height","width"].forEach(s=>{let o=n[s];ut(o)?e.removeAttribute(s):e.setAttribute(s,o)});let r=n.style||{};return Object.keys(r).forEach(s=>{e.style[s]=r[s]}),e.width=e.width,delete e[E1],!0}addEventListener(t,e,n){this.removeEventListener(t,e);let r=t.$proxies||(t.$proxies={}),o={attach:G1e,detach:$1e,resize:Q1e}[e]||X1e;r[e]=o(t,e,n)}removeEventListener(t,e){let n=t.$proxies||(t.$proxies={}),r=n[e];if(!r)return;({attach:kF,detach:kF,resize:kF}[e]||q1e)(t,e,r),n[e]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,r){return TG(t,e,n,r)}isAttached(t){let e=t&&b1(t);return!!(e&&e.isConnected)}};function Z1e(i){return!_1()||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?OF:PF}var Qs=class{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){let{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return gu(this.x)&&gu(this.y)}getProps(t,e){let n=this.$animations;if(!e||!n)return this;let r={};return t.forEach(s=>{r[s]=n[s]&&n[s].active()?n[s]._to:this[s]}),r}};function J1e(i,t){let e=i.options.ticks,n=eSe(i),r=Math.min(e.maxTicksLimit||n,n),s=e.major.enabled?iSe(t):[],o=s.length,a=s[0],l=s[o-1],c=[];if(o>r)return nSe(t,c,s,o/r),c;let d=tSe(s,t,r);if(o>0){let u,h,m=o>1?Math.round((l-a)/(o-1)):null;for(x1(t,c,d,ut(m)?0:a-m,a),u=0,h=o-1;u<h;u++)x1(t,c,d,s[u],s[u+1]);return x1(t,c,d,l,ut(m)?t.length:l+m),c}return x1(t,c,d),c}function eSe(i){let t=i.options.offset,e=i._tickSize(),n=i._length/e+(t?0:1),r=i._maxLength/e;return Math.floor(Math.min(n,r))}function tSe(i,t,e){let n=rSe(i),r=t.length/e;if(!n)return Math.max(r,1);let s=lG(n);for(let o=0,a=s.length-1;o<a;o++){let l=s[o];if(l>r)return l}return Math.max(r,1)}function iSe(i){let t=[],e,n;for(e=0,n=i.length;e<n;e++)i[e].major&&t.push(e);return t}function nSe(i,t,e,n){let r=0,s=e[0],o;for(n=Math.ceil(n),o=0;o<i.length;o++)o===s&&(t.push(i[o]),r++,s=e[r*n])}function x1(i,t,e,n,r){let s=Xe(n,0),o=Math.min(Xe(r,i.length),i.length),a=0,l,c,d;for(e=Math.ceil(e),r&&(l=r-n,e=l/Math.floor(l/e)),d=s;d<0;)a++,d=Math.round(s+a*e);for(c=Math.max(s,0);c<o;c++)c===d&&(t.push(i[c]),a++,d=Math.round(s+a*e))}function rSe(i){let t=i.length,e,n;if(t<2)return!1;for(n=i[0],e=1;e<t;++e)if(i[e]-i[e-1]!==n)return!1;return n}var sSe=i=>i==="left"?"right":i==="right"?"left":i,KG=(i,t,e)=>t==="top"||t==="left"?i[t]+e:i[t]-e,YG=(i,t)=>Math.min(t||i,i);function QG(i,t){let e=[],n=i.length/t,r=i.length,s=0;for(;s<r;s+=n)e.push(i[Math.floor(s)]);return e}function oSe(i,t,e){let n=i.ticks.length,r=Math.min(t,n-1),s=i._startPixel,o=i._endPixel,a=1e-6,l=i.getPixelForTick(r),c;if(!(e&&(n===1?c=Math.max(l-s,o-l):t===0?c=(i.getPixelForTick(1)-l)/2:c=(l-i.getPixelForTick(r-1))/2,l+=r<t?c:-c,l<s-a||l>o+a)))return l}function aSe(i,t){Ft(i,e=>{let n=e.gc,r=n.length/2,s;if(r>t){for(s=0;s<r;++s)delete e.data[n[s]];n.splice(0,r)}})}function yb(i){return i.drawTicks?i.tickLength:0}function XG(i,t){if(!i.display)return 0;let e=Xi(i.font,t),n=In(i.padding);return(ei(i.text)?i.text.length:1)*e.lineHeight+n.height}function lSe(i,t){return Ra(i,{scale:t,type:"scale"})}function cSe(i,t,e){return Ra(i,{tick:e,index:t,type:"tick"})}function dSe(i,t,e){let n=h1(i);return(e&&t!=="right"||!e&&t==="right")&&(n=sSe(n)),n}function uSe(i,t,e,n){let{top:r,left:s,bottom:o,right:a,chart:l}=i,{chartArea:c,scales:d}=l,u=0,h,m,_,b=o-r,v=a-s;if(i.isHorizontal()){if(m=Tn(n,s,a),pt(e)){let I=Object.keys(e)[0],A=e[I];_=d[I].getPixelForValue(A)+b-t}else e==="center"?_=(c.bottom+c.top)/2+b-t:_=KG(i,e,t);h=a-s}else{if(pt(e)){let I=Object.keys(e)[0],A=e[I];m=d[I].getPixelForValue(A)-v+t}else e==="center"?m=(c.left+c.right)/2-v+t:m=KG(i,e,t);_=Tn(n,o,r),u=e==="left"?-Oi:Oi}return{titleX:m,titleY:_,maxWidth:h,rotation:u}}var yu=class i extends Qs{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:r}=this;return t=br(t,Number.POSITIVE_INFINITY),e=br(e,Number.NEGATIVE_INFINITY),n=br(n,Number.POSITIVE_INFINITY),r=br(r,Number.NEGATIVE_INFINITY),{min:br(t,n),max:br(e,r),minDefined:ki(t),maxDefined:ki(e)}}getMinMax(t){let{min:e,max:n,minDefined:r,maxDefined:s}=this.getUserBounds(),o;if(r&&s)return{min:e,max:n};let a=this.getMatchingVisibleMetas();for(let l=0,c=a.length;l<c;++l)o=a[l].controller.getMinMax(this,t),r||(e=Math.min(e,o.min)),s||(n=Math.max(n,o.max));return e=s&&e>n?n:e,n=r&&e>n?e:n,{min:br(e,br(n,e)),max:br(n,br(e,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){let t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Gt(this.options.beforeUpdate,[this])}update(t,e,n){let{beginAtZero:r,grace:s,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=xG(this,s,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();let l=a<this.ticks.length;this._convertTicksToLabels(l?QG(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=J1e(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),l&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t=this.options.reverse,e,n;this.isHorizontal()?(e=this.left,n=this.right):(e=this.top,n=this.bottom,t=!t),this._startPixel=e,this._endPixel=n,this._reversePixels=t,this._length=n-e,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Gt(this.options.afterUpdate,[this])}beforeSetDimensions(){Gt(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Gt(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),Gt(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Gt(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){let e=this.options.ticks,n,r,s;for(n=0,r=t.length;n<r;n++)s=t[n],s.label=Gt(e.callback,[s.value,n,t],this)}afterTickToLabelConversion(){Gt(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Gt(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){let t=this.options,e=t.ticks,n=YG(this.ticks.length,t.ticks.maxTicksLimit),r=e.minRotation||0,s=e.maxRotation,o=r,a,l,c;if(!this._isVisible()||!e.display||r>=s||n<=1||!this.isHorizontal()){this.labelRotation=r;return}let d=this._getLabelSizes(),u=d.widest.width,h=d.highest.height,m=nn(this.chart.width-u,0,this.maxWidth);a=t.offset?this.maxWidth/n:m/(n-1),u+6>a&&(a=m/(n-(t.offset?.5:1)),l=this.maxHeight-yb(t.grid)-e.padding-XG(t.title,this.chart.options.font),c=Math.sqrt(u*u+h*h),o=d1(Math.min(Math.asin(nn((d.highest.height+6)/a,-1,1)),Math.asin(nn(l/c,-1,1))-Math.asin(nn(h/c,-1,1)))),o=Math.max(r,Math.min(s,o))),this.labelRotation=o}afterCalculateLabelRotation(){Gt(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Gt(this.options.beforeFit,[this])}fit(){let t={width:0,height:0},{chart:e,options:{ticks:n,title:r,grid:s}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){let l=XG(r,e.options.font);if(a?(t.width=this.maxWidth,t.height=yb(s)+l):(t.height=this.maxHeight,t.width=yb(s)+l),n.display&&this.ticks.length){let{first:c,last:d,widest:u,highest:h}=this._getLabelSizes(),m=n.padding*2,_=xs(this.labelRotation),b=Math.cos(_),v=Math.sin(_);if(a){let I=n.mirror?0:v*u.width+b*h.height;t.height=Math.min(this.maxHeight,t.height+I+m)}else{let I=n.mirror?0:b*u.width+v*h.height;t.width=Math.min(this.maxWidth,t.width+I+m)}this._calculatePadding(c,d,v,b)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,r){let{ticks:{align:s,padding:o},position:a}=this.options,l=this.labelRotation!==0,c=a!=="top"&&this.axis==="x";if(this.isHorizontal()){let d=this.getPixelForTick(0)-this.left,u=this.right-this.getPixelForTick(this.ticks.length-1),h=0,m=0;l?c?(h=r*t.width,m=n*e.height):(h=n*t.height,m=r*e.width):s==="start"?m=e.width:s==="end"?h=t.width:s!=="inner"&&(h=t.width/2,m=e.width/2),this.paddingLeft=Math.max((h-d+o)*this.width/(this.width-d),0),this.paddingRight=Math.max((m-u+o)*this.width/(this.width-u),0)}else{let d=e.height/2,u=t.height/2;s==="start"?(d=0,u=t.height):s==="end"&&(d=e.height,u=0),this.paddingTop=d+o,this.paddingBottom=u+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Gt(this.options.afterFit,[this])}isHorizontal(){let{axis:t,position:e}=this.options;return e==="top"||e==="bottom"||t==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){this.beforeTickToLabelConversion(),this.generateTickLabels(t);let e,n;for(e=0,n=t.length;e<n;e++)ut(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){let e=this.options.ticks.sampleSize,n=this.ticks;e<n.length&&(n=QG(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){let{ctx:r,_longestTextCache:s}=this,o=[],a=[],l=Math.floor(e/YG(e,n)),c=0,d=0,u,h,m,_,b,v,I,A,F,M,L;for(u=0;u<e;u+=l){if(_=t[u].label,b=this._resolveTickFontOptions(u),r.font=v=b.string,I=s[v]=s[v]||{data:{},gc:[]},A=b.lineHeight,F=M=0,!ut(_)&&!ei(_))F=hb(r,I.data,I.gc,F,_),M=A;else if(ei(_))for(h=0,m=_.length;h<m;++h)L=_[h],!ut(L)&&!ei(L)&&(F=hb(r,I.data,I.gc,F,L),M+=A);o.push(F),a.push(M),c=Math.max(F,c),d=Math.max(M,d)}aSe(s,e);let U=o.indexOf(c),T=a.indexOf(d),C=E=>({width:o[E]||0,height:a[E]||0});return{first:C(0),last:C(e-1),widest:C(U),highest:C(T),widths:o,heights:a}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){let e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);let e=this._startPixel+t*this._length;return dG(this._alignToPixels?Sc(this.chart,e,0):e)}getDecimalForPixel(t){let e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){let{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){let e=this.ticks||[];if(t>=0&&t<e.length){let n=e[t];return n.$context||(n.$context=cSe(this.getContext(),t,n))}return this.$context||(this.$context=lSe(this.chart.getContext(),this))}_tickSize(){let t=this.options.ticks,e=xs(this.labelRotation),n=Math.abs(Math.cos(e)),r=Math.abs(Math.sin(e)),s=this._getLabelSizes(),o=t.autoSkipPadding||0,a=s?s.widest.width+o:0,l=s?s.highest.height+o:0;return this.isHorizontal()?l*n>a*r?a/n:l/r:l*r<a*n?l/n:a/r}_isVisible(){let t=this.options.display;return t!=="auto"?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){let e=this.axis,n=this.chart,r=this.options,{grid:s,position:o,border:a}=r,l=s.offset,c=this.isHorizontal(),u=this.ticks.length+(l?1:0),h=yb(s),m=[],_=a.setContext(this.getContext()),b=_.display?_.width:0,v=b/2,I=function(Oe){return Sc(n,Oe,b)},A,F,M,L,U,T,C,E,D,S,R,w;if(o==="top")A=I(this.bottom),T=this.bottom-h,E=A-v,S=I(t.top)+v,w=t.bottom;else if(o==="bottom")A=I(this.top),S=t.top,w=I(t.bottom)-v,T=A+v,E=this.top+h;else if(o==="left")A=I(this.right),U=this.right-h,C=A-v,D=I(t.left)+v,R=t.right;else if(o==="right")A=I(this.left),D=t.left,R=I(t.right)-v,U=A+v,C=this.left+h;else if(e==="x"){if(o==="center")A=I((t.top+t.bottom)/2+.5);else if(pt(o)){let Oe=Object.keys(o)[0],Pe=o[Oe];A=I(this.chart.scales[Oe].getPixelForValue(Pe))}S=t.top,w=t.bottom,T=A+v,E=T+h}else if(e==="y"){if(o==="center")A=I((t.left+t.right)/2);else if(pt(o)){let Oe=Object.keys(o)[0],Pe=o[Oe];A=I(this.chart.scales[Oe].getPixelForValue(Pe))}U=A-v,C=U-h,D=t.left,R=t.right}let k=Xe(r.ticks.maxTicksLimit,u),X=Math.max(1,Math.ceil(u/k));for(F=0;F<u;F+=X){let Oe=this.getContext(F),Pe=s.setContext(Oe),it=a.setContext(Oe),ot=Pe.lineWidth,fi=Pe.color,Ui=it.dash||[],ni=it.dashOffset,at=Pe.tickWidth,pi=Pe.tickColor,jt=Pe.tickBorderDash||[],gi=Pe.tickBorderDashOffset;M=oSe(this,F,l),M!==void 0&&(L=Sc(n,M,ot),c?U=C=D=R=L:T=E=S=w=L,m.push({tx1:U,ty1:T,tx2:C,ty2:E,x1:D,y1:S,x2:R,y2:w,width:ot,color:fi,borderDash:Ui,borderDashOffset:ni,tickWidth:at,tickColor:pi,tickBorderDash:jt,tickBorderDashOffset:gi}))}return this._ticksLength=u,this._borderValue=A,m}_computeLabelItems(t){let e=this.axis,n=this.options,{position:r,ticks:s}=n,o=this.isHorizontal(),a=this.ticks,{align:l,crossAlign:c,padding:d,mirror:u}=s,h=yb(n.grid),m=h+d,_=u?-d:m,b=-xs(this.labelRotation),v=[],I,A,F,M,L,U,T,C,E,D,S,R,w="middle";if(r==="top")U=this.bottom-_,T=this._getXAxisLabelAlignment();else if(r==="bottom")U=this.top+_,T=this._getXAxisLabelAlignment();else if(r==="left"){let X=this._getYAxisLabelAlignment(h);T=X.textAlign,L=X.x}else if(r==="right"){let X=this._getYAxisLabelAlignment(h);T=X.textAlign,L=X.x}else if(e==="x"){if(r==="center")U=(t.top+t.bottom)/2+m;else if(pt(r)){let X=Object.keys(r)[0],Oe=r[X];U=this.chart.scales[X].getPixelForValue(Oe)+m}T=this._getXAxisLabelAlignment()}else if(e==="y"){if(r==="center")L=(t.left+t.right)/2-m;else if(pt(r)){let X=Object.keys(r)[0],Oe=r[X];L=this.chart.scales[X].getPixelForValue(Oe)}T=this._getYAxisLabelAlignment(h).textAlign}e==="y"&&(l==="start"?w="top":l==="end"&&(w="bottom"));let k=this._getLabelSizes();for(I=0,A=a.length;I<A;++I){F=a[I],M=F.label;let X=s.setContext(this.getContext(I));C=this.getPixelForTick(I)+s.labelOffset,E=this._resolveTickFontOptions(I),D=E.lineHeight,S=ei(M)?M.length:1;let Oe=S/2,Pe=X.color,it=X.textStrokeColor,ot=X.textStrokeWidth,fi=T;o?(L=C,T==="inner"&&(I===A-1?fi=this.options.reverse?"left":"right":I===0?fi=this.options.reverse?"right":"left":fi="center"),r==="top"?c==="near"||b!==0?R=-S*D+D/2:c==="center"?R=-k.highest.height/2-Oe*D+D:R=-k.highest.height+D/2:c==="near"||b!==0?R=D/2:c==="center"?R=k.highest.height/2-Oe*D:R=k.highest.height-S*D,u&&(R*=-1),b!==0&&!X.showLabelBackdrop&&(L+=D/2*Math.sin(b))):(U=C,R=(1-S)*D/2);let Ui;if(X.showLabelBackdrop){let ni=In(X.backdropPadding),at=k.heights[I],pi=k.widths[I],jt=R-ni.top,gi=0-ni.left;switch(w){case"middle":jt-=at/2;break;case"bottom":jt-=at;break}switch(T){case"center":gi-=pi/2;break;case"right":gi-=pi;break;case"inner":I===A-1?gi-=pi:I>0&&(gi-=pi/2);break}Ui={left:gi,top:jt,width:pi+ni.width,height:at+ni.height,color:X.backdropColor}}v.push({label:M,font:E,textOffset:R,options:{rotation:b,color:Pe,strokeColor:it,strokeWidth:ot,textAlign:fi,textBaseline:w,translation:[L,U],backdrop:Ui}})}return v}_getXAxisLabelAlignment(){let{position:t,ticks:e}=this.options;if(-xs(this.labelRotation))return t==="top"?"left":"right";let r="center";return e.align==="start"?r="left":e.align==="end"?r="right":e.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(t){let{position:e,ticks:{crossAlign:n,mirror:r,padding:s}}=this.options,o=this._getLabelSizes(),a=t+s,l=o.widest.width,c,d;return e==="left"?r?(d=this.right+s,n==="near"?c="left":n==="center"?(c="center",d+=l/2):(c="right",d+=l)):(d=this.right-a,n==="near"?c="right":n==="center"?(c="center",d-=l/2):(c="left",d=this.left)):e==="right"?r?(d=this.left+s,n==="near"?c="right":n==="center"?(c="center",d-=l/2):(c="left",d-=l)):(d=this.left+a,n==="near"?c="left":n==="center"?(c="center",d+=l/2):(c="right",d=this.right)):c="right",{textAlign:c,x:d}}_computeLabelArea(){if(this.options.ticks.mirror)return;let t=this.chart,e=this.options.position;if(e==="left"||e==="right")return{top:0,left:this.left,bottom:t.height,right:this.right};if(e==="top"||e==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:t.width}}drawBackground(){let{ctx:t,options:{backgroundColor:e},left:n,top:r,width:s,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,r,s,o),t.restore())}getLineWidthForValue(t){let e=this.options.grid;if(!this._isVisible()||!e.display)return 0;let r=this.ticks.findIndex(s=>s.value===t);return r>=0?e.setContext(this.getContext(r)).lineWidth:0}drawGrid(t){let e=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t)),s,o,a=(l,c,d)=>{!d.width||!d.color||(n.save(),n.lineWidth=d.width,n.strokeStyle=d.color,n.setLineDash(d.borderDash||[]),n.lineDashOffset=d.borderDashOffset,n.beginPath(),n.moveTo(l.x,l.y),n.lineTo(c.x,c.y),n.stroke(),n.restore())};if(e.display)for(s=0,o=r.length;s<o;++s){let l=r[s];e.drawOnChartArea&&a({x:l.x1,y:l.y1},{x:l.x2,y:l.y2},l),e.drawTicks&&a({x:l.tx1,y:l.ty1},{x:l.tx2,y:l.ty2},{color:l.tickColor,width:l.tickWidth,borderDash:l.tickBorderDash,borderDashOffset:l.tickBorderDashOffset})}}drawBorder(){let{chart:t,ctx:e,options:{border:n,grid:r}}=this,s=n.setContext(this.getContext()),o=n.display?s.width:0;if(!o)return;let a=r.setContext(this.getContext(0)).lineWidth,l=this._borderValue,c,d,u,h;this.isHorizontal()?(c=Sc(t,this.left,o)-o/2,d=Sc(t,this.right,a)+a/2,u=h=l):(u=Sc(t,this.top,o)-o/2,h=Sc(t,this.bottom,a)+a/2,c=d=l),e.save(),e.lineWidth=s.width,e.strokeStyle=s.color,e.beginPath(),e.moveTo(c,u),e.lineTo(d,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;let n=this.ctx,r=this._computeLabelArea();r&&pb(n,r);let s=this.getLabelItems(t);for(let o of s){let a=o.options,l=o.font,c=o.label,d=o.textOffset;kc(n,c,0,d,l,a)}r&&gb(n)}drawTitle(){let{ctx:t,options:{position:e,title:n,reverse:r}}=this;if(!n.display)return;let s=Xi(n.font),o=In(n.padding),a=n.align,l=s.lineHeight/2;e==="bottom"||e==="center"||pt(e)?(l+=o.bottom,ei(n.text)&&(l+=s.lineHeight*(n.text.length-1))):l+=o.top;let{titleX:c,titleY:d,maxWidth:u,rotation:h}=uSe(this,l,e,a);kc(t,n.text,0,0,s,{color:n.color,maxWidth:u,rotation:h,textAlign:dSe(a,e,r),textBaseline:"middle",translation:[c,d]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){let t=this.options,e=t.ticks&&t.ticks.z||0,n=Xe(t.grid&&t.grid.z,-1),r=Xe(t.border&&t.border.z,0);return!this._isVisible()||this.draw!==i.prototype.draw?[{z:e,draw:s=>{this.draw(s)}}]:[{z:n,draw:s=>{this.drawBackground(),this.drawGrid(s),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:e,draw:s=>{this.drawLabels(s)}}]}getMatchingVisibleMetas(t){let e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[],s,o;for(s=0,o=e.length;s<o;++s){let a=e[s];a[n]===this.id&&(!t||a.type===t)&&r.push(a)}return r}_resolveTickFontOptions(t){let e=this.options.ticks.setContext(this.getContext(t));return Xi(e.font)}_maxDigits(){let t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}},Af=class{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){let e=Object.getPrototypeOf(t),n;fSe(e)&&(n=this.register(e));let r=this.items,s=t.id,o=this.scope+"."+s;if(!s)throw new Error("class does not have id: "+t);return s in r||(r[s]=t,hSe(t,o,n),this.override&&$t.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){let e=this.items,n=t.id,r=this.scope;n in e&&delete e[n],r&&n in $t[r]&&(delete $t[r][n],this.override&&delete Cc[n])}};function hSe(i,t,e){let n=xf(Object.create(null),[e?$t.get(e):{},$t.get(t),i.defaults]);$t.set(t,n),i.defaultRoutes&&mSe(t,i.defaultRoutes),i.descriptors&&$t.describe(t,i.descriptors)}function mSe(i,t){Object.keys(t).forEach(e=>{let n=e.split("."),r=n.pop(),s=[i].concat(n).join("."),o=t[e].split("."),a=o.pop(),l=o.join(".");$t.route(s,r,l,a)})}function fSe(i){return"id"in i&&"defaults"in i}var RF=class{constructor(){this.controllers=new Af(Dc,"datasets",!0),this.elements=new Af(Qs,"elements"),this.plugins=new Af(Object,"plugins"),this.scales=new Af(yu,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach(r=>{let s=n||this._getRegistryForType(r);n||s.isForType(r)||s===this.plugins&&r.id?this._exec(t,s,r):Ft(r,o=>{let a=n||this._getRegistryForType(o);this._exec(t,a,o)})})}_exec(t,e,n){let r=c1(t);Gt(n["before"+r],[],n),e[t](n),Gt(n["after"+r],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){let n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){let r=e.get(t);if(r===void 0)throw new Error('"'+t+'" is not a registered '+n+".");return r}},$o=new RF,FF=class{constructor(){this._init=[]}notify(t,e,n,r){e==="beforeInit"&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));let s=r?this._descriptors(t).filter(r):this._descriptors(t),o=this._notify(s,t,e,n);return e==="afterDestroy"&&(this._notify(s,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,r){r=r||{};for(let s of t){let o=s.plugin,a=o[n],l=[e,r,s.options];if(Gt(a,l,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ut(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;let e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){let n=t&&t.config,r=Xe(n.options&&n.options.plugins,{}),s=pSe(n);return r===!1&&!e?[]:_Se(t,s,r,e)}_notifyStateChanges(t){let e=this._oldCache||[],n=this._cache,r=(s,o)=>s.filter(a=>!o.some(l=>a.plugin.id===l.plugin.id));this._notify(r(e,n),t,"stop"),this._notify(r(n,e),t,"start")}};function pSe(i){let t={},e=[],n=Object.keys($o.plugins.items);for(let s=0;s<n.length;s++)e.push($o.getPlugin(n[s]));let r=i.plugins||[];for(let s=0;s<r.length;s++){let o=r[s];e.indexOf(o)===-1&&(e.push(o),t[o.id]=!0)}return{plugins:e,localIds:t}}function gSe(i,t){return!t&&i===!1?null:i===!0?{}:i}function _Se(i,{plugins:t,localIds:e},n,r){let s=[],o=i.getContext();for(let a of t){let l=a.id,c=gSe(n[l],r);c!==null&&s.push({plugin:a,options:bSe(i.config,{plugin:a,local:e[l]},c,o)})}return s}function bSe(i,{plugin:t,local:e},n,r){let s=i.pluginScopeKeys(t),o=i.getOptionScopes(n,s);return e&&t.defaults&&o.push(t.defaults),i.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function NF(i,t){let e=$t.datasets[i]||{};return((t.datasets||{})[i]||{}).indexAxis||t.indexAxis||e.indexAxis||"x"}function vSe(i,t){let e=i;return i==="_index_"?e=t:i==="_value_"&&(e=t==="x"?"y":"x"),e}function ySe(i,t){return i===t?"_index_":"_value_"}function ZG(i){if(i==="x"||i==="y"||i==="r")return i}function xSe(i){if(i==="top"||i==="bottom")return"x";if(i==="left"||i==="right")return"y"}function LF(i,...t){if(ZG(i))return i;for(let e of t){let n=e.axis||xSe(e.position)||i.length>1&&ZG(i[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${i}' axis. Please provide 'axis' or 'position' option.`)}function JG(i,t,e){if(e[t+"AxisID"]===i)return{axis:t}}function wSe(i,t){if(t.data&&t.data.datasets){let e=t.data.datasets.filter(n=>n.xAxisID===i||n.yAxisID===i);if(e.length)return JG(i,"x",e[0])||JG(i,"y",e[0])}return{}}function CSe(i,t){let e=Cc[i.type]||{scales:{}},n=t.scales||{},r=NF(i.type,t),s=Object.create(null);return Object.keys(n).forEach(o=>{let a=n[o];if(!pt(a))return console.error(`Invalid scale configuration for scale: ${o}`);if(a._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);let l=LF(o,a,wSe(o,i),$t.scales[a.type]),c=ySe(l,r),d=e.scales||{};s[o]=Cf(Object.create(null),[{axis:l},a,d[l],d[c]])}),i.data.datasets.forEach(o=>{let a=o.type||i.type,l=o.indexAxis||NF(a,t),d=(Cc[a]||{}).scales||{};Object.keys(d).forEach(u=>{let h=vSe(u,l),m=o[h+"AxisID"]||h;s[m]=s[m]||Object.create(null),Cf(s[m],[{axis:h},n[m],d[u]])})}),Object.keys(s).forEach(o=>{let a=s[o];Cf(a,[$t.scales[a.type],$t.scale])}),s}function z$(i){let t=i.options||(i.options={});t.plugins=Xe(t.plugins,{}),t.scales=CSe(i,t)}function j$(i){return i=i||{},i.datasets=i.datasets||[],i.labels=i.labels||[],i}function SSe(i){return i=i||{},i.data=j$(i.data),z$(i),i}var e$=new Map,U$=new Set;function w1(i,t){let e=e$.get(i);return e||(e=t(),e$.set(i,e),U$.add(e)),e}var xb=(i,t,e)=>{let n=Pa(t,e);n!==void 0&&i.add(n)},BF=class{constructor(t){this._config=SSe(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=j$(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){let t=this._config;this.clearCache(),z$(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return w1(t,()=>[[`datasets.${t}`,""]])}datasetAnimationScopeKeys(t,e){return w1(`${t}.transition.${e}`,()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]])}datasetElementScopeKeys(t,e){return w1(`${t}-${e}`,()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]])}pluginScopeKeys(t){let e=t.id,n=this.type;return w1(`${n}-plugin-${e}`,()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]])}_cachedScopes(t,e){let n=this._scopeCache,r=n.get(t);return(!r||e)&&(r=new Map,n.set(t,r)),r}getOptionScopes(t,e,n){let{options:r,type:s}=this,o=this._cachedScopes(t,n),a=o.get(e);if(a)return a;let l=new Set;e.forEach(d=>{t&&(l.add(t),d.forEach(u=>xb(l,t,u))),d.forEach(u=>xb(l,r,u)),d.forEach(u=>xb(l,Cc[s]||{},u)),d.forEach(u=>xb(l,$t,u)),d.forEach(u=>xb(l,m1,u))});let c=Array.from(l);return c.length===0&&c.push(Object.create(null)),U$.has(e)&&o.set(e,c),c}chartOptionScopes(){let{options:t,type:e}=this;return[t,Cc[e]||{},$t.datasets[e]||{},{type:e},$t,m1]}resolveNamedOptions(t,e,n,r=[""]){let s={$shared:!0},{resolver:o,subPrefixes:a}=t$(this._resolverCache,t,r),l=o;if(ESe(o,e)){s.$shared=!1,n=Aa(n)?n():n;let c=this.createResolver(t,n,a);l=pu(o,n,c)}for(let c of e)s[c]=l[c];return s}createResolver(t,e,n=[""],r){let{resolver:s}=t$(this._resolverCache,t,n);return pt(e)?pu(s,e,void 0,r):s}};function t$(i,t,e){let n=i.get(t);n||(n=new Map,i.set(t,n));let r=e.join(),s=n.get(r);return s||(s={resolver:g1(t,e),subPrefixes:e.filter(a=>!a.toLowerCase().includes("hover"))},n.set(r,s)),s}var kSe=i=>pt(i)&&Object.getOwnPropertyNames(i).some(t=>Aa(i[t]));function ESe(i,t){let{isScriptable:e,isIndexable:n}=lF(i);for(let r of t){let s=e(r),o=n(r),a=(o||s)&&i[r];if(s&&(Aa(a)||kSe(a))||o&&ei(a))return!0}return!1}var TSe="4.4.9",ISe=["top","bottom","left","right","chartArea"];function i$(i,t){return i==="top"||i==="bottom"||ISe.indexOf(i)===-1&&t==="x"}function n$(i,t){return function(e,n){return e[i]===n[i]?e[t]-n[t]:e[i]-n[i]}}function r$(i){let t=i.chart,e=t.options.animation;t.notifyPlugins("afterRender"),Gt(e&&e.onComplete,[i],t)}function DSe(i){let t=i.chart,e=t.options.animation;Gt(e&&e.onProgress,[i],t)}function H$(i){return _1()&&typeof i=="string"?i=document.getElementById(i):i&&i.length&&(i=i[0]),i&&i.canvas&&(i=i.canvas),i}var T1={},s$=i=>{let t=H$(i);return Object.values(T1).filter(e=>e.canvas===t).pop()};function MSe(i,t,e){let n=Object.keys(i);for(let r of n){let s=+r;if(s>=t){let o=i[r];delete i[r],(e>0||s>t)&&(i[s+e]=o)}}}function ASe(i,t,e,n){return!e||i.type==="mouseout"?null:n?t:i}var Ib=(()=>{class i{static defaults=$t;static instances=T1;static overrides=Cc;static registry=$o;static version=TSe;static getChart=s$;static register(...e){$o.add(...e),o$()}static unregister(...e){$o.remove(...e),o$()}constructor(e,n){let r=this.config=new BF(n),s=H$(e),o=s$(s);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");let a=r.createResolver(r.chartOptionScopes(),this.getContext());this.platform=new(r.platform||Z1e(s)),this.platform.updateConfig(r);let l=this.platform.acquireContext(s,a.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=rG(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new FF,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=pG(h=>this.update(h),a.resizeDelay||0),this._dataChanges=[],T1[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Fa.listen(this,"complete",r$),Fa.listen(this,"progress",DSe),this._initialize(),this.attached&&this.update()}get aspectRatio(){let{options:{aspectRatio:e,maintainAspectRatio:n},width:r,height:s,_aspectRatio:o}=this;return ut(e)?n&&o?o:s?r/s:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return $o}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():hF(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return sF(this.canvas,this.ctx),this}stop(){return Fa.stop(this),this}resize(e,n){Fa.running(this)?this._resizeBeforeDraw={width:e,height:n}:this._resize(e,n)}_resize(e,n){let r=this.options,s=this.canvas,o=r.maintainAspectRatio&&this.aspectRatio,a=this.platform.getMaximumSize(s,e,n,o),l=r.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=a.width,this.height=a.height,this._aspectRatio=this.aspectRatio,hF(this,l,!0)&&(this.notifyPlugins("resize",{size:a}),Gt(r.onResize,[this,a],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){let n=this.options.scales||{};Ft(n,(r,s)=>{r.id=s})}buildOrUpdateScales(){let e=this.options,n=e.scales,r=this.scales,s=Object.keys(r).reduce((a,l)=>(a[l]=!1,a),{}),o=[];n&&(o=o.concat(Object.keys(n).map(a=>{let l=n[a],c=LF(a,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),Ft(o,a=>{let l=a.options,c=l.id,d=LF(c,l),u=Xe(l.type,a.dtype);(l.position===void 0||i$(l.position,d)!==i$(a.dposition))&&(l.position=a.dposition),s[c]=!0;let h=null;if(c in r&&r[c].type===u)h=r[c];else{let m=$o.getScale(u);h=new m({id:c,type:u,ctx:this.ctx,chart:this}),r[h.id]=h}h.init(l,e)}),Ft(s,(a,l)=>{a||delete r[l]}),Ft(r,a=>{Vn.configure(this,a,a.options),Vn.addBox(this,a)})}_updateMetasets(){let e=this._metasets,n=this.data.datasets.length,r=e.length;if(e.sort((s,o)=>s.index-o.index),r>n){for(let s=n;s<r;++s)this._destroyDatasetMeta(s);e.splice(n,r-n)}this._sortedMetasets=e.slice(0).sort(n$("order","index"))}_removeUnreferencedMetasets(){let{_metasets:e,data:{datasets:n}}=this;e.length>n.length&&delete this._stacks,e.forEach((r,s)=>{n.filter(o=>o===r._dataset).length===0&&this._destroyDatasetMeta(s)})}buildOrUpdateControllers(){let e=[],n=this.data.datasets,r,s;for(this._removeUnreferencedMetasets(),r=0,s=n.length;r<s;r++){let o=n[r],a=this.getDatasetMeta(r),l=o.type||this.config.type;if(a.type&&a.type!==l&&(this._destroyDatasetMeta(r),a=this.getDatasetMeta(r)),a.type=l,a.indexAxis=o.indexAxis||NF(l,this.options),a.order=o.order||0,a.index=r,a.label=""+o.label,a.visible=this.isDatasetVisible(r),a.controller)a.controller.updateIndex(r),a.controller.linkScales();else{let c=$o.getController(l),{datasetElementType:d,dataElementType:u}=$t.datasets[l];Object.assign(c,{dataElementType:$o.getElement(u),datasetElementType:d&&$o.getElement(d)}),a.controller=new c(this,r),e.push(a.controller)}}return this._updateMetasets(),e}_resetElements(){Ft(this.data.datasets,(e,n)=>{this.getDatasetMeta(n).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){let n=this.config;n.update();let r=this._options=n.createResolver(n.chartOptionScopes(),this.getContext()),s=this._animationsDisabled=!r.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;let o=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let a=0;for(let d=0,u=this.data.datasets.length;d<u;d++){let{controller:h}=this.getDatasetMeta(d),m=!s&&o.indexOf(h)===-1;h.buildOrUpdateElements(m),a=Math.max(+h.getMaxOverflow(),a)}a=this._minPadding=r.layout.autoPadding?a:0,this._updateLayout(a),s||Ft(o,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(n$("z","_idx"));let{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Ft(this.scales,e=>{Vn.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){let e=this.options,n=new Set(Object.keys(this._listeners)),r=new Set(e.events);(!G2(n,r)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){let{_hiddenIndices:e}=this,n=this._getUniformDataChanges()||[];for(let{method:r,start:s,count:o}of n){let a=r==="_removeElements"?-o:o;MSe(e,s,a)}}_getUniformDataChanges(){let e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];let n=this.data.datasets.length,r=o=>new Set(e.filter(a=>a[0]===o).map((a,l)=>l+","+a.splice(1).join(","))),s=r(0);for(let o=1;o<n;o++)if(!G2(s,r(o)))return;return Array.from(s).map(o=>o.split(",")).map(o=>({method:o[1],start:+o[2],count:+o[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Vn.update(this,this.width,this.height,e);let n=this.chartArea,r=n.width<=0||n.height<=0;this._layers=[],Ft(this.boxes,s=>{r&&s.position==="chartArea"||(s.configure&&s.configure(),this._layers.push(...s._layers()))},this),this._layers.forEach((s,o)=>{s._idx=o}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let n=0,r=this.data.datasets.length;n<r;++n)this.getDatasetMeta(n).controller.configure();for(let n=0,r=this.data.datasets.length;n<r;++n)this._updateDataset(n,Aa(e)?e({datasetIndex:n}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,n){let r=this.getDatasetMeta(e),s={meta:r,index:e,mode:n,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",s)!==!1&&(r.controller._update(n),s.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",s))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Fa.has(this)?this.attached&&!Fa.running(this)&&Fa.start(this):(this.draw(),r$({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){let{width:r,height:s}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(r,s)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;let n=this._layers;for(e=0;e<n.length&&n[e].z<=0;++e)n[e].draw(this.chartArea);for(this._drawDatasets();e<n.length;++e)n[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){let n=this._sortedMetasets,r=[],s,o;for(s=0,o=n.length;s<o;++s){let a=n[s];(!e||a.visible)&&r.push(a)}return r}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;let e=this.getSortedVisibleDatasetMetas();for(let n=e.length-1;n>=0;--n)this._drawDataset(e[n]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){let n=this.ctx,r={meta:e,index:e.index,cancelable:!0},s=bF(this,e);this.notifyPlugins("beforeDatasetDraw",r)!==!1&&(s&&pb(n,s),e.controller.draw(),s&&gb(n),r.cancelable=!1,this.notifyPlugins("afterDatasetDraw",r))}isPointInArea(e){return Ho(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,n,r,s){let o=P1e.modes[n];return typeof o=="function"?o(this,e,r,s):[]}getDatasetMeta(e){let n=this.data.datasets[e],r=this._metasets,s=r.filter(o=>o&&o._dataset===n).pop();return s||(s={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:n&&n.order||0,index:e,_dataset:n,_parsed:[],_sorted:!1},r.push(s)),s}getContext(){return this.$context||(this.$context=Ra(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){let n=this.data.datasets[e];if(!n)return!1;let r=this.getDatasetMeta(e);return typeof r.hidden=="boolean"?!r.hidden:!n.hidden}setDatasetVisibility(e,n){let r=this.getDatasetMeta(e);r.hidden=!n}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,n,r){let s=r?"show":"hide",o=this.getDatasetMeta(e),a=o.controller._resolveAnimations(void 0,s);Sf(n)?(o.data[n].hidden=!r,this.update()):(this.setDatasetVisibility(e,r),a.update(o,{visible:r}),this.update(l=>l.datasetIndex===e?s:void 0))}hide(e,n){this._updateVisibility(e,n,!1)}show(e,n){this._updateVisibility(e,n,!0)}_destroyDatasetMeta(e){let n=this._metasets[e];n&&n.controller&&n.controller._destroy(),delete this._metasets[e]}_stop(){let e,n;for(this.stop(),Fa.remove(this),e=0,n=this.data.datasets.length;e<n;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");let{canvas:e,ctx:n}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),sF(e,n),this.platform.releaseContext(n),this.canvas=null,this.ctx=null),delete T1[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){let e=this._listeners,n=this.platform,r=(o,a)=>{n.addEventListener(this,o,a),e[o]=a},s=(o,a,l)=>{o.offsetX=a,o.offsetY=l,this._eventHandler(o)};Ft(this.options.events,o=>r(o,s))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});let e=this._responsiveListeners,n=this.platform,r=(c,d)=>{n.addEventListener(this,c,d),e[c]=d},s=(c,d)=>{e[c]&&(n.removeEventListener(this,c,d),delete e[c])},o=(c,d)=>{this.canvas&&this.resize(c,d)},a,l=()=>{s("attach",l),this.attached=!0,this.resize(),r("resize",o),r("detach",a)};a=()=>{this.attached=!1,s("resize",o),this._stop(),this._resize(0,0),r("attach",l)},n.isAttached(this.canvas)?l():a()}unbindEvents(){Ft(this._listeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._listeners={},Ft(this._responsiveListeners,(e,n)=>{this.platform.removeEventListener(this,n,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,n,r){let s=r?"set":"remove",o,a,l,c;for(n==="dataset"&&(o=this.getDatasetMeta(e[0].datasetIndex),o.controller["_"+s+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){a=e[l];let d=a&&this.getDatasetMeta(a.datasetIndex).controller;d&&d[s+"HoverStyle"](a.element,a.datasetIndex,a.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){let n=this._active||[],r=e.map(({datasetIndex:o,index:a})=>{let l=this.getDatasetMeta(o);if(!l)throw new Error("No dataset found at index "+o);return{datasetIndex:o,element:l.data[a],index:a}});!mb(r,n)&&(this._active=r,this._lastEvent=null,this._updateHoverStyles(r,n))}notifyPlugins(e,n,r){return this._plugins.notify(this,e,n,r)}isPluginEnabled(e){return this._plugins._cache.filter(n=>n.plugin.id===e).length===1}_updateHoverStyles(e,n,r){let s=this.options.hover,o=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),a=o(n,e),l=r?e:o(e,n);a.length&&this.updateHoverStyle(a,s.mode,!1),l.length&&s.mode&&this.updateHoverStyle(l,s.mode,!0)}_eventHandler(e,n){let r={event:e,replay:n,cancelable:!0,inChartArea:this.isPointInArea(e)},s=a=>(a.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",r,s)===!1)return;let o=this._handleEvent(e,n,r.inChartArea);return r.cancelable=!1,this.notifyPlugins("afterEvent",r,s),(o||r.changed)&&this.render(),this}_handleEvent(e,n,r){let{_active:s=[],options:o}=this,a=n,l=this._getActiveElements(e,s,r,a),c=aG(e),d=ASe(e,this._lastEvent,r,c);r&&(this._lastEvent=null,Gt(o.onHover,[e,l,this],this),c&&Gt(o.onClick,[e,l,this],this));let u=!mb(l,s);return(u||n)&&(this._active=l,this._updateHoverStyles(l,s,n)),this._lastEvent=d,u}_getActiveElements(e,n,r,s){if(e.type==="mouseout")return[];if(!r)return n;let o=this.options.hover;return this.getElementsAtEventForMode(e,o.mode,o,s)}}return i})();function o$(){return Ft(Ib.instances,i=>i._plugins.invalidate())}function OSe(i,t,e){let{startAngle:n,pixelMargin:r,x:s,y:o,outerRadius:a,innerRadius:l}=t,c=r/a;i.beginPath(),i.arc(s,o,a,n-c,e+c),l>r?(c=r/l,i.arc(s,o,l,e+c,n-c,!0)):i.arc(s,o,r,e+Oi,n-Oi),i.closePath(),i.clip()}function PSe(i){return p1(i,["outerStart","outerEnd","innerStart","innerEnd"])}function RSe(i,t,e,n){let r=PSe(i.options.borderRadius),s=(e-t)/2,o=Math.min(s,n*t/2),a=l=>{let c=(e-Math.min(s,l))*n/2;return nn(l,0,Math.min(s,c))};return{outerStart:a(r.outerStart),outerEnd:a(r.outerEnd),innerStart:nn(r.innerStart,0,o),innerEnd:nn(r.innerEnd,0,o)}}function Mf(i,t,e,n){return{x:e+i*Math.cos(t),y:n+i*Math.sin(t)}}function A1(i,t,e,n,r,s){let{x:o,y:a,startAngle:l,pixelMargin:c,innerRadius:d}=t,u=Math.max(t.outerRadius+n+e-c,0),h=d>0?d+n+e+c:0,m=0,_=r-l;if(n){let X=d>0?d-n:0,Oe=u>0?u-n:0,Pe=(X+Oe)/2,it=Pe!==0?_*Pe/(Pe+n):_;m=(_-it)/2}let b=Math.max(.001,_*u-e/ti)/u,v=(_-b)/2,I=l+v+m,A=r-v-m,{outerStart:F,outerEnd:M,innerStart:L,innerEnd:U}=RSe(t,h,u,A-I),T=u-F,C=u-M,E=I+F/T,D=A-M/C,S=h+L,R=h+U,w=I+L/S,k=A-U/R;if(i.beginPath(),s){let X=(E+D)/2;if(i.arc(o,a,u,E,X),i.arc(o,a,u,X,D),M>0){let ot=Mf(C,D,o,a);i.arc(ot.x,ot.y,M,D,A+Oi)}let Oe=Mf(R,A,o,a);if(i.lineTo(Oe.x,Oe.y),U>0){let ot=Mf(R,k,o,a);i.arc(ot.x,ot.y,U,A+Oi,k+Math.PI)}let Pe=(A-U/h+(I+L/h))/2;if(i.arc(o,a,h,A-U/h,Pe,!0),i.arc(o,a,h,Pe,I+L/h,!0),L>0){let ot=Mf(S,w,o,a);i.arc(ot.x,ot.y,L,w+Math.PI,I-Oi)}let it=Mf(T,I,o,a);if(i.lineTo(it.x,it.y),F>0){let ot=Mf(T,E,o,a);i.arc(ot.x,ot.y,F,I-Oi,E)}}else{i.moveTo(o,a);let X=Math.cos(E)*u+o,Oe=Math.sin(E)*u+a;i.lineTo(X,Oe);let Pe=Math.cos(D)*u+o,it=Math.sin(D)*u+a;i.lineTo(Pe,it)}i.closePath()}function FSe(i,t,e,n,r){let{fullCircles:s,startAngle:o,circumference:a}=t,l=t.endAngle;if(s){A1(i,t,e,n,l,r);for(let c=0;c<s;++c)i.fill();isNaN(a)||(l=o+(a%ii||ii))}return A1(i,t,e,n,l,r),i.fill(),l}function NSe(i,t,e,n,r){let{fullCircles:s,startAngle:o,circumference:a,options:l}=t,{borderWidth:c,borderJoinStyle:d,borderDash:u,borderDashOffset:h}=l,m=l.borderAlign==="inner";if(!c)return;i.setLineDash(u||[]),i.lineDashOffset=h,m?(i.lineWidth=c*2,i.lineJoin=d||"round"):(i.lineWidth=c,i.lineJoin=d||"bevel");let _=t.endAngle;if(s){A1(i,t,e,n,_,r);for(let b=0;b<s;++b)i.stroke();isNaN(a)||(_=o+(a%ii||ii))}m&&OSe(i,t,_),s||(A1(i,t,e,n,_,r),i.stroke())}var VF=class extends Qs{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>t!=="borderDash"};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){let r=this.getProps(["x","y"],n),{angle:s,distance:o}=Q2(r,{x:t,y:e}),{startAngle:a,endAngle:l,innerRadius:c,outerRadius:d,circumference:u}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),h=(this.options.spacing+this.options.borderWidth)/2,m=Xe(u,l-a),_=Ef(s,a,l)&&a!==l,b=m>=ii||_,v=Wo(o,c+h,d+h);return b&&v}getCenterPoint(t){let{x:e,y:n,startAngle:r,endAngle:s,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:l,spacing:c}=this.options,d=(r+s)/2,u=(o+a+c+l)/2;return{x:e+Math.cos(d)*u,y:n+Math.sin(d)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){let{options:e,circumference:n}=this,r=(e.offset||0)/4,s=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin=e.borderAlign==="inner"?.33:0,this.fullCircles=n>ii?Math.floor(n/ii):0,n===0||this.innerRadius<0||this.outerRadius<0)return;t.save();let a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*r,Math.sin(a)*r);let l=1-Math.sin(Math.min(ti,n||0)),c=r*l;t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,FSe(t,this,c,s,o),NSe(t,this,c,s,o),t.restore()}};function q$(i,t,e=t){i.lineCap=Xe(e.borderCapStyle,t.borderCapStyle),i.setLineDash(Xe(e.borderDash,t.borderDash)),i.lineDashOffset=Xe(e.borderDashOffset,t.borderDashOffset),i.lineJoin=Xe(e.borderJoinStyle,t.borderJoinStyle),i.lineWidth=Xe(e.borderWidth,t.borderWidth),i.strokeStyle=Xe(e.borderColor,t.borderColor)}function LSe(i,t,e){i.lineTo(e.x,e.y)}function BSe(i){return i.stepped?vG:i.tension||i.cubicInterpolationMode==="monotone"?yG:LSe}function W$(i,t,e={}){let n=i.length,{start:r=0,end:s=n-1}=e,{start:o,end:a}=t,l=Math.max(r,o),c=Math.min(s,a),d=r<o&&s<o||r>a&&s>a;return{count:n,start:l,loop:t.loop,ilen:c<l&&!d?n+c-l:c-l}}function VSe(i,t,e,n){let{points:r,options:s}=t,{count:o,start:a,loop:l,ilen:c}=W$(r,e,n),d=BSe(s),{move:u=!0,reverse:h}=n||{},m,_,b;for(m=0;m<=c;++m)_=r[(a+(h?c-m:m))%o],!_.skip&&(u?(i.moveTo(_.x,_.y),u=!1):d(i,b,_,h,s.stepped),b=_);return l&&(_=r[(a+(h?c:0))%o],d(i,b,_,h,s.stepped)),!!l}function zSe(i,t,e,n){let r=t.points,{count:s,start:o,ilen:a}=W$(r,e,n),{move:l=!0,reverse:c}=n||{},d=0,u=0,h,m,_,b,v,I,A=M=>(o+(c?a-M:M))%s,F=()=>{b!==v&&(i.lineTo(d,v),i.lineTo(d,b),i.lineTo(d,I))};for(l&&(m=r[A(0)],i.moveTo(m.x,m.y)),h=0;h<=a;++h){if(m=r[A(h)],m.skip)continue;let M=m.x,L=m.y,U=M|0;U===_?(L<b?b=L:L>v&&(v=L),d=(u*d+M)/++u):(F(),i.lineTo(M,L),_=U,u=0,b=v=L),I=L}F()}function zF(i){let t=i.options,e=t.borderDash&&t.borderDash.length;return!i._decimated&&!i._loop&&!t.tension&&t.cubicInterpolationMode!=="monotone"&&!t.stepped&&!e?zSe:VSe}function jSe(i){return i.stepped?DG:i.tension||i.cubicInterpolationMode==="monotone"?MG:wc}function USe(i,t,e,n){let r=t._path;r||(r=t._path=new Path2D,t.path(r,e,n)&&r.closePath()),q$(i,t.options),i.stroke(r)}function HSe(i,t,e,n){let{segments:r,options:s}=t,o=zF(t);for(let a of r)q$(i,s,a.style),i.beginPath(),o(i,t,a,{start:e,end:e+n-1})&&i.closePath(),i.stroke()}var qSe=typeof Path2D=="function";function WSe(i,t,e,n){qSe&&!t.options.segment?USe(i,t,e,n):HSe(i,t,e,n)}var R1=(()=>{class i extends Qs{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"};constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,n){let r=this.options;if((r.tension||r.cubicInterpolationMode==="monotone")&&!r.stepped&&!this._pointsUpdated){let s=r.spanGaps?this._loop:this._fullLoop;EG(this._points,r,e,s,n),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=OG(this,this.options.segment))}first(){let e=this.segments,n=this.points;return e.length&&n[e[0].start]}last(){let e=this.segments,n=this.points,r=e.length;return r&&n[e[r-1].end]}interpolate(e,n){let r=this.options,s=e[n],o=this.points,a=_F(this,{property:n,start:s,end:s});if(!a.length)return;let l=[],c=jSe(r),d,u;for(d=0,u=a.length;d<u;++d){let{start:h,end:m}=a[d],_=o[h],b=o[m];if(_===b){l.push(_);continue}let v=Math.abs((s-_[n])/(b[n]-_[n])),I=c(_,b,v,r.stepped);I[n]=e[n],l.push(I)}return l.length===1?l[0]:l}pathSegment(e,n,r){return zF(this)(e,this,n,r)}path(e,n,r){let s=this.segments,o=zF(this),a=this._loop;n=n||0,r=r||this.points.length-n;for(let l of s)a&=o(e,this,l,{start:n,end:n+r-1});return!!a}draw(e,n,r,s){let o=this.options||{};(this.points||[]).length&&o.borderWidth&&(e.save(),WSe(e,this,r,s),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}return i})();function a$(i,t,e,n){let r=i.options,{[e]:s}=i.getProps([e],n);return Math.abs(t-s)<r.radius+r.hitRadius}var GSe=(()=>{class i extends Qs{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(e){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,e&&Object.assign(this,e)}inRange(e,n,r){let s=this.options,{x:o,y:a}=this.getProps(["x","y"],r);return Math.pow(e-o,2)+Math.pow(n-a,2)<Math.pow(s.hitRadius+s.radius,2)}inXRange(e,n){return a$(this,e,"x",n)}inYRange(e,n){return a$(this,e,"y",n)}getCenterPoint(e){let{x:n,y:r}=this.getProps(["x","y"],e);return{x:n,y:r}}size(e){e=e||this.options||{};let n=e.radius||0;n=Math.max(n,n&&e.hoverRadius||0);let r=n&&e.borderWidth||0;return(n+r)*2}draw(e,n){let r=this.options;this.skip||r.radius<.1||!Ho(this,n,this.size(r)/2)||(e.strokeStyle=r.borderColor,e.lineWidth=r.borderWidth,e.fillStyle=r.backgroundColor,f1(e,r,this.x,this.y))}getRange(){let e=this.options||{};return e.radius+e.hitRadius}}return i})();function G$(i,t){let{x:e,y:n,base:r,width:s,height:o}=i.getProps(["x","y","base","width","height"],t),a,l,c,d,u;return i.horizontal?(u=o/2,a=Math.min(e,r),l=Math.max(e,r),c=n-u,d=n+u):(u=s/2,a=e-u,l=e+u,c=Math.min(n,r),d=Math.max(n,r)),{left:a,top:c,right:l,bottom:d}}function Ic(i,t,e,n){return i?0:nn(t,e,n)}function $Se(i,t,e){let n=i.options.borderWidth,r=i.borderSkipped,s=aF(n);return{t:Ic(r.top,s.top,0,e),r:Ic(r.right,s.right,0,t),b:Ic(r.bottom,s.bottom,0,e),l:Ic(r.left,s.left,0,t)}}function KSe(i,t,e){let{enableBorderRadius:n}=i.getProps(["enableBorderRadius"]),r=i.options.borderRadius,s=Ec(r),o=Math.min(t,e),a=i.borderSkipped,l=n||pt(r);return{topLeft:Ic(!l||a.top||a.left,s.topLeft,0,o),topRight:Ic(!l||a.top||a.right,s.topRight,0,o),bottomLeft:Ic(!l||a.bottom||a.left,s.bottomLeft,0,o),bottomRight:Ic(!l||a.bottom||a.right,s.bottomRight,0,o)}}function YSe(i){let t=G$(i),e=t.right-t.left,n=t.bottom-t.top,r=$Se(i,e/2,n/2),s=KSe(i,e/2,n/2);return{outer:{x:t.left,y:t.top,w:e,h:n,radius:s},inner:{x:t.left+r.l,y:t.top+r.t,w:e-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,s.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,s.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,s.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,s.bottomRight-Math.max(r.b,r.r))}}}}function EF(i,t,e,n){let r=t===null,s=e===null,a=i&&!(r&&s)&&G$(i,n);return a&&(r||Wo(t,a.left,a.right))&&(s||Wo(e,a.top,a.bottom))}function QSe(i){return i.topLeft||i.topRight||i.bottomLeft||i.bottomRight}function XSe(i,t){i.rect(t.x,t.y,t.w,t.h)}function TF(i,t,e={}){let n=i.x!==e.x?-t:0,r=i.y!==e.y?-t:0,s=(i.x+i.w!==e.x+e.w?t:0)-n,o=(i.y+i.h!==e.y+e.h?t:0)-r;return{x:i.x+n,y:i.y+r,w:i.w+s,h:i.h+o,radius:i.radius}}var jF=class extends Qs{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){let{inflateAmount:e,options:{borderColor:n,backgroundColor:r}}=this,{inner:s,outer:o}=YSe(this),a=QSe(o.radius)?If:XSe;t.save(),(o.w!==s.w||o.h!==s.h)&&(t.beginPath(),a(t,TF(o,e,s)),t.clip(),a(t,TF(s,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,TF(s,e)),t.fillStyle=r,t.fill(),t.restore()}inRange(t,e,n){return EF(this,t,e,n)}inXRange(t,e){return EF(this,t,null,e)}inYRange(t,e){return EF(this,null,t,e)}getCenterPoint(t){let{x:e,y:n,base:r,horizontal:s}=this.getProps(["x","y","base","horizontal"],t);return{x:s?(e+r)/2:e,y:s?n:(n+r)/2}}getRange(t){return t==="x"?this.width/2:this.height/2}},ZSe=Object.freeze({__proto__:null,ArcElement:VF,BarElement:jF,LineElement:R1,PointElement:GSe}),UF=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],l$=UF.map(i=>i.replace("rgb(","rgba(").replace(")",", 0.5)"));function $$(i){return UF[i%UF.length]}function K$(i){return l$[i%l$.length]}function JSe(i,t){return i.borderColor=$$(t),i.backgroundColor=K$(t),++t}function eke(i,t){return i.backgroundColor=i.data.map(()=>$$(t++)),t}function tke(i,t){return i.backgroundColor=i.data.map(()=>K$(t++)),t}function ike(i){let t=0;return(e,n)=>{let r=i.getDatasetMeta(n).controller;r instanceof QF?t=eke(e,t):r instanceof F$?t=tke(e,t):r&&(t=JSe(e,t))}}function c$(i){let t;for(t in i)if(i[t].borderColor||i[t].backgroundColor)return!0;return!1}function nke(i){return i&&(i.borderColor||i.backgroundColor)}function rke(){return $t.borderColor!=="rgba(0,0,0,0.1)"||$t.backgroundColor!=="rgba(0,0,0,0.1)"}var ske={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(i,t,e){if(!e.enabled)return;let{data:{datasets:n},options:r}=i.config,{elements:s}=r,o=c$(n)||nke(r)||s&&c$(s)||rke();if(!e.forceOverride&&o)return;let a=ike(i);n.forEach(a)}};function oke(i,t,e,n,r){let s=r.samples||n;if(s>=e)return i.slice(t,t+e);let o=[],a=(e-2)/(s-2),l=0,c=t+e-1,d=t,u,h,m,_,b;for(o[l++]=i[d],u=0;u<s-2;u++){let v=0,I=0,A,F=Math.floor((u+1)*a)+1+t,M=Math.min(Math.floor((u+2)*a)+1,e)+t,L=M-F;for(A=F;A<M;A++)v+=i[A].x,I+=i[A].y;v/=L,I/=L;let U=Math.floor(u*a)+1+t,T=Math.min(Math.floor((u+1)*a)+1,e)+t,{x:C,y:E}=i[d];for(m=_=-1,A=U;A<T;A++)_=.5*Math.abs((C-v)*(i[A].y-E)-(C-i[A].x)*(I-E)),_>m&&(m=_,h=i[A],b=A);o[l++]=h,d=b}return o[l++]=i[c],o}function ake(i,t,e,n){let r=0,s=0,o,a,l,c,d,u,h,m,_,b,v=[],I=t+e-1,A=i[t].x,M=i[I].x-A;for(o=t;o<t+e;++o){a=i[o],l=(a.x-A)/M*n,c=a.y;let L=l|0;if(L===d)c<_?(_=c,u=o):c>b&&(b=c,h=o),r=(s*r+a.x)/++s;else{let U=o-1;if(!ut(u)&&!ut(h)){let T=Math.min(u,h),C=Math.max(u,h);T!==m&&T!==U&&v.push(Tt(ve({},i[T]),{x:r})),C!==m&&C!==U&&v.push(Tt(ve({},i[C]),{x:r}))}o>0&&U!==m&&v.push(i[U]),v.push(a),d=L,s=0,_=b=c,u=h=m=o}}return v}function Y$(i){if(i._decimated){let t=i._data;delete i._decimated,delete i._data,Object.defineProperty(i,"data",{configurable:!0,enumerable:!0,writable:!0,value:t})}}function d$(i){i.data.datasets.forEach(t=>{Y$(t)})}function lke(i,t){let e=t.length,n=0,r,{iScale:s}=i,{min:o,max:a,minDefined:l,maxDefined:c}=s.getUserBounds();return l&&(n=nn(Uo(t,s.axis,o).lo,0,e-1)),c?r=nn(Uo(t,s.axis,a).hi+1,n,e)-n:r=e-n,{start:n,count:r}}var cke={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(i,t,e)=>{if(!e.enabled){d$(i);return}let n=i.width;i.data.datasets.forEach((r,s)=>{let{_data:o,indexAxis:a}=r,l=i.getDatasetMeta(s),c=o||r.data;if(Df([a,i.options.indexAxis])==="y"||!l.controller.supportsDecimation)return;let d=i.scales[l.xAxisID];if(d.type!=="linear"&&d.type!=="time"||i.options.parsing)return;let{start:u,count:h}=lke(l,c),m=e.threshold||4*n;if(h<=m){Y$(r);return}ut(o)&&(r._data=c,delete r.data,Object.defineProperty(r,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(b){this._data=b}}));let _;switch(e.algorithm){case"lttb":_=oke(c,u,h,n,e);break;case"min-max":_=ake(c,u,h,n);break;default:throw new Error(`Unsupported decimation algorithm '${e.algorithm}'`)}r._decimated=_})},destroy(i){d$(i)}};function dke(i,t,e){let n=i.segments,r=i.points,s=t.points,o=[];for(let a of n){let{start:l,end:c}=a;c=XF(l,c,r);let d=HF(e,r[l],r[c],a.loop);if(!t.segments){o.push({source:a,target:d,start:r[l],end:r[c]});continue}let u=_F(t,d);for(let h of u){let m=HF(e,s[h.start],s[h.end],h.loop),_=gF(a,r,m);for(let b of _)o.push({source:b,target:h,start:{[e]:u$(d,m,"start",Math.max)},end:{[e]:u$(d,m,"end",Math.min)}})}}return o}function HF(i,t,e,n){if(n)return;let r=t[i],s=e[i];return i==="angle"&&(r=_r(r),s=_r(s)),{property:i,start:r,end:s}}function uke(i,t){let{x:e=null,y:n=null}=i||{},r=t.points,s=[];return t.segments.forEach(({start:o,end:a})=>{a=XF(o,a,r);let l=r[o],c=r[a];n!==null?(s.push({x:l.x,y:n}),s.push({x:c.x,y:n})):e!==null&&(s.push({x:e,y:l.y}),s.push({x:e,y:c.y}))}),s}function XF(i,t,e){for(;t>i;t--){let n=e[t];if(!isNaN(n.x)&&!isNaN(n.y))break}return t}function u$(i,t,e,n){return i&&t?n(i[e],t[e]):i?i[e]:t?t[e]:0}function Q$(i,t){let e=[],n=!1;return ei(i)?(n=!0,e=i):e=uke(i,t),e.length?new R1({points:e,options:{tension:0},_loop:n,_fullLoop:n}):null}function h$(i){return i&&i.fill!==!1}function hke(i,t,e){let r=i[t].fill,s=[t],o;if(!e)return r;for(;r!==!1&&s.indexOf(r)===-1;){if(!ki(r))return r;if(o=i[r],!o)return!1;if(o.visible)return r;s.push(r),r=o.fill}return!1}function mke(i,t,e){let n=_ke(i);if(pt(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return ki(r)&&Math.floor(r)===r?fke(n[0],t,r,e):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function fke(i,t,e,n){return(i==="-"||i==="+")&&(e=t+e),e===t||e<0||e>=n?!1:e}function pke(i,t){let e=null;return i==="start"?e=t.bottom:i==="end"?e=t.top:pt(i)?e=t.getPixelForValue(i.value):t.getBasePixel&&(e=t.getBasePixel()),e}function gke(i,t,e){let n;return i==="start"?n=e:i==="end"?n=t.options.reverse?t.min:t.max:pt(i)?n=i.value:n=t.getBaseValue(),n}function _ke(i){let t=i.options,e=t.fill,n=Xe(e&&e.target,e);return n===void 0&&(n=!!t.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function bke(i){let{scale:t,index:e,line:n}=i,r=[],s=n.segments,o=n.points,a=vke(t,e);a.push(Q$({x:null,y:t.bottom},n));for(let l=0;l<s.length;l++){let c=s[l];for(let d=c.start;d<=c.end;d++)yke(r,o[d],a)}return new R1({points:r,options:{}})}function vke(i,t){let e=[],n=i.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){let s=n[r];if(s.index===t)break;s.hidden||e.unshift(s.dataset)}return e}function yke(i,t,e){let n=[];for(let r=0;r<e.length;r++){let s=e[r],{first:o,last:a,point:l}=xke(s,t,"x");if(!(!l||o&&a)){if(o)n.unshift(l);else if(i.push(l),!a)break}}i.push(...n)}function xke(i,t,e){let n=i.interpolate(t,e);if(!n)return{};let r=n[e],s=i.segments,o=i.points,a=!1,l=!1;for(let c=0;c<s.length;c++){let d=s[c],u=o[d.start][e],h=o[d.end][e];if(Wo(r,u,h)){a=r===u,l=r===h;break}}return{first:a,last:l,point:n}}var O1=class{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){let{x:r,y:s,radius:o}=this;return e=e||{start:0,end:ii},t.arc(r,s,o,e.end,e.start,!0),!n.bounds}interpolate(t){let{x:e,y:n,radius:r}=this,s=t.angle;return{x:e+Math.cos(s)*r,y:n+Math.sin(s)*r,angle:s}}};function wke(i){let{chart:t,fill:e,line:n}=i;if(ki(e))return Cke(t,e);if(e==="stack")return bke(i);if(e==="shape")return!0;let r=Ske(i);return r instanceof O1?r:Q$(r,n)}function Cke(i,t){let e=i.getDatasetMeta(t);return e&&i.isDatasetVisible(t)?e.dataset:null}function Ske(i){return(i.scale||{}).getPointPositionForValue?Eke(i):kke(i)}function kke(i){let{scale:t={},fill:e}=i,n=pke(e,t);if(ki(n)){let r=t.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function Eke(i){let{scale:t,fill:e}=i,n=t.options,r=t.getLabels().length,s=n.reverse?t.max:t.min,o=gke(e,t,s),a=[];if(n.grid.circular){let l=t.getPointPositionForValue(0,s);return new O1({x:l.x,y:l.y,radius:t.getDistanceFromCenterForValue(o)})}for(let l=0;l<r;++l)a.push(t.getPointPositionForValue(l,o));return a}function IF(i,t,e){let n=wke(t),{chart:r,index:s,line:o,scale:a,axis:l}=t,c=o.options,d=c.fill,u=c.backgroundColor,{above:h=u,below:m=u}=d||{},_=r.getDatasetMeta(s),b=bF(r,_);n&&o.points.length&&(pb(i,e),Tke(i,{line:o,target:n,above:h,below:m,area:e,scale:a,axis:l,clip:b}),gb(i))}function Tke(i,t){let{line:e,target:n,above:r,below:s,area:o,scale:a,clip:l}=t,c=e._loop?"angle":t.axis;i.save(),c==="x"&&s!==r&&(m$(i,n,o.top),f$(i,{line:e,target:n,color:r,scale:a,property:c,clip:l}),i.restore(),i.save(),m$(i,n,o.bottom)),f$(i,{line:e,target:n,color:s,scale:a,property:c,clip:l}),i.restore()}function m$(i,t,e){let{segments:n,points:r}=t,s=!0,o=!1;i.beginPath();for(let a of n){let{start:l,end:c}=a,d=r[l],u=r[XF(l,c,r)];s?(i.moveTo(d.x,d.y),s=!1):(i.lineTo(d.x,e),i.lineTo(d.x,d.y)),o=!!t.pathSegment(i,a,{move:o}),o?i.closePath():i.lineTo(u.x,e)}i.lineTo(t.first().x,e),i.closePath(),i.clip()}function f$(i,t){let{line:e,target:n,property:r,color:s,scale:o,clip:a}=t,l=dke(e,n,r);for(let{source:c,target:d,start:u,end:h}of l){let{style:{backgroundColor:m=s}={}}=c,_=n!==!0;i.save(),i.fillStyle=m,Ike(i,o,a,_&&HF(r,u,h)),i.beginPath();let b=!!e.pathSegment(i,c),v;if(_){b?i.closePath():p$(i,n,h,r);let I=!!n.pathSegment(i,d,{move:b,reverse:!0});v=b&&I,v||p$(i,n,u,r)}i.closePath(),i.fill(v?"evenodd":"nonzero"),i.restore()}}function Ike(i,t,e,n){let r=t.chart.chartArea,{property:s,start:o,end:a}=n||{};if(s==="x"||s==="y"){let l,c,d,u;s==="x"?(l=o,c=r.top,d=a,u=r.bottom):(l=r.left,c=o,d=r.right,u=a),i.beginPath(),e&&(l=Math.max(l,e.left),d=Math.min(d,e.right),c=Math.max(c,e.top),u=Math.min(u,e.bottom)),i.rect(l,c,d-l,u-c),i.clip()}}function p$(i,t,e,n){let r=t.interpolate(e,n);r&&i.lineTo(r.x,r.y)}var Dke={id:"filler",afterDatasetsUpdate(i,t,e){let n=(i.data.datasets||[]).length,r=[],s,o,a,l;for(o=0;o<n;++o)s=i.getDatasetMeta(o),a=s.dataset,l=null,a&&a.options&&a instanceof R1&&(l={visible:i.isDatasetVisible(o),index:o,fill:mke(a,o,n),chart:i,axis:s.controller.options.indexAxis,scale:s.vScale,line:a}),s.$filler=l,r.push(l);for(o=0;o<n;++o)l=r[o],!(!l||l.fill===!1)&&(l.fill=hke(r,o,e.propagate))},beforeDraw(i,t,e){let n=e.drawTime==="beforeDraw",r=i.getSortedVisibleDatasetMetas(),s=i.chartArea;for(let o=r.length-1;o>=0;--o){let a=r[o].$filler;a&&(a.line.updateControlPoints(s,a.axis),n&&a.fill&&IF(i.ctx,a,s))}},beforeDatasetsDraw(i,t,e){if(e.drawTime!=="beforeDatasetsDraw")return;let n=i.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){let s=n[r].$filler;h$(s)&&IF(i.ctx,s,i.chartArea)}},beforeDatasetDraw(i,t,e){let n=t.meta.$filler;!h$(n)||e.drawTime!=="beforeDatasetDraw"||IF(i.ctx,n,i.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}},g$=(i,t)=>{let{boxHeight:e=t,boxWidth:n=t}=i;return i.usePointStyle&&(e=Math.min(e,t),n=i.pointStyleWidth||Math.min(n,t)),{boxWidth:n,boxHeight:e,itemHeight:Math.max(t,e)}},Mke=(i,t)=>i!==null&&t!==null&&i.datasetIndex===t.datasetIndex&&i.index===t.index,P1=class extends Qs{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){let t=this.options.labels||{},e=Gt(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter(n=>t.filter(n,this.chart.data))),t.sort&&(e=e.sort((n,r)=>t.sort(n,r,this.chart.data))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){let{options:t,ctx:e}=this;if(!t.display){this.width=this.height=0;return}let n=t.labels,r=Xi(n.font),s=r.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:l}=g$(n,s),c,d;e.font=r.string,this.isHorizontal()?(c=this.maxWidth,d=this._fitRows(o,s,a,l)+10):(d=this.maxHeight,c=this._fitCols(o,r,a,l)+10),this.width=Math.min(c,t.maxWidth||this.maxWidth),this.height=Math.min(d,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,r){let{ctx:s,maxWidth:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.lineWidths=[0],d=r+a,u=t;s.textAlign="left",s.textBaseline="middle";let h=-1,m=-d;return this.legendItems.forEach((_,b)=>{let v=n+e/2+s.measureText(_.text).width;(b===0||c[c.length-1]+v+2*a>o)&&(u+=d,c[c.length-(b>0?0:1)]=0,m+=d,h++),l[b]={left:0,top:m,row:h,width:v,height:r},c[c.length-1]+=v+a}),u}_fitCols(t,e,n,r){let{ctx:s,maxHeight:o,options:{labels:{padding:a}}}=this,l=this.legendHitBoxes=[],c=this.columnSizes=[],d=o-t,u=a,h=0,m=0,_=0,b=0;return this.legendItems.forEach((v,I)=>{let{itemWidth:A,itemHeight:F}=Ake(n,e,s,v,r);I>0&&m+F+2*a>d&&(u+=h+a,c.push({width:h,height:m}),_+=h+a,b++,h=m=0),l[I]={left:_,top:m,col:b,width:A,height:F},h=Math.max(h,A),m+=F+a}),u+=h,c.push({width:h,height:m}),u}adjustHitBoxes(){if(!this.options.display)return;let t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:r},rtl:s}}=this,o=_u(s,this.left,this.width);if(this.isHorizontal()){let a=0,l=Tn(n,this.left+r,this.right-this.lineWidths[a]);for(let c of e)a!==c.row&&(a=c.row,l=Tn(n,this.left+r,this.right-this.lineWidths[a])),c.top+=this.top+t+r,c.left=o.leftForLtr(o.x(l),c.width),l+=c.width+r}else{let a=0,l=Tn(n,this.top+t+r,this.bottom-this.columnSizes[a].height);for(let c of e)c.col!==a&&(a=c.col,l=Tn(n,this.top+t+r,this.bottom-this.columnSizes[a].height)),c.top=l,c.left+=this.left+r,c.left=o.leftForLtr(o.x(c.left),c.width),l+=c.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){let t=this.ctx;pb(t,this),this._draw(),gb(t)}}_draw(){let{options:t,columnSizes:e,lineWidths:n,ctx:r}=this,{align:s,labels:o}=t,a=$t.color,l=_u(t.rtl,this.left,this.width),c=Xi(o.font),{padding:d}=o,u=c.size,h=u/2,m;this.drawTitle(),r.textAlign=l.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=c.string;let{boxWidth:_,boxHeight:b,itemHeight:v}=g$(o,u),I=function(U,T,C){if(isNaN(_)||_<=0||isNaN(b)||b<0)return;r.save();let E=Xe(C.lineWidth,1);if(r.fillStyle=Xe(C.fillStyle,a),r.lineCap=Xe(C.lineCap,"butt"),r.lineDashOffset=Xe(C.lineDashOffset,0),r.lineJoin=Xe(C.lineJoin,"miter"),r.lineWidth=E,r.strokeStyle=Xe(C.strokeStyle,a),r.setLineDash(Xe(C.lineDash,[])),o.usePointStyle){let D={radius:b*Math.SQRT2/2,pointStyle:C.pointStyle,rotation:C.rotation,borderWidth:E},S=l.xPlus(U,_/2),R=T+h;oF(r,D,S,R,o.pointStyleWidth&&_)}else{let D=T+Math.max((u-b)/2,0),S=l.leftForLtr(U,_),R=Ec(C.borderRadius);r.beginPath(),Object.values(R).some(w=>w!==0)?If(r,{x:S,y:D,w:_,h:b,radius:R}):r.rect(S,D,_,b),r.fill(),E!==0&&r.stroke()}r.restore()},A=function(U,T,C){kc(r,C.text,U,T+v/2,c,{strikethrough:C.hidden,textAlign:l.textAlign(C.textAlign)})},F=this.isHorizontal(),M=this._computeTitleHeight();F?m={x:Tn(s,this.left+d,this.right-n[0]),y:this.top+d+M,line:0}:m={x:this.left+d,y:Tn(s,this.top+M+d,this.bottom-e[0].height),line:0},fF(this.ctx,t.textDirection);let L=v+d;this.legendItems.forEach((U,T)=>{r.strokeStyle=U.fontColor,r.fillStyle=U.fontColor;let C=r.measureText(U.text).width,E=l.textAlign(U.textAlign||(U.textAlign=o.textAlign)),D=_+h+C,S=m.x,R=m.y;l.setWidth(this.width),F?T>0&&S+D+d>this.right&&(R=m.y+=L,m.line++,S=m.x=Tn(s,this.left+d,this.right-n[m.line])):T>0&&R+L>this.bottom&&(S=m.x=S+e[m.line].width+d,m.line++,R=m.y=Tn(s,this.top+M+d,this.bottom-e[m.line].height));let w=l.x(S);if(I(w,R,U),S=gG(E,S+_+h,F?S+D:this.right,t.rtl),A(l.x(S),R,U),F)m.x+=D+d;else if(typeof U.text!="string"){let k=c.lineHeight;m.y+=X$(U,k)+d}else m.y+=L}),pF(this.ctx,t.textDirection)}drawTitle(){let t=this.options,e=t.title,n=Xi(e.font),r=In(e.padding);if(!e.display)return;let s=_u(t.rtl,this.left,this.width),o=this.ctx,a=e.position,l=n.size/2,c=r.top+l,d,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),d=this.top+c,u=Tn(t.align,u,this.right-h);else{let _=this.columnSizes.reduce((b,v)=>Math.max(b,v.height),0);d=c+Tn(t.align,this.top,this.bottom-_-t.labels.padding-this._computeTitleHeight())}let m=Tn(a,u,u+h);o.textAlign=s.textAlign(h1(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,kc(o,e.text,m,d,n)}_computeTitleHeight(){let t=this.options.title,e=Xi(t.font),n=In(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,r,s;if(Wo(t,this.left,this.right)&&Wo(e,this.top,this.bottom)){for(s=this.legendHitBoxes,n=0;n<s.length;++n)if(r=s[n],Wo(t,r.left,r.left+r.width)&&Wo(e,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(t){let e=this.options;if(!Rke(t.type,e))return;let n=this._getLegendItemAt(t.x,t.y);if(t.type==="mousemove"||t.type==="mouseout"){let r=this._hoveredItem,s=Mke(r,n);r&&!s&&Gt(e.onLeave,[t,r,this],this),this._hoveredItem=n,n&&!s&&Gt(e.onHover,[t,n,this],this)}else n&&Gt(e.onClick,[t,n,this],this)}};function Ake(i,t,e,n,r){let s=Oke(n,i,t,e),o=Pke(r,n,t.lineHeight);return{itemWidth:s,itemHeight:o}}function Oke(i,t,e,n){let r=i.text;return r&&typeof r!="string"&&(r=r.reduce((s,o)=>s.length>o.length?s:o)),t+e.size/2+n.measureText(r).width}function Pke(i,t,e){let n=i;return typeof t.text!="string"&&(n=X$(t,e)),n}function X$(i,t){let e=i.text?i.text.length:0;return t*e}function Rke(i,t){return!!((i==="mousemove"||i==="mouseout")&&(t.onHover||t.onLeave)||t.onClick&&(i==="click"||i==="mouseup"))}var Fke={id:"legend",_element:P1,start(i,t,e){let n=i.legend=new P1({ctx:i.ctx,options:e,chart:i});Vn.configure(i,n,e),Vn.addBox(i,n)},stop(i){Vn.removeBox(i,i.legend),delete i.legend},beforeUpdate(i,t,e){let n=i.legend;Vn.configure(i,n,e),n.options=e},afterUpdate(i){let t=i.legend;t.buildLabels(),t.adjustHitBoxes()},afterEvent(i,t){t.replay||i.legend.handleEvent(t.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(i,t,e){let n=t.datasetIndex,r=e.chart;r.isDatasetVisible(n)?(r.hide(n),t.hidden=!0):(r.show(n),t.hidden=!1)},onHover:null,onLeave:null,labels:{color:i=>i.chart.options.color,boxWidth:40,padding:10,generateLabels(i){let t=i.data.datasets,{labels:{usePointStyle:e,pointStyle:n,textAlign:r,color:s,useBorderRadius:o,borderRadius:a}}=i.legend.options;return i._getSortedDatasetMetas().map(l=>{let c=l.controller.getStyle(e?0:void 0),d=In(c.borderWidth);return{text:t[l.index].label,fillStyle:c.backgroundColor,fontColor:s,hidden:!l.visible,lineCap:c.borderCapStyle,lineDash:c.borderDash,lineDashOffset:c.borderDashOffset,lineJoin:c.borderJoinStyle,lineWidth:(d.width+d.height)/4,strokeStyle:c.borderColor,pointStyle:n||c.pointStyle,rotation:c.rotation,textAlign:r||c.textAlign,borderRadius:o&&(a||c.borderRadius),datasetIndex:l.index}},this)}},title:{color:i=>i.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:i=>!i.startsWith("on"),labels:{_scriptable:i=>!["generateLabels","filter","sort"].includes(i)}}},kb=class extends Qs{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){let n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=t,this.height=this.bottom=e;let r=ei(n.text)?n.text.length:1;this._padding=In(n.padding);let s=r*Xi(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=s:this.width=s}isHorizontal(){let t=this.options.position;return t==="top"||t==="bottom"}_drawArgs(t){let{top:e,left:n,bottom:r,right:s,options:o}=this,a=o.align,l=0,c,d,u;return this.isHorizontal()?(d=Tn(a,n,s),u=e+t,c=s-n):(o.position==="left"?(d=n+t,u=Tn(a,r,e),l=ti*-.5):(d=s-t,u=Tn(a,e,r),l=ti*.5),c=r-e),{titleX:d,titleY:u,maxWidth:c,rotation:l}}draw(){let t=this.ctx,e=this.options;if(!e.display)return;let n=Xi(e.font),s=n.lineHeight/2+this._padding.top,{titleX:o,titleY:a,maxWidth:l,rotation:c}=this._drawArgs(s);kc(t,e.text,0,0,n,{color:e.color,maxWidth:l,rotation:c,textAlign:h1(e.align),textBaseline:"middle",translation:[o,a]})}};function Nke(i,t){let e=new kb({ctx:i.ctx,options:t,chart:i});Vn.configure(i,e,t),Vn.addBox(i,e),i.titleBlock=e}var Lke={id:"title",_element:kb,start(i,t,e){Nke(i,e)},stop(i){let t=i.titleBlock;Vn.removeBox(i,t),delete i.titleBlock},beforeUpdate(i,t,e){let n=i.titleBlock;Vn.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},C1=new WeakMap,Bke={id:"subtitle",start(i,t,e){let n=new kb({ctx:i.ctx,options:e,chart:i});Vn.configure(i,n,e),Vn.addBox(i,n),C1.set(i,n)},stop(i){Vn.removeBox(i,C1.get(i)),C1.delete(i)},beforeUpdate(i,t,e){let n=C1.get(i);Vn.configure(i,n,e),n.options=e},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}},Cb={average(i){if(!i.length)return!1;let t,e,n=new Set,r=0,s=0;for(t=0,e=i.length;t<e;++t){let a=i[t].element;if(a&&a.hasValue()){let l=a.tooltipPosition();n.add(l.x),r+=l.y,++s}}return s===0||n.size===0?!1:{x:[...n].reduce((a,l)=>a+l)/n.size,y:r/s}},nearest(i,t){if(!i.length)return!1;let e=t.x,n=t.y,r=Number.POSITIVE_INFINITY,s,o,a;for(s=0,o=i.length;s<o;++s){let l=i[s].element;if(l&&l.hasValue()){let c=l.getCenterPoint(),d=a1(t,c);d<r&&(r=d,a=l)}}if(a){let l=a.tooltipPosition();e=l.x,n=l.y}return{x:e,y:n}}};function Go(i,t){return t&&(ei(t)?Array.prototype.push.apply(i,t):i.push(t)),i}function Na(i){return(typeof i=="string"||i instanceof String)&&i.indexOf(`
`)>-1?i.split(`
`):i}function Vke(i,t){let{element:e,datasetIndex:n,index:r}=t,s=i.getDatasetMeta(n).controller,{label:o,value:a}=s.getLabelAndValue(r);return{chart:i,label:o,parsed:s.getParsed(r),raw:i.data.datasets[n].data[r],formattedValue:a,dataset:s.getDataset(),dataIndex:r,datasetIndex:n,element:e}}function _$(i,t){let e=i.chart.ctx,{body:n,footer:r,title:s}=i,{boxWidth:o,boxHeight:a}=t,l=Xi(t.bodyFont),c=Xi(t.titleFont),d=Xi(t.footerFont),u=s.length,h=r.length,m=n.length,_=In(t.padding),b=_.height,v=0,I=n.reduce((M,L)=>M+L.before.length+L.lines.length+L.after.length,0);if(I+=i.beforeBody.length+i.afterBody.length,u&&(b+=u*c.lineHeight+(u-1)*t.titleSpacing+t.titleMarginBottom),I){let M=t.displayColors?Math.max(a,l.lineHeight):l.lineHeight;b+=m*M+(I-m)*l.lineHeight+(I-1)*t.bodySpacing}h&&(b+=t.footerMarginTop+h*d.lineHeight+(h-1)*t.footerSpacing);let A=0,F=function(M){v=Math.max(v,e.measureText(M).width+A)};return e.save(),e.font=c.string,Ft(i.title,F),e.font=l.string,Ft(i.beforeBody.concat(i.afterBody),F),A=t.displayColors?o+2+t.boxPadding:0,Ft(n,M=>{Ft(M.before,F),Ft(M.lines,F),Ft(M.after,F)}),A=0,e.font=d.string,Ft(i.footer,F),e.restore(),v+=_.width,{width:v,height:b}}function zke(i,t){let{y:e,height:n}=t;return e<n/2?"top":e>i.height-n/2?"bottom":"center"}function jke(i,t,e,n){let{x:r,width:s}=n,o=e.caretSize+e.caretPadding;if(i==="left"&&r+s+o>t.width||i==="right"&&r-s-o<0)return!0}function Uke(i,t,e,n){let{x:r,width:s}=e,{width:o,chartArea:{left:a,right:l}}=i,c="center";return n==="center"?c=r<=(a+l)/2?"left":"right":r<=s/2?c="left":r>=o-s/2&&(c="right"),jke(c,i,t,e)&&(c="center"),c}function b$(i,t,e){let n=e.yAlign||t.yAlign||zke(i,e);return{xAlign:e.xAlign||t.xAlign||Uke(i,t,e,n),yAlign:n}}function Hke(i,t){let{x:e,width:n}=i;return t==="right"?e-=n:t==="center"&&(e-=n/2),e}function qke(i,t,e){let{y:n,height:r}=i;return t==="top"?n+=e:t==="bottom"?n-=r+e:n-=r/2,n}function v$(i,t,e,n){let{caretSize:r,caretPadding:s,cornerRadius:o}=i,{xAlign:a,yAlign:l}=e,c=r+s,{topLeft:d,topRight:u,bottomLeft:h,bottomRight:m}=Ec(o),_=Hke(t,a),b=qke(t,l,c);return l==="center"?a==="left"?_+=c:a==="right"&&(_-=c):a==="left"?_-=Math.max(d,h)+r:a==="right"&&(_+=Math.max(u,m)+r),{x:nn(_,0,n.width-t.width),y:nn(b,0,n.height-t.height)}}function S1(i,t,e){let n=In(e.padding);return t==="center"?i.x+i.width/2:t==="right"?i.x+i.width-n.right:i.x+n.left}function y$(i){return Go([],Na(i))}function Wke(i,t,e){return Ra(i,{tooltip:t,tooltipItems:e,type:"tooltip"})}function x$(i,t){let e=t&&t.dataset&&t.dataset.tooltip&&t.dataset.tooltip.callbacks;return e?i.override(e):i}var Z$={beforeTitle:qo,title(i){if(i.length>0){let t=i[0],e=t.chart.data.labels,n=e?e.length:0;if(this&&this.options&&this.options.mode==="dataset")return t.dataset.label||"";if(t.label)return t.label;if(n>0&&t.dataIndex<n)return e[t.dataIndex]}return""},afterTitle:qo,beforeBody:qo,beforeLabel:qo,label(i){if(this&&this.options&&this.options.mode==="dataset")return i.label+": "+i.formattedValue||i.formattedValue;let t=i.dataset.label||"";t&&(t+=": ");let e=i.formattedValue;return ut(e)||(t+=e),t},labelColor(i){let e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(i){let e=i.chart.getDatasetMeta(i.datasetIndex).controller.getStyle(i.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:qo,afterBody:qo,beforeFooter:qo,footer:qo,afterFooter:qo};function vr(i,t,e,n){let r=i[t].call(e,n);return typeof r>"u"?Z$[t].call(e,n):r}var w$=(()=>{class i extends Qs{static positioners=Cb;constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){let e=this._cachedAnimations;if(e)return e;let n=this.chart,r=this.options.setContext(this.getContext()),s=r.enabled&&n.options.animation&&r.animations,o=new I1(this.chart,s);return s._cacheable&&(this._cachedAnimations=Object.freeze(o)),o}getContext(){return this.$context||(this.$context=Wke(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,n){let{callbacks:r}=n,s=vr(r,"beforeTitle",this,e),o=vr(r,"title",this,e),a=vr(r,"afterTitle",this,e),l=[];return l=Go(l,Na(s)),l=Go(l,Na(o)),l=Go(l,Na(a)),l}getBeforeBody(e,n){return y$(vr(n.callbacks,"beforeBody",this,e))}getBody(e,n){let{callbacks:r}=n,s=[];return Ft(e,o=>{let a={before:[],lines:[],after:[]},l=x$(r,o);Go(a.before,Na(vr(l,"beforeLabel",this,o))),Go(a.lines,vr(l,"label",this,o)),Go(a.after,Na(vr(l,"afterLabel",this,o))),s.push(a)}),s}getAfterBody(e,n){return y$(vr(n.callbacks,"afterBody",this,e))}getFooter(e,n){let{callbacks:r}=n,s=vr(r,"beforeFooter",this,e),o=vr(r,"footer",this,e),a=vr(r,"afterFooter",this,e),l=[];return l=Go(l,Na(s)),l=Go(l,Na(o)),l=Go(l,Na(a)),l}_createItems(e){let n=this._active,r=this.chart.data,s=[],o=[],a=[],l=[],c,d;for(c=0,d=n.length;c<d;++c)l.push(Vke(this.chart,n[c]));return e.filter&&(l=l.filter((u,h,m)=>e.filter(u,h,m,r))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,r))),Ft(l,u=>{let h=x$(e.callbacks,u);s.push(vr(h,"labelColor",this,u)),o.push(vr(h,"labelPointStyle",this,u)),a.push(vr(h,"labelTextColor",this,u))}),this.labelColors=s,this.labelPointStyles=o,this.labelTextColors=a,this.dataPoints=l,l}update(e,n){let r=this.options.setContext(this.getContext()),s=this._active,o,a=[];if(!s.length)this.opacity!==0&&(o={opacity:0});else{let l=Cb[r.position].call(this,s,this._eventPosition);a=this._createItems(r),this.title=this.getTitle(a,r),this.beforeBody=this.getBeforeBody(a,r),this.body=this.getBody(a,r),this.afterBody=this.getAfterBody(a,r),this.footer=this.getFooter(a,r);let c=this._size=_$(this,r),d=Object.assign({},l,c),u=b$(this.chart,r,d),h=v$(r,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,o={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=a,this.$context=void 0,o&&this._resolveAnimations().update(this,o),e&&r.external&&r.external.call(this,{chart:this.chart,tooltip:this,replay:n})}drawCaret(e,n,r,s){let o=this.getCaretPosition(e,r,s);n.lineTo(o.x1,o.y1),n.lineTo(o.x2,o.y2),n.lineTo(o.x3,o.y3)}getCaretPosition(e,n,r){let{xAlign:s,yAlign:o}=this,{caretSize:a,cornerRadius:l}=r,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=Ec(l),{x:m,y:_}=e,{width:b,height:v}=n,I,A,F,M,L,U;return o==="center"?(L=_+v/2,s==="left"?(I=m,A=I-a,M=L+a,U=L-a):(I=m+b,A=I+a,M=L-a,U=L+a),F=I):(s==="left"?A=m+Math.max(c,u)+a:s==="right"?A=m+b-Math.max(d,h)-a:A=this.caretX,o==="top"?(M=_,L=M-a,I=A-a,F=A+a):(M=_+v,L=M+a,I=A+a,F=A-a),U=M),{x1:I,x2:A,x3:F,y1:M,y2:L,y3:U}}drawTitle(e,n,r){let s=this.title,o=s.length,a,l,c;if(o){let d=_u(r.rtl,this.x,this.width);for(e.x=S1(this,r.titleAlign,r),n.textAlign=d.textAlign(r.titleAlign),n.textBaseline="middle",a=Xi(r.titleFont),l=r.titleSpacing,n.fillStyle=r.titleColor,n.font=a.string,c=0;c<o;++c)n.fillText(s[c],d.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+l,c+1===o&&(e.y+=r.titleMarginBottom-l)}}_drawColorBox(e,n,r,s,o){let a=this.labelColors[r],l=this.labelPointStyles[r],{boxHeight:c,boxWidth:d}=o,u=Xi(o.bodyFont),h=S1(this,"left",o),m=s.x(h),_=c<u.lineHeight?(u.lineHeight-c)/2:0,b=n.y+_;if(o.usePointStyle){let v={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},I=s.leftForLtr(m,d)+d/2,A=b+c/2;e.strokeStyle=o.multiKeyBackground,e.fillStyle=o.multiKeyBackground,f1(e,v,I,A),e.strokeStyle=a.borderColor,e.fillStyle=a.backgroundColor,f1(e,v,I,A)}else{e.lineWidth=pt(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,e.strokeStyle=a.borderColor,e.setLineDash(a.borderDash||[]),e.lineDashOffset=a.borderDashOffset||0;let v=s.leftForLtr(m,d),I=s.leftForLtr(s.xPlus(m,1),d-2),A=Ec(a.borderRadius);Object.values(A).some(F=>F!==0)?(e.beginPath(),e.fillStyle=o.multiKeyBackground,If(e,{x:v,y:b,w:d,h:c,radius:A}),e.fill(),e.stroke(),e.fillStyle=a.backgroundColor,e.beginPath(),If(e,{x:I,y:b+1,w:d-2,h:c-2,radius:A}),e.fill()):(e.fillStyle=o.multiKeyBackground,e.fillRect(v,b,d,c),e.strokeRect(v,b,d,c),e.fillStyle=a.backgroundColor,e.fillRect(I,b+1,d-2,c-2))}e.fillStyle=this.labelTextColors[r]}drawBody(e,n,r){let{body:s}=this,{bodySpacing:o,bodyAlign:a,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=r,h=Xi(r.bodyFont),m=h.lineHeight,_=0,b=_u(r.rtl,this.x,this.width),v=function(E){n.fillText(E,b.x(e.x+_),e.y+m/2),e.y+=m+o},I=b.textAlign(a),A,F,M,L,U,T,C;for(n.textAlign=a,n.textBaseline="middle",n.font=h.string,e.x=S1(this,I,r),n.fillStyle=r.bodyColor,Ft(this.beforeBody,v),_=l&&I!=="right"?a==="center"?d/2+u:d+2+u:0,L=0,T=s.length;L<T;++L){for(A=s[L],F=this.labelTextColors[L],n.fillStyle=F,Ft(A.before,v),M=A.lines,l&&M.length&&(this._drawColorBox(n,e,L,b,r),m=Math.max(h.lineHeight,c)),U=0,C=M.length;U<C;++U)v(M[U]),m=h.lineHeight;Ft(A.after,v)}_=0,m=h.lineHeight,Ft(this.afterBody,v),e.y-=o}drawFooter(e,n,r){let s=this.footer,o=s.length,a,l;if(o){let c=_u(r.rtl,this.x,this.width);for(e.x=S1(this,r.footerAlign,r),e.y+=r.footerMarginTop,n.textAlign=c.textAlign(r.footerAlign),n.textBaseline="middle",a=Xi(r.footerFont),n.fillStyle=r.footerColor,n.font=a.string,l=0;l<o;++l)n.fillText(s[l],c.x(e.x),e.y+a.lineHeight/2),e.y+=a.lineHeight+r.footerSpacing}}drawBackground(e,n,r,s){let{xAlign:o,yAlign:a}=this,{x:l,y:c}=e,{width:d,height:u}=r,{topLeft:h,topRight:m,bottomLeft:_,bottomRight:b}=Ec(s.cornerRadius);n.fillStyle=s.backgroundColor,n.strokeStyle=s.borderColor,n.lineWidth=s.borderWidth,n.beginPath(),n.moveTo(l+h,c),a==="top"&&this.drawCaret(e,n,r,s),n.lineTo(l+d-m,c),n.quadraticCurveTo(l+d,c,l+d,c+m),a==="center"&&o==="right"&&this.drawCaret(e,n,r,s),n.lineTo(l+d,c+u-b),n.quadraticCurveTo(l+d,c+u,l+d-b,c+u),a==="bottom"&&this.drawCaret(e,n,r,s),n.lineTo(l+_,c+u),n.quadraticCurveTo(l,c+u,l,c+u-_),a==="center"&&o==="left"&&this.drawCaret(e,n,r,s),n.lineTo(l,c+h),n.quadraticCurveTo(l,c,l+h,c),n.closePath(),n.fill(),s.borderWidth>0&&n.stroke()}_updateAnimationTarget(e){let n=this.chart,r=this.$animations,s=r&&r.x,o=r&&r.y;if(s||o){let a=Cb[e.position].call(this,this._active,this._eventPosition);if(!a)return;let l=this._size=_$(this,e),c=Object.assign({},a,this._size),d=b$(n,e,c),u=v$(e,c,d,n);(s._to!==u.x||o._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=a.x,this.caretY=a.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){let n=this.options.setContext(this.getContext()),r=this.opacity;if(!r)return;this._updateAnimationTarget(n);let s={width:this.width,height:this.height},o={x:this.x,y:this.y};r=Math.abs(r)<.001?0:r;let a=In(n.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;n.enabled&&l&&(e.save(),e.globalAlpha=r,this.drawBackground(o,e,s,n),fF(e,n.textDirection),o.y+=a.top,this.drawTitle(o,e,n),this.drawBody(o,e,n),this.drawFooter(o,e,n),pF(e,n.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,n){let r=this._active,s=e.map(({datasetIndex:l,index:c})=>{let d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),o=!mb(r,s),a=this._positionChanged(s,n);(o||a)&&(this._active=s,this._eventPosition=n,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,n,r=!0){if(n&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;let s=this.options,o=this._active||[],a=this._getActiveElements(e,o,n,r),l=this._positionChanged(a,e),c=n||!mb(a,o)||l;return c&&(this._active=a,(s.enabled||s.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,n))),c}_getActiveElements(e,n,r,s){let o=this.options;if(e.type==="mouseout")return[];if(!s)return n.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);let a=this.chart.getElementsAtEventForMode(e,o.mode,o,r);return o.reverse&&a.reverse(),a}_positionChanged(e,n){let{caretX:r,caretY:s,options:o}=this,a=Cb[o.position].call(this,e,n);return a!==!1&&(r!==a.x||s!==a.y)}}return i})(),Gke={id:"tooltip",_element:w$,positioners:Cb,afterInit(i,t,e){e&&(i.tooltip=new w$({chart:i,options:e}))},beforeUpdate(i,t,e){i.tooltip&&i.tooltip.initialize(e)},reset(i,t,e){i.tooltip&&i.tooltip.initialize(e)},afterDraw(i){let t=i.tooltip;if(t&&t._willRender()){let e={tooltip:t};if(i.notifyPlugins("beforeTooltipDraw",Tt(ve({},e),{cancelable:!0}))===!1)return;t.draw(i.ctx),i.notifyPlugins("afterTooltipDraw",e)}},afterEvent(i,t){if(i.tooltip){let e=t.replay;i.tooltip.handleEvent(t.event,e,t.inChartArea)&&(t.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(i,t)=>t.bodyFont.size,boxWidth:(i,t)=>t.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:Z$},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:i=>i!=="filter"&&i!=="itemSort"&&i!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]},$ke=Object.freeze({__proto__:null,Colors:ske,Decimation:cke,Filler:Dke,Legend:Fke,SubTitle:Bke,Title:Lke,Tooltip:Gke}),Kke=(i,t,e,n)=>(typeof t=="string"?(e=i.push(t)-1,n.unshift({index:e,label:t})):isNaN(t)&&(e=null),e);function Yke(i,t,e,n){let r=i.indexOf(t);if(r===-1)return Kke(i,t,e,n);let s=i.lastIndexOf(t);return r!==s?e:r}var Qke=(i,t)=>i===null?null:nn(Math.round(i),0,t);function C$(i){let t=this.getLabels();return i>=0&&i<t.length?t[i]:i}var Xke=(()=>{class i extends yu{static id="category";static defaults={ticks:{callback:C$}};constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){let n=this._addedLabels;if(n.length){let r=this.getLabels();for(let{index:s,label:o}of n)r[s]===o&&r.splice(s,1);this._addedLabels=[]}super.init(e)}parse(e,n){if(ut(e))return null;let r=this.getLabels();return n=isFinite(n)&&r[n]===e?n:Yke(r,e,Xe(n,e),this._addedLabels),Qke(n,r.length-1)}determineDataLimits(){let{minDefined:e,maxDefined:n}=this.getUserBounds(),{min:r,max:s}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(r=0),n||(s=this.getLabels().length-1)),this.min=r,this.max=s}buildTicks(){let e=this.min,n=this.max,r=this.options.offset,s=[],o=this.getLabels();o=e===0&&n===o.length-1?o:o.slice(e,n+1),this._valueRange=Math.max(o.length-(r?0:1),1),this._startValue=this.min-(r?.5:0);for(let a=e;a<=n;a++)s.push({value:a});return s}getLabelForValue(e){return C$.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){let n=this.ticks;return e<0||e>n.length-1?null:this.getPixelForValue(n[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}return i})();function Zke(i,t){let e=[],{bounds:r,step:s,min:o,max:a,precision:l,count:c,maxTicks:d,maxDigits:u,includeBounds:h}=i,m=s||1,_=d-1,{min:b,max:v}=t,I=!ut(o),A=!ut(a),F=!ut(c),M=(v-b)/(u+1),L=$2((v-b)/_/m)*m,U,T,C,E;if(L<1e-14&&!I&&!A)return[{value:b},{value:v}];E=Math.ceil(v/L)-Math.floor(b/L),E>_&&(L=$2(E*L/_/m)*m),ut(l)||(U=Math.pow(10,l),L=Math.ceil(L*U)/U),r==="ticks"?(T=Math.floor(b/L)*L,C=Math.ceil(v/L)*L):(T=b,C=v),I&&A&&s&&cG((a-o)/s,L/1e3)?(E=Math.round(Math.min((a-o)/L,d)),L=(a-o)/E,T=o,C=a):F?(T=I?o:T,C=A?a:C,E=c-1,L=(C-T)/E):(E=(C-T)/L,kf(E,Math.round(E),L/1e3)?E=Math.round(E):E=Math.ceil(E));let D=Math.max(Y2(L),Y2(T));U=Math.pow(10,ut(l)?D:l),T=Math.round(T*U)/U,C=Math.round(C*U)/U;let S=0;for(I&&(h&&T!==o?(e.push({value:o}),T<o&&S++,kf(Math.round((T+S*L)*U)/U,o,S$(o,M,i))&&S++):T<o&&S++);S<E;++S){let R=Math.round((T+S*L)*U)/U;if(A&&R>a)break;e.push({value:R})}return A&&h&&C!==a?e.length&&kf(e[e.length-1].value,a,S$(a,M,i))?e[e.length-1].value=a:e.push({value:a}):(!A||C===a)&&e.push({value:C}),e}function S$(i,t,{horizontal:e,minRotation:n}){let r=xs(n),s=(e?Math.sin(r):Math.cos(r))||.001,o=.75*t*(""+i).length;return Math.min(t/s,o)}var Of=class extends yu{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return ut(t)||(typeof t=="number"||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){let{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds(),{min:r,max:s}=this,o=l=>r=e?r:l,a=l=>s=n?s:l;if(t){let l=Ys(r),c=Ys(s);l<0&&c<0?a(0):l>0&&c>0&&o(0)}if(r===s){let l=s===0?1:Math.abs(s*.05);a(s+l),t||o(r-l)}this.min=r,this.max=s}getTickLimit(){let t=this.options.ticks,{maxTicksLimit:e,stepSize:n}=t,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),e=e||11),e&&(r=Math.min(e,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){let t=this.options,e=t.ticks,n=this.getTickLimit();n=Math.max(2,n);let r={maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:e.includeBounds!==!1},s=this._range||this,o=Zke(r,s);return t.bounds==="ticks"&&K2(o,this,"value"),t.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){let t=this.ticks,e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){let r=(n-e)/Math.max(t.length-1,1)/2;e-=r,n+=r}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return Tf(t,this.chart.options.locale,this.options.ticks.format)}},qF=class extends Of{static id="linear";static defaults={ticks:{callback:fb.formatters.numeric}};determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=ki(t)?t:0,this.max=ki(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){let t=this.isHorizontal(),e=t?this.width:this.height,n=xs(this.options.ticks.minRotation),r=(t?Math.sin(n):Math.cos(n))||.001,s=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,s.lineHeight/r))}getPixelForValue(t){return t===null?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}},Eb=i=>Math.floor(Oa(i)),vu=(i,t)=>Math.pow(10,Eb(i)+t);function k$(i){return i/Math.pow(10,Eb(i))===1}function E$(i,t,e){let n=Math.pow(10,e),r=Math.floor(i/n);return Math.ceil(t/n)-r}function Jke(i,t){let e=t-i,n=Eb(e);for(;E$(i,t,n)>10;)n++;for(;E$(i,t,n)<10;)n--;return Math.min(n,Eb(i))}function eEe(i,{min:t,max:e}){t=br(i.min,t);let n=[],r=Eb(t),s=Jke(t,e),o=s<0?Math.pow(10,Math.abs(s)):1,a=Math.pow(10,s),l=r>s?Math.pow(10,r):0,c=Math.round((t-l)*o)/o,d=Math.floor((t-l)/a/10)*a*10,u=Math.floor((c-d)/Math.pow(10,s)),h=br(i.min,Math.round((l+d+u*Math.pow(10,s))*o)/o);for(;h<e;)n.push({value:h,major:k$(h),significand:u}),u>=10?u=u<15?15:20:u++,u>=20&&(s++,u=2,o=s>=0?1:o),h=Math.round((l+d+u*Math.pow(10,s))*o)/o;let m=br(i.max,h);return n.push({value:m,major:k$(m),significand:u}),n}var WF=class extends yu{static id="logarithmic";static defaults={ticks:{callback:fb.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){let n=Of.prototype.parse.apply(this,[t,e]);if(n===0){this._zero=!0;return}return ki(n)&&n>0?n:null}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!0);this.min=ki(t)?Math.max(0,t):null,this.max=ki(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!ki(this._userMin)&&(this.min=t===vu(this.min,0)?vu(this.min,-1):vu(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){let{minDefined:t,maxDefined:e}=this.getUserBounds(),n=this.min,r=this.max,s=a=>n=t?n:a,o=a=>r=e?r:a;n===r&&(n<=0?(s(1),o(10)):(s(vu(n,-1)),o(vu(r,1)))),n<=0&&s(vu(r,-1)),r<=0&&o(vu(n,1)),this.min=n,this.max=r}buildTicks(){let t=this.options,e={min:this._userMin,max:this._userMax},n=eEe(e,this);return t.bounds==="ticks"&&K2(n,this,"value"),t.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(t){return t===void 0?"0":Tf(t,this.chart.options.locale,this.options.ticks.format)}configure(){let t=this.min;super.configure(),this._startValue=Oa(t),this._valueRange=Oa(this.max)-Oa(t)}getPixelForValue(t){return(t===void 0||t===0)&&(t=this.min),t===null||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(Oa(t)-this._startValue)/this._valueRange)}getValueForPixel(t){let e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}};function GF(i){let t=i.ticks;if(t.display&&i.display){let e=In(t.backdropPadding);return Xe(t.font&&t.font.size,$t.font.size)+e.height}return 0}function tEe(i,t,e){return e=ei(e)?e:[e],{w:bG(i,t.string,e),h:e.length*t.lineHeight}}function T$(i,t,e,n,r){return i===n||i===r?{start:t-e/2,end:t+e/2}:i<n||i>r?{start:t-e,end:t}:{start:t,end:t+e}}function iEe(i){let t={l:i.left+i._padding.left,r:i.right-i._padding.right,t:i.top+i._padding.top,b:i.bottom-i._padding.bottom},e=Object.assign({},t),n=[],r=[],s=i._pointLabels.length,o=i.options.pointLabels,a=o.centerPointLabels?ti/s:0;for(let l=0;l<s;l++){let c=o.setContext(i.getPointLabelContext(l));r[l]=c.padding;let d=i.getPointPosition(l,i.drawingArea+r[l],a),u=Xi(c.font),h=tEe(i.ctx,u,i._pointLabels[l]);n[l]=h;let m=_r(i.getIndexAngle(l)+a),_=Math.round(d1(m)),b=T$(_,d.x,h.w,0,180),v=T$(_,d.y,h.h,90,270);nEe(e,t,m,b,v)}i.setCenterPoint(t.l-e.l,e.r-t.r,t.t-e.t,e.b-t.b),i._pointLabelItems=oEe(i,n,r)}function nEe(i,t,e,n,r){let s=Math.abs(Math.sin(e)),o=Math.abs(Math.cos(e)),a=0,l=0;n.start<t.l?(a=(t.l-n.start)/s,i.l=Math.min(i.l,t.l-a)):n.end>t.r&&(a=(n.end-t.r)/s,i.r=Math.max(i.r,t.r+a)),r.start<t.t?(l=(t.t-r.start)/o,i.t=Math.min(i.t,t.t-l)):r.end>t.b&&(l=(r.end-t.b)/o,i.b=Math.max(i.b,t.b+l))}function rEe(i,t,e){let n=i.drawingArea,{extra:r,additionalAngle:s,padding:o,size:a}=e,l=i.getPointPosition(t,n+r+o,s),c=Math.round(d1(_r(l.angle+Oi))),d=cEe(l.y,a.h,c),u=aEe(c),h=lEe(l.x,a.w,u);return{visible:!0,x:l.x,y:d,textAlign:u,left:h,top:d,right:h+a.w,bottom:d+a.h}}function sEe(i,t){if(!t)return!0;let{left:e,top:n,right:r,bottom:s}=i;return!(Ho({x:e,y:n},t)||Ho({x:e,y:s},t)||Ho({x:r,y:n},t)||Ho({x:r,y:s},t))}function oEe(i,t,e){let n=[],r=i._pointLabels.length,s=i.options,{centerPointLabels:o,display:a}=s.pointLabels,l={extra:GF(s)/2,additionalAngle:o?ti/r:0},c;for(let d=0;d<r;d++){l.padding=e[d],l.size=t[d];let u=rEe(i,d,l);n.push(u),a==="auto"&&(u.visible=sEe(u,c),u.visible&&(c=u))}return n}function aEe(i){return i===0||i===180?"center":i<180?"left":"right"}function lEe(i,t,e){return e==="right"?i-=t:e==="center"&&(i-=t/2),i}function cEe(i,t,e){return e===90||e===270?i-=t/2:(e>270||e<90)&&(i-=t),i}function dEe(i,t,e){let{left:n,top:r,right:s,bottom:o}=e,{backdropColor:a}=t;if(!ut(a)){let l=Ec(t.borderRadius),c=In(t.backdropPadding);i.fillStyle=a;let d=n-c.left,u=r-c.top,h=s-n+c.width,m=o-r+c.height;Object.values(l).some(_=>_!==0)?(i.beginPath(),If(i,{x:d,y:u,w:h,h:m,radius:l}),i.fill()):i.fillRect(d,u,h,m)}}function uEe(i,t){let{ctx:e,options:{pointLabels:n}}=i;for(let r=t-1;r>=0;r--){let s=i._pointLabelItems[r];if(!s.visible)continue;let o=n.setContext(i.getPointLabelContext(r));dEe(e,o,s);let a=Xi(o.font),{x:l,y:c,textAlign:d}=s;kc(e,i._pointLabels[r],l,c+a.lineHeight/2,a,{color:o.color,textAlign:d,textBaseline:"middle"})}}function J$(i,t,e,n){let{ctx:r}=i;if(e)r.arc(i.xCenter,i.yCenter,t,0,ii);else{let s=i.getPointPosition(0,t);r.moveTo(s.x,s.y);for(let o=1;o<n;o++)s=i.getPointPosition(o,t),r.lineTo(s.x,s.y)}}function hEe(i,t,e,n,r){let s=i.ctx,o=t.circular,{color:a,lineWidth:l}=t;!o&&!n||!a||!l||e<0||(s.save(),s.strokeStyle=a,s.lineWidth=l,s.setLineDash(r.dash||[]),s.lineDashOffset=r.dashOffset,s.beginPath(),J$(i,e,o,n),s.closePath(),s.stroke(),s.restore())}function mEe(i,t,e){return Ra(i,{label:e,index:t,type:"pointLabel"})}var $F=class extends Of{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:fb.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(t){return t},padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){let t=this._padding=In(GF(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){let{min:t,max:e}=this.getMinMax(!1);this.min=ki(t)&&!isNaN(t)?t:0,this.max=ki(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/GF(this.options))}generateTickLabels(t){Of.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map((e,n)=>{let r=Gt(this.options.pointLabels.callback,[e,n],this);return r||r===0?r:""}).filter((e,n)=>this.chart.getDataVisibility(n))}fit(){let t=this.options;t.display&&t.pointLabels.display?iEe(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,r){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,r))}getIndexAngle(t){let e=ii/(this._pointLabels.length||1),n=this.options.startAngle||0;return _r(t*e+xs(n))}getDistanceFromCenterForValue(t){if(ut(t))return NaN;let e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(ut(t))return NaN;let e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){let e=this._pointLabels||[];if(t>=0&&t<e.length){let n=e[t];return mEe(this.getContext(),t,n)}}getPointPosition(t,e,n=0){let r=this.getIndexAngle(t)-Oi+n;return{x:Math.cos(r)*e+this.xCenter,y:Math.sin(r)*e+this.yCenter,angle:r}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){let{left:e,top:n,right:r,bottom:s}=this._pointLabelItems[t];return{left:e,top:n,right:r,bottom:s}}drawBackground(){let{backgroundColor:t,grid:{circular:e}}=this.options;if(t){let n=this.ctx;n.save(),n.beginPath(),J$(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){let t=this.ctx,e=this.options,{angleLines:n,grid:r,border:s}=e,o=this._pointLabels.length,a,l,c;if(e.pointLabels.display&&uEe(this,o),r.display&&this.ticks.forEach((d,u)=>{if(u!==0||u===0&&this.min<0){l=this.getDistanceFromCenterForValue(d.value);let h=this.getContext(u),m=r.setContext(h),_=s.setContext(h);hEe(this,m,l,o,_)}}),n.display){for(t.save(),a=o-1;a>=0;a--){let d=n.setContext(this.getPointLabelContext(a)),{color:u,lineWidth:h}=d;!h||!u||(t.lineWidth=h,t.strokeStyle=u,t.setLineDash(d.borderDash),t.lineDashOffset=d.borderDashOffset,l=this.getDistanceFromCenterForValue(e.reverse?this.min:this.max),c=this.getPointPosition(a,l),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(c.x,c.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){let t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;let r=this.getIndexAngle(0),s,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(r),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach((a,l)=>{if(l===0&&this.min>=0&&!e.reverse)return;let c=n.setContext(this.getContext(l)),d=Xi(c.font);if(s=this.getDistanceFromCenterForValue(this.ticks[l].value),c.showLabelBackdrop){t.font=d.string,o=t.measureText(a.label).width,t.fillStyle=c.backdropColor;let u=In(c.backdropPadding);t.fillRect(-o/2-u.left,-s-d.size/2-u.top,o+u.width,d.size+u.height)}kc(t,a.label,0,-s,d,{color:c.color,strokeColor:c.textStrokeColor,strokeWidth:c.textStrokeWidth})}),t.restore()}drawTitle(){}},F1={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},yr=Object.keys(F1);function I$(i,t){return i-t}function D$(i,t){if(ut(t))return null;let e=i._adapter,{parser:n,round:r,isoWeekday:s}=i._parseOpts,o=t;return typeof n=="function"&&(o=n(o)),ki(o)||(o=typeof n=="string"?e.parse(o,n):e.parse(o)),o===null?null:(r&&(o=r==="week"&&(gu(s)||s===!0)?e.startOf(o,"isoWeek",s):e.startOf(o,r)),+o)}function M$(i,t,e,n){let r=yr.length;for(let s=yr.indexOf(i);s<r-1;++s){let o=F1[yr[s]],a=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((e-t)/(a*o.size))<=n)return yr[s]}return yr[r-1]}function fEe(i,t,e,n,r){for(let s=yr.length-1;s>=yr.indexOf(e);s--){let o=yr[s];if(F1[o].common&&i._adapter.diff(r,n,o)>=t-1)return o}return yr[e?yr.indexOf(e):0]}function pEe(i){for(let t=yr.indexOf(i)+1,e=yr.length;t<e;++t)if(F1[yr[t]].common)return yr[t]}function A$(i,t,e){if(!e)i[t]=!0;else if(e.length){let{lo:n,hi:r}=u1(e,t),s=e[n]>=t?e[n]:e[r];i[s]=!0}}function gEe(i,t,e,n){let r=i._adapter,s=+r.startOf(t[0].value,n),o=t[t.length-1].value,a,l;for(a=s;a<=o;a=+r.add(a,1,n))l=e[a],l>=0&&(t[l].major=!0);return t}function O$(i,t,e){let n=[],r={},s=t.length,o,a;for(o=0;o<s;++o)a=t[o],r[a]=o,n.push({value:a,major:!1});return s===0||!e?n:gEe(i,n,r,e)}var KF=(()=>{class i extends yu{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,n={}){let r=e.time||(e.time={}),s=this._adapter=new I1e._date(e.adapters.date);s.init(n),Cf(r.displayFormats,s.formats()),this._parseOpts={parser:r.parser,round:r.round,isoWeekday:r.isoWeekday},super.init(e),this._normalized=n.normalized}parse(e,n){return e===void 0?null:D$(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){let e=this.options,n=this._adapter,r=e.time.unit||"day",{min:s,max:o,minDefined:a,maxDefined:l}=this.getUserBounds();function c(d){!a&&!isNaN(d.min)&&(s=Math.min(s,d.min)),!l&&!isNaN(d.max)&&(o=Math.max(o,d.max))}(!a||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),s=ki(s)&&!isNaN(s)?s:+n.startOf(Date.now(),r),o=ki(o)&&!isNaN(o)?o:+n.endOf(Date.now(),r)+1,this.min=Math.min(s,o-1),this.max=Math.max(s+1,o)}_getLabelBounds(){let e=this.getLabelTimestamps(),n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;return e.length&&(n=e[0],r=e[e.length-1]),{min:n,max:r}}buildTicks(){let e=this.options,n=e.time,r=e.ticks,s=r.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&s.length&&(this.min=this._userMin||s[0],this.max=this._userMax||s[s.length-1]);let o=this.min,a=this.max,l=hG(s,o,a);return this._unit=n.unit||(r.autoSkip?M$(n.minUnit,this.min,this.max,this._getLabelCapacity(o)):fEe(this,l.length,n.minUnit,this.min,this.max)),this._majorUnit=!r.major.enabled||this._unit==="year"?void 0:pEe(this._unit),this.initOffsets(s),e.reverse&&l.reverse(),O$(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let n=0,r=0,s,o;this.options.offset&&e.length&&(s=this.getDecimalForValue(e[0]),e.length===1?n=1-s:n=(this.getDecimalForValue(e[1])-s)/2,o=this.getDecimalForValue(e[e.length-1]),e.length===1?r=o:r=(o-this.getDecimalForValue(e[e.length-2]))/2);let a=e.length<3?.5:.25;n=nn(n,0,a),r=nn(r,0,a),this._offsets={start:n,end:r,factor:1/(n+1+r)}}_generate(){let e=this._adapter,n=this.min,r=this.max,s=this.options,o=s.time,a=o.unit||M$(o.minUnit,n,r,this._getLabelCapacity(n)),l=Xe(s.ticks.stepSize,1),c=a==="week"?o.isoWeekday:!1,d=gu(c)||c===!0,u={},h=n,m,_;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":a),e.diff(r,n,a)>1e5*l)throw new Error(n+" and "+r+" are too far apart with stepSize of "+l+" "+a);let b=s.ticks.source==="data"&&this.getDataTimestamps();for(m=h,_=0;m<r;m=+e.add(m,l,a),_++)A$(u,m,b);return(m===r||s.bounds==="ticks"||_===1)&&A$(u,m,b),Object.keys(u).sort(I$).map(v=>+v)}getLabelForValue(e){let n=this._adapter,r=this.options.time;return r.tooltipFormat?n.format(e,r.tooltipFormat):n.format(e,r.displayFormats.datetime)}format(e,n){let s=this.options.time.displayFormats,o=this._unit,a=n||s[o];return this._adapter.format(e,a)}_tickFormatFunction(e,n,r,s){let o=this.options,a=o.ticks.callback;if(a)return Gt(a,[e,n,r],this);let l=o.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],m=r[n],_=d&&h&&m&&m.major;return this._adapter.format(e,s||(_?h:u))}generateTickLabels(e){let n,r,s;for(n=0,r=e.length;n<r;++n)s=e[n],s.label=this._tickFormatFunction(s.value,n,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){let n=this._offsets,r=this.getDecimalForValue(e);return this.getPixelForDecimal((n.start+r)*n.factor)}getValueForPixel(e){let n=this._offsets,r=this.getDecimalForPixel(e)/n.factor-n.end;return this.min+r*(this.max-this.min)}_getLabelSize(e){let n=this.options.ticks,r=this.ctx.measureText(e).width,s=xs(this.isHorizontal()?n.maxRotation:n.minRotation),o=Math.cos(s),a=Math.sin(s),l=this._resolveTickFontOptions(0).size;return{w:r*o+l*a,h:r*a+l*o}}_getLabelCapacity(e){let n=this.options.time,r=n.displayFormats,s=r[n.unit]||r.millisecond,o=this._tickFormatFunction(e,0,O$(this,[e],this._majorUnit),s),a=this._getLabelSize(o),l=Math.floor(this.isHorizontal()?this.width/a.w:this.height/a.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],n,r;if(e.length)return e;let s=this.getMatchingVisibleMetas();if(this._normalized&&s.length)return this._cache.data=s[0].controller.getAllParsedValues(this);for(n=0,r=s.length;n<r;++n)e=e.concat(s[n].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){let e=this._cache.labels||[],n,r;if(e.length)return e;let s=this.getLabels();for(n=0,r=s.length;n<r;++n)e.push(D$(this,s[n]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Z2(e.sort(I$))}}return i})();function k1(i,t,e){let n=0,r=i.length-1,s,o,a,l;e?(t>=i[n].pos&&t<=i[r].pos&&({lo:n,hi:r}=Uo(i,"pos",t)),{pos:s,time:a}=i[n],{pos:o,time:l}=i[r]):(t>=i[n].time&&t<=i[r].time&&({lo:n,hi:r}=Uo(i,"time",t)),{time:s,pos:a}=i[n],{time:o,pos:l}=i[r]);let c=o-s;return c?a+(l-a)*(t-s)/c:a}var YF=class extends KF{static id="timeseries";static defaults=KF.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){let t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=k1(e,this.min),this._tableRange=k1(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){let{min:e,max:n}=this,r=[],s=[],o,a,l,c,d;for(o=0,a=t.length;o<a;++o)c=t[o],c>=e&&c<=n&&r.push(c);if(r.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,a=r.length;o<a;++o)d=r[o+1],l=r[o-1],c=r[o],Math.round((d+l)/2)!==c&&s.push({time:c,pos:o/(a-1)});return s}_generate(){let t=this.min,e=this.max,n=super.getDataTimestamps();return(!n.includes(t)||!n.length)&&n.splice(0,0,t),(!n.includes(e)||n.length===1)&&n.push(e),n.sort((r,s)=>r-s)}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;let e=this.getDataTimestamps(),n=this.getLabelTimestamps();return e.length&&n.length?t=this.normalize(e.concat(n)):t=e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(k1(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){let e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return k1(this._table,n*this._tableRange+this._minPos,!0)}},_Ee=Object.freeze({__proto__:null,CategoryScale:Xke,LinearScale:qF,LogarithmicScale:WF,RadialLinearScale:$F,TimeScale:KF,TimeSeriesScale:YF}),eK=[T1e,ZSe,$ke,_Ee];var bEe=typeof global=="object"&&global&&global.Object===Object&&global,N1=bEe;var vEe=typeof self=="object"&&self&&self.Object===Object&&self,yEe=N1||vEe||Function("return this")(),ws=yEe;var xEe=ws.Symbol,Pf=xEe;var tK=Object.prototype,wEe=tK.hasOwnProperty,CEe=tK.toString,Db=Pf?Pf.toStringTag:void 0;function SEe(i){var t=wEe.call(i,Db),e=i[Db];try{i[Db]=void 0;var n=!0}catch{}var r=CEe.call(i);return n&&(t?i[Db]=e:delete i[Db]),r}var iK=SEe;var kEe=Object.prototype,EEe=kEe.toString;function TEe(i){return EEe.call(i)}var nK=TEe;var IEe="[object Null]",DEe="[object Undefined]",rK=Pf?Pf.toStringTag:void 0;function MEe(i){return i==null?i===void 0?DEe:IEe:rK&&rK in Object(i)?iK(i):nK(i)}var Mc=MEe;function AEe(i){return i!=null&&typeof i=="object"}var Ko=AEe;var OEe=Array.isArray,Mb=OEe;function PEe(i){var t=typeof i;return i!=null&&(t=="object"||t=="function")}var xr=PEe;function REe(i){return i}var L1=REe;var FEe="[object AsyncFunction]",NEe="[object Function]",LEe="[object GeneratorFunction]",BEe="[object Proxy]";function VEe(i){if(!xr(i))return!1;var t=Mc(i);return t==NEe||t==LEe||t==FEe||t==BEe}var Rf=VEe;var zEe=ws["__core-js_shared__"],B1=zEe;var sK=function(){var i=/[^.]+$/.exec(B1&&B1.keys&&B1.keys.IE_PROTO||"");return i?"Symbol(src)_1."+i:""}();function jEe(i){return!!sK&&sK in i}var oK=jEe;var UEe=Function.prototype,HEe=UEe.toString;function qEe(i){if(i!=null){try{return HEe.call(i)}catch{}try{return i+""}catch{}}return""}var aK=qEe;var WEe=/[\\^$.*+?()[\]{}|]/g,GEe=/^\[object .+?Constructor\]$/,$Ee=Function.prototype,KEe=Object.prototype,YEe=$Ee.toString,QEe=KEe.hasOwnProperty,XEe=RegExp("^"+YEe.call(QEe).replace(WEe,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function ZEe(i){if(!xr(i)||oK(i))return!1;var t=Rf(i)?XEe:GEe;return t.test(aK(i))}var lK=ZEe;function JEe(i,t){return i?.[t]}var cK=JEe;function eTe(i,t){var e=cK(i,t);return lK(e)?e:void 0}var Ff=eTe;var dK=Object.create,tTe=function(){function i(){}return function(t){if(!xr(t))return{};if(dK)return dK(t);i.prototype=t;var e=new i;return i.prototype=void 0,e}}(),uK=tTe;function iTe(i,t,e){switch(e.length){case 0:return i.call(t);case 1:return i.call(t,e[0]);case 2:return i.call(t,e[0],e[1]);case 3:return i.call(t,e[0],e[1],e[2])}return i.apply(t,e)}var hK=iTe;function nTe(i,t){var e=-1,n=i.length;for(t||(t=Array(n));++e<n;)t[e]=i[e];return t}var mK=nTe;var rTe=800,sTe=16,oTe=Date.now;function aTe(i){var t=0,e=0;return function(){var n=oTe(),r=sTe-(n-e);if(e=n,r>0){if(++t>=rTe)return arguments[0]}else t=0;return i.apply(void 0,arguments)}}var fK=aTe;function lTe(i){return function(){return i}}var pK=lTe;var cTe=function(){try{var i=Ff(Object,"defineProperty");return i({},"",{}),i}catch{}}(),Nf=cTe;var dTe=Nf?function(i,t){return Nf(i,"toString",{configurable:!0,enumerable:!1,value:pK(t),writable:!0})}:L1,gK=dTe;var uTe=fK(gK),_K=uTe;var hTe=9007199254740991,mTe=/^(?:0|[1-9]\d*)$/;function fTe(i,t){var e=typeof i;return t=t??hTe,!!t&&(e=="number"||e!="symbol"&&mTe.test(i))&&i>-1&&i%1==0&&i<t}var V1=fTe;function pTe(i,t,e){t=="__proto__"&&Nf?Nf(i,t,{configurable:!0,enumerable:!0,value:e,writable:!0}):i[t]=e}var Lf=pTe;function gTe(i,t){return i===t||i!==i&&t!==t}var Ac=gTe;var _Te=Object.prototype,bTe=_Te.hasOwnProperty;function vTe(i,t,e){var n=i[t];(!(bTe.call(i,t)&&Ac(n,e))||e===void 0&&!(t in i))&&Lf(i,t,e)}var bK=vTe;function yTe(i,t,e,n){var r=!e;e||(e={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=n?n(e[a],i[a],a,e,i):void 0;l===void 0&&(l=i[a]),r?Lf(e,a,l):bK(e,a,l)}return e}var vK=yTe;var yK=Math.max;function xTe(i,t,e){return t=yK(t===void 0?i.length-1:t,0),function(){for(var n=arguments,r=-1,s=yK(n.length-t,0),o=Array(s);++r<s;)o[r]=n[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=n[r];return a[t]=e(o),hK(i,this,a)}}var xK=xTe;function wTe(i,t){return _K(xK(i,t,L1),i+"")}var wK=wTe;var CTe=9007199254740991;function STe(i){return typeof i=="number"&&i>-1&&i%1==0&&i<=CTe}var z1=STe;function kTe(i){return i!=null&&z1(i.length)&&!Rf(i)}var Bf=kTe;function ETe(i,t,e){if(!xr(e))return!1;var n=typeof t;return(n=="number"?Bf(e)&&V1(t,e.length):n=="string"&&t in e)?Ac(e[t],i):!1}var CK=ETe;function TTe(i){return wK(function(t,e){var n=-1,r=e.length,s=r>1?e[r-1]:void 0,o=r>2?e[2]:void 0;for(s=i.length>3&&typeof s=="function"?(r--,s):void 0,o&&CK(e[0],e[1],o)&&(s=r<3?void 0:s,r=1),t=Object(t);++n<r;){var a=e[n];a&&i(t,a,n,s)}return t})}var SK=TTe;var ITe=Object.prototype;function DTe(i){var t=i&&i.constructor,e=typeof t=="function"&&t.prototype||ITe;return i===e}var j1=DTe;function MTe(i,t){for(var e=-1,n=Array(i);++e<i;)n[e]=t(e);return n}var kK=MTe;var ATe="[object Arguments]";function OTe(i){return Ko(i)&&Mc(i)==ATe}var ZF=OTe;var EK=Object.prototype,PTe=EK.hasOwnProperty,RTe=EK.propertyIsEnumerable,FTe=ZF(function(){return arguments}())?ZF:function(i){return Ko(i)&&PTe.call(i,"callee")&&!RTe.call(i,"callee")},Ab=FTe;function NTe(){return!1}var TK=NTe;var MK=typeof exports=="object"&&exports&&!exports.nodeType&&exports,IK=MK&&typeof module=="object"&&module&&!module.nodeType&&module,LTe=IK&&IK.exports===MK,DK=LTe?ws.Buffer:void 0,BTe=DK?DK.isBuffer:void 0,VTe=BTe||TK,U1=VTe;var zTe="[object Arguments]",jTe="[object Array]",UTe="[object Boolean]",HTe="[object Date]",qTe="[object Error]",WTe="[object Function]",GTe="[object Map]",$Te="[object Number]",KTe="[object Object]",YTe="[object RegExp]",QTe="[object Set]",XTe="[object String]",ZTe="[object WeakMap]",JTe="[object ArrayBuffer]",eIe="[object DataView]",tIe="[object Float32Array]",iIe="[object Float64Array]",nIe="[object Int8Array]",rIe="[object Int16Array]",sIe="[object Int32Array]",oIe="[object Uint8Array]",aIe="[object Uint8ClampedArray]",lIe="[object Uint16Array]",cIe="[object Uint32Array]",oi={};oi[tIe]=oi[iIe]=oi[nIe]=oi[rIe]=oi[sIe]=oi[oIe]=oi[aIe]=oi[lIe]=oi[cIe]=!0;oi[zTe]=oi[jTe]=oi[JTe]=oi[UTe]=oi[eIe]=oi[HTe]=oi[qTe]=oi[WTe]=oi[GTe]=oi[$Te]=oi[KTe]=oi[YTe]=oi[QTe]=oi[XTe]=oi[ZTe]=!1;function dIe(i){return Ko(i)&&z1(i.length)&&!!oi[Mc(i)]}var AK=dIe;function uIe(i){return function(t){return i(t)}}var OK=uIe;var PK=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Ob=PK&&typeof module=="object"&&module&&!module.nodeType&&module,hIe=Ob&&Ob.exports===PK,JF=hIe&&N1.process,mIe=function(){try{var i=Ob&&Ob.require&&Ob.require("util").types;return i||JF&&JF.binding&&JF.binding("util")}catch{}}(),eN=mIe;var RK=eN&&eN.isTypedArray,fIe=RK?OK(RK):AK,H1=fIe;var pIe=Object.prototype,gIe=pIe.hasOwnProperty;function _Ie(i,t){var e=Mb(i),n=!e&&Ab(i),r=!e&&!n&&U1(i),s=!e&&!n&&!r&&H1(i),o=e||n||r||s,a=o?kK(i.length,String):[],l=a.length;for(var c in i)(t||gIe.call(i,c))&&!(o&&(c=="length"||r&&(c=="offset"||c=="parent")||s&&(c=="buffer"||c=="byteLength"||c=="byteOffset")||V1(c,l)))&&a.push(c);return a}var FK=_Ie;function bIe(i,t){return function(e){return i(t(e))}}var NK=bIe;function vIe(i){var t=[];if(i!=null)for(var e in Object(i))t.push(e);return t}var LK=vIe;var yIe=Object.prototype,xIe=yIe.hasOwnProperty;function wIe(i){if(!xr(i))return LK(i);var t=j1(i),e=[];for(var n in i)n=="constructor"&&(t||!xIe.call(i,n))||e.push(n);return e}var BK=wIe;function CIe(i){return Bf(i)?FK(i,!0):BK(i)}var q1=CIe;var SIe=Ff(Object,"create"),La=SIe;function kIe(){this.__data__=La?La(null):{},this.size=0}var VK=kIe;function EIe(i){var t=this.has(i)&&delete this.__data__[i];return this.size-=t?1:0,t}var zK=EIe;var TIe="__lodash_hash_undefined__",IIe=Object.prototype,DIe=IIe.hasOwnProperty;function MIe(i){var t=this.__data__;if(La){var e=t[i];return e===TIe?void 0:e}return DIe.call(t,i)?t[i]:void 0}var jK=MIe;var AIe=Object.prototype,OIe=AIe.hasOwnProperty;function PIe(i){var t=this.__data__;return La?t[i]!==void 0:OIe.call(t,i)}var UK=PIe;var RIe="__lodash_hash_undefined__";function FIe(i,t){var e=this.__data__;return this.size+=this.has(i)?0:1,e[i]=La&&t===void 0?RIe:t,this}var HK=FIe;function Vf(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var n=i[t];this.set(n[0],n[1])}}Vf.prototype.clear=VK;Vf.prototype.delete=zK;Vf.prototype.get=jK;Vf.prototype.has=UK;Vf.prototype.set=HK;var tN=Vf;function NIe(){this.__data__=[],this.size=0}var qK=NIe;function LIe(i,t){for(var e=i.length;e--;)if(Ac(i[e][0],t))return e;return-1}var Oc=LIe;var BIe=Array.prototype,VIe=BIe.splice;function zIe(i){var t=this.__data__,e=Oc(t,i);if(e<0)return!1;var n=t.length-1;return e==n?t.pop():VIe.call(t,e,1),--this.size,!0}var WK=zIe;function jIe(i){var t=this.__data__,e=Oc(t,i);return e<0?void 0:t[e][1]}var GK=jIe;function UIe(i){return Oc(this.__data__,i)>-1}var $K=UIe;function HIe(i,t){var e=this.__data__,n=Oc(e,i);return n<0?(++this.size,e.push([i,t])):e[n][1]=t,this}var KK=HIe;function zf(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var n=i[t];this.set(n[0],n[1])}}zf.prototype.clear=qK;zf.prototype.delete=WK;zf.prototype.get=GK;zf.prototype.has=$K;zf.prototype.set=KK;var Pc=zf;var qIe=Ff(ws,"Map"),W1=qIe;function WIe(){this.size=0,this.__data__={hash:new tN,map:new(W1||Pc),string:new tN}}var YK=WIe;function GIe(i){var t=typeof i;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?i!=="__proto__":i===null}var QK=GIe;function $Ie(i,t){var e=i.__data__;return QK(t)?e[typeof t=="string"?"string":"hash"]:e.map}var Rc=$Ie;function KIe(i){var t=Rc(this,i).delete(i);return this.size-=t?1:0,t}var XK=KIe;function YIe(i){return Rc(this,i).get(i)}var ZK=YIe;function QIe(i){return Rc(this,i).has(i)}var JK=QIe;function XIe(i,t){var e=Rc(this,i),n=e.size;return e.set(i,t),this.size+=e.size==n?0:1,this}var eY=XIe;function jf(i){var t=-1,e=i==null?0:i.length;for(this.clear();++t<e;){var n=i[t];this.set(n[0],n[1])}}jf.prototype.clear=YK;jf.prototype.delete=XK;jf.prototype.get=ZK;jf.prototype.has=JK;jf.prototype.set=eY;var tY=jf;var ZIe=NK(Object.getPrototypeOf,Object),G1=ZIe;var JIe="[object Object]",eDe=Function.prototype,tDe=Object.prototype,iY=eDe.toString,iDe=tDe.hasOwnProperty,nDe=iY.call(Object);function rDe(i){if(!Ko(i)||Mc(i)!=JIe)return!1;var t=G1(i);if(t===null)return!0;var e=iDe.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&iY.call(e)==nDe}var nY=rDe;function sDe(){this.__data__=new Pc,this.size=0}var rY=sDe;function oDe(i){var t=this.__data__,e=t.delete(i);return this.size=t.size,e}var sY=oDe;function aDe(i){return this.__data__.get(i)}var oY=aDe;function lDe(i){return this.__data__.has(i)}var aY=lDe;var cDe=200;function dDe(i,t){var e=this.__data__;if(e instanceof Pc){var n=e.__data__;if(!W1||n.length<cDe-1)return n.push([i,t]),this.size=++e.size,this;e=this.__data__=new tY(n)}return e.set(i,t),this.size=e.size,this}var lY=dDe;function Uf(i){var t=this.__data__=new Pc(i);this.size=t.size}Uf.prototype.clear=rY;Uf.prototype.delete=sY;Uf.prototype.get=oY;Uf.prototype.has=aY;Uf.prototype.set=lY;var cY=Uf;var mY=typeof exports=="object"&&exports&&!exports.nodeType&&exports,dY=mY&&typeof module=="object"&&module&&!module.nodeType&&module,uDe=dY&&dY.exports===mY,uY=uDe?ws.Buffer:void 0,hY=uY?uY.allocUnsafe:void 0;function hDe(i,t){if(t)return i.slice();var e=i.length,n=hY?hY(e):new i.constructor(e);return i.copy(n),n}var fY=hDe;var mDe=ws.Uint8Array,iN=mDe;function fDe(i){var t=new i.constructor(i.byteLength);return new iN(t).set(new iN(i)),t}var pY=fDe;function pDe(i,t){var e=t?pY(i.buffer):i.buffer;return new i.constructor(e,i.byteOffset,i.length)}var gY=pDe;function gDe(i){return typeof i.constructor=="function"&&!j1(i)?uK(G1(i)):{}}var _Y=gDe;function _De(i){return function(t,e,n){for(var r=-1,s=Object(t),o=n(t),a=o.length;a--;){var l=o[i?a:++r];if(e(s[l],l,s)===!1)break}return t}}var bY=_De;var bDe=bY(),vY=bDe;function vDe(i,t,e){(e!==void 0&&!Ac(i[t],e)||e===void 0&&!(t in i))&&Lf(i,t,e)}var Pb=vDe;function yDe(i){return Ko(i)&&Bf(i)}var yY=yDe;function xDe(i,t){if(!(t==="constructor"&&typeof i[t]=="function")&&t!="__proto__")return i[t]}var Rb=xDe;function wDe(i){return vK(i,q1(i))}var xY=wDe;function CDe(i,t,e,n,r,s,o){var a=Rb(i,e),l=Rb(t,e),c=o.get(l);if(c){Pb(i,e,c);return}var d=s?s(a,l,e+"",i,t,o):void 0,u=d===void 0;if(u){var h=Mb(l),m=!h&&U1(l),_=!h&&!m&&H1(l);d=l,h||m||_?Mb(a)?d=a:yY(a)?d=mK(a):m?(u=!1,d=fY(l,!0)):_?(u=!1,d=gY(l,!0)):d=[]:nY(l)||Ab(l)?(d=a,Ab(a)?d=xY(a):(!xr(a)||Rf(a))&&(d=_Y(l))):u=!1}u&&(o.set(l,d),r(d,l,n,s,o),o.delete(l)),Pb(i,e,d)}var wY=CDe;function CY(i,t,e,n,r){i!==t&&vY(t,function(s,o){if(r||(r=new cY),xr(s))wY(i,t,o,e,CY,n,r);else{var a=n?n(Rb(i,o),s,o+"",i,t,r):void 0;a===void 0&&(a=s),Pb(i,o,a)}},q1)}var SY=CY;var SDe=SK(function(i,t,e){SY(i,t,e)}),$1=SDe;var kDe=(()=>{class i{constructor(){this.colorschemesOptions=new Xo(void 0)}setColorschemesOptions(e){this.pColorschemesOptions=e,this.colorschemesOptions.next(e)}getColorschemesOptions(){return this.pColorschemesOptions}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"}),i})(),EY=(()=>{class i{constructor(e,n,r){this.zone=n,this.themeService=r,this.type="bar",this.plugins=[],this.chartClick=new ue,this.chartHover=new ue,this.subs=[],this.themeOverrides={},this.ctx=e.nativeElement.getContext("2d"),this.subs.push(this.themeService.colorschemesOptions.pipe(Ss()).subscribe(s=>this.themeChanged(s)))}ngOnChanges(e){let n=["type"],r=Object.getOwnPropertyNames(e);if(r.some(s=>n.includes(s))||r.every(s=>e[s].isFirstChange()))this.render();else{let s=this.getChartConfiguration();this.chart&&(Object.assign(this.chart.config.data,s.data),this.chart.config.plugins&&Object.assign(this.chart.config.plugins,s.plugins),this.chart.config.options&&Object.assign(this.chart.config.options,s.options)),this.update()}}ngOnDestroy(){this.chart&&(this.chart.destroy(),this.chart=void 0),this.subs.forEach(e=>e.unsubscribe())}render(){return this.chart&&this.chart.destroy(),this.zone.runOutsideAngular(()=>this.chart=new Ib(this.ctx,this.getChartConfiguration()))}update(e){this.chart&&this.zone.runOutsideAngular(()=>this.chart?.update(e))}hideDataset(e,n){this.chart&&(this.chart.getDatasetMeta(e).hidden=n,this.update())}isDatasetHidden(e){return this.chart?.getDatasetMeta(e)?.hidden}toBase64Image(){return this.chart?.toBase64Image()}themeChanged(e){this.themeOverrides=e,this.chart&&(this.chart.config.options&&Object.assign(this.chart.config.options,this.getChartOptions()),this.update())}getChartOptions(){return $1({onHover:(e,n)=>{!this.chartHover.observed&&!this.chartHover.observers?.length||this.zone.run(()=>this.chartHover.emit({event:e,active:n}))},onClick:(e,n)=>{!this.chartClick.observed&&!this.chartClick.observers?.length||this.zone.run(()=>this.chartClick.emit({event:e,active:n}))}},this.themeOverrides,this.options,{plugins:{legend:{display:this.legend}}})}getChartConfiguration(){return{type:this.type,data:this.getChartData(),options:this.getChartOptions(),plugins:this.plugins}}getChartData(){return this.data?this.data:{labels:this.labels||[],datasets:this.datasets||[]}}}return i.\u0275fac=function(e){return new(e||i)(x(fe),x(_e),x(kDe))},i.\u0275dir=J({type:i,selectors:[["canvas","baseChart",""]],inputs:{type:"type",legend:"legend",data:"data",options:"options",plugins:"plugins",labels:"labels",datasets:"datasets"},outputs:{chartClick:"chartClick",chartHover:"chartHover"},exportAs:["base-chart"],features:[ht]}),i})(),EDe=[[255,99,132],[54,162,235],[255,206,86],[231,233,237],[75,192,192],[151,187,205],[220,220,220],[247,70,74],[70,191,189],[253,180,92],[148,159,177],[77,83,96]],TDe={plugins:{colors:{enabled:!1}},datasets:{line:{backgroundColor:i=>Fc(Nc(i.datasetIndex),.4),borderColor:i=>Fc(Nc(i.datasetIndex),1),pointBackgroundColor:i=>Fc(Nc(i.datasetIndex),1),pointBorderColor:"#fff"},bar:{backgroundColor:i=>Fc(Nc(i.datasetIndex),.6),borderColor:i=>Fc(Nc(i.datasetIndex),1)},get radar(){return this.line},doughnut:{backgroundColor:i=>Fc(Nc(i.dataIndex),.6),borderColor:"#fff"},get pie(){return this.doughnut},polarArea:{backgroundColor:i=>Fc(Nc(i.dataIndex),.6),borderColor:i=>Fc(Nc(i.dataIndex),1)},get bubble(){return this.doughnut},get scatter(){return this.doughnut},get area(){return this.polarArea}}};function Fc(i,t){return"rgba("+i.concat(t).join(",")+")"}function nN(i,t){return Math.floor(Math.random()*(t-i+1))+i}function IDe(){return[nN(0,255),nN(0,255),nN(0,255)]}function Nc(i=0){return EDe[i]||IDe()}var kY=(()=>{class i{constructor(){this.generateColors=!0}}return i.\u0275fac=function(e){return new(e||i)},i.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();Ib.register(...eK);var TY=(()=>{class i{constructor(e){e?.plugins&&Ib.register(...e?.plugins);let n=$1(e?.generateColors?TDe:{},e?.defaults||{});$t.set(n)}static forRoot(e){return{ngModule:i,providers:[{provide:kY,useValue:e}]}}}return i.\u0275fac=function(e){return new(e||i)(V(kY,8))},i.\u0275mod=de({type:i}),i.\u0275inj=ce({}),i})();var IY=()=>["client","quantity","cost","discount","shippingCost","tax","profit","actions"];function MDe(i,t){if(i&1){let e=Me();f(0,"button",41),$("click",function(){ne(e);let r=W();return re(r.clearAnalyticsSearch())}),f(1,"mat-icon"),y(2,"close"),p()()}}function ADe(i,t){i&1&&(f(0,"th",56),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"NAV.CLIENTS")," "))}function ODe(i,t){if(i&1&&(f(0,"td",57),y(1),p()),i&2){let e=t.$implicit;g(),B(e.client)}}function PDe(i,t){i&1&&(f(0,"th",56),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.quantity")," "))}function RDe(i,t){if(i&1&&(f(0,"td",57),y(1),p()),i&2){let e=t.$implicit;g(),B(e.quantity)}}function FDe(i,t){i&1&&(f(0,"th",56),y(1),O(2,"translate"),p()),i&2&&(g(),B(P(2,1,"form.cost")))}function NDe(i,t){if(i&1&&(f(0,"td",57),y(1),O(2,"currency"),p()),i&2){let e=t.$implicit;g(),Q(" ",P(2,1,e.cost)," ")}}function LDe(i,t){i&1&&(f(0,"th",56),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"form.discount")," "))}function BDe(i,t){if(i&1&&(f(0,"td",57),y(1),p()),i&2){let e=t.$implicit;g(),B(e.discount)}}function VDe(i,t){i&1&&(f(0,"th",56),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"SALES_ANALYTICS.TOTAL_SHIPPING")," "))}function zDe(i,t){if(i&1&&(f(0,"td",57),y(1),O(2,"currency"),p()),i&2){let e=t.$implicit;g(),Q(" ",P(2,1,e.shippingCost)," ")}}function jDe(i,t){i&1&&(f(0,"th",56),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"SALES_ANALYTICS.TOTAL_TAX_COST")," "))}function UDe(i,t){if(i&1&&(f(0,"td",57),y(1),O(2,"currency"),p()),i&2){let e=t.$implicit;g(),Q(" ",P(2,1,e.tax)," ")}}function HDe(i,t){i&1&&(f(0,"th",56),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"SALES_ANALYTICS.TOTAL_PROFIT")," "))}function qDe(i,t){if(i&1&&(f(0,"td",57),y(1),O(2,"currency"),p()),i&2){let e=t.$implicit,n=W(2);g(),Q(" ",P(2,1,n.calculateProfit(e))," ")}}function WDe(i,t){i&1&&(f(0,"th",56),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"ACTIONS")," "))}function GDe(i,t){if(i&1){let e=Me();f(0,"td",57)(1,"button",58),$("click",function(){let r=ne(e).$implicit,s=W(2);return re(s.onClean(s.filteredSalesData.indexOf(r)))}),f(2,"mat-icon"),y(3,"delete"),p()()()}}function $De(i,t){i&1&&j(0,"tr",59)}function KDe(i,t){if(i&1&&j(0,"tr",60),i&2){let e=t.$implicit;le("done-row",e.choice==="Done")("canceled-row",e.choice==="Cancelled")}}function YDe(i,t){if(i&1&&(f(0,"div")(1,"mat-card",2)(2,"div",42)(3,"table",43),wt(4,44),Y(5,ADe,3,3,"th",45)(6,ODe,2,1,"td",46),Ct(),wt(7,47),Y(8,PDe,3,3,"th",45)(9,RDe,2,1,"td",46),Ct(),wt(10,48),Y(11,FDe,3,3,"th",45)(12,NDe,3,3,"td",46),Ct(),wt(13,49),Y(14,LDe,3,3,"th",45)(15,BDe,2,1,"td",46),Ct(),wt(16,50),Y(17,VDe,3,3,"th",45)(18,zDe,3,3,"td",46),Ct(),wt(19,51),Y(20,jDe,3,3,"th",45)(21,UDe,3,3,"td",46),Ct(),wt(22,52),Y(23,HDe,3,3,"th",45)(24,qDe,3,3,"td",46),Ct(),wt(25,53),Y(26,WDe,3,3,"th",45)(27,GDe,4,0,"td",46),Ct(),Y(28,$De,1,0,"tr",54)(29,KDe,1,4,"tr",55),p()()()()),i&2){let e=W();g(3),z("dataSource",e.filteredSalesData),g(25),z("matHeaderRowDef",Mu(3,IY)),g(),z("matRowDefColumns",Mu(4,IY))}}function QDe(i,t){i&1&&(f(0,"mat-card",61)(1,"p",62),y(2,"\u{1F6AB} No sales data available."),p()())}var DY=(()=>{class i{constructor(e,n){this.firestore=e,this.afAuth=n,this.filteredSalesData=[],this.salesData=[],this.cancelledHistoryOrders=[],this.statusFilter="All",this.analyticsSearchQuery="",this.totalSales=0,this.totalProfit=0,this.totalItems=0,this.uniqueClientsCount=0,this.totalDeliveryCost=0,this.totalTaxCost=0,this.pendingCount=0,this.doneCount=0,this.cancelledCount=0,this.profitRate=0,this.totalprof=0,this.maxItems=100,this.maxClients=50,this.totalOrders=120,this.userId="",this.monthlySalesLabels=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],this.monthlySalesData={labels:this.monthlySalesLabels,datasets:[{label:"Sales",data:new Array(12).fill(0),backgroundColor:"#3f51b5",borderRadius:4}]},this.barChartOptions={responsive:!0,plugins:{legend:{display:!1},tooltip:{enabled:!0}},scales:{y:{beginAtZero:!0}}},this.orderStatusLabels=["Pending","Completed","Cancelled"],this.orderStatusData={labels:this.orderStatusLabels,datasets:[{data:[0,0,0],backgroundColor:["#ff9800","#4caf50","#f44336"],hoverOffset:10}]},this.doughnutChartOptions={responsive:!0,plugins:{legend:{position:"bottom"},tooltip:{enabled:!0}}}}ngOnInit(){this.afAuth.authState.subscribe(e=>{if(e){this.userId=e.uid;let n=this.firestore.collection(`sheinTables/${this.userId}/records`,s=>s.orderBy("client")).valueChanges({idField:"id"}),r=this.firestore.collection(`history/${this.userId}/records`,s=>s.orderBy("deletedAt","desc")).valueChanges({idField:"id"});qb([n,r]).subscribe(([s,o])=>{this.salesData=s||[],this.cancelledHistoryOrders=o||[],this.updateStats(),this.filterByStatus(this.statusFilter)})}})}updateStats(){let e=new Set;this.totalSales=0,this.totalProfit=0,this.totalItems=0,this.totalDeliveryCost=0,this.totalTaxCost=0,this.pendingCount=0,this.doneCount=0;let n=this.salesData.filter(o=>o.choice==="Cancelled").length,r=this.cancelledHistoryOrders.length;this.cancelledCount=n+r;let s=new Array(12).fill(0);this.salesData.forEach(o=>{if(this.totalSales+=o.cost||0,this.totalProfit+=this.calculateProfit(o),this.totalItems+=o.quantity||0,this.totalDeliveryCost+=o.shippingCost||0,this.totalTaxCost+=o.tax||0,o.choice==="Pending"&&this.pendingCount++,o.choice==="Done"&&this.doneCount++,o.client&&e.add(o.client),o.date){let l=(o.date instanceof Date?o.date:new Date(o.date)).getMonth();s[l]+=o.cost||0}}),this.cancelledHistoryOrders.forEach(o=>{o.client&&e.add(o.client)}),this.uniqueClientsCount=e.size,this.profitRate=this.totalSales>0?+(this.totalProfit/this.totalSales*100).toFixed(2):0,this.monthlySalesData.datasets[0].data=s,this.monthlySalesData=ve({},this.monthlySalesData),this.orderStatusData.datasets[0].data=[this.pendingCount,this.doneCount,this.cancelledCount],this.orderStatusData=ve({},this.orderStatusData)}filterByStatus(e){this.statusFilter=e,e==="All"?this.filteredSalesData=[...this.salesData]:this.filteredSalesData=this.salesData.filter(n=>n.choice===e)}calculateProfit(e){let s=e.cost*e.discount/100-(e.shippingCost||0)-(e.tax||0),o=e.includeQuantityInProfit&&e.quantity||0;return+(s+o).toFixed(2)}onClean(e){let n=this.filteredSalesData[e];!this.userId||!n?.id||this.firestore.doc(`sheinTables/${this.userId}/records/${n.id}`).delete().then(()=>{console.log("Order deleted")}).catch(r=>{console.error("Delete failed:",r)})}filterSalesData(){if(this.filterByStatus(this.statusFilter),this.analyticsSearchQuery){let e=this.analyticsSearchQuery.toLowerCase();this.filteredSalesData=this.filteredSalesData.filter(n=>n.client?.toLowerCase().includes(e))}}clearAnalyticsSearch(){this.analyticsSearchQuery="",this.filterByStatus(this.statusFilter)}static{this.\u0275fac=function(n){return new(n||i)(x(tn),x(Yt))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-analysic"]],decls:187,vars:109,consts:[["noData",""],[1,"analytics-page"],[1,"mat-elevation-z4","p-4"],[1,"page-title"],[1,"charts-row",2,"display","flex","gap","2rem","flex-wrap","wrap"],[1,"mat-elevation-z3","chart-card",2,"flex","1","min-width","300px"],["baseChart","",3,"data","labels","options","type"],[1,"analytics-cards"],[1,"card"],[1,"title"],["width","20","fill","currentColor","height","20","viewBox","0 0 1792 1792","xmlns","http://www.w3.org/2000/svg"],["d","M1362 1185q0 153-99.5 263.5t-258.5 136.5v175q0 14-9 23t-23 9h-135q-13 0-22.5-9.5t-9.5-22.5v-175q-66-9-127.5-31t-101.5-44.5-74-48-46.5-37.5-17.5-18q-17-21-2-41l103-135q7-10 23-12 15-2 24 9l2 2q113 99 243 125 37 8 74 8 81 0 142.5-43t61.5-122q0-28-15-53t-33.5-42-58.5-37.5-66-32-80-32.5q-39-16-61.5-25t-61.5-26.5-62.5-31-56.5-35.5-53.5-42.5-43.5-49-35.5-58-21-66.5-8.5-78q0-138 98-242t255-134v-180q0-13 9.5-22.5t22.5-9.5h135q14 0 23 9t9 23v176q57 6 110.5 23t87 33.5 63.5 37.5 39 29 15 14q17 18 5 38l-81 146q-8 15-23 16-14 3-27-7-3-3-14.5-12t-39-26.5-58.5-32-74.5-26-85.5-11.5q-95 0-155 43t-60 111q0 26 8.5 48t29.5 41.5 39.5 33 56 31 60.5 27 70 27.5q53 20 81 31.5t76 35 75.5 42.5 62 50 53 63.5 31.5 76.5 13 94z"],[1,"title-text"],[1,"percent"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 1792 1792","fill","currentColor","height","20","width","20"],["d","M1408 1216q0 26-19 45t-45 19h-896q-26 0-45-19t-19-45 19-45l448-448q19-19 45-19t45 19l448 448q19 19 19 45z"],[1,"data"],[1,"range"],[1,"fill"],["height","20","width","20","fill","currentColor","viewBox","0 0 24 24"],["d","M3 17h2v-7H3v7zm4 0h2v-4H7v4zm4 0h2v-10h-2v10zm4 0h2v-2h-2v2zm4 0h2v-13h-2v13z"],["d","M3 3h8v8H3V3zm0 10h8v8H3v-8zm10-10h8v8h-8V3zm0 10h8v8h-8v-8z"],["d","M16 11c1.66 0 3-1.34 3-3s-1.34-3-3-3-3 1.34-3 3 1.34 3 3 3zm-8 0c1.66 0 3-1.34 3-3S9.66 5 8 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"],["d","M20 8h-3V4H3v12h2a3 3 0 0 0 6 0h2a3 3 0 0 0 6 0h1v-6l-3-2zm-6 8a1 1 0 1 1-2 0 1 1 0 0 1 2 0zm6-4h-5v-3l3 2h2v1z"],["d","M21 6v13H3V6h18m0-2H3a2 2 0 0 0-2 2v13a2 2 0 0 0 2 2h18a2 2 0 0 0 2-2V6a2 2 0 0 0-2-2zM7 8h10v2H7zm0 4h10v2H7z"],[1,"percent-1"],[1,"data-1"],["d","M6 2h12v2H6zm3 16v2h6v-2zm6-4H9v-4h6v4zM7 6h10v2H7z"],["d","M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41z"],[1,"wrap"],[1,"search-bar"],["appearance","outline"],["matPrefix",""],["matInput","",3,"ngModelChange","placeholder","ngModel"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click",4,"ngIf"],[1,"filter-options"],["name","status","aria-label","Order Status Filter",3,"ngModelChange","change","ngModel"],["value","Pending"],["value","Done"],["value","All"],[4,"ngIf"],["matSuffix","","mat-icon-button","","aria-label","Clear",3,"click"],[1,"table-wrapper"],["mat-table","",1,"mat-elevation-z2","full-width-table",3,"dataSource"],["matColumnDef","client"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","quantity"],["matColumnDef","cost"],["matColumnDef","discount"],["matColumnDef","shippingCost"],["matColumnDef","tax"],["matColumnDef","profit"],["matColumnDef","actions"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",3,"done-row","canceled-row",4,"matRowDef","matRowDefColumns"],["mat-header-cell",""],["mat-cell",""],["mat-icon-button","",3,"click"],["mat-header-row",""],["mat-row",""],[1,"mat-elevation-z3","p-4"],[1,"no-data-msg"]],template:function(n,r){if(n&1){let s=Me();j(0,"app-navigation"),f(1,"section",1)(2,"mat-card",2),j(3,"br")(4,"br"),f(5,"h2",3),y(6),O(7,"translate"),p(),f(8,"div",4)(9,"mat-card",5)(10,"h3"),y(11),O(12,"translate"),p(),j(13,"canvas",6),p(),f(14,"mat-card",5)(15,"h3"),y(16),O(17,"translate"),p(),j(18,"canvas",6),p()(),j(19,"br"),f(20,"div",7)(21,"div",8)(22,"div",9)(23,"span"),bt(),f(24,"svg",10),j(25,"path",11),p()(),li(),f(26,"p",12),y(27),O(28,"translate"),p(),f(29,"p",13),bt(),f(30,"svg",14),j(31,"path",15),p(),y(32),p()(),li(),f(33,"div",16)(34,"p"),y(35),O(36,"currency"),p(),f(37,"div",17),j(38,"div",18),p()()(),f(39,"div",8)(40,"div",9)(41,"span"),bt(),f(42,"svg",19),j(43,"path",20),p()(),li(),f(44,"p",12),y(45),O(46,"translate"),p(),f(47,"p",13),bt(),f(48,"svg",14),j(49,"path",15),p(),y(50),O(51,"number"),p()(),li(),f(52,"div",16)(53,"p"),y(54),O(55,"currency"),p(),f(56,"div",17),j(57,"div",18),p()()(),f(58,"div",8)(59,"div",9)(60,"span"),bt(),f(61,"svg",19),j(62,"path",21),p()(),li(),f(63,"p",12),y(64),O(65,"translate"),p(),f(66,"p",13),y(67),p()(),f(68,"div",16)(69,"p"),y(70),p(),f(71,"div",17),j(72,"div",18),p()()(),f(73,"div",8)(74,"div",9)(75,"span"),bt(),f(76,"svg",19),j(77,"path",22),p()(),li(),f(78,"p",12),y(79),O(80,"translate"),p(),f(81,"p",13),y(82),p()(),f(83,"div",16)(84,"p"),y(85),p(),f(86,"div",17),j(87,"div",18),p()()(),f(88,"div",8)(89,"div",9)(90,"span"),bt(),f(91,"svg",19),j(92,"path",23),p()(),li(),f(93,"p",12),y(94),O(95,"translate"),p(),f(96,"p",13),bt(),f(97,"svg",14),j(98,"path",15),p(),y(99),O(100,"number"),p()(),li(),f(101,"div",16)(102,"p"),y(103),O(104,"currency"),p(),f(105,"div",17),j(106,"div",18),p()()(),f(107,"div",8)(108,"div",9)(109,"span"),bt(),f(110,"svg",19),j(111,"path",24),p()(),li(),f(112,"p",12),y(113),O(114,"translate"),p(),f(115,"p",25),bt(),f(116,"svg",14),j(117,"path",15),p(),y(118),O(119,"number"),p()(),li(),f(120,"div",26)(121,"p"),y(122),O(123,"currency"),p(),f(124,"div",17),j(125,"div",18),p()()(),f(126,"div",8)(127,"div",9)(128,"span"),bt(),f(129,"svg",19),j(130,"path",27),p()(),li(),f(131,"p",12),y(132),O(133,"translate"),p(),f(134,"p",13),y(135),p()(),f(136,"div",16)(137,"p"),y(138),p(),f(139,"div",17),j(140,"div",18),p()()(),f(141,"div",8)(142,"div",9)(143,"span"),bt(),f(144,"svg",19),j(145,"path",28),p()(),li(),f(146,"p",12),y(147),O(148,"translate"),p(),f(149,"p",13),y(150),p()(),f(151,"div",16)(152,"p"),y(153),p(),f(154,"div",17),j(155,"div",18),p()()()(),j(156,"br")(157,"br")(158,"br"),f(159,"div",29)(160,"div",30)(161,"mat-form-field",31)(162,"mat-label"),y(163),O(164,"translate"),p(),f(165,"mat-icon",32),y(166,"search"),p(),f(167,"input",33),O(168,"translate"),Bt("ngModelChange",function(a){return ne(s),Lt(r.analyticsSearchQuery,a)||(r.analyticsSearchQuery=a),re(a)}),$("ngModelChange",function(){return ne(s),re(r.filterSalesData())}),p(),Y(169,MDe,3,0,"button",34),p()(),f(170,"div",35)(171,"mat-button-toggle-group",36),Bt("ngModelChange",function(a){return ne(s),Lt(r.statusFilter,a)||(r.statusFilter=a),re(a)}),$("change",function(){return ne(s),re(r.filterByStatus(r.statusFilter))}),f(172,"mat-button-toggle",37),y(173),O(174,"translate"),p(),f(175,"mat-button-toggle",38),y(176),O(177,"translate"),p(),f(178,"mat-button-toggle",39),y(179),O(180,"translate"),p()()()(),Y(181,YDe,30,5,"div",40)(182,QDe,3,0,"ng-template",null,0,rr),p()(),j(184,"br")(185,"br")(186,"app-footer")}n&2&&(g(6),B(P(7,60,"SALES_ANALYTICS.TITLE")),g(5),B(P(12,62,"SALES_ANALYTICS.MONTHLY_SALES")),g(2),z("data",r.monthlySalesData)("labels",r.monthlySalesLabels)("options",r.barChartOptions)("type","bar"),g(3),B(P(17,64,"SALES_ANALYTICS.ORDER_STATUS_DISTRIBUTION")),g(2),z("data",r.orderStatusData)("labels",r.orderStatusLabels)("options",r.doughnutChartOptions)("type","doughnut"),g(9),B(P(28,66,"SALES_ANALYTICS.SALES")),g(5),Q(" ",r.profitRate,"% "),g(3),B(P(36,68,r.totalSales)),g(3),vi("width",r.profitRate,"%"),g(7),Q(" ",P(46,70,"SALES_ANALYTICS.TOTAL_PROFIT")," "),g(5),Q(" ",Mn(51,72,r.totalProfit/r.totalSales*100,"1.2-2"),"% "),g(4),B(P(55,75,r.totalProfit)),g(3),vi("width",r.totalProfit/r.totalSales*100,"%"),g(7),Q(" ",P(65,77,"SALES_ANALYTICS.ITEMS_SOLD")," "),g(3),B(r.totalItems),g(3),B(r.totalItems),g(2),vi("width",r.totalItems/r.maxItems*100,"%"),g(7),Q(" ",P(80,79,"SALES_ANALYTICS.UNIQUE_CLIENTS")," "),g(3),B(r.uniqueClientsCount),g(3),B(r.uniqueClientsCount),g(2),vi("width",r.uniqueClientsCount/r.maxClients*100,"%"),g(7),Q(" ",P(95,81,"SALES_ANALYTICS.TOTAL_SHIPPING")," "),g(5),Q(" ",Mn(100,83,r.totalDeliveryCost/r.totalSales*100,"1.2-2"),"% "),g(4),B(P(104,86,r.totalDeliveryCost)),g(3),vi("width",r.totalDeliveryCost/r.totalSales*100,"%"),g(7),Q(" ",P(114,88,"SALES_ANALYTICS.TOTAL_TAX_COST")," "),g(5),Q(" ",Mn(119,90,r.totalTaxCost/r.totalSales*100,"1.2-2"),"% "),g(4),B(P(123,93,r.totalTaxCost)),g(3),vi("width",r.totalTaxCost/r.totalSales*100,"%"),g(7),Q(" ",P(133,95,"SALES_ANALYTICS.PENDING_ORDERS")," "),g(3),B(r.pendingCount),g(3),B(r.pendingCount),g(2),vi("width",r.pendingCount/r.totalOrders*100,"%"),g(7),Q(" ",P(148,97,"SALES_ANALYTICS.COMPLETED_ORDERS")," "),g(3),B(r.doneCount),g(3),B(r.doneCount),g(2),vi("width",r.doneCount/r.totalOrders*100,"%"),g(8),B(P(164,99,"SALES_ANALYTICS.SEARCH_SALES")),g(4),z("placeholder",P(168,101,"SALES_ANALYTICS.SEARCH_PLACEHOLDER")),Nt("ngModel",r.analyticsSearchQuery),g(2),z("ngIf",r.analyticsSearchQuery),g(2),Nt("ngModel",r.statusFilter),g(2),B(P(174,103,"SALES_ANALYTICS.FILTER_PENDING")),g(3),B(P(177,105,"SALES_ANALYTICS.FILTER_COMPLETED")),g(3),B(P(180,107,"SALES_ANALYTICS.FILTER_ALL")),g(2),z("ngIf",r.filteredSalesData.length>0))},dependencies:[Rt,ms,fr,tr,Hr,Yi,_c,pc,jo,Jm,fc,nf,sf,cf,of,rf,df,af,lf,uf,hf,bs,N2,QC,EY,gn,_n,Ai,nL,rL],styles:[".page-title[_ngcontent-%COMP%]{text-align:center;margin-top:1rem;margin-bottom:2rem;font-weight:300;font-size:2.8rem}.analytics-page[_ngcontent-%COMP%]{width:90%;margin:0 auto}.analytics-cards[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(4,1fr);gap:1.5rem;padding:1rem;font-family:Roboto,sans-serif;color:#1a1a1a;background:#f9fafb}.card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;box-shadow:0 4px 15px #00000012;display:flex;flex-direction:column;justify-content:space-between;padding:1.5rem 2rem;transition:transform .3s ease,box-shadow .3s ease;cursor:default}.card[_ngcontent-%COMP%]:hover{transform:translateY(-5px);box-shadow:0 8px 30px #0000001f}.title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:space-between;margin-bottom:1.25rem}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{font-size:3.5rem!important;display:inline-flex;align-items:center;background:#e3e8ff;border-radius:50%;padding:.5rem;color:#3f51b5}.title[_ngcontent-%COMP%]   .title-text[_ngcontent-%COMP%]{flex-grow:1;margin-left:1rem;font-weight:600;font-size:1.125rem;color:#333}.title[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:600;font-size:1rem;color:#4caf50}.title[_ngcontent-%COMP%]   .percent[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{margin-right:.3rem;fill:currentColor;width:3.5rem!important;height:3.5rem!important}.data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;font-size:1.5rem;margin-bottom:.75rem;color:#111}.data-1[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-weight:700;font-size:2.5rem;margin-bottom:.75rem;color:red}.range[_ngcontent-%COMP%]{background:#e0e0e0;border-radius:10px;height:8px;width:100%;overflow:hidden}.range[_ngcontent-%COMP%]   .fill[_ngcontent-%COMP%]{height:100%;background:linear-gradient(90deg,#3f51b5,#1a237e);border-radius:10px;transition:width .5s ease}.no-data-msg[_ngcontent-%COMP%]{text-align:center;font-size:1.2rem;color:#999;margin-top:30px}mat-card[_ngcontent-%COMP%]{background-color:transparent;border:none;box-shadow:none;transition:all .3s ease}mat-card[_ngcontent-%COMP%]:hover{box-shadow:none}.filter-options[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:20px;gap:10px}.filter-options[_ngcontent-%COMP%]   .mat-button-toggle-group[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center}.filter-options[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%]{font-size:.9rem;font-weight:400;padding:.5rem 1rem;background-color:#f0f0f0;color:#1a73e8;border:2px solid transparent;box-shadow:0 4px 8px #0000000d;transition:all .3s ease-in-out}.filter-options[_ngcontent-%COMP%]   .mat-button-toggle[_ngcontent-%COMP%]:hover{background-color:#4285f4;color:#fff;border:2px solid #4285f4;box-shadow:0 6px 12px #0000001a}.filter-options[_ngcontent-%COMP%]   .mat-button-toggle.mat-button-toggle-checked[_ngcontent-%COMP%]{background-color:#1a73e8;color:#fff;border:2px solid #1a73e8}.full-width-table[_ngcontent-%COMP%]{width:100%;border-spacing:0;border-collapse:collapse;background-color:#fff;border-radius:14px;overflow:hidden;box-shadow:0 8px 16px #1a73e81a;margin-top:2rem}.full-width-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%], .full-width-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;text-align:left;border-bottom:1px solid #ddd}.full-width-table[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{background-color:#e8f0fe;color:#174ea6;font-weight:600}.full-width-table[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{font-size:1rem;color:#1f1f1f;transition:background-color .3s ease}.full-width-table[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#f4faff}.full-width-table[_ngcontent-%COMP%]   .actions[_ngcontent-%COMP%]{display:flex;gap:.5rem}mat-icon-button[_ngcontent-%COMP%]{color:#174ea6}mat-icon-button[_ngcontent-%COMP%]:hover{color:#4285f4}mat-raised-button[_ngcontent-%COMP%]{background-color:#1a73e8;color:#fff;padding:.6rem 1.4rem;border-radius:20px;font-size:1rem;font-weight:500;box-shadow:0 6px 16px #0000001a;transition:all .3s ease-in-out}mat-raised-button[_ngcontent-%COMP%]:hover{background-color:#174ea6;box-shadow:0 8px 24px #00000026}mat-stroked-button[_ngcontent-%COMP%]{color:#1a73e8;border-color:#1a73e8}@media (max-width: 768px){.analytics-cards[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:15px}.filter-options[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch}.full-width-table[_ngcontent-%COMP%]{width:100%}}.wrap[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:space-between;align-items:baseline;text-align:center}.search-bar[_ngcontent-%COMP%]{margin:1rem 0;width:30%}.search-bar[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%}.charts-row[_ngcontent-%COMP%]{margin-bottom:2rem}.chart-card[_ngcontent-%COMP%]{padding:1rem;text-align:center}canvas[_ngcontent-%COMP%]{max-height:300px}.done-row[_ngcontent-%COMP%]{background-color:#e8f5e9!important}.canceled-row[_ngcontent-%COMP%]{background-color:#ffebee!important}.card[_ngcontent-%COMP%]{padding:1.5rem;background-color:#e5e7eb;box-shadow:-10px -10px 20px #fff,10px 10px 20px #99a1af,inset -10px -10px 20px #d1d5dc;max-width:320px;border-radius:20px;display:flex;flex-direction:column;gap:1rem}.title[_ngcontent-%COMP%]{display:flex;align-items:center;gap:1rem}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{position:relative;padding:.6rem;background-color:#10b981;box-shadow:-2px -2px 4px #fff,2px 2px 4px #99a1af;width:2.5rem;height:2.5rem;border-radius:50%;display:flex;justify-content:center;align-items:center}.title[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   svg[_ngcontent-%COMP%]{color:#fff;height:1.5rem;width:1.5rem}.title-text[_ngcontent-%COMP%]{margin-left:0;color:#374151;font-size:1.3rem!important;font-weight:600;text-align:left;flex-grow:1}.percent[_ngcontent-%COMP%]{margin-left:.5rem;color:#02972f;font-weight:600;display:flex;align-items:center;font-size:1.5rem!important}.percent-1[_ngcontent-%COMP%]{margin-left:.5rem;color:red;font-weight:600;display:flex;align-items:center;font-size:1.5rem!important}.data[_ngcontent-%COMP%]{display:flex;flex-direction:column;justify-content:flex-start;gap:.75rem}.data[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:0;color:#1f2937;font-size:2rem;line-height:2.25rem;font-weight:700;text-align:left}.range[_ngcontent-%COMP%]{width:100%;height:7px;background-color:#e0e0e0;border-radius:5px;overflow:hidden;margin-top:.5rem}.fill[_ngcontent-%COMP%]{height:100%;background-color:#1a73e8;width:0%;transition:width .5s ease;border-radius:5px 0 0 5px}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch;border-radius:14px;box-shadow:0 8px 16px #1a73e81a;margin-bottom:1.5rem}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#1a1a1a00;border-radius:14px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4285f4;border-radius:14px}@media (max-width: 768px){.table-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem}table.full-width-table[_ngcontent-%COMP%]{min-width:700px;font-size:.85rem}th.mat-header-cell[_ngcontent-%COMP%], td.mat-cell[_ngcontent-%COMP%]{padding:.6rem .75rem}}@media (max-width: 768px){.analytics-cards[_ngcontent-%COMP%]{grid-template-columns:1fr 1fr;gap:1rem;padding:.5rem}.filter-options[_ngcontent-%COMP%]{flex-direction:column;align-items:stretch;gap:.5rem}.full-width-table[_ngcontent-%COMP%]{width:100%;min-width:600px;font-size:.85rem}.full-width-table[_ngcontent-%COMP%]   th.mat-header-cell[_ngcontent-%COMP%], .full-width-table[_ngcontent-%COMP%]   td.mat-cell[_ngcontent-%COMP%]{padding:.5rem .75rem}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch;margin-bottom:1rem}mat-card.mat-elevation-z4.p-4[_ngcontent-%COMP%]{padding:1rem!important}.card[_ngcontent-%COMP%]{max-width:100%;padding:1rem;border-radius:12px}.page-title[_ngcontent-%COMP%]{font-size:2rem;margin-bottom:1rem}.search-bar[_ngcontent-%COMP%]{width:100%;margin:0 auto 1rem}.wrap[_ngcontent-%COMP%]{flex-direction:column;align-items:flex-start;gap:1rem}mat-raised-button[_ngcontent-%COMP%], mat-stroked-button[_ngcontent-%COMP%]{font-size:.9rem;padding:.5rem 1rem;border-radius:16px}}mat-button-toggle[_ngcontent-%COMP%]{margin:0 auto}"]})}}return i})();var XDe=["mat-calendar-body",""];function ZDe(i,t){if(i&1&&(f(0,"tr",0)(1,"td",3),y(2),p()()),i&2){let e=W();g(),vi("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),Se("colspan",e.numCols),g(),Q(" ",e.label," ")}}function JDe(i,t){if(i&1&&(f(0,"td",3),y(1),p()),i&2){let e=W(2);vi("padding-top",e._cellPadding)("padding-bottom",e._cellPadding),Se("colspan",e._firstRowOffset),g(),Q(" ",e._firstRowOffset>=e.labelMinRequiredCells?e.label:""," ")}}function eMe(i,t){if(i&1){let e=Me();f(0,"td",6)(1,"button",7),$("click",function(r){let s=ne(e).$implicit,o=W(2);return re(o._cellClicked(s,r))})("focus",function(r){let s=ne(e).$implicit,o=W(2);return re(o._emitActiveDateChange(s,r))}),f(2,"span",8),y(3),p(),j(4,"span",9),p()()}if(i&2){let e=t.$implicit,n=t.$index,r=W().$index,s=W();vi("width",s._cellWidth)("padding-top",s._cellPadding)("padding-bottom",s._cellPadding),Se("data-mat-row",r)("data-mat-col",n),g(),le("mat-calendar-body-disabled",!e.enabled)("mat-calendar-body-active",s._isActiveCell(r,n))("mat-calendar-body-range-start",s._isRangeStart(e.compareValue))("mat-calendar-body-range-end",s._isRangeEnd(e.compareValue))("mat-calendar-body-in-range",s._isInRange(e.compareValue))("mat-calendar-body-comparison-bridge-start",s._isComparisonBridgeStart(e.compareValue,r,n))("mat-calendar-body-comparison-bridge-end",s._isComparisonBridgeEnd(e.compareValue,r,n))("mat-calendar-body-comparison-start",s._isComparisonStart(e.compareValue))("mat-calendar-body-comparison-end",s._isComparisonEnd(e.compareValue))("mat-calendar-body-in-comparison-range",s._isInComparisonRange(e.compareValue))("mat-calendar-body-preview-start",s._isPreviewStart(e.compareValue))("mat-calendar-body-preview-end",s._isPreviewEnd(e.compareValue))("mat-calendar-body-in-preview",s._isInPreview(e.compareValue)),z("ngClass",e.cssClasses)("tabindex",s._isActiveCell(r,n)?0:-1),Se("aria-label",e.ariaLabel)("aria-disabled",!e.enabled||null)("aria-pressed",s._isSelected(e.compareValue))("aria-current",s.todayValue===e.compareValue?"date":null)("aria-describedby",s._getDescribedby(e.compareValue)),g(),le("mat-calendar-body-selected",s._isSelected(e.compareValue))("mat-calendar-body-comparison-identical",s._isComparisonIdentical(e.compareValue))("mat-calendar-body-today",s.todayValue===e.compareValue),g(),Q(" ",e.displayValue," ")}}function tMe(i,t){if(i&1&&(f(0,"tr",1),Y(1,JDe,2,6,"td",4),Qb(2,eMe,5,48,"td",5,Yb),p()),i&2){let e=t.$implicit,n=t.$index,r=W();g(),et(1,n===0&&r._firstRowOffset?1:-1),g(),Xb(e)}}function iMe(i,t){if(i&1&&(f(0,"th",2)(1,"span",6),y(2),p(),f(3,"span",3),y(4),p()()),i&2){let e=t.$implicit;g(2),B(e.long),g(2),B(e.narrow)}}var nMe=["*"];function rMe(i,t){}function sMe(i,t){if(i&1){let e=Me();f(0,"mat-month-view",2),Bt("activeDateChange",function(r){ne(e);let s=W();return Lt(s.activeDate,r)||(s.activeDate=r),re(r)}),$("_userSelection",function(r){ne(e);let s=W();return re(s._dateSelected(r))})("dragStarted",function(r){ne(e);let s=W();return re(s._dragStarted(r))})("dragEnded",function(r){ne(e);let s=W();return re(s._dragEnded(r))}),p()}if(i&2){let e=W();Nt("activeDate",e.activeDate),z("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)("comparisonStart",e.comparisonStart)("comparisonEnd",e.comparisonEnd)("startDateAccessibleName",e.startDateAccessibleName)("endDateAccessibleName",e.endDateAccessibleName)("activeDrag",e._activeDrag)}}function oMe(i,t){if(i&1){let e=Me();f(0,"mat-year-view",3),Bt("activeDateChange",function(r){ne(e);let s=W();return Lt(s.activeDate,r)||(s.activeDate=r),re(r)}),$("monthSelected",function(r){ne(e);let s=W();return re(s._monthSelectedInYearView(r))})("selectedChange",function(r){ne(e);let s=W();return re(s._goToDateInView(r,"month"))}),p()}if(i&2){let e=W();Nt("activeDate",e.activeDate),z("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function aMe(i,t){if(i&1){let e=Me();f(0,"mat-multi-year-view",4),Bt("activeDateChange",function(r){ne(e);let s=W();return Lt(s.activeDate,r)||(s.activeDate=r),re(r)}),$("yearSelected",function(r){ne(e);let s=W();return re(s._yearSelectedInMultiYearView(r))})("selectedChange",function(r){ne(e);let s=W();return re(s._goToDateInView(r,"year"))}),p()}if(i&2){let e=W();Nt("activeDate",e.activeDate),z("selected",e.selected)("dateFilter",e.dateFilter)("maxDate",e.maxDate)("minDate",e.minDate)("dateClass",e.dateClass)}}function lMe(i,t){}var cMe=["button"],dMe=[[["","matDatepickerToggleIcon",""]]],uMe=["[matDatepickerToggleIcon]"];function hMe(i,t){i&1&&(bt(),f(0,"svg",2),j(1,"path",3),p())}var Bb=(()=>{class i{constructor(){this.changes=new ke,this.calendarLabel="Calendar",this.openCalendarLabel="Open calendar",this.closeCalendarLabel="Close calendar",this.prevMonthLabel="Previous month",this.nextMonthLabel="Next month",this.prevYearLabel="Previous year",this.nextYearLabel="Next year",this.prevMultiYearLabel="Previous 24 years",this.nextMultiYearLabel="Next 24 years",this.switchToMonthViewLabel="Choose date",this.switchToMultiYearViewLabel="Choose month and year",this.startDateLabel="Start date",this.endDateLabel="End date"}formatYearRange(e,n){return`${e} \u2013 ${n}`}formatYearRangeLabel(e,n){return`${e} to ${n}`}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})(),Nb=class{constructor(t,e,n,r,s={},o=t,a){this.value=t,this.displayValue=e,this.ariaLabel=n,this.enabled=r,this.cssClasses=s,this.compareValue=o,this.rawValue=a}},mMe=1,MY=fs({passive:!1,capture:!0}),Lc=fs({passive:!0,capture:!0}),K1=fs({passive:!0}),qf=(()=>{class i{ngAfterViewChecked(){this._focusActiveCellAfterViewChecked&&(this._focusActiveCell(),this._focusActiveCellAfterViewChecked=!1)}constructor(e,n){this._elementRef=e,this._ngZone=n,this._platform=He(dt),this._focusActiveCellAfterViewChecked=!1,this.numCols=7,this.activeCell=0,this.isRange=!1,this.cellAspectRatio=1,this.previewStart=null,this.previewEnd=null,this.selectedValueChange=new ue,this.previewChange=new ue,this.activeDateChange=new ue,this.dragStarted=new ue,this.dragEnded=new ue,this._didDragSinceMouseDown=!1,this._enterHandler=r=>{if(this._skipNextFocus&&r.type==="focus"){this._skipNextFocus=!1;return}if(r.target&&this.isRange){let s=this._getCellFromElement(r.target);s&&this._ngZone.run(()=>this.previewChange.emit({value:s.enabled?s:null,event:r}))}},this._touchmoveHandler=r=>{if(!this.isRange)return;let s=AY(r),o=s?this._getCellFromElement(s):null;s!==r.target&&(this._didDragSinceMouseDown=!0),sN(r.target)&&r.preventDefault(),this._ngZone.run(()=>this.previewChange.emit({value:o?.enabled?o:null,event:r}))},this._leaveHandler=r=>{this.previewEnd!==null&&this.isRange&&(r.type!=="blur"&&(this._didDragSinceMouseDown=!0),r.target&&this._getCellFromElement(r.target)&&!(r.relatedTarget&&this._getCellFromElement(r.relatedTarget))&&this._ngZone.run(()=>this.previewChange.emit({value:null,event:r})))},this._mousedownHandler=r=>{if(!this.isRange)return;this._didDragSinceMouseDown=!1;let s=r.target&&this._getCellFromElement(r.target);!s||!this._isInRange(s.compareValue)||this._ngZone.run(()=>{this.dragStarted.emit({value:s.rawValue,event:r})})},this._mouseupHandler=r=>{if(!this.isRange)return;let s=sN(r.target);if(!s){this._ngZone.run(()=>{this.dragEnded.emit({value:null,event:r})});return}s.closest(".mat-calendar-body")===this._elementRef.nativeElement&&this._ngZone.run(()=>{let o=this._getCellFromElement(s);this.dragEnded.emit({value:o?.rawValue??null,event:r})})},this._touchendHandler=r=>{let s=AY(r);s&&this._mouseupHandler({target:s})},this._id=`mat-calendar-body-${mMe++}`,this._startDateLabelId=`${this._id}-start-date`,this._endDateLabelId=`${this._id}-end-date`,n.runOutsideAngular(()=>{let r=e.nativeElement;r.addEventListener("touchmove",this._touchmoveHandler,MY),r.addEventListener("mouseenter",this._enterHandler,Lc),r.addEventListener("focus",this._enterHandler,Lc),r.addEventListener("mouseleave",this._leaveHandler,Lc),r.addEventListener("blur",this._leaveHandler,Lc),r.addEventListener("mousedown",this._mousedownHandler,K1),r.addEventListener("touchstart",this._mousedownHandler,K1),this._platform.isBrowser&&(window.addEventListener("mouseup",this._mouseupHandler),window.addEventListener("touchend",this._touchendHandler))})}_cellClicked(e,n){this._didDragSinceMouseDown||e.enabled&&this.selectedValueChange.emit({value:e.value,event:n})}_emitActiveDateChange(e,n){e.enabled&&this.activeDateChange.emit({value:e.value,event:n})}_isSelected(e){return this.startValue===e||this.endValue===e}ngOnChanges(e){let n=e.numCols,{rows:r,numCols:s}=this;(e.rows||n)&&(this._firstRowOffset=r&&r.length&&r[0].length?s-r[0].length:0),(e.cellAspectRatio||n||!this._cellPadding)&&(this._cellPadding=`${50*this.cellAspectRatio/s}%`),(n||!this._cellWidth)&&(this._cellWidth=`${100/s}%`)}ngOnDestroy(){let e=this._elementRef.nativeElement;e.removeEventListener("touchmove",this._touchmoveHandler,MY),e.removeEventListener("mouseenter",this._enterHandler,Lc),e.removeEventListener("focus",this._enterHandler,Lc),e.removeEventListener("mouseleave",this._leaveHandler,Lc),e.removeEventListener("blur",this._leaveHandler,Lc),e.removeEventListener("mousedown",this._mousedownHandler,K1),e.removeEventListener("touchstart",this._mousedownHandler,K1),this._platform.isBrowser&&(window.removeEventListener("mouseup",this._mouseupHandler),window.removeEventListener("touchend",this._touchendHandler))}_isActiveCell(e,n){let r=e*this.numCols+n;return e&&(r-=this._firstRowOffset),r==this.activeCell}_focusActiveCell(e=!0){this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.pipe(Pt(1)).subscribe(()=>{setTimeout(()=>{let n=this._elementRef.nativeElement.querySelector(".mat-calendar-body-active");n&&(e||(this._skipNextFocus=!0),n.focus())})})})}_scheduleFocusActiveCellAfterViewChecked(){this._focusActiveCellAfterViewChecked=!0}_isRangeStart(e){return oN(e,this.startValue,this.endValue)}_isRangeEnd(e){return aN(e,this.startValue,this.endValue)}_isInRange(e){return lN(e,this.startValue,this.endValue,this.isRange)}_isComparisonStart(e){return oN(e,this.comparisonStart,this.comparisonEnd)}_isComparisonBridgeStart(e,n,r){if(!this._isComparisonStart(e)||this._isRangeStart(e)||!this._isInRange(e))return!1;let s=this.rows[n][r-1];if(!s){let o=this.rows[n-1];s=o&&o[o.length-1]}return s&&!this._isRangeEnd(s.compareValue)}_isComparisonBridgeEnd(e,n,r){if(!this._isComparisonEnd(e)||this._isRangeEnd(e)||!this._isInRange(e))return!1;let s=this.rows[n][r+1];if(!s){let o=this.rows[n+1];s=o&&o[0]}return s&&!this._isRangeStart(s.compareValue)}_isComparisonEnd(e){return aN(e,this.comparisonStart,this.comparisonEnd)}_isInComparisonRange(e){return lN(e,this.comparisonStart,this.comparisonEnd,this.isRange)}_isComparisonIdentical(e){return this.comparisonStart===this.comparisonEnd&&e===this.comparisonStart}_isPreviewStart(e){return oN(e,this.previewStart,this.previewEnd)}_isPreviewEnd(e){return aN(e,this.previewStart,this.previewEnd)}_isInPreview(e){return lN(e,this.previewStart,this.previewEnd,this.isRange)}_getDescribedby(e){return this.isRange?this.startValue===e&&this.endValue===e?`${this._startDateLabelId} ${this._endDateLabelId}`:this.startValue===e?this._startDateLabelId:this.endValue===e?this._endDateLabelId:null:null}_getCellFromElement(e){let n=sN(e);if(n){let r=n.getAttribute("data-mat-row"),s=n.getAttribute("data-mat-col");if(r&&s)return this.rows[parseInt(r)][parseInt(s)]}return null}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(_e))}}static{this.\u0275cmp=ae({type:i,selectors:[["","mat-calendar-body",""]],hostAttrs:[1,"mat-calendar-body"],inputs:{label:"label",rows:"rows",todayValue:"todayValue",startValue:"startValue",endValue:"endValue",labelMinRequiredCells:"labelMinRequiredCells",numCols:"numCols",activeCell:"activeCell",isRange:"isRange",cellAspectRatio:"cellAspectRatio",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",previewStart:"previewStart",previewEnd:"previewEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedValueChange:"selectedValueChange",previewChange:"previewChange",activeDateChange:"activeDateChange",dragStarted:"dragStarted",dragEnded:"dragEnded"},exportAs:["matCalendarBody"],standalone:!0,features:[ht,Re],attrs:XDe,decls:7,vars:5,consts:[["aria-hidden","true"],["role","row"],[1,"mat-calendar-body-hidden-label",3,"id"],[1,"mat-calendar-body-label"],[1,"mat-calendar-body-label",3,"paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container",3,"width","paddingTop","paddingBottom"],["role","gridcell",1,"mat-calendar-body-cell-container"],["type","button",1,"mat-calendar-body-cell",3,"click","focus","ngClass","tabindex"],[1,"mat-calendar-body-cell-content","mat-focus-indicator"],["aria-hidden","true",1,"mat-calendar-body-cell-preview"]],template:function(n,r){n&1&&(Y(0,ZDe,3,6,"tr",0),Qb(1,tMe,4,1,"tr",1,Yb),f(3,"label",2),y(4),p(),f(5,"label",2),y(6),p()),n&2&&(et(0,r._firstRowOffset<r.labelMinRequiredCells?0:-1),g(),Xb(r.rows),g(2),z("id",r._startDateLabelId),g(),Q(" ",r.startDateAccessibleName,`
`),g(),z("id",r._endDateLabelId),g(),Q(" ",r.endDateAccessibleName,`
`))},dependencies:[t0],styles:['.mat-calendar-body{min-width:224px}.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-outline-color)}.mat-calendar-body-label{height:0;line-height:0;text-align:start;padding-left:4.7142857143%;padding-right:4.7142857143%;font-size:var(--mat-datepicker-calendar-body-label-text-size);font-weight:var(--mat-datepicker-calendar-body-label-text-weight);color:var(--mat-datepicker-calendar-body-label-text-color)}.mat-calendar-body-hidden-label{display:none}.mat-calendar-body-cell-container{position:relative;height:0;line-height:0}.mat-calendar-body-cell{-webkit-user-select:none;user-select:none;cursor:pointer;outline:none;border:none;-webkit-tap-highlight-color:rgba(0,0,0,0);position:absolute;top:0;left:0;width:100%;height:100%;background:none;text-align:center;outline:none;font-family:inherit;margin:0}.mat-calendar-body-cell::-moz-focus-inner{border:0}.mat-calendar-body-cell::before,.mat-calendar-body-cell::after,.mat-calendar-body-cell-preview{content:"";position:absolute;top:5%;left:0;z-index:0;box-sizing:border-box;display:block;height:90%;width:100%}.mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-start::after,.mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,.mat-calendar-body-comparison-start::after,.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:5%;width:95%;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-range-start:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-start:not(.mat-calendar-body-comparison-bridge-start)::before,[dir=rtl] .mat-calendar-body-comparison-start::after,[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{left:0;border-radius:0;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,.mat-calendar-body-comparison-end::after,.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}[dir=rtl] .mat-calendar-body-range-end:not(.mat-calendar-body-in-comparison-range)::before,[dir=rtl] .mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-end:not(.mat-calendar-body-comparison-bridge-end)::before,[dir=rtl] .mat-calendar-body-comparison-end::after,[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{left:5%;border-radius:0;border-top-left-radius:999px;border-bottom-left-radius:999px}[dir=rtl] .mat-calendar-body-comparison-bridge-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-bridge-end.mat-calendar-body-range-start::after{width:95%;border-top-right-radius:999px;border-bottom-right-radius:999px}.mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,[dir=rtl] .mat-calendar-body-comparison-start.mat-calendar-body-range-end::after,.mat-calendar-body-comparison-end.mat-calendar-body-range-start::after,[dir=rtl] .mat-calendar-body-comparison-end.mat-calendar-body-range-start::after{width:90%}.mat-calendar-body-in-preview{color:var(--mat-datepicker-calendar-date-preview-state-outline-color)}.mat-calendar-body-in-preview .mat-calendar-body-cell-preview{border-top:dashed 1px;border-bottom:dashed 1px}.mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:dashed 1px}[dir=rtl] .mat-calendar-body-preview-start .mat-calendar-body-cell-preview{border-left:0;border-right:dashed 1px}.mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:dashed 1px}[dir=rtl] .mat-calendar-body-preview-end .mat-calendar-body-cell-preview{border-right:0;border-left:dashed 1px}.mat-calendar-body-disabled{cursor:default}.mat-calendar-body-disabled>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){color:var(--mat-datepicker-calendar-date-disabled-state-text-color)}.mat-calendar-body-disabled>.mat-calendar-body-today:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){border-color:var(--mat-datepicker-calendar-date-today-disabled-state-outline-color)}.cdk-high-contrast-active .mat-calendar-body-disabled{opacity:.5}.mat-calendar-body-cell-content{top:5%;left:5%;z-index:1;display:flex;align-items:center;justify-content:center;box-sizing:border-box;width:90%;height:90%;line-height:1;border-width:1px;border-style:solid;border-radius:999px;color:var(--mat-datepicker-calendar-date-text-color);border-color:var(--mat-datepicker-calendar-date-outline-color)}.mat-calendar-body-cell-content.mat-focus-indicator{position:absolute}.cdk-high-contrast-active .mat-calendar-body-cell-content{border:none}.cdk-keyboard-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical),.cdk-program-focused .mat-calendar-body-active>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-focus-state-background-color)}@media(hover: hover){.mat-calendar-body-cell:not(.mat-calendar-body-disabled):hover>.mat-calendar-body-cell-content:not(.mat-calendar-body-selected):not(.mat-calendar-body-comparison-identical){background-color:var(--mat-datepicker-calendar-date-hover-state-background-color)}}.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-state-background-color);color:var(--mat-datepicker-calendar-date-selected-state-text-color)}.mat-calendar-body-disabled>.mat-calendar-body-selected{background-color:var(--mat-datepicker-calendar-date-selected-disabled-state-background-color)}.mat-calendar-body-selected.mat-calendar-body-today{box-shadow:inset 0 0 0 1px var(--mat-datepicker-calendar-date-today-selected-state-outline-color)}.mat-calendar-body-in-range::before{background:var(--mat-datepicker-calendar-date-in-range-state-background-color)}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color)}.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range::before{background:var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color)}.mat-calendar-body-comparison-bridge-start::before,[dir=rtl] .mat-calendar-body-comparison-bridge-end::before{background:linear-gradient(to right, var(--mat-datepicker-calendar-date-in-range-state-background-color) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color) 50%)}.mat-calendar-body-comparison-bridge-end::before,[dir=rtl] .mat-calendar-body-comparison-bridge-start::before{background:linear-gradient(to left, var(--mat-datepicker-calendar-date-in-range-state-background-color) 50%, var(--mat-datepicker-calendar-date-in-comparison-range-state-background-color) 50%)}.mat-calendar-body-in-range>.mat-calendar-body-comparison-identical,.mat-calendar-body-in-comparison-range.mat-calendar-body-in-range::after{background:var(--mat-datepicker-calendar-date-in-overlap-range-state-background-color)}.mat-calendar-body-comparison-identical.mat-calendar-body-selected,.mat-calendar-body-in-comparison-range>.mat-calendar-body-selected{background:var(--mat-datepicker-calendar-date-in-overlap-range-selected-state-background-color)}.cdk-high-contrast-active .mat-datepicker-popup:not(:empty),.cdk-high-contrast-active .mat-calendar-body-cell:not(.mat-calendar-body-in-range) .mat-calendar-body-selected{outline:solid 1px}.cdk-high-contrast-active .mat-calendar-body-today{outline:dotted 1px}.cdk-high-contrast-active .mat-calendar-body-cell::before,.cdk-high-contrast-active .mat-calendar-body-cell::after,.cdk-high-contrast-active .mat-calendar-body-selected{background:none}.cdk-high-contrast-active .mat-calendar-body-in-range::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-start::before,.cdk-high-contrast-active .mat-calendar-body-comparison-bridge-end::before{border-top:solid 1px;border-bottom:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-start::before{border-left:0;border-right:solid 1px}.cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:solid 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-range-end::before{border-right:0;border-left:solid 1px}.cdk-high-contrast-active .mat-calendar-body-in-comparison-range::before{border-top:dashed 1px;border-bottom:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-start::before{border-left:0;border-right:dashed 1px}.cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:dashed 1px}[dir=rtl] .cdk-high-contrast-active .mat-calendar-body-comparison-end::before{border-right:0;border-left:dashed 1px}'],encapsulation:2,changeDetection:0})}}return i})();function rN(i){return i?.nodeName==="TD"}function sN(i){let t;return rN(i)?t=i:rN(i.parentNode)?t=i.parentNode:rN(i.parentNode?.parentNode)&&(t=i.parentNode.parentNode),t?.getAttribute("data-mat-row")!=null?t:null}function oN(i,t,e){return e!==null&&t!==e&&i<e&&i===t}function aN(i,t,e){return t!==null&&t!==e&&i>=t&&i===e}function lN(i,t,e,n){return n&&t!==null&&e!==null&&t!==e&&i>=t&&i<=e}function AY(i){let t=i.changedTouches[0];return document.elementFromPoint(t.clientX,t.clientY)}var Cs=class{constructor(t,e){this.start=t,this.end=e}},Lb=(()=>{class i{constructor(e,n){this.selection=e,this._adapter=n,this._selectionChanged=new ke,this.selectionChanged=this._selectionChanged,this.selection=e}updateSelection(e,n){let r=this.selection;this.selection=e,this._selectionChanged.next({selection:e,source:n,oldValue:r})}ngOnDestroy(){this._selectionChanged.complete()}_isValidDateInstance(e){return this._adapter.isDateInstance(e)&&this._adapter.isValid(e)}static{this.\u0275fac=function(n){Du()}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac})}}return i})(),fMe=(()=>{class i extends Lb{constructor(e){super(null,e)}add(e){super.updateSelection(e,this)}isValid(){return this.selection!=null&&this._isValidDateInstance(this.selection)}isComplete(){return this.selection!=null}clone(){let e=new i(this._adapter);return e.updateSelection(this.selection,this),e}static{this.\u0275fac=function(n){return new(n||i)(V(En))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac})}}return i})();function pMe(i,t){return i||new fMe(t)}var LY={provide:Lb,deps:[[new wr,new lS,Lb],En],useFactory:pMe};var BY=new te("MAT_DATE_RANGE_SELECTION_STRATEGY");var cN=7,OY=(()=>{class i{get activeDate(){return this._activeDate}set activeDate(e){let n=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._hasSameMonthAndYear(n,this._activeDate)||this._init()}get selected(){return this._selected}set selected(e){e instanceof Cs?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setRanges(this._selected)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,n,r,s,o){this._changeDetectorRef=e,this._dateFormats=n,this._dateAdapter=r,this._dir=s,this._rangeStrategy=o,this._rerenderSubscription=At.EMPTY,this.activeDrag=null,this.selectedChange=new ue,this._userSelection=new ue,this.dragStarted=new ue,this.dragEnded=new ue,this.activeDateChange=new ue,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Pi(null)).subscribe(()=>this._init())}ngOnChanges(e){let n=e.comparisonStart||e.comparisonEnd;n&&!n.firstChange&&this._setRanges(this.selected),e.activeDrag&&!this.activeDrag&&this._clearPreview()}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_dateSelected(e){let n=e.value,r=this._getDateFromDayOfMonth(n),s,o;this._selected instanceof Cs?(s=this._getDateInCurrentMonth(this._selected.start),o=this._getDateInCurrentMonth(this._selected.end)):s=o=this._getDateInCurrentMonth(this._selected),(s!==n||o!==n)&&this.selectedChange.emit(r),this._userSelection.emit({value:r,event:e.event}),this._clearPreview(),this._changeDetectorRef.markForCheck()}_updateActiveDate(e){let n=e.value,r=this._activeDate;this.activeDate=this._getDateFromDayOfMonth(n),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this._activeDate)}_handleCalendarBodyKeydown(e){let n=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,-7);break;case 40:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,7);break;case 36:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,1-this._dateAdapter.getDate(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarDays(this._activeDate,this._dateAdapter.getNumDaysInMonth(this._activeDate)-this._dateAdapter.getDate(this._activeDate));break;case 33:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,-1):this._dateAdapter.addCalendarMonths(this._activeDate,-1);break;case 34:this.activeDate=e.altKey?this._dateAdapter.addCalendarYears(this._activeDate,1):this._dateAdapter.addCalendarMonths(this._activeDate,1);break;case 13:case 32:this._selectionKeyPressed=!0,this._canSelect(this._activeDate)&&e.preventDefault();return;case 27:this._previewEnd!=null&&!Di(e)&&(this._clearPreview(),this.activeDrag?this.dragEnded.emit({value:null,event:e}):(this.selectedChange.emit(null),this._userSelection.emit({value:null,event:e})),e.preventDefault(),e.stopPropagation());return;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._canSelect(this._activeDate)&&this._dateSelected({value:this._dateAdapter.getDate(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setRanges(this.selected),this._todayDate=this._getCellCompareValue(this._dateAdapter.today()),this._monthLabel=this._dateFormats.display.monthLabel?this._dateAdapter.format(this.activeDate,this._dateFormats.display.monthLabel):this._dateAdapter.getMonthNames("short")[this._dateAdapter.getMonth(this.activeDate)].toLocaleUpperCase();let e=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),1);this._firstWeekOffset=(cN+this._dateAdapter.getDayOfWeek(e)-this._dateAdapter.getFirstDayOfWeek())%cN,this._initWeekdays(),this._createWeekCells(),this._changeDetectorRef.markForCheck()}_focusActiveCell(e){this._matCalendarBody._focusActiveCell(e)}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_previewChanged({event:e,value:n}){if(this._rangeStrategy){let r=n?n.rawValue:null,s=this._rangeStrategy.createPreview(r,this.selected,e);if(this._previewStart=this._getCellCompareValue(s.start),this._previewEnd=this._getCellCompareValue(s.end),this.activeDrag&&r){let o=this._rangeStrategy.createDrag?.(this.activeDrag.value,this.selected,r,e);o&&(this._previewStart=this._getCellCompareValue(o.start),this._previewEnd=this._getCellCompareValue(o.end))}this._changeDetectorRef.detectChanges()}}_dragEnded(e){if(this.activeDrag)if(e.value){let n=this._rangeStrategy?.createDrag?.(this.activeDrag.value,this.selected,e.value,e.event);this.dragEnded.emit({value:n??null,event:e.event})}else this.dragEnded.emit({value:null,event:e.event})}_getDateFromDayOfMonth(e){return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),e)}_initWeekdays(){let e=this._dateAdapter.getFirstDayOfWeek(),n=this._dateAdapter.getDayOfWeekNames("narrow"),s=this._dateAdapter.getDayOfWeekNames("long").map((o,a)=>({long:o,narrow:n[a]}));this._weekdays=s.slice(e).concat(s.slice(0,e))}_createWeekCells(){let e=this._dateAdapter.getNumDaysInMonth(this.activeDate),n=this._dateAdapter.getDateNames();this._weeks=[[]];for(let r=0,s=this._firstWeekOffset;r<e;r++,s++){s==cN&&(this._weeks.push([]),s=0);let o=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),this._dateAdapter.getMonth(this.activeDate),r+1),a=this._shouldEnableDate(o),l=this._dateAdapter.format(o,this._dateFormats.display.dateA11yLabel),c=this.dateClass?this.dateClass(o,"month"):void 0;this._weeks[this._weeks.length-1].push(new Nb(r+1,n[r],l,a,c,this._getCellCompareValue(o),o))}}_shouldEnableDate(e){return!!e&&(!this.minDate||this._dateAdapter.compareDate(e,this.minDate)>=0)&&(!this.maxDate||this._dateAdapter.compareDate(e,this.maxDate)<=0)&&(!this.dateFilter||this.dateFilter(e))}_getDateInCurrentMonth(e){return e&&this._hasSameMonthAndYear(e,this.activeDate)?this._dateAdapter.getDate(e):null}_hasSameMonthAndYear(e,n){return!!(e&&n&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(n)&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(n))}_getCellCompareValue(e){if(e){let n=this._dateAdapter.getYear(e),r=this._dateAdapter.getMonth(e),s=this._dateAdapter.getDate(e);return new Date(n,r,s).getTime()}return null}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setRanges(e){e instanceof Cs?(this._rangeStart=this._getCellCompareValue(e.start),this._rangeEnd=this._getCellCompareValue(e.end),this._isRange=!0):(this._rangeStart=this._rangeEnd=this._getCellCompareValue(e),this._isRange=!1),this._comparisonRangeStart=this._getCellCompareValue(this.comparisonStart),this._comparisonRangeEnd=this._getCellCompareValue(this.comparisonEnd)}_canSelect(e){return!this.dateFilter||this.dateFilter(e)}_clearPreview(){this._previewStart=this._previewEnd=null}static{this.\u0275fac=function(n){return new(n||i)(x(mt),x(cc,8),x(En,8),x(Mi,8),x(BY,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-month-view"]],viewQuery:function(n,r){if(n&1&&$e(qf,5),n&2){let s;ye(s=xe())&&(r._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName",activeDrag:"activeDrag"},outputs:{selectedChange:"selectedChange",_userSelection:"_userSelection",dragStarted:"dragStarted",dragEnded:"dragEnded",activeDateChange:"activeDateChange"},exportAs:["matMonthView"],standalone:!0,features:[ht,Re],decls:8,vars:14,consts:[["role","grid",1,"mat-calendar-table"],[1,"mat-calendar-table-header"],["scope","col"],["aria-hidden","true"],["colspan","7",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","previewChange","dragStarted","dragEnded","keyup","keydown","label","rows","todayValue","startValue","endValue","comparisonStart","comparisonEnd","previewStart","previewEnd","isRange","labelMinRequiredCells","activeCell","startDateAccessibleName","endDateAccessibleName"],[1,"cdk-visually-hidden"]],template:function(n,r){n&1&&(f(0,"table",0)(1,"thead",1)(2,"tr"),Qb(3,iMe,5,2,"th",2,Yb),p(),f(5,"tr",3),j(6,"th",4),p()(),f(7,"tbody",5),$("selectedValueChange",function(o){return r._dateSelected(o)})("activeDateChange",function(o){return r._updateActiveDate(o)})("previewChange",function(o){return r._previewChanged(o)})("dragStarted",function(o){return r.dragStarted.emit(o)})("dragEnded",function(o){return r._dragEnded(o)})("keyup",function(o){return r._handleCalendarBodyKeyup(o)})("keydown",function(o){return r._handleCalendarBodyKeydown(o)}),p()()),n&2&&(g(3),Xb(r._weekdays),g(4),z("label",r._monthLabel)("rows",r._weeks)("todayValue",r._todayDate)("startValue",r._rangeStart)("endValue",r._rangeEnd)("comparisonStart",r._comparisonRangeStart)("comparisonEnd",r._comparisonRangeEnd)("previewStart",r._previewStart)("previewEnd",r._previewEnd)("isRange",r._isRange)("labelMinRequiredCells",3)("activeCell",r._dateAdapter.getDate(r.activeDate)-1)("startDateAccessibleName",r.startDateAccessibleName)("endDateAccessibleName",r.endDateAccessibleName))},dependencies:[qf],encapsulation:2,changeDetection:0})}}return i})(),qr=24,dN=4,PY=(()=>{class i{get activeDate(){return this._activeDate}set activeDate(e){let n=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),VY(this._dateAdapter,n,this._activeDate,this.minDate,this.maxDate)||this._init()}get selected(){return this._selected}set selected(e){e instanceof Cs?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedYear(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,n,r){this._changeDetectorRef=e,this._dateAdapter=n,this._dir=r,this._rerenderSubscription=At.EMPTY,this.selectedChange=new ue,this.yearSelected=new ue,this.activeDateChange=new ue,this._dateAdapter,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Pi(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_init(){this._todayYear=this._dateAdapter.getYear(this._dateAdapter.today());let n=this._dateAdapter.getYear(this._activeDate)-Fb(this._dateAdapter,this.activeDate,this.minDate,this.maxDate);this._years=[];for(let r=0,s=[];r<qr;r++)s.push(n+r),s.length==dN&&(this._years.push(s.map(o=>this._createCellForYear(o))),s=[]);this._changeDetectorRef.markForCheck()}_yearSelected(e){let n=e.value,r=this._dateAdapter.createDate(n,0,1),s=this._getDateFromYear(n);this.yearSelected.emit(r),this.selectedChange.emit(s)}_updateActiveDate(e){let n=e.value,r=this._activeDate;this.activeDate=this._getDateFromYear(n),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let n=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-dN);break;case 40:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,dN);break;case 36:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,-Fb(this._dateAdapter,this.activeDate,this.minDate,this.maxDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,qr-Fb(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)-1);break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-qr*10:-qr);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?qr*10:qr);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked(),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._yearSelected({value:this._dateAdapter.getYear(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_getActiveCell(){return Fb(this._dateAdapter,this.activeDate,this.minDate,this.maxDate)}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getDateFromYear(e){let n=this._dateAdapter.getMonth(this.activeDate),r=this._dateAdapter.getNumDaysInMonth(this._dateAdapter.createDate(e,n,1));return this._dateAdapter.createDate(e,n,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForYear(e){let n=this._dateAdapter.createDate(e,0,1),r=this._dateAdapter.getYearName(n),s=this.dateClass?this.dateClass(n,"multi-year"):void 0;return new Nb(e,r,r,this._shouldEnableYear(e),s)}_shouldEnableYear(e){if(e==null||this.maxDate&&e>this._dateAdapter.getYear(this.maxDate)||this.minDate&&e<this._dateAdapter.getYear(this.minDate))return!1;if(!this.dateFilter)return!0;let n=this._dateAdapter.createDate(e,0,1);for(let r=n;this._dateAdapter.getYear(r)==e;r=this._dateAdapter.addCalendarDays(r,1))if(this.dateFilter(r))return!0;return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedYear(e){if(this._selectedYear=null,e instanceof Cs){let n=e.start||e.end;n&&(this._selectedYear=this._dateAdapter.getYear(n))}else e&&(this._selectedYear=this._dateAdapter.getYear(e))}static{this.\u0275fac=function(n){return new(n||i)(x(mt),x(En,8),x(Mi,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-multi-year-view"]],viewQuery:function(n,r){if(n&1&&$e(qf,5),n&2){let s;ye(s=xe())&&(r._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",activeDateChange:"activeDateChange"},exportAs:["matMultiYearView"],standalone:!0,features:[Re],decls:5,vars:7,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","rows","todayValue","startValue","endValue","numCols","cellAspectRatio","activeCell"]],template:function(n,r){n&1&&(f(0,"table",0)(1,"thead",1)(2,"tr"),j(3,"th",2),p()(),f(4,"tbody",3),$("selectedValueChange",function(o){return r._yearSelected(o)})("activeDateChange",function(o){return r._updateActiveDate(o)})("keyup",function(o){return r._handleCalendarBodyKeyup(o)})("keydown",function(o){return r._handleCalendarBodyKeydown(o)}),p()()),n&2&&(g(4),z("rows",r._years)("todayValue",r._todayYear)("startValue",r._selectedYear)("endValue",r._selectedYear)("numCols",4)("cellAspectRatio",4/7)("activeCell",r._getActiveCell()))},dependencies:[qf],encapsulation:2,changeDetection:0})}}return i})();function VY(i,t,e,n,r){let s=i.getYear(t),o=i.getYear(e),a=zY(i,n,r);return Math.floor((s-a)/qr)===Math.floor((o-a)/qr)}function Fb(i,t,e,n){let r=i.getYear(t);return gMe(r-zY(i,e,n),qr)}function zY(i,t,e){let n=0;return e?n=i.getYear(e)-qr+1:t&&(n=i.getYear(t)),n}function gMe(i,t){return(i%t+t)%t}var RY=(()=>{class i{get activeDate(){return this._activeDate}set activeDate(e){let n=this._activeDate,r=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))||this._dateAdapter.today();this._activeDate=this._dateAdapter.clampDate(r,this.minDate,this.maxDate),this._dateAdapter.getYear(n)!==this._dateAdapter.getYear(this._activeDate)&&this._init()}get selected(){return this._selected}set selected(e){e instanceof Cs?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e)),this._setSelectedMonth(e)}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}constructor(e,n,r,s){this._changeDetectorRef=e,this._dateFormats=n,this._dateAdapter=r,this._dir=s,this._rerenderSubscription=At.EMPTY,this.selectedChange=new ue,this.monthSelected=new ue,this.activeDateChange=new ue,this._activeDate=this._dateAdapter.today()}ngAfterContentInit(){this._rerenderSubscription=this._dateAdapter.localeChanges.pipe(Pi(null)).subscribe(()=>this._init())}ngOnDestroy(){this._rerenderSubscription.unsubscribe()}_monthSelected(e){let n=e.value,r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),n,1);this.monthSelected.emit(r);let s=this._getDateFromMonth(n);this.selectedChange.emit(s)}_updateActiveDate(e){let n=e.value,r=this._activeDate;this.activeDate=this._getDateFromMonth(n),this._dateAdapter.compareDate(r,this.activeDate)&&this.activeDateChange.emit(this.activeDate)}_handleCalendarBodyKeydown(e){let n=this._activeDate,r=this._isRtl();switch(e.keyCode){case 37:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?1:-1);break;case 39:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,r?-1:1);break;case 38:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-4);break;case 40:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,4);break;case 36:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,-this._dateAdapter.getMonth(this._activeDate));break;case 35:this.activeDate=this._dateAdapter.addCalendarMonths(this._activeDate,11-this._dateAdapter.getMonth(this._activeDate));break;case 33:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?-10:-1);break;case 34:this.activeDate=this._dateAdapter.addCalendarYears(this._activeDate,e.altKey?10:1);break;case 13:case 32:this._selectionKeyPressed=!0;break;default:return}this._dateAdapter.compareDate(n,this.activeDate)&&(this.activeDateChange.emit(this.activeDate),this._focusActiveCellAfterViewChecked()),e.preventDefault()}_handleCalendarBodyKeyup(e){(e.keyCode===32||e.keyCode===13)&&(this._selectionKeyPressed&&this._monthSelected({value:this._dateAdapter.getMonth(this._activeDate),event:e}),this._selectionKeyPressed=!1)}_init(){this._setSelectedMonth(this.selected),this._todayMonth=this._getMonthInCurrentYear(this._dateAdapter.today()),this._yearLabel=this._dateAdapter.getYearName(this.activeDate);let e=this._dateAdapter.getMonthNames("short");this._months=[[0,1,2,3],[4,5,6,7],[8,9,10,11]].map(n=>n.map(r=>this._createCellForMonth(r,e[r]))),this._changeDetectorRef.markForCheck()}_focusActiveCell(){this._matCalendarBody._focusActiveCell()}_focusActiveCellAfterViewChecked(){this._matCalendarBody._scheduleFocusActiveCellAfterViewChecked()}_getMonthInCurrentYear(e){return e&&this._dateAdapter.getYear(e)==this._dateAdapter.getYear(this.activeDate)?this._dateAdapter.getMonth(e):null}_getDateFromMonth(e){let n=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),r=this._dateAdapter.getNumDaysInMonth(n);return this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,Math.min(this._dateAdapter.getDate(this.activeDate),r))}_createCellForMonth(e,n){let r=this._dateAdapter.createDate(this._dateAdapter.getYear(this.activeDate),e,1),s=this._dateAdapter.format(r,this._dateFormats.display.monthYearA11yLabel),o=this.dateClass?this.dateClass(r,"year"):void 0;return new Nb(e,n.toLocaleUpperCase(),s,this._shouldEnableMonth(e),o)}_shouldEnableMonth(e){let n=this._dateAdapter.getYear(this.activeDate);if(e==null||this._isYearAndMonthAfterMaxDate(n,e)||this._isYearAndMonthBeforeMinDate(n,e))return!1;if(!this.dateFilter)return!0;let r=this._dateAdapter.createDate(n,e,1);for(let s=r;this._dateAdapter.getMonth(s)==e;s=this._dateAdapter.addCalendarDays(s,1))if(this.dateFilter(s))return!0;return!1}_isYearAndMonthAfterMaxDate(e,n){if(this.maxDate){let r=this._dateAdapter.getYear(this.maxDate),s=this._dateAdapter.getMonth(this.maxDate);return e>r||e===r&&n>s}return!1}_isYearAndMonthBeforeMinDate(e,n){if(this.minDate){let r=this._dateAdapter.getYear(this.minDate),s=this._dateAdapter.getMonth(this.minDate);return e<r||e===r&&n<s}return!1}_isRtl(){return this._dir&&this._dir.value==="rtl"}_setSelectedMonth(e){e instanceof Cs?this._selectedMonth=this._getMonthInCurrentYear(e.start)||this._getMonthInCurrentYear(e.end):this._selectedMonth=this._getMonthInCurrentYear(e)}static{this.\u0275fac=function(n){return new(n||i)(x(mt),x(cc,8),x(En,8),x(Mi,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-year-view"]],viewQuery:function(n,r){if(n&1&&$e(qf,5),n&2){let s;ye(s=xe())&&(r._matCalendarBody=s.first)}},inputs:{activeDate:"activeDate",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass"},outputs:{selectedChange:"selectedChange",monthSelected:"monthSelected",activeDateChange:"activeDateChange"},exportAs:["matYearView"],standalone:!0,features:[Re],decls:5,vars:9,consts:[["role","grid",1,"mat-calendar-table"],["aria-hidden","true",1,"mat-calendar-table-header"],["colspan","4",1,"mat-calendar-table-header-divider"],["mat-calendar-body","",3,"selectedValueChange","activeDateChange","keyup","keydown","label","rows","todayValue","startValue","endValue","labelMinRequiredCells","numCols","cellAspectRatio","activeCell"]],template:function(n,r){n&1&&(f(0,"table",0)(1,"thead",1)(2,"tr"),j(3,"th",2),p()(),f(4,"tbody",3),$("selectedValueChange",function(o){return r._monthSelected(o)})("activeDateChange",function(o){return r._updateActiveDate(o)})("keyup",function(o){return r._handleCalendarBodyKeyup(o)})("keydown",function(o){return r._handleCalendarBodyKeydown(o)}),p()()),n&2&&(g(4),z("label",r._yearLabel)("rows",r._months)("todayValue",r._todayMonth)("startValue",r._selectedMonth)("endValue",r._selectedMonth)("labelMinRequiredCells",2)("numCols",4)("cellAspectRatio",4/7)("activeCell",r._dateAdapter.getMonth(r.activeDate)))},dependencies:[qf],encapsulation:2,changeDetection:0})}}return i})(),_Me=1,jY=(()=>{class i{constructor(e,n,r,s,o){this._intl=e,this.calendar=n,this._dateAdapter=r,this._dateFormats=s,this._id=`mat-calendar-header-${_Me++}`,this._periodButtonLabelId=`${this._id}-period-label`,this.calendar.stateChanges.subscribe(()=>o.markForCheck())}get periodButtonText(){return this.calendar.currentView=="month"?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():this.calendar.currentView=="year"?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRange(...this._formatMinAndMaxYearLabels())}get periodButtonDescription(){return this.calendar.currentView=="month"?this._dateAdapter.format(this.calendar.activeDate,this._dateFormats.display.monthYearLabel).toLocaleUpperCase():this.calendar.currentView=="year"?this._dateAdapter.getYearName(this.calendar.activeDate):this._intl.formatYearRangeLabel(...this._formatMinAndMaxYearLabels())}get periodButtonLabel(){return this.calendar.currentView=="month"?this._intl.switchToMultiYearViewLabel:this._intl.switchToMonthViewLabel}get prevButtonLabel(){return{month:this._intl.prevMonthLabel,year:this._intl.prevYearLabel,"multi-year":this._intl.prevMultiYearLabel}[this.calendar.currentView]}get nextButtonLabel(){return{month:this._intl.nextMonthLabel,year:this._intl.nextYearLabel,"multi-year":this._intl.nextMultiYearLabel}[this.calendar.currentView]}currentPeriodClicked(){this.calendar.currentView=this.calendar.currentView=="month"?"multi-year":"month"}previousClicked(){this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,-1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?-1:-qr)}nextClicked(){this.calendar.activeDate=this.calendar.currentView=="month"?this._dateAdapter.addCalendarMonths(this.calendar.activeDate,1):this._dateAdapter.addCalendarYears(this.calendar.activeDate,this.calendar.currentView=="year"?1:qr)}previousEnabled(){return this.calendar.minDate?!this.calendar.minDate||!this._isSameView(this.calendar.activeDate,this.calendar.minDate):!0}nextEnabled(){return!this.calendar.maxDate||!this._isSameView(this.calendar.activeDate,this.calendar.maxDate)}_isSameView(e,n){return this.calendar.currentView=="month"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(n)&&this._dateAdapter.getMonth(e)==this._dateAdapter.getMonth(n):this.calendar.currentView=="year"?this._dateAdapter.getYear(e)==this._dateAdapter.getYear(n):VY(this._dateAdapter,e,n,this.calendar.minDate,this.calendar.maxDate)}_formatMinAndMaxYearLabels(){let n=this._dateAdapter.getYear(this.calendar.activeDate)-Fb(this._dateAdapter,this.calendar.activeDate,this.calendar.minDate,this.calendar.maxDate),r=n+qr-1,s=this._dateAdapter.getYearName(this._dateAdapter.createDate(n,0,1)),o=this._dateAdapter.getYearName(this._dateAdapter.createDate(r,0,1));return[s,o]}static{this.\u0275fac=function(n){return new(n||i)(x(Bb),x(Ri(()=>uN)),x(En,8),x(cc,8),x(mt))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-calendar-header"]],exportAs:["matCalendarHeader"],standalone:!0,features:[Re],ngContentSelectors:nMe,decls:13,vars:11,consts:[[1,"mat-calendar-header"],[1,"mat-calendar-controls"],[1,"cdk-visually-hidden",3,"id"],["mat-button","","type","button","aria-live","polite",1,"mat-calendar-period-button",3,"click"],["aria-hidden","true"],["viewBox","0 0 10 5","focusable","false","aria-hidden","true",1,"mat-calendar-arrow"],["points","0,0 5,5 10,0"],[1,"mat-calendar-spacer"],["mat-icon-button","","type","button",1,"mat-calendar-previous-button",3,"click","disabled"],["mat-icon-button","","type","button",1,"mat-calendar-next-button",3,"click","disabled"]],template:function(n,r){n&1&&(nt(),f(0,"div",0)(1,"div",1)(2,"label",2),y(3),p(),f(4,"button",3),$("click",function(){return r.currentPeriodClicked()}),f(5,"span",4),y(6),p(),bt(),f(7,"svg",5),j(8,"polygon",6),p()(),li(),j(9,"div",7),Ee(10),f(11,"button",8),$("click",function(){return r.previousClicked()}),p(),f(12,"button",9),$("click",function(){return r.nextClicked()}),p()()()),n&2&&(g(2),z("id",r._periodButtonLabelId),g(),B(r.periodButtonDescription),g(),Se("aria-label",r.periodButtonLabel)("aria-describedby",r._periodButtonLabelId),g(2),B(r.periodButtonText),g(),le("mat-calendar-invert",r.calendar.currentView!=="month"),g(4),z("disabled",!r.previousEnabled()),Se("aria-label",r.prevButtonLabel),g(),z("disabled",!r.nextEnabled()),Se("aria-label",r.nextButtonLabel))},dependencies:[ir,Hr],encapsulation:2,changeDetection:0})}}return i})(),uN=(()=>{class i{get startAt(){return this._startAt}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get selected(){return this._selected}set selected(e){e instanceof Cs?this._selected=e:this._selected=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get minDate(){return this._minDate}set minDate(e){this._minDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get maxDate(){return this._maxDate}set maxDate(e){this._maxDate=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get activeDate(){return this._clampedActiveDate}set activeDate(e){this._clampedActiveDate=this._dateAdapter.clampDate(e,this.minDate,this.maxDate),this.stateChanges.next(),this._changeDetectorRef.markForCheck()}get currentView(){return this._currentView}set currentView(e){let n=this._currentView!==e?e:null;this._currentView=e,this._moveFocusOnNextTick=!0,this._changeDetectorRef.markForCheck(),n&&this.viewChanged.emit(n)}constructor(e,n,r,s){this._dateAdapter=n,this._dateFormats=r,this._changeDetectorRef=s,this._moveFocusOnNextTick=!1,this.startView="month",this.selectedChange=new ue,this.yearSelected=new ue,this.monthSelected=new ue,this.viewChanged=new ue(!0),this._userSelection=new ue,this._userDragDrop=new ue,this._activeDrag=null,this.stateChanges=new ke,this._intlChanges=e.changes.subscribe(()=>{s.markForCheck(),this.stateChanges.next()})}ngAfterContentInit(){this._calendarHeaderPortal=new Ea(this.headerComponent||jY),this.activeDate=this.startAt||this._dateAdapter.today(),this._currentView=this.startView}ngAfterViewChecked(){this._moveFocusOnNextTick&&(this._moveFocusOnNextTick=!1,this.focusActiveCell())}ngOnDestroy(){this._intlChanges.unsubscribe(),this.stateChanges.complete()}ngOnChanges(e){let n=e.minDate&&!this._dateAdapter.sameDate(e.minDate.previousValue,e.minDate.currentValue)?e.minDate:void 0,r=e.maxDate&&!this._dateAdapter.sameDate(e.maxDate.previousValue,e.maxDate.currentValue)?e.maxDate:void 0,s=n||r||e.dateFilter;if(s&&!s.firstChange){let o=this._getCurrentViewComponent();o&&(this._changeDetectorRef.detectChanges(),o._init())}this.stateChanges.next()}focusActiveCell(){this._getCurrentViewComponent()._focusActiveCell(!1)}updateTodaysDate(){this._getCurrentViewComponent()._init()}_dateSelected(e){let n=e.value;(this.selected instanceof Cs||n&&!this._dateAdapter.sameDate(n,this.selected))&&this.selectedChange.emit(n),this._userSelection.emit(e)}_yearSelectedInMultiYearView(e){this.yearSelected.emit(e)}_monthSelectedInYearView(e){this.monthSelected.emit(e)}_goToDateInView(e,n){this.activeDate=e,this.currentView=n}_dragStarted(e){this._activeDrag=e}_dragEnded(e){this._activeDrag&&(e.value&&this._userDragDrop.emit(e),this._activeDrag=null)}_getCurrentViewComponent(){return this.monthView||this.yearView||this.multiYearView}static{this.\u0275fac=function(n){return new(n||i)(x(Bb),x(En,8),x(cc,8),x(mt))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-calendar"]],viewQuery:function(n,r){if(n&1&&($e(OY,5),$e(RY,5),$e(PY,5)),n&2){let s;ye(s=xe())&&(r.monthView=s.first),ye(s=xe())&&(r.yearView=s.first),ye(s=xe())&&(r.multiYearView=s.first)}},hostAttrs:[1,"mat-calendar"],inputs:{headerComponent:"headerComponent",startAt:"startAt",startView:"startView",selected:"selected",minDate:"minDate",maxDate:"maxDate",dateFilter:"dateFilter",dateClass:"dateClass",comparisonStart:"comparisonStart",comparisonEnd:"comparisonEnd",startDateAccessibleName:"startDateAccessibleName",endDateAccessibleName:"endDateAccessibleName"},outputs:{selectedChange:"selectedChange",yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",_userSelection:"_userSelection",_userDragDrop:"_userDragDrop"},exportAs:["matCalendar"],standalone:!0,features:[je([LY]),ht,Re],decls:5,vars:2,consts:[[3,"cdkPortalOutlet"],["cdkMonitorSubtreeFocus","","tabindex","-1",1,"mat-calendar-content"],[3,"activeDateChange","_userSelection","dragStarted","dragEnded","activeDate","selected","dateFilter","maxDate","minDate","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName","activeDrag"],[3,"activeDateChange","monthSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"],[3,"activeDateChange","yearSelected","selectedChange","activeDate","selected","dateFilter","maxDate","minDate","dateClass"]],template:function(n,r){if(n&1&&(Y(0,rMe,0,0,"ng-template",0),f(1,"div",1),Y(2,sMe,1,11)(3,oMe,1,6)(4,aMe,1,6),p()),n&2){let s;z("cdkPortalOutlet",r._calendarHeaderPortal),g(2),et(2,(s=r.currentView)==="month"?2:s==="year"?3:s==="multi-year"?4:-1)}},dependencies:[zo,r7,OY,RY,PY],styles:['.mat-calendar{display:block;font-family:var(--mat-datepicker-calendar-text-font);font-size:var(--mat-datepicker-calendar-text-size)}.mat-calendar-header{padding:8px 8px 0 8px}.mat-calendar-content{padding:0 8px 8px 8px;outline:none}.mat-calendar-controls{display:flex;align-items:center;margin:5% calc(4.7142857143% - 16px)}.mat-calendar-spacer{flex:1 1 auto}.mat-calendar-period-button{min-width:0;margin:0 8px;font-size:var(--mat-datepicker-calendar-period-button-text-size);font-weight:var(--mat-datepicker-calendar-period-button-text-weight);--mdc-text-button-label-text-color:var(--mat-datepicker-calendar-period-button-text-color)}.mat-calendar-arrow{display:inline-block;width:10px;height:5px;margin:0 0 0 5px;vertical-align:middle;fill:var(--mat-datepicker-calendar-period-button-icon-color)}.mat-calendar-arrow.mat-calendar-invert{transform:rotate(180deg)}[dir=rtl] .mat-calendar-arrow{margin:0 5px 0 0}.cdk-high-contrast-active .mat-calendar-arrow{fill:CanvasText}.mat-calendar-previous-button,.mat-calendar-next-button{position:relative}.mat-datepicker-content .mat-calendar-previous-button:not(.mat-mdc-button-disabled),.mat-datepicker-content .mat-calendar-next-button:not(.mat-mdc-button-disabled){color:var(--mat-datepicker-calendar-navigation-button-icon-color)}.mat-calendar-previous-button::after,.mat-calendar-next-button::after{top:0;left:0;right:0;bottom:0;position:absolute;content:"";margin:15.5px;border:0 solid currentColor;border-top-width:2px}[dir=rtl] .mat-calendar-previous-button,[dir=rtl] .mat-calendar-next-button{transform:rotate(180deg)}.mat-calendar-previous-button::after{border-left-width:2px;transform:translateX(2px) rotate(-45deg)}.mat-calendar-next-button::after{border-right-width:2px;transform:translateX(-2px) rotate(45deg)}.mat-calendar-table{border-spacing:0;border-collapse:collapse;width:100%}.mat-calendar-table-header th{text-align:center;padding:0 0 8px 0;color:var(--mat-datepicker-calendar-header-text-color);font-size:var(--mat-datepicker-calendar-header-text-size);font-weight:var(--mat-datepicker-calendar-header-text-weight)}.mat-calendar-table-header-divider{position:relative;height:1px}.mat-calendar-table-header-divider::after{content:"";position:absolute;top:0;left:-8px;right:-8px;height:1px;background:var(--mat-datepicker-calendar-header-divider-color)}.mat-calendar-body-cell-content::before{margin:calc(calc(var(--mat-focus-indicator-border-width, 3px) + 3px)*-1)}.mat-calendar-body-cell:focus .mat-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return i})(),FY={transformPanel:Cr("transformPanel",[wn("void => enter-dropdown",An("120ms cubic-bezier(0, 0, 0.2, 1)",hS([ci({opacity:0,transform:"scale(1, 0.8)"}),ci({opacity:1,transform:"scale(1, 1)"})]))),wn("void => enter-dialog",An("150ms cubic-bezier(0, 0, 0.2, 1)",hS([ci({opacity:0,transform:"scale(0.7)"}),ci({transform:"none",opacity:1})]))),wn("* => void",An("100ms linear",ci({opacity:0})))]),fadeInCalendar:Cr("fadeInCalendar",[or("void",ci({opacity:0})),or("enter",ci({opacity:1})),wn("void => *",An("120ms 100ms cubic-bezier(0.55, 0, 0.55, 0.2)"))])},bMe=0,UY=new te("mat-datepicker-scroll-strategy",{providedIn:"root",factory:()=>{let i=He(Qi);return()=>i.scrollStrategies.reposition()}});function vMe(i){return()=>i.scrollStrategies.reposition()}var yMe={provide:UY,deps:[Qi],useFactory:vMe},HY=(()=>{class i{constructor(e,n,r,s,o,a){this._elementRef=e,this._changeDetectorRef=n,this._globalModel=r,this._dateAdapter=s,this._rangeSelectionStrategy=o,this._subscriptions=new At,this._animationDone=new ke,this._isAnimating=!1,this._actionsPortal=null,this._closeButtonText=a.closeCalendarLabel}ngOnInit(){this._animationState=this.datepicker.touchUi?"enter-dialog":"enter-dropdown"}ngAfterViewInit(){this._subscriptions.add(this.datepicker.stateChanges.subscribe(()=>{this._changeDetectorRef.markForCheck()})),this._calendar.focusActiveCell()}ngOnDestroy(){this._subscriptions.unsubscribe(),this._animationDone.complete()}_handleUserSelection(e){let n=this._model.selection,r=e.value,s=n instanceof Cs;if(s&&this._rangeSelectionStrategy){let o=this._rangeSelectionStrategy.selectionFinished(r,n,e.event);this._model.updateSelection(o,this)}else r&&(s||!this._dateAdapter.sameDate(r,n))&&this._model.add(r);(!this._model||this._model.isComplete())&&!this._actionsPortal&&this.datepicker.close()}_handleUserDragDrop(e){this._model.updateSelection(e.value,this)}_startExitAnimation(){this._animationState="void",this._changeDetectorRef.markForCheck()}_handleAnimationEvent(e){this._isAnimating=e.phaseName==="start",this._isAnimating||this._animationDone.next()}_getSelected(){return this._model.selection}_applyPendingSelection(){this._model!==this._globalModel&&this._globalModel.updateSelection(this._model.selection,this)}_assignActions(e,n){this._model=e?this._globalModel.clone():this._globalModel,this._actionsPortal=e,n&&this._changeDetectorRef.detectChanges()}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(mt),x(Lb),x(En),x(BY,8),x(Bb))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-datepicker-content"]],viewQuery:function(n,r){if(n&1&&$e(uN,5),n&2){let s;ye(s=xe())&&(r._calendar=s.first)}},hostAttrs:[1,"mat-datepicker-content"],hostVars:5,hostBindings:function(n,r){n&1&&ZN("@transformPanel.start",function(o){return r._handleAnimationEvent(o)})("@transformPanel.done",function(o){return r._handleAnimationEvent(o)}),n&2&&(XN("@transformPanel",r._animationState),Hn(r.color?"mat-"+r.color:""),le("mat-datepicker-content-touch",r.datepicker.touchUi))},inputs:{color:"color"},exportAs:["matDatepickerContent"],standalone:!0,features:[Re],decls:5,vars:27,consts:[["cdkTrapFocus","","role","dialog",1,"mat-datepicker-content-container"],[3,"yearSelected","monthSelected","viewChanged","_userSelection","_userDragDrop","id","startAt","startView","minDate","maxDate","dateFilter","headerComponent","selected","dateClass","comparisonStart","comparisonEnd","startDateAccessibleName","endDateAccessibleName"],[3,"cdkPortalOutlet"],["type","button","mat-raised-button","",1,"mat-datepicker-close-button",3,"focus","blur","click","color"]],template:function(n,r){if(n&1&&(f(0,"div",0)(1,"mat-calendar",1),$("yearSelected",function(o){return r.datepicker._selectYear(o)})("monthSelected",function(o){return r.datepicker._selectMonth(o)})("viewChanged",function(o){return r.datepicker._viewChanged(o)})("_userSelection",function(o){return r._handleUserSelection(o)})("_userDragDrop",function(o){return r._handleUserDragDrop(o)}),p(),Y(2,lMe,0,0,"ng-template",2),f(3,"button",3),$("focus",function(){return r._closeButtonFocused=!0})("blur",function(){return r._closeButtonFocused=!1})("click",function(){return r.datepicker.close()}),y(4),p()()),n&2){let s;le("mat-datepicker-content-container-with-custom-header",r.datepicker.calendarHeaderComponent)("mat-datepicker-content-container-with-actions",r._actionsPortal),Se("aria-modal",!0)("aria-labelledby",(s=r._dialogLabelId)!==null&&s!==void 0?s:void 0),g(),Hn(r.datepicker.panelClass),z("id",r.datepicker.id)("startAt",r.datepicker.startAt)("startView",r.datepicker.startView)("minDate",r.datepicker._getMinDate())("maxDate",r.datepicker._getMaxDate())("dateFilter",r.datepicker._getDateFilter())("headerComponent",r.datepicker.calendarHeaderComponent)("selected",r._getSelected())("dateClass",r.datepicker.dateClass)("comparisonStart",r.comparisonStart)("comparisonEnd",r.comparisonEnd)("@fadeInCalendar","enter")("startDateAccessibleName",r.startDateAccessibleName)("endDateAccessibleName",r.endDateAccessibleName),g(),z("cdkPortalOutlet",r._actionsPortal),g(),le("cdk-visually-hidden",!r._closeButtonFocused),z("color",r.color||"primary"),g(),B(r._closeButtonText)}},dependencies:[t7,uN,zo,ir],styles:[".mat-datepicker-content{display:block;border-radius:4px;background-color:var(--mat-datepicker-calendar-container-background-color);color:var(--mat-datepicker-calendar-container-text-color);box-shadow:var(--mat-datepicker-calendar-container-elevation-shadow);border-radius:var(--mat-datepicker-calendar-container-shape)}.mat-datepicker-content .mat-calendar{width:296px;height:354px}.mat-datepicker-content .mat-datepicker-content-container-with-custom-header .mat-calendar{height:auto}.mat-datepicker-content .mat-datepicker-close-button{position:absolute;top:100%;left:0;margin-top:8px}.ng-animating .mat-datepicker-content .mat-datepicker-close-button{display:none}.mat-datepicker-content-container{display:flex;flex-direction:column;justify-content:space-between}.mat-datepicker-content-touch{display:block;max-height:80vh;box-shadow:var(--mat-datepicker-calendar-container-touch-elevation-shadow);border-radius:var(--mat-datepicker-calendar-container-touch-shape);position:relative;overflow:visible}.mat-datepicker-content-touch .mat-datepicker-content-container{min-height:312px;max-height:788px;min-width:250px;max-width:750px}.mat-datepicker-content-touch .mat-calendar{width:100%;height:auto}@media all and (orientation: landscape){.mat-datepicker-content-touch .mat-datepicker-content-container{width:64vh;height:80vh}}@media all and (orientation: portrait){.mat-datepicker-content-touch .mat-datepicker-content-container{width:80vw;height:100vw}.mat-datepicker-content-touch .mat-datepicker-content-container-with-actions{height:115vw}}"],encapsulation:2,data:{animation:[FY.transformPanel,FY.fadeInCalendar]},changeDetection:0})}}return i})(),NY=(()=>{class i{get startAt(){return this._startAt||(this.datepickerInput?this.datepickerInput.getStartValue():null)}set startAt(e){this._startAt=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e))}get color(){return this._color||(this.datepickerInput?this.datepickerInput.getThemePalette():void 0)}set color(e){this._color=e}get disabled(){return this._disabled===void 0&&this.datepickerInput?this.datepickerInput.disabled:!!this._disabled}set disabled(e){e!==this._disabled&&(this._disabled=e,this.stateChanges.next(void 0))}get panelClass(){return this._panelClass}set panelClass(e){this._panelClass=U9(e)}get opened(){return this._opened}set opened(e){e?this.open():this.close()}_getMinDate(){return this.datepickerInput&&this.datepickerInput.min}_getMaxDate(){return this.datepickerInput&&this.datepickerInput.max}_getDateFilter(){return this.datepickerInput&&this.datepickerInput.dateFilter}constructor(e,n,r,s,o,a,l){this._overlay=e,this._ngZone=n,this._viewContainerRef=r,this._dateAdapter=o,this._dir=a,this._model=l,this._inputStateChanges=At.EMPTY,this._document=He(Ze),this.startView="month",this.touchUi=!1,this.xPosition="start",this.yPosition="below",this.restoreFocus=!0,this.yearSelected=new ue,this.monthSelected=new ue,this.viewChanged=new ue(!0),this.openedStream=new ue,this.closedStream=new ue,this._opened=!1,this.id=`mat-datepicker-${bMe++}`,this._focusedElementBeforeOpen=null,this._backdropHarnessClass=`${this.id}-backdrop`,this.stateChanges=new ke,this._dateAdapter,this._scrollStrategy=s}ngOnChanges(e){let n=e.xPosition||e.yPosition;if(n&&!n.firstChange&&this._overlayRef){let r=this._overlayRef.getConfig().positionStrategy;r instanceof J_&&(this._setConnectedPositions(r),this.opened&&this._overlayRef.updatePosition())}this.stateChanges.next(void 0)}ngOnDestroy(){this._destroyOverlay(),this.close(),this._inputStateChanges.unsubscribe(),this.stateChanges.complete()}select(e){this._model.add(e)}_selectYear(e){this.yearSelected.emit(e)}_selectMonth(e){this.monthSelected.emit(e)}_viewChanged(e){this.viewChanged.emit(e)}registerInput(e){return this.datepickerInput,this._inputStateChanges.unsubscribe(),this.datepickerInput=e,this._inputStateChanges=e.stateChanges.subscribe(()=>this.stateChanges.next(void 0)),this._model}registerActions(e){this._actionsPortal,this._actionsPortal=e,this._componentRef?.instance._assignActions(e,!0)}removeActions(e){e===this._actionsPortal&&(this._actionsPortal=null,this._componentRef?.instance._assignActions(null,!0))}open(){this._opened||this.disabled||this._componentRef?.instance._isAnimating||(this.datepickerInput,this._focusedElementBeforeOpen=sc(),this._openOverlay(),this._opened=!0,this.openedStream.emit())}close(){if(!this._opened||this._componentRef?.instance._isAnimating)return;let e=this.restoreFocus&&this._focusedElementBeforeOpen&&typeof this._focusedElementBeforeOpen.focus=="function",n=()=>{this._opened&&(this._opened=!1,this.closedStream.emit())};if(this._componentRef){let{instance:r,location:s}=this._componentRef;r._startExitAnimation(),r._animationDone.pipe(Pt(1)).subscribe(()=>{let o=this._document.activeElement;e&&(!o||o===this._document.activeElement||s.nativeElement.contains(o))&&this._focusedElementBeforeOpen.focus(),this._focusedElementBeforeOpen=null,this._destroyOverlay()})}e?setTimeout(n):n()}_applyPendingSelection(){this._componentRef?.instance?._applyPendingSelection()}_forwardContentValues(e){e.datepicker=this,e.color=this.color,e._dialogLabelId=this.datepickerInput.getOverlayLabelId(),e._assignActions(this._actionsPortal,!1)}_openOverlay(){this._destroyOverlay();let e=this.touchUi,n=new Ea(HY,this._viewContainerRef),r=this._overlayRef=this._overlay.create(new dc({positionStrategy:e?this._getDialogStrategy():this._getDropdownStrategy(),hasBackdrop:!0,backdropClass:[e?"cdk-overlay-dark-backdrop":"mat-overlay-transparent-backdrop",this._backdropHarnessClass],direction:this._dir,scrollStrategy:e?this._overlay.scrollStrategies.block():this._scrollStrategy(),panelClass:`mat-datepicker-${e?"dialog":"popup"}`}));this._getCloseStream(r).subscribe(s=>{s&&s.preventDefault(),this.close()}),r.keydownEvents().subscribe(s=>{let o=s.keyCode;(o===38||o===40||o===37||o===39||o===33||o===34)&&s.preventDefault()}),this._componentRef=r.attach(n),this._forwardContentValues(this._componentRef.instance),e||this._ngZone.onStable.pipe(Pt(1)).subscribe(()=>r.updatePosition())}_destroyOverlay(){this._overlayRef&&(this._overlayRef.dispose(),this._overlayRef=this._componentRef=null)}_getDialogStrategy(){return this._overlay.position().global().centerHorizontally().centerVertically()}_getDropdownStrategy(){let e=this._overlay.position().flexibleConnectedTo(this.datepickerInput.getConnectedOverlayOrigin()).withTransformOriginOn(".mat-datepicker-content").withFlexibleDimensions(!1).withViewportMargin(8).withLockedPosition();return this._setConnectedPositions(e)}_setConnectedPositions(e){let n=this.xPosition==="end"?"end":"start",r=n==="start"?"end":"start",s=this.yPosition==="above"?"bottom":"top",o=s==="top"?"bottom":"top";return e.withPositions([{originX:n,originY:o,overlayX:n,overlayY:s},{originX:n,originY:s,overlayX:n,overlayY:o},{originX:r,originY:o,overlayX:r,overlayY:s},{originX:r,originY:s,overlayX:r,overlayY:o}])}_getCloseStream(e){let n=["ctrlKey","shiftKey","metaKey"];return _i(e.backdropClick(),e.detachments(),e.keydownEvents().pipe(Ot(r=>r.keyCode===27&&!Di(r)||this.datepickerInput&&Di(r,"altKey")&&r.keyCode===38&&n.every(s=>!Di(r,s)))))}static{this.\u0275fac=function(n){return new(n||i)(x(Qi),x(_e),x(Un),x(UY),x(En,8),x(Mi,8),x(Lb))}}static{this.\u0275dir=J({type:i,inputs:{calendarHeaderComponent:"calendarHeaderComponent",startAt:"startAt",startView:"startView",color:"color",touchUi:[H.HasDecoratorInputTransform,"touchUi","touchUi",be],disabled:[H.HasDecoratorInputTransform,"disabled","disabled",be],xPosition:"xPosition",yPosition:"yPosition",restoreFocus:[H.HasDecoratorInputTransform,"restoreFocus","restoreFocus",be],dateClass:"dateClass",panelClass:"panelClass",opened:[H.HasDecoratorInputTransform,"opened","opened",be]},outputs:{yearSelected:"yearSelected",monthSelected:"monthSelected",viewChanged:"viewChanged",openedStream:"opened",closedStream:"closed"},features:[Ge,ht]})}}return i})(),qY=(()=>{class i extends NY{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275cmp=ae({type:i,selectors:[["mat-datepicker"]],exportAs:["matDatepicker"],standalone:!0,features:[je([LY,{provide:NY,useExisting:i}]),Ve,Re],decls:0,vars:0,template:function(n,r){},encapsulation:2,changeDetection:0})}}return i})(),Hf=class{constructor(t,e){this.target=t,this.targetElement=e,this.value=this.target.value}},xMe=(()=>{class i{get value(){return this._model?this._getValueFromModel(this._model.selection):this._pendingValue}set value(e){this._assignValueProgrammatically(e)}get disabled(){return!!this._disabled||this._parentDisabled()}set disabled(e){let n=e,r=this._elementRef.nativeElement;this._disabled!==n&&(this._disabled=n,this.stateChanges.next(void 0)),n&&this._isInitialized&&r.blur&&r.blur()}_getValidators(){return[this._parseValidator,this._minValidator,this._maxValidator,this._filterValidator]}_registerModel(e){this._model=e,this._valueChangesSubscription.unsubscribe(),this._pendingValue&&this._assignValue(this._pendingValue),this._valueChangesSubscription=this._model.selectionChanged.subscribe(n=>{if(this._shouldHandleChangeEvent(n)){let r=this._getValueFromModel(n.selection);this._lastValueValid=this._isValidValue(r),this._cvaOnChange(r),this._onTouched(),this._formatValue(r),this.dateInput.emit(new Hf(this,this._elementRef.nativeElement)),this.dateChange.emit(new Hf(this,this._elementRef.nativeElement))}})}constructor(e,n,r){this._elementRef=e,this._dateAdapter=n,this._dateFormats=r,this.dateChange=new ue,this.dateInput=new ue,this.stateChanges=new ke,this._onTouched=()=>{},this._validatorOnChange=()=>{},this._cvaOnChange=()=>{},this._valueChangesSubscription=At.EMPTY,this._localeSubscription=At.EMPTY,this._parseValidator=()=>this._lastValueValid?null:{matDatepickerParse:{text:this._elementRef.nativeElement.value}},this._filterValidator=s=>{let o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value));return!o||this._matchesFilter(o)?null:{matDatepickerFilter:!0}},this._minValidator=s=>{let o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),a=this._getMinDate();return!a||!o||this._dateAdapter.compareDate(a,o)<=0?null:{matDatepickerMin:{min:a,actual:o}}},this._maxValidator=s=>{let o=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(s.value)),a=this._getMaxDate();return!a||!o||this._dateAdapter.compareDate(a,o)>=0?null:{matDatepickerMax:{max:a,actual:o}}},this._lastValueValid=!1,this._localeSubscription=n.localeChanges.subscribe(()=>{this._assignValueProgrammatically(this.value)})}ngAfterViewInit(){this._isInitialized=!0}ngOnChanges(e){wMe(e,this._dateAdapter)&&this.stateChanges.next(void 0)}ngOnDestroy(){this._valueChangesSubscription.unsubscribe(),this._localeSubscription.unsubscribe(),this.stateChanges.complete()}registerOnValidatorChange(e){this._validatorOnChange=e}validate(e){return this._validator?this._validator(e):null}writeValue(e){this._assignValueProgrammatically(e)}registerOnChange(e){this._cvaOnChange=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}_onKeydown(e){let n=["ctrlKey","shiftKey","metaKey"];Di(e,"altKey")&&e.keyCode===40&&n.every(s=>!Di(e,s))&&!this._elementRef.nativeElement.readOnly&&(this._openPopup(),e.preventDefault())}_onInput(e){let n=this._lastValueValid,r=this._dateAdapter.parse(e,this._dateFormats.parse.dateInput);this._lastValueValid=this._isValidValue(r),r=this._dateAdapter.getValidDateOrNull(r);let s=!this._dateAdapter.sameDate(r,this.value);!r||s?this._cvaOnChange(r):(e&&!this.value&&this._cvaOnChange(r),n!==this._lastValueValid&&this._validatorOnChange()),s&&(this._assignValue(r),this.dateInput.emit(new Hf(this,this._elementRef.nativeElement)))}_onChange(){this.dateChange.emit(new Hf(this,this._elementRef.nativeElement))}_onBlur(){this.value&&this._formatValue(this.value),this._onTouched()}_formatValue(e){this._elementRef.nativeElement.value=e!=null?this._dateAdapter.format(e,this._dateFormats.display.dateInput):""}_assignValue(e){this._model?(this._assignValueToModel(e),this._pendingValue=null):this._pendingValue=e}_isValidValue(e){return!e||this._dateAdapter.isValid(e)}_parentDisabled(){return!1}_assignValueProgrammatically(e){e=this._dateAdapter.deserialize(e),this._lastValueValid=this._isValidValue(e),e=this._dateAdapter.getValidDateOrNull(e),this._assignValue(e),this._formatValue(e)}_matchesFilter(e){let n=this._getDateFilter();return!n||n(e)}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(En,8),x(cc,8))}}static{this.\u0275dir=J({type:i,inputs:{value:"value",disabled:[H.HasDecoratorInputTransform,"disabled","disabled",be]},outputs:{dateChange:"dateChange",dateInput:"dateInput"},standalone:!0,features:[Ge,ht]})}}return i})();function wMe(i,t){let e=Object.keys(i);for(let n of e){let{previousValue:r,currentValue:s}=i[n];if(t.isDateInstance(r)&&t.isDateInstance(s)){if(!t.sameDate(r,s))return!0}else return!0}return!1}var CMe={provide:mr,useExisting:Ri(()=>Y1),multi:!0},SMe={provide:qs,useExisting:Ri(()=>Y1),multi:!0},Y1=(()=>{class i extends xMe{set matDatepicker(e){e&&(this._datepicker=e,this._closedSubscription=e.closedStream.subscribe(()=>this._onTouched()),this._registerModel(e.registerInput(this)))}get min(){return this._min}set min(e){let n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(n,this._min)||(this._min=n,this._validatorOnChange())}get max(){return this._max}set max(e){let n=this._dateAdapter.getValidDateOrNull(this._dateAdapter.deserialize(e));this._dateAdapter.sameDate(n,this._max)||(this._max=n,this._validatorOnChange())}get dateFilter(){return this._dateFilter}set dateFilter(e){let n=this._matchesFilter(this.value);this._dateFilter=e,this._matchesFilter(this.value)!==n&&this._validatorOnChange()}constructor(e,n,r,s){super(e,n,r),this._formField=s,this._closedSubscription=At.EMPTY,this._validator=Jt.compose(super._getValidators())}getConnectedOverlayOrigin(){return this._formField?this._formField.getConnectedOverlayOrigin():this._elementRef}getOverlayLabelId(){return this._formField?this._formField.getLabelId():this._elementRef.nativeElement.getAttribute("aria-labelledby")}getThemePalette(){return this._formField?this._formField.color:void 0}getStartValue(){return this.value}ngOnDestroy(){super.ngOnDestroy(),this._closedSubscription.unsubscribe()}_openPopup(){this._datepicker&&this._datepicker.open()}_getValueFromModel(e){return e}_assignValueToModel(e){this._model&&this._model.updateSelection(e,this)}_getMinDate(){return this._min}_getMaxDate(){return this._max}_getDateFilter(){return this._dateFilter}_shouldHandleChangeEvent(e){return e.source!==this}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(En,8),x(cc,8),x(du,8))}}static{this.\u0275dir=J({type:i,selectors:[["input","matDatepicker",""]],hostAttrs:[1,"mat-datepicker-input"],hostVars:6,hostBindings:function(n,r){n&1&&$("input",function(o){return r._onInput(o.target.value)})("change",function(){return r._onChange()})("blur",function(){return r._onBlur()})("keydown",function(o){return r._onKeydown(o)}),n&2&&(nr("disabled",r.disabled),Se("aria-haspopup",r._datepicker?"dialog":null)("aria-owns",(r._datepicker==null?null:r._datepicker.opened)&&r._datepicker.id||null)("min",r.min?r._dateAdapter.toIso8601(r.min):null)("max",r.max?r._dateAdapter.toIso8601(r.max):null)("data-mat-calendar",r._datepicker?r._datepicker.id:null))},inputs:{matDatepicker:"matDatepicker",min:"min",max:"max",dateFilter:[H.None,"matDatepickerFilter","dateFilter"]},exportAs:["matDatepickerInput"],standalone:!0,features:[je([CMe,SMe,{provide:u2,useExisting:i}]),Ve]})}}return i})(),kMe=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["","matDatepickerToggleIcon",""]],standalone:!0})}}return i})(),hN=(()=>{class i{get disabled(){return this._disabled===void 0&&this.datepicker?this.datepicker.disabled:!!this._disabled}set disabled(e){this._disabled=e}constructor(e,n,r){this._intl=e,this._changeDetectorRef=n,this._stateChanges=At.EMPTY;let s=Number(r);this.tabIndex=s||s===0?s:null}ngOnChanges(e){e.datepicker&&this._watchStateChanges()}ngOnDestroy(){this._stateChanges.unsubscribe()}ngAfterContentInit(){this._watchStateChanges()}_open(e){this.datepicker&&!this.disabled&&(this.datepicker.open(),e.stopPropagation())}_watchStateChanges(){let e=this.datepicker?this.datepicker.stateChanges:We(),n=this.datepicker&&this.datepicker.datepickerInput?this.datepicker.datepickerInput.stateChanges:We(),r=this.datepicker?_i(this.datepicker.openedStream,this.datepicker.closedStream):We();this._stateChanges.unsubscribe(),this._stateChanges=_i(this._intl.changes,e,n,r).subscribe(()=>this._changeDetectorRef.markForCheck())}static{this.\u0275fac=function(n){return new(n||i)(x(Bb),x(mt),yn("tabindex"))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-datepicker-toggle"]],contentQueries:function(n,r,s){if(n&1&&gt(s,kMe,5),n&2){let o;ye(o=xe())&&(r._customIcon=o.first)}},viewQuery:function(n,r){if(n&1&&$e(cMe,5),n&2){let s;ye(s=xe())&&(r._button=s.first)}},hostAttrs:[1,"mat-datepicker-toggle"],hostVars:8,hostBindings:function(n,r){n&1&&$("click",function(o){return r._open(o)}),n&2&&(Se("tabindex",null)("data-mat-calendar",r.datepicker?r.datepicker.id:null),le("mat-datepicker-toggle-active",r.datepicker&&r.datepicker.opened)("mat-accent",r.datepicker&&r.datepicker.color==="accent")("mat-warn",r.datepicker&&r.datepicker.color==="warn"))},inputs:{datepicker:[H.None,"for","datepicker"],tabIndex:"tabIndex",ariaLabel:[H.None,"aria-label","ariaLabel"],disabled:[H.HasDecoratorInputTransform,"disabled","disabled",be],disableRipple:"disableRipple"},exportAs:["matDatepickerToggle"],standalone:!0,features:[Ge,ht,Re],ngContentSelectors:uMe,decls:4,vars:6,consts:[["button",""],["mat-icon-button","","type","button",3,"disabled","disableRipple"],["viewBox","0 0 24 24","width","24px","height","24px","fill","currentColor","focusable","false","aria-hidden","true",1,"mat-datepicker-toggle-default-icon"],["d","M19 3h-1V1h-2v2H8V1H6v2H5c-1.11 0-1.99.9-1.99 2L3 19c0 1.1.89 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm0 16H5V8h14v11zM7 10h5v5H7z"]],template:function(n,r){n&1&&(nt(dMe),f(0,"button",1,0),Y(2,hMe,2,0,":svg:svg",2),Ee(3),p()),n&2&&(z("disabled",r.disabled)("disableRipple",r.disableRipple),Se("aria-haspopup",r.datepicker?"dialog":null)("aria-label",r.ariaLabel||r._intl.openCalendarLabel)("tabindex",r.disabled?-1:r.tabIndex),g(2),et(2,r._customIcon?-1:2))},dependencies:[Hr],styles:[".mat-datepicker-toggle{pointer-events:auto;color:var(--mat-datepicker-toggle-icon-color)}.mat-datepicker-toggle-active{color:var(--mat-datepicker-toggle-active-state-icon-color)}.cdk-high-contrast-active .mat-datepicker-toggle-default-icon{color:CanvasText}"],encapsulation:2,changeDetection:0})}}return i})();var Q1=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({providers:[Bb,yMe],imports:[$r,Zm,hc,vC,Gs,ze,HY,hN,jY,$m]})}}return i})();function TMe(i,t){if(i&1){let e=Me();f(0,"button",15),$("click",function(){ne(e);let r=W();return re(r.enableEdit())}),y(1),O(2,"translate"),p()}i&2&&(g(),Q(" ",P(2,1,"SETTINGS.PROFILE.EDIT")," "))}function IMe(i,t){if(i&1){let e=Me();f(0,"div")(1,"button",16),$("click",function(){ne(e);let r=W();return re(r.saveUserData())}),y(2),O(3,"translate"),p(),f(4,"button",17),$("click",function(){ne(e);let r=W();return re(r.cancelEdit())}),y(5),O(6,"translate"),p()()}i&2&&(g(2),Q(" ",P(3,2,"SETTINGS.PROFILE.SAVE")," "),g(3),Q(" ",P(6,4,"SETTINGS.PROFILE.CANCEL")," "))}function DMe(i,t){if(i&1){let e=Me();f(0,"mat-form-field",18)(1,"mat-label"),y(2),O(3,"translate"),p(),f(4,"input",19),Bt("ngModelChange",function(r){ne(e);let s=W();return Lt(s.userData.fullName,r)||(s.userData.fullName=r),re(r)}),p()()}if(i&2){let e=W();g(2),B(P(3,2,"SETTINGS.PROFILE.FULL_NAME")),g(2),Nt("ngModel",e.userData.fullName)}}function MMe(i,t){if(i&1&&(f(0,"p")(1,"strong"),y(2),O(3,"translate"),p(),y(4),p()),i&2){let e=W();g(2),Q("",P(3,2,"SETTINGS.PROFILE.FULL_NAME"),":"),g(2),Q(" ",e.userData.fullName||"-"," ")}}function AMe(i,t){if(i&1){let e=Me();f(0,"mat-form-field",18)(1,"mat-label"),y(2),O(3,"translate"),p(),f(4,"input",20),Bt("ngModelChange",function(r){ne(e);let s=W();return Lt(s.userData.birthDate,r)||(s.userData.birthDate=r),re(r)}),p(),j(5,"mat-datepicker-toggle",21)(6,"mat-datepicker",null,0),p()}if(i&2){let e=yi(7),n=W();g(2),B(P(3,4,"SETTINGS.PROFILE.BIRTH_DATE")),g(2),z("matDatepicker",e),Nt("ngModel",n.userData.birthDate),g(),z("for",e)}}function OMe(i,t){if(i&1&&(f(0,"p")(1,"strong"),y(2),O(3,"translate"),p(),y(4),O(5,"date"),p()),i&2){let e=W();g(2),Q("",P(3,2,"SETTINGS.PROFILE.BIRTH_DATE"),":"),g(2),Q(" ",Mn(5,4,e.userData.birthDate,"mediumDate")," ")}}function PMe(i,t){if(i&1){let e=Me();f(0,"mat-form-field",18)(1,"mat-label"),y(2),O(3,"translate"),p(),f(4,"textarea",22),Bt("ngModelChange",function(r){ne(e);let s=W();return Lt(s.userData.bio,r)||(s.userData.bio=r),re(r)}),p()()}if(i&2){let e=W();g(2),B(P(3,2,"SETTINGS.PROFILE.BIO")),g(2),Nt("ngModel",e.userData.bio)}}function RMe(i,t){if(i&1&&(f(0,"p")(1,"strong"),y(2),O(3,"translate"),p(),y(4),p()),i&2){let e=W();g(2),Q("",P(3,2,"SETTINGS.PROFILE.BIO"),":"),g(2),Q(" ",e.userData.bio||"-"," ")}}function FMe(i,t){if(i&1){let e=Me();f(0,"button",17),$("click",function(){ne(e);let r=W();return re(r.openPasswordChangeForm())}),y(1),O(2,"translate"),p()}i&2&&(g(),Q(" ",P(2,1,"SETTINGS.PASSWORD.CHANGE")," "))}function NMe(i,t){if(i&1&&(f(0,"p",30),y(1),p()),i&2){let e=W(2);g(),Q(" ",e.passwordChangeMessage," ")}}function LMe(i,t){if(i&1){let e=Me();f(0,"div",8)(1,"form",23),$("ngSubmit",function(){ne(e);let r=W();return re(r.changePassword())}),f(2,"mat-form-field",18)(3,"mat-label"),y(4),O(5,"translate"),p(),f(6,"input",24),Bt("ngModelChange",function(r){ne(e);let s=W();return Lt(s.oldPassword,r)||(s.oldPassword=r),re(r)}),p()(),f(7,"mat-form-field",18)(8,"mat-label"),y(9),O(10,"translate"),p(),f(11,"input",25),Bt("ngModelChange",function(r){ne(e);let s=W();return Lt(s.newPassword,r)||(s.newPassword=r),re(r)}),p()(),f(12,"mat-form-field",18)(13,"mat-label"),y(14),O(15,"translate"),p(),f(16,"input",26),Bt("ngModelChange",function(r){ne(e);let s=W();return Lt(s.confirmPassword,r)||(s.confirmPassword=r),re(r)}),p()(),f(17,"button",27),y(18),O(19,"translate"),p(),f(20,"button",28),$("click",function(){ne(e);let r=W();return re(r.cancelPasswordChange())}),y(21),O(22,"translate"),p(),Y(23,NMe,2,1,"p",29),p()()}if(i&2){let e=W();g(4),B(P(5,9,"SETTINGS.PASSWORD.OLD")),g(2),Nt("ngModel",e.oldPassword),g(3),B(P(10,11,"SETTINGS.PASSWORD.NEW")),g(2),Nt("ngModel",e.newPassword),g(3),B(P(15,13,"SETTINGS.PASSWORD.CONFIRM")),g(2),Nt("ngModel",e.confirmPassword),g(2),Q(" ",P(19,15,"SETTINGS.PASSWORD.SAVE")," "),g(3),Q(" ",P(22,17,"SETTINGS.PASSWORD.CANCEL")," "),g(2),z("ngIf",e.passwordChangeMessage)}}var WY=(()=>{class i{constructor(e,n,r,s){this.afAuth=e,this.afs=n,this.router=r,this.dialog=s,this.user=null,this.userData={fullName:"",birthDate:"",bio:"",photoURL:""},this.isEditMode=!1,this.originalUserData={},this.showPasswordForm=!1,this.oldPassword="",this.newPassword="",this.confirmPassword="",this.passwordChangeMessage=""}ngOnInit(){this.afAuth.authState.subscribe(e=>{this.user=e,e?.uid&&this.loadUserData(e.uid)})}loadUserData(e){this.afs.collection("users").doc(e).valueChanges().subscribe(n=>{n&&(this.userData=ve({},n),this.originalUserData=ve({},n),n.birthDate?.toDate&&(this.userData.birthDate=n.birthDate.toDate(),this.originalUserData.birthDate=this.userData.birthDate),this.isEditMode=!1)})}enableEdit(){this.isEditMode=!0}cancelEdit(){this.userData=ve({},this.originalUserData),this.isEditMode=!1}confirmDialog(e){return N(this,null,function*(){return yield this.dialog.open($s,{width:"320px",data:{message:e}}).afterClosed().toPromise()})}saveUserData(){return N(this,null,function*(){if(this.user?.uid)try{yield this.afs.collection("users").doc(this.user.uid).update({fullName:this.userData.fullName||"",birthDate:this.userData.birthDate||"",bio:this.userData.bio||"",photoURL:this.userData.photoURL||""}),yield this.confirmDialog("Profile updated successfully."),this.originalUserData=ve({},this.userData),this.isEditMode=!1}catch(e){yield this.confirmDialog("Error saving profile: "+e.message)}})}openPasswordChangeForm(){this.showPasswordForm=!0}cancelPasswordChange(){this.showPasswordForm=!1,this.oldPassword="",this.newPassword="",this.confirmPassword="",this.passwordChangeMessage=""}changePassword(){return N(this,null,function*(){if(this.newPassword!==this.confirmPassword){this.passwordChangeMessage="Passwords do not match!";return}if(this.newPassword.length<8){this.passwordChangeMessage="Password must be at least 8 characters.";return}let e=yield this.afAuth.currentUser;if(!e||!e.email){this.passwordChangeMessage="User not authenticated";return}let n=Ei.auth.EmailAuthProvider.credential(e.email,this.oldPassword);try{yield e.reauthenticateWithCredential(n),yield e.updatePassword(this.newPassword),this.passwordChangeMessage="Password changed successfully!",setTimeout(()=>this.cancelPasswordChange(),2e3)}catch(r){this.passwordChangeMessage=`Error: ${r.message}`}})}deleteAccount(){return N(this,null,function*(){if(!(yield this.confirmDialog("Are you sure you want to delete your account? This action is irreversible.")))return;let n=this.user?.uid;if(!n)return;let r=yield this.afAuth.currentUser;try{yield this.afs.collection("users").doc(n).delete(),yield r?.delete(),yield this.confirmDialog("Account deleted successfully."),this.router.navigate(["/login"])}catch(s){yield this.confirmDialog(`Error: ${s.message}`)}})}logout(){this.afAuth.signOut().then(()=>{this.router.navigate(["/login"])})}static{this.\u0275fac=function(n){return new(n||i)(x(Yt),x(tn),x(on),x(_s))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-settings"]],decls:45,vars:31,consts:[["picker",""],[1,"settings-page"],[1,"settings-header"],[1,"settings-section"],[1,"card"],[1,"card-header"],["mat-stroked-button","","color","primary",3,"click",4,"ngIf"],[4,"ngIf"],[1,"card-content"],["class","full-width",4,"ngIf"],["mat-stroked-button","","color","primary","mat-button","",3,"click",4,"ngIf"],["class","card-content",4,"ngIf"],[1,"card","danger"],["mat-flat-button","","color","warn",3,"click"],[1,"logout-button"],["mat-stroked-button","","color","primary",3,"click"],["mat-flat-button","","color","primary",3,"click"],["mat-stroked-button","","color","primary","mat-button","",3,"click"],[1,"full-width"],["matInput","","name","fullName",3,"ngModelChange","ngModel"],["matInput","","name","birthDate",3,"ngModelChange","matDatepicker","ngModel"],["matSuffix","",3,"for"],["matInput","","rows","3","name","bio",3,"ngModelChange","ngModel"],[3,"ngSubmit"],["matInput","","type","password","name","oldPassword",3,"ngModelChange","ngModel"],["matInput","","type","password","name","newPassword",3,"ngModelChange","ngModel"],["matInput","","type","password","name","confirmPassword",3,"ngModelChange","ngModel"],["mat-flat-button","","color","primary","type","submit"],["mat-button","","type","button",3,"click"],["class","success-message",4,"ngIf"],[1,"success-message"]],template:function(n,r){n&1&&(j(0,"app-navigation"),f(1,"section",1)(2,"div",2)(3,"h2"),y(4),O(5,"translate"),p(),f(6,"p"),y(7),O(8,"translate"),p()(),f(9,"div",3)(10,"div",4)(11,"div",5)(12,"h3"),y(13),O(14,"translate"),p(),Y(15,TMe,3,3,"button",6)(16,IMe,7,6,"div",7),p(),f(17,"div",8),Y(18,DMe,5,4,"mat-form-field",9)(19,MMe,5,4,"p",7)(20,AMe,8,6,"mat-form-field",9)(21,OMe,6,7,"p",7)(22,PMe,5,4,"mat-form-field",9)(23,RMe,5,4,"p",7),p()(),f(24,"div",4)(25,"div",5)(26,"h3"),y(27),O(28,"translate"),p(),Y(29,FMe,3,3,"button",10),p(),Y(30,LMe,24,19,"div",11),p(),f(31,"div",12)(32,"div",5)(33,"h3"),y(34),O(35,"translate"),p()(),f(36,"div",8)(37,"button",13),$("click",function(){return r.deleteAccount()}),y(38),O(39,"translate"),p()()(),f(40,"div",14)(41,"button",15),$("click",function(){return r.logout()}),y(42),O(43,"translate"),p()()()(),j(44,"app-footer")),n&2&&(g(4),B(P(5,17,"SETTINGS.TITLE")),g(3),B(P(8,19,"SETTINGS.DESCRIPTION")),g(6),B(P(14,21,"SETTINGS.PROFILE.TITLE")),g(2),z("ngIf",!r.isEditMode),g(),z("ngIf",r.isEditMode),g(2),z("ngIf",r.isEditMode),g(),z("ngIf",!r.isEditMode),g(),z("ngIf",r.isEditMode),g(),z("ngIf",!r.isEditMode),g(),z("ngIf",r.isEditMode),g(),z("ngIf",!r.isEditMode),g(4),B(P(28,23,"SETTINGS.PASSWORD.TITLE")),g(2),z("ngIf",!r.showPasswordForm),g(),z("ngIf",r.showPasswordForm),g(4),B(P(35,25,"SETTINGS.DANGER_ZONE.TITLE")),g(4),Q(" ",P(39,27,"SETTINGS.DANGER_ZONE.DELETE_ACCOUNT")," "),g(4),Q(" ",P(43,29,"SETTINGS.LOGOUT")," "))},dependencies:[Rt,rc,ms,fr,nc,tr,wa,ir,_c,pc,jo,fc,qY,Y1,hN,gn,_n,Ai,n0],styles:[".settings-page[_ngcontent-%COMP%]{padding:2rem 1.5rem;max-width:900px;margin:auto}.settings-page[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]{text-align:center;margin-bottom:2.5rem}.settings-page[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:2.2rem;font-weight:600;margin-bottom:.5rem}.settings-page[_ngcontent-%COMP%]   .settings-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#666;font-size:1rem}.settings-page[_ngcontent-%COMP%]   .settings-section[_ngcontent-%COMP%]{display:flex;flex-direction:column;gap:2rem}.settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]{background:#fff;border-radius:1.2rem;box-shadow:0 4px 12px #00000014;padding:1.5rem 2rem;transition:box-shadow .3s ease}.settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]:hover{box-shadow:0 6px 18px #0000001f}.settings-page[_ngcontent-%COMP%]   .card.danger[_ngcontent-%COMP%]{border:1px solid #f44336;background:#fff5f5}.settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:1.2rem}.settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.3rem;font-weight:600}.settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:1rem;margin-bottom:.7rem}.settings-page[_ngcontent-%COMP%]   .card[_ngcontent-%COMP%]   .card-content[_ngcontent-%COMP%]   .full-width[_ngcontent-%COMP%]{width:100%}.settings-page[_ngcontent-%COMP%]   mat-form-field[_ngcontent-%COMP%]{width:100%;margin-bottom:1rem}.settings-page[_ngcontent-%COMP%]   .success-message[_ngcontent-%COMP%]{color:#4caf50;margin-top:.5rem;font-weight:500}.settings-page[_ngcontent-%COMP%]   .logout-button[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-top:2rem}@media (max-width: 768px){.settings-page[_ngcontent-%COMP%]{padding:1.5rem 1rem}.card[_ngcontent-%COMP%]{padding:1.2rem}.settings-header[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{font-size:1.8rem}.settings-header[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{font-size:.95rem}.card-header[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{font-size:1.1rem}}"]})}}return i})();var BMe=["input"],VMe=["label"],zMe=["*"],jMe=new te("mat-checkbox-default-options",{providedIn:"root",factory:$Y});function $Y(){return{color:"accent",clickAction:"check-indeterminate"}}var zn=function(i){return i[i.Init=0]="Init",i[i.Checked=1]="Checked",i[i.Unchecked=2]="Unchecked",i[i.Indeterminate=3]="Indeterminate",i}(zn||{}),UMe={provide:mr,useExisting:Ri(()=>Wf),multi:!0},mN=class{},HMe=0,GY=$Y(),Wf=(()=>{class i{focus(){this._inputElement.nativeElement.focus()}_createChangeEvent(e){let n=new mN;return n.source=this,n.checked=e,n}_getAnimationTargetElement(){return this._inputElement?.nativeElement}get inputId(){return`${this.id||this._uniqueId}-input`}constructor(e,n,r,s,o,a){this._elementRef=e,this._changeDetectorRef=n,this._ngZone=r,this._animationMode=o,this._options=a,this._animationClasses={uncheckedToChecked:"mdc-checkbox--anim-unchecked-checked",uncheckedToIndeterminate:"mdc-checkbox--anim-unchecked-indeterminate",checkedToUnchecked:"mdc-checkbox--anim-checked-unchecked",checkedToIndeterminate:"mdc-checkbox--anim-checked-indeterminate",indeterminateToChecked:"mdc-checkbox--anim-indeterminate-checked",indeterminateToUnchecked:"mdc-checkbox--anim-indeterminate-unchecked"},this.ariaLabel="",this.ariaLabelledby=null,this.labelPosition="after",this.name=null,this.change=new ue,this.indeterminateChange=new ue,this._onTouched=()=>{},this._currentAnimationClass="",this._currentCheckState=zn.Init,this._controlValueAccessorChangeFn=()=>{},this._validatorChangeFn=()=>{},this._checked=!1,this._disabled=!1,this._indeterminate=!1,this._options=this._options||GY,this.color=this._options.color||GY.color,this.tabIndex=parseInt(s)||0,this.id=this._uniqueId=`mat-mdc-checkbox-${++HMe}`}ngOnChanges(e){e.required&&this._validatorChangeFn()}ngAfterViewInit(){this._syncIndeterminate(this._indeterminate)}get checked(){return this._checked}set checked(e){e!=this.checked&&(this._checked=e,this._changeDetectorRef.markForCheck())}get disabled(){return this._disabled}set disabled(e){e!==this.disabled&&(this._disabled=e,this._changeDetectorRef.markForCheck())}get indeterminate(){return this._indeterminate}set indeterminate(e){let n=e!=this._indeterminate;this._indeterminate=e,n&&(this._indeterminate?this._transitionCheckState(zn.Indeterminate):this._transitionCheckState(this.checked?zn.Checked:zn.Unchecked),this.indeterminateChange.emit(this._indeterminate)),this._syncIndeterminate(this._indeterminate)}_isRippleDisabled(){return this.disableRipple||this.disabled}_onLabelTextChange(){this._changeDetectorRef.detectChanges()}writeValue(e){this.checked=!!e}registerOnChange(e){this._controlValueAccessorChangeFn=e}registerOnTouched(e){this._onTouched=e}setDisabledState(e){this.disabled=e}validate(e){return this.required&&e.value!==!0?{required:!0}:null}registerOnValidatorChange(e){this._validatorChangeFn=e}_transitionCheckState(e){let n=this._currentCheckState,r=this._getAnimationTargetElement();if(!(n===e||!r)&&(this._currentAnimationClass&&r.classList.remove(this._currentAnimationClass),this._currentAnimationClass=this._getAnimationClassForCheckStateTransition(n,e),this._currentCheckState=e,this._currentAnimationClass.length>0)){r.classList.add(this._currentAnimationClass);let s=this._currentAnimationClass;this._ngZone.runOutsideAngular(()=>{setTimeout(()=>{r.classList.remove(s)},1e3)})}}_emitChangeEvent(){this._controlValueAccessorChangeFn(this.checked),this.change.emit(this._createChangeEvent(this.checked)),this._inputElement&&(this._inputElement.nativeElement.checked=this.checked)}toggle(){this.checked=!this.checked,this._controlValueAccessorChangeFn(this.checked)}_handleInputClick(){let e=this._options?.clickAction;!this.disabled&&e!=="noop"?(this.indeterminate&&e!=="check"&&Promise.resolve().then(()=>{this._indeterminate=!1,this.indeterminateChange.emit(this._indeterminate)}),this._checked=!this._checked,this._transitionCheckState(this._checked?zn.Checked:zn.Unchecked),this._emitChangeEvent()):!this.disabled&&e==="noop"&&(this._inputElement.nativeElement.checked=this.checked,this._inputElement.nativeElement.indeterminate=this.indeterminate)}_onInteractionEvent(e){e.stopPropagation()}_onBlur(){Promise.resolve().then(()=>{this._onTouched(),this._changeDetectorRef.markForCheck()})}_getAnimationClassForCheckStateTransition(e,n){if(this._animationMode==="NoopAnimations")return"";switch(e){case zn.Init:if(n===zn.Checked)return this._animationClasses.uncheckedToChecked;if(n==zn.Indeterminate)return this._checked?this._animationClasses.checkedToIndeterminate:this._animationClasses.uncheckedToIndeterminate;break;case zn.Unchecked:return n===zn.Checked?this._animationClasses.uncheckedToChecked:this._animationClasses.uncheckedToIndeterminate;case zn.Checked:return n===zn.Unchecked?this._animationClasses.checkedToUnchecked:this._animationClasses.checkedToIndeterminate;case zn.Indeterminate:return n===zn.Checked?this._animationClasses.indeterminateToChecked:this._animationClasses.indeterminateToUnchecked}return""}_syncIndeterminate(e){let n=this._inputElement;n&&(n.nativeElement.indeterminate=e)}_onInputClick(){this._handleInputClick()}_onTouchTargetClick(){this._handleInputClick(),this.disabled||this._inputElement.nativeElement.focus()}_preventBubblingFromLabel(e){e.target&&this._labelElement.nativeElement.contains(e.target)&&e.stopPropagation()}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(mt),x(_e),yn("tabindex"),x(Ut,8),x(jMe,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-checkbox"]],viewQuery:function(n,r){if(n&1&&($e(BMe,5),$e(VMe,5),$e(Sa,5)),n&2){let s;ye(s=xe())&&(r._inputElement=s.first),ye(s=xe())&&(r._labelElement=s.first),ye(s=xe())&&(r.ripple=s.first)}},hostAttrs:[1,"mat-mdc-checkbox"],hostVars:14,hostBindings:function(n,r){n&2&&(nr("id",r.id),Se("tabindex",null)("aria-label",null)("aria-labelledby",null),Hn(r.color?"mat-"+r.color:"mat-accent"),le("_mat-animation-noopable",r._animationMode==="NoopAnimations")("mdc-checkbox--disabled",r.disabled)("mat-mdc-checkbox-disabled",r.disabled)("mat-mdc-checkbox-checked",r.checked))},inputs:{ariaLabel:[H.None,"aria-label","ariaLabel"],ariaLabelledby:[H.None,"aria-labelledby","ariaLabelledby"],ariaDescribedby:[H.None,"aria-describedby","ariaDescribedby"],id:"id",required:[H.HasDecoratorInputTransform,"required","required",be],labelPosition:"labelPosition",name:"name",value:"value",disableRipple:[H.HasDecoratorInputTransform,"disableRipple","disableRipple",be],tabIndex:[H.HasDecoratorInputTransform,"tabIndex","tabIndex",e=>e==null?void 0:sr(e)],color:"color",checked:[H.HasDecoratorInputTransform,"checked","checked",be],disabled:[H.HasDecoratorInputTransform,"disabled","disabled",be],indeterminate:[H.HasDecoratorInputTransform,"indeterminate","indeterminate",be]},outputs:{change:"change",indeterminateChange:"indeterminateChange"},exportAs:["matCheckbox"],standalone:!0,features:[je([UMe,{provide:qs,useExisting:i,multi:!0}]),Ge,ht,Re],ngContentSelectors:zMe,decls:15,vars:19,consts:[["checkbox",""],["input",""],["label",""],["mat-internal-form-field","",3,"click","labelPosition"],[1,"mdc-checkbox"],[1,"mat-mdc-checkbox-touch-target",3,"click"],["type","checkbox",1,"mdc-checkbox__native-control",3,"blur","click","change","checked","indeterminate","disabled","id","required","tabIndex"],[1,"mdc-checkbox__ripple"],[1,"mdc-checkbox__background"],["focusable","false","viewBox","0 0 24 24","aria-hidden","true",1,"mdc-checkbox__checkmark"],["fill","none","d","M1.73,12.91 8.1,19.28 22.79,4.59",1,"mdc-checkbox__checkmark-path"],[1,"mdc-checkbox__mixedmark"],["mat-ripple","",1,"mat-mdc-checkbox-ripple","mat-mdc-focus-indicator",3,"matRippleTrigger","matRippleDisabled","matRippleCentered"],[1,"mdc-label",3,"for"]],template:function(n,r){if(n&1){let s=Me();nt(),f(0,"div",3),$("click",function(a){return ne(s),re(r._preventBubblingFromLabel(a))}),f(1,"div",4,0)(3,"div",5),$("click",function(){return ne(s),re(r._onTouchTargetClick())}),p(),f(4,"input",6,1),$("blur",function(){return ne(s),re(r._onBlur())})("click",function(){return ne(s),re(r._onInputClick())})("change",function(a){return ne(s),re(r._onInteractionEvent(a))}),p(),j(6,"div",7),f(7,"div",8),bt(),f(8,"svg",9),j(9,"path",10),p(),li(),j(10,"div",11),p(),j(11,"div",12),p(),f(12,"label",13,2),Ee(14),p()()}if(n&2){let s=yi(2);z("labelPosition",r.labelPosition),g(4),le("mdc-checkbox--selected",r.checked),z("checked",r.checked)("indeterminate",r.indeterminate)("disabled",r.disabled)("id",r.inputId)("required",r.required)("tabIndex",r.disabled?-1:r.tabIndex),Se("aria-label",r.ariaLabel||null)("aria-labelledby",r.ariaLabelledby)("aria-describedby",r.ariaDescribedby)("aria-checked",r.indeterminate?"mixed":null)("name",r.name)("value",r.value),g(7),z("matRippleTrigger",s)("matRippleDisabled",r.disableRipple||r.disabled)("matRippleCentered",!0),g(),z("for",r.inputId)}},dependencies:[Sa,wC],styles:['.mdc-touch-target-wrapper{display:inline}@keyframes mdc-checkbox-unchecked-checked-checkmark-path{0%,50%{stroke-dashoffset:29.7833385}50%{animation-timing-function:cubic-bezier(0, 0, 0.2, 1)}100%{stroke-dashoffset:0}}@keyframes mdc-checkbox-unchecked-indeterminate-mixedmark{0%,68.2%{transform:scaleX(0)}68.2%{animation-timing-function:cubic-bezier(0, 0, 0, 1)}100%{transform:scaleX(1)}}@keyframes mdc-checkbox-checked-unchecked-checkmark-path{from{animation-timing-function:cubic-bezier(0.4, 0, 1, 1);opacity:1;stroke-dashoffset:0}to{opacity:0;stroke-dashoffset:-29.7833385}}@keyframes mdc-checkbox-checked-indeterminate-checkmark{from{animation-timing-function:cubic-bezier(0, 0, 0.2, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(45deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-checked-checkmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(45deg);opacity:0}to{transform:rotate(360deg);opacity:1}}@keyframes mdc-checkbox-checked-indeterminate-mixedmark{from{animation-timing-function:mdc-animation-deceleration-curve-timing-function;transform:rotate(-45deg);opacity:0}to{transform:rotate(0deg);opacity:1}}@keyframes mdc-checkbox-indeterminate-checked-mixedmark{from{animation-timing-function:cubic-bezier(0.14, 0, 0, 1);transform:rotate(0deg);opacity:1}to{transform:rotate(315deg);opacity:0}}@keyframes mdc-checkbox-indeterminate-unchecked-mixedmark{0%{animation-timing-function:linear;transform:scaleX(1);opacity:1}32.8%,100%{transform:scaleX(0);opacity:0}}.mdc-checkbox{display:inline-block;position:relative;flex:0 0 18px;box-sizing:content-box;width:18px;height:18px;line-height:0;white-space:nowrap;cursor:pointer;vertical-align:bottom}.mdc-checkbox[hidden]{display:none}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{pointer-events:none;border:2px solid rgba(0,0,0,0);border-radius:6px;box-sizing:content-box;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:100%;width:100%}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring{border-color:CanvasText}}.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{content:"";border:2px solid rgba(0,0,0,0);border-radius:8px;display:block;position:absolute;top:50%;left:50%;transform:translate(-50%, -50%);height:calc(100% + 4px);width:calc(100% + 4px)}@media screen and (forced-colors: active){.mdc-checkbox.mdc-ripple-upgraded--background-focused .mdc-checkbox__focus-ring::after,.mdc-checkbox:not(.mdc-ripple-upgraded):focus .mdc-checkbox__focus-ring::after{border-color:CanvasText}}@media all and (-ms-high-contrast: none){.mdc-checkbox .mdc-checkbox__focus-ring{display:none}}@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-checkbox__mixedmark{margin:0 1px}}.mdc-checkbox--disabled{cursor:default;pointer-events:none}.mdc-checkbox__background{display:inline-flex;position:absolute;align-items:center;justify-content:center;box-sizing:border-box;width:18px;height:18px;border:2px solid currentColor;border-radius:2px;background-color:rgba(0,0,0,0);pointer-events:none;will-change:background-color,border-color;transition:background-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),border-color 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__checkmark{position:absolute;top:0;right:0;bottom:0;left:0;width:100%;opacity:0;transition:opacity 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--upgraded .mdc-checkbox__checkmark{opacity:1}.mdc-checkbox__checkmark-path{transition:stroke-dashoffset 180ms 0ms cubic-bezier(0.4, 0, 0.6, 1);stroke:currentColor;stroke-width:3.12px;stroke-dashoffset:29.7833385;stroke-dasharray:29.7833385}.mdc-checkbox__mixedmark{width:100%;height:0;transform:scaleX(0) rotate(0deg);border-width:1px;border-style:solid;opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__background,.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__background,.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__background,.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__background{animation-duration:180ms;animation-timing-function:linear}.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-unchecked-checked-checkmark-path 180ms linear 0s;transition:none}.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-unchecked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__checkmark-path{animation:mdc-checkbox-checked-unchecked-checkmark-path 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__checkmark{animation:mdc-checkbox-checked-indeterminate-checkmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-checked-indeterminate .mdc-checkbox__mixedmark{animation:mdc-checkbox-checked-indeterminate-mixedmark 90ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__checkmark{animation:mdc-checkbox-indeterminate-checked-checkmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-checked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-checked-mixedmark 500ms linear 0s;transition:none}.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__mixedmark{animation:mdc-checkbox-indeterminate-unchecked-mixedmark 300ms linear 0s;transition:none}.mdc-checkbox__native-control:checked~.mdc-checkbox__background,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background{transition:border-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1),background-color 90ms 0ms cubic-bezier(0, 0, 0.2, 1)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark-path,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark-path{stroke-dashoffset:0}.mdc-checkbox__native-control{position:absolute;margin:0;padding:0;opacity:0;cursor:inherit}.mdc-checkbox__native-control:disabled{cursor:default;pointer-events:none}.mdc-checkbox--touch{margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox--touch .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__checkmark{transition:opacity 180ms 0ms cubic-bezier(0, 0, 0.2, 1),transform 180ms 0ms cubic-bezier(0, 0, 0.2, 1);opacity:1}.mdc-checkbox__native-control:checked~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(-45deg)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__checkmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__checkmark{transform:rotate(45deg);opacity:0;transition:opacity 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1),transform 90ms 0ms cubic-bezier(0.4, 0, 0.6, 1)}.mdc-checkbox__native-control:indeterminate~.mdc-checkbox__background .mdc-checkbox__mixedmark,.mdc-checkbox__native-control[data-indeterminate=true]~.mdc-checkbox__background .mdc-checkbox__mixedmark{transform:scaleX(1) rotate(0deg);opacity:1}.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__checkmark-path,.mdc-checkbox.mdc-checkbox--upgraded .mdc-checkbox__mixedmark{transition:none}.mdc-checkbox{padding:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);margin:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2)}.mdc-checkbox .mdc-checkbox__native-control[disabled]:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-disabled-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control[disabled]:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[disabled]:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true][disabled]~.mdc-checkbox__background{border-color:transparent;background-color:var(--mdc-checkbox-disabled-selected-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__checkmark{color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:disabled~.mdc-checkbox__background .mdc-checkbox__mixedmark{border-color:var(--mdc-checkbox-disabled-selected-checkmark-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}.mdc-checkbox .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-icon-color);background-color:var(--mdc-checkbox-selected-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-icon-color);background-color:transparent}}.mdc-checkbox.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:hover .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}@keyframes mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}}@keyframes mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-hover-icon-color);background-color:var(--mdc-checkbox-selected-hover-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-hover-icon-color);background-color:transparent}}.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:hover.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:hover.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-FF212121FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:not(:checked):not(:indeterminate):not([data-indeterminate=true])~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:checked~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control:enabled:indeterminate~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active .mdc-checkbox__native-control[data-indeterminate=true]:enabled~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}@keyframes mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336{0%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}50%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}}@keyframes mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336{0%,80%{border-color:var(--mdc-checkbox-selected-pressed-icon-color);background-color:var(--mdc-checkbox-selected-pressed-icon-color)}100%{border-color:var(--mdc-checkbox-unselected-pressed-icon-color);background-color:transparent}}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-checked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-unchecked-indeterminate .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-in-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-checked-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background,.mdc-checkbox:not(:disabled):active.mdc-checkbox--anim-indeterminate-unchecked .mdc-checkbox__native-control:enabled~.mdc-checkbox__background{animation-name:mdc-checkbox-fade-out-background-8A000000FFF4433600000000FFF44336}.mdc-checkbox .mdc-checkbox__background{top:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - 18px) / 2)}.mdc-checkbox .mdc-checkbox__native-control{top:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);right:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);left:calc((var(--mdc-checkbox-state-layer-size) - var(--mdc-checkbox-state-layer-size)) / 2);width:var(--mdc-checkbox-state-layer-size);height:var(--mdc-checkbox-state-layer-size)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:focus:not(:checked):not(:indeterminate)~.mdc-checkbox__background{border-color:var(--mdc-checkbox-unselected-focus-icon-color)}.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:checked~.mdc-checkbox__background,.mdc-checkbox .mdc-checkbox__native-control:enabled:focus:indeterminate~.mdc-checkbox__background{border-color:var(--mdc-checkbox-selected-focus-icon-color);background-color:var(--mdc-checkbox-selected-focus-icon-color)}.mdc-checkbox:hover .mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox:hover .mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-unselected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-unselected-pressed-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-hover-state-layer-opacity);background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox:hover .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-hover-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-focus-state-layer-opacity);background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox .mdc-checkbox__native-control:focus:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-focus-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mdc-checkbox__ripple{opacity:var(--mdc-checkbox-selected-pressed-state-layer-opacity);background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mdc-checkbox:active .mdc-checkbox__native-control:checked~.mat-mdc-checkbox-ripple .mat-ripple-element{background-color:var(--mdc-checkbox-selected-pressed-state-layer-color)}.mat-mdc-checkbox{display:inline-block;position:relative;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-checkbox .mdc-checkbox__background{-webkit-print-color-adjust:exact;color-adjust:exact}.mat-mdc-checkbox._mat-animation-noopable *,.mat-mdc-checkbox._mat-animation-noopable *::before{transition:none !important;animation:none !important}.mat-mdc-checkbox label{cursor:pointer}.mat-mdc-checkbox.mat-mdc-checkbox-disabled label{cursor:default;color:var(--mat-checkbox-disabled-label-color)}.mat-mdc-checkbox label:empty{display:none}.cdk-high-contrast-active .mat-mdc-checkbox.mat-mdc-checkbox-disabled{opacity:.5}.cdk-high-contrast-active .mat-mdc-checkbox .mdc-checkbox__checkmark{--mdc-checkbox-selected-checkmark-color: CanvasText;--mdc-checkbox-disabled-selected-checkmark-color: CanvasText}.mat-mdc-checkbox .mdc-checkbox__ripple{opacity:0}.mat-mdc-checkbox-ripple,.mdc-checkbox__ripple{top:0;left:0;right:0;bottom:0;position:absolute;border-radius:50%;pointer-events:none}.mat-mdc-checkbox-ripple:not(:empty),.mdc-checkbox__ripple:not(:empty){transform:translateZ(0)}.mat-mdc-checkbox-ripple .mat-ripple-element{opacity:.1}.mat-mdc-checkbox-touch-target{position:absolute;top:50%;height:48px;left:50%;width:48px;transform:translate(-50%, -50%);display:var(--mat-checkbox-touch-target-display)}.mat-mdc-checkbox-ripple::before{border-radius:50%}.mdc-checkbox__native-control:focus~.mat-mdc-focus-indicator::before{content:""}'],encapsulation:2,changeDetection:0})}}return i})();var KY=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[Wf,ze,ze]})}}return i})();function qMe(i,t){if(i&1){let e=Me();f(0,"tr")(1,"td")(2,"mat-checkbox",11),Bt("ngModelChange",function(r){let s=ne(e).$implicit,o=W(2);return Lt(o.selection[s.id],r)||(o.selection[s.id]=r),re(r)}),$("click",function(r){return ne(e),re(r.stopPropagation())}),p()(),f(3,"td"),y(4),p(),f(5,"td"),y(6),p(),f(7,"td"),y(8),p(),f(9,"td"),y(10),p(),f(11,"td"),y(12),p(),f(13,"td"),y(14),p(),f(15,"td"),y(16),p(),f(17,"td"),y(18),p(),f(19,"td"),y(20),p(),f(21,"td"),y(22),O(23,"date"),p()()}if(i&2){let e=t.$implicit,n=W(2);g(2),Nt("ngModel",n.selection[e.id]),g(2),B(e.client),g(2),B(e.quantity),g(2),B(e.cost),g(2),B(e.discount),g(2),B(e.delivery),g(2),B(e.shippingCost),g(2),B(e.tax),g(2),B(e.choice),g(2),B(e.profit),g(2),B(Mn(23,11,e.deletedAt==null?null:e.deletedAt.toDate(),"short"))}}function WMe(i,t){if(i&1){let e=Me();f(0,"div",2)(1,"h2"),y(2),O(3,"translate"),p(),f(4,"button",3),$("click",function(){ne(e);let r=W();return re(r.deleteSelectedRecords())}),y(5),O(6,"translate"),p(),f(7,"div",4)(8,"table")(9,"thead")(10,"tr")(11,"th")(12,"mat-checkbox",5),$("change",function(r){ne(e);let s=W();return re(s.toggleSelectAll(r.checked))}),p()(),f(13,"th"),y(14),O(15,"translate"),p(),f(16,"th"),y(17),O(18,"translate"),p(),f(19,"th"),y(20),O(21,"translate"),p(),f(22,"th"),y(23),O(24,"translate"),p(),f(25,"th"),y(26),O(27,"translate"),p(),f(28,"th"),y(29),O(30,"translate"),p(),f(31,"th"),y(32),O(33,"translate"),p(),f(34,"th"),y(35),O(36,"translate"),p(),f(37,"th"),y(38),O(39,"translate"),p(),f(40,"th"),y(41,"Deleted At"),p()()(),f(42,"tbody"),Y(43,qMe,24,14,"tr",6),p()()(),f(44,"div",7)(45,"button",8),$("click",function(){ne(e);let r=W();return re(r.previousPage())}),f(46,"mat-icon"),y(47,"chevron_left"),p()(),f(48,"span",9),y(49),p(),f(50,"button",10),$("click",function(){ne(e);let r=W();return re(r.nextPage())}),f(51,"mat-icon"),y(52,"chevron_right"),p()()()()}if(i&2){let e=W();g(2),B(P(3,18,"NAV.HISTORY")),g(2),z("disabled",!e.hasSelected()),g(),Q(" ",P(6,20,"HISTORY.DELETE_SELECTED")," "),g(7),z("checked",e.isAllSelected()),g(2),B(P(15,22,"form.client")),g(3),B(P(18,24,"form.quantity")),g(3),B(P(21,26,"form.cost")),g(3),B(P(24,28,"form.discount")),g(3),B(P(27,30,"form.delivery")),g(3),B(P(30,32,"form.shippingCost")),g(3),B(P(33,34,"form.tax")),g(3),B(P(36,36,"form.choice")),g(3),B(P(39,38,"table.profit")),g(5),z("ngForOf",e.pagedRecords),g(2),z("disabled",e.pageIndex===0),g(4),Zs(" ",e.pageIndex+1," / ",e.totalPages," "),g(),z("disabled",(e.pageIndex+1)*e.pageSize>=e.historyRecords.length)}}function GMe(i,t){i&1&&(f(0,"section",12)(1,"div",13),y(2,"\u{1F4ED}"),p(),f(3,"p",14),y(4,"No deleted orders history found."),p()())}var QY=(()=>{class i{constructor(e,n,r){this.firestore=e,this.afAuth=n,this.dialog=r,this.historyRecords=[],this.userId="",this.pageIndex=0,this.pageSize=10,this.selection={}}ngOnInit(){this.afAuth.authState.subscribe(e=>{e&&(this.userId=e.uid,this.history$=this.firestore.collection(`history/${this.userId}/records`,n=>n.orderBy("deletedAt","desc")).valueChanges({idField:"id"}),this.history$.subscribe(n=>{this.historyRecords=n,this.pageIndex=0,this.selection={}}))})}get pagedRecords(){let e=this.pageIndex*this.pageSize;return this.historyRecords.slice(e,e+this.pageSize)}previousPage(){this.pageIndex>0&&this.pageIndex--}nextPage(){(this.pageIndex+1)*this.pageSize<this.historyRecords.length&&this.pageIndex++}isAllSelected(){return this.pagedRecords.length>0&&this.pagedRecords.every(e=>this.selection[e.id])}toggleSelectAll(e){this.pagedRecords.forEach(n=>{this.selection[n.id]=e})}hasSelected(){return Object.values(this.selection).some(e=>e)}deleteRecord(e){if(!e)return;this.dialog.open($s,{width:"320px",data:{title:"Delete Record",message:"Are you sure you want to delete this record?"}}).afterClosed().subscribe(r=>{r===!0&&this.firestore.collection(`history/${this.userId}/records`).doc(e).delete().then(()=>{this.historyRecords=this.historyRecords.filter(s=>s.id!==e),this.pagedRecords.length===0&&this.pageIndex>0&&this.pageIndex--}).catch(s=>console.error("Error deleting record:",s))})}deleteSelectedRecords(){let e=Object.keys(this.selection).filter(r=>this.selection[r]);if(e.length===0)return;this.dialog.open($s,{width:"320px",data:{title:"Delete Selected Records",message:`Are you sure you want to delete ${e.length} selected records?`}}).afterClosed().subscribe(r=>{if(r===!0){let s=this.firestore.firestore.batch();e.forEach(o=>{let a=this.firestore.collection(`history/${this.userId}/records`).doc(o).ref;s.delete(a)}),s.commit().then(()=>{this.historyRecords=this.historyRecords.filter(o=>!e.includes(o.id)),this.selection={},this.pagedRecords.length===0&&this.pageIndex>0&&this.pageIndex--}).catch(o=>console.error("Batch delete failed:",o))}})}get totalPages(){return Math.ceil(this.historyRecords.length/this.pageSize)}static{this.\u0275fac=function(n){return new(n||i)(x(tn),x(Yt),x(_s))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-history"]],decls:6,vars:2,consts:[["noHistory",""],["class","history-container",4,"ngIf","ngIfElse"],[1,"history-container"],["mat-raised-button","","color","warn",1,"bulk-delete-btn",3,"click","disabled"],[1,"table-wrapper"],["aria-label","Select all records",3,"change","checked"],[4,"ngFor","ngForOf"],[1,"pagination-controls"],["mat-icon-button","","color","primary","aria-label","Previous page",3,"click","disabled"],[1,"page-info"],["mat-icon-button","","color","primary","aria-label","Next page",3,"click","disabled"],["aria-label","Select record",3,"ngModelChange","click","ngModel"],[1,"empty-state"],[1,"empty-state__icon"],[1,"empty-state__text"]],template:function(n,r){if(n&1&&(j(0,"app-navigation"),f(1,"section"),Y(2,WMe,53,40,"div",1)(3,GMe,5,0,"ng-template",null,0,rr),p(),j(5,"app-footer")),n&2){let s=yi(4);g(2),z("ngIf",r.historyRecords.length>0)("ngIfElse",s)}},dependencies:[Js,Rt,fr,tr,ir,Hr,Yi,Wf,gn,_n,Ai,n0],styles:[".history-container[_ngcontent-%COMP%]{width:90%;margin:3rem auto;padding:2rem 3rem;transition:all .35s cubic-bezier(.4,0,.2,1)}.history-container[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{color:#1a73e8;margin-bottom:1.5rem;font-weight:700;font-size:2rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;letter-spacing:.05em}table[_ngcontent-%COMP%]{width:100%;border-collapse:separate;border-spacing:0 .6rem;background:transparent}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]{background:#fff;border-radius:14px 14px 0 0}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{color:#174ea6;font-weight:700;padding:1.2rem 1rem;text-align:left;border-bottom:3px solid #4285f4;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;text-transform:uppercase;letter-spacing:.07em}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]{background:#fff;box-shadow:0 4px 8px #4285f41a;border-radius:14px;transition:background-color .3s ease,box-shadow .3s ease;cursor:pointer}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   tr[_ngcontent-%COMP%]:hover{background-color:#fff;box-shadow:0 6px 18px #4285f433}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:1rem;color:#1f1f1f;border-bottom:none;vertical-align:middle;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}td[_ngcontent-%COMP%]:first-child, th[_ngcontent-%COMP%]:first-child{width:48px;text-align:center}.action-cell[_ngcontent-%COMP%]   button.btn-clear[_ngcontent-%COMP%], button[mat-icon-button][_ngcontent-%COMP%]{background:transparent;border:none;font-size:1.4rem;cursor:pointer;color:#4285f4;transition:color .3s ease}.action-cell[_ngcontent-%COMP%]   button.btn-clear[_ngcontent-%COMP%]:hover, button[mat-icon-button][_ngcontent-%COMP%]:hover{color:#0b51c5}.bulk-delete-btn[_ngcontent-%COMP%]{margin-bottom:1.5rem;font-weight:600;border-radius:8px;box-shadow:0 6px 14px #4285f433}.bulk-delete-btn[_ngcontent-%COMP%]:disabled{background-color:#fff;cursor:not-allowed;opacity:.7}.pagination-buttons[_ngcontent-%COMP%]{display:flex;justify-content:center;gap:1.5rem;margin-top:2rem}.pagination-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{background-color:#4285f4;color:#fff;border:none;padding:.65rem 1.5rem;border-radius:8px;font-weight:600;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;cursor:pointer;box-shadow:0 5px 12px #4285f440;transition:all .35s cubic-bezier(.4,0,.2,1)}.pagination-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#fff;cursor:not-allowed;opacity:.65;box-shadow:none}.pagination-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:not(:disabled){background-color:#0d5bdd;box-shadow:0 7px 20px #4285f459}.empty-state[_ngcontent-%COMP%]{text-align:center;color:#174ea6;display:flex;flex-direction:column;align-items:center;gap:1.25rem;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif}.empty-state__icon[_ngcontent-%COMP%]{font-size:5rem;opacity:.35;color:#4285f4;transition:all .35s cubic-bezier(.4,0,.2,1)}.empty-state__text[_ngcontent-%COMP%]{font-weight:600;font-size:1.25rem;color:#1f1f1f}section[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;min-height:80vh;gap:2.5rem;padding:2rem 1rem}@media (max-width: 768px){.history-container[_ngcontent-%COMP%]{width:95%;padding:1.2rem 1.5rem}table[_ngcontent-%COMP%]{font-size:.9rem}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem .5rem}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.8rem .5rem}.pagination-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.pagination-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}.table-wrapper[_ngcontent-%COMP%]{overflow-x:auto;-webkit-overflow-scrolling:touch;border-radius:14px;box-shadow:0 12px 24px #1a73e826;margin-bottom:1.5rem}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar{height:6px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-track{background:#fff;border-radius:14px}.table-wrapper[_ngcontent-%COMP%]::-webkit-scrollbar-thumb{background:#4285f4;border-radius:14px}@media (max-width: 768px){.history-container[_ngcontent-%COMP%]{width:95%;padding:1.2rem 1.5rem}.table-wrapper[_ngcontent-%COMP%]{margin-bottom:1rem}table[_ngcontent-%COMP%]{min-width:600px;font-size:.85rem}table[_ngcontent-%COMP%]   thead[_ngcontent-%COMP%]   th[_ngcontent-%COMP%]{padding:1rem .75rem}table[_ngcontent-%COMP%]   tbody[_ngcontent-%COMP%]   td[_ngcontent-%COMP%]{padding:.7rem .75rem}.pagination-buttons[_ngcontent-%COMP%]{flex-direction:column;gap:1rem}.pagination-buttons[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{width:100%}}"]})}}return i})();var Yo=(()=>{class i{constructor(e,n){this.afAuth=e,this.router=n}canActivate(){return this.afAuth.authState.pipe(Pt(1),Ue(e=>e?!0:(console.log("User not authenticated, redirecting to login..."),this.router.navigate(["/login"]),!1)))}static{this.\u0275fac=function(n){return new(n||i)(V(Yt),V(on))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var gN=(i,t)=>t.some(e=>i instanceof e),XY,ZY;function $Me(){return XY||(XY=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KMe(){return ZY||(ZY=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}var _N=new WeakMap,fN=new WeakMap,X1=new WeakMap;function YMe(i){let t=new Promise((e,n)=>{let r=()=>{i.removeEventListener("success",s),i.removeEventListener("error",o)},s=()=>{e(xu(i.result)),r()},o=()=>{n(i.error),r()};i.addEventListener("success",s),i.addEventListener("error",o)});return X1.set(t,i),t}function QMe(i){if(_N.has(i))return;let t=new Promise((e,n)=>{let r=()=>{i.removeEventListener("complete",s),i.removeEventListener("error",o),i.removeEventListener("abort",o)},s=()=>{e(),r()},o=()=>{n(i.error||new DOMException("AbortError","AbortError")),r()};i.addEventListener("complete",s),i.addEventListener("error",o),i.addEventListener("abort",o)});_N.set(i,t)}var bN={get(i,t,e){if(i instanceof IDBTransaction){if(t==="done")return _N.get(i);if(t==="store")return e.objectStoreNames[1]?void 0:e.objectStore(e.objectStoreNames[0])}return xu(i[t])},set(i,t,e){return i[t]=e,!0},has(i,t){return i instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in i}};function iQ(i){bN=i(bN)}function XMe(i){return KMe().includes(i)?function(...t){return i.apply(vN(this),t),xu(this.request)}:function(...t){return xu(i.apply(vN(this),t))}}function ZMe(i){return typeof i=="function"?XMe(i):(i instanceof IDBTransaction&&QMe(i),gN(i,$Me())?new Proxy(i,bN):i)}function xu(i){if(i instanceof IDBRequest)return YMe(i);if(fN.has(i))return fN.get(i);let t=ZMe(i);return t!==i&&(fN.set(i,t),X1.set(t,i)),t}var vN=i=>X1.get(i);function nQ(i,t,{blocked:e,upgrade:n,blocking:r,terminated:s}={}){let o=indexedDB.open(i,t),a=xu(o);return n&&o.addEventListener("upgradeneeded",l=>{n(xu(o.result),l.oldVersion,l.newVersion,xu(o.transaction),l)}),e&&o.addEventListener("blocked",l=>e(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}var JMe=["get","getKey","getAll","getAllKeys","count"],eAe=["put","add","delete","clear"],pN=new Map;function JY(i,t){if(!(i instanceof IDBDatabase&&!(t in i)&&typeof t=="string"))return;if(pN.get(t))return pN.get(t);let e=t.replace(/FromIndex$/,""),n=t!==e,r=eAe.includes(e);if(!(e in(n?IDBIndex:IDBObjectStore).prototype)||!(r||JMe.includes(e)))return;let s=function(o,...a){return N(this,null,function*(){let l=this.transaction(o,r?"readwrite":"readonly"),c=l.store;return n&&(c=c.index(a.shift())),(yield Promise.all([c[e](...a),r&&l.done]))[0]})};return pN.set(t,s),s}iQ(i=>Tt(ve({},i),{get:(t,e,n)=>JY(t,e)||i.get(t,e,n),has:(t,e)=>!!JY(t,e)||i.has(t,e)}));var tAe=["continue","continuePrimaryKey","advance"],eQ={},yN=new WeakMap,rQ=new WeakMap,iAe={get(i,t){if(!tAe.includes(t))return i[t];let e=eQ[t];return e||(e=eQ[t]=function(...n){yN.set(this,rQ.get(this)[t](...n))}),e}};function nAe(...i){return FN(this,null,function*(){let t=this;if(t instanceof IDBCursor||(t=yield new rS(t.openCursor(...i))),!t)return;t=t;let e=new Proxy(t,iAe);for(rQ.set(e,t),X1.set(e,vN(t));t;)yield e,t=yield new rS(yN.get(e)||t.continue()),yN.delete(e)})}function tQ(i,t){return t===Symbol.asyncIterator&&gN(i,[IDBIndex,IDBObjectStore,IDBCursor])||t==="iterate"&&gN(i,[IDBIndex,IDBObjectStore])}iQ(i=>Tt(ve({},i),{get(t,e,n){return tQ(t,e)?nAe:i.get(t,e,n)},has(t,e){return tQ(t,e)||i.has(t,e)}}));var sQ=(()=>{class i{constructor(){this.dbPromise=nQ("ClientImagesDB",1,{upgrade(e){e.createObjectStore("images",{keyPath:"timestamp"})}})}saveImage(e,n){return N(this,null,function*(){yield(yield this.dbPromise).put("images",{clientId:e,dataUrl:n,timestamp:Date.now()})})}getImagesForClient(e){return N(this,null,function*(){return(yield(yield this.dbPromise).getAll("images")).filter(s=>s.clientId===e).sort((s,o)=>o.timestamp-s.timestamp).map(s=>({url:s.dataUrl}))})}deleteImage(e,n){return N(this,null,function*(){let s=(yield this.dbPromise).transaction("images","readwrite"),o=s.objectStore("images"),l=(yield o.getAll()).filter(d=>d.clientId===e).sort((d,u)=>u.timestamp-d.timestamp);if(n<0||n>=l.length){console.warn("Invalid image index to delete");return}let c=l[n];yield o.delete(c.timestamp),yield s.done})}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();var oQ=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[ze,ze]})}}return i})();var sAe=["*"],oAe='@media screen and (forced-colors: active),(-ms-high-contrast: active){.mdc-list-divider::after{content:"";display:block;border-bottom-width:1px;border-bottom-style:solid}}.mdc-list{margin:0;padding:8px 0;list-style-type:none}.mdc-list:focus{outline:none}.mdc-list-item__wrapper{display:block}.mdc-list-item{display:flex;position:relative;align-items:center;justify-content:flex-start;overflow:hidden;padding:0;align-items:stretch;cursor:pointer}.mdc-list-item:focus{outline:none}.mdc-list-item.mdc-list-item--with-one-line{height:48px}.mdc-list-item.mdc-list-item--with-two-lines{height:64px}.mdc-list-item.mdc-list-item--with-three-lines{height:88px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__start{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--with-one-line .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:center;margin-top:0}.mdc-list-item.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item.mdc-list-item--disabled,.mdc-list-item.mdc-list-item--non-interactive{cursor:auto}.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:1px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item:not(.mdc-list-item--selected):focus::before,.mdc-list-item.mdc-ripple-upgraded--background-focused::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px double rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected::before{border-color:CanvasText}}.mdc-list-item.mdc-list-item--selected:focus::before{position:absolute;box-sizing:border-box;width:100%;height:100%;top:0;left:0;border:3px solid rgba(0,0,0,0);border-radius:inherit;content:"";pointer-events:none}@media screen and (forced-colors: active){.mdc-list-item.mdc-list-item--selected:focus::before{border-color:CanvasText}}a.mdc-list-item{color:inherit;text-decoration:none}.mdc-list-item__start{fill:currentColor;flex-shrink:0;pointer-events:none}.mdc-list-item__end{flex-shrink:0;pointer-events:none}.mdc-list-item__content{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;align-self:center;flex:1;pointer-events:none}.mdc-list-item--with-two-lines .mdc-list-item__content,.mdc-list-item--with-three-lines .mdc-list-item__content{align-self:stretch}.mdc-list-item__content[for]{pointer-events:none}.mdc-list-item__primary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__primary-text,.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after,.mdc-list-item--with-three-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item__secondary-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden;display:block;margin-top:0;line-height:normal}.mdc-list-item__secondary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__secondary-text{white-space:normal;line-height:20px}.mdc-list-item--with-overline .mdc-list-item__secondary-text{white-space:nowrap;line-height:auto}.mdc-list-item__overline-text{text-overflow:ellipsis;white-space:nowrap;overflow:hidden}.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:24px;content:"";vertical-align:0}.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-three-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-avatar.mdc-list-item,.mdc-list-item--with-leading-avatar.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-avatar .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-avatar .mdc-list-item__start,.mdc-list-item--with-leading-avatar .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-avatar .mdc-list-item__start{border-radius:50%}.mdc-list-item--with-leading-icon.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-icon.mdc-list-item,.mdc-list-item--with-leading-icon.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-left:16px;margin-right:32px}[dir=rtl] .mdc-list-item--with-leading-icon .mdc-list-item__start,.mdc-list-item--with-leading-icon .mdc-list-item__start[dir=rtl]{margin-left:32px;margin-right:16px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-thumbnail.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-thumbnail.mdc-list-item,.mdc-list-item--with-leading-thumbnail.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-thumbnail .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-thumbnail .mdc-list-item__start,.mdc-list-item--with-leading-thumbnail .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-thumbnail.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-image.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-image.mdc-list-item,.mdc-list-item--with-leading-image.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-image .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-image .mdc-list-item__start,.mdc-list-item--with-leading-image .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-image.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-image.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-video.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-video.mdc-list-item,.mdc-list-item--with-leading-video.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-video .mdc-list-item__start{margin-left:0;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-video .mdc-list-item__start,.mdc-list-item--with-leading-video .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-video.mdc-list-item--with-one-line{height:72px}.mdc-list-item--with-leading-video.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-checkbox.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-checkbox.mdc-list-item,.mdc-list-item--with-leading-checkbox.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-checkbox .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-checkbox .mdc-list-item__start,.mdc-list-item--with-leading-checkbox .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-radio.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-radio.mdc-list-item,.mdc-list-item--with-leading-radio.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-radio .mdc-list-item__start{margin-left:8px;margin-right:24px}[dir=rtl] .mdc-list-item--with-leading-radio .mdc-list-item__start,.mdc-list-item--with-leading-radio .mdc-list-item__start[dir=rtl]{margin-left:24px;margin-right:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:8px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-radio.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-radio.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-leading-switch.mdc-list-item{padding-left:0;padding-right:auto}[dir=rtl] .mdc-list-item--with-leading-switch.mdc-list-item,.mdc-list-item--with-leading-switch.mdc-list-item[dir=rtl]{padding-left:auto;padding-right:0}.mdc-list-item--with-leading-switch .mdc-list-item__start{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-leading-switch .mdc-list-item__start,.mdc-list-item--with-leading-switch .mdc-list-item__start[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__start{align-self:flex-start;margin-top:16px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__primary-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text{display:block;margin-top:0;line-height:normal;margin-bottom:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines .mdc-list-item__overline-text::after{display:inline-block;width:0;height:20px;content:"";vertical-align:-20px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines.mdc-list-item--with-trailing-meta .mdc-list-item__end::before{display:inline-block;width:0;height:32px;content:"";vertical-align:0}.mdc-list-item--with-leading-switch.mdc-list-item--with-one-line{height:56px}.mdc-list-item--with-leading-switch.mdc-list-item--with-two-lines{height:72px}.mdc-list-item--with-trailing-icon.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-icon.mdc-list-item,.mdc-list-item--with-trailing-icon.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-icon .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-icon .mdc-list-item__end,.mdc-list-item--with-trailing-icon .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:0}.mdc-list-item--with-trailing-meta.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-meta.mdc-list-item,.mdc-list-item--with-trailing-meta.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-meta .mdc-list-item__end{margin-left:28px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-meta .mdc-list-item__end,.mdc-list-item--with-trailing-meta .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:28px}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-two-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-trailing-meta.mdc-list-item--with-three-lines .mdc-list-item__end::before{display:inline-block;width:0;height:28px;content:"";vertical-align:0}.mdc-list-item--with-trailing-meta .mdc-list-item__end{-moz-osx-font-smoothing:grayscale;-webkit-font-smoothing:antialiased;font-family:var(--mdc-typography-caption-font-family);font-size:var(--mdc-typography-caption-font-size);line-height:var(--mdc-typography-caption-line-height);font-weight:var(--mdc-typography-caption-font-weight);letter-spacing:var(--mdc-typography-caption-letter-spacing);text-decoration:var(--mdc-typography-caption-text-decoration);text-transform:var(--mdc-typography-caption-text-transform)}.mdc-list-item--with-trailing-checkbox.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-checkbox.mdc-list-item,.mdc-list-item--with-trailing-checkbox.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-checkbox .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-checkbox .mdc-list-item__end,.mdc-list-item--with-trailing-checkbox .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-checkbox.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-radio.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-radio.mdc-list-item,.mdc-list-item--with-trailing-radio.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-radio .mdc-list-item__end{margin-left:24px;margin-right:8px}[dir=rtl] .mdc-list-item--with-trailing-radio .mdc-list-item__end,.mdc-list-item--with-trailing-radio .mdc-list-item__end[dir=rtl]{margin-left:8px;margin-right:24px}.mdc-list-item--with-trailing-radio.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:8px}.mdc-list-item--with-trailing-switch.mdc-list-item{padding-left:auto;padding-right:0}[dir=rtl] .mdc-list-item--with-trailing-switch.mdc-list-item,.mdc-list-item--with-trailing-switch.mdc-list-item[dir=rtl]{padding-left:0;padding-right:auto}.mdc-list-item--with-trailing-switch .mdc-list-item__end{margin-left:16px;margin-right:16px}[dir=rtl] .mdc-list-item--with-trailing-switch .mdc-list-item__end,.mdc-list-item--with-trailing-switch .mdc-list-item__end[dir=rtl]{margin-left:16px;margin-right:16px}.mdc-list-item--with-trailing-switch.mdc-list-item--with-three-lines .mdc-list-item__end{align-self:flex-start;margin-top:16px}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-two-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text{display:block;margin-top:0;line-height:normal}.mdc-list-item--with-overline.mdc-list-item--with-three-lines .mdc-list-item__primary-text::before{display:inline-block;width:0;height:20px;content:"";vertical-align:0}.mdc-list-item{padding-left:16px;padding-right:16px}[dir=rtl] .mdc-list-item,.mdc-list-item[dir=rtl]{padding-left:16px;padding-right:16px}.mdc-list-group .mdc-deprecated-list{padding:0}.mdc-list-group__subheader{margin:calc((3rem - 1.5rem)/2) 16px}.mdc-list-divider{padding:0;background-clip:content-box}.mdc-list-divider.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset{padding-left:16px;padding-right:auto}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset,.mdc-list-divider.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-leading-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:16px}.mdc-list-divider.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset{padding-left:auto;padding-right:16px}[dir=rtl] .mdc-list-divider.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset,[dir=rtl] .mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset,.mdc-list-divider.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-text.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-icon.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-image.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-thumbnail.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-avatar.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-checkbox.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-switch.mdc-list-divider--with-trailing-inset[dir=rtl],.mdc-list-divider--with-leading-radio.mdc-list-divider--with-trailing-inset[dir=rtl]{padding-left:16px;padding-right:auto}.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset{padding-left:0px;padding-right:auto}[dir=rtl] .mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset,.mdc-list-divider--with-leading-video.mdc-list-divider--with-leading-inset[dir=rtl]{padding-left:auto;padding-right:0px}[dir=rtl] .mdc-list-divider,.mdc-list-divider[dir=rtl]{padding:0}.mdc-list-item{background-color:var(--mdc-list-list-item-container-color)}.mdc-list-item.mdc-list-item--selected{background-color:var(--mdc-list-list-item-selected-container-color)}.mdc-list-item--with-one-line{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-avatar,.mdc-list-item--with-one-line.mdc-list-item--with-leading-icon,.mdc-list-item--with-one-line.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-one-line.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-one-line.mdc-list-item--with-leading-radio,.mdc-list-item--with-one-line.mdc-list-item--with-leading-switch{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-one-line.mdc-list-item--with-leading-image,.mdc-list-item--with-one-line.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-two-lines.mdc-list-item--with-leading-avatar,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-icon,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-thumbnail,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-checkbox,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-radio,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-switch,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-image,.mdc-list-item--with-two-lines.mdc-list-item--with-leading-video{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item--with-three-lines{border-radius:var(--mdc-list-list-item-container-shape)}.mdc-list-item.mdc-list-item--with-one-line{height:var(--mdc-list-list-item-one-line-container-height)}.mdc-list-item.mdc-list-item--with-two-lines{height:var(--mdc-list-list-item-two-line-container-height)}.mdc-list-item.mdc-list-item--with-three-lines{height:var(--mdc-list-list-item-three-line-container-height)}.mdc-list-item__primary-text{color:var(--mdc-list-list-item-label-text-color)}.mdc-list-item__primary-text{font-family:var(--mdc-list-list-item-label-text-font);line-height:var(--mdc-list-list-item-label-text-line-height);font-size:var(--mdc-list-list-item-label-text-size);font-weight:var(--mdc-list-list-item-label-text-weight);letter-spacing:var(--mdc-list-list-item-label-text-tracking)}.mdc-list-item__secondary-text{color:var(--mdc-list-list-item-supporting-text-color)}.mdc-list-item__secondary-text{font-family:var(--mdc-list-list-item-supporting-text-font);line-height:var(--mdc-list-list-item-supporting-text-line-height);font-size:var(--mdc-list-list-item-supporting-text-size);font-weight:var(--mdc-list-list-item-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-supporting-text-tracking)}.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-leading-icon-color)}.mdc-list-item--with-leading-icon .mdc-list-item__start{width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start>i{font-size:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon{font-size:var(--mdc-list-list-item-leading-icon-size);width:var(--mdc-list-list-item-leading-icon-size);height:var(--mdc-list-list-item-leading-icon-size)}.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon,.mdc-list-item--with-leading-icon .mdc-list-item__start .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--with-leading-avatar .mdc-list-item__start{width:var(--mdc-list-list-item-leading-avatar-size);height:var(--mdc-list-list-item-leading-avatar-size)}.mdc-list-item.mdc-list-item--with-trailing-meta .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-supporting-text-color)}.mdc-list-item--with-trailing-meta .mdc-list-item__end{font-family:var(--mdc-list-list-item-trailing-supporting-text-font);line-height:var(--mdc-list-list-item-trailing-supporting-text-line-height);font-size:var(--mdc-list-list-item-trailing-supporting-text-size);font-weight:var(--mdc-list-list-item-trailing-supporting-text-weight);letter-spacing:var(--mdc-list-list-item-trailing-supporting-text-tracking)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-trailing-icon-color)}.mdc-list-item--with-trailing-icon .mdc-list-item__end{width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end>i{font-size:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon{font-size:var(--mdc-list-list-item-trailing-icon-size);width:var(--mdc-list-list-item-trailing-icon-size);height:var(--mdc-list-list-item-trailing-icon-size)}.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon,.mdc-list-item--with-trailing-icon .mdc-list-item__end .mdc-list-item__icon>.materialdesignWizIconSvgsSvgIcon{display:block}.mdc-list-item--selected.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-selected-trailing-icon-color)}.mdc-list-item--disabled .mdc-list-item__start,.mdc-list-item--disabled .mdc-list-item__content,.mdc-list-item--disabled .mdc-list-item__end{opacity:1}.mdc-list-item--disabled .mdc-list-item__primary-text,.mdc-list-item--disabled .mdc-list-item__secondary-text,.mdc-list-item--disabled .mdc-list-item__overline-text{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{color:var(--mdc-list-list-item-disabled-leading-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-leading-icon .mdc-list-item__start{opacity:var(--mdc-list-list-item-disabled-leading-icon-opacity)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{color:var(--mdc-list-list-item-disabled-trailing-icon-color)}.mdc-list-item--disabled.mdc-list-item--with-trailing-icon .mdc-list-item__end{opacity:var(--mdc-list-list-item-disabled-trailing-icon-opacity)}.mdc-list-item:hover .mdc-list-item__primary-text{color:var(--mdc-list-list-item-hover-label-text-color)}.mdc-list-item--with-leading-icon:hover .mdc-list-item__start{color:var(--mdc-list-list-item-hover-leading-icon-color)}.mdc-list-item--with-trailing-icon:hover .mdc-list-item__end{color:var(--mdc-list-list-item-hover-trailing-icon-color)}.mdc-list-item:focus .mdc-list-item__primary-text{color:var(--mdc-list-list-item-focus-label-text-color)}.mdc-list-item.mdc-list-item--disabled .mdc-list-item__primary-text{color:var(--mdc-list-list-item-disabled-label-text-color)}.mdc-list-item:hover::before{background-color:var(--mdc-list-list-item-hover-state-layer-color);opacity:var(--mdc-list-list-item-hover-state-layer-opacity)}.mdc-list-item.mdc-list-item--disabled::before{background-color:var(--mdc-list-list-item-disabled-state-layer-color);opacity:var(--mdc-list-list-item-disabled-state-layer-opacity)}.mdc-list-item:focus::before{background-color:var(--mdc-list-list-item-focus-state-layer-color);opacity:var(--mdc-list-list-item-focus-state-layer-opacity)}.mdc-list-item--disabled .mdc-radio,.mdc-list-item--disabled .mdc-checkbox{opacity:var(--mdc-list-list-item-disabled-label-text-opacity)}.mdc-list-item--with-leading-avatar .mat-mdc-list-item-avatar{border-radius:var(--mdc-list-list-item-leading-avatar-shape);background-color:var(--mdc-list-list-item-leading-avatar-color)}.mat-mdc-list-item-icon{font-size:var(--mdc-list-list-item-leading-icon-size)}.cdk-high-contrast-active a.mdc-list-item--activated::after{content:"";position:absolute;top:50%;right:16px;transform:translateY(-50%);width:10px;height:0;border-bottom:solid 10px;border-radius:10px}.cdk-high-contrast-active a.mdc-list-item--activated [dir=rtl]::after{right:auto;left:16px}.mat-mdc-list-base{display:block}.mat-mdc-list-base .mdc-list-item__start,.mat-mdc-list-base .mdc-list-item__end,.mat-mdc-list-base .mdc-list-item__content{pointer-events:auto}.mat-mdc-list-item,.mat-mdc-list-option{width:100%;box-sizing:border-box;-webkit-tap-highlight-color:rgba(0,0,0,0)}.mat-mdc-list-item:not(.mat-mdc-list-item-interactive),.mat-mdc-list-option:not(.mat-mdc-list-item-interactive){cursor:default}.mat-mdc-list-item .mat-divider-inset,.mat-mdc-list-option .mat-divider-inset{position:absolute;left:0;right:0;bottom:0}.mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,.mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-left:72px}[dir=rtl] .mat-mdc-list-item .mat-mdc-list-item-avatar~.mat-divider-inset,[dir=rtl] .mat-mdc-list-option .mat-mdc-list-item-avatar~.mat-divider-inset{margin-right:72px}.mat-mdc-list-item-interactive::before{top:0;left:0;right:0;bottom:0;position:absolute;content:"";opacity:0;pointer-events:none}.mat-mdc-list-item>.mat-mdc-focus-indicator{top:0;left:0;right:0;bottom:0;position:absolute;pointer-events:none}.mat-mdc-list-item:focus>.mat-mdc-focus-indicator::before{content:""}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-line.mdc-list-item__secondary-text{white-space:nowrap;line-height:normal}.mat-mdc-list-item.mdc-list-item--with-three-lines .mat-mdc-list-item-unscoped-content.mdc-list-item__secondary-text{display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2}mat-action-list button{background:none;color:inherit;border:none;font:inherit;outline:inherit;-webkit-tap-highlight-color:rgba(0,0,0,0);text-align:start}mat-action-list button::-moz-focus-inner{border:0}.mdc-list-item--with-leading-icon .mdc-list-item__start{margin-inline-start:var(--mat-list-list-item-leading-icon-start-space);margin-inline-end:var(--mat-list-list-item-leading-icon-end-space)}.mat-mdc-nav-list .mat-mdc-list-item{border-radius:var(--mat-list-active-indicator-shape);--mat-mdc-focus-indicator-border-radius:var(--mat-list-active-indicator-shape)}.mat-mdc-nav-list .mat-mdc-list-item.mdc-list-item--activated{background-color:var(--mat-list-active-indicator-color)}',aAe=["unscopedContent"],lAe=["text"],cAe=[[["","matListItemAvatar",""],["","matListItemIcon",""]],[["","matListItemTitle",""]],[["","matListItemLine",""]],"*",[["","matListItemMeta",""]],[["mat-divider"]]],dAe=["[matListItemAvatar],[matListItemIcon]","[matListItemTitle]","[matListItemLine]","*","[matListItemMeta]","mat-divider"];var uAe=new te("ListOption"),hAe=(()=>{class i{constructor(e){this._elementRef=e}static{this.\u0275fac=function(n){return new(n||i)(x(fe))}}static{this.\u0275dir=J({type:i,selectors:[["","matListItemTitle",""]],hostAttrs:[1,"mat-mdc-list-item-title","mdc-list-item__primary-text"],standalone:!0})}}return i})(),mAe=(()=>{class i{constructor(e){this._elementRef=e}static{this.\u0275fac=function(n){return new(n||i)(x(fe))}}static{this.\u0275dir=J({type:i,selectors:[["","matListItemLine",""]],hostAttrs:[1,"mat-mdc-list-item-line","mdc-list-item__secondary-text"],standalone:!0})}}return i})(),fAe=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["","matListItemMeta",""]],hostAttrs:[1,"mat-mdc-list-item-meta","mdc-list-item__end"],standalone:!0})}}return i})(),aQ=(()=>{class i{constructor(e){this._listOption=e}_isAlignedAtStart(){return!this._listOption||this._listOption?._getTogglePosition()==="after"}static{this.\u0275fac=function(n){return new(n||i)(x(uAe,8))}}static{this.\u0275dir=J({type:i,hostVars:4,hostBindings:function(n,r){n&2&&le("mdc-list-item__start",r._isAlignedAtStart())("mdc-list-item__end",!r._isAlignedAtStart())},standalone:!0})}}return i})(),pAe=(()=>{class i extends aQ{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["","matListItemAvatar",""]],hostAttrs:[1,"mat-mdc-list-item-avatar"],standalone:!0,features:[Ve]})}}return i})(),gAe=(()=>{class i extends aQ{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["","matListItemIcon",""]],hostAttrs:[1,"mat-mdc-list-item-icon"],standalone:!0,features:[Ve]})}}return i})(),_Ae=new te("MAT_LIST_CONFIG"),Z1=(()=>{class i{constructor(){this._isNonInteractive=!0,this._disableRipple=!1,this._disabled=!1,this._defaultOptions=He(_Ae,{optional:!0})}get disableRipple(){return this._disableRipple}set disableRipple(e){this._disableRipple=Vr(e)}get disabled(){return this._disabled}set disabled(e){this._disabled=Vr(e)}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,hostVars:1,hostBindings:function(n,r){n&2&&Se("aria-disabled",r.disabled)},inputs:{disableRipple:"disableRipple",disabled:"disabled"},standalone:!0})}}return i})(),bAe=(()=>{class i{set lines(e){this._explicitLines=pr(e,null),this._updateItemLines(!1)}get disableRipple(){return this.disabled||this._disableRipple||this._noopAnimations||!!this._listBase?.disableRipple}set disableRipple(e){this._disableRipple=Vr(e)}get disabled(){return this._disabled||!!this._listBase?.disabled}set disabled(e){this._disabled=Vr(e)}get rippleDisabled(){return this.disableRipple||!!this.rippleConfig.disabled}constructor(e,n,r,s,o,a){this._elementRef=e,this._ngZone=n,this._listBase=r,this._platform=s,this._explicitLines=null,this._disableRipple=!1,this._disabled=!1,this._subscriptions=new At,this._rippleRenderer=null,this._hasUnscopedTextContent=!1,this.rippleConfig=o||{},this._hostElement=this._elementRef.nativeElement,this._isButtonElement=this._hostElement.nodeName.toLowerCase()==="button",this._noopAnimations=a==="NoopAnimations",r&&!r._isNonInteractive&&this._initInteractiveListItem(),this._isButtonElement&&!this._hostElement.hasAttribute("type")&&this._hostElement.setAttribute("type","button")}ngAfterViewInit(){this._monitorProjectedLinesAndTitle(),this._updateItemLines(!0)}ngOnDestroy(){this._subscriptions.unsubscribe(),this._rippleRenderer!==null&&this._rippleRenderer._removeTriggerEvents()}_hasIconOrAvatar(){return!!(this._avatars.length||this._icons.length)}_initInteractiveListItem(){this._hostElement.classList.add("mat-mdc-list-item-interactive"),this._rippleRenderer=new G_(this,this._ngZone,this._hostElement,this._platform),this._rippleRenderer.setupTriggerEvents(this._hostElement)}_monitorProjectedLinesAndTitle(){this._ngZone.runOutsideAngular(()=>{this._subscriptions.add(_i(this._lines.changes,this._titles.changes).subscribe(()=>this._updateItemLines(!1)))})}_updateItemLines(e){if(!this._lines||!this._titles||!this._unscopedContent)return;e&&this._checkDomForUnscopedTextContent();let n=this._explicitLines??this._inferLinesFromContent(),r=this._unscopedContent.nativeElement;if(this._hostElement.classList.toggle("mat-mdc-list-item-single-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-one-line",n<=1),this._hostElement.classList.toggle("mdc-list-item--with-two-lines",n===2),this._hostElement.classList.toggle("mdc-list-item--with-three-lines",n===3),this._hasUnscopedTextContent){let s=this._titles.length===0&&n===1;r.classList.toggle("mdc-list-item__primary-text",s),r.classList.toggle("mdc-list-item__secondary-text",!s)}else r.classList.remove("mdc-list-item__primary-text"),r.classList.remove("mdc-list-item__secondary-text")}_inferLinesFromContent(){let e=this._titles.length+this._lines.length;return this._hasUnscopedTextContent&&(e+=1),e}_checkDomForUnscopedTextContent(){this._hasUnscopedTextContent=Array.from(this._unscopedContent.nativeElement.childNodes).filter(e=>e.nodeType!==e.COMMENT_NODE).some(e=>!!(e.textContent&&e.textContent.trim()))}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(_e),x(Z1,8),x(dt),x(K_,8),x(Ut,8))}}static{this.\u0275dir=J({type:i,contentQueries:function(n,r,s){if(n&1&&(gt(s,pAe,4),gt(s,gAe,4)),n&2){let o;ye(o=xe())&&(r._avatars=o),ye(o=xe())&&(r._icons=o)}},hostVars:4,hostBindings:function(n,r){n&2&&(Se("aria-disabled",r.disabled)("disabled",r._isButtonElement&&r.disabled||null),le("mdc-list-item--disabled",r.disabled))},inputs:{lines:"lines",disableRipple:"disableRipple",disabled:"disabled"},standalone:!0})}}return i})();var lQ=(()=>{class i extends Z1{static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275cmp=ae({type:i,selectors:[["mat-list"]],hostAttrs:[1,"mat-mdc-list","mat-mdc-list-base","mdc-list"],exportAs:["matList"],standalone:!0,features:[je([{provide:Z1,useExisting:i}]),Ve,Re],ngContentSelectors:sAe,decls:1,vars:0,template:function(n,r){n&1&&(nt(),Ee(0))},styles:[oAe],encapsulation:2,changeDetection:0})}}return i})(),cQ=(()=>{class i extends bAe{get activated(){return this._activated}set activated(e){this._activated=Vr(e)}constructor(e,n,r,s,o,a){super(e,n,r,s,o,a),this._activated=!1}_getAriaCurrent(){return this._hostElement.nodeName==="A"&&this._activated?"page":null}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(_e),x(Z1,8),x(dt),x(K_,8),x(Ut,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-list-item"],["a","mat-list-item",""],["button","mat-list-item",""]],contentQueries:function(n,r,s){if(n&1&&(gt(s,mAe,5),gt(s,hAe,5),gt(s,fAe,5)),n&2){let o;ye(o=xe())&&(r._lines=o),ye(o=xe())&&(r._titles=o),ye(o=xe())&&(r._meta=o)}},viewQuery:function(n,r){if(n&1&&($e(aAe,5),$e(lAe,5)),n&2){let s;ye(s=xe())&&(r._unscopedContent=s.first),ye(s=xe())&&(r._itemText=s.first)}},hostAttrs:[1,"mat-mdc-list-item","mdc-list-item"],hostVars:11,hostBindings:function(n,r){n&2&&(Se("aria-current",r._getAriaCurrent()),le("mdc-list-item--activated",r.activated)("mdc-list-item--with-leading-avatar",r._avatars.length!==0)("mdc-list-item--with-leading-icon",r._icons.length!==0)("mdc-list-item--with-trailing-meta",r._meta.length!==0)("_mat-animation-noopable",r._noopAnimations))},inputs:{activated:"activated"},exportAs:["matListItem"],standalone:!0,features:[Ve,Re],ngContentSelectors:dAe,decls:10,vars:0,consts:[["unscopedContent",""],[1,"mdc-list-item__content"],[1,"mat-mdc-list-item-unscoped-content",3,"cdkObserveContent"],[1,"mat-mdc-focus-indicator"]],template:function(n,r){if(n&1){let s=Me();nt(cAe),Ee(0),f(1,"span",1),Ee(2,1),Ee(3,2),f(4,"span",2,0),$("cdkObserveContent",function(){return ne(s),re(r._updateItemLines(!0))}),Ee(6,3),p()(),Ee(7,4),Ee(8,5),j(9,"div",3)}},dependencies:[q9],encapsulation:2,changeDetection:0})}}return i})();var dQ=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[Vm,$r,ze,ou,qR,oQ]})}}return i})();var yAe=0,xN=new te("CdkAccordion"),uQ=(()=>{class i{constructor(){this._stateChanges=new ke,this._openCloseAllActions=new ke,this.id=`cdk-accordion-${yAe++}`,this.multi=!1}openAll(){this.multi&&this._openCloseAllActions.next(!0)}closeAll(){this._openCloseAllActions.next(!1)}ngOnChanges(e){this._stateChanges.next(e)}ngOnDestroy(){this._stateChanges.complete(),this._openCloseAllActions.complete()}static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["cdk-accordion"],["","cdkAccordion",""]],inputs:{multi:[H.HasDecoratorInputTransform,"multi","multi",be]},exportAs:["cdkAccordion"],standalone:!0,features:[je([{provide:xN,useExisting:i}]),Ge,ht]})}}return i})(),xAe=0,hQ=(()=>{class i{get expanded(){return this._expanded}set expanded(e){if(this._expanded!==e){if(this._expanded=e,this.expandedChange.emit(e),e){this.opened.emit();let n=this.accordion?this.accordion.id:this.id;this._expansionDispatcher.notify(this.id,n)}else this.closed.emit();this._changeDetectorRef.markForCheck()}}constructor(e,n,r){this.accordion=e,this._changeDetectorRef=n,this._expansionDispatcher=r,this._openCloseAllSubscription=At.EMPTY,this.closed=new ue,this.opened=new ue,this.destroyed=new ue,this.expandedChange=new ue,this.id=`cdk-accordion-child-${xAe++}`,this._expanded=!1,this.disabled=!1,this._removeUniqueSelectionListener=()=>{},this._removeUniqueSelectionListener=r.listen((s,o)=>{this.accordion&&!this.accordion.multi&&this.accordion.id===o&&this.id!==s&&(this.expanded=!1)}),this.accordion&&(this._openCloseAllSubscription=this._subscribeToOpenCloseAllActions())}ngOnDestroy(){this.opened.complete(),this.closed.complete(),this.destroyed.emit(),this.destroyed.complete(),this._removeUniqueSelectionListener(),this._openCloseAllSubscription.unsubscribe()}toggle(){this.disabled||(this.expanded=!this.expanded)}close(){this.disabled||(this.expanded=!1)}open(){this.disabled||(this.expanded=!0)}_subscribeToOpenCloseAllActions(){return this.accordion._openCloseAllActions.subscribe(e=>{this.disabled||(this.expanded=e)})}static{this.\u0275fac=function(n){return new(n||i)(x(xN,12),x(mt),x(TC))}}static{this.\u0275dir=J({type:i,selectors:[["cdk-accordion-item"],["","cdkAccordionItem",""]],inputs:{expanded:[H.HasDecoratorInputTransform,"expanded","expanded",be],disabled:[H.HasDecoratorInputTransform,"disabled","disabled",be]},outputs:{closed:"closed",opened:"opened",destroyed:"destroyed",expandedChange:"expandedChange"},exportAs:["cdkAccordionItem"],standalone:!0,features:[je([{provide:xN,useValue:void 0}]),Ge]})}}return i})(),mQ=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({})}}return i})();var wAe=["body"],CAe=[[["mat-expansion-panel-header"]],"*",[["mat-action-row"]]],SAe=["mat-expansion-panel-header","*","mat-action-row"];function kAe(i,t){}var EAe=[[["mat-panel-title"]],[["mat-panel-description"]],"*"],TAe=["mat-panel-title","mat-panel-description","*"];function IAe(i,t){if(i&1&&(f(0,"span",1),bt(),f(1,"svg",2),j(2,"path",3),p()()),i&2){let e=W();z("@indicatorRotate",e._getExpandedState())}}var wN=new te("MAT_ACCORDION"),fQ="225ms cubic-bezier(0.4,0.0,0.2,1)",gQ={indicatorRotate:Cr("indicatorRotate",[or("collapsed, void",ci({transform:"rotate(0deg)"})),or("expanded",ci({transform:"rotate(180deg)"})),wn("expanded <=> collapsed, void => collapsed",An(fQ))]),bodyExpansion:Cr("bodyExpansion",[or("collapsed, void",ci({height:"0px",visibility:"hidden"})),or("expanded",ci({height:"*",visibility:""})),wn("expanded <=> collapsed, void => collapsed",An(fQ))])},_Q=new te("MAT_EXPANSION_PANEL"),DAe=(()=>{class i{constructor(e,n){this._template=e,this._expansionPanel=n}static{this.\u0275fac=function(n){return new(n||i)(x(rn),x(_Q,8))}}static{this.\u0275dir=J({type:i,selectors:[["ng-template","matExpansionPanelContent",""]],standalone:!0})}}return i})(),MAe=0,bQ=new te("MAT_EXPANSION_PANEL_DEFAULT_OPTIONS"),CN=(()=>{class i extends hQ{get hideToggle(){return this._hideToggle||this.accordion&&this.accordion.hideToggle}set hideToggle(e){this._hideToggle=e}get togglePosition(){return this._togglePosition||this.accordion&&this.accordion.togglePosition}set togglePosition(e){this._togglePosition=e}constructor(e,n,r,s,o,a,l){super(e,n,r),this._viewContainerRef=s,this._animationMode=a,this._hideToggle=!1,this.afterExpand=new ue,this.afterCollapse=new ue,this._inputChanges=new ke,this._headerId=`mat-expansion-panel-header-${MAe++}`,this.accordion=e,this._document=o,this._animationsDisabled=a==="NoopAnimations",l&&(this.hideToggle=l.hideToggle)}_hasSpacing(){return this.accordion?this.expanded&&this.accordion.displayMode==="default":!1}_getExpandedState(){return this.expanded?"expanded":"collapsed"}toggle(){this.expanded=!this.expanded}close(){this.expanded=!1}open(){this.expanded=!0}ngAfterContentInit(){this._lazyContent&&this._lazyContent._expansionPanel===this&&this.opened.pipe(Pi(null),Ot(()=>this.expanded&&!this._portal),Pt(1)).subscribe(()=>{this._portal=new Vo(this._lazyContent._template,this._viewContainerRef)})}ngOnChanges(e){this._inputChanges.next(e)}ngOnDestroy(){super.ngOnDestroy(),this._inputChanges.complete()}_containsFocus(){if(this._body){let e=this._document.activeElement,n=this._body.nativeElement;return e===n||n.contains(e)}return!1}_animationStarted(e){!pQ(e)&&!this._animationsDisabled&&this._body&&this._body?.nativeElement.setAttribute("inert","")}_animationDone(e){pQ(e)||(e.toState==="expanded"?this.afterExpand.emit():e.toState==="collapsed"&&this.afterCollapse.emit(),!this._animationsDisabled&&this._body&&this._body.nativeElement.removeAttribute("inert"))}static{this.\u0275fac=function(n){return new(n||i)(x(wN,12),x(mt),x(TC),x(Un),x(Ze),x(Ut,8),x(bQ,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-expansion-panel"]],contentQueries:function(n,r,s){if(n&1&&gt(s,DAe,5),n&2){let o;ye(o=xe())&&(r._lazyContent=o.first)}},viewQuery:function(n,r){if(n&1&&$e(wAe,5),n&2){let s;ye(s=xe())&&(r._body=s.first)}},hostAttrs:[1,"mat-expansion-panel"],hostVars:6,hostBindings:function(n,r){n&2&&le("mat-expanded",r.expanded)("_mat-animation-noopable",r._animationsDisabled)("mat-expansion-panel-spacing",r._hasSpacing())},inputs:{hideToggle:[H.HasDecoratorInputTransform,"hideToggle","hideToggle",be],togglePosition:"togglePosition"},outputs:{afterExpand:"afterExpand",afterCollapse:"afterCollapse"},exportAs:["matExpansionPanel"],standalone:!0,features:[je([{provide:wN,useValue:void 0},{provide:_Q,useExisting:i}]),Ge,Ve,ht,Re],ngContentSelectors:SAe,decls:7,vars:4,consts:[["body",""],["role","region",1,"mat-expansion-panel-content",3,"id"],[1,"mat-expansion-panel-body"],[3,"cdkPortalOutlet"]],template:function(n,r){if(n&1){let s=Me();nt(CAe),Ee(0),f(1,"div",1,0),$("@bodyExpansion.start",function(a){return ne(s),re(r._animationStarted(a))})("@bodyExpansion.done",function(a){return ne(s),re(r._animationDone(a))}),f(3,"div",2),Ee(4,1),Y(5,kAe,0,0,"ng-template",3),p(),Ee(6,2),p()}n&2&&(g(),z("@bodyExpansion",r._getExpandedState())("id",r.id),Se("aria-labelledby",r._headerId),g(4),z("cdkPortalOutlet",r._portal))},dependencies:[zo],styles:['.mat-expansion-panel{box-sizing:content-box;display:block;margin:0;overflow:hidden;transition:margin 225ms cubic-bezier(0.4, 0, 0.2, 1),box-shadow 280ms cubic-bezier(0.4, 0, 0.2, 1);position:relative;background:var(--mat-expansion-container-background-color);color:var(--mat-expansion-container-text-color);border-radius:var(--mat-expansion-container-shape)}.mat-expansion-panel:not([class*=mat-elevation-z]){box-shadow:0px 3px 1px -2px rgba(0, 0, 0, 0.2), 0px 2px 2px 0px rgba(0, 0, 0, 0.14), 0px 1px 5px 0px rgba(0, 0, 0, 0.12)}.mat-accordion .mat-expansion-panel:not(.mat-expanded),.mat-accordion .mat-expansion-panel:not(.mat-expansion-panel-spacing){border-radius:0}.mat-accordion .mat-expansion-panel:first-of-type{border-top-right-radius:var(--mat-expansion-container-shape);border-top-left-radius:var(--mat-expansion-container-shape)}.mat-accordion .mat-expansion-panel:last-of-type{border-bottom-right-radius:var(--mat-expansion-container-shape);border-bottom-left-radius:var(--mat-expansion-container-shape)}.cdk-high-contrast-active .mat-expansion-panel{outline:solid 1px}.mat-expansion-panel.ng-animate-disabled,.ng-animate-disabled .mat-expansion-panel,.mat-expansion-panel._mat-animation-noopable{transition:none}.mat-expansion-panel-content{display:flex;flex-direction:column;overflow:visible;font-family:var(--mat-expansion-container-text-font);font-size:var(--mat-expansion-container-text-size);font-weight:var(--mat-expansion-container-text-weight);line-height:var(--mat-expansion-container-text-line-height);letter-spacing:var(--mat-expansion-container-text-tracking)}.mat-expansion-panel-content[style*="visibility: hidden"] *{visibility:hidden !important}.mat-expansion-panel-body{padding:0 24px 16px}.mat-expansion-panel-spacing{margin:16px 0}.mat-accordion>.mat-expansion-panel-spacing:first-child,.mat-accordion>*:first-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-top:0}.mat-accordion>.mat-expansion-panel-spacing:last-child,.mat-accordion>*:last-child:not(.mat-expansion-panel) .mat-expansion-panel-spacing{margin-bottom:0}.mat-action-row{border-top-style:solid;border-top-width:1px;display:flex;flex-direction:row;justify-content:flex-end;padding:16px 8px 16px 24px;border-top-color:var(--mat-expansion-actions-divider-color)}.mat-action-row .mat-button-base,.mat-action-row .mat-mdc-button-base{margin-left:8px}[dir=rtl] .mat-action-row .mat-button-base,[dir=rtl] .mat-action-row .mat-mdc-button-base{margin-left:0;margin-right:8px}'],encapsulation:2,data:{animation:[gQ.bodyExpansion]},changeDetection:0})}}return i})();function pQ(i){return i.fromState==="void"}var SN=(()=>{class i{constructor(e,n,r,s,o,a,l){this.panel=e,this._element=n,this._focusMonitor=r,this._changeDetectorRef=s,this._animationMode=a,this._parentChangeSubscription=At.EMPTY,this.tabIndex=0;let c=e.accordion?e.accordion._stateChanges.pipe(Ot(d=>!!(d.hideToggle||d.togglePosition))):Hb;this.tabIndex=parseInt(l||"")||0,this._parentChangeSubscription=_i(e.opened,e.closed,c,e._inputChanges.pipe(Ot(d=>!!(d.hideToggle||d.disabled||d.togglePosition)))).subscribe(()=>this._changeDetectorRef.markForCheck()),e.closed.pipe(Ot(()=>e._containsFocus())).subscribe(()=>r.focusVia(n,"program")),o&&(this.expandedHeight=o.expandedHeight,this.collapsedHeight=o.collapsedHeight)}get disabled(){return this.panel.disabled}_toggle(){this.disabled||this.panel.toggle()}_isExpanded(){return this.panel.expanded}_getExpandedState(){return this.panel._getExpandedState()}_getPanelId(){return this.panel.id}_getTogglePosition(){return this.panel.togglePosition}_showToggle(){return!this.panel.hideToggle&&!this.panel.disabled}_getHeaderHeight(){let e=this._isExpanded();return e&&this.expandedHeight?this.expandedHeight:!e&&this.collapsedHeight?this.collapsedHeight:null}_keydown(e){switch(e.keyCode){case 32:case 13:Di(e)||(e.preventDefault(),this._toggle());break;default:this.panel.accordion&&this.panel.accordion._handleHeaderKeydown(e);return}}focus(e,n){e?this._focusMonitor.focusVia(this._element,e,n):this._element.nativeElement.focus(n)}ngAfterViewInit(){this._focusMonitor.monitor(this._element).subscribe(e=>{e&&this.panel.accordion&&this.panel.accordion._handleHeaderFocus(this)})}ngOnDestroy(){this._parentChangeSubscription.unsubscribe(),this._focusMonitor.stopMonitoring(this._element)}static{this.\u0275fac=function(n){return new(n||i)(x(CN,1),x(fe),x(zr),x(mt),x(bQ,8),x(Ut,8),yn("tabindex"))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-expansion-panel-header"]],hostAttrs:["role","button",1,"mat-expansion-panel-header","mat-focus-indicator"],hostVars:15,hostBindings:function(n,r){n&1&&$("click",function(){return r._toggle()})("keydown",function(o){return r._keydown(o)}),n&2&&(Se("id",r.panel._headerId)("tabindex",r.disabled?-1:r.tabIndex)("aria-controls",r._getPanelId())("aria-expanded",r._isExpanded())("aria-disabled",r.panel.disabled),vi("height",r._getHeaderHeight()),le("mat-expanded",r._isExpanded())("mat-expansion-toggle-indicator-after",r._getTogglePosition()==="after")("mat-expansion-toggle-indicator-before",r._getTogglePosition()==="before")("_mat-animation-noopable",r._animationMode==="NoopAnimations"))},inputs:{expandedHeight:"expandedHeight",collapsedHeight:"collapsedHeight",tabIndex:[H.HasDecoratorInputTransform,"tabIndex","tabIndex",e=>e==null?0:sr(e)]},standalone:!0,features:[Ge,Re],ngContentSelectors:TAe,decls:5,vars:3,consts:[[1,"mat-content"],[1,"mat-expansion-indicator"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 -960 960 960","aria-hidden","true","focusable","false"],["d","M480-345 240-585l56-56 184 184 184-184 56 56-240 240Z"]],template:function(n,r){n&1&&(nt(EAe),f(0,"span",0),Ee(1),Ee(2,1),Ee(3,2),p(),Y(4,IAe,3,1,"span",1)),n&2&&(le("mat-content-hide-toggle",!r._showToggle()),g(4),et(4,r._showToggle()?4:-1))},styles:['.mat-expansion-panel-header{display:flex;flex-direction:row;align-items:center;padding:0 24px;border-radius:inherit;transition:height 225ms cubic-bezier(0.4, 0, 0.2, 1);height:var(--mat-expansion-header-collapsed-state-height);font-family:var(--mat-expansion-header-text-font);font-size:var(--mat-expansion-header-text-size);font-weight:var(--mat-expansion-header-text-weight);line-height:var(--mat-expansion-header-text-line-height);letter-spacing:var(--mat-expansion-header-text-tracking)}.mat-expansion-panel-header.mat-expanded{height:var(--mat-expansion-header-expanded-state-height)}.mat-expansion-panel-header[aria-disabled=true]{color:var(--mat-expansion-header-disabled-state-text-color)}.mat-expansion-panel-header:not([aria-disabled=true]){cursor:pointer}.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-header-hover-state-layer-color)}@media(hover: none){.mat-expansion-panel:not(.mat-expanded) .mat-expansion-panel-header:not([aria-disabled=true]):hover{background:var(--mat-expansion-container-background-color)}}.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-keyboard-focused,.mat-expansion-panel .mat-expansion-panel-header:not([aria-disabled=true]).cdk-program-focused{background:var(--mat-expansion-header-focus-state-layer-color)}.mat-expansion-panel-header._mat-animation-noopable{transition:none}.mat-expansion-panel-header:focus,.mat-expansion-panel-header:hover{outline:none}.mat-expansion-panel-header.mat-expanded:focus,.mat-expansion-panel-header.mat-expanded:hover{background:inherit}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before{flex-direction:row-reverse}.mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 16px 0 0}[dir=rtl] .mat-expansion-panel-header.mat-expansion-toggle-indicator-before .mat-expansion-indicator{margin:0 0 0 16px}.mat-content{display:flex;flex:1;flex-direction:row;overflow:hidden}.mat-content.mat-content-hide-toggle{margin-right:8px}[dir=rtl] .mat-content.mat-content-hide-toggle{margin-right:0;margin-left:8px}.mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-left:24px;margin-right:0}[dir=rtl] .mat-expansion-toggle-indicator-before .mat-content.mat-content-hide-toggle{margin-right:24px;margin-left:0}.mat-expansion-panel-header-title{color:var(--mat-expansion-header-text-color)}.mat-expansion-panel-header-title,.mat-expansion-panel-header-description{display:flex;flex-grow:1;flex-basis:0;margin-right:16px;align-items:center}[dir=rtl] .mat-expansion-panel-header-title,[dir=rtl] .mat-expansion-panel-header-description{margin-right:0;margin-left:16px}.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-title,.mat-expansion-panel-header[aria-disabled=true] .mat-expansion-panel-header-description{color:inherit}.mat-expansion-panel-header-description{flex-grow:2;color:var(--mat-expansion-header-description-color)}.mat-expansion-indicator::after{border-style:solid;border-width:0 2px 2px 0;content:"";display:inline-block;padding:3px;transform:rotate(45deg);vertical-align:middle;color:var(--mat-expansion-header-indicator-color);display:inline-block;display:var(--mat-expansion-legacy-header-indicator-display, inline-block)}.mat-expansion-indicator svg{width:24px;height:24px;margin:0 -8px;vertical-align:middle;fill:var(--mat-expansion-header-indicator-color);display:none;display:var(--mat-expansion-header-indicator-display, none)}.cdk-high-contrast-active .mat-expansion-panel-content{border-top:1px solid;border-top-left-radius:0;border-top-right-radius:0}'],encapsulation:2,data:{animation:[gQ.indicatorRotate]},changeDetection:0})}}return i})(),vQ=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["mat-panel-description"]],hostAttrs:[1,"mat-expansion-panel-header-description"],standalone:!0})}}return i})(),yQ=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275dir=J({type:i,selectors:[["mat-panel-title"]],hostAttrs:[1,"mat-expansion-panel-header-title"],standalone:!0})}}return i})(),xQ=(()=>{class i extends uQ{constructor(){super(...arguments),this._ownHeaders=new Kf,this.hideToggle=!1,this.displayMode="default",this.togglePosition="after"}ngAfterContentInit(){this._headers.changes.pipe(Pi(this._headers)).subscribe(e=>{this._ownHeaders.reset(e.filter(n=>n.panel.accordion===this)),this._ownHeaders.notifyOnChanges()}),this._keyManager=new bC(this._ownHeaders).withWrap().withHomeAndEnd()}_handleHeaderKeydown(e){this._keyManager.onKeydown(e)}_handleHeaderFocus(e){this._keyManager.updateActiveItem(e)}ngOnDestroy(){super.ngOnDestroy(),this._keyManager?.destroy(),this._ownHeaders.destroy()}static{this.\u0275fac=(()=>{let e;return function(r){return(e||(e=vt(i)))(r||i)}})()}static{this.\u0275dir=J({type:i,selectors:[["mat-accordion"]],contentQueries:function(n,r,s){if(n&1&&gt(s,SN,5),n&2){let o;ye(o=xe())&&(r._headers=o)}},hostAttrs:[1,"mat-accordion"],hostVars:2,hostBindings:function(n,r){n&2&&le("mat-accordion-multi",r.multi)},inputs:{hideToggle:[H.HasDecoratorInputTransform,"hideToggle","hideToggle",be],displayMode:"displayMode",togglePosition:"togglePosition"},exportAs:["matAccordion"],standalone:!0,features:[je([{provide:wN,useExisting:i}]),Ge,Ve]})}}return i})(),wQ=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[ze,mQ,Gs]})}}return i})();var CQ=["*"];var OAe=".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size)}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size)}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size)}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size)}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}",kN=class{constructor(){this.columnIndex=0,this.rowIndex=0}get rowCount(){return this.rowIndex+1}get rowspan(){let t=Math.max(...this.tracker);return t>1?this.rowCount+t-1:this.rowCount}update(t,e){this.columnIndex=0,this.rowIndex=0,this.tracker=new Array(t),this.tracker.fill(0,0,this.tracker.length),this.positions=e.map(n=>this._trackTile(n))}_trackTile(t){let e=this._findMatchingGap(t.colspan);return this._markTilePosition(e,t),this.columnIndex=e+t.colspan,new EN(this.rowIndex,e)}_findMatchingGap(t){t>this.tracker.length;let e=-1,n=-1;do{if(this.columnIndex+t>this.tracker.length){this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),n=this._findGapEndIndex(e);continue}if(e=this.tracker.indexOf(0,this.columnIndex),e==-1){this._nextRow(),e=this.tracker.indexOf(0,this.columnIndex),n=this._findGapEndIndex(e);continue}n=this._findGapEndIndex(e),this.columnIndex=e+1}while(n-e<t||n==0);return Math.max(e,0)}_nextRow(){this.columnIndex=0,this.rowIndex++;for(let t=0;t<this.tracker.length;t++)this.tracker[t]=Math.max(0,this.tracker[t]-1)}_findGapEndIndex(t){for(let e=t+1;e<this.tracker.length;e++)if(this.tracker[e]!=0)return e;return this.tracker.length}_markTilePosition(t,e){for(let n=0;n<e.colspan;n++)this.tracker[t+n]=e.rowspan}},EN=class{constructor(t,e){this.row=t,this.col=e}},SQ=new te("MAT_GRID_LIST"),MN=(()=>{class i{constructor(e,n){this._element=e,this._gridList=n,this._rowspan=1,this._colspan=1}get rowspan(){return this._rowspan}set rowspan(e){this._rowspan=Math.round(pr(e))}get colspan(){return this._colspan}set colspan(e){this._colspan=Math.round(pr(e))}_setStyle(e,n){this._element.nativeElement.style[e]=n}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(SQ,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-grid-tile"]],hostAttrs:[1,"mat-grid-tile"],hostVars:2,hostBindings:function(n,r){n&2&&Se("rowspan",r.rowspan)("colspan",r.colspan)},inputs:{rowspan:"rowspan",colspan:"colspan"},exportAs:["matGridTile"],standalone:!0,features:[Re],ngContentSelectors:CQ,decls:2,vars:0,consts:[[1,"mat-grid-tile-content"]],template:function(n,r){n&1&&(nt(),f(0,"div",0),Ee(1),p())},styles:[".mat-grid-list{display:block;position:relative}.mat-grid-tile{display:block;position:absolute;overflow:hidden}.mat-grid-tile .mat-grid-tile-header,.mat-grid-tile .mat-grid-tile-footer{display:flex;align-items:center;height:48px;color:#fff;background:rgba(0,0,0,.38);overflow:hidden;padding:0 16px;position:absolute;left:0;right:0}.mat-grid-tile .mat-grid-tile-header>*,.mat-grid-tile .mat-grid-tile-footer>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-tile-header.mat-2-line,.mat-grid-tile .mat-grid-tile-footer.mat-2-line{height:68px}.mat-grid-tile .mat-grid-list-text{display:flex;flex-direction:column;flex:auto;box-sizing:border-box;overflow:hidden}.mat-grid-tile .mat-grid-list-text>*{margin:0;padding:0;font-weight:normal;font-size:inherit}.mat-grid-tile .mat-grid-list-text:empty{display:none}.mat-grid-tile .mat-grid-tile-header{top:0}.mat-grid-tile .mat-grid-tile-footer{bottom:0}.mat-grid-tile .mat-grid-avatar{padding-right:16px}[dir=rtl] .mat-grid-tile .mat-grid-avatar{padding-right:0;padding-left:16px}.mat-grid-tile .mat-grid-avatar:empty{display:none}.mat-grid-tile-header{font-size:var(--mat-grid-list-tile-header-primary-text-size)}.mat-grid-tile-header .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-header .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-header-secondary-text-size)}.mat-grid-tile-footer{font-size:var(--mat-grid-list-tile-footer-primary-text-size)}.mat-grid-tile-footer .mat-line{white-space:nowrap;overflow:hidden;text-overflow:ellipsis;display:block;box-sizing:border-box}.mat-grid-tile-footer .mat-line:nth-child(n+2){font-size:var(--mat-grid-list-tile-footer-secondary-text-size)}.mat-grid-tile-content{top:0;left:0;right:0;bottom:0;position:absolute;display:flex;align-items:center;justify-content:center;height:100%;padding:0;margin:0}"],encapsulation:2,changeDetection:0})}}return i})();var PAe=/^-?\d+((\.\d+)?[A-Za-z%$]?)+$/,Vb=class{constructor(){this._rows=0,this._rowspan=0}init(t,e,n,r){this._gutterSize=kQ(t),this._rows=e.rowCount,this._rowspan=e.rowspan,this._cols=n,this._direction=r}getBaseTileSize(t,e){return`(${t}% - (${this._gutterSize} * ${e}))`}getTilePosition(t,e){return e===0?"0":wu(`(${t} + ${this._gutterSize}) * ${e}`)}getTileSize(t,e){return`(${t} * ${e}) + (${e-1} * ${this._gutterSize})`}setStyle(t,e,n){let r=100/this._cols,s=(this._cols-1)/this._cols;this.setColStyles(t,n,r,s),this.setRowStyles(t,e,r,s)}setColStyles(t,e,n,r){let s=this.getBaseTileSize(n,r),o=this._direction==="rtl"?"right":"left";t._setStyle(o,this.getTilePosition(s,e)),t._setStyle("width",wu(this.getTileSize(s,t.colspan)))}getGutterSpan(){return`${this._gutterSize} * (${this._rowspan} - 1)`}getTileSpan(t){return`${this._rowspan} * ${this.getTileSize(t,1)}`}getComputedHeight(){return null}},TN=class extends Vb{constructor(t){super(),this.fixedRowHeight=t}init(t,e,n,r){super.init(t,e,n,r),this.fixedRowHeight=kQ(this.fixedRowHeight),PAe.test(this.fixedRowHeight)}setRowStyles(t,e){t._setStyle("top",this.getTilePosition(this.fixedRowHeight,e)),t._setStyle("height",wu(this.getTileSize(this.fixedRowHeight,t.rowspan)))}getComputedHeight(){return["height",wu(`${this.getTileSpan(this.fixedRowHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["height",null]),t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}},IN=class extends Vb{constructor(t){super(),this._parseRatio(t)}setRowStyles(t,e,n,r){let s=n/this.rowHeightRatio;this.baseTileHeight=this.getBaseTileSize(s,r),t._setStyle("marginTop",this.getTilePosition(this.baseTileHeight,e)),t._setStyle("paddingTop",wu(this.getTileSize(this.baseTileHeight,t.rowspan)))}getComputedHeight(){return["paddingBottom",wu(`${this.getTileSpan(this.baseTileHeight)} + ${this.getGutterSpan()}`)]}reset(t){t._setListStyle(["paddingBottom",null]),t._tiles.forEach(e=>{e._setStyle("marginTop",null),e._setStyle("paddingTop",null)})}_parseRatio(t){let e=t.split(":");e.length,this.rowHeightRatio=parseFloat(e[0])/parseFloat(e[1])}},DN=class extends Vb{setRowStyles(t,e){let n=100/this._rowspan,r=(this._rows-1)/this._rows,s=this.getBaseTileSize(n,r);t._setStyle("top",this.getTilePosition(s,e)),t._setStyle("height",wu(this.getTileSize(s,t.rowspan)))}reset(t){t._tiles&&t._tiles.forEach(e=>{e._setStyle("top",null),e._setStyle("height",null)})}};function wu(i){return`calc(${i})`}function kQ(i){return i.match(/([A-Za-z%]+)$/)?i:`${i}px`}var RAe="fit",EQ=(()=>{class i{constructor(e,n){this._element=e,this._dir=n,this._gutter="1px"}get cols(){return this._cols}set cols(e){this._cols=Math.max(1,Math.round(pr(e)))}get gutterSize(){return this._gutter}set gutterSize(e){this._gutter=`${e??""}`}get rowHeight(){return this._rowHeight}set rowHeight(e){let n=`${e??""}`;n!==this._rowHeight&&(this._rowHeight=n,this._setTileStyler(this._rowHeight))}ngOnInit(){this._checkCols(),this._checkRowHeight()}ngAfterContentChecked(){this._layoutTiles()}_checkCols(){this.cols}_checkRowHeight(){this._rowHeight||this._setTileStyler("1:1")}_setTileStyler(e){this._tileStyler&&this._tileStyler.reset(this),e===RAe?this._tileStyler=new DN:e&&e.indexOf(":")>-1?this._tileStyler=new IN(e):this._tileStyler=new TN(e)}_layoutTiles(){this._tileCoordinator||(this._tileCoordinator=new kN);let e=this._tileCoordinator,n=this._tiles.filter(s=>!s._gridList||s._gridList===this),r=this._dir?this._dir.value:"ltr";this._tileCoordinator.update(this.cols,n),this._tileStyler.init(this.gutterSize,e,this.cols,r),n.forEach((s,o)=>{let a=e.positions[o];this._tileStyler.setStyle(s,a.row,a.col)}),this._setListStyle(this._tileStyler.getComputedHeight())}_setListStyle(e){e&&(this._element.nativeElement.style[e[0]]=e[1])}static{this.\u0275fac=function(n){return new(n||i)(x(fe),x(Mi,8))}}static{this.\u0275cmp=ae({type:i,selectors:[["mat-grid-list"]],contentQueries:function(n,r,s){if(n&1&&gt(s,MN,5),n&2){let o;ye(o=xe())&&(r._tiles=o)}},hostAttrs:[1,"mat-grid-list"],hostVars:1,hostBindings:function(n,r){n&2&&Se("cols",r.cols)},inputs:{cols:"cols",gutterSize:"gutterSize",rowHeight:"rowHeight"},exportAs:["matGridList"],standalone:!0,features:[je([{provide:SQ,useExisting:i}]),Re],ngContentSelectors:CQ,decls:2,vars:0,template:function(n,r){n&1&&(nt(),f(0,"div"),Ee(1),p())},styles:[OAe],encapsulation:2,changeDetection:0})}}return i})(),TQ=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[UR,ze,UR,ze]})}}return i})();var IQ=i=>({name:i}),NAe=i=>({id:i}),LAe=i=>({cost:i}),BAe=i=>({profit:i});function VAe(i,t){if(i&1&&(f(0,"mat-expansion-panel")(1,"mat-expansion-panel-header")(2,"mat-panel-title"),y(3),O(4,"translate"),O(5,"translate"),p(),f(6,"mat-panel-description"),y(7),O(8,"translate"),p()(),f(9,"mat-list")(10,"mat-list-item")(11,"strong"),y(12),O(13,"translate"),p(),y(14),p(),f(15,"mat-list-item")(16,"strong"),y(17),O(18,"translate"),p(),y(19),p(),f(20,"mat-list-item")(21,"strong"),y(22),O(23,"translate"),p(),y(24),p(),f(25,"mat-list-item")(26,"strong"),y(27),O(28,"translate"),p(),y(29),p(),f(30,"mat-list-item")(31,"strong"),y(32),O(33,"translate"),p(),y(34),p(),f(35,"mat-list-item")(36,"strong"),y(37),O(38,"translate"),p(),y(39),p()()()),i&2){let e=t.$implicit,n=t.index,r=W(3);g(3),Zs(" ",Mn(4,15,"orderId",za(36,NAe,n+1))," \xA0 - \xA0 ",Mn(5,18,"cost",za(38,LAe,e.cost))," "),g(4),Q(" ",Mn(8,21,"profit",za(40,BAe,r.calculateProfit(e)))," "),g(5),Q("",P(13,24,"quantity"),":"),g(2),Q(" ",e.quantity," "),g(3),Q("",P(18,26,"discount"),":"),g(2),Q(" ",e.discount,"% "),g(3),Q("",P(23,28,"delivery"),":"),g(2),Q(" $",e.delivery," "),g(3),Q("",P(28,30,"shippingCost"),":"),g(2),Q(" $",e.shippingCost," "),g(3),Q("",P(33,32,"tax"),":"),g(2),Q(" $",e.tax," "),g(3),Q("",P(38,34,"choice"),":"),g(2),Q(" ",e.choice," ")}}function zAe(i,t){if(i&1&&(f(0,"div")(1,"mat-accordion",13),Y(2,VAe,40,42,"mat-expansion-panel",12),p()()),i&2){let e=t.ngIf;g(2),z("ngForOf",e)}}function jAe(i,t){i&1&&(f(0,"p"),y(1),O(2,"translate"),p()),i&2&&(g(),B(P(2,1,"noOrders")))}function UAe(i,t){if(i&1){let e=Me();f(0,"mat-grid-tile")(1,"mat-card",14),j(2,"img",15),f(3,"mat-card-actions",16)(4,"button",17),$("click",function(){let r=ne(e),s=r.$implicit,o=r.index,a=W(2);return re(a.downloadImage(s.url,a.clientId+"-"+o+".jpg"))}),f(5,"mat-icon"),y(6,"download"),p()(),f(7,"button",18),$("click",function(){let r=ne(e).index,s=W(2);return re(s.deleteImage(r))}),f(8,"mat-icon"),y(9,"delete"),p()()()()()}if(i&2){let e=t.$implicit;g(2),z("src",e.url,Yf)}}function HAe(i,t){if(i&1){let e=Me();f(0,"section",3)(1,"mat-card",4)(2,"mat-card-header")(3,"mat-card-title"),y(4),O(5,"translate"),p(),f(6,"mat-card-subtitle"),y(7),p()(),f(8,"mat-card-content")(9,"mat-list")(10,"mat-list-item")(11,"strong"),y(12),O(13,"translate"),p(),y(14),p(),f(15,"mat-list-item")(16,"strong"),y(17),O(18,"translate"),p(),y(19),O(20,"translate"),p(),f(21,"mat-list-item")(22,"strong"),y(23),O(24,"translate"),p(),y(25),p(),f(26,"mat-list-item")(27,"strong"),y(28),O(29,"translate"),p(),y(30),O(31,"translate"),p()()()(),f(32,"h3",5),y(33),O(34,"translate"),p(),Y(35,zAe,3,1,"div",6),O(36,"async"),Y(37,jAe,3,3,"ng-template",null,1,rr),f(39,"h3",5),y(40,"Client Images"),p(),f(41,"mat-card",7)(42,"input",8),$("change",function(r){ne(e);let s=W();return re(s.onImageSelected(r))}),p(),f(43,"label",9),y(44," Upload Image "),f(45,"mat-icon"),y(46,"upload"),p()()(),f(47,"div",10)(48,"mat-grid-list",11),Y(49,UAe,10,1,"mat-grid-tile",12),p()()()}if(i&2){let e=t.ngIf,n=yi(38),r=W();g(4),B(Mn(5,14,"clientDetails",za(34,IQ,e.fullName))),g(3),B(e.location),g(5),Q("",P(13,17,"phone"),":"),g(2),Q(" ",e.phoneNumber," "),g(3),Q("",P(18,19,"otherPhone"),":"),g(2),Q(" ",e.OtherPhoneNumber||P(20,21,"notAvailable")," "),g(4),Q("",P(24,23,"address"),":"),g(2),Q(" ",e.address," "),g(3),Q("",P(29,25,"address2"),":"),g(2),Q(" ",e.address2||P(31,27,"notAvailable")," "),g(3),Q(" ",Mn(34,29,"ordersFor",za(36,IQ,e.fullName))," "),g(2),z("ngIf",P(36,32,r.orders$))("ngIfElse",n),g(14),z("ngForOf",r.clientImages)}}function qAe(i,t){i&1&&(f(0,"div",19),j(1,"mat-spinner"),f(2,"p"),y(3,"Loading client details..."),p()())}var DQ=(()=>{class i{constructor(e,n,r,s){this.route=e,this.firestore=n,this.afAuth=r,this.imageStorage=s,this.userId="",this.clientId="",this.client$=We(null),this.orders$=We([]),this.clientImages=[]}ngOnInit(){this.afAuth.authState.subscribe(e=>{if(e){if(this.userId=e.uid,this.clientId=this.route.snapshot.paramMap.get("id")||"",!this.userId||!this.clientId){console.error("Missing userId or clientId");return}this.loadImages(),this.client$=this.firestore.doc(`clients/${this.userId}/records/${this.clientId}`).valueChanges().pipe(Ue(n=>n??null),Vc(()=>We(null))),this.orders$=this.client$.pipe(bi(n=>n?this.firestore.collection(`sheinTables/${this.userId}/records`,r=>r.where("client","==",n.fullName)).snapshotChanges().pipe(Ue(r=>r.map(s=>{let o=s.payload.doc.data(),a=s.payload.doc.id,d=o,{id:l}=d,c=RN(d,["id"]);return ve({id:a},c)})),Vc(()=>We([]))):We([])))}})}calculateProfit(e){return+(e.cost*e.discount/100-(e.shippingCost||0)-(e.tax||0)+0).toFixed(2)}onImageSelected(e){let r=e.target.files?.[0];if(!r)return;let s=new FileReader;s.onload=()=>N(this,null,function*(){let o=s.result;yield this.imageStorage.saveImage(this.clientId,o),this.loadImages()}),s.readAsDataURL(r)}deleteImage(e){return N(this,null,function*(){yield this.imageStorage.deleteImage(this.clientId,e),this.loadImages()})}loadImages(){return N(this,null,function*(){this.clientImages=yield this.imageStorage.getImagesForClient(this.clientId)})}downloadImage(e,n){let r=document.createElement("a");r.href=e,r.download=n,document.body.appendChild(r),r.click(),document.body.removeChild(r)}static{this.\u0275fac=function(n){return new(n||i)(x(_L),x(tn),x(Yt),x(sQ))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-client-detail"]],decls:6,vars:4,consts:[["loading",""],["noOrders",""],["class","client-detail-container",4,"ngIf","ngIfElse"],[1,"client-detail-container"],[1,"client-card"],[1,"section-title"],[4,"ngIf","ngIfElse"],[1,"image-upload-card"],["type","file","accept","image/*","id","image-upload","hidden","",3,"change"],["mat-raised-button","","color","primary","for","image-upload",1,"upload-label"],[1,"uploaded-images"],["cols","4","rowHeight","150px","gutterSize","12px"],[4,"ngFor","ngForOf"],["multi",""],[1,"image-card"],["mat-card-image","","alt","Client Image",3,"src"],["align","end"],["mat-icon-button","","color","primary","aria-label","Download Image",3,"click"],["mat-icon-button","","color","warn","aria-label","Delete Image",3,"click"],[1,"loading-container"]],template:function(n,r){if(n&1&&(j(0,"app-navigation"),Y(1,HAe,50,38,"section",2),O(2,"async"),Y(3,qAe,4,0,"ng-template",null,0,rr),j(5,"app-footer")),n&2){let s=yi(4);g(),z("ngIf",P(2,2,r.client$))("ngIfElse",s)}},dependencies:[Js,Rt,Hr,Yi,bs,_W,ff,bW,vW,gW,mf,qC,lQ,cQ,xQ,CN,SN,yQ,vQ,EQ,MN,gn,_n,Ai,i0],styles:[".client-detail-container[_ngcontent-%COMP%]{max-width:1100px;margin:2rem auto;padding:2rem 1rem;display:flex;flex-direction:column;gap:2rem;transition:all .3s ease}.client-detail-container[_ngcontent-%COMP%]:hover{transform:translateY(-4px)}.client-detail-container[_ngcontent-%COMP%]   .client-card[_ngcontent-%COMP%], .client-detail-container[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]{background-color:#fff;box-shadow:0 8px 16px #1a73e81a;border-radius:14px;padding:1.5rem;transition:all .3s ease}.client-detail-container[_ngcontent-%COMP%]   .client-card[_ngcontent-%COMP%]:hover, .client-detail-container[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]:hover{box-shadow:0 12px 24px #1a73e833;transform:translateY(-3px)}.client-detail-container[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-weight:700;font-size:1.5rem;margin-bottom:1rem;color:#1a73e8;border-bottom:2px solid #d3e4fb;padding-bottom:.5rem}.client-detail-container[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]{display:flex;justify-content:center;margin-bottom:1rem}.client-detail-container[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]{display:inline-flex;align-items:center;gap:8px;cursor:pointer;font-weight:600;font-size:1rem;padding:10px 24px;border-radius:8px;background-color:#4285f4;color:#fff;-webkit-user-select:none;user-select:none;transition:background-color .3s ease}.client-detail-container[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]:hover{background-color:#1266f1}.client-detail-container[_ngcontent-%COMP%]   .image-upload-card[_ngcontent-%COMP%]   .upload-label[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.client-detail-container[_ngcontent-%COMP%]   .uploaded-images[_ngcontent-%COMP%]   mat-grid-list[_ngcontent-%COMP%]{margin-top:1rem;width:100%}.client-detail-container[_ngcontent-%COMP%]   .uploaded-images[_ngcontent-%COMP%]   mat-grid-list[_ngcontent-%COMP%]   mat-grid-tile[_ngcontent-%COMP%]{padding:8px}.client-detail-container[_ngcontent-%COMP%]   .uploaded-images[_ngcontent-%COMP%]   mat-grid-list[_ngcontent-%COMP%]   mat-grid-tile[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]{position:relative;border-radius:14px;box-shadow:0 4px 12px #1a73e81a;transition:box-shadow .3s ease}.client-detail-container[_ngcontent-%COMP%]   .uploaded-images[_ngcontent-%COMP%]   mat-grid-list[_ngcontent-%COMP%]   mat-grid-tile[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]:hover{box-shadow:0 8px 20px #1a73e833}.client-detail-container[_ngcontent-%COMP%]   .uploaded-images[_ngcontent-%COMP%]   mat-grid-list[_ngcontent-%COMP%]   mat-grid-tile[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   img[mat-card-image][_ngcontent-%COMP%]{width:100%;height:150px;object-fit:cover;border-radius:14px}.client-detail-container[_ngcontent-%COMP%]   .uploaded-images[_ngcontent-%COMP%]   mat-grid-list[_ngcontent-%COMP%]   mat-grid-tile[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]{position:absolute;top:8px;right:8px;padding:4px;z-index:10}.client-detail-container[_ngcontent-%COMP%]   .uploaded-images[_ngcontent-%COMP%]   mat-grid-list[_ngcontent-%COMP%]   mat-grid-tile[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{color:#1a73e8;width:32px;height:32px}.client-detail-container[_ngcontent-%COMP%]   .uploaded-images[_ngcontent-%COMP%]   mat-grid-list[_ngcontent-%COMP%]   mat-grid-tile[_ngcontent-%COMP%]   .image-card[_ngcontent-%COMP%]   mat-card-actions[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]   mat-icon[_ngcontent-%COMP%]{font-size:20px}.loading-container[_ngcontent-%COMP%]{display:flex;flex-direction:column;align-items:center;justify-content:center;padding:40px;color:#666}.loading-container[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin-top:12px;font-size:1.1rem}"]})}}return i})();function WAe(i,t){if(i&1){let e=Me();f(0,"div",8),$("click",function(){let r=ne(e).$implicit,s=W();return re(s.goToClientDetail(r.id))}),f(1,"div",9)(2,"mat-checkbox",10),O(3,"translate"),Bt("ngModelChange",function(r){let s=ne(e).$implicit;return Lt(s.selected,r)||(s.selected=r),re(r)}),$("change",function(){ne(e);let r=W();return re(r.checkIfAllSelected())})("click",function(r){return ne(e),re(r.stopPropagation())}),p(),f(4,"span",11),y(5),p(),f(6,"span",12),y(7),O(8,"translate"),f(9,"strong"),y(10),p()(),f(11,"span",13),y(12),O(13,"translate"),f(14,"strong"),y(15),p()(),f(16,"span",14),y(17),O(18,"translate"),f(19,"strong"),y(20),p()()(),f(21,"mat-icon",15),y(22,"arrow_forward_ios"),p()()}if(i&2){let e=t.$implicit,n=t.index;g(),Se("aria-label","Client "+e.client.fullName+", number "+(n+1)+", phone "+e.client.phoneNumber+", "+e.orderCount+" orders"),g(),Nt("ngModel",e.selected),Se("aria-label",P(3,10,"CLIENTS.SELECT_CLIENT")+" "+e.client.fullName),g(3),B(n+1),g(2),Q("",P(8,12,"CLIENTS.NAME"),": "),g(3),B(e.client.fullName),g(2),Q("",P(13,14,"CLIENTS.PHONE"),": "),g(3),B(e.client.phoneNumber),g(2),Q(" ",P(18,16,"CLIENTS.ORDERS"),": "),g(3),B(e.orderCount)}}function GAe(i,t){i&1&&(f(0,"div",16),y(1),O(2,"translate"),p()),i&2&&(g(),Q(" ",P(2,1,"CLIENTS.NO_CLIENTS")," "))}var MQ=(()=>{class i{constructor(e,n,r,s){this.firestore=e,this.afAuth=n,this.router=r,this.dialog=s,this.userId="",this.clientsWithOrderCount=[],this.masterSelected=!1}ngOnInit(){this.afAuth.authState.pipe(bi(e=>e?(this.userId=e.uid,this.firestore.collection(`clients/${this.userId}/records`).snapshotChanges()):We([])),bi(e=>{let n=e.map(s=>{let o=s.payload.doc.id,a=s.payload.doc.data();return{id:o,client:a}});if(n.length===0)return We([]);let r=n.map(({id:s,client:o})=>this.firestore.collection(`sheinTables/${this.userId}/records`,a=>a.where("client","==",o.fullName)).get().pipe(Ue(a=>({id:s,client:o,orderCount:a.size})),Vc(()=>We({id:s,client:o,orderCount:0}))));return Ba(r)})).subscribe(e=>{this.clientsWithOrderCount=e.map(n=>Tt(ve({},n),{selected:!1})),this.masterSelected=!1})}goToClientDetail(e){this.router.navigate(["/client-details",e])}selectAllClients(e){let n=e.checked;this.clientsWithOrderCount.forEach(r=>r.selected=n)}checkIfAllSelected(){this.masterSelected=this.clientsWithOrderCount.every(e=>e.selected===!0)&&this.clientsWithOrderCount.length>0}anySelected(){return this.clientsWithOrderCount.some(e=>e.selected)}deleteSelectedClients(){let e=this.clientsWithOrderCount.filter(r=>r.selected);if(e.length===0)return;this.dialog.open($s,{width:"320px",data:{title:"Delete Clients",message:`Are you sure you want to delete ${e.length} client(s)?`}}).afterClosed().subscribe(r=>{if(r===!0){let s=this.firestore.firestore.batch();e.forEach(o=>{let a=this.firestore.collection(`clients/${this.userId}/records`).doc(o.id).ref;s.delete(a)}),s.commit().then(()=>{this.clientsWithOrderCount=this.clientsWithOrderCount.filter(o=>!o.selected),this.masterSelected=!1}).catch(o=>{console.error("Error deleting clients:",o)})}})}static{this.\u0275fac=function(n){return new(n||i)(x(tn),x(Yt),x(on),x(_s))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-list"]],decls:16,vars:13,consts:[[1,"page-container"],[1,"client-list-container"],[1,"section-title"],[1,"actions-bar"],[3,"ngModelChange","change","ngModel"],["mat-raised-button","","color","warn",3,"click","disabled"],["class","client-list-item","tabindex","0","role","listitem",3,"click",4,"ngFor","ngForOf"],["class","no-clients",4,"ngIf"],["tabindex","0","role","listitem",1,"client-list-item",3,"click"],[1,"client-info"],[1,"order-checkbox",3,"ngModelChange","change","click","ngModel"],[1,"client-number"],[1,"client-name"],[1,"client-phone"],[1,"client-orders"],["aria-hidden","true",1,"navigate-icon"],[1,"no-clients"]],template:function(n,r){n&1&&(f(0,"div",0),j(1,"app-navigation"),f(2,"section",1)(3,"h2",2),y(4),O(5,"translate"),p(),f(6,"div",3)(7,"mat-checkbox",4),Bt("ngModelChange",function(o){return Lt(r.masterSelected,o)||(r.masterSelected=o),o}),$("change",function(o){return r.selectAllClients(o)}),y(8),O(9,"translate"),p(),f(10,"button",5),$("click",function(){return r.deleteSelectedClients()}),y(11),O(12,"translate"),p()(),Y(13,WAe,23,18,"div",6)(14,GAe,3,3,"div",7),p(),j(15,"app-footer"),p()),n&2&&(g(4),B(P(5,7,"CLIENTS.TITLE")),g(3),Nt("ngModel",r.masterSelected),g(),B(P(9,9,"CLIENTS.SELECT_ALL")),g(2),z("disabled",!r.anySelected()),g(),Q(" ",P(12,11,"CLIENTS.DELETE_SELECTED")," "),g(2),z("ngForOf",r.clientsWithOrderCount),g(),z("ngIf",r.clientsWithOrderCount.length===0))},dependencies:[Js,Rt,fr,tr,ir,Yi,Wf,gn,_n,Ai],styles:[".client-list-container[_ngcontent-%COMP%]{max-width:900px;margin:2rem auto;padding:1.5rem 2rem;min-height:100vh;font-family:Segoe UI,Tahoma,Geneva,Verdana,sans-serif;color:#222}.client-list-container[_ngcontent-%COMP%]   .section-title[_ngcontent-%COMP%]{font-size:2.5rem;font-weight:800;margin-bottom:2rem;color:#1e2a38;letter-spacing:.06em;text-align:center;-webkit-user-select:none;user-select:none}.client-list-container[_ngcontent-%COMP%]   .actions-bar[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;margin-bottom:2rem}.client-list-container[_ngcontent-%COMP%]   .actions-bar[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]{font-weight:700;cursor:pointer;-webkit-user-select:none;user-select:none}.client-list-container[_ngcontent-%COMP%]   .actions-bar[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]   .mat-checkbox-frame[_ngcontent-%COMP%]{border-radius:6px;border:2.5px solid #3f51b5;transition:border-color .3s ease}.client-list-container[_ngcontent-%COMP%]   .actions-bar[_ngcontent-%COMP%]   mat-checkbox.mat-checkbox-checked[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#3f51b5!important;border-radius:6px}.client-list-container[_ngcontent-%COMP%]   .actions-bar[_ngcontent-%COMP%]   mat-checkbox[_ngcontent-%COMP%]:hover   .mat-checkbox-frame[_ngcontent-%COMP%]{border-color:#2c387e}.client-list-container[_ngcontent-%COMP%]   .actions-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]{font-weight:700;padding:.5rem 1.4rem;border-radius:8px;box-shadow:0 5px 14px #e74c3c59;background-color:#e74c3c;color:#fff;border:none;transition:background-color .35s ease,box-shadow .35s ease}.client-list-container[_ngcontent-%COMP%]   .actions-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:hover:enabled{background-color:#bf3b2f;box-shadow:0 7px 20px #bf3b2f80;cursor:pointer}.client-list-container[_ngcontent-%COMP%]   .actions-bar[_ngcontent-%COMP%]   button[_ngcontent-%COMP%]:disabled{background-color:#ccc!important;color:#999!important;box-shadow:none;cursor:not-allowed}.client-list-container[_ngcontent-%COMP%]   .client-list-item[_ngcontent-%COMP%]{background:#f7f9fc;border-radius:12px;margin-bottom:1.1rem;padding:1.2rem 1.6rem;display:flex;justify-content:space-between;align-items:center;box-shadow:0 3px 12px #0000000a;transition:background-color .25s ease,box-shadow .25s ease;-webkit-user-select:none;user-select:none;cursor:pointer}.client-list-container[_ngcontent-%COMP%]   .client-list-item[_ngcontent-%COMP%]:hover, .client-list-container[_ngcontent-%COMP%]   .client-list-item[_ngcontent-%COMP%]:focus-visible{background-color:#e8f0fe;box-shadow:0 8px 24px #3f51b540;outline:none}.client-list-container[_ngcontent-%COMP%]   .client-list-item[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;gap:1.6rem;flex:1;align-items:center}.client-list-container[_ngcontent-%COMP%]   .client-list-item[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]{display:flex;align-items:center;font-size:1.15rem;color:#34495e}.client-list-container[_ngcontent-%COMP%]   .client-list-item[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   span[_ngcontent-%COMP%]   strong[_ngcontent-%COMP%]{margin-left:.3rem;color:#1e2a38;font-weight:700}.client-list-container[_ngcontent-%COMP%]   .client-list-item[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   .client-number[_ngcontent-%COMP%]{font-size:1.75rem;font-weight:900;color:#3f51b5;width:3rem;text-align:center;-webkit-user-select:none;user-select:none}.client-list-container[_ngcontent-%COMP%]   .client-list-item[_ngcontent-%COMP%]   .client-info[_ngcontent-%COMP%]   .client-orders[_ngcontent-%COMP%]{display:flex;align-items:center;gap:.8rem}.client-list-container[_ngcontent-%COMP%]   .client-list-item[_ngcontent-%COMP%]   .order-checkbox[_ngcontent-%COMP%]{cursor:pointer;margin-left:1.2rem;flex-shrink:0}.client-list-container[_ngcontent-%COMP%]   .client-list-item[_ngcontent-%COMP%]   .order-checkbox[_ngcontent-%COMP%]   .mat-checkbox-frame[_ngcontent-%COMP%]{border-radius:6px;border:2.5px solid #3f51b5;transition:border-color .3s ease}.client-list-container[_ngcontent-%COMP%]   .client-list-item[_ngcontent-%COMP%]   .order-checkbox.mat-checkbox-checked[_ngcontent-%COMP%]   .mat-checkbox-background[_ngcontent-%COMP%]{background-color:#3f51b5!important;border-radius:6px}.client-list-container[_ngcontent-%COMP%]   .client-list-item[_ngcontent-%COMP%]   .order-checkbox[_ngcontent-%COMP%]:hover   .mat-checkbox-frame[_ngcontent-%COMP%]{border-color:#2c387e}.client-list-container[_ngcontent-%COMP%]   .client-list-item[_ngcontent-%COMP%]   .navigate-icon[_ngcontent-%COMP%]{color:#9aa7bf;font-size:1.8rem;margin-left:1rem;transition:color .3s ease;-webkit-user-select:none;user-select:none}.client-list-item[_ngcontent-%COMP%]:hover   .client-list-container[_ngcontent-%COMP%]   .client-list-item[_ngcontent-%COMP%]   .navigate-icon[_ngcontent-%COMP%]{color:#3f51b5}.client-list-container[_ngcontent-%COMP%]   .no-clients[_ngcontent-%COMP%]{text-align:center;font-size:1.35rem;color:#9ea7b8;margin-top:4rem;font-style:italic}"]})}}return i})();var AQ=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275cmp=ae({type:i,selectors:[["app-terms"]],decls:89,vars:75,consts:[[1,"terms-card","mat-elevation-z4"],[1,"terms-card__title"],[1,"terms-card__intro"],[1,"terms-card__section"],[1,"terms-card__section-title"],[1,"terms-card__section-content"],[1,"terms-card__list"]],template:function(n,r){n&1&&(j(0,"app-navigation"),f(1,"mat-card",0)(2,"h2",1),y(3),O(4,"translate"),p(),f(5,"p",2),y(6),O(7,"translate"),p(),f(8,"section",3)(9,"h3",4),y(10),O(11,"translate"),p(),f(12,"p",5),y(13),O(14,"translate"),p()(),f(15,"section",3)(16,"h3",4),y(17),O(18,"translate"),p(),f(19,"p",5),y(20),O(21,"translate"),p(),f(22,"ul",6)(23,"li"),y(24),O(25,"translate"),p(),f(26,"li"),y(27),O(28,"translate"),p(),f(29,"li"),y(30),O(31,"translate"),p()()(),f(32,"section",3)(33,"h3",4),y(34),O(35,"translate"),p(),f(36,"p",5),y(37),O(38,"translate"),p()(),f(39,"section",3)(40,"h3",4),y(41),O(42,"translate"),p(),f(43,"p",5),y(44),O(45,"translate"),p()(),f(46,"section",3)(47,"h3",4),y(48),O(49,"translate"),p(),f(50,"p",5),y(51),O(52,"translate"),p()(),f(53,"section",3)(54,"h3",4),y(55),O(56,"translate"),p(),f(57,"p",5),y(58),O(59,"translate"),p()(),f(60,"section",3)(61,"h3",4),y(62),O(63,"translate"),p(),f(64,"p",5),y(65),O(66,"translate"),p()(),f(67,"section",3)(68,"h3",4),y(69),O(70,"translate"),p(),f(71,"p",5),y(72),O(73,"translate"),p()(),f(74,"section",3)(75,"h3",4),y(76),O(77,"translate"),p(),f(78,"p",5),y(79),O(80,"translate"),p()(),f(81,"section",3)(82,"h3",4),y(83),O(84,"translate"),p(),f(85,"p",5),y(86),O(87,"translate"),p()()(),j(88,"app-footer")),n&2&&(g(3),B(P(4,25,"TERMS.TITLE")),g(3),B(P(7,27,"TERMS.WELCOME")),g(4),B(P(11,29,"TERMS.SECTION1.TITLE")),g(3),B(P(14,31,"TERMS.SECTION1.CONTENT")),g(4),B(P(18,33,"TERMS.SECTION2.TITLE")),g(3),B(P(21,35,"TERMS.SECTION2.CONTENT")),g(4),B(P(25,37,"TERMS.SECTION2.POINT1")),g(3),B(P(28,39,"TERMS.SECTION2.POINT2")),g(3),B(P(31,41,"TERMS.SECTION2.POINT3")),g(4),B(P(35,43,"TERMS.SECTION3.TITLE")),g(3),B(P(38,45,"TERMS.SECTION3.CONTENT")),g(4),B(P(42,47,"TERMS.SECTION4.TITLE")),g(3),B(P(45,49,"TERMS.SECTION4.CONTENT")),g(4),B(P(49,51,"TERMS.SECTION5.TITLE")),g(3),B(P(52,53,"TERMS.SECTION5.CONTENT")),g(4),B(P(56,55,"TERMS.SECTION6.TITLE")),g(3),B(P(59,57,"TERMS.SECTION6.CONTENT")),g(4),B(P(63,59,"TERMS.SECTION7.TITLE")),g(3),B(P(66,61,"TERMS.SECTION7.CONTENT")),g(4),B(P(70,63,"TERMS.SECTION8.TITLE")),g(3),B(P(73,65,"TERMS.SECTION8.CONTENT")),g(4),B(P(77,67,"TERMS.SECTION9.TITLE")),g(3),B(P(80,69,"TERMS.SECTION9.CONTENT")),g(4),B(P(84,71,"TERMS.SECTION10.TITLE")),g(3),B(P(87,73,"TERMS.SECTION10.CONTENT")))},dependencies:[bs,gn,_n,Ai],styles:[".terms-card[_ngcontent-%COMP%]{background:#fff;border-radius:12px;padding:2rem 2.5rem;max-width:800px;margin:2rem auto;box-shadow:0 6px 18px #0000001a;font-family:Roboto,sans-serif;color:#222;line-height:1.6;transition:box-shadow .3s ease}.terms-card[_ngcontent-%COMP%]:hover{box-shadow:0 10px 25px #00000026}.terms-card__title[_ngcontent-%COMP%]{font-size:2.4rem;font-weight:700;margin-bottom:1.2rem;color:#0d47a1}.terms-card__intro[_ngcontent-%COMP%]{font-size:1.15rem;margin-bottom:2rem;color:#444}.terms-card__section[_ngcontent-%COMP%]{margin-bottom:2.5rem}.terms-card__section[_ngcontent-%COMP%]:last-child{margin-bottom:0}.terms-card__section-title[_ngcontent-%COMP%]{font-size:1.5rem;font-weight:600;margin-bottom:.75rem;color:#1565c0;border-left:4px solid #1565c0;padding-left:.8rem}.terms-card__section-content[_ngcontent-%COMP%]{font-size:1rem;color:#333;margin-bottom:1rem}.terms-card__list[_ngcontent-%COMP%]{padding-left:1.4rem;list-style-type:disc;color:#555;font-size:1rem}.terms-card__list[_ngcontent-%COMP%]   li[_ngcontent-%COMP%]{margin-bottom:.5rem}"]})}}return i})();var $Ae=[{path:"login",component:OW},{path:"sheintable",component:KC,canActivate:[Yo]},{path:"client",component:RW,canActivate:[Yo]},{path:"client-details/:id",component:DQ,canActivate:[Yo]},{path:"clients",component:MQ,canActivate:[Yo]},{path:"analysic",component:DY,canActivate:[Yo]},{path:"aboutme",component:LW,canActivate:[Yo]},{path:"settings",component:WY,canActivate:[Yo]},{path:"terms",component:AQ,canActivate:[Yo]},{path:"history",component:QY,canActivate:[Yo]},{path:"",redirectTo:"/login",pathMatch:"full"},{path:"**",redirectTo:"/login"}],OQ=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[mS.forRoot($Ae,{scrollPositionRestoration:"enabled"}),mS]})}}return i})();var PQ=(()=>{class i{constructor(e){this.afAuth=e,this.loading$=new Xo(!0),this.isAuthenticated$=new Xo(!1),this.afAuth.authState.subscribe(n=>{this.isAuthenticated$.next(!!n),this.loading$.next(!1)})}static{this.\u0275fac=function(n){return new(n||i)(V(Yt))}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac,providedIn:"root"})}}return i})();function YAe(i,t){i&1&&j(0,"app-loader")}function QAe(i,t){i&1&&j(0,"router-outlet")}var J1=(()=>{class i{onUnload(){this.firebaseService.setUserOnlineStatus(!1)}constructor(e,n,r){this.authService=e,this.translate=n,this.firebaseService=r,this.title="Shein",this.translate.onLangChange.subscribe(s=>{document.body.dir=s.lang==="ar"?"rtl":"ltr"})}static{this.\u0275fac=function(n){return new(n||i)(x(PQ),x(hu),x(tc))}}static{this.\u0275cmp=ae({type:i,selectors:[["app-root"]],hostBindings:function(n,r){n&1&&$("beforeunload",function(){return r.onUnload()},!1,Iu)},decls:4,vars:6,consts:[[4,"ngIf"]],template:function(n,r){n&1&&(Y(0,YAe,1,0,"app-loader",0),O(1,"async"),Y(2,QAe,1,0,"router-outlet",0),O(3,"async")),n&2&&(z("ngIf",P(1,2,r.authService.loading$)),g(2),z("ngIf",!P(3,4,r.authService.loading$)))},dependencies:[Rt,o0,gf,i0],styles:[".loader-overlay[_ngcontent-%COMP%]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:9999;background-color:#fff;display:flex;justify-content:center;align-items:center}"]})}}return i})();var XAe="@",ZAe=(()=>{class i{constructor(e,n,r,s,o){this.doc=e,this.delegate=n,this.zone=r,this.animationType=s,this.moduleImpl=o,this._rendererFactoryPromise=null,this.scheduler=He($N,{optional:!0})}ngOnDestroy(){this._engine?.flush()}loadImpl(){return(this.moduleImpl??import("./chunk-4CJ7DXRP.mjs")).catch(n=>{throw new Eu(5300,!1)}).then(({\u0275createEngine:n,\u0275AnimationRendererFactory:r})=>{this._engine=n(this.animationType,this.doc,this.scheduler);let s=new r(this.delegate,this._engine,this.zone);return this.delegate=s,s})}createRenderer(e,n){let r=this.delegate.createRenderer(e,n);if(r.\u0275type===0)return r;typeof r.throwOnSyntheticProps=="boolean"&&(r.throwOnSyntheticProps=!1);let s=new AN(r);return n?.data?.animation&&!this._rendererFactoryPromise&&(this._rendererFactoryPromise=this.loadImpl()),this._rendererFactoryPromise?.then(o=>{let a=o.createRenderer(e,n);s.use(a)}).catch(o=>{s.use(r)}),s}begin(){this.delegate.begin?.()}end(){this.delegate.end?.()}whenRenderingDone(){return this.delegate.whenRenderingDone?.()??Promise.resolve()}static{this.\u0275fac=function(n){Du()}}static{this.\u0275prov=me({token:i,factory:i.\u0275fac})}}return i})(),AN=class{constructor(t){this.delegate=t,this.replay=[],this.\u0275type=1}use(t){if(this.delegate=t,this.replay!==null){for(let e of this.replay)e(t);this.replay=null}}get data(){return this.delegate.data}destroy(){this.replay=null,this.delegate.destroy()}createElement(t,e){return this.delegate.createElement(t,e)}createComment(t){return this.delegate.createComment(t)}createText(t){return this.delegate.createText(t)}get destroyNode(){return this.delegate.destroyNode}appendChild(t,e){this.delegate.appendChild(t,e)}insertBefore(t,e,n,r){this.delegate.insertBefore(t,e,n,r)}removeChild(t,e,n){this.delegate.removeChild(t,e,n)}selectRootElement(t,e){return this.delegate.selectRootElement(t,e)}parentNode(t){return this.delegate.parentNode(t)}nextSibling(t){return this.delegate.nextSibling(t)}setAttribute(t,e,n,r){this.delegate.setAttribute(t,e,n,r)}removeAttribute(t,e,n){this.delegate.removeAttribute(t,e,n)}addClass(t,e){this.delegate.addClass(t,e)}removeClass(t,e){this.delegate.removeClass(t,e)}setStyle(t,e,n,r){this.delegate.setStyle(t,e,n,r)}removeStyle(t,e,n){this.delegate.removeStyle(t,e,n)}setProperty(t,e,n){this.shouldReplay(e)&&this.replay.push(r=>r.setProperty(t,e,n)),this.delegate.setProperty(t,e,n)}setValue(t,e){this.delegate.setValue(t,e)}listen(t,e,n){return this.shouldReplay(e)&&this.replay.push(r=>r.listen(t,e,n)),this.delegate.listen(t,e,n)}shouldReplay(t){return this.replay!==null&&t.startsWith(XAe)}};function RQ(i="animations"){return YN("NgAsyncAnimations"),jc([{provide:KN,useFactory:(t,e,n)=>new ZAe(t,e,n,i),deps:[Ze,dL,_e]},{provide:Ut,useValue:i==="noop"?"NoopAnimations":"BrowserAnimations"}])}var FQ=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[ze]})}}return i})();var NQ=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i})}static{this.\u0275inj=ce({imports:[Zm,KR,h2,gc,aW,pW,z7,yW,xW,XC,FQ,CW,KY,Zm,Q1,f7,h2,gc,dQ,wQ,TQ,KR,Zm]})}}return i})();var mGe=Ub(WQ(),1);var JOe="auth";var eS=class{constructor(){return tp(JOe)}};var zb=class{constructor(t){return t}},LQ="firestore",ON=class{constructor(){return tp(LQ)}};var PN=new te("angularfire2.firestore-instances");function ePe(i,t){let e=wS(LQ,i,t);return e&&new zb(e)}function tPe(i){return(t,e)=>{let n=t.runOutsideAngular(()=>i(e));return new zb(n)}}var iPe={provide:ON,deps:[[new wr,PN]]},nPe={provide:zb,useFactory:ePe,deps:[[new wr,PN],Wc]};function BQ(i,...t){return ln("angularfire",kr.full,"fst"),jc([nPe,iPe,{provide:PN,useFactory:tPe(i),multi:!0,deps:[_e,xn,ks,ip,[new wr,eS],[new wr,Qr],...t]}])}var tS={apiKey:"AIzaSyBordW3FDRtiqFD4VlJXqdl2XrUZzV-j2o",authDomain:"loginshein-e7033.firebaseapp.com",projectId:"loginshein-e7033",storageBucket:"loginshein-e7033.appspot.com",messagingSenderId:"435758152351",appId:"1:435758152351:web:c13ece8239dc1bf62fc0aa",measurementId:"G-20LVKBMFHK"},rPe=ep(tS),a$e=Ug(rPe);var VQ=(()=>{class i{static \u0275fac=function(n){return new(n||i)};static \u0275mod=de({type:i});static \u0275inj=ce({})}return i})();var zQ=(()=>{class i{http;prefix;suffix;constructor(e,n="/assets/i18n/",r=".json"){this.http=e,this.prefix=n,this.suffix=r}getTranslation(e){return this.http.get(`${this.prefix}${e}${this.suffix}`)}static \u0275fac=function(n){return new(n||i)(V(ja),V(String),V(String))};static \u0275prov=me({token:i,factory:i.\u0275fac})}return i})();function sPe(i){return new zQ(i,"./assets/i18n/",".json")}var jQ=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i,bootstrap:[J1]})}static{this.\u0275inj=ce({providers:[mL(),RQ(),DL(()=>ep(tS)),BQ(()=>Ug()),aL(lL()),{provide:Mi,useFactory:()=>new Mi("rtl")}],imports:[OS.initializeApp({apiKey:"AIzaSyBordW3FDRtiqFD4VlJXqdl2XrUZzV-j2o",authDomain:"loginshein-e7033.firebaseapp.com",projectId:"loginshein-e7033",storageBucket:"loginshein-e7033.appspot.com",messagingSenderId:"435758152351",appId:"1:435758152351:web:c13ece8239dc1bf62fc0aa",measurementId:"G-20LVKBMFHK"}),DW.forRoot({defaultLanguage:"en",loader:{provide:vc,useFactory:sPe,deps:[ja]}}),uL,OQ,B9,L9,OS.initializeApp(tS),Y6,cL,NQ,XC,TY,Q1,VQ]})}}return i})();var oPe=(()=>{class i{static{this.\u0275fac=function(n){return new(n||i)}}static{this.\u0275mod=de({type:i,bootstrap:[J1]})}static{this.\u0275inj=ce({imports:[jQ,gL]})}}return i})();export{Io as a,oPe as b};
